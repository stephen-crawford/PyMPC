2026-01-21 12:02:44,072 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 12:02:44,072 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 12:02:44,072 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 12:02:44,072 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 12:02:44,073 - INFO - integration_test - Creating objective module: contouring
2026-01-21 12:02:44,080 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 12:02:44,080 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 12:02:44,080 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 12:02:44,091 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 12:02:44,091 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 12:02:44,098 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 12:02:44,098 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 12:02:44,118 - INFO - integration_test - Setting solver on all modules...
2026-01-21 12:02:44,119 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 12:02:44,119 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 12:02:44,119 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 12:02:44,119 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 12:02:44,119 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 12:02:44,119 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 12:02:44,120 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 12:02:44,120 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 12:02:44,120 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 12:02:44,120 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 12:02:44,121 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 12:02:44,121 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 12:02:44,121 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 12:02:44,121 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 12:02:44,121 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 12:02:44,122 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 12:02:44,122 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 12:02:44,122 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 12:02:44,122 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 12:02:44,122 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 12:02:44,127 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:44,146 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 12:02:44,146 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 12:02:44,306 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:44,337 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:02:44,337 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 12:02:44,337 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:02:44,339 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 12:02:44,340 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:44,340 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:44,362 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:44,558 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:44,586 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:44,646 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:44,685 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:44,769 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:44,809 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:44,900 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:44,933 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:45,016 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:45,054 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:45,139 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:45,175 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:45,252 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:45,280 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:45,360 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:45,402 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:45,484 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:45,519 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:45,600 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:45,629 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:45,689 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:46,880 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 12:02:47,168 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 12:02:47,168 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:02:47,168 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 12:02:47,168 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 12:02:47,168 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196572847, 'w': 0.799999998096688}
2026-01-21 12:02:47,168 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:02:47,168 - INFO - integration_test -   Planner output success: True
2026-01-21 12:02:47,170 - INFO - integration_test - Step 0 completed in 3.048s
2026-01-21 12:02:47,237 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 12:02:47,242 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 12:02:47,243 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 12:02:47,243 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 12:02:47,246 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:47,358 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 12:02:47,358 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 12:02:47,458 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:47,484 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:02:47,484 - INFO - integration_test - Warmstart k=0: x0=0.10987737537990327 , y0=0.00453084504754073 , psi0=0.07999999980966879 , v0=1.2000000019657284 , spline0=0.12000000019657285 , a0=0.0 , w0=0.0
2026-01-21 12:02:47,484 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:02:47,485 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033398695, 0.014120608316783814, 0.07999999980966879, 1.2000000019657284, 0.2400000003931457], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033398695, 0.014120608316783814, 0.07999999980966879, 1.2000000019657284, 0.2400000003931457], res_norm=1.248e+00
2026-01-21 12:02:47,486 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:47,487 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:47,504 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:47,681 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:47,707 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:47,762 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:47,787 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:47,840 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:47,864 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:47,916 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:47,939 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:47,986 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:48,008 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:48,055 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:48,076 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:48,125 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:48,147 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:48,197 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:48,218 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:48,265 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:48,287 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:48,344 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:48,369 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:48,418 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:49,091 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 12:02:49,185 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 12:02:49,186 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:02:49,186 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 12:02:49,186 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000183779734, 'w': 0.799999936429223}
2026-01-21 12:02:49,186 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:02:49,186 - INFO - integration_test -   Planner output success: True
2026-01-21 12:02:49,187 - INFO - integration_test - Step 1 completed in 1.945s
2026-01-21 12:02:49,247 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 12:02:49,248 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-21 12:02:49,249 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 12:02:49,249 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 12:02:49,252 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:49,355 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 12:02:49,355 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 12:02:49,448 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:49,472 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:02:49,472 - INFO - integration_test - Warmstart k=0: x0=0.23889212823781655 , y0=0.020221621304217213 , psi0=0.15999999345259108 , v0=1.4000000038035258 , spline0=0.26000000057692546 , a0=0.0 , w0=0.0
2026-01-21 12:02:49,472 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:02:49,473 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039484319358, 0.042526169385879435, 0.15999999345259108, 1.4000000038035258, 0.40000000095727806], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.3771039484319358, 0.042526169385879435, 0.15999999345259108, 1.4000000038035258, 0.40000000095727806], res_norm=1.513e+00
2026-01-21 12:02:49,474 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:49,475 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:49,492 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:49,642 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:49,662 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:49,711 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:49,733 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:49,782 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:49,804 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:49,849 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:49,870 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:49,920 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:49,941 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:49,989 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:50,012 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:50,057 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:50,077 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:50,128 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:50,149 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:50,203 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:50,225 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:50,275 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:50,297 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:50,343 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:51,006 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 12:02:51,047 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 12:02:51,048 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:02:51,048 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 12:02:51,048 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199106887, 'w': 0.8000000045173816}
2026-01-21 12:02:51,048 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:02:51,048 - INFO - integration_test -   Planner output success: True
2026-01-21 12:02:51,049 - INFO - integration_test - Step 2 completed in 1.801s
2026-01-21 12:02:51,110 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 12:02:51,111 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999999 1.60000001 0.42      ]
2026-01-21 12:02:51,111 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 12:02:51,111 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 12:02:51,114 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:51,222 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 12:02:51,222 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 12:02:51,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:51,341 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:02:51,341 - INFO - integration_test - Warmstart k=0: x0=0.3858364359552782 , y0=0.05014471507779704 , psi0=0.23999999390432925 , v0=1.6000000057945947 , spline0=0.4200000011563849 , a0=0.0 , w0=0.0
2026-01-21 12:02:51,342 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:02:51,342 - INFO - integration_test - Dyn residual k=0: pred=[0.541250512726287, 0.08817713449652456, 0.23999999390432925, 1.6000000057945947, 0.5800000017358444], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.541250512726287, 0.08817713449652456, 0.23999999390432925, 1.6000000057945947, 0.5800000017358444], res_norm=1.804e+00
2026-01-21 12:02:51,343 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:51,344 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:51,360 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:51,568 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:51,589 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:51,636 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:51,658 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:51,707 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:51,730 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:51,776 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:51,800 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:51,845 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:51,865 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:51,917 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:51,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:51,984 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:52,007 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:52,056 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:52,077 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:52,126 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:52,147 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:52,195 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:52,216 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:52,259 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:52,940 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 12:02:52,990 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 12:02:52,990 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:02:52,990 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 12:02:52,990 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999534, 'w': 0.8000000099611076}
2026-01-21 12:02:52,990 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:02:52,991 - INFO - integration_test -   Planner output success: True
2026-01-21 12:02:52,992 - INFO - integration_test - Step 3 completed in 1.881s
2026-01-21 12:02:53,045 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 12:02:53,045 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-21 12:02:53,046 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 12:02:53,046 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 12:02:53,049 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:53,152 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 12:02:53,152 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 12:02:53,247 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:53,270 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:02:53,270 - INFO - integration_test - Warmstart k=0: x0=0.5491354617502289 , y0=0.09724075471447038 , psi0=0.31999999490044 , v0=1.8000000077945482 , spline0=0.6000000019358398 , a0=0.0 , w0=0.0
2026-01-21 12:02:53,270 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:02:53,271 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978380337015, 0.15386273499923905, 0.31999999490044, 1.8000000077945482, 0.7800000027152947], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978380337015, 0.15386273499923905, 0.31999999490044, 1.8000000077945482, 0.7800000027152947], res_norm=2.120e+00
2026-01-21 12:02:53,272 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:53,273 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:53,289 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:53,442 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:53,463 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:53,527 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:53,550 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:53,601 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:53,622 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:53,671 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:53,692 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:53,742 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:53,763 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:53,814 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:53,834 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:53,882 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:53,906 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:53,955 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:53,975 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:54,024 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:54,048 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:54,100 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:54,122 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:54,166 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:54,830 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 12:02:54,945 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 12:02:54,945 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:02:54,945 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 12:02:54,945 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019996492, 'w': 0.8000000095307721}
2026-01-21 12:02:54,945 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:02:54,945 - INFO - integration_test -   Planner output success: True
2026-01-21 12:02:54,947 - INFO - integration_test - Step 4 completed in 1.901s
2026-01-21 12:02:55,006 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 12:02:55,007 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 12:02:55,008 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 12:02:55,008 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 12:02:55,011 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:55,113 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 12:02:55,114 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 12:02:55,208 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:55,235 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:02:55,235 - INFO - integration_test - Warmstart k=0: x0=0.7268614895559444 , y0=0.16427976531515054 , psi0=0.3999999958535172 , v0=2.0000000097941975 , spline0=0.8000000029152595 , a0=0.0 , w0=0.0
2026-01-21 12:02:55,235 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:02:55,236 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736895815701, 0.24216343339445193, 0.3999999958535172, 2.0000000097941975, 1.0000000038946792], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736895815701, 0.24216343339445193, 0.3999999958535172, 2.0000000097941975, 1.0000000038946792], res_norm=2.459e+00
2026-01-21 12:02:55,237 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:55,237 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:55,253 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,404 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,424 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,468 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,489 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,540 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,561 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,609 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,630 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,676 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,697 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,746 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,770 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,816 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,837 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,882 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,906 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:55,954 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:55,974 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:56,022 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:56,042 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:56,085 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:56,892 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 12:02:56,944 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 12:02:56,945 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:02:56,945 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 12:02:56,945 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196745997, 'w': 0.7999999047344488}
2026-01-21 12:02:56,945 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:02:56,945 - INFO - integration_test -   Planner output success: True
2026-01-21 12:02:56,946 - INFO - integration_test - Step 5 completed in 1.939s
2026-01-21 12:02:57,003 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 12:02:57,003 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-21 12:02:57,004 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 12:02:57,004 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 12:02:57,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:57,112 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 12:02:57,112 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 12:02:57,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:57,234 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:02:57,234 - INFO - integration_test - Warmstart k=0: x0=0.9167519044996959 , y0=0.2538238036974524 , psi0=0.47999998632696206 , v0=2.2000000117616576 , spline0=1.0200000040914252 , a0=0.0 , w0=0.0
2026-01-21 12:02:57,234 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:02:57,235 - INFO - integration_test - Dyn residual k=0: pred=[1.111890789943455, 0.3554152201915661, 0.47999998632696206, 2.2000000117616576, 1.240000005267591], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.111890789943455, 0.3554152201915661, 0.47999998632696206, 2.2000000117616576, 1.240000005267591], res_norm=2.823e+00
2026-01-21 12:02:57,235 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:57,236 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:57,251 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,402 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,425 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,474 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,497 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,545 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,566 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,615 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,636 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,681 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,705 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,755 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,776 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,830 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,853 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,901 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,923 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:57,973 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:57,995 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:58,041 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:58,061 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:58,109 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:02:58,819 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 12:02:58,936 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 12:02:58,937 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:02:58,937 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 12:02:58,937 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000191796174, 'w': 0.7999974109271208}
2026-01-21 12:02:58,937 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:02:58,937 - INFO - integration_test -   Planner output success: True
2026-01-21 12:02:58,938 - INFO - integration_test - Step 6 completed in 1.935s
2026-01-21 12:02:58,996 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 12:02:58,997 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.36819141 0.55999973 2.40000001 1.26000001]
2026-01-21 12:02:58,997 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 12:02:58,997 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 12:02:59,000 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:59,104 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 12:02:59,104 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 12:02:59,203 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:02:59,229 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:02:59,229 - INFO - integration_test - Warmstart k=0: x0=1.1162308816900923 , y0=0.368191414425452 , psi0=0.5599997274196742 , v0=2.4000000136796196 , spline0=1.2600000054593872 , a0=0.0 , w0=0.0
2026-01-21 12:02:59,229 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:02:59,231 - INFO - integration_test - Dyn residual k=0: pred=[1.319572144242135, 0.49567604722628367, 0.5599997274196742, 2.4000000136796196, 1.5000000068273491], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.319572144242135, 0.49567604722628367, 0.5599997274196742, 2.4000000136796196, 1.5000000068273491], res_norm=3.211e+00
2026-01-21 12:02:59,232 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:59,233 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:02:59,249 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,402 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,423 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,468 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,491 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,540 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,560 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,608 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,630 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,675 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,698 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,749 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,772 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,819 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,840 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,889 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,910 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:02:59,957 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:02:59,977 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:00,025 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:00,045 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:00,087 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:00,785 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 12:03:00,837 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 12:03:00,837 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:00,837 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 12:03:00,837 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018049742, 'w': -0.1807707337350174}
2026-01-21 12:03:00,837 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:00,837 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:00,839 - INFO - integration_test - Step 7 completed in 1.842s
2026-01-21 12:03:00,889 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 12:03:00,890 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32924919 0.49904057 0.54192265 2.60000002 1.52000001]
2026-01-21 12:03:00,890 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 12:03:00,891 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 12:03:00,894 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:01,000 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 12:03:01,000 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 12:03:01,178 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:01,205 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:01,205 - INFO - integration_test - Warmstart k=0: x0=1.3292491864755922 , y0=0.4990405699598827 , psi0=0.5419226540461725 , v0=2.6000000154845937 , spline0=1.5200000070078465 , a0=0.0 , w0=0.0
2026-01-21 12:03:01,205 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:01,206 - INFO - integration_test - Dyn residual k=0: pred=[1.5519960214690367, 0.633144441289543, 0.5419226540461725, 2.6000000154845937, 1.780000008556306], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5519960214690367, 0.633144441289543, 0.5419226540461725, 2.6000000154845937, 1.780000008556306], res_norm=3.610e+00
2026-01-21 12:03:01,207 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:01,207 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:01,225 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,379 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,401 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,446 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,467 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,516 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,538 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,584 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,610 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,662 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,689 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,742 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,765 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,828 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,849 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,893 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,918 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:01,966 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:01,990 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:02,034 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:02,056 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:02,103 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:02,740 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 12:03:02,793 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 12:03:02,793 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:02,794 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 12:03:02,794 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999945471634, 'w': -0.028945008955770596}
2026-01-21 12:03:02,794 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:02,794 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:02,795 - INFO - integration_test - Step 8 completed in 1.906s
2026-01-21 12:03:02,856 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 12:03:02,860 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56076691 0.63796318 0.53902815 2.80000001 1.80000001]
2026-01-21 12:03:02,861 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 12:03:02,861 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 12:03:02,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:02,971 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 12:03:02,971 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 12:03:03,064 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:03,088 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:03,088 - INFO - integration_test - Warmstart k=0: x0=1.5607669130388486 , y0=0.6379631823544948 , psi0=0.5390281531505954 , v0=2.80000001493931 , spline0=1.8000000085017775 , a0=0.0 , w0=0.0
2026-01-21 12:03:03,088 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:03,089 - INFO - integration_test - Dyn residual k=0: pred=[1.801065136871858, 0.7816877956234207, 0.5390281531505954, 2.80000001493931, 2.0800000099957083], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.801065136871858, 0.7816877956234207, 0.5390281531505954, 2.80000001493931, 2.0800000099957083], res_norm=4.039e+00
2026-01-21 12:03:03,090 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:03,091 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:03,109 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,263 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,284 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,333 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,355 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,406 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,426 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,471 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,495 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,548 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,569 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,618 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,642 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,687 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,712 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,760 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,783 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,831 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:03,852 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,900 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:03,925 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:03,972 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:05,171 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 12:03:05,300 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 12:03:05,300 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:05,300 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 12:03:05,300 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998441, 'w': -0.07981592194260262}
2026-01-21 12:03:05,300 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:05,300 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:05,302 - INFO - integration_test - Step 9 completed in 2.442s
2026-01-21 12:03:05,355 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 12:03:05,356 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81024541 0.78581457 0.53104656 3.00000002 2.10000001]
2026-01-21 12:03:05,356 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 12:03:05,357 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 12:03:05,359 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:05,466 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 12:03:05,466 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 12:03:05,569 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:05,597 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:05,597 - INFO - integration_test - Warmstart k=0: x0=1.8102454137870247 , y0=0.7858145681967592 , psi0=0.5310465609563351 , v0=3.000000016939154 , spline0=2.100000010195693 , a0=0.0 , w0=0.0
2026-01-21 12:03:05,597 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:05,598 - INFO - integration_test - Dyn residual k=0: pred=[2.068928673240384, 0.9377453823686551, 0.5310465609563351, 3.000000016939154, 2.4000000118896083], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.068928673240384, 0.9377453823686551, 0.5310465609563351, 3.000000016939154, 2.4000000118896083], res_norm=4.495e+00
2026-01-21 12:03:05,599 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:05,600 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:05,616 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:05,770 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:05,791 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:05,843 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:05,863 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:05,912 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:05,934 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:05,983 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:06,005 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:06,050 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:06,073 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:06,121 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:06,143 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:06,192 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:06,213 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:06,258 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:06,278 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:06,328 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:06,350 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:06,394 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:06,418 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:06,463 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:07,225 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 12:03:07,273 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 12:03:07,274 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:07,274 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 12:03:07,274 - INFO - integration_test -   Control dict from planner: {'a': 1.305108430480926e-07, 'w': -0.05790329718375095}
2026-01-21 12:03:07,274 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:07,274 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:07,275 - INFO - integration_test - Step 10 completed in 1.919s
2026-01-21 12:03:07,336 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 12:03:07,336 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06936709 0.93699561 0.52525623 3.00000003 2.40000001]
2026-01-21 12:03:07,337 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 12:03:07,337 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 12:03:07,340 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:07,447 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 12:03:07,447 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 12:03:07,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:07,568 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:07,568 - INFO - integration_test - Warmstart k=0: x0=2.069367091813574 , y0=0.9369956051211954 , psi0=0.52525623123796 , v0=3.0000000299902383 , spline0=2.400000013194717 , a0=0.0 , w0=0.0
2026-01-21 12:03:07,568 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:07,569 - INFO - integration_test - Dyn residual k=0: pred=[2.328925740445164, 1.0874260199978316, 0.52525623123796, 3.0000000299902383, 2.7000000161937407], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.328925740445164, 1.0874260199978316, 0.52525623123796, 3.0000000299902383, 2.7000000161937407], res_norm=4.814e+00
2026-01-21 12:03:07,570 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:07,571 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:07,587 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:07,820 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:07,843 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:07,893 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:07,915 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:07,962 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:07,985 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:08,033 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:08,053 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:08,100 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:08,124 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:08,172 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:08,193 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:08,242 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:08,263 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:08,310 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:08,331 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:08,382 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:08,403 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:08,446 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:08,466 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:08,513 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:09,099 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 12:03:09,160 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 12:03:09,160 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:09,160 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 12:03:09,160 - INFO - integration_test -   Control dict from planner: {'a': -2.092923510741727e-07, 'w': -0.054436444756696414}
2026-01-21 12:03:09,160 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:09,160 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:09,161 - INFO - integration_test - Step 11 completed in 1.825s
2026-01-21 12:03:09,221 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 12:03:09,222 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.3293339  1.08671881 0.51981259 3.00000001 2.70000001]
2026-01-21 12:03:09,223 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 12:03:09,223 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 12:03:09,226 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:09,330 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 12:03:09,330 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 12:03:09,427 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:09,451 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:09,451 - INFO - integration_test - Warmstart k=0: x0=2.329333901448834 , y0=1.0867188057628607 , psi0=0.5198125867622903 , v0=3.000000009061003 , spline0=2.700000014100817 , a0=0.0 , w0=0.0
2026-01-21 12:03:09,451 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:09,452 - INFO - integration_test - Dyn residual k=0: pred=[2.589707588140841, 1.2357340527078384, 0.5198125867622903, 3.000000009061003, 3.0000000150069175], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.589707588140841, 1.2357340527078384, 0.5198125867622903, 3.000000009061003, 3.0000000150069175], res_norm=5.148e+00
2026-01-21 12:03:09,453 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:09,454 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:09,469 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:09,667 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:09,688 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:09,739 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:09,761 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:09,812 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:09,833 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:09,886 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:09,916 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:09,971 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:09,992 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:10,037 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:10,061 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:10,108 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:10,130 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:10,178 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:10,203 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:10,250 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:10,270 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:10,318 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:10,339 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:10,384 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:11,062 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 12:03:11,119 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 12:03:11,119 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:11,120 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 12:03:11,120 - INFO - integration_test -   Control dict from planner: {'a': 2.0937156965224248e-07, 'w': -0.06806881237012052}
2026-01-21 12:03:11,120 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:11,120 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:11,121 - INFO - integration_test - Step 12 completed in 1.899s
2026-01-21 12:03:11,177 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 12:03:11,180 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59021274 1.23484674 0.51300571 3.00000003 3.00000002]
2026-01-21 12:03:11,181 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-21 12:03:11,181 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 12:03:11,186 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:11,374 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.870m
2026-01-21 12:03:11,374 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 12:03:11,469 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:11,494 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:11,494 - INFO - integration_test - Warmstart k=0: x0=2.590212740966187 , y0=1.2348467395305307 , psi0=0.5130057055252782 , v0=3.00000002999816 , spline0=3.000000017100633 , a0=0.0 , w0=0.0
2026-01-21 12:03:11,494 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:11,495 - INFO - integration_test - Dyn residual k=0: pred=[2.8515947187319206, 1.382086216231458, 0.5130057055252782, 3.00000002999816, 3.300000020100449], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.8515947187319206, 1.382086216231458, 0.5130057055252782, 3.00000002999816, 3.300000020100449], res_norm=5.495e+00
2026-01-21 12:03:11,496 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:11,498 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:11,516 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:11,669 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:11,691 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:11,739 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:11,760 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:11,811 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:11,832 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:11,876 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:11,899 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:11,950 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:11,974 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:12,021 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:12,042 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:12,090 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:12,113 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:12,161 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:12,184 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:12,231 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:12,251 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:12,297 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:12,318 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:12,367 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:13,292 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 12:03:13,351 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 12:03:13,351 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:13,351 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 12:03:13,351 - INFO - integration_test -   Control dict from planner: {'a': -5.227879832394677e-07, 'w': -0.05440226556163552}
2026-01-21 12:03:13,351 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:13,351 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:13,353 - INFO - integration_test - Step 13 completed in 2.173s
2026-01-21 12:03:13,418 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 12:03:13,419 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85199393 1.3813745  0.50756548 2.99999998 3.30000001]
2026-01-21 12:03:13,420 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.146m, drift=0.370m)
2026-01-21 12:03:13,420 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 12:03:13,423 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:13,527 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 12:03:13,527 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 12:03:13,624 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:13,648 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:13,648 - INFO - integration_test - Warmstart k=0: x0=2.851993934206661 , y0=1.3813745018382413 , psi0=0.5075654789691146 , v0=2.9999999777193618 , spline0=3.300000014872569 , a0=0.0 , w0=0.0
2026-01-21 12:03:13,648 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:13,649 - INFO - integration_test - Dyn residual k=0: pred=[3.114173051634248, 1.5271898269863664, 0.5075654789691146, 2.9999999777193618, 3.6000000126445055], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.114173051634248, 1.5271898269863664, 0.5075654789691146, 2.9999999777193618, 3.6000000126445055], res_norm=5.852e+00
2026-01-21 12:03:13,650 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:13,651 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:13,669 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:13,822 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:13,843 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:13,890 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:13,915 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:13,975 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:14,009 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:14,074 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:14,097 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:14,146 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:14,168 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:14,216 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:14,237 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:14,283 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:14,306 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:14,357 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:14,379 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:14,429 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:14,450 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:14,497 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:14,518 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:14,564 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:15,353 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 12:03:15,497 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 12:03:15,498 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:15,498 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 12:03:15,499 - INFO - integration_test -   Control dict from planner: {'a': 5.228051486385603e-07, 'w': -0.06709611388557706}
2026-01-21 12:03:15,499 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:15,499 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:15,501 - INFO - integration_test - Step 14 completed in 2.082s
2026-01-21 12:03:15,557 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 12:03:15,558 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11466027 1.52630918 0.50085587 3.00000003 3.60000002]
2026-01-21 12:03:15,559 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 12:03:15,559 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 12:03:15,562 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:15,667 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 12:03:15,667 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 12:03:15,770 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:15,796 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:15,797 - INFO - integration_test - Warmstart k=0: x0=3.1146602670083263 , y0=1.5263091774790183 , psi0=0.5008558675805569 , v0=3.000000029999877 , spline0=3.600000017872557 , a0=0.0 , w0=0.0
2026-01-21 12:03:15,797 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:15,798 - INFO - integration_test - Dyn residual k=0: pred=[3.3778118443636322, 1.670362116134941, 0.5008558675805569, 3.000000029999877, 3.9000000208725445], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3778118443636322, 1.670362116134941, 0.5008558675805569, 3.000000029999877, 3.9000000208725445], res_norm=6.218e+00
2026-01-21 12:03:15,799 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:15,799 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:15,815 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:15,969 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:15,996 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,044 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:16,064 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,112 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:16,136 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,185 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:16,208 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,255 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:16,277 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,323 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:16,345 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,394 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:16,416 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,461 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:16,480 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,530 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:16,553 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,599 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:16,620 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:16,666 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:17,363 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 12:03:17,428 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 12:03:17,428 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:17,428 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 12:03:17,428 - INFO - integration_test -   Control dict from planner: {'a': -7.509267930068118e-08, 'w': -0.0577691134968727}
2026-01-21 12:03:17,428 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:17,428 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:17,429 - INFO - integration_test - Step 15 completed in 1.872s
2026-01-21 12:03:17,483 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 12:03:17,484 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37822647 1.66960122 0.49507896 3.00000002 3.90000002]
2026-01-21 12:03:17,484 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.146m, drift=0.482m)
2026-01-21 12:03:17,484 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 12:03:17,487 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:17,600 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.670), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 12:03:17,600 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 12:03:17,691 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:17,719 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:17,719 - INFO - integration_test - Warmstart k=0: x0=3.3782264697271245 , y0=1.6696012151648787 , psi0=0.4950789562308696 , v0=3.000000022490609 , spline0=3.9000000201216176 , a0=0.0 , w0=0.0
2026-01-21 12:03:17,719 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:17,720 - INFO - integration_test - Dyn residual k=0: pred=[3.642205831821528, 1.812131554874249, 0.4950789562308696, 3.000000022490609, 4.200000022370679], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.642205831821528, 1.812131554874249, 0.4950789562308696, 3.000000022490609, 4.200000022370679], res_norm=6.590e+00
2026-01-21 12:03:17,721 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:17,721 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:17,737 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:17,984 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,009 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,055 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,078 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,127 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,149 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,196 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,220 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,266 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,286 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,335 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,360 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,409 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,431 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,478 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,503 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,550 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:18,572 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,632 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:18,672 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:18,734 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:19,611 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 12:03:19,670 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 12:03:19,670 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:19,670 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 12:03:19,670 - INFO - integration_test -   Control dict from planner: {'a': 7.062129593492178e-08, 'w': -0.08413453534339038}
2026-01-21 12:03:19,670 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:19,670 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:19,671 - INFO - integration_test - Step 16 completed in 2.188s
2026-01-21 12:03:19,730 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 12:03:19,736 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.6428023  1.81101939 0.4866655  3.00000003 4.20000002]
2026-01-21 12:03:19,736 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.144m, drift=0.294m)
2026-01-21 12:03:19,736 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 12:03:19,739 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:19,845 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 12:03:19,845 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 12:03:19,942 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:19,969 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:19,969 - INFO - integration_test - Warmstart k=0: x0=3.6428023004536474 , y0=1.8110193910183543 , psi0=0.4866655026965306 , v0=3.0000000295527385 , spline0=4.200000023076892 , a0=0.0 , w0=0.0
2026-01-21 12:03:19,969 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:19,970 - INFO - integration_test - Dyn residual k=0: pred=[3.9079714784223256, 1.951323734602506, 0.4866655026965306, 3.0000000295527385, 4.500000026032166], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9079714784223256, 1.951323734602506, 0.4866655026965306, 3.0000000295527385, 4.500000026032166], res_norm=6.969e+00
2026-01-21 12:03:19,971 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:19,972 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:19,991 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,143 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,167 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,217 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,238 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,286 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,308 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,355 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,376 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,424 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,444 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,489 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,513 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,562 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,583 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,630 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,652 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,700 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:20,723 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,771 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:20,793 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:20,838 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:21,472 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 12:03:21,637 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 12:03:21,638 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:21,638 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 12:03:21,638 - INFO - integration_test -   Control dict from planner: {'a': 4.14040079537297e-09, 'w': -0.021458240574235163}
2026-01-21 12:03:21,638 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:21,638 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:21,639 - INFO - integration_test - Step 17 completed in 1.904s
2026-01-21 12:03:21,693 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 12:03:21,700 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90812181 1.95103912 0.48451968 3.00000003 4.50000003]
2026-01-21 12:03:21,700 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 12:03:21,700 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 12:03:21,704 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:21,815 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.951), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 12:03:21,815 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 12:03:21,925 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:21,953 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:21,953 - INFO - integration_test - Warmstart k=0: x0=3.9081218091028993 , y0=1.951039123847354 , psi0=0.48451967863910705 , v0=3.0000000299667784 , spline0=4.50000002607357 , a0=0.0 , w0=0.0
2026-01-21 12:03:21,953 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:21,955 - INFO - integration_test - Dyn residual k=0: pred=[4.173591444819413, 2.090774138466267, 0.48451967863910705, 3.0000000299667784, 4.800000029070247], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.173591444819413, 2.090774138466267, 0.48451967863910705, 3.0000000299667784, 4.800000029070247], res_norm=7.353e+00
2026-01-21 12:03:21,956 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:21,956 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:21,975 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,141 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,169 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,223 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,246 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,295 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,319 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,369 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,393 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,441 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,465 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,515 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,539 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,591 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,614 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,661 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,684 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,738 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:22,764 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,847 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:22,883 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:22,937 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:23,610 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 12:03:23,685 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 12:03:23,686 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:23,686 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 12:03:23,686 - INFO - integration_test -   Control dict from planner: {'a': -1.0223417176004396e-08, 'w': -0.07849713073958409}
2026-01-21 12:03:23,686 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:23,686 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:23,687 - INFO - integration_test - Step 18 completed in 1.988s
2026-01-21 12:03:23,753 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 12:03:23,754 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17413716 2.08973078 0.47666997 3.00000003 4.80000003]
2026-01-21 12:03:23,755 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.127m, drift=0.405m)
2026-01-21 12:03:23,755 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 12:03:23,758 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:23,874 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 12:03:23,874 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 12:03:23,983 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:24,010 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:24,010 - INFO - integration_test - Warmstart k=0: x0=4.174137155567774 , y0=2.0897307785304005 , psi0=0.4766699655651486 , v0=3.0000000289444366 , spline0=4.800000028968014 , a0=0.0 , w0=0.0
2026-01-21 12:03:24,010 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:24,011 - INFO - integration_test - Dyn residual k=0: pred=[4.440695480888648, 2.227377648959034, 0.4766699655651486, 3.0000000289444366, 5.100000031862457], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440695480888648, 2.227377648959034, 0.4766699655651486, 3.0000000289444366, 5.100000031862457], res_norm=7.741e+00
2026-01-21 12:03:24,012 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:24,013 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:24,030 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,201 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,222 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,272 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,294 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,340 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,362 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,412 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,432 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,476 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,501 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,556 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,588 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,645 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,669 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,722 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,747 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,801 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:24,825 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,872 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:24,893 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:24,947 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:25,802 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 12:03:25,981 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 12:03:25,981 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:25,981 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 12:03:25,981 - INFO - integration_test -   Control dict from planner: {'a': 1.0551036576479566e-08, 'w': -0.04314286181847204}
2026-01-21 12:03:25,981 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:25,981 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:25,982 - INFO - integration_test - Step 19 completed in 2.228s
2026-01-21 12:03:26,043 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 12:03:26,046 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44099158 2.22680222 0.47235568 3.00000003 5.10000003]
2026-01-21 12:03:26,046 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.154m, drift=0.217m)
2026-01-21 12:03:26,046 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 12:03:26,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:26,169 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 12:03:26,169 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 12:03:26,270 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:26,298 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:26,298 - INFO - integration_test - Warmstart k=0: x0=4.44099157756012 , y0=2.226802218420576 , psi0=0.4723556793833014 , v0=3.00000002999954 , spline0=5.1000000319679675 , a0=0.0 , w0=0.0
2026-01-21 12:03:26,298 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:26,299 - INFO - integration_test - Dyn residual k=0: pred=[4.7081412683938915, 2.3632978025520512, 0.4723556793833014, 3.00000002999954, 5.400000034967921], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.7081412683938915, 2.3632978025520512, 0.4723556793833014, 3.00000002999954, 5.400000034967921], res_norm=8.132e+00
2026-01-21 12:03:26,300 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:26,300 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:26,317 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:26,504 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:26,530 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:26,585 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:26,613 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:26,678 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:26,701 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:26,750 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:26,774 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:26,827 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:26,850 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:26,901 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:26,927 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:26,979 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:27,002 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:27,055 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:27,079 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:27,130 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:27,154 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:27,204 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:27,226 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:27,291 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:28,128 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 12:03:28,201 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 12:03:28,202 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:28,202 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 12:03:28,202 - INFO - integration_test -   Control dict from planner: {'a': -2.179242060155553e-11, 'w': -0.06487373460195975}
2026-01-21 12:03:28,202 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:28,202 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:28,204 - INFO - integration_test - Step 20 completed in 2.158s
2026-01-21 12:03:28,268 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 12:03:28,269 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70858214 2.3624303  0.46586831 3.00000003 5.40000003]
2026-01-21 12:03:28,269 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 12:03:28,269 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 12:03:28,273 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:28,383 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.709, 2.362), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 12:03:28,383 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 12:03:28,603 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:28,631 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:28,631 - INFO - integration_test - Warmstart k=0: x0=4.7085821418824505 , y0=2.3624302982602714 , psi0=0.46586830592310546 , v0=3.000000029997361 , spline0=5.400000034967704 , a0=0.0 , w0=0.0
2026-01-21 12:03:28,631 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:28,632 - INFO - integration_test - Dyn residual k=0: pred=[4.9766117027216366, 2.497189922466466, 0.46586830592310546, 3.000000029997361, 5.70000003796744], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.9766117027216366, 2.497189922466466, 0.46586830592310546, 3.000000029997361, 5.70000003796744], res_norm=8.527e+00
2026-01-21 12:03:28,633 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:28,634 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:28,651 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:28,838 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:28,862 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:28,911 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:28,934 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:28,981 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:29,005 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:29,055 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:29,079 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:29,134 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:29,156 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:29,209 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:29,233 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:29,283 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:29,304 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:29,349 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:29,369 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:29,422 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:29,443 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:29,491 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:29,514 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:29,560 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:30,192 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 12:03:30,262 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 12:03:30,263 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:30,263 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 12:03:30,263 - INFO - integration_test -   Control dict from planner: {'a': -5.515789419360812e-07, 'w': -0.05098461601122095}
2026-01-21 12:03:30,263 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:30,263 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:30,264 - INFO - integration_test - Step 21 completed in 1.996s
2026-01-21 12:03:30,326 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 12:03:30,327 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97695407 2.49650607 0.46076984 2.99999997 5.70000003]
2026-01-21 12:03:30,327 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 12:03:30,327 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 12:03:30,330 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:30,439 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 12:03:30,439 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 12:03:30,535 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:30,560 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:30,560 - INFO - integration_test - Warmstart k=0: x0=4.976954071688282 , y0=2.4965060696743455 , psi0=0.46076984432198337 , v0=2.999999974839467 , spline0=5.70000003245165 , a0=0.0 , w0=0.0
2026-01-21 12:03:30,560 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:30,561 - INFO - integration_test - Dyn residual k=0: pred=[5.245667207765386, 2.629897407436494, 0.46076984432198337, 2.999999974839467, 6.000000029935597], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.245667207765386, 2.629897407436494, 0.46076984432198337, 2.999999974839467, 6.000000029935597], res_norm=8.924e+00
2026-01-21 12:03:30,561 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:30,562 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:30,579 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:30,754 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:30,776 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:30,826 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:30,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:30,899 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:30,920 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:30,965 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:30,989 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:31,050 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:31,081 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:31,142 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:31,164 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:31,213 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:31,235 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:31,283 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:31,305 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:31,350 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:31,371 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:31,422 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:31,443 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:31,487 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:32,207 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 12:03:32,385 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 12:03:32,385 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:32,385 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 12:03:32,385 - INFO - integration_test -   Control dict from planner: {'a': 5.515492169142215e-07, 'w': -0.06994184321499058}
2026-01-21 12:03:32,386 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:32,386 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:32,387 - INFO - integration_test - Step 22 completed in 2.060s
2026-01-21 12:03:32,453 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 12:03:32,455 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.2461315  2.62895661 0.45377566 3.00000003 6.00000004]
2026-01-21 12:03:32,456 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 12:03:32,456 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 12:03:32,459 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:32,566 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 12:03:32,566 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 12:03:32,666 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:32,693 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:32,693 - INFO - integration_test - Warmstart k=0: x0=5.246131499301053 , y0=2.628956610329818 , psi0=0.4537756600004843 , v0=3.0000000299943883 , spline0=6.000000035451089 , a0=0.0 , w0=0.0
2026-01-21 12:03:32,693 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:32,694 - INFO - integration_test - Dyn residual k=0: pred=[5.515771023821803, 2.7604652739831566, 0.4537756600004843, 3.0000000299943883, 6.300000038450528], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.515771023821803, 2.7604652739831566, 0.4537756600004843, 3.0000000299943883, 6.300000038450528], res_norm=9.324e+00
2026-01-21 12:03:32,695 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:32,696 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:32,713 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:32,905 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:32,928 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:32,976 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:32,999 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,055 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:33,078 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,130 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:33,158 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,213 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:33,241 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,295 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:33,323 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,376 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:33,402 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,460 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:33,486 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,539 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:33,566 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,625 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:33,649 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:33,715 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:34,406 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 12:03:34,498 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 12:03:34,498 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:34,498 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 12:03:34,498 - INFO - integration_test -   Control dict from planner: {'a': -8.85431686892544e-08, 'w': -0.053461644639030886}
2026-01-21 12:03:34,498 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:34,498 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:34,500 - INFO - integration_test - Step 23 completed in 2.045s
2026-01-21 12:03:34,564 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 12:03:34,569 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51612127 2.75974388 0.4484295  3.00000002 6.30000004]
2026-01-21 12:03:34,569 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 12:03:34,569 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 12:03:34,573 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:34,692 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 12:03:34,692 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 12:03:34,800 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:34,827 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:34,827 - INFO - integration_test - Warmstart k=0: x0=5.516121271610798 , y0=2.759743880434209 , psi0=0.44842949553658124 , v0=3.0000000211400715 , spline0=6.300000037565097 , a0=0.0 , w0=0.0
2026-01-21 12:03:34,827 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:34,828 - INFO - integration_test - Dyn residual k=0: pred=[5.7864600055904525, 2.889809133975198, 0.44842949553658124, 3.0000000211400715, 6.600000039679104], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.7864600055904525, 2.889809133975198, 0.44842949553658124, 3.0000000211400715, 6.600000039679104], res_norm=9.726e+00
2026-01-21 12:03:34,829 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:34,830 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:34,846 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,018 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,041 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,089 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,113 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,161 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,183 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,265 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,303 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,360 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,384 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,437 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,459 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,509 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,530 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,581 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,609 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,660 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:35,684 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,734 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:35,759 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:35,813 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:36,574 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 12:03:36,794 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 12:03:36,794 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:36,794 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 12:03:36,794 - INFO - integration_test -   Control dict from planner: {'a': 8.78267690921263e-08, 'w': -0.06601977544430472}
2026-01-21 12:03:36,794 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:36,794 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:36,796 - INFO - integration_test - Step 24 completed in 2.228s
2026-01-21 12:03:36,870 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 12:03:36,871 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78688738 2.88891581 0.44182752 3.00000003 6.60000004]
2026-01-21 12:03:36,872 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.112m, drift=0.252m)
2026-01-21 12:03:36,872 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 12:03:36,875 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:37,022 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.889), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 12:03:37,022 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 12:03:37,133 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:37,157 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:37,157 - INFO - integration_test - Warmstart k=0: x0=5.786887384538085 , y0=2.8889158074420314 , psi0=0.44182751799215075 , v0=3.0000000299227483 , spline0=6.600000040557371 , a0=0.0 , w0=0.0
2026-01-21 12:03:37,158 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:37,158 - INFO - integration_test - Dyn residual k=0: pred=[6.0580789094719, 3.0171934695638414, 0.44182751799215075, 3.0000000299227483, 6.900000043549646], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.0580789094719, 3.0171934695638414, 0.44182751799215075, 3.0000000299227483, 6.900000043549646], res_norm=1.013e+01
2026-01-21 12:03:37,159 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:37,160 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:37,177 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,370 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:37,394 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,447 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:37,471 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,522 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:37,545 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,594 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:37,621 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,674 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:37,698 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,748 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:37,771 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,826 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:37,855 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,914 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:37,939 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:37,989 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:38,017 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:38,066 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:38,090 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:38,136 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:38,989 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 12:03:39,086 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 12:03:39,086 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:39,086 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 12:03:39,086 - INFO - integration_test -   Control dict from planner: {'a': -1.7176738736790215e-06, 'w': -0.0009682956324380404}
2026-01-21 12:03:39,086 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:39,086 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:39,088 - INFO - integration_test - Step 25 completed in 2.217s
2026-01-21 12:03:39,153 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 12:03:39,154 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05808511 3.01718034 0.44173069 2.99999986 6.90000003]
2026-01-21 12:03:39,155 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.204m, drift=0.064m)
2026-01-21 12:03:39,155 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 12:03:39,158 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:39,268 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.017), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 12:03:39,268 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 12:03:39,486 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:39,513 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:39,513 - INFO - integration_test - Warmstart k=0: x0=6.058085111819232 , y0=3.017180336013121 , psi0=0.44173068842890695 , v0=2.999999858155361 , spline0=6.900000026372908 , a0=0.0 , w0=0.0
2026-01-21 12:03:39,513 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:39,514 - INFO - integration_test - Dyn residual k=0: pred=[6.329289041023686, 3.145431730833558, 0.44173068842890695, 2.999999858155361, 7.200000012188444], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.329289041023686, 3.145431730833558, 0.44173068842890695, 2.999999858155361, 7.200000012188444], res_norm=1.054e+01
2026-01-21 12:03:39,515 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:39,516 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:39,534 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:39,715 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:39,740 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:39,790 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:39,816 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:39,905 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:39,938 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:39,988 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:40,012 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:40,061 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:40,086 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:40,140 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:40,165 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:40,221 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:40,248 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:40,303 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:40,327 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:40,378 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:40,402 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:40,449 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:40,470 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:40,522 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:41,216 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 12:03:41,298 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 12:03:41,298 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:41,298 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 12:03:41,298 - INFO - integration_test -   Control dict from planner: {'a': 1.718395885855021e-06, 'w': -0.13750854738597793}
2026-01-21 12:03:41,298 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:41,298 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:41,300 - INFO - integration_test - Step 26 completed in 2.146s
2026-01-21 12:03:41,357 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 12:03:41,358 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33016227 3.14356308 0.42797983 3.00000003 7.20000003]
2026-01-21 12:03:41,359 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.173m, drift=0.364m)
2026-01-21 12:03:41,359 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 12:03:41,363 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:41,469 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.330, 3.144), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 12:03:41,469 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 12:03:41,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:41,592 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:41,592 - INFO - integration_test - Warmstart k=0: x0=6.330162271352917 , y0=3.1435630791815288 , psi0=0.4279798336903092 , v0=3.0000000299949496 , spline0=7.2000000293724025 , a0=0.0 , w0=0.0
2026-01-21 12:03:41,592 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:41,593 - INFO - integration_test - Dyn residual k=0: pred=[6.603104086884666, 3.2680731877427602, 0.4279798336903092, 3.0000000299949496, 7.500000032371897], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.603104086884666, 3.2680731877427602, 0.4279798336903092, 3.0000000299949496, 7.500000032371897], res_norm=1.094e+01
2026-01-21 12:03:41,594 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:41,595 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:41,612 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:41,785 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:41,808 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:41,855 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:41,876 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:41,936 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:41,958 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:42,007 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:42,029 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:42,078 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:42,100 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:42,148 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:42,169 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:42,222 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:42,245 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:42,293 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:42,315 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:42,361 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:42,382 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:42,431 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:42,455 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:42,499 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:43,294 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 12:03:43,492 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 12:03:43,493 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:43,493 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 12:03:43,493 - INFO - integration_test -   Control dict from planner: {'a': -2.8747359479166318e-09, 'w': 0.7985706892056791}
2026-01-21 12:03:43,493 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:43,493 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:43,495 - INFO - integration_test - Step 27 completed in 2.136s
2026-01-21 12:03:43,549 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 12:03:43,550 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.59784522 3.27883327 0.5078369  3.00000003 7.50000003]
2026-01-21 12:03:43,551 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.112m, drift=0.175m)
2026-01-21 12:03:43,551 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 12:03:43,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:43,681 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.598, 3.279), path_start=(0.000, 0.000), dist=7.368m
2026-01-21 12:03:43,681 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 12:03:43,786 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:43,813 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:43,813 - INFO - integration_test - Warmstart k=0: x0=6.597845219871306 , y0=3.2788332715131787 , psi0=0.5078369026108771 , v0=3.000000029707476 , spline0=7.50000003234315 , a0=0.0 , w0=0.0
2026-01-21 12:03:43,813 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:43,814 - INFO - integration_test - Dyn residual k=0: pred=[6.8599847544580435, 3.424719755428232, 0.5078369026108771, 3.000000029707476, 7.800000035313898], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.8599847544580435, 3.424719755428232, 0.5078369026108771, 3.000000029707476, 7.800000035313898], res_norm=1.135e+01
2026-01-21 12:03:43,815 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:43,816 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:43,832 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,004 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,028 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,075 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,099 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,145 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,168 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,218 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,241 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,295 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,331 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,400 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,424 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,477 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,499 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,544 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,564 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,615 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:44,638 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,684 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:44,707 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:44,751 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:45,584 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 12:03:45,671 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 12:03:45,672 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:45,672 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 12:03:45,672 - INFO - integration_test -   Control dict from planner: {'a': -3.5543388316384265e-07, 'w': 0.24541720834615602}
2026-01-21 12:03:45,672 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:45,672 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:45,673 - INFO - integration_test - Step 28 completed in 2.123s
2026-01-21 12:03:45,741 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 12:03:45,742 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.85816838 3.42792163 0.53237862 2.99999999 7.80000003]
2026-01-21 12:03:45,743 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.227m, drift=0.013m)
2026-01-21 12:03:45,743 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 12:03:45,746 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:45,861 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.858, 3.428), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 12:03:45,861 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 12:03:45,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:45,982 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:45,982 - INFO - integration_test - Warmstart k=0: x0=6.858168376644009 , y0=3.4279216267154036 , psi0=0.5323786234454927 , v0=2.999999994164088 , spline0=7.800000031759559 , a0=0.0 , w0=0.0
2026-01-21 12:03:45,982 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:45,983 - INFO - integration_test - Dyn residual k=0: pred=[7.1166490233538875, 3.580196887103585, 0.5323786234454927, 2.999999994164088, 8.100000031175968], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.1166490233538875, 3.580196887103585, 0.5323786234454927, 2.999999994164088, 8.100000031175968], res_norm=1.176e+01
2026-01-21 12:03:45,986 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:45,987 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:46,005 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,172 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,195 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,243 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,268 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,315 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,336 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,382 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,407 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,455 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,475 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,527 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,549 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,594 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,619 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,667 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,688 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,735 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:46,757 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,806 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:46,827 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:46,871 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:47,571 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 12:03:47,796 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 12:03:47,796 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:47,796 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 12:03:47,796 - INFO - integration_test -   Control dict from planner: {'a': 3.5551985478582857e-07, 'w': 0.7864689770760599}
2026-01-21 12:03:47,796 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:47,796 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:47,798 - INFO - integration_test - Step 29 completed in 2.056s
2026-01-21 12:03:47,862 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 12:03:47,867 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.11039774 3.59019907 0.61102552 3.00000003 8.10000003]
2026-01-21 12:03:47,867 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.090m, drift=0.287m)
2026-01-21 12:03:47,867 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 12:03:47,871 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:47,983 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.110, 3.590), path_start=(0.000, 0.000), dist=7.965m
2026-01-21 12:03:47,983 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 12:03:48,079 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:48,108 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:48,108 - INFO - integration_test - Warmstart k=0: x0=7.110397743132002 , y0=3.590199072289639 , psi0=0.6110255211530987 , v0=3.000000029716073 , spline0=8.100000034731167 , a0=0.0 , w0=0.0
2026-01-21 12:03:48,108 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:48,109 - INFO - integration_test - Dyn residual k=0: pred=[7.356115775338208, 3.762311391522384, 0.6110255211530987, 3.000000029716073, 8.400000037702775], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.356115775338208, 3.762311391522384, 0.6110255211530987, 3.000000029716073, 8.400000037702775], res_norm=1.217e+01
2026-01-21 12:03:48,110 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:48,110 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:48,126 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,302 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,324 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,373 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,394 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,445 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,469 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,516 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,537 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,583 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,608 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,656 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,676 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,726 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,756 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,822 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,848 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,911 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:48,932 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:48,975 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:48,995 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:49,048 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:49,687 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 12:03:49,766 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 12:03:49,767 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:49,767 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 12:03:49,767 - INFO - integration_test -   Control dict from planner: {'a': -3.29861945228191e-07, 'w': 0.0987577512631842}
2026-01-21 12:03:49,767 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:49,767 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:49,768 - INFO - integration_test - Step 30 completed in 1.902s
2026-01-21 12:03:49,837 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 12:03:49,838 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.35526192 3.76352191 0.6209013  3.         8.40000003]
2026-01-21 12:03:49,838 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.100m, drift=0.099m)
2026-01-21 12:03:49,839 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 12:03:49,842 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:49,951 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.355, 3.764), path_start=(0.000, 0.000), dist=8.262m
2026-01-21 12:03:49,951 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 12:03:50,052 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:50,077 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:50,078 - INFO - integration_test - Warmstart k=0: x0=7.355261915455762 , y0=3.7635219110228446 , psi0=0.6209012962794171 , v0=2.9999999967298785 , spline0=8.400000034404155 , a0=0.0 , w0=0.0
2026-01-21 12:03:50,078 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:50,079 - INFO - integration_test - Dyn residual k=0: pred=[7.59926824759001, 3.9380524518521893, 0.6209012962794171, 2.9999999967298785, 8.700000034077142], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.59926824759001, 3.9380524518521893, 0.6209012962794171, 2.9999999967298785, 8.700000034077142], res_norm=1.258e+01
2026-01-21 12:03:50,079 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:50,080 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:50,099 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,394 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,419 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,467 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,490 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,537 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,558 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,607 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,629 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,676 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,700 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,746 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,767 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,817 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,841 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,902 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,925 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:50,973 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:50,999 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:51,048 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:51,068 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:51,119 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:52,464 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 12:03:52,555 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 12:03:52,555 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:52,555 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 12:03:52,555 - INFO - integration_test -   Control dict from planner: {'a': -4.987037712577498e-07, 'w': 0.7999871502915836}
2026-01-21 12:03:52,555 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:52,555 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:52,556 - INFO - integration_test - Step 31 completed in 2.719s
2026-01-21 12:03:52,618 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 12:03:52,624 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.59203068 3.94762124 0.70090001 2.99999995 8.70000003]
2026-01-21 12:03:52,624 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.218m, drift=0.399m)
2026-01-21 12:03:52,625 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 12:03:52,628 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:52,737 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.592, 3.948), path_start=(0.000, 0.000), dist=8.557m
2026-01-21 12:03:52,737 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 12:03:52,841 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:52,870 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:52,870 - INFO - integration_test - Warmstart k=0: x0=7.592030680064591 , y0=3.9476212449523174 , psi0=0.7009000113085755 , v0=2.9999999468595013 , spline0=8.700000029090104 , a0=0.0 , w0=0.0
2026-01-21 12:03:52,870 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:52,871 - INFO - integration_test - Dyn residual k=0: pred=[7.821309298320329, 4.141092979379622, 0.7009000113085755, 2.9999999468595013, 9.000000023776053], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.821309298320329, 4.141092979379622, 0.7009000113085755, 2.9999999468595013, 9.000000023776053], res_norm=1.299e+01
2026-01-21 12:03:52,872 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:52,873 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:52,889 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,059 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,081 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,131 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,152 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,199 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,222 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,291 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,328 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,381 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,405 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,455 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,476 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,523 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,545 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,591 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,615 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,664 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:53,684 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,730 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:53,750 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:53,794 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:54,750 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 12:03:54,838 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 12:03:54,838 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:54,838 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 12:03:54,838 - INFO - integration_test -   Control dict from planner: {'a': 6.748381354463244e-07, 'w': 0.799998847485982}
2026-01-21 12:03:54,838 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:54,838 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:54,839 - INFO - integration_test - Step 32 completed in 2.216s
2026-01-21 12:03:54,903 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 12:03:54,904 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.81333009 4.15005292 0.7808999  3.00000001 9.00000003]
2026-01-21 12:03:54,905 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.198m, drift=0.211m)
2026-01-21 12:03:54,905 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 12:03:54,908 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:55,149 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.813, 4.150), path_start=(0.000, 0.000), dist=8.847m
2026-01-21 12:03:55,149 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 12:03:55,249 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:55,275 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:55,275 - INFO - integration_test - Warmstart k=0: x0=7.813330087290798 , y0=4.150052922646828 , psi0=0.7808998960571737 , v0=3.000000014343315 , spline0=9.000000030524435 , a0=0.0 , w0=0.0
2026-01-21 12:03:55,275 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:55,276 - INFO - integration_test - Dyn residual k=0: pred=[8.026414199869917, 4.361228588448947, 0.7808998960571737, 3.000000014343315, 9.300000031958765], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.026414199869917, 4.361228588448947, 0.7808998960571737, 3.000000014343315, 9.300000031958765], res_norm=1.340e+01
2026-01-21 12:03:55,277 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:55,278 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:55,294 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:55,473 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:55,497 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:55,542 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:55,564 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:55,613 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:55,634 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:55,681 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:55,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:55,754 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:55,775 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:55,824 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:55,847 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:55,897 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:55,920 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:55,967 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:55,992 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:56,038 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:56,060 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:56,110 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:56,132 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:56,179 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:57,151 - INFO - integration_test - Step 33: MPC solve successful
2026-01-21 12:03:57,243 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 12:03:57,244 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:03:57,244 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 12:03:57,244 - INFO - integration_test -   Control dict from planner: {'a': 1.5216821268968249e-07, 'w': 0.7999999888243146}
2026-01-21 12:03:57,244 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:03:57,244 - INFO - integration_test -   Planner output success: True
2026-01-21 12:03:57,245 - INFO - integration_test - Step 33 completed in 2.341s
2026-01-21 12:03:57,310 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 12:03:57,315 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.01774446 4.36952223 0.86089989 3.00000003 9.30000003]
2026-01-21 12:03:57,315 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.380m, drift=0.022m)
2026-01-21 12:03:57,315 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 12:03:57,319 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:57,427 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.018, 4.370), path_start=(0.000, 0.000), dist=9.131m
2026-01-21 12:03:57,427 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 12:03:57,528 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:03:57,553 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:03:57,553 - INFO - integration_test - Warmstart k=0: x0=8.017744463902213 , y0=4.369522229727021 , psi0=0.8608998949396052 , v0=3.000000029560136 , spline0=9.300000033480448 , a0=0.0 , w0=0.0
2026-01-21 12:03:57,553 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:03:57,554 - INFO - integration_test - Dyn residual k=0: pred=[8.213271033446789, 4.597051046310193, 0.8608998949396052, 3.000000029560136, 9.60000003643646], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.213271033446789, 4.597051046310193, 0.8608998949396052, 3.000000029560136, 9.60000003643646], res_norm=1.380e+01
2026-01-21 12:03:57,555 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:57,555 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:03:57,572 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:57,787 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:57,813 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:57,865 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:57,892 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:57,938 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:57,958 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:58,007 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:58,028 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:58,074 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:58,098 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:58,146 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:58,167 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:58,214 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:58,235 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:58,287 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:58,309 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:58,355 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:03:58,380 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:58,426 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:03:58,447 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:03:58,495 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:01,258 - WARNING - integration_test - Step 34: MPC solve failed
2026-01-21 12:04:01,258 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:04:01,490 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 12:04:01,490 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:01,490 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 12:04:01,490 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:04:01,490 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:01,490 - INFO - integration_test -   Planner output success: False
2026-01-21 12:04:01,490 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:04:01,492 - INFO - integration_test - Step 34 completed in 4.177s
2026-01-21 12:04:01,553 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 12:04:01,554 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.21327103 4.59705105 0.86089989 3.00000003 9.60000004]
2026-01-21 12:04:01,555 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.458m, drift=0.322m)
2026-01-21 12:04:01,555 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 12:04:01,558 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:01,666 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.213, 4.597), path_start=(0.000, 0.000), dist=9.412m
2026-01-21 12:04:01,667 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 12:04:01,765 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:01,792 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:01,792 - INFO - integration_test - Warmstart k=0: x0=8.213271033446789 , y0=4.597051046310193 , psi0=0.8608998949396052 , v0=3.000000029560136 , spline0=9.60000003643646 , a0=0.0 , w0=0.0
2026-01-21 12:04:01,792 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:01,793 - INFO - integration_test - Dyn residual k=0: pred=[8.408797602991365, 4.824579862893364, 0.8608998949396052, 3.000000029560136, 9.900000039392474], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.408797602991365, 4.824579862893364, 0.8608998949396052, 3.000000029560136, 9.900000039392474], res_norm=1.420e+01
2026-01-21 12:04:01,794 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:01,795 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:01,811 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,007 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,029 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,083 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,118 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,187 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,211 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,261 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,287 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,338 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,359 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,406 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,429 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,479 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,501 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,549 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,574 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,623 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:02,647 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,698 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:02,719 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:02,762 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:03,633 - INFO - integration_test - Step 35: MPC solve successful
2026-01-21 12:04:03,735 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 12:04:03,735 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:03,735 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 12:04:03,735 - INFO - integration_test -   Control dict from planner: {'a': -1.9022645935955042e-06, 'w': -0.7999990685109513}
2026-01-21 12:04:03,735 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:03,735 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:03,736 - INFO - integration_test - Step 35 completed in 2.182s
2026-01-21 12:04:03,797 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 12:04:03,798 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.41768539 4.81652036 0.78089999 2.99999984 9.90000002]
2026-01-21 12:04:03,799 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.599m, drift=0.134m)
2026-01-21 12:04:03,799 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 12:04:03,802 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:03,914 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.418, 4.817), path_start=(0.000, 0.000), dist=9.698m
2026-01-21 12:04:03,914 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 12:04:04,151 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:04,175 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:04,175 - INFO - integration_test - Warmstart k=0: x0=8.417685394036827 , y0=4.816520356609262 , psi0=0.78089998808851 , v0=2.9999998393336766 , spline0=9.900000020369829 , a0=0.0 , w0=0.0
2026-01-21 12:04:04,175 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:04,176 - INFO - integration_test - Dyn residual k=0: pred=[8.630769474750576, 5.027696029702536, 0.78089998808851, 2.9999998393336766, 10.200000004303197], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.630769474750576, 5.027696029702536, 0.78089998808851, 2.9999998393336766, 10.200000004303197], res_norm=1.461e+01
2026-01-21 12:04:04,177 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:04,178 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:04,196 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,367 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,389 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,437 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,460 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,511 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,532 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,578 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,603 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,649 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,671 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,722 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,743 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,790 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,811 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,857 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,881 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,930 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:04,950 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:04,998 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:05,018 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:05,063 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:05,995 - INFO - integration_test - Step 36: MPC solve successful
2026-01-21 12:04:06,093 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 12:04:06,093 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:06,093 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 12:04:06,094 - INFO - integration_test -   Control dict from planner: {'a': 1.7678572419416116e-06, 'w': -0.7999999607658297}
2026-01-21 12:04:06,094 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:06,094 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:06,095 - INFO - integration_test - Step 36 completed in 2.297s
2026-01-21 12:04:06,159 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 12:04:06,163 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 8.63898479  5.01895204  0.70089999  3.00000002 10.20000002]
2026-01-21 12:04:06,163 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.696m, drift=0.434m)
2026-01-21 12:04:06,163 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 12:04:06,166 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:06,274 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(8.639, 5.019), path_start=(0.000, 0.000), dist=9.991m
2026-01-21 12:04:06,274 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 12:04:06,379 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:06,406 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:06,406 - INFO - integration_test - Warmstart k=0: x0=8.63898478994638 , y0=5.018952038513626 , psi0=0.7008999920119271 , v0=3.000000016119401 , spline0=10.200000021981769 , a0=0.0 , w0=0.0
2026-01-21 12:04:06,406 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:06,407 - INFO - integration_test - Dyn residual k=0: pred=[8.868263417228745, 5.212423772983232, 0.7008999920119271, 3.000000016119401, 10.500000023593708], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.868263417228745, 5.212423772983232, 0.7008999920119271, 3.000000016119401, 10.500000023593708], res_norm=1.502e+01
2026-01-21 12:04:06,408 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:06,408 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:06,424 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:06,639 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:06,662 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:06,714 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:06,735 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:06,780 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:06,806 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:06,853 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:06,876 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:06,927 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:06,950 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:06,998 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:07,020 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:07,067 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:07,092 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:07,139 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:07,159 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:07,207 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:07,229 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:07,275 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:07,298 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:07,344 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:10,365 - WARNING - integration_test - Step 37: MPC solve failed
2026-01-21 12:04:10,365 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:04:10,608 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-21 12:04:10,608 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:10,608 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 12:04:10,608 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:04:10,608 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:10,608 - INFO - integration_test -   Planner output success: False
2026-01-21 12:04:10,608 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:04:10,609 - INFO - integration_test - Step 37 completed in 4.447s
2026-01-21 12:04:10,670 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 12:04:10,671 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 8.86826342  5.21242377  0.70089999  3.00000002 10.50000002]
2026-01-21 12:04:10,672 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.783m, drift=0.246m)
2026-01-21 12:04:10,672 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-21 12:04:10,675 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:10,825 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(8.868, 5.212), path_start=(0.000, 0.000), dist=10.287m
2026-01-21 12:04:10,825 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.287m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:10,825 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 12:04:10,927 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:10,952 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:10,952 - INFO - integration_test - Warmstart k=0: x0=8.868263417228745 , y0=5.212423772983232 , psi0=0.7008999920119271 , v0=3.000000016119401 , spline0=10.500000023593708 , a0=0.0 , w0=0.0
2026-01-21 12:04:10,952 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:10,953 - INFO - integration_test - Dyn residual k=0: pred=[9.09754204451111, 5.405895507452839, 0.7008999920119271, 3.000000016119401, 10.800000025205648], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.09754204451111, 5.405895507452839, 0.7008999920119271, 3.000000016119401, 10.800000025205648], res_norm=1.543e+01
2026-01-21 12:04:10,954 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:10,955 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:10,970 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,143 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,166 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,213 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,234 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,284 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,308 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,354 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,375 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,425 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,446 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,495 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,518 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,565 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,587 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,637 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,658 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,710 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:11,731 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,778 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:11,801 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:11,844 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:13,204 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 12:04:13,292 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-21 12:04:13,292 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:13,292 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 12:04:13,292 - INFO - integration_test -   Control dict from planner: {'a': 1.38302515178367e-07, 'w': -0.8000000097048543}
2026-01-21 12:04:13,293 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:13,293 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:13,294 - INFO - integration_test - Step 38 completed in 2.623s
2026-01-21 12:04:13,360 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 12:04:13,364 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.10503231  5.39652295  0.62089999  3.00000003 10.80000003]
2026-01-21 12:04:13,364 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.890m, drift=0.546m)
2026-01-21 12:04:13,364 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-21 12:04:13,368 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:13,474 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.105, 5.397), path_start=(0.000, 0.000), dist=10.584m
2026-01-21 12:04:13,474 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.584m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:13,474 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 12:04:13,574 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:13,601 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:13,601 - INFO - integration_test - Warmstart k=0: x0=9.10503230575996 , y0=5.396522951693559 , psi0=0.6208999910414417 , v0=3.0000000299496525 , spline0=10.800000026588673 , a0=0.0 , w0=0.0
2026-01-21 12:04:13,601 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:13,602 - INFO - integration_test - Dyn residual k=0: pred=[9.349038868399838, 5.571053175969042, 0.6208999910414417, 3.0000000299496525, 11.100000029583638], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.349038868399838, 5.571053175969042, 0.6208999910414417, 3.0000000299496525, 11.100000029583638], res_norm=1.584e+01
2026-01-21 12:04:13,603 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:13,604 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:13,621 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:13,795 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:13,816 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:13,869 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:13,896 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:13,947 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:13,969 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:14,022 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:14,043 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:14,091 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:14,116 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:14,165 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:14,186 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:14,233 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:14,254 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:14,307 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:14,328 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:14,375 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:14,399 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:14,445 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:14,466 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:14,514 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:16,026 - INFO - integration_test - Step 39: MPC solve successful
2026-01-21 12:04:16,263 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-21 12:04:16,264 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:16,264 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 12:04:16,264 - INFO - integration_test -   Control dict from planner: {'a': -3.7766992975364786e-08, 'w': -0.7999999729116178}
2026-01-21 12:04:16,264 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:16,264 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:16,265 - INFO - integration_test - Step 39 completed in 2.902s
2026-01-21 12:04:16,329 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 12:04:16,330 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.35575617  5.56111201  0.54089999  3.00000003 11.10000003]
2026-01-21 12:04:16,331 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.929m, drift=0.357m)
2026-01-21 12:04:16,331 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-21 12:04:16,334 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:16,445 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.356, 5.561), path_start=(0.000, 0.000), dist=10.884m
2026-01-21 12:04:16,445 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.884m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:16,445 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 12:04:16,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:16,573 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:16,573 - INFO - integration_test - Warmstart k=0: x0=9.355756167650624 , y0=5.561112014400084 , psi0=0.5408999937502799 , v0=3.000000026172953 , spline0=11.100000029205969 , a0=0.0 , w0=0.0
2026-01-21 12:04:16,573 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:16,574 - INFO - integration_test - Dyn residual k=0: pred=[9.61292985435824, 5.715584330481606, 0.5408999937502799, 3.000000026172953, 11.400000031823264], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.61292985435824, 5.715584330481606, 0.5408999937502799, 3.000000026172953, 11.400000031823264], res_norm=1.626e+01
2026-01-21 12:04:16,575 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:16,575 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:16,593 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:16,765 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:16,790 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:16,836 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:16,858 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:16,909 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:16,931 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:16,976 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:16,999 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:17,048 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:17,070 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:17,119 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:17,140 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:17,190 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:17,211 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:17,257 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:17,278 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:17,329 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:17,350 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:17,396 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:17,418 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:17,463 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:18,482 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 12:04:18,578 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-21 12:04:18,579 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:18,579 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 12:04:18,579 - INFO - integration_test -   Control dict from planner: {'a': -1.0497558099313277e-06, 'w': -0.7999989257968184}
2026-01-21 12:04:18,579 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:18,579 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:18,580 - INFO - integration_test - Step 40 completed in 2.250s
2026-01-21 12:04:18,648 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 12:04:18,649 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 9.61883121  5.70513816  0.4609001   2.99999992 11.40000002]
2026-01-21 12:04:18,650 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.989m, drift=0.169m)
2026-01-21 12:04:18,650 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-21 12:04:18,653 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:18,765 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(9.619, 5.705), path_start=(0.000, 0.000), dist=11.183m
2026-01-21 12:04:18,765 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.183m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:18,765 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 12:04:18,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:18,891 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:18,891 - INFO - integration_test - Warmstart k=0: x0=9.618831213023068 , y0=5.705138164286228 , psi0=0.460900101170598 , v0=2.999999921197372 , spline0=11.400000021325706 , a0=0.0 , w0=0.0
2026-01-21 12:04:18,892 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:18,894 - INFO - integration_test - Dyn residual k=0: pred=[9.887526966880857, 5.838564500257193, 0.460900101170598, 2.999999921197372, 11.700000013445443], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.887526966880857, 5.838564500257193, 0.460900101170598, 2.999999921197372, 11.700000013445443], res_norm=1.667e+01
2026-01-21 12:04:18,895 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:18,896 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:18,914 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,085 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,110 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,158 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,180 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,227 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,248 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,299 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,320 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,365 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,389 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,463 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,487 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,553 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,574 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,623 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,645 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,701 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:19,725 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,772 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:19,797 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:19,847 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:21,012 - INFO - integration_test - Step 41: MPC solve successful
2026-01-21 12:04:21,258 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-21 12:04:21,258 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:21,258 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 12:04:21,258 - INFO - integration_test -   Control dict from planner: {'a': 1.0138669347935308e-06, 'w': -0.799999892075262}
2026-01-21 12:04:21,258 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:21,258 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:21,260 - INFO - integration_test - Step 41 completed in 2.611s
2026-01-21 12:04:21,323 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 12:04:21,324 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 9.89257467  5.82768013  0.38090011  3.00000002 11.70000002]
2026-01-21 12:04:21,325 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.998m, drift=0.469m)
2026-01-21 12:04:21,325 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-21 12:04:21,328 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:21,438 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(9.893, 5.828), path_start=(0.000, 0.000), dist=11.482m
2026-01-21 12:04:21,438 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.482m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:21,438 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 12:04:21,545 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:21,569 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:21,569 - INFO - integration_test - Warmstart k=0: x0=9.89257466530077 , y0=5.827680130405285 , psi0=0.3809001119630718 , v0=3.0000000225840653 , spline0=11.700000023584112 , a0=0.0 , w0=0.0
2026-01-21 12:04:21,570 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:21,570 - INFO - integration_test - Dyn residual k=0: pred=[10.171073784237416, 5.939206997601295, 0.3809001119630718, 3.0000000225840653, 12.000000025842517], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.171073784237416, 5.939206997601295, 0.3809001119630718, 3.0000000225840653, 12.000000025842517], res_norm=1.708e+01
2026-01-21 12:04:21,571 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:21,572 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:21,590 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:21,762 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:21,786 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:21,833 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:21,854 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:21,905 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:21,927 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:21,973 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:21,995 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:22,044 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:22,065 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:22,115 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:22,138 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:22,185 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:22,208 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:22,253 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:22,276 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:22,328 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:22,349 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:22,395 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:22,417 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:22,462 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:25,486 - WARNING - integration_test - Step 42: MPC solve failed
2026-01-21 12:04:25,486 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:04:25,579 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-21 12:04:25,579 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:25,579 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 12:04:25,579 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:04:25,579 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:25,579 - INFO - integration_test -   Planner output success: False
2026-01-21 12:04:25,579 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:04:25,581 - INFO - integration_test - Step 42 completed in 4.257s
2026-01-21 12:04:25,650 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 12:04:25,656 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.17107378  5.939207    0.38090011  3.00000002 12.00000003]
2026-01-21 12:04:25,656 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=1.007m, drift=0.281m)
2026-01-21 12:04:25,656 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-21 12:04:25,659 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:25,773 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.171, 5.939), path_start=(0.000, 0.000), dist=11.778m
2026-01-21 12:04:25,773 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.778m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:25,773 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 12:04:25,869 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:25,895 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:25,895 - INFO - integration_test - Warmstart k=0: x0=10.171073784237416 , y0=5.939206997601295 , psi0=0.3809001119630718 , v0=3.0000000225840653 , spline0=12.000000025842517 , a0=0.0 , w0=0.0
2026-01-21 12:04:25,895 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:25,896 - INFO - integration_test - Dyn residual k=0: pred=[10.449572903174062, 6.050733864797306, 0.3809001119630718, 3.0000000225840653, 12.300000028100923], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.449572903174062, 6.050733864797306, 0.3809001119630718, 3.0000000225840653, 12.300000028100923], res_norm=1.750e+01
2026-01-21 12:04:25,897 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:25,898 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:25,917 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,088 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,113 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,160 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,182 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,231 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,252 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,300 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,323 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,372 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,393 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,438 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,459 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,510 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,534 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,580 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,602 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,650 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:26,671 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,718 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:26,740 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:26,793 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:27,697 - INFO - integration_test - Step 43: MPC solve successful
2026-01-21 12:04:27,967 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-21 12:04:27,967 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:27,967 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 12:04:27,967 - INFO - integration_test -   Control dict from planner: {'a': 6.749886839258096e-08, 'w': -0.7999999951008803}
2026-01-21 12:04:27,967 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:27,967 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:27,968 - INFO - integration_test - Step 43 completed in 2.313s
2026-01-21 12:04:28,033 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 12:04:28,036 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[10.45373463  6.03948092  0.30090011  3.00000003 12.30000003]
2026-01-21 12:04:28,037 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=1.025m, drift=0.581m)
2026-01-21 12:04:28,037 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-21 12:04:28,040 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:28,151 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(10.454, 6.039), path_start=(0.000, 0.000), dist=12.073m
2026-01-21 12:04:28,151 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.073m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:28,151 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 12:04:28,250 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:28,274 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:28,275 - INFO - integration_test - Warmstart k=0: x0=10.453734632765947 , y0=6.039480917761926 , psi0=0.30090011245298376 , v0=3.000000029333952 , spline0=12.300000028775912 , a0=0.0 , w0=0.0
2026-01-21 12:04:28,275 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:28,276 - INFO - integration_test - Dyn residual k=0: pred=[10.740255665788181, 6.128394917761412, 0.30090011245298376, 3.000000029333952, 12.600000031709307], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.740255665788181, 6.128394917761412, 0.30090011245298376, 3.000000029333952, 12.600000031709307], res_norm=1.791e+01
2026-01-21 12:04:28,276 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:28,277 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:28,295 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:28,514 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:28,538 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:28,583 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:28,608 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:28,657 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:28,679 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:28,729 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:28,750 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:28,796 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:28,820 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:28,867 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:28,888 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:28,942 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:28,962 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:29,010 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:29,031 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:29,079 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:29,103 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:29,149 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:29,170 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:29,217 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:30,182 - INFO - integration_test - Step 44: MPC solve successful
2026-01-21 12:04:30,274 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-21 12:04:30,274 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:30,274 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 12:04:30,274 - INFO - integration_test -   Control dict from planner: {'a': 9.58020278636882e-10, 'w': -0.7999999870678993}
2026-01-21 12:04:30,274 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:30,274 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:30,275 - INFO - integration_test - Step 44 completed in 2.239s
2026-01-21 12:04:30,344 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 12:04:30,345 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[10.74350481  6.11684538  0.22090011  3.00000003 12.60000003]
2026-01-21 12:04:30,346 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.983m, drift=0.392m)
2026-01-21 12:04:30,346 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-21 12:04:30,349 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:30,458 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(10.744, 6.117), path_start=(0.000, 0.000), dist=12.363m
2026-01-21 12:04:30,458 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.363m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:30,458 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 12:04:30,561 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:30,587 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:30,587 - INFO - integration_test - Warmstart k=0: x0=10.743504808788904 , y0=6.1168453776197875 , psi0=0.22090011374619384 , v0=3.000000029429754 , spline0=12.600000031718888 , a0=0.0 , w0=0.0
2026-01-21 12:04:30,588 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:30,588 - INFO - integration_test - Dyn residual k=0: pred=[11.036214998420933, 6.182577764244398, 0.22090011374619384, 3.000000029429754, 12.900000034661865], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.036214998420933, 6.182577764244398, 0.22090011374619384, 3.000000029429754, 12.900000034661865], res_norm=1.832e+01
2026-01-21 12:04:30,589 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:30,590 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:30,607 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:30,778 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:30,801 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:30,851 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:30,872 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:30,922 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:30,944 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:30,993 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:31,016 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:31,060 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:31,082 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:31,133 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:31,154 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:31,204 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:31,226 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:31,271 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:31,294 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:31,346 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:31,368 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:31,414 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:31,434 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:31,482 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:32,531 - INFO - integration_test - Step 45: MPC solve successful
2026-01-21 12:04:32,869 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-21 12:04:32,869 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:32,870 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 12:04:32,870 - INFO - integration_test -   Control dict from planner: {'a': -2.764402704248245e-07, 'w': -0.7999973048483263}
2026-01-21 12:04:32,870 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:32,870 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:32,871 - INFO - integration_test - Step 45 completed in 2.526s
2026-01-21 12:04:32,938 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 12:04:32,947 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.03853076  6.17080555  0.14090038  3.         12.90000003]
2026-01-21 12:04:32,948 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.962m, drift=0.204m)
2026-01-21 12:04:32,948 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-21 12:04:32,951 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:33,056 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.039, 6.171), path_start=(0.000, 0.000), dist=12.646m
2026-01-21 12:04:33,056 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.646m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:33,056 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 12:04:33,155 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:33,181 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:33,181 - INFO - integration_test - Warmstart k=0: x0=11.038530763681049 , y0=6.170805548089691 , psi0=0.14090038326136123 , v0=3.000000001785727 , spline0=12.900000031897461 , a0=0.0 , w0=0.0
2026-01-21 12:04:33,181 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:33,183 - INFO - integration_test - Dyn residual k=0: pred=[11.335557749627611, 6.2129359376754065, 0.14090038326136123, 3.000000001785727, 13.200000032076034], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.335557749627611, 6.2129359376754065, 0.14090038326136123, 3.000000001785727, 13.200000032076034], res_norm=1.872e+01
2026-01-21 12:04:33,184 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:33,185 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:33,202 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,369 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,393 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,439 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,463 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,512 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,534 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,584 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,606 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,651 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,672 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,724 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,746 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,794 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,815 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,865 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,887 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:33,940 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:33,961 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:34,009 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:34,029 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:34,072 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:35,078 - INFO - integration_test - Step 46: MPC solve successful
2026-01-21 12:04:35,180 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-21 12:04:35,180 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:35,180 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 12:04:35,180 - INFO - integration_test -   Control dict from planner: {'a': 2.820882448690427e-07, 'w': -0.8000000077691712}
2026-01-21 12:04:35,180 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:35,180 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:35,181 - INFO - integration_test - Step 46 completed in 2.235s
2026-01-21 12:04:35,248 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 12:04:35,249 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.33692534  6.20101627  0.06090038  3.00000003 13.20000003]
2026-01-21 12:04:35,249 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.881m, drift=0.504m)
2026-01-21 12:04:35,249 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-21 12:04:35,252 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:35,364 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.337, 6.201), path_start=(0.000, 0.000), dist=12.922m
2026-01-21 12:04:35,364 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.922m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:35,364 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 12:04:35,460 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:35,487 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:35,488 - INFO - integration_test - Warmstart k=0: x0=11.336925344865486 , y0=6.201016269194691 , psi0=0.06090038248444411 , v0=3.0000000299945517 , spline0=13.200000034896917 , a0=0.0 , w0=0.0
2026-01-21 12:04:35,488 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:35,489 - INFO - integration_test - Dyn residual k=0: pred=[11.636369191295326, 6.2192750926774645, 0.06090038248444411, 3.0000000299945517, 13.500000037896372], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.636369191295326, 6.2192750926774645, 0.06090038248444411, 3.0000000299945517, 13.500000037896372], res_norm=1.911e+01
2026-01-21 12:04:35,489 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:35,490 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:35,507 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:35,679 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:35,706 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:35,754 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:35,776 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:35,824 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:35,847 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:35,902 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:35,924 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:35,969 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:35,992 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:36,040 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:36,060 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:36,110 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:36,134 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:36,179 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:36,202 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:36,253 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:36,274 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:36,325 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:36,345 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:36,395 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:37,649 - INFO - integration_test - Step 47: MPC solve successful
2026-01-21 12:04:37,939 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-21 12:04:37,939 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:37,939 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 12:04:37,939 - INFO - integration_test -   Control dict from planner: {'a': -1.7105791764264439e-07, 'w': -0.40973406429479886}
2026-01-21 12:04:37,939 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:37,939 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:37,940 - INFO - integration_test - Step 47 completed in 2.692s
2026-01-21 12:04:38,005 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 12:04:38,006 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[11.63665942  6.21313623  0.01992698  3.00000001 13.50000004]
2026-01-21 12:04:38,007 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.807m, drift=0.316m)
2026-01-21 12:04:38,007 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-21 12:04:38,010 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:38,120 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(11.637, 6.213), path_start=(0.000, 0.000), dist=13.191m
2026-01-21 12:04:38,120 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.191m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:38,120 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 12:04:38,220 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:38,244 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:38,244 - INFO - integration_test - Warmstart k=0: x0=11.636659423147172 , y0=6.213136225193532 , psi0=0.01992697605496422 , v0=3.00000001288876 , spline0=13.500000036185792 , a0=0.0 , w0=0.0
2026-01-21 12:04:38,244 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:38,245 - INFO - integration_test - Dyn residual k=0: pred=[11.936599863750512, 6.219113922409017, 0.01992697605496422, 3.00000001288876, 13.800000037474668], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.936599863750512, 6.219113922409017, 0.01992697605496422, 3.00000001288876, 13.800000037474668], res_norm=1.951e+01
2026-01-21 12:04:38,246 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:38,247 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:38,262 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:38,438 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:38,459 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:38,508 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:38,531 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:38,580 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:38,604 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:38,651 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:38,672 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:38,722 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:38,743 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:38,790 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:38,814 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:38,861 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:38,883 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:38,938 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:38,960 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:39,007 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:39,028 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:39,073 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:39,094 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:39,143 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:40,070 - INFO - integration_test - Step 48: MPC solve successful
2026-01-21 12:04:40,174 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-21 12:04:40,174 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:40,174 - INFO - integration_test - === Applying control at step 48 ===
2026-01-21 12:04:40,174 - INFO - integration_test -   Control dict from planner: {'a': 1.7104845676708288e-07, 'w': 0.29361269982750793}
2026-01-21 12:04:40,174 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:40,174 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:40,175 - INFO - integration_test - Step 48 completed in 2.169s
2026-01-21 12:04:40,238 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-21 12:04:40,241 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[11.93646902  6.22351606  0.04928825  3.00000003 13.80000004]
2026-01-21 12:04:40,241 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.736m, drift=0.616m)
2026-01-21 12:04:40,242 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-21 12:04:40,245 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:40,351 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(11.936, 6.224), path_start=(0.000, 0.000), dist=13.461m
2026-01-21 12:04:40,351 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.461m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:40,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-21 12:04:40,456 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:40,481 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:40,481 - INFO - integration_test - Warmstart k=0: x0=11.936469020802145 , y0=6.223516063403771 , psi0=0.04928824603771501 , v0=3.0000000299936054 , spline0=13.800000039185154 , a0=0.0 , w0=0.0
2026-01-21 12:04:40,481 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:40,482 - INFO - integration_test - Dyn residual k=0: pred=[12.236104697882894, 6.238296551216333, 0.04928824603771501, 3.0000000299936054, 14.100000042184515], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.236104697882894, 6.238296551216333, 0.04928824603771501, 3.0000000299936054, 14.100000042184515], res_norm=1.991e+01
2026-01-21 12:04:40,483 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:40,484 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:40,501 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:40,678 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:40,704 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:40,752 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:40,775 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:40,828 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:40,851 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:40,899 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:40,920 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:40,969 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:40,995 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:41,041 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:41,061 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:41,111 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:41,132 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:41,179 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:41,203 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:41,252 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:41,273 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:41,319 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:41,341 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:41,390 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:42,463 - INFO - integration_test - Step 49: MPC solve successful
2026-01-21 12:04:42,571 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-21 12:04:42,571 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:42,571 - INFO - integration_test - === Applying control at step 49 ===
2026-01-21 12:04:42,571 - INFO - integration_test -   Control dict from planner: {'a': -6.424709786718692e-07, 'w': 0.08819313738715134}
2026-01-21 12:04:42,571 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:42,571 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:42,572 - INFO - integration_test - Step 49 completed in 2.332s
2026-01-21 12:04:42,641 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-21 12:04:42,643 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.23603563  6.23961764  0.05810756  2.99999997 14.10000004]
2026-01-21 12:04:42,644 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.648m, drift=0.427m)
2026-01-21 12:04:42,644 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-21 12:04:42,647 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:42,758 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.236, 6.240), path_start=(0.000, 0.000), dist=13.735m
2026-01-21 12:04:42,758 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.735m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:42,758 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-21 12:04:43,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:43,066 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:43,066 - INFO - integration_test - Warmstart k=0: x0=12.236035633942125 , y0=6.239617641392436 , psi0=0.058107559776430145 , v0=2.9999999657465075 , spline0=14.100000035759804 , a0=0.0 , w0=0.0
2026-01-21 12:04:43,066 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:43,067 - INFO - integration_test - Dyn residual k=0: pred=[12.535529299739476, 6.257040100807092, 0.058107559776430145, 2.9999999657465075, 14.400000032334454], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.535529299739476, 6.257040100807092, 0.058107559776430145, 2.9999999657465075, 14.400000032334454], res_norm=2.031e+01
2026-01-21 12:04:43,068 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:43,069 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:43,084 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,260 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,282 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,331 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,354 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,406 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,430 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,476 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,502 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,550 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,571 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,624 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,644 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,696 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,717 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,764 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,789 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,837 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:43,859 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,920 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:43,947 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:43,997 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:45,053 - INFO - integration_test - Step 50: MPC solve successful
2026-01-21 12:04:45,162 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-21 12:04:45,162 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:45,162 - INFO - integration_test - === Applying control at step 50 ===
2026-01-21 12:04:45,162 - INFO - integration_test -   Control dict from planner: {'a': 6.395553665018233e-07, 'w': 0.7999999185771969}
2026-01-21 12:04:45,162 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:45,162 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:45,163 - INFO - integration_test - Step 50 completed in 2.520s
2026-01-21 12:04:45,228 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-21 12:04:45,230 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[12.53451342  6.26899488  0.13810755  3.00000003 14.40000004]
2026-01-21 12:04:45,230 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.637m, drift=0.727m)
2026-01-21 12:04:45,230 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-21 12:04:45,233 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:45,342 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(12.535, 6.269), path_start=(0.000, 0.000), dist=14.015m
2026-01-21 12:04:45,342 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.015m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:45,342 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-21 12:04:45,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:45,468 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:45,468 - INFO - integration_test - Warmstart k=0: x0=12.534513422823155 , y0=6.268994881152806 , psi0=0.13810755163414984 , v0=3.0000000297020444 , spline0=14.400000038730008 , a0=0.0 , w0=0.0
2026-01-21 12:04:45,468 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:45,469 - INFO - integration_test - Dyn residual k=0: pred=[12.831656916075406, 6.310295561534268, 0.13810755163414984, 3.0000000297020444, 14.700000041700212], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.831656916075406, 6.310295561534268, 0.13810755163414984, 3.0000000297020444, 14.700000041700212], res_norm=2.073e+01
2026-01-21 12:04:45,470 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:45,471 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:45,490 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:45,689 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:45,717 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:45,768 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:45,801 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:45,896 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:45,922 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:45,975 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:46,002 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:46,054 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:46,075 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:46,123 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:46,144 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:46,197 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:46,218 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:46,264 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:46,285 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:46,333 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:46,355 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:46,403 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:46,425 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:46,470 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:48,193 - INFO - integration_test - Step 51: MPC solve successful
2026-01-21 12:04:48,341 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-21 12:04:48,342 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:48,342 - INFO - integration_test - === Applying control at step 51 ===
2026-01-21 12:04:48,342 - INFO - integration_test -   Control dict from planner: {'a': -5.104580515612139e-06, 'w': 0.7054317513492985}
2026-01-21 12:04:48,342 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:48,342 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:48,343 - INFO - integration_test - Step 51 completed in 3.114s
2026-01-21 12:04:48,423 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-21 12:04:48,424 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[12.82995437  6.32073769  0.20865073  2.99999952 14.69999999]
2026-01-21 12:04:48,425 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.559m, drift=0.539m)
2026-01-21 12:04:48,425 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-21 12:04:48,429 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:48,540 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(12.830, 6.321), path_start=(0.000, 0.000), dist=14.302m
2026-01-21 12:04:48,540 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.302m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:48,540 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-21 12:04:48,640 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:48,665 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:48,665 - INFO - integration_test - Warmstart k=0: x0=12.829954370464137 , y0=6.3207376885957505 , psi0=0.2086507267690797 , v0=2.999999519243993 , spline0=14.699999990654407 , a0=0.0 , w0=0.0
2026-01-21 12:04:48,665 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:48,666 - INFO - integration_test - Dyn residual k=0: pred=[13.123447711550286, 6.382879702505269, 0.2086507267690797, 2.999999519243993, 14.999999942578805], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.123447711550286, 6.382879702505269, 0.2086507267690797, 2.999999519243993, 14.999999942578805], res_norm=2.114e+01
2026-01-21 12:04:48,666 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:48,667 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:48,683 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,040 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,062 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,111 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,133 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,181 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,205 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,254 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,274 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,322 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,343 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,395 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,417 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,463 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,486 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,532 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,553 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,603 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:49,626 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,670 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:49,690 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:49,737 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:51,115 - INFO - integration_test - Step 52: MPC solve successful
2026-01-21 12:04:51,235 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-21 12:04:51,235 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:51,235 - INFO - integration_test - === Applying control at step 52 ===
2026-01-21 12:04:51,235 - INFO - integration_test -   Control dict from planner: {'a': 5.107474557888009e-06, 'w': -0.8000000056494774}
2026-01-21 12:04:51,235 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:51,235 - INFO - integration_test -   Planner output success: True
2026-01-21 12:04:51,237 - INFO - integration_test - Step 52 completed in 2.812s
2026-01-21 12:04:51,308 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-21 12:04:51,309 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.12561914  6.37107997  0.12865073  3.00000003 14.99999999]
2026-01-21 12:04:51,310 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.555m, drift=0.351m)
2026-01-21 12:04:51,310 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-21 12:04:51,313 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:51,424 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.126, 6.371), path_start=(0.000, 0.000), dist=14.590m
2026-01-21 12:04:51,424 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.590m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:51,424 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-21 12:04:51,523 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:51,548 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:51,549 - INFO - integration_test - Warmstart k=0: x0=13.12561913673752 , y0=6.3710799696928 , psi0=0.12865072620413198 , v0=3.000000029991449 , spline0=14.999999993653551 , a0=0.0 , w0=0.0
2026-01-21 12:04:51,549 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:51,549 - INFO - integration_test - Dyn residual k=0: pred=[13.42313991061926, 6.409568811040608, 0.12865072620413198, 3.000000029991449, 15.299999996652696], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.42313991061926, 6.409568811040608, 0.12865072620413198, 3.000000029991449, 15.299999996652696], res_norm=2.155e+01
2026-01-21 12:04:51,550 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:51,551 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:51,567 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:51,743 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:51,766 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:51,818 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:51,840 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:51,887 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:51,912 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:51,959 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:51,981 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:52,033 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:52,054 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:52,102 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:52,125 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:52,173 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:52,198 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:52,244 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:52,268 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:52,320 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:52,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:52,387 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:52,414 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:52,459 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:55,702 - WARNING - integration_test - Step 53: MPC solve failed
2026-01-21 12:04:55,702 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:04:55,815 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-21 12:04:55,815 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:04:55,815 - INFO - integration_test - === Applying control at step 53 ===
2026-01-21 12:04:55,815 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:04:55,815 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:04:55,815 - INFO - integration_test -   Planner output success: False
2026-01-21 12:04:55,815 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:04:55,817 - INFO - integration_test - Step 53 completed in 4.508s
2026-01-21 12:04:55,890 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-21 12:04:55,893 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.42313991  6.40956881  0.12865073  3.00000003 15.3       ]
2026-01-21 12:04:55,893 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.501m, drift=0.651m)
2026-01-21 12:04:55,894 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-21 12:04:55,897 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:56,003 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.423, 6.410), path_start=(0.000, 0.000), dist=14.875m
2026-01-21 12:04:56,003 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=14.875m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:04:56,003 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-21 12:04:56,106 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:04:56,131 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:04:56,131 - INFO - integration_test - Warmstart k=0: x0=13.42313991061926 , y0=6.409568811040608 , psi0=0.12865072620413198 , v0=3.000000029991449 , spline0=15.299999996652696 , a0=0.0 , w0=0.0
2026-01-21 12:04:56,131 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:04:56,132 - INFO - integration_test - Dyn residual k=0: pred=[13.720660684501002, 6.4480576523884165, 0.12865072620413198, 3.000000029991449, 15.59999999965184], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.720660684501002, 6.4480576523884165, 0.12865072620413198, 3.000000029991449, 15.59999999965184], res_norm=2.196e+01
2026-01-21 12:04:56,133 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:56,133 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:04:56,149 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:56,511 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:56,533 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:56,582 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:56,604 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:56,653 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:56,675 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:56,727 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:56,748 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:56,795 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:56,817 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:56,873 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:56,896 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:56,942 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:56,967 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:57,016 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:57,039 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:57,090 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:04:57,112 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:57,156 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:04:57,176 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:04:57,225 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:00,541 - WARNING - integration_test - Step 54: MPC solve failed
2026-01-21 12:05:00,541 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 12:05:00,663 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-21 12:05:00,663 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:05:00,663 - INFO - integration_test - === Applying control at step 54 ===
2026-01-21 12:05:00,663 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:00,663 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:05:00,664 - INFO - integration_test -   Planner output success: False
2026-01-21 12:05:00,664 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:00,665 - INFO - integration_test - Step 54 completed in 4.773s
2026-01-21 12:05:00,736 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-21 12:05:00,746 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[13.72066068  6.44805765  0.12865073  3.00000003 15.6       ]
2026-01-21 12:05:00,746 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.457m, drift=0.463m)
2026-01-21 12:05:00,746 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-21 12:05:00,750 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:00,861 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(13.721, 6.448), path_start=(0.000, 0.000), dist=15.160m
2026-01-21 12:05:00,861 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.160m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:05:00,861 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-21 12:05:00,955 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:00,982 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:05:00,982 - INFO - integration_test - Warmstart k=0: x0=13.720660684501002 , y0=6.4480576523884165 , psi0=0.12865072620413198 , v0=3.000000029991449 , spline0=15.59999999965184 , a0=0.0 , w0=0.0
2026-01-21 12:05:00,982 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:05:00,984 - INFO - integration_test - Dyn residual k=0: pred=[14.018181458382744, 6.486546493736225, 0.12865072620413198, 3.000000029991449, 15.900000002650986], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.018181458382744, 6.486546493736225, 0.12865072620413198, 3.000000029991449, 15.900000002650986], res_norm=2.237e+01
2026-01-21 12:05:00,985 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:00,986 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:01,003 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,175 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,199 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,252 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,275 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,322 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,348 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,396 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,419 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,469 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,493 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,539 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,559 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,610 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,633 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,681 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,705 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,752 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:01,773 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,819 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:01,841 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:01,890 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:02,959 - INFO - integration_test - Step 55: MPC solve successful
2026-01-21 12:05:03,079 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-21 12:05:03,080 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:05:03,080 - INFO - integration_test - === Applying control at step 55 ===
2026-01-21 12:05:03,080 - INFO - integration_test -   Control dict from planner: {'a': -2.0103046088226129e-10, 'w': -0.5898365403751022}
2026-01-21 12:05:03,080 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:05:03,080 - INFO - integration_test -   Planner output success: True
2026-01-21 12:05:03,081 - INFO - integration_test - Step 55 completed in 2.336s
2026-01-21 12:05:03,149 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-21 12:05:03,151 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.01914375  6.47775229  0.06966707  3.00000003 15.9       ]
2026-01-21 12:05:03,151 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.452m, drift=0.763m)
2026-01-21 12:05:03,151 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-21 12:05:03,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:03,264 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.019, 6.478), path_start=(0.000, 0.000), dist=15.443m
2026-01-21 12:05:03,264 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.443m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:05:03,264 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-21 12:05:03,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:03,604 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:05:03,604 - INFO - integration_test - Warmstart k=0: x0=14.019143750835262 , y0=6.477752292584658 , psi0=0.06966707216662177 , v0=3.000000029971346 , spline0=15.900000002648975 , a0=0.0 , w0=0.0
2026-01-21 12:05:03,604 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:05:03,605 - INFO - integration_test - Dyn residual k=0: pred=[14.318416023091745, 6.498635512085552, 0.06966707216662177, 3.000000029971346, 16.20000000564611], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.318416023091745, 6.498635512085552, 0.06966707216662177, 3.000000029971346, 16.20000000564611], res_norm=2.277e+01
2026-01-21 12:05:03,606 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:03,607 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:03,623 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:03,794 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:03,816 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:03,867 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:03,893 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:03,939 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:03,959 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:04,008 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:04,032 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:04,080 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:04,104 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:04,153 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:04,174 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:04,220 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:04,244 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:04,294 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:04,316 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:04,366 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:04,387 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:04,433 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:04,454 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:04,505 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:07,824 - WARNING - integration_test - Step 56: MPC solve failed
2026-01-21 12:05:07,824 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:05:08,024 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-21 12:05:08,024 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:05:08,024 - INFO - integration_test - === Applying control at step 56 ===
2026-01-21 12:05:08,025 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:08,025 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:05:08,025 - INFO - integration_test -   Planner output success: False
2026-01-21 12:05:08,025 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:08,026 - INFO - integration_test - Step 56 completed in 4.876s
2026-01-21 12:05:08,097 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-21 12:05:08,106 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.31841602  6.49863551  0.06966707  3.00000003 16.20000001]
2026-01-21 12:05:08,107 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.351m, drift=0.574m)
2026-01-21 12:05:08,107 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-21 12:05:08,110 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:08,218 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.318, 6.499), path_start=(0.000, 0.000), dist=15.724m
2026-01-21 12:05:08,218 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.724m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:05:08,218 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-21 12:05:08,322 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:08,348 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:05:08,348 - INFO - integration_test - Warmstart k=0: x0=14.318416023091745 , y0=6.498635512085552 , psi0=0.06966707216662177 , v0=3.000000029971346 , spline0=16.20000000564611 , a0=0.0 , w0=0.0
2026-01-21 12:05:08,348 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:05:08,349 - INFO - integration_test - Dyn residual k=0: pred=[14.617688295348227, 6.519518731586446, 0.06966707216662177, 3.000000029971346, 16.500000008643244], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.617688295348227, 6.519518731586446, 0.06966707216662177, 3.000000029971346, 16.500000008643244], res_norm=2.318e+01
2026-01-21 12:05:08,350 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:08,350 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:08,366 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:08,543 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:08,568 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:08,615 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:08,638 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:08,689 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:08,712 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:08,758 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:08,779 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:08,829 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:08,851 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:08,903 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:08,927 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:08,975 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:08,997 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:09,044 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:09,068 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:09,118 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:09,139 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:09,183 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:09,207 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:09,253 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:13,353 - WARNING - integration_test - Step 57: MPC solve failed
2026-01-21 12:05:13,353 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 12:05:13,490 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-21 12:05:13,490 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:05:13,490 - INFO - integration_test - === Applying control at step 57 ===
2026-01-21 12:05:13,490 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:13,490 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:05:13,490 - INFO - integration_test -   Planner output success: False
2026-01-21 12:05:13,490 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:13,492 - INFO - integration_test - Step 57 completed in 5.386s
2026-01-21 12:05:13,559 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-21 12:05:13,572 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[14.6176883   6.51951873  0.06966707  3.00000003 16.50000001]
2026-01-21 12:05:13,573 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.374m, drift=0.386m)
2026-01-21 12:05:13,573 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-21 12:05:13,576 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:13,875 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(14.618, 6.520), path_start=(0.000, 0.000), dist=16.006m
2026-01-21 12:05:13,875 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.006m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:05:13,875 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-21 12:05:13,980 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:14,006 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:05:14,006 - INFO - integration_test - Warmstart k=0: x0=14.617688295348227 , y0=6.519518731586446 , psi0=0.06966707216662177 , v0=3.000000029971346 , spline0=16.500000008643244 , a0=0.0 , w0=0.0
2026-01-21 12:05:14,006 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:05:14,007 - INFO - integration_test - Dyn residual k=0: pred=[14.91696056760471, 6.540401951087341, 0.06966707216662177, 3.000000029971346, 16.80000001164038], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.91696056760471, 6.540401951087341, 0.06966707216662177, 3.000000029971346, 16.80000001164038], res_norm=2.359e+01
2026-01-21 12:05:14,008 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:14,008 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:14,024 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,201 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,223 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,275 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,298 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,345 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,369 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,415 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,437 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,485 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,510 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,555 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,575 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,624 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,645 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,695 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,717 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,765 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:14,787 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,831 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:14,852 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:14,901 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:16,162 - INFO - integration_test - Step 58: MPC solve successful
2026-01-21 12:05:16,291 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-21 12:05:16,291 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:05:16,291 - INFO - integration_test - === Applying control at step 58 ===
2026-01-21 12:05:16,291 - INFO - integration_test -   Control dict from planner: {'a': 2.720011206886142e-10, 'w': 0.4336460150235463}
2026-01-21 12:05:16,292 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:05:16,292 - INFO - integration_test -   Planner output success: True
2026-01-21 12:05:16,293 - INFO - integration_test - Step 58 completed in 2.721s
2026-01-21 12:05:16,356 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-21 12:05:16,362 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[14.91641406  6.5468833   0.11303167  3.00000003 16.80000001]
2026-01-21 12:05:16,363 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.271m, drift=0.686m)
2026-01-21 12:05:16,363 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-21 12:05:16,366 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:16,474 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(14.916, 6.547), path_start=(0.000, 0.000), dist=16.290m
2026-01-21 12:05:16,474 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.290m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:05:16,474 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-21 12:05:16,578 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:16,605 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:05:16,605 - INFO - integration_test - Warmstart k=0: x0=14.916414055145285 , y0=6.546883301243788 , psi0=0.1130316736689764 , v0=3.000000029998546 , spline0=16.8000000116431 , a0=0.0 , w0=0.0
2026-01-21 12:05:16,605 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:05:16,606 - INFO - integration_test - Dyn residual k=0: pred=[15.21449967374746, 6.5807206442611115, 0.1130316736689764, 3.000000029998546, 17.100000014642955], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.21449967374746, 6.5807206442611115, 0.1130316736689764, 3.000000029998546, 17.100000014642955], res_norm=2.400e+01
2026-01-21 12:05:16,607 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:16,607 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:16,623 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:16,837 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:16,861 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:16,911 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:16,934 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:16,996 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:17,022 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:17,068 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:17,090 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:17,142 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:17,165 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:17,215 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:17,235 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:17,288 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:17,312 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:17,359 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:17,380 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:17,430 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:17,454 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:17,502 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:17,523 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:17,571 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:20,463 - INFO - integration_test - Step 59: MPC solve successful
2026-01-21 12:05:20,585 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-21 12:05:20,585 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:05:20,585 - INFO - integration_test - === Applying control at step 59 ===
2026-01-21 12:05:20,585 - INFO - integration_test -   Control dict from planner: {'a': -0.00035755756635333597, 'w': 0.2529517425515577}
2026-01-21 12:05:20,585 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:05:20,585 - INFO - integration_test -   Planner output success: True
2026-01-21 12:05:20,586 - INFO - integration_test - Step 59 completed in 4.225s
2026-01-21 12:05:20,655 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-21 12:05:20,657 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.21403818  6.58448667  0.13832685  2.99996427 17.09999644]
2026-01-21 12:05:20,657 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.269m, drift=0.498m)
2026-01-21 12:05:20,657 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-21 12:05:20,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:20,774 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.214, 6.584), path_start=(0.000, 0.000), dist=16.578m
2026-01-21 12:05:20,774 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.578m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:05:20,774 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-21 12:05:20,873 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:20,902 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:05:20,902 - INFO - integration_test - Warmstart k=0: x0=15.214038176045722 , y0=6.584486667181832 , psi0=0.13832684792413216 , v0=2.9999642742419104 , spline0=17.09999643906729 , a0=0.0 , w0=0.0
2026-01-21 12:05:20,902 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:05:20,903 - INFO - integration_test - Dyn residual k=0: pred=[15.511169063674414, 6.6258520160171095, 0.13832684792413216, 2.9999642742419104, 17.39999286649148], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.511169063674414, 6.6258520160171095, 0.13832684792413216, 2.9999642742419104, 17.39999286649148], res_norm=2.442e+01
2026-01-21 12:05:20,904 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:20,905 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:20,922 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,140 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,164 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,213 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,234 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,287 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,311 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,357 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,378 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,430 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,451 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,501 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,524 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,571 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,595 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,640 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,662 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,713 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:21,734 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,779 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:21,802 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:21,846 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:49,043 - WARNING - integration_test - Step 60: MPC solve failed
2026-01-21 12:05:49,043 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:05:49,186 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-21 12:05:49,186 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:05:49,186 - INFO - integration_test - === Applying control at step 60 ===
2026-01-21 12:05:49,187 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:49,187 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:05:49,187 - INFO - integration_test -   Planner output success: False
2026-01-21 12:05:49,187 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:49,188 - INFO - integration_test - Step 60 completed in 28.532s
2026-01-21 12:05:49,261 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-21 12:05:49,270 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[15.51116906  6.62585202  0.13832685  2.99996427 17.39999287]
2026-01-21 12:05:49,271 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.264m, drift=0.798m)
2026-01-21 12:05:49,271 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-21 12:05:49,274 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:49,386 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.511, 6.626), path_start=(0.000, 0.000), dist=16.867m
2026-01-21 12:05:49,386 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=16.867m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:05:49,386 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-21 12:05:49,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:49,515 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:05:49,515 - INFO - integration_test - Warmstart k=0: x0=15.511169063674414 , y0=6.6258520160171095 , psi0=0.13832684792413216 , v0=2.9999642742419104 , spline0=17.39999286649148 , a0=0.0 , w0=0.0
2026-01-21 12:05:49,515 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:05:49,516 - INFO - integration_test - Dyn residual k=0: pred=[15.808299951303106, 6.667217364852387, 0.13832684792413216, 2.9999642742419104, 17.69998929391567], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.808299951303106, 6.667217364852387, 0.13832684792413216, 2.9999642742419104, 17.69998929391567], res_norm=2.483e+01
2026-01-21 12:05:49,517 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:49,519 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:05:49,537 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:49,708 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:49,732 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:49,780 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:49,803 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:49,855 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:49,876 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:49,928 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:49,950 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:50,020 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:50,053 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:50,113 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:50,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:50,188 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:50,211 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:50,258 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:50,278 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:50,331 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:05:50,354 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:50,402 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:50,424 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:05:50,469 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:05:59,619 - WARNING - integration_test - Step 61: MPC solve failed
2026-01-21 12:05:59,619 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 12:05:59,760 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-21 12:05:59,761 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:05:59,761 - INFO - integration_test - === Applying control at step 61 ===
2026-01-21 12:05:59,761 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:59,761 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:05:59,761 - INFO - integration_test -   Planner output success: False
2026-01-21 12:05:59,761 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:05:59,762 - INFO - integration_test - Step 61 completed in 10.492s
2026-01-21 12:05:59,829 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-21 12:05:59,836 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[15.80829995  6.66721736  0.13832685  2.99996427 17.69998929]
2026-01-21 12:05:59,837 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.194m, drift=0.609m)
2026-01-21 12:05:59,837 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-21 12:05:59,840 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:05:59,950 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(15.808, 6.667), path_start=(0.000, 0.000), dist=17.157m
2026-01-21 12:05:59,950 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.157m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:05:59,950 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-21 12:06:00,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:00,078 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:00,078 - INFO - integration_test - Warmstart k=0: x0=15.808299951303106 , y0=6.667217364852387 , psi0=0.13832684792413216 , v0=2.9999642742419104 , spline0=17.69998929391567 , a0=0.0 , w0=0.0
2026-01-21 12:06:00,079 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:00,079 - INFO - integration_test - Dyn residual k=0: pred=[16.105430838931795, 6.708582713687665, 0.13832684792413216, 2.9999642742419104, 17.99998572133986], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.105430838931795, 6.708582713687665, 0.13832684792413216, 2.9999642742419104, 17.99998572133986], res_norm=2.525e+01
2026-01-21 12:06:00,080 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:00,081 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:00,099 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,278 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,302 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,352 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,374 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,425 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,447 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,494 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,517 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,568 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,589 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,638 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,660 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,708 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,730 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,784 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,806 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,853 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:00,874 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,924 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:00,946 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:00,993 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:02,001 - INFO - integration_test - Step 62: MPC solve successful
2026-01-21 12:06:02,364 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-21 12:06:02,364 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:02,364 - INFO - integration_test - === Applying control at step 62 ===
2026-01-21 12:06:02,364 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000180338566, 'w': -0.44888377328180057}
2026-01-21 12:06:02,364 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:02,364 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:02,366 - INFO - integration_test - Step 62 completed in 2.530s
2026-01-21 12:06:02,429 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-21 12:06:02,437 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.09631857  6.70081925  0.09343847  2.79996427 17.97998572]
2026-01-21 12:06:02,437 - DEBUG - integration_test - Step 63: Using propagated spline 17.9800 (close to path, dist=0.288m, drift=0.889m)
2026-01-21 12:06:02,438 - DEBUG - integration_test -   Set spline state to 17.9800
2026-01-21 12:06:02,441 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:02,549 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.096, 6.701), path_start=(0.000, 0.000), dist=17.435m
2026-01-21 12:06:02,549 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.435m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:02,549 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-21 12:06:02,649 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:02,673 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:02,674 - INFO - integration_test - Warmstart k=0: x0=16.096318573560403 , y0=6.700819249811821 , psi0=0.0934384705959521 , v0=2.7999642724385247 , spline0=17.979985721159522 , a0=0.0 , w0=0.0
2026-01-21 12:06:02,674 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:02,675 - INFO - integration_test - Dyn residual k=0: pred=[16.375093600743167, 6.72694363475332, 0.0934384705959521, 2.7999642724385247, 18.259982148403374], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.375093600743167, 6.72694363475332, 0.0934384705959521, 2.7999642724385247, 18.259982148403374], res_norm=2.559e+01
2026-01-21 12:06:02,675 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:02,676 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:02,694 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:02,879 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:02,902 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:02,950 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:02,972 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,022 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:03,043 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,089 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:03,112 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,163 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:03,184 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,232 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:03,256 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,304 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:03,326 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,374 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:03,398 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,443 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:03,464 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,512 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:03,534 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:03,581 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:04,905 - INFO - integration_test - Step 63: MPC solve successful
2026-01-21 12:06:05,037 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=17.980)
2026-01-21 12:06:05,037 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:05,037 - INFO - integration_test - === Applying control at step 63 ===
2026-01-21 12:06:05,037 - INFO - integration_test -   Control dict from planner: {'a': -2.000000018843905, 'w': 0.15509973573851552}
2026-01-21 12:06:05,037 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:05,037 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:05,038 - INFO - integration_test - Step 63 completed in 2.602s
2026-01-21 12:06:05,107 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-21 12:06:05,116 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.3649337   6.72806852  0.10894844  2.59996427 18.23998215]
2026-01-21 12:06:05,117 - DEBUG - integration_test - Step 64: Using propagated spline 18.2400 (close to path, dist=0.137m, drift=0.661m)
2026-01-21 12:06:05,117 - DEBUG - integration_test -   Set spline state to 18.2400
2026-01-21 12:06:05,120 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:05,234 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.365, 6.728), path_start=(0.000, 0.000), dist=17.694m
2026-01-21 12:06:05,234 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=17.694m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:05,234 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-21 12:06:05,338 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:05,367 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:05,367 - INFO - integration_test - Warmstart k=0: x0=16.364933701584306 , y0=6.728068524924594 , psi0=0.10894844416980365 , v0=2.599964270554134 , spline0=18.239982148214935 , a0=0.0 , w0=0.0
2026-01-21 12:06:05,367 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:05,368 - INFO - integration_test - Dyn residual k=0: pred=[16.623388606288927, 6.756338726828841, 0.10894844416980365, 2.599964270554134, 18.499978575270347], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.623388606288927, 6.756338726828841, 0.10894844416980365, 2.599964270554134, 18.499978575270347], res_norm=2.590e+01
2026-01-21 12:06:05,369 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:05,370 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:05,386 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:05,561 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:05,586 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:05,633 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:05,655 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:05,704 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:05,726 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:05,775 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:05,798 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:05,847 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:05,868 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:05,916 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:05,940 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:05,988 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:06,011 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:06,063 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:06,085 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:06,135 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:06,158 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:06,205 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:06,226 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:06,270 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:07,436 - INFO - integration_test - Step 64: MPC solve successful
2026-01-21 12:06:07,800 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.240)
2026-01-21 12:06:07,800 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:07,800 - INFO - integration_test - === Applying control at step 64 ===
2026-01-21 12:06:07,800 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199950736, 'w': -0.032803626687284856}
2026-01-21 12:06:07,800 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:07,800 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:07,802 - INFO - integration_test - Step 64 completed in 2.686s
2026-01-21 12:06:07,869 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-21 12:06:07,878 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[16.61349145  6.75484918  0.10566808  2.39996427 18.47997858]
2026-01-21 12:06:07,879 - DEBUG - integration_test - Step 65: Using propagated spline 18.4800 (close to path, dist=0.270m, drift=0.901m)
2026-01-21 12:06:07,879 - DEBUG - integration_test -   Set spline state to 18.4800
2026-01-21 12:06:07,882 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:07,988 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(16.613, 6.755), path_start=(0.000, 0.000), dist=17.934m
2026-01-21 12:06:07,988 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=17.934m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:07,988 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-21 12:06:08,091 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:08,118 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:08,118 - INFO - integration_test - Warmstart k=0: x0=16.613491449865332 , y0=6.7548491755093805 , psi0=0.10566808150107516 , v0=2.3999642685546267 , spline0=18.479978575070398 , a0=0.0 , w0=0.0
2026-01-21 12:06:08,118 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:08,119 - INFO - integration_test - Dyn residual k=0: pred=[16.852149253711207, 6.780161970038091, 0.10566808150107516, 2.3999642685546267, 18.71997500192586], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.852149253711207, 6.780161970038091, 0.10566808150107516, 2.3999642685546267, 18.71997500192586], res_norm=2.619e+01
2026-01-21 12:06:08,119 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:08,120 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:08,138 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,326 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,351 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,402 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,423 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,472 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,494 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,542 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,564 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,616 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,637 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,683 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,706 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,756 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,786 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,858 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,885 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:08,936 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:08,958 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:09,005 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:09,027 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:09,072 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:10,083 - INFO - integration_test - Step 65: MPC solve successful
2026-01-21 12:06:10,230 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.480)
2026-01-21 12:06:10,230 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:10,230 - INFO - integration_test - === Applying control at step 65 ===
2026-01-21 12:06:10,230 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000198825973, 'w': 0.029936265936473472}
2026-01-21 12:06:10,230 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:10,230 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:10,231 - INFO - integration_test - Step 65 completed in 2.353s
2026-01-21 12:06:10,297 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-21 12:06:10,307 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[16.84216891  6.7794446   0.10866171  2.19996427 18.699975  ]
2026-01-21 12:06:10,308 - DEBUG - integration_test - Step 66: Using propagated spline 18.7000 (close to path, dist=0.106m, drift=0.633m)
2026-01-21 12:06:10,308 - DEBUG - integration_test -   Set spline state to 18.7000
2026-01-21 12:06:10,311 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:10,423 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(16.842, 6.779), path_start=(0.000, 0.000), dist=18.155m
2026-01-21 12:06:10,423 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.155m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:10,423 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-21 12:06:10,524 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:10,550 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:10,550 - INFO - integration_test - Warmstart k=0: x0=16.842168912662377 , y0=6.77944459883958 , psi0=0.10866170809472252 , v0=2.1999642665663672 , spline0=18.699975001727033 , a0=0.0 , w0=0.0
2026-01-21 12:06:10,550 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:10,551 - INFO - integration_test - Dyn residual k=0: pred=[17.06086782750346, 6.8033027712134295, 0.10866170809472252, 2.1999642665663672, 18.91997142838367], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.06086782750346, 6.8033027712134295, 0.10866170809472252, 2.1999642665663672, 18.91997142838367], res_norm=2.646e+01
2026-01-21 12:06:10,552 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:10,553 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:10,569 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:10,744 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:10,770 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:10,819 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:10,842 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:10,892 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:10,914 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:10,962 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:10,983 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:11,033 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:11,054 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:11,102 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:11,125 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:11,176 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:11,198 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:11,247 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:11,269 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:11,318 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:11,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:11,391 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:11,416 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:11,463 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:12,609 - INFO - integration_test - Step 66: MPC solve successful
2026-01-21 12:06:12,761 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.700)
2026-01-21 12:06:12,761 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:12,762 - INFO - integration_test - === Applying control at step 66 ===
2026-01-21 12:06:12,762 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019728027, 'w': 0.10549769200302131}
2026-01-21 12:06:12,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:12,762 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:12,763 - INFO - integration_test - Step 66 completed in 2.456s
2026-01-21 12:06:12,834 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-21 12:06:12,845 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.05080481  6.80330156  0.11921148  1.99996426 18.89997143]
2026-01-21 12:06:12,845 - DEBUG - integration_test - Step 67: Using propagated spline 18.9000 (close to path, dist=0.189m, drift=0.833m)
2026-01-21 12:06:12,845 - DEBUG - integration_test -   Set spline state to 18.9000
2026-01-21 12:06:12,849 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:12,959 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.051, 6.803), path_start=(0.000, 0.000), dist=18.358m
2026-01-21 12:06:12,959 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.358m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:12,959 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-21 12:06:13,057 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:13,083 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:13,083 - INFO - integration_test - Warmstart k=0: x0=17.050804805334554 , y0=6.803301563487134 , psi0=0.11921147729502465 , v0=1.9999642645935645 , spline0=18.89997142818639 , a0=0.0 , w0=0.0
2026-01-21 12:06:13,083 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:13,084 - INFO - integration_test - Dyn residual k=0: pred=[17.249381801754172, 6.827087002088856, 0.11921147729502465, 1.9999642645935645, 19.099967854645747], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.249381801754172, 6.827087002088856, 0.11921147729502465, 1.9999642645935645, 19.099967854645747], res_norm=2.670e+01
2026-01-21 12:06:13,085 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:13,086 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:13,106 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,282 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,306 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,355 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,380 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,451 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,487 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,540 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,562 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,614 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,635 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,684 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,707 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,755 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,776 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,837 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,864 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:13,920 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:13,944 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:14,000 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:14,023 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:14,067 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:15,201 - INFO - integration_test - Step 67: MPC solve successful
2026-01-21 12:06:15,581 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=18.900)
2026-01-21 12:06:15,581 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:15,581 - INFO - integration_test - === Applying control at step 67 ===
2026-01-21 12:06:15,581 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000198835886, 'w': -0.13116399774352477}
2026-01-21 12:06:15,581 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:15,581 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:15,583 - INFO - integration_test - Step 67 completed in 2.738s
2026-01-21 12:06:15,653 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-21 12:06:15,660 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.2395931   6.82468161  0.10609508  1.79996426 19.07996785]
2026-01-21 12:06:15,661 - DEBUG - integration_test - Step 68: Using propagated spline 19.0800 (close to path, dist=0.171m, drift=0.524m)
2026-01-21 12:06:15,661 - DEBUG - integration_test -   Set spline state to 19.0800
2026-01-21 12:06:15,664 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:15,777 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.240, 6.825), path_start=(0.000, 0.000), dist=18.541m
2026-01-21 12:06:15,777 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=18.541m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:15,777 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-21 12:06:15,879 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:15,905 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:15,905 - INFO - integration_test - Warmstart k=0: x0=17.23959309577092 , y0=6.824681609586874 , psi0=0.10609507752067218 , v0=1.7999642626052057 , spline0=19.07996785444691 , a0=0.0 , w0=0.0
2026-01-21 12:06:15,905 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:15,906 - INFO - integration_test - Dyn residual k=0: pred=[17.4185774371362, 6.843742538541045, 0.10609507752067218, 1.7999642626052057, 19.25996428070743], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.4185774371362, 6.843742538541045, 0.10609507752067218, 1.7999642626052057, 19.25996428070743], res_norm=2.692e+01
2026-01-21 12:06:15,906 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:15,907 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:15,924 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,100 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,123 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,172 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,194 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,243 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,267 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,313 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,335 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,388 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,411 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,456 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,477 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,527 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,549 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,596 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,620 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,667 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:16,688 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,735 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:16,758 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:16,806 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:17,966 - INFO - integration_test - Step 68: MPC solve successful
2026-01-21 12:06:18,144 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.080)
2026-01-21 12:06:18,144 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:18,144 - INFO - integration_test - === Applying control at step 68 ===
2026-01-21 12:06:18,144 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000197537915, 'w': 0.21322939034343658}
2026-01-21 12:06:18,144 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:18,145 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:18,146 - INFO - integration_test - Step 68 completed in 2.486s
2026-01-21 12:06:18,230 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-21 12:06:18,242 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[17.42828825  6.84684945  0.12741802  1.99996426 19.27996428]
2026-01-21 12:06:18,243 - DEBUG - integration_test - Step 69: Using propagated spline 19.2800 (close to path, dist=0.070m, drift=0.724m)
2026-01-21 12:06:18,244 - DEBUG - integration_test -   Set spline state to 19.2800
2026-01-21 12:06:18,247 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:18,360 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(17.428, 6.847), path_start=(0.000, 0.000), dist=18.725m
2026-01-21 12:06:18,360 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=18.725m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:18,360 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-21 12:06:18,462 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:18,493 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:18,493 - INFO - integration_test - Warmstart k=0: x0=17.428288253638687 , y0=6.846849446079315 , psi0=0.12741801655501583 , v0=1.9999642645805848 , spline0=19.279964280904967 , a0=0.0 , w0=0.0
2026-01-21 12:06:18,493 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:18,495 - INFO - integration_test - Dyn residual k=0: pred=[17.62666336933888, 6.872263695368442, 0.12741801655501583, 1.9999642645805848, 19.479960707363023], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.62666336933888, 6.872263695368442, 0.12741801655501583, 1.9999642645805848, 19.479960707363023], res_norm=2.723e+01
2026-01-21 12:06:18,496 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:18,497 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:18,519 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:18,700 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:18,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:18,773 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:18,800 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:18,848 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:18,871 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:18,923 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:18,946 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:18,997 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:19,020 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:19,070 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:19,091 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:19,140 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:19,163 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:19,214 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:19,235 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:19,283 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:19,314 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:19,364 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:19,384 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:19,431 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:20,396 - INFO - integration_test - Step 69: MPC solve successful
2026-01-21 12:06:20,562 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.280)
2026-01-21 12:06:20,562 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:20,562 - INFO - integration_test - === Applying control at step 69 ===
2026-01-21 12:06:20,562 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199975227, 'w': -0.04787170068555141}
2026-01-21 12:06:20,562 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:20,562 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:20,563 - INFO - integration_test - Step 69 completed in 2.322s
2026-01-21 12:06:20,629 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-21 12:06:20,636 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[17.63664637  6.87302784  0.12263085  2.19996427 19.49996071]
2026-01-21 12:06:20,638 - DEBUG - integration_test - Step 70: Using propagated spline 19.5000 (close to path, dist=0.250m, drift=0.944m)
2026-01-21 12:06:20,639 - DEBUG - integration_test -   Set spline state to 19.5000
2026-01-21 12:06:20,642 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:20,751 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(17.637, 6.873), path_start=(0.000, 0.000), dist=18.929m
2026-01-21 12:06:20,751 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=18.929m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:20,751 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-21 12:06:20,851 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:20,876 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:20,876 - INFO - integration_test - Warmstart k=0: x0=17.63664637445548 , y0=6.873027843728569 , psi0=0.12263084648646069 , v0=2.199964266580337 , spline0=19.499960707563 , a0=0.0 , w0=0.0
2026-01-21 12:06:20,876 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:20,877 - INFO - integration_test - Dyn residual k=0: pred=[17.854990684266106, 6.899938624386598, 0.12263084648646069, 2.199964266580337, 19.719957134221037], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.854990684266106, 6.899938624386598, 0.12263084648646069, 2.199964266580337, 19.719957134221037], res_norm=2.757e+01
2026-01-21 12:06:20,878 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:20,879 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:20,896 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,076 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,098 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,147 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,170 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,220 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,241 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,287 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,312 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,362 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,385 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,432 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,455 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,502 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,523 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,574 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,596 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,642 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:21,663 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,711 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:21,732 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:21,779 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:23,168 - INFO - integration_test - Step 70: MPC solve successful
2026-01-21 12:06:23,563 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.500)
2026-01-21 12:06:23,564 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:23,564 - INFO - integration_test - === Applying control at step 70 ===
2026-01-21 12:06:23,564 - INFO - integration_test -   Control dict from planner: {'a': 1.9999998151472207, 'w': 0.030638538669543164}
2026-01-21 12:06:23,564 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:23,564 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:23,565 - INFO - integration_test - Step 70 completed in 2.929s
2026-01-21 12:06:23,634 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-21 12:06:23,639 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[17.8648715   6.90151658  0.1256947   2.39996425 19.73995713]
2026-01-21 12:06:23,640 - DEBUG - integration_test - Step 71: Using propagated spline 19.7400 (close to path, dist=0.058m, drift=0.696m)
2026-01-21 12:06:23,640 - DEBUG - integration_test -   Set spline state to 19.7400
2026-01-21 12:06:23,644 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:23,753 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(17.865, 6.902), path_start=(0.000, 0.000), dist=19.152m
2026-01-21 12:06:23,753 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.152m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:23,753 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-21 12:06:23,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:23,884 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:23,884 - INFO - integration_test - Warmstart k=0: x0=17.86487149714874 , y0=6.901516576017415 , psi0=0.125694700353415 , v0=2.399964248095059 , spline0=19.739957132372506 , a0=0.0 , w0=0.0
2026-01-21 12:06:23,884 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:23,885 - INFO - integration_test - Dyn residual k=0: pred=[18.1029745460596, 6.931603483812971, 0.125694700353415, 2.399964248095059, 19.97995355718201], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.1029745460596, 6.931603483812971, 0.125694700353415, 2.399964248095059, 19.97995355718201], res_norm=2.794e+01
2026-01-21 12:06:23,886 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:23,887 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:23,905 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,078 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,103 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,154 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,178 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,227 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,250 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,299 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,320 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,370 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,395 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,442 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,463 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,514 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,536 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,583 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,609 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,657 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:24,679 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,729 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:24,752 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:24,802 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:26,848 - INFO - integration_test - Step 71: MPC solve successful
2026-01-21 12:06:27,043 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=19.740)
2026-01-21 12:06:27,044 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:27,044 - INFO - integration_test - === Applying control at step 71 ===
2026-01-21 12:06:27,044 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019205233, 'w': -0.0024711441203821008}
2026-01-21 12:06:27,044 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:27,044 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:27,045 - INFO - integration_test - Step 71 completed in 3.406s
2026-01-21 12:06:27,121 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-21 12:06:27,130 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[18.11289958  6.93282607  0.12544759  2.59996425 19.99995356]
2026-01-21 12:06:27,131 - DEBUG - integration_test - Step 72: Using propagated spline 20.0000 (close to path, dist=0.212m, drift=0.956m)
2026-01-21 12:06:27,131 - DEBUG - integration_test -   Set spline state to 20.0000
2026-01-21 12:06:27,135 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:27,247 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(18.113, 6.933), path_start=(0.000, 0.000), dist=19.394m
2026-01-21 12:06:27,247 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=19.394m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:27,247 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-21 12:06:27,345 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:27,374 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:27,374 - INFO - integration_test - Warmstart k=0: x0=18.112899575724988 , y0=6.932826069552948 , psi0=0.1254475859413768 , v0=2.5999642500155824 , spline0=19.999953557374063 , a0=0.0 , w0=0.0
2026-01-21 12:06:27,374 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:27,375 - INFO - integration_test - Dyn residual k=0: pred=[18.370852887768663, 6.965356514051741, 0.1254475859413768, 2.5999642500155824, 20.25994998237562], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.370852887768663, 6.965356514051741, 0.1254475859413768, 2.5999642500155824, 20.25994998237562], res_norm=2.834e+01
2026-01-21 12:06:27,376 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:27,377 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:27,394 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:27,572 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:27,596 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:27,643 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:27,664 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:27,714 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:27,735 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:27,786 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:27,815 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:27,871 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:27,896 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:27,943 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:27,970 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:28,022 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:28,042 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:28,087 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:28,113 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:28,162 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:28,184 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:28,233 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:28,254 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:28,300 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:29,479 - INFO - integration_test - Step 72: MPC solve successful
2026-01-21 12:06:29,644 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.000)
2026-01-21 12:06:29,644 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:29,644 - INFO - integration_test - === Applying control at step 72 ===
2026-01-21 12:06:29,644 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016102448, 'w': 0.01329045574798611}
2026-01-21 12:06:29,644 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:29,644 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:29,646 - INFO - integration_test - Step 72 completed in 2.516s
2026-01-21 12:06:29,710 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-21 12:06:29,717 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[18.3807515   6.9667879   0.12677663  2.79996425 20.27994998]
2026-01-21 12:06:29,718 - DEBUG - integration_test - Step 73: Using propagated spline 20.2799 (close to path, dist=0.043m, drift=0.748m)
2026-01-21 12:06:29,718 - DEBUG - integration_test -   Set spline state to 20.2799
2026-01-21 12:06:29,721 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:29,834 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(18.381, 6.967), path_start=(0.000, 0.000), dist=19.657m
2026-01-21 12:06:29,834 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=19.657m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:29,834 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-21 12:06:29,934 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:29,960 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:29,960 - INFO - integration_test - Warmstart k=0: x0=18.38075149937041 , y0=6.966787898583279 , psi0=0.1267766315161754 , v0=2.799964251625827 , spline0=20.279949982536646 , a0=0.0 , w0=0.0
2026-01-21 12:06:29,960 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:29,961 - INFO - integration_test - Dyn residual k=0: pred=[18.658500841331584, 7.00218989208593, 0.1267766315161754, 2.799964251625827, 20.55994640769923], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.658500841331584, 7.00218989208593, 0.1267766315161754, 2.799964251625827, 20.55994640769923], res_norm=2.877e+01
2026-01-21 12:06:29,962 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:29,963 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:29,979 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,157 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,184 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,232 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,253 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,303 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,324 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,371 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,395 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,456 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,489 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,552 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,575 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,625 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,646 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,692 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,716 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,762 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:30,784 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,834 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:30,856 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:30,902 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:33,156 - INFO - integration_test - Step 73: MPC solve successful
2026-01-21 12:06:33,560 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.280)
2026-01-21 12:06:33,560 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:33,560 - INFO - integration_test - === Applying control at step 73 ===
2026-01-21 12:06:33,560 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019994344, 'w': -0.0015019978727729138}
2026-01-21 12:06:33,560 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:33,560 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:33,562 - INFO - integration_test - Step 73 completed in 3.845s
2026-01-21 12:06:33,629 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-21 12:06:33,637 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[18.66842337  7.00343241  0.12662643  2.99996425 20.57994641]
2026-01-21 12:06:33,639 - DEBUG - integration_test - Step 74: Using propagated spline 20.5799 (close to path, dist=0.255m, drift=1.048m)
2026-01-21 12:06:33,639 - DEBUG - integration_test -   Set spline state to 20.5799
2026-01-21 12:06:33,642 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:33,752 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(18.668, 7.003), path_start=(0.000, 0.000), dist=19.939m
2026-01-21 12:06:33,752 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=19.939m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:33,752 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-21 12:06:33,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:33,884 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:33,885 - INFO - integration_test - Warmstart k=0: x0=18.668423371626016 , y0=7.003432412769903 , psi0=0.12662643172889812 , v0=2.9999642536252615 , spline0=20.579946407899172 , a0=0.0 , w0=0.0
2026-01-21 12:06:33,885 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:33,886 - INFO - integration_test - Dyn residual k=0: pred=[18.966017899625523, 7.041318454197374, 0.12662643172889812, 2.9999642536252615, 20.879942833261698], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.966017899625523, 7.041318454197374, 0.12662643172889812, 2.9999642536252615, 20.879942833261698], res_norm=2.923e+01
2026-01-21 12:06:33,887 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:33,888 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:33,904 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,087 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,111 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,158 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,181 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,233 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,255 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,304 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,325 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,377 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,400 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,446 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,467 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,517 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,538 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,591 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,614 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,661 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:34,682 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,729 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:34,751 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:34,833 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:36,154 - INFO - integration_test - Step 74: MPC solve successful
2026-01-21 12:06:36,343 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=20.580)
2026-01-21 12:06:36,343 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:36,343 - INFO - integration_test - === Applying control at step 74 ===
2026-01-21 12:06:36,343 - INFO - integration_test -   Control dict from planner: {'a': 0.00035776336916337395, 'w': 0.007608208124180916}
2026-01-21 12:06:36,343 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:36,343 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:36,344 - INFO - integration_test - Step 74 completed in 2.707s
2026-01-21 12:06:36,418 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-21 12:06:36,428 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[18.96600523  7.04143189  0.12738725  3.00000003 20.87994641]
2026-01-21 12:06:36,429 - DEBUG - integration_test - Step 75: Using propagated spline 20.8799 (close to path, dist=0.040m, drift=0.859m)
2026-01-21 12:06:36,430 - DEBUG - integration_test -   Set spline state to 20.8799
2026-01-21 12:06:36,433 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:36,548 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(18.966, 7.041), path_start=(0.000, 0.000), dist=20.231m
2026-01-21 12:06:36,548 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=20.231m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:36,548 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-21 12:06:36,650 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:36,679 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:36,679 - INFO - integration_test - Warmstart k=0: x0=18.96600523305145 , y0=7.041431885398822 , psi0=0.12738725254131622 , v0=3.000000029962178 , spline0=20.87994641089539 , a0=0.0 , w0=0.0
2026-01-21 12:06:36,679 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:36,680 - INFO - integration_test - Dyn residual k=0: pred=[19.26357439907876, 7.079544786463204, 0.12738725254131622, 3.000000029962178, 21.179946413891606], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.26357439907876, 7.079544786463204, 0.12738725254131622, 3.000000029962178, 21.179946413891606], res_norm=2.964e+01
2026-01-21 12:06:36,680 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:36,681 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:36,697 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:36,873 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:36,897 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:36,946 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:36,968 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,018 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:37,041 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,088 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:37,113 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,160 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:37,187 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,237 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:37,258 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,308 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:37,332 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,379 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:37,403 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,453 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:37,475 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,522 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:37,543 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:37,593 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:40,398 - INFO - integration_test - Step 75: MPC solve successful
2026-01-21 12:06:40,576 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=20.880)
2026-01-21 12:06:40,577 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:40,577 - INFO - integration_test - === Applying control at step 75 ===
2026-01-21 12:06:40,577 - INFO - integration_test -   Control dict from planner: {'a': -1.643443425723465e-07, 'w': 0.003362131537416617}
2026-01-21 12:06:40,577 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:40,577 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:40,578 - INFO - integration_test - Step 75 completed in 4.151s
2026-01-21 12:06:40,648 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-21 12:06:40,657 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[19.26356799  7.07959481  0.12772347  3.00000001 21.17994641]
2026-01-21 12:06:40,657 - DEBUG - integration_test - Step 76: Using propagated spline 21.1799 (close to path, dist=0.178m, drift=0.671m)
2026-01-21 12:06:40,660 - DEBUG - integration_test -   Set spline state to 21.1799
2026-01-21 12:06:40,664 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:40,773 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(19.264, 7.080), path_start=(0.000, 0.000), dist=20.523m
2026-01-21 12:06:40,773 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=20.523m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:40,773 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-21 12:06:40,875 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:40,906 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:40,906 - INFO - integration_test - Warmstart k=0: x0=19.263567985628278 , y0=7.079594808973997 , psi0=0.12772346569505788 , v0=3.000000013527744 , spline0=21.179946412248164 , a0=0.0 , w0=0.0
2026-01-21 12:06:40,906 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:40,907 - INFO - integration_test - Dyn residual k=0: pred=[19.561124319148604, 7.117807754340798, 0.12772346569505788, 3.000000013527744, 21.47994641360094], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.561124319148604, 7.117807754340798, 0.12772346569505788, 3.000000013527744, 21.47994641360094], res_norm=3.006e+01
2026-01-21 12:06:40,908 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:40,909 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:40,925 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,102 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,124 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,176 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,200 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,248 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,271 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,321 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,343 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,394 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,418 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,464 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,485 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,534 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,555 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,607 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,629 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,675 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:41,699 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,742 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:41,763 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:41,812 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:43,087 - INFO - integration_test - Step 76: MPC solve successful
2026-01-21 12:06:43,529 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.180)
2026-01-21 12:06:43,530 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:43,530 - INFO - integration_test - === Applying control at step 76 ===
2026-01-21 12:06:43,530 - INFO - integration_test -   Control dict from planner: {'a': 1.6459442426240692e-07, 'w': 0.0027588507298042923}
2026-01-21 12:06:43,530 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:43,530 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:43,531 - INFO - integration_test - Step 76 completed in 2.875s
2026-01-21 12:06:43,600 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-21 12:06:43,612 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[19.56111904  7.1178488   0.12799935  3.00000003 21.47994642]
2026-01-21 12:06:43,614 - DEBUG - integration_test - Step 77: Using propagated spline 21.4799 (close to path, dist=0.122m, drift=0.971m)
2026-01-21 12:06:43,615 - DEBUG - integration_test -   Set spline state to 21.4799
2026-01-21 12:06:43,618 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:43,733 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(19.561, 7.118), path_start=(0.000, 0.000), dist=20.816m
2026-01-21 12:06:43,733 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=20.816m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:43,733 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-21 12:06:43,834 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:43,862 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:43,862 - INFO - integration_test - Warmstart k=0: x0=19.561119044999643 , y0=7.117848799636161 , psi0=0.1279993507680383 , v0=3.000000029987186 , spline0=21.479946415246882 , a0=0.0 , w0=0.0
2026-01-21 12:06:43,862 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:43,863 - INFO - integration_test - Dyn residual k=0: pred=[19.85866482644747, 7.156143835108571, 0.1279993507680383, 3.000000029987186, 21.7799464182456], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.85866482644747, 7.156143835108571, 0.1279993507680383, 3.000000029987186, 21.7799464182456], res_norm=3.048e+01
2026-01-21 12:06:43,864 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:43,864 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:43,881 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,060 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,082 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,130 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,152 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,202 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,225 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,275 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,298 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,344 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,365 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,415 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,439 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,487 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,508 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,558 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,578 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,627 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:44,649 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,697 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:44,718 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:44,761 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:46,408 - INFO - integration_test - Step 77: MPC solve successful
2026-01-21 12:06:46,669 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=21.480)
2026-01-21 12:06:46,669 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:46,669 - INFO - integration_test - === Applying control at step 77 ===
2026-01-21 12:06:46,670 - INFO - integration_test -   Control dict from planner: {'a': -4.953734480339184e-07, 'w': 0.0028743757533328165}
2026-01-21 12:06:46,670 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:46,670 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:46,671 - INFO - integration_test - Step 77 completed in 3.059s
2026-01-21 12:06:46,749 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-21 12:06:46,758 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[19.85865932  7.1561866   0.12828679  2.99999998 21.77994641]
2026-01-21 12:06:46,759 - DEBUG - integration_test - Step 78: Using propagated spline 21.7799 (close to path, dist=0.095m, drift=0.783m)
2026-01-21 12:06:46,759 - DEBUG - integration_test -   Set spline state to 21.7799
2026-01-21 12:06:46,763 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:46,883 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(19.859, 7.156), path_start=(0.000, 0.000), dist=21.109m
2026-01-21 12:06:46,884 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=21.109m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:46,884 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-21 12:06:46,987 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:47,015 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:47,015 - INFO - integration_test - Warmstart k=0: x0=19.85865931617767 , y0=7.156186597183294 , psi0=0.1282867883433716 , v0=2.999999980449841 , spline0=21.779946413291867 , a0=0.0 , w0=0.0
2026-01-21 12:06:47,015 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:47,016 - INFO - integration_test - Dyn residual k=0: pred=[20.156194072988807, 7.194567156276764, 0.1282867883433716, 2.999999980449841, 22.079946411336852], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.156194072988807, 7.194567156276764, 0.1282867883433716, 2.999999980449841, 22.079946411336852], res_norm=3.090e+01
2026-01-21 12:06:47,017 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:47,019 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:47,037 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,210 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,233 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,280 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,305 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,353 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,374 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,424 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,446 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,497 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,519 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,565 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,586 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,638 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,659 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,708 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,731 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,777 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:47,803 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,855 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:47,879 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:47,925 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:51,446 - INFO - integration_test - Step 78: MPC solve successful
2026-01-21 12:06:51,635 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=21.780)
2026-01-21 12:06:51,635 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:51,635 - INFO - integration_test - === Applying control at step 78 ===
2026-01-21 12:06:51,635 - INFO - integration_test -   Control dict from planner: {'a': -7.308642971363739e-05, 'w': -0.006916481818244065}
2026-01-21 12:06:51,635 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:51,635 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:51,636 - INFO - integration_test - Step 78 completed in 4.879s
2026-01-21 12:06:51,708 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-21 12:06:51,717 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[20.15620696  7.19446421  0.12759514  2.99999267 22.07994568]
2026-01-21 12:06:51,718 - DEBUG - integration_test - Step 79: Using propagated spline 22.0799 (close to path, dist=0.206m, drift=1.083m)
2026-01-21 12:06:51,719 - DEBUG - integration_test -   Set spline state to 22.0799
2026-01-21 12:06:51,722 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:51,836 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(20.156, 7.194), path_start=(0.000, 0.000), dist=21.402m
2026-01-21 12:06:51,836 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=21.402m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:51,836 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-21 12:06:51,936 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:51,965 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:51,965 - INFO - integration_test - Warmstart k=0: x0=20.156206959737194 , y0=7.194464211949501 , psi0=0.1275951401615472 , v0=2.99999267180687 , spline0=22.079945680472555 , a0=0.0 , w0=0.0
2026-01-21 12:06:51,965 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:51,966 - INFO - integration_test - Dyn residual k=0: pred=[20.45376746630027, 7.2326388795037095, 0.1275951401615472, 2.99999267180687, 22.379944947653243], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.45376746630027, 7.2326388795037095, 0.1275951401615472, 2.99999267180687, 22.379944947653243], res_norm=3.131e+01
2026-01-21 12:06:51,967 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:51,968 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:51,984 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,159 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,181 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,232 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,256 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,306 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,330 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,376 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,400 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,452 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,473 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,520 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,541 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,602 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,627 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,677 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,701 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,749 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:52,771 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,822 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:52,846 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:52,894 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:54,237 - INFO - integration_test - Step 79: MPC solve successful
2026-01-21 12:06:54,741 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.080)
2026-01-21 12:06:54,742 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:54,742 - INFO - integration_test - === Applying control at step 79 ===
2026-01-21 12:06:54,742 - INFO - integration_test -   Control dict from planner: {'a': 7.358003563007842e-05, 'w': 0.011394727338404124}
2026-01-21 12:06:54,742 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:54,742 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:54,744 - INFO - integration_test - Step 79 completed in 3.027s
2026-01-21 12:06:54,809 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-21 12:06:54,816 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[20.45374602  7.23280845  0.12873461  3.00000003 22.37994568]
2026-01-21 12:06:54,817 - DEBUG - integration_test - Step 80: Using propagated spline 22.3799 (close to path, dist=0.014m, drift=0.895m)
2026-01-21 12:06:54,818 - DEBUG - integration_test -   Set spline state to 22.3799
2026-01-21 12:06:54,821 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:54,933 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(20.454, 7.233), path_start=(0.000, 0.000), dist=21.695m
2026-01-21 12:06:54,933 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=21.695m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:54,933 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-21 12:06:55,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:55,059 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:55,059 - INFO - integration_test - Warmstart k=0: x0=20.453746017287983 , y0=7.232808449358521 , psi0=0.1287346128953876 , v0=3.000000029810433 , spline0=22.3799456834536 , a0=0.0 , w0=0.0
2026-01-21 12:06:55,059 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:55,060 - INFO - integration_test - Dyn residual k=0: pred=[20.751263561403402, 7.271322248601855, 0.1287346128953876, 3.000000029810433, 22.679945686434642], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.751263561403402, 7.271322248601855, 0.1287346128953876, 3.000000029810433, 22.679945686434642], res_norm=3.173e+01
2026-01-21 12:06:55,061 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:55,062 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:55,078 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,258 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,282 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,333 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,357 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,406 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,427 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,475 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,500 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,546 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,567 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,620 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,642 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,689 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,715 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,766 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,789 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,835 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:55,856 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,907 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:55,927 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:55,971 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:58,138 - INFO - integration_test - Step 80: MPC solve successful
2026-01-21 12:06:58,341 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.380)
2026-01-21 12:06:58,341 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:06:58,341 - INFO - integration_test - === Applying control at step 80 ===
2026-01-21 12:06:58,341 - INFO - integration_test -   Control dict from planner: {'a': -4.144319763515301e-06, 'w': 0.008383770459393612}
2026-01-21 12:06:58,341 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:06:58,341 - INFO - integration_test -   Planner output success: True
2026-01-21 12:06:58,342 - INFO - integration_test - Step 80 completed in 3.526s
2026-01-21 12:06:58,414 - INFO - integration_test - Step 81 (contouring until path end)
2026-01-21 12:06:58,421 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[20.75124736  7.27144696  0.12957299  2.99999962 22.67994564]
2026-01-21 12:06:58,422 - DEBUG - integration_test - Step 81: Using propagated spline 22.6799 (close to path, dist=0.229m, drift=0.706m)
2026-01-21 12:06:58,422 - DEBUG - integration_test -   Set spline state to 22.6799
2026-01-21 12:06:58,425 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:58,534 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(20.751, 7.271), path_start=(0.000, 0.000), dist=21.988m
2026-01-21 12:06:58,534 - WARNING - integration_test - Step 81: Vehicle is far from path start (dist=21.988m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:06:58,534 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2026-01-21 12:06:58,632 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:06:58,659 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:06:58,659 - INFO - integration_test - Warmstart k=0: x0=20.751247361460095 , y0=7.271446957350977 , psi0=0.12957298994132696 , v0=2.9999996153784565 , spline0=22.679945644991445 , a0=0.0 , w0=0.0
2026-01-21 12:06:58,659 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:06:58,660 - INFO - integration_test - Dyn residual k=0: pred=[21.048732470839298, 7.310210169554723, 0.12957298994132696, 2.9999996153784565, 22.97994560652929], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.048732470839298, 7.310210169554723, 0.12957298994132696, 2.9999996153784565, 22.97994560652929], res_norm=3.215e+01
2026-01-21 12:06:58,661 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:58,661 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:06:58,678 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:58,851 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:58,875 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:58,928 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:58,950 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,000 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:59,029 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,095 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:59,127 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,184 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:59,207 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,253 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:59,276 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,327 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:59,348 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,396 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:59,418 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,464 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:06:59,486 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,535 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:06:59,557 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:06:59,604 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:07:01,004 - INFO - integration_test - Step 81: MPC solve successful
2026-01-21 12:07:01,220 - INFO - integration_test - Step 81: Computed 6 numeric contouring constraints for visualization (s=22.680)
2026-01-21 12:07:01,221 - DEBUG - integration_test - Step 81: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:07:01,221 - INFO - integration_test - === Applying control at step 81 ===
2026-01-21 12:07:01,221 - INFO - integration_test -   Control dict from planner: {'a': 4.102947101367494e-06, 'w': 0.07804504613961756}
2026-01-21 12:07:01,221 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:07:01,221 - INFO - integration_test -   Planner output success: True
2026-01-21 12:07:01,222 - INFO - integration_test - Step 81 completed in 2.802s
2026-01-21 12:07:01,290 - INFO - integration_test - Step 82 (contouring until path end)
2026-01-21 12:07:01,303 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[21.04857821  7.31137063  0.13737749  3.00000003 22.97994565]
2026-01-21 12:07:01,303 - DEBUG - integration_test - Step 82: Using propagated spline 22.9799 (close to path, dist=0.071m, drift=1.006m)
2026-01-21 12:07:01,304 - DEBUG - integration_test -   Set spline state to 22.9799
2026-01-21 12:07:01,307 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:07:01,415 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(21.049, 7.311), path_start=(0.000, 0.000), dist=22.282m
2026-01-21 12:07:01,416 - WARNING - integration_test - Step 82: Vehicle is far from path start (dist=22.282m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:07:01,416 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2026-01-21 12:07:01,521 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:07:01,548 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:07:01,548 - INFO - integration_test - Warmstart k=0: x0=21.048578208126926 , y0=7.311370634861411 , psi0=0.13737749455528872 , v0=3.0000000256731667 , spline0=22.97994564755876 , a0=0.0 , w0=0.0
2026-01-21 12:07:01,548 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:07:01,549 - INFO - integration_test - Dyn residual k=0: pred=[21.34575177364522, 7.352454372489996, 0.13737749455528872, 3.0000000256731667, 23.279945650126077], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.34575177364522, 7.352454372489996, 0.13737749455528872, 3.0000000256731667, 23.279945650126077], res_norm=3.257e+01
2026-01-21 12:07:01,550 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:07:01,550 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:07:01,568 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:01,742 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:01,764 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:01,814 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:01,838 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:01,885 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:01,911 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:01,961 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:01,983 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:02,031 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:02,052 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:02,103 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:02,126 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:02,172 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:02,195 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:02,244 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:02,266 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:02,318 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:02,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:02,385 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:07:02,409 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:02,454 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:07:03,752 - INFO - integration_test - Step 82: MPC solve successful
2026-01-21 12:07:04,207 - INFO - integration_test - Step 82: Computed 6 numeric contouring constraints for visualization (s=22.980)
2026-01-21 12:07:04,207 - DEBUG - integration_test - Step 82: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:07:04,207 - INFO - integration_test - === Applying control at step 82 ===
2026-01-21 12:07:04,207 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019729369, 'w': 0.41833689470425667}
2026-01-21 12:07:04,207 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:07:04,207 - INFO - integration_test -   Planner output success: True
2026-01-21 12:07:04,209 - INFO - integration_test - Step 82 completed in 2.906s
2026-01-21 12:07:04,278 - INFO - integration_test - Step 83 (contouring until path end)
2026-01-21 12:07:04,279 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[21.33494262  7.35701235  0.17921118  2.80000002 23.25994565]
2026-01-21 12:07:04,281 - DEBUG - integration_test - Step 83: Using propagated spline 23.2599 (close to path, dist=0.157m, drift=0.798m)
2026-01-21 12:07:04,281 - DEBUG - integration_test -   Set spline state to 23.2599
2026-01-21 12:07:04,284 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:07:04,397 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(21.335, 7.357), path_start=(0.000, 0.000), dist=22.568m
2026-01-21 12:07:04,398 - WARNING - integration_test - Step 83: Vehicle is far from path start (dist=22.568m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:07:04,398 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2026-01-21 12:07:04,501 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:07:04,527 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:07:04,527 - INFO - integration_test - Warmstart k=0: x0=21.33494262016862 , y0=7.357012345123771 , psi0=0.1792111840257144 , v0=2.80000002370023 , spline0=23.259945649928785 , a0=0.0 , w0=0.0
2026-01-21 12:07:04,527 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:07:04,528 - INFO - integration_test - Dyn residual k=0: pred=[21.610458312760855, 7.406923310478426, 0.1792111840257144, 2.80000002370023, 23.539945652298808], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.610458312760855, 7.406923310478426, 0.1792111840257144, 2.80000002370023, 23.539945652298808], res_norm=3.292e+01
2026-01-21 12:07:04,529 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:07:04,530 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:07:04,546 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:04,738 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:04,759 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:04,808 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:04,830 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:04,879 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:04,905 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:04,951 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:04,973 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:05,023 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:05,043 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:05,093 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:05,115 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:05,163 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:05,186 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:05,233 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:05,255 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:05,307 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:07:05,329 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:05,373 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:07:05,397 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:07:05,442 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:07:07,262 - INFO - integration_test - Step 83: MPC solve successful
2026-01-21 12:07:07,446 - INFO - integration_test - Step 83: Computed 6 numeric contouring constraints for visualization (s=23.260)
2026-01-21 12:07:07,447 - DEBUG - integration_test - Step 83: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:07:07,447 - INFO - integration_test - === Applying control at step 83 ===
2026-01-21 12:07:07,447 - INFO - integration_test -   Control dict from planner: {'a': -2.000000017770272, 'w': 0.7999999578588979}
2026-01-21 12:07:07,447 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:07:07,447 - INFO - integration_test -   Planner output success: True
2026-01-21 12:07:07,448 - INFO - integration_test - Goal reached at step 83!
2026-01-21 12:07:07,448 - INFO - integration_test - Step 83 completed in 3.169s
2026-01-21 12:07:07,522 - INFO - integration_test - Goal reached at step 83, added 3 extra frames for visualization
2026-01-21 12:07:07,532 - INFO - integration_test - Saving test results...
2026-01-21 12:07:07,535 - INFO - integration_test - Saved 88 vehicle states to test_outputs/20260121_120244_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-21 12:07:07,535 - INFO - integration_test - Saved obstacle summary to test_outputs/20260121_120244_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-21 12:07:07,535 - INFO - integration_test - Saved 95 states for obstacle 0 to test_outputs/20260121_120244_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-21 12:07:07,536 - INFO - integration_test - Saved 95 states for obstacle 1 to test_outputs/20260121_120244_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-21 12:07:07,536 - INFO - integration_test - Saved 95 states for obstacle 2 to test_outputs/20260121_120244_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-21 12:07:07,536 - INFO - integration_test - Saved 95 states for obstacle 3 to test_outputs/20260121_120244_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-21 12:07:07,536 - INFO - integration_test - Saved state history: 88 vehicle states, 4 obstacles
2026-01-21 12:07:07,537 - INFO - integration_test - Creating animation...
2026-01-21 12:07:07,581 - DEBUG - integration_test - Creating animation with 88 frames (range: 0 to 87)
2026-01-21 12:07:07,582 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 12:07:07,681 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 12:07:07,681 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 12:07:07,682 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 12:07:07,717 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 12:07:07,718 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 12:07:07,827 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 12:07:07,827 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 12:07:07,827 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 12:07:07,856 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 12:07:07,946 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-21 12:07:08,102 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-21 12:07:08,102 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-21 12:07:08,102 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 12:07:08,396 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-21 12:07:08,439 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-21 12:07:08,554 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-21 12:07:08,554 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-21 12:07:08,554 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 12:07:08,588 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-21 12:07:34,750 - INFO - integration_test - Saved animation with 88 frames at 10.00 fps to test_outputs/20260121_120244_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 8.80s, size: 1436092 bytes)
2026-01-21 12:07:34,796 - INFO - integration_test - Animation created successfully
2026-01-21 12:07:34,797 - INFO - integration_test - Test completed successfully
