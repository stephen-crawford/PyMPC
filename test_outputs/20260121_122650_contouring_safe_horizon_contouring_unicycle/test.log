2026-01-21 12:26:50,262 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 12:26:50,262 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 12:26:50,262 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 12:26:50,262 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 12:26:50,262 - INFO - integration_test - Creating objective module: contouring
2026-01-21 12:26:50,270 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 12:26:50,270 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 12:26:50,270 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 12:26:50,281 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 12:26:50,281 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 12:26:50,288 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 12:26:50,288 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 12:26:50,307 - INFO - integration_test - Setting solver on all modules...
2026-01-21 12:26:50,307 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 12:26:50,307 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 12:26:50,307 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 12:26:50,307 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 12:26:50,307 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 12:26:50,307 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 12:26:50,309 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 12:26:50,309 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 12:26:50,309 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 12:26:50,309 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 12:26:50,309 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 12:26:50,309 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 12:26:50,309 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 12:26:50,310 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 12:26:50,310 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 12:26:50,310 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 12:26:50,310 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 12:26:50,310 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 12:26:50,311 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 12:26:50,311 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 12:26:50,314 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:50,329 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 12:26:50,329 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 12:26:50,471 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:50,499 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:26:50,500 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 12:26:50,500 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:26:50,501 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 12:26:50,502 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:50,503 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:50,519 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:50,695 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:50,718 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:50,765 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:50,787 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:50,838 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:50,860 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:50,908 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:50,933 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:50,983 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:51,008 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:51,057 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:51,077 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:51,130 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:51,157 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:51,228 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:51,259 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:51,336 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:51,365 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:51,433 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:51,467 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:51,531 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:52,727 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 12:26:53,122 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 12:26:53,122 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:26:53,122 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 12:26:53,122 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 12:26:53,122 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196548893, 'w': 0.7999999980085772}
2026-01-21 12:26:53,122 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:26:53,122 - INFO - integration_test -   Planner output success: True
2026-01-21 12:26:53,124 - INFO - integration_test - Step 0 completed in 2.813s
2026-01-21 12:26:53,186 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 12:26:53,187 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 12:26:53,188 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 12:26:53,188 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 12:26:53,192 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:53,305 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 12:26:53,306 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 12:26:53,405 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:53,432 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:26:53,432 - INFO - integration_test - Warmstart k=0: x0=0.10987737537991832 , y0=0.004530845047041618 , psi0=0.07999999980085773 , v0=1.2000000019654888 , spline0=0.12000000019654888 , a0=0.0 , w0=0.0
2026-01-21 12:26:53,433 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:26:53,433 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033406264, 0.014120608315228843, 0.07999999980085773, 1.2000000019654888, 0.24000000039309777], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033406264, 0.014120608315228843, 0.07999999980085773, 1.2000000019654888, 0.24000000039309777], res_norm=1.248e+00
2026-01-21 12:26:53,434 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:53,435 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:53,452 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:53,613 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:53,636 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:53,683 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:53,705 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:53,752 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:53,775 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:53,827 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:53,847 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:53,891 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:53,914 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:53,962 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:53,987 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:54,034 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:54,055 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:54,100 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:54,125 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:54,172 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:54,193 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:54,240 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:54,262 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:54,309 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:54,951 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 12:26:55,043 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 12:26:55,043 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:26:55,043 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 12:26:55,043 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000162658065, 'w': 0.7999998414769238}
2026-01-21 12:26:55,043 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:26:55,043 - INFO - integration_test -   Planner output success: True
2026-01-21 12:26:55,045 - INFO - integration_test - Step 1 completed in 1.858s
2026-01-21 12:26:55,096 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 12:26:55,096 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999998 1.4        0.26      ]
2026-01-21 12:26:55,097 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 12:26:55,097 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 12:26:55,100 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:55,209 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 12:26:55,209 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 12:26:55,303 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:55,328 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:26:55,328 - INFO - integration_test - Warmstart k=0: x0=0.23889212831203543 , y0=0.020221620673948285 , psi0=0.1599999839485501 , v0=1.4000000035920694 , spline0=0.26000000055575584 , a0=0.0 , w0=0.0
2026-01-21 12:26:55,328 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:26:55,329 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039486972624, 0.042526167438670825, 0.1599999839485501, 1.4000000035920694, 0.4000000009149628], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.3771039486972624, 0.042526167438670825, 0.1599999839485501, 1.4000000035920694, 0.4000000009149628], res_norm=1.513e+00
2026-01-21 12:26:55,330 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:55,331 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:55,347 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:55,496 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:55,519 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:55,566 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:55,588 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:55,641 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:55,663 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:55,712 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:55,734 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:55,781 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:55,805 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:55,853 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:55,874 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:55,922 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:55,943 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:55,991 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:56,014 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:56,063 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:56,084 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:56,152 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:56,184 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:56,247 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:56,945 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 12:26:56,983 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 12:26:56,984 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:26:56,984 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 12:26:56,984 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199006096, 'w': 0.8000000039209718}
2026-01-21 12:26:56,984 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:26:56,984 - INFO - integration_test -   Planner output success: True
2026-01-21 12:26:56,985 - INFO - integration_test - Step 2 completed in 1.889s
2026-01-21 12:26:57,042 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 12:26:57,043 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999998 1.60000001 0.42      ]
2026-01-21 12:26:57,043 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 12:26:57,043 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 12:26:57,046 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:57,159 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 12:26:57,159 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 12:26:57,252 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:57,279 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:26:57,279 - INFO - integration_test - Warmstart k=0: x0=0.38583643629409003 , y0=0.050144713042285405 , psi0=0.2399999843406473 , v0=1.6000000055821304 , spline0=0.4200000011139689 , a0=0.0 , w0=0.0
2026-01-21 12:26:57,279 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:26:57,280 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505134081913, 0.0881771309696318, 0.2399999843406473, 1.6000000055821304, 0.580000001672182], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505134081913, 0.0881771309696318, 0.2399999843406473, 1.6000000055821304, 0.580000001672182], res_norm=1.804e+00
2026-01-21 12:26:57,281 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:57,282 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:57,302 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:57,501 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:57,523 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:57,568 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:57,588 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:57,636 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:57,657 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:57,708 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:57,729 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:57,774 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:57,795 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:57,843 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:57,863 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:57,912 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:57,933 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:57,981 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:58,002 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:58,049 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:58,070 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:58,117 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:58,138 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:58,183 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:58,846 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 12:26:58,887 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 12:26:58,887 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:26:58,887 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 12:26:58,887 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999492, 'w': 0.8000000099576258}
2026-01-21 12:26:58,887 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:26:58,887 - INFO - integration_test -   Planner output success: True
2026-01-21 12:26:58,888 - INFO - integration_test - Step 3 completed in 1.846s
2026-01-21 12:26:58,944 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 12:26:58,947 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-21 12:26:58,947 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 12:26:58,947 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 12:26:58,950 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:59,056 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 12:26:59,056 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 12:26:59,151 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:26:59,177 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:26:59,177 - INFO - integration_test - Warmstart k=0: x0=0.5491354625190472 , y0=0.09724075111131986 , psi0=0.3199999853364099 , v0=1.8000000075820797 , spline0=0.600000001872177 , a0=0.0 , w0=0.0
2026-01-21 12:26:59,178 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:26:59,179 - INFO - integration_test - Dyn residual k=0: pred=[0.719997839323886, 0.15386272975527207, 0.3199999853364099, 1.8000000075820797, 0.7800000026303849], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.719997839323886, 0.15386272975527207, 0.3199999853364099, 1.8000000075820797, 0.7800000026303849], res_norm=2.120e+00
2026-01-21 12:26:59,179 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:59,180 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:26:59,199 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,350 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,371 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,419 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,439 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,484 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,508 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,558 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,578 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,627 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,648 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,697 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,718 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,766 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,787 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,836 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,857 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,901 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:26:59,925 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:26:59,971 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:26:59,991 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:00,039 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:00,650 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 12:27:00,760 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 12:27:00,760 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:00,761 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 12:27:00,761 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001999598, 'w': 0.8000000094585317}
2026-01-21 12:27:00,761 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:00,761 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:00,762 - INFO - integration_test - Step 4 completed in 1.816s
2026-01-21 12:27:00,816 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 12:27:00,816 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427976 0.39999999 2.00000001 0.8       ]
2026-01-21 12:27:00,817 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 12:27:00,817 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 12:27:00,820 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:00,926 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 12:27:00,926 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 12:27:01,060 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:01,088 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:01,088 - INFO - integration_test - Warmstart k=0: x0=0.7268614909462988 , y0=0.16427976000408928 , psi0=0.3999999862822631 , v0=2.0000000095816777 , spline0=0.8000000028303447 , a0=0.0 , w0=0.0
2026-01-21 12:27:01,088 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:01,089 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736916977944, 0.24216342631197296, 0.3999999862822631, 2.0000000095816777, 1.0000000037885124], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736916977944, 0.24216342631197296, 0.3999999862822631, 2.0000000095816777, 1.0000000037885124], res_norm=2.459e+00
2026-01-21 12:27:01,092 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:01,093 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:01,110 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,261 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,284 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,332 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,355 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,402 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,425 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,472 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,491 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,541 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,562 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,612 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,634 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,680 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,699 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,751 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,773 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,821 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:01,841 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,885 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:01,906 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:01,956 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:02,613 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 12:27:02,655 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 12:27:02,655 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:02,655 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 12:27:02,655 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019338858, 'w': 0.7999997801686756}
2026-01-21 12:27:02,655 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:02,656 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:02,657 - INFO - integration_test - Step 5 completed in 1.841s
2026-01-21 12:27:02,714 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 12:27:02,715 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.2538238  0.47999996 2.20000001 1.02      ]
2026-01-21 12:27:02,715 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 12:27:02,715 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 12:27:02,719 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:02,828 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 12:27:02,828 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 12:27:02,919 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:02,943 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:02,944 - INFO - integration_test - Warmstart k=0: x0=0.9167519073086834 , y0=0.25382379536508226 , psi0=0.4799999642991306 , v0=2.2000000115155633 , spline0=1.020000003981901 , a0=0.0 , w0=0.0
2026-01-21 12:27:02,944 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:02,944 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907949684524, 0.35541520754934536, 0.4799999642991306, 2.2000000115155633, 1.2400000051334574], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907949684524, 0.35541520754934536, 0.4799999642991306, 2.2000000115155633, 1.2400000051334574], res_norm=2.823e+00
2026-01-21 12:27:02,945 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:02,946 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:02,962 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,112 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,136 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,181 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,201 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,249 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,269 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,323 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,346 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,392 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,417 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,464 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,487 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,536 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,557 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,602 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,627 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,673 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:03,694 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,742 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:03,763 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:03,810 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:04,500 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 12:27:04,595 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 12:27:04,595 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:04,595 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 12:27:04,595 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000190921288, 'w': 0.7999969151573091}
2026-01-21 12:27:04,595 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:04,595 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:04,596 - INFO - integration_test - Step 6 completed in 1.882s
2026-01-21 12:27:04,654 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 12:27:04,656 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623089 0.3681914  0.55999966 2.40000001 1.26000001]
2026-01-21 12:27:04,656 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 12:27:04,656 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 12:27:04,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:04,769 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 12:27:04,769 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 12:27:04,867 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:04,892 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:04,892 - INFO - integration_test - Warmstart k=0: x0=1.1162308899385986 , y0=0.3681913967078752 , psi0=0.5599996558148616 , v0=2.4000000134247763 , spline0=1.2600000053243787 , a0=0.0 , w0=0.0
2026-01-21 12:27:04,892 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:04,893 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721615975626, 0.4956760149349566, 0.5599996558148616, 2.4000000134247763, 1.5000000066668564], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721615975626, 0.4956760149349566, 0.5599996558148616, 2.4000000134247763, 1.5000000066668564], res_norm=3.211e+00
2026-01-21 12:27:04,893 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:04,894 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:04,912 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,061 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,082 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,129 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,151 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,202 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,224 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,270 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,291 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,340 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,361 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,410 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,432 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,481 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,502 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,548 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,570 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,623 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:05,646 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,690 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:05,712 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:05,756 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:06,785 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 12:27:06,832 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 12:27:06,832 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:06,832 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 12:27:06,832 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998448, 'w': -0.17963390004351695}
2026-01-21 12:27:06,832 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:06,832 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:06,834 - INFO - integration_test - Step 7 completed in 2.178s
2026-01-21 12:27:06,885 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 12:27:06,885 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.3292417  0.49905283 0.54203627 2.60000002 1.52000001]
2026-01-21 12:27:06,886 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 12:27:06,886 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 12:27:06,889 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:06,994 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 12:27:06,994 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 12:27:07,156 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:07,182 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:07,182 - INFO - integration_test - Warmstart k=0: x0=1.3292417032171808 , y0=0.49905282885623947 , psi0=0.5420362658105099 , v0=2.6000000154246212 , spline0=1.520000006866841 , a0=0.0 , w0=0.0
2026-01-21 12:27:07,182 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:07,183 - INFO - integration_test - Dyn residual k=0: pred=[1.551973300990527, 0.6331820059781939, 0.5420362658105099, 2.6000000154246212, 1.780000008409303], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.551973300990527, 0.6331820059781939, 0.5420362658105099, 2.6000000154246212, 1.780000008409303], res_norm=3.610e+00
2026-01-21 12:27:07,184 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:07,185 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:07,203 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,354 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,375 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,425 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,454 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,508 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,536 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,594 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,618 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,667 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,688 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,738 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,759 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,810 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,831 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,880 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,900 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:07,948 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:07,969 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:08,021 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:08,042 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:08,085 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:08,894 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 12:27:08,944 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 12:27:08,944 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:08,944 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 12:27:08,944 - INFO - integration_test -   Control dict from planner: {'a': 1.9999998550313733, 'w': -0.03196260984732905}
2026-01-21 12:27:08,944 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:08,944 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:08,945 - INFO - integration_test - Step 8 completed in 2.060s
2026-01-21 12:27:09,001 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 12:27:09,002 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56076485 0.63796637 0.53884    2.8        1.80000001]
2026-01-21 12:27:09,003 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 12:27:09,003 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 12:27:09,006 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:09,111 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 12:27:09,111 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 12:27:09,199 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:09,228 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:09,228 - INFO - integration_test - Warmstart k=0: x0=1.5607648474577762 , y0=0.6379663706300878 , psi0=0.538840004825777 , v0=2.8000000009277586 , spline0=1.8000000069596167 , a0=0.0 , w0=0.0
2026-01-21 12:27:09,228 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:09,229 - INFO - integration_test - Dyn residual k=0: pred=[1.8010901073799763, 0.7816457689281089, 0.538840004825777, 2.8000000009277586, 2.0800000070523925], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.8010901073799763, 0.7816457689281089, 0.538840004825777, 2.8000000009277586, 2.0800000070523925], res_norm=4.039e+00
2026-01-21 12:27:09,229 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:09,230 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:09,247 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,399 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,421 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,469 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,490 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,538 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,559 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,607 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,629 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,677 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,698 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,747 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,767 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,814 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,834 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,878 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,900 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:09,953 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:09,974 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:10,020 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:10,040 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:10,085 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:10,790 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 12:27:10,911 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 12:27:10,911 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:10,911 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 12:27:10,911 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019995076, 'w': -0.07961485838000745}
2026-01-21 12:27:10,911 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:10,911 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:10,913 - INFO - integration_test - Step 9 completed in 1.912s
2026-01-21 12:27:10,976 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 12:27:10,977 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81026966 0.78577335 0.53087852 3.         2.10000001]
2026-01-21 12:27:10,978 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 12:27:10,978 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 12:27:10,981 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:11,081 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 12:27:11,081 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 12:27:11,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:11,206 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:11,206 - INFO - integration_test - Warmstart k=0: x0=1.8102696609096667 , y0=0.7857733533080629 , psi0=0.5308785189877763 , v0=3.000000002927266 , spline0=2.1000000072523433 , a0=0.0 , w0=0.0
2026-01-21 12:27:11,206 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:11,207 - INFO - integration_test - Dyn residual k=0: pred=[2.068978446255309, 0.9376606949814831, 0.5308785189877763, 3.000000002927266, 2.40000000754507], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.068978446255309, 0.9376606949814831, 0.5308785189877763, 3.000000002927266, 2.40000000754507], res_norm=4.495e+00
2026-01-21 12:27:11,208 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:11,209 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:11,229 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,388 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,411 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,457 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,481 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,529 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,551 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,598 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,623 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,671 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,690 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,737 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,757 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,803 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,827 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,874 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,897 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:11,943 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:11,964 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:12,012 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:12,033 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:12,078 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:12,820 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 12:27:12,869 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 12:27:12,870 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:12,870 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 12:27:12,870 - INFO - integration_test -   Control dict from planner: {'a': 2.707261813939614e-07, 'w': -0.056681007481471486}
2026-01-21 12:27:12,870 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:12,870 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:12,871 - INFO - integration_test - Step 10 completed in 1.894s
2026-01-21 12:27:12,930 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 12:27:12,931 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06940752 0.93692669 0.52521042 3.00000003 2.40000001]
2026-01-21 12:27:12,932 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 12:27:12,932 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 12:27:12,935 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:13,043 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 12:27:13,043 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 12:27:13,140 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:13,164 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:13,164 - INFO - integration_test - Warmstart k=0: x0=2.0694075173805873 , y0=0.9369266906067983 , psi0=0.5252104182396291 , v0=3.000000029999884 , spline0=2.400000010252332 , a0=0.0 , w0=0.0
2026-01-21 12:27:13,164 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:13,165 - INFO - integration_test - Dyn residual k=0: pred=[2.3289730574089704, 1.087345214166122, 0.5252104182396291, 3.000000029999884, 2.7000000132523203], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3289730574089704, 1.087345214166122, 0.5252104182396291, 3.000000029999884, 2.7000000132523203], res_norm=4.814e+00
2026-01-21 12:27:13,165 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:13,166 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:13,181 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,407 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,433 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,481 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,503 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,549 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,569 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,618 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,641 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,687 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,709 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,756 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,779 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,828 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,849 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,895 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,918 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:13,966 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:13,986 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:14,033 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:14,054 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:14,101 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:14,796 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 12:27:14,848 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 12:27:14,848 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:14,848 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 12:27:14,848 - INFO - integration_test -   Control dict from planner: {'a': -4.4571156711084575e-10, 'w': -0.06026115434035622}
2026-01-21 12:27:14,848 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:14,848 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:14,849 - INFO - integration_test - Step 11 completed in 1.918s
2026-01-21 12:27:14,899 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 12:27:14,901 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.3294247  1.08656222 0.5191843  3.00000003 2.70000001]
2026-01-21 12:27:14,901 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 12:27:14,901 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 12:27:14,905 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:15,012 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 12:27:15,012 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 12:27:15,103 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:15,131 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:15,131 - INFO - integration_test - Warmstart k=0: x0=2.329424704751605 , y0=1.0865622201952738 , psi0=0.5191843028055935 , v0=3.000000029955313 , spline0=2.700000013247863 , a0=0.0 , w0=0.0
2026-01-21 12:27:15,131 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:15,132 - INFO - integration_test - Dyn residual k=0: pred=[2.589891965750458, 1.235413850166444, 0.5191843028055935, 3.000000029955313, 3.000000016243394], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.589891965750458, 1.235413850166444, 0.5191843028055935, 3.000000029955313, 3.000000016243394], res_norm=5.148e+00
2026-01-21 12:27:15,133 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:15,134 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:15,151 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,301 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,324 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,369 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,389 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,437 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,457 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,507 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,529 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,577 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,599 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,650 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,672 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,721 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,742 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,787 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,814 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,870 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:15,891 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:15,940 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:15,960 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:16,008 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:16,618 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 12:27:16,666 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 12:27:16,667 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:16,667 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 12:27:16,667 - INFO - integration_test -   Control dict from planner: {'a': -6.131825936725842e-10, 'w': -0.11919239842985918}
2026-01-21 12:27:16,667 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:16,667 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:16,668 - INFO - integration_test - Step 12 completed in 1.767s
2026-01-21 12:27:16,725 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 12:27:16,726 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59077289 1.23385806 0.50726506 3.00000003 3.00000002]
2026-01-21 12:27:16,727 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-21 12:27:16,727 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 12:27:16,730 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:16,904 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.591, 1.234), path_start=(0.000, 0.000), dist=2.870m
2026-01-21 12:27:16,904 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 12:27:17,009 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:17,035 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:17,035 - INFO - integration_test - Warmstart k=0: x0=2.5907728870745173 , y0=1.2338580581751262 , psi0=0.5072650629626075 , v0=3.000000029893995 , spline0=3.0000000162372626 , a0=0.0 , w0=0.0
2026-01-21 12:27:17,035 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:17,036 - INFO - integration_test - Dyn residual k=0: pred=[2.852995802488772, 1.3795946164756723, 0.5072650629626075, 3.000000029893995, 3.3000000192266623], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.852995802488772, 1.3795946164756723, 0.5072650629626075, 3.000000029893995, 3.3000000192266623], res_norm=5.495e+00
2026-01-21 12:27:17,037 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:17,037 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:17,053 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,206 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,227 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,274 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,294 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,341 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,360 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,407 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,428 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,479 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,500 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,547 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,567 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,615 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,636 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,682 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,706 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,752 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:17,773 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,820 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:17,840 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:17,886 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:18,507 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 12:27:18,556 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 12:27:18,556 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:18,556 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 12:27:18,556 - INFO - integration_test -   Control dict from planner: {'a': -7.840746984261933e-08, 'w': 0.018166599614100113}
2026-01-21 12:27:18,556 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:18,557 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:18,558 - INFO - integration_test - Step 13 completed in 1.832s
2026-01-21 12:27:18,614 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 12:27:18,616 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85286328 1.37983272 0.50908172 3.00000002 3.30000002]
2026-01-21 12:27:18,617 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.148m, drift=0.370m)
2026-01-21 12:27:18,617 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 12:27:18,620 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:18,725 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.853, 1.380), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 12:27:18,725 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 12:27:18,822 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:18,846 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:18,846 - INFO - integration_test - Warmstart k=0: x0=2.8528632810638954 , y0=1.3798327209937544 , psi0=0.5090817229240175 , v0=3.0000000220532477 , spline0=3.3000000184425873 , a0=0.0 , w0=0.0
2026-01-21 12:27:18,846 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:18,847 - INFO - integration_test - Dyn residual k=0: pred=[3.114821009467832, 1.5260454080378145, 0.5090817229240175, 3.0000000220532477, 3.600000020647912], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.114821009467832, 1.5260454080378145, 0.5090817229240175, 3.0000000220532477, 3.600000020647912], res_norm=5.852e+00
2026-01-21 12:27:18,848 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:18,849 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:18,865 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,021 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,042 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,089 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,113 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,159 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,179 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,227 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,247 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,294 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,319 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,366 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,387 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,436 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,458 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,508 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,529 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,575 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:19,596 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,643 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:19,663 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:19,710 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:20,442 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 12:27:20,573 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 12:27:20,573 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:20,573 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 12:27:20,573 - INFO - integration_test -   Control dict from planner: {'a': 7.946629067688148e-08, 'w': -0.08441782207838215}
2026-01-21 12:27:20,573 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:20,573 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:20,575 - INFO - integration_test - Step 14 completed in 1.959s
2026-01-21 12:27:20,632 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 12:27:20,633 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11543504 1.52493798 0.50063994 3.00000003 3.60000002]
2026-01-21 12:27:20,633 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.255m, drift=0.182m)
2026-01-21 12:27:20,633 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 12:27:20,636 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:20,745 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.525), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 12:27:20,745 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 12:27:20,839 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:20,866 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:20,866 - INFO - integration_test - Warmstart k=0: x0=3.1154350426468387 , y0=1.5249379831476482 , psi0=0.5006399407161793 , v0=3.000000029999877 , spline0=3.600000021442575 , a0=0.0 , w0=0.0
2026-01-21 12:27:20,866 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:20,867 - INFO - integration_test - Dyn residual k=0: pred=[3.3786177187666078, 1.6689340969508664, 0.5006399407161793, 3.000000029999877, 3.9000000244425626], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3786177187666078, 1.6689340969508664, 0.5006399407161793, 3.000000029999877, 3.9000000244425626], res_norm=6.218e+00
2026-01-21 12:27:20,868 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:20,868 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:20,886 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,038 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,059 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,104 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,125 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,170 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,191 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,243 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,264 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,313 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,334 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,383 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,405 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,454 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,475 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,525 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,547 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,593 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:21,617 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,666 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:21,686 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:21,733 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:22,698 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 12:27:22,750 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 12:27:22,751 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:22,751 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 12:27:22,751 - INFO - integration_test -   Control dict from planner: {'a': -8.539518878128893e-07, 'w': -0.04726218998389664}
2026-01-21 12:27:22,751 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:22,751 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:22,752 - INFO - integration_test - Step 15 completed in 2.120s
2026-01-21 12:27:22,809 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 12:27:22,810 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37895701 1.66831163 0.49591372 2.99999994 3.90000002]
2026-01-21 12:27:22,811 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.148m, drift=0.482m)
2026-01-21 12:27:22,811 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 12:27:22,815 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:22,918 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.379, 1.668), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 12:27:22,918 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 12:27:23,008 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:23,035 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:23,036 - INFO - integration_test - Warmstart k=0: x0=3.3789570131748827 , y0=1.668311630512552 , psi0=0.4959137217177897 , v0=2.999999944604688 , spline0=3.9000000159030437 , a0=0.0 , w0=0.0
2026-01-21 12:27:23,036 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:23,037 - INFO - integration_test - Dyn residual k=0: pred=[3.6428172970495267, 1.8110622776910277, 0.4959137217177897, 2.999999944604688, 4.200000010363513], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.6428172970495267, 1.8110622776910277, 0.4959137217177897, 2.999999944604688, 4.200000010363513], res_norm=6.591e+00
2026-01-21 12:27:23,037 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:23,038 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:23,055 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,291 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,315 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,364 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,386 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,433 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,458 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,532 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,566 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,617 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,638 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,686 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,710 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,758 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,778 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,826 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,847 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,898 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:23,920 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:23,964 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:23,983 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:24,030 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:24,727 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 12:27:24,783 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 12:27:24,783 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:24,783 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 12:27:24,783 - INFO - integration_test -   Control dict from planner: {'a': 8.539424264759304e-07, 'w': -0.06816815383861632}
2026-01-21 12:27:24,783 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:24,783 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:24,785 - INFO - integration_test - Step 16 completed in 1.975s
2026-01-21 12:27:24,843 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 12:27:24,846 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64330181 1.81016183 0.48909691 3.00000003 4.20000002]
2026-01-21 12:27:24,847 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.144m, drift=0.294m)
2026-01-21 12:27:24,847 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 12:27:24,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:24,953 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.810), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 12:27:24,953 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 12:27:25,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:25,076 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:25,076 - INFO - integration_test - Warmstart k=0: x0=3.643301807786073 , y0=1.8101618341904613 , psi0=0.48909690633392805 , v0=3.000000029998931 , spline0=4.200000018902937 , a0=0.0 , w0=0.0
2026-01-21 12:27:25,076 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:25,077 - INFO - integration_test - Dyn residual k=0: pred=[3.908129065835859, 1.9511104957441194, 0.48909690633392805, 3.000000029998931, 4.500000021902831], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.908129065835859, 1.9511104957441194, 0.48909690633392805, 3.000000029998931, 4.500000021902831], res_norm=6.969e+00
2026-01-21 12:27:25,078 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:25,078 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:25,094 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,252 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,281 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,331 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,353 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,402 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,423 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,471 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,492 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,543 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,564 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,616 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,638 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,688 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,712 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,757 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,777 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,825 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:25,847 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,896 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:25,917 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:25,960 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:26,640 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 12:27:26,783 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 12:27:26,783 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:26,783 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 12:27:26,784 - INFO - integration_test -   Control dict from planner: {'a': -7.925390580870058e-07, 'w': -0.06302557497358345}
2026-01-21 12:27:26,784 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:26,784 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:26,785 - INFO - integration_test - Step 17 completed in 1.939s
2026-01-21 12:27:26,844 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 12:27:26,847 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90857148 1.95027502 0.48279435 2.99999995 4.50000001]
2026-01-21 12:27:26,847 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.249m, drift=0.594m)
2026-01-21 12:27:26,847 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 12:27:26,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:26,952 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.909, 1.950), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 12:27:26,952 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 12:27:27,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:27,076 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:27,076 - INFO - integration_test - Warmstart k=0: x0=3.90857147613021 , y0=1.9502750190185587 , psi0=0.4827943488365697 , v0=2.9999999507450252 , spline0=4.50000001397744 , a0=0.0 , w0=0.0
2026-01-21 12:27:27,077 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:27,078 - INFO - integration_test - Dyn residual k=0: pred=[4.1742817985756275, 2.089551799533668, 0.4827943488365697, 2.9999999507450252, 4.800000009051942], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.1742817985756275, 2.089551799533668, 0.4827943488365697, 2.9999999507450252, 4.800000009051942], res_norm=7.353e+00
2026-01-21 12:27:27,079 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:27,080 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:27,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,253 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,273 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,323 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,343 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,389 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,413 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,460 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,483 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,529 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,549 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,597 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,623 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,669 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,689 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,736 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,756 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,805 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:27,828 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,871 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:27,890 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:27,937 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:28,562 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 12:27:28,630 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 12:27:28,631 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:28,631 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 12:27:28,631 - INFO - integration_test -   Control dict from planner: {'a': 7.925414164065653e-07, 'w': -0.04047051673455403}
2026-01-21 12:27:28,631 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:28,631 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:28,632 - INFO - integration_test - Step 18 completed in 1.786s
2026-01-21 12:27:28,687 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 12:27:28,688 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17456291 2.08901375 0.4787473  3.00000003 4.80000002]
2026-01-21 12:27:28,689 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.128m, drift=0.405m)
2026-01-21 12:27:28,689 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 12:27:28,692 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:28,798 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.175, 2.089), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 12:27:28,798 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 12:27:28,892 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:28,921 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:28,921 - INFO - integration_test - Warmstart k=0: x0=4.174562906541745 , y0=2.0890137502017865 , psi0=0.47874729716311426 , v0=3.0000000299991667 , spline0=4.800000016977356 , a0=0.0 , w0=0.0
2026-01-21 12:27:28,921 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:28,923 - INFO - integration_test - Dyn residual k=0: pred=[4.440834718828344, 2.22721405331853, 0.47874729716311426, 3.0000000299991667, 5.100000019977273], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440834718828344, 2.22721405331853, 0.47874729716311426, 3.0000000299991667, 5.100000019977273], res_norm=7.741e+00
2026-01-21 12:27:28,924 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:28,925 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:28,941 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,095 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,118 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,163 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,185 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,234 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,256 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,305 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,328 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,373 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,394 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,446 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,467 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,512 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,535 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,582 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,604 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,653 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:29,674 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,720 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:29,740 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:29,784 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:30,443 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 12:27:30,587 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 12:27:30,588 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:30,588 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 12:27:30,588 - INFO - integration_test -   Control dict from planner: {'a': -1.5379222943810267e-06, 'w': -0.054305079730088746}
2026-01-21 12:27:30,588 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:30,588 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:30,590 - INFO - integration_test - Step 19 completed in 1.902s
2026-01-21 12:27:30,656 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 12:27:30,657 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44120865 2.22649038 0.47331679 2.99999988 5.1       ]
2026-01-21 12:27:30,657 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.154m, drift=0.217m)
2026-01-21 12:27:30,657 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 12:27:30,660 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:30,765 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.226), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 12:27:30,765 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 12:27:30,862 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:30,886 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:30,887 - INFO - integration_test - Warmstart k=0: x0=4.441208651249823 , y0=2.226490376714842 , psi0=0.4733167891901054 , v0=2.999999876206937 , spline0=5.10000000459805 , a0=0.0 , w0=0.0
2026-01-21 12:27:30,887 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:30,888 - INFO - integration_test - Dyn residual k=0: pred=[4.7082270177834555, 2.363242650941368, 0.4733167891901054, 2.999999876206937, 5.399999992218743], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.7082270177834555, 2.363242650941368, 0.4733167891901054, 2.999999876206937, 5.399999992218743], res_norm=8.132e+00
2026-01-21 12:27:30,888 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:30,889 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:30,905 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,076 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,100 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,146 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,167 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,217 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,239 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,287 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,309 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,356 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,377 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,431 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,453 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,499 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,523 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,571 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,593 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,645 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:31,666 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,714 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:31,734 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:31,782 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:32,471 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 12:27:32,530 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 12:27:32,530 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:32,530 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 12:27:32,530 - INFO - integration_test -   Control dict from planner: {'a': 1.5379244664828729e-06, 'w': -0.07560942825070621}
2026-01-21 12:27:32,530 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:32,530 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:32,532 - INFO - integration_test - Step 20 completed in 1.875s
2026-01-21 12:27:32,588 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 12:27:32,588 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70874147 2.3622319  0.46575585 3.00000003 5.40000001]
2026-01-21 12:27:32,589 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 12:27:32,589 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 12:27:32,592 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:32,702 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.709, 2.362), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 12:27:32,702 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 12:27:32,891 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:32,919 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:32,919 - INFO - integration_test - Warmstart k=0: x0=4.7087414661086235 , y0=2.3622319009512673 , psi0=0.46575584636503475 , v0=3.000000029999384 , spline0=5.400000007597988 , a0=0.0 , w0=0.0
2026-01-21 12:27:32,919 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:32,920 - INFO - integration_test - Dyn residual k=0: pred=[4.976786180260837, 2.4969613818194913, 0.46575584636503475, 3.000000029999384, 5.700000010597927], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.976786180260837, 2.4969613818194913, 0.46575584636503475, 3.000000029999384, 5.700000010597927], res_norm=8.527e+00
2026-01-21 12:27:32,921 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:32,922 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:32,938 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,110 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,133 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,182 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,206 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,257 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,279 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,330 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,351 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,396 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,420 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,468 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,489 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,537 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,557 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,603 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,627 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,675 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:33,696 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,743 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:33,763 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:33,810 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:34,414 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 12:27:34,473 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 12:27:34,474 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:34,474 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 12:27:34,474 - INFO - integration_test -   Control dict from planner: {'a': -4.1624520787161693e-07, 'w': -0.045558345005105076}
2026-01-21 12:27:34,474 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:34,474 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:34,475 - INFO - integration_test - Step 21 completed in 1.887s
2026-01-21 12:27:34,538 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 12:27:34,539 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97709215 2.49635033 0.46120001 2.99999999 5.70000001]
2026-01-21 12:27:34,540 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.115m, drift=0.329m)
2026-01-21 12:27:34,540 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 12:27:34,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:34,657 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.496), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 12:27:34,657 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 12:27:34,761 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:34,786 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:34,787 - INFO - integration_test - Warmstart k=0: x0=4.977092153237834 , y0=2.4963503322030216 , psi0=0.46120001186452425 , v0=2.999999988374863 , spline0=5.7000000064354746 , a0=0.0 , w0=0.0
2026-01-21 12:27:34,787 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:34,787 - INFO - integration_test - Dyn residual k=0: pred=[5.2457478850429755, 2.629857249891715, 0.46120001186452425, 2.999999988374863, 6.000000005272961], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.2457478850429755, 2.629857249891715, 0.46120001186452425, 2.999999988374863, 6.000000005272961], res_norm=8.925e+00
2026-01-21 12:27:34,788 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:34,789 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:34,806 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:34,975 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:34,996 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,043 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:35,064 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,117 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:35,138 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,184 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:35,207 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,254 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:35,276 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,325 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:35,346 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,392 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:35,416 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,462 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:35,484 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,532 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:35,554 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,606 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:35,629 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:35,675 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:36,359 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 12:27:36,518 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 12:27:36,518 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:36,518 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 12:27:36,518 - INFO - integration_test -   Control dict from planner: {'a': 4.162499545066917e-07, 'w': -0.0753522124810866}
2026-01-21 12:27:36,518 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:36,518 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:36,520 - INFO - integration_test - Step 22 completed in 1.981s
2026-01-21 12:27:36,572 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 12:27:36,572 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24624834 2.6288438  0.45366479 3.00000003 6.00000001]
2026-01-21 12:27:36,573 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 12:27:36,573 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 12:27:36,576 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:36,681 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 12:27:36,681 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 12:27:36,779 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:36,803 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:36,803 - INFO - integration_test - Warmstart k=0: x0=5.246248344261366 , y0=2.6288438020015596 , psi0=0.45366479061641557 , v0=3.0000000299998586 , spline0=6.00000000943546 , a0=0.0 , w0=0.0
2026-01-21 12:27:36,804 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:36,805 - INFO - integration_test - Dyn residual k=0: pred=[5.51590244740991, 2.7603225700789418, 0.45366479061641557, 3.0000000299998586, 6.300000012435446], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.51590244740991, 2.7603225700789418, 0.45366479061641557, 3.0000000299998586, 6.300000012435446], res_norm=9.324e+00
2026-01-21 12:27:36,806 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:36,806 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:36,824 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:36,995 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,018 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,064 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,084 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,135 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,165 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,230 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,253 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,302 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,324 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,372 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,393 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,440 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,461 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,505 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,530 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,581 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:37,602 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,648 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:37,668 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:37,716 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:38,319 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 12:27:38,385 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 12:27:38,386 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:38,386 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 12:27:38,386 - INFO - integration_test -   Control dict from planner: {'a': -2.476048986312934e-07, 'w': -0.04866123622433692}
2026-01-21 12:27:38,386 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:38,386 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:38,387 - INFO - integration_test - Step 23 completed in 1.815s
2026-01-21 12:27:38,447 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 12:27:38,448 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51622128 2.75966597 0.44879867 3.00000001 6.30000001]
2026-01-21 12:27:38,448 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 12:27:38,448 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 12:27:38,451 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:38,557 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 12:27:38,558 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 12:27:38,668 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:38,697 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:38,697 - INFO - integration_test - Warmstart k=0: x0=5.516221277437961 , y0=2.7596659668501893 , psi0=0.44879866699398185 , v0=3.000000005239369 , spline0=6.300000009959398 , a0=0.0 , w0=0.0
2026-01-21 12:27:38,697 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:38,698 - INFO - integration_test - Dyn residual k=0: pred=[5.786511975184992, 2.889831012180283, 0.44879866699398185, 3.000000005239369, 6.600000010483335], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.786511975184992, 2.889831012180283, 0.44879866699398185, 3.000000005239369, 6.600000010483335], res_norm=9.726e+00
2026-01-21 12:27:38,699 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:38,700 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:38,723 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,069 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,091 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,140 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,163 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,219 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,241 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,290 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,317 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,369 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,392 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,445 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,467 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,566 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,598 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,655 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,676 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,730 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:39,754 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,813 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:39,836 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:39,880 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:41,249 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 12:27:41,316 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 12:27:41,316 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:41,316 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 12:27:41,316 - INFO - integration_test -   Control dict from planner: {'a': 2.47604845776851e-07, 'w': -0.06496162063476515}
2026-01-21 12:27:41,316 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:41,316 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:41,318 - INFO - integration_test - Step 24 completed in 2.870s
2026-01-21 12:27:41,377 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 12:27:41,378 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78693286 2.88895217 0.4423025  3.00000003 6.60000001]
2026-01-21 12:27:41,379 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.112m, drift=0.252m)
2026-01-21 12:27:41,379 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 12:27:41,382 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:41,488 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.889), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 12:27:41,488 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 12:27:41,591 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:41,616 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:41,616 - INFO - integration_test - Warmstart k=0: x0=5.786932860384787 , y0=2.888952174216798 , psi0=0.4423025049305053 , v0=3.0000000299998537 , spline0=6.6000000129593825 , a0=0.0 , w0=0.0
2026-01-21 12:27:41,616 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:41,617 - INFO - integration_test - Dyn residual k=0: pred=[6.05806342452176, 3.017358634298673, 0.4423025049305053, 3.0000000299998537, 6.9000000159593675], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.05806342452176, 3.017358634298673, 0.4423025049305053, 3.0000000299998537, 6.9000000159593675], res_norm=1.013e+01
2026-01-21 12:27:41,618 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:41,619 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:41,635 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:41,807 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:41,828 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:41,874 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:41,898 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:41,947 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:41,967 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:42,013 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:42,034 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:42,082 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:42,104 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:42,150 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:42,170 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:42,218 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:42,240 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:42,287 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:42,310 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:42,356 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:42,376 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:42,424 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:42,443 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:42,488 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:43,087 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 12:27:43,149 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 12:27:43,150 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:43,150 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 12:27:43,150 - INFO - integration_test -   Control dict from planner: {'a': -3.777961158114851e-07, 'w': -0.054301974813471876}
2026-01-21 12:27:43,150 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:43,150 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:43,151 - INFO - integration_test - Step 25 completed in 1.773s
2026-01-21 12:27:43,211 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 12:27:43,212 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05841073 3.01662186 0.43687231 2.99999999 6.90000001]
2026-01-21 12:27:43,213 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.204m, drift=0.064m)
2026-01-21 12:27:43,213 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 12:27:43,216 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:43,427 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.017), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 12:27:43,427 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 12:27:43,528 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:43,552 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:43,552 - INFO - integration_test - Warmstart k=0: x0=6.058410725701889 , y0=3.0166218579984494 , psi0=0.4368723074491581 , v0=2.9999999922202423 , spline0=6.9000000121814065 , a0=0.0 , w0=0.0
2026-01-21 12:27:43,552 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:43,553 - INFO - integration_test - Dyn residual k=0: pred=[6.330234558015401, 3.143554138052068, 0.4368723074491581, 2.9999999922202423, 7.20000001140343], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.330234558015401, 3.143554138052068, 0.4368723074491581, 2.9999999922202423, 7.20000001140343], res_norm=1.053e+01
2026-01-21 12:27:43,554 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:43,554 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:43,570 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:43,742 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:43,766 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:43,813 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:43,837 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:43,884 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:43,906 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:43,957 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:43,977 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:44,025 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:44,045 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:44,094 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:44,119 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:44,164 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:44,184 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:44,233 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:44,262 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:44,321 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:44,342 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:44,387 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:44,407 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:44,457 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:45,232 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 12:27:45,291 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 12:27:45,292 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:45,292 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 12:27:45,292 - INFO - integration_test -   Control dict from planner: {'a': 3.767353504814473e-07, 'w': -0.06863839122248855}
2026-01-21 12:27:45,292 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:45,292 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:45,293 - INFO - integration_test - Step 26 completed in 2.081s
2026-01-21 12:27:45,351 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 12:27:45,352 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33066805 3.14262027 0.43000847 3.00000003 7.20000002]
2026-01-21 12:27:45,353 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.174m, drift=0.364m)
2026-01-21 12:27:45,353 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 12:27:45,356 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:45,461 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.331, 3.143), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 12:27:45,461 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 12:27:45,557 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:45,585 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:45,585 - INFO - integration_test - Warmstart k=0: x0=6.330668045021867 , y0=3.1426202683005435 , psi0=0.43000846832690925 , v0=3.0000000298937772 , spline0=7.200000015170784 , a0=0.0 , w0=0.0
2026-01-21 12:27:45,585 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:45,586 - INFO - integration_test - Dyn residual k=0: pred=[6.603356713572317, 3.267683819496765, 0.43000846832690925, 3.0000000298937772, 7.500000018160161], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.603356713572317, 3.267683819496765, 0.43000846832690925, 3.0000000298937772, 7.500000018160161], res_norm=1.094e+01
2026-01-21 12:27:45,587 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:45,588 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:45,608 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:45,778 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:45,800 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:45,850 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:45,871 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:45,921 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:45,941 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:45,985 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:46,010 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:46,057 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:46,080 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:46,126 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:46,146 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:46,191 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:46,215 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:46,264 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:46,284 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:46,332 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:46,353 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:46,398 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:46,423 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:46,468 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:47,051 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 12:27:47,247 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 12:27:47,248 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:47,248 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 12:27:47,248 - INFO - integration_test -   Control dict from planner: {'a': -1.7607613613792057e-06, 'w': -0.05532692599222508}
2026-01-21 12:27:47,248 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:47,248 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:47,249 - INFO - integration_test - Step 27 completed in 1.897s
2026-01-21 12:27:47,309 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 12:27:47,310 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60370128 3.26692883 0.42447578 2.99999985 7.5       ]
2026-01-21 12:27:47,310 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.124m, drift=0.175m)
2026-01-21 12:27:47,310 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 12:27:47,313 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:47,417 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.604, 3.267), path_start=(0.000, 0.000), dist=7.368m
2026-01-21 12:27:47,417 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 12:27:47,526 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:47,552 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:47,552 - INFO - integration_test - Warmstart k=0: x0=6.603701282570339 , y0=3.266928828445405 , psi0=0.42447577572768674 , v0=2.999999853817641 , spline0=7.500000000552548 , a0=0.0 , w0=0.0
2026-01-21 12:27:47,552 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:47,553 - INFO - integration_test - Dyn residual k=0: pred=[6.8770776961466416, 3.390481763372977, 0.42447577572768674, 2.999999853817641, 7.7999999859343125], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.8770776961466416, 3.390481763372977, 0.42447577572768674, 2.999999853817641, 7.7999999859343125], res_norm=1.135e+01
2026-01-21 12:27:47,554 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:47,554 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:47,572 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:47,742 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:47,765 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:47,813 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:47,836 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:47,883 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:47,910 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:47,956 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:47,976 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:48,028 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:48,050 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:48,100 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:48,121 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:48,166 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:48,186 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:48,237 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:48,260 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:48,307 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:48,328 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:48,371 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:48,392 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:48,442 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:49,087 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 12:27:49,162 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 12:27:49,162 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:49,162 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 12:27:49,162 - INFO - integration_test -   Control dict from planner: {'a': 1.7618220055954058e-06, 'w': -0.06807688928962918}
2026-01-21 12:27:49,162 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:49,162 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:49,163 - INFO - integration_test - Step 28 completed in 1.854s
2026-01-21 12:27:49,226 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 12:27:49,227 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.87749615 3.38955029 0.41766809 3.00000003 7.8       ]
2026-01-21 12:27:49,228 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.243m, drift=0.013m)
2026-01-21 12:27:49,228 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 12:27:49,231 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:49,340 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.877, 3.390), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 12:27:49,340 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 12:27:49,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:49,571 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:49,571 - INFO - integration_test - Warmstart k=0: x0=6.877496145956818 , y0=3.389550285432647 , psi0=0.4176680867987238 , v0=3.0000000299998413 , spline0=7.800000003552532 , a0=0.0 , w0=0.0
2026-01-21 12:27:49,571 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:49,572 - INFO - integration_test - Dyn residual k=0: pred=[7.1517073443475665, 3.511239317301177, 0.4176680867987238, 3.0000000299998413, 8.100000006552516], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.1517073443475665, 3.511239317301177, 0.4176680867987238, 3.0000000299998413, 8.100000006552516], res_norm=1.176e+01
2026-01-21 12:27:49,573 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:49,573 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:49,590 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:49,762 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:49,783 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:49,830 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:49,851 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:49,897 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:49,923 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:49,975 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:49,995 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:50,045 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:50,065 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:50,115 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:50,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:50,184 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:50,204 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:50,255 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:50,275 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:50,322 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:50,344 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:50,389 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:50,413 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:50,458 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:51,195 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 12:27:51,262 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 12:27:51,263 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:51,263 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 12:27:51,263 - INFO - integration_test -   Control dict from planner: {'a': -1.0958544453027056e-06, 'w': -0.04749918001836443}
2026-01-21 12:27:51,263 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:51,263 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:51,264 - INFO - integration_test - Step 29 completed in 2.037s
2026-01-21 12:27:51,325 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 12:27:51,329 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.15199531 3.51058762 0.41291817 2.99999992 8.1       ]
2026-01-21 12:27:51,329 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.152m, drift=0.287m)
2026-01-21 12:27:51,329 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 12:27:51,332 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:51,441 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.152, 3.511), path_start=(0.000, 0.000), dist=7.967m
2026-01-21 12:27:51,441 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 12:27:51,541 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:51,570 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:51,570 - INFO - integration_test - Warmstart k=0: x0=7.151995314138925 , y0=3.5105876183800175 , psi0=0.41291816879688736 , v0=2.9999999204143966 , spline0=8.099999995593972 , a0=0.0 , w0=0.0
2026-01-21 12:27:51,570 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:51,571 - INFO - integration_test - Dyn residual k=0: pred=[7.426781419909297, 3.6309727972868004, 0.41291816879688736, 2.9999999204143966, 8.399999987635411], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.426781419909297, 3.6309727972868004, 0.41291816879688736, 2.9999999204143966, 8.399999987635411], res_norm=1.217e+01
2026-01-21 12:27:51,572 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:51,573 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:51,589 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:51,758 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:51,778 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:51,825 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:51,848 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:51,899 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:51,921 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:51,967 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:51,987 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:52,036 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:52,057 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:52,107 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:52,128 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:52,177 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:52,198 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:52,243 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:52,264 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:52,313 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:52,343 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:52,400 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:52,424 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:52,474 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:53,848 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 12:27:54,034 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 12:27:54,034 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:54,034 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 12:27:54,034 - INFO - integration_test -   Control dict from planner: {'a': 9.53306274059261e-07, 'w': -0.07672651934349145}
2026-01-21 12:27:54,034 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:54,034 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:54,035 - INFO - integration_test - Step 30 completed in 2.707s
2026-01-21 12:27:54,097 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 12:27:54,098 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.42724056 3.62991745 0.40524552 3.00000002 8.4       ]
2026-01-21 12:27:54,099 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.151m, drift=0.099m)
2026-01-21 12:27:54,099 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 12:27:54,102 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:54,207 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.427, 3.630), path_start=(0.000, 0.000), dist=8.267m
2026-01-21 12:27:54,207 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 12:27:54,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:54,333 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:54,333 - INFO - integration_test - Warmstart k=0: x0=7.427240562724641 , y0=3.629917454108364 , psi0=0.40524551686253824 , v0=3.000000015745024 , spline0=8.399999997168475 , a0=0.0 , w0=0.0
2026-01-21 12:27:54,333 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:54,334 - INFO - integration_test - Dyn residual k=0: pred=[7.7029422535363725, 3.748190775818097, 0.40524551686253824, 3.000000015745024, 8.699999998742978], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.7029422535363725, 3.748190775818097, 0.40524551686253824, 3.000000015745024, 8.699999998742978], res_norm=1.258e+01
2026-01-21 12:27:54,335 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:54,336 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:54,351 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:54,541 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:54,563 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:54,612 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:54,633 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:54,678 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:54,697 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:54,744 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:54,767 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:54,814 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:54,836 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:54,882 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:54,902 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:54,948 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:54,968 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:55,014 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:55,034 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:55,077 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:55,097 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:55,141 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:55,161 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:55,207 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:55,860 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 12:27:55,933 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 12:27:55,933 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:55,933 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 12:27:55,933 - INFO - integration_test -   Control dict from planner: {'a': 1.4254052420463127e-07, 'w': -0.21733382780914132}
2026-01-21 12:27:55,933 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:55,933 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:55,935 - INFO - integration_test - Step 31 completed in 1.836s
2026-01-21 12:27:55,992 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 12:27:55,994 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.70420574 3.74518562 0.38351213 3.00000003 8.7       ]
2026-01-21 12:27:55,994 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.253m, drift=0.399m)
2026-01-21 12:27:55,994 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 12:27:55,997 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:56,108 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.704, 3.745), path_start=(0.000, 0.000), dist=8.566m
2026-01-21 12:27:56,108 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 12:27:56,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:56,236 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:56,236 - INFO - integration_test - Warmstart k=0: x0=7.704205739674997 , y0=3.745185618184113 , psi0=0.3835121340816241 , v0=3.0000000299990766 , spline0=8.700000000168384 , a0=0.0 , w0=0.0
2026-01-21 12:27:56,236 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:56,237 - INFO - integration_test - Dyn residual k=0: pred=[7.982412598934804, 3.8574395502343464, 0.3835121340816241, 3.0000000299990766, 9.000000003168292], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.982412598934804, 3.8574395502343464, 0.3835121340816241, 3.0000000299990766, 9.000000003168292], res_norm=1.299e+01
2026-01-21 12:27:56,238 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:56,239 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:56,255 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:56,442 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:56,467 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:56,521 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:56,544 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:56,592 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:56,617 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:56,670 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:56,693 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:56,747 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:56,769 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:56,822 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:56,845 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:56,894 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:56,916 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:56,959 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:56,981 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:57,026 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:57,047 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:57,088 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:57,109 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:57,153 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:57,718 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 12:27:57,904 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 12:27:57,904 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:57,904 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 12:27:57,904 - INFO - integration_test -   Control dict from planner: {'a': -3.245079680381793e-07, 'w': 0.1568454367445762}
2026-01-21 12:27:57,905 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:57,905 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:57,906 - INFO - integration_test - Step 32 completed in 1.912s
2026-01-21 12:27:57,962 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 12:27:57,967 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.98152088 3.85961668 0.39919668 3.         9.        ]
2026-01-21 12:27:57,967 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.142m, drift=0.211m)
2026-01-21 12:27:57,967 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 12:27:57,970 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:58,080 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.982, 3.860), path_start=(0.000, 0.000), dist=8.866m
2026-01-21 12:27:58,080 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 12:27:58,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:27:58,212 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:27:58,212 - INFO - integration_test - Warmstart k=0: x0=7.981520883070752 , y0=3.8596166762578727 , psi0=0.3991966777560817 , v0=2.99999999754828 , spline0=8.999999999923212 , a0=0.0 , w0=0.0
2026-01-21 12:27:58,212 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:27:58,214 - INFO - integration_test - Dyn residual k=0: pred=[8.257932940402826, 3.9762201685484007, 0.3991966777560817, 2.99999999754828, 9.29999999967804], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.257932940402826, 3.9762201685484007, 0.3991966777560817, 2.99999999754828, 9.29999999967804], res_norm=1.340e+01
2026-01-21 12:27:58,215 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:58,216 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:27:58,233 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,403 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,426 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,469 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,491 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,537 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,558 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,606 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,629 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,673 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,692 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,740 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,763 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,814 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,836 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,884 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,908 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:58,954 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:27:58,974 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:59,019 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:59,039 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:27:59,081 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:27:59,824 - INFO - integration_test - Step 33: MPC solve successful
2026-01-21 12:27:59,890 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 12:27:59,891 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:27:59,891 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 12:27:59,891 - INFO - integration_test -   Control dict from planner: {'a': 3.2451543511712497e-07, 'w': -0.11426488108658842}
2026-01-21 12:27:59,891 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:27:59,891 - INFO - integration_test -   Planner output success: True
2026-01-21 12:27:59,892 - INFO - integration_test - Step 33 completed in 1.925s
2026-01-21 12:27:59,952 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 12:27:59,953 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.2585931  3.97463844 0.38777019 3.00000003 9.3       ]
2026-01-21 12:27:59,954 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.193m, drift=0.022m)
2026-01-21 12:27:59,954 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 12:27:59,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:00,071 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.259, 3.975), path_start=(0.000, 0.000), dist=9.165m
2026-01-21 12:28:00,071 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 12:28:00,175 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:00,200 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:00,201 - INFO - integration_test - Warmstart k=0: x0=8.258593103964532 , y0=3.974638439442154 , psi0=0.3877701896474229 , v0=3.0000000299998235 , spline0=9.300000002923195 , a0=0.0 , w0=0.0
2026-01-21 12:28:00,201 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:00,202 - INFO - integration_test - Dyn residual k=0: pred=[8.536319459103002, 4.088075970539629, 0.3877701896474229, 3.0000000299998235, 9.600000005923178], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.536319459103002, 4.088075970539629, 0.3877701896474229, 3.0000000299998235, 9.600000005923178], res_norm=1.382e+01
2026-01-21 12:28:00,204 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:00,205 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:00,223 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,398 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,422 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,469 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,493 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,541 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,562 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,615 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,637 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,681 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,702 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,748 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,768 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,816 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,837 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,880 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,900 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:00,947 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:00,968 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:01,014 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:01,035 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:01,078 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:02,892 - INFO - integration_test - Step 34: MPC solve successful
2026-01-21 12:28:03,086 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 12:28:03,086 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:03,086 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 12:28:03,086 - INFO - integration_test -   Control dict from planner: {'a': -3.641271836339276e-07, 'w': -0.07602398205005409}
2026-01-21 12:28:03,086 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:03,087 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:03,088 - INFO - integration_test - Step 34 completed in 3.135s
2026-01-21 12:28:03,149 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 12:28:03,150 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.53674798 4.08701919 0.38016779 2.99999999 9.6       ]
2026-01-21 12:28:03,150 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.217m, drift=0.322m)
2026-01-21 12:28:03,150 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 12:28:03,153 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:03,265 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.537, 4.087), path_start=(0.000, 0.000), dist=9.465m
2026-01-21 12:28:03,265 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 12:28:03,363 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:03,390 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:03,390 - INFO - integration_test - Warmstart k=0: x0=8.536747978720092 , y0=4.087019189061157 , psi0=0.38016779144241747 , v0=2.9999999935871053 , spline0=9.600000002281906 , a0=0.0 , w0=0.0
2026-01-21 12:28:03,390 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:03,391 - INFO - integration_test - Dyn residual k=0: pred=[8.815328693691615, 4.19834207467405, 0.38016779144241747, 2.9999999935871053, 9.900000001640617], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.815328693691615, 4.19834207467405, 0.38016779144241747, 2.9999999935871053, 9.900000001640617], res_norm=1.423e+01
2026-01-21 12:28:03,392 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:03,392 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:03,411 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:03,585 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:03,608 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:03,653 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:03,676 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:03,722 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:03,742 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:03,787 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:03,809 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:03,854 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:03,874 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:03,920 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:03,941 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:03,985 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:04,005 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:04,051 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:04,071 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:04,116 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:04,136 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:04,181 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:04,200 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:04,246 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:04,937 - INFO - integration_test - Step 35: MPC solve successful
2026-01-21 12:28:05,016 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 12:28:05,017 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:05,017 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 12:28:05,017 - INFO - integration_test -   Control dict from planner: {'a': 3.638796183642913e-07, 'w': -0.056753652640925994}
2026-01-21 12:28:05,017 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:05,017 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:05,018 - INFO - integration_test - Step 35 completed in 1.868s
2026-01-21 12:28:05,075 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 12:28:05,076 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.8156431  4.19755096 0.37449243 3.00000003 9.90000001]
2026-01-21 12:28:05,076 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.145m, drift=0.134m)
2026-01-21 12:28:05,076 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 12:28:05,079 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:05,195 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.816, 4.198), path_start=(0.000, 0.000), dist=9.764m
2026-01-21 12:28:05,195 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 12:28:05,420 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:05,449 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:05,449 - INFO - integration_test - Warmstart k=0: x0=8.815643098053796 , y0=4.197550956195066 , psi0=0.37449242617832484 , v0=3.0000000299750673 , spline0=9.900000005279413 , a0=0.0 , w0=0.0
2026-01-21 12:28:05,449 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:05,450 - INFO - integration_test - Dyn residual k=0: pred=[9.094851124559897, 4.307291011476043, 0.37449242617832484, 3.0000000299750673, 10.20000000827692], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.094851124559897, 4.307291011476043, 0.37449242617832484, 3.0000000299750673, 10.20000000827692], res_norm=1.464e+01
2026-01-21 12:28:05,451 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:05,452 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:05,470 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:05,646 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:05,667 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:05,712 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:05,735 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:05,779 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:05,800 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:05,849 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:05,871 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:05,917 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:05,938 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:05,987 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:06,010 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:06,057 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:06,077 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:06,125 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:06,146 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:06,193 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:06,214 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:06,258 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:06,277 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:06,322 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:06,926 - INFO - integration_test - Step 36: MPC solve successful
2026-01-21 12:28:07,001 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 12:28:07,001 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:07,001 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 12:28:07,001 - INFO - integration_test -   Control dict from planner: {'a': -9.314339342704489e-07, 'w': -0.06262621844464791}
2026-01-21 12:28:07,001 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:07,001 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:07,003 - INFO - integration_test - Step 36 completed in 1.927s
2026-01-21 12:28:07,066 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 12:28:07,071 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.09519292  4.30641601  0.3682298   2.99999994 10.2       ]
2026-01-21 12:28:07,071 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.244m, drift=0.054m)
2026-01-21 12:28:07,071 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 12:28:07,074 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:07,184 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.095, 4.306), path_start=(0.000, 0.000), dist=10.063m
2026-01-21 12:28:07,184 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.063m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:07,184 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 12:28:07,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:07,311 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:07,311 - INFO - integration_test - Warmstart k=0: x0=9.095192924222838 , y0=4.306416008164475 , psi0=0.36822980433386004 , v0=2.999999936831674 , spline0=10.19999999896258 , a0=0.0 , w0=0.0
2026-01-21 12:28:07,311 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:07,312 - INFO - integration_test - Dyn residual k=0: pred=[9.375082722702095, 4.4144053452174505, 0.36822980433386004, 2.999999936831674, 10.499999992645748], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.375082722702095, 4.4144053452174505, 0.36822980433386004, 2.999999936831674, 10.499999992645748], res_norm=1.506e+01
2026-01-21 12:28:07,313 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:07,314 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:07,333 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:07,504 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:07,528 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:07,570 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:07,593 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:07,640 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:07,661 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:07,706 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:07,729 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:07,775 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:07,795 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:07,841 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:07,861 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:07,909 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:07,930 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:07,975 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:07,999 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:08,048 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:08,069 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:08,114 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:08,134 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:08,175 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:08,868 - INFO - integration_test - Step 37: MPC solve successful
2026-01-21 12:28:09,096 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-21 12:28:09,096 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:09,096 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 12:28:09,096 - INFO - integration_test -   Control dict from planner: {'a': 9.314399376335825e-07, 'w': -0.08558550605781624}
2026-01-21 12:28:09,096 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:09,096 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:09,099 - INFO - integration_test - Step 37 completed in 2.028s
2026-01-21 12:28:09,166 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 12:28:09,171 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.37554142  4.41320631  0.35967125  3.00000003 10.5       ]
2026-01-21 12:28:09,172 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.183m, drift=0.246m)
2026-01-21 12:28:09,172 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-21 12:28:09,175 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:09,290 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.376, 4.413), path_start=(0.000, 0.000), dist=10.362m
2026-01-21 12:28:09,290 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.362m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:09,290 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 12:28:09,405 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:09,432 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:09,432 - INFO - integration_test - Warmstart k=0: x0=9.375541423420431 , y0=4.413206310334878 , psi0=0.3596712537280784 , v0=3.0000000299756677 , spline0=10.500000001960148 , a0=0.0 , w0=0.0
2026-01-21 12:28:09,432 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:09,433 - INFO - integration_test - Dyn residual k=0: pred=[9.656345200809278, 4.5187962738858465, 0.3596712537280784, 3.0000000299756677, 10.800000004957715], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.656345200809278, 4.5187962738858465, 0.3596712537280784, 3.0000000299756677, 10.800000004957715], res_norm=1.547e+01
2026-01-21 12:28:09,434 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:09,435 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:09,452 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:09,657 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:09,688 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:09,739 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:09,761 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:09,806 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:09,829 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:09,873 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:09,894 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:09,942 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:09,963 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:10,008 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:10,032 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:10,077 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:10,097 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:10,144 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:10,165 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:10,216 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:10,237 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:10,284 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:10,306 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:10,354 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:11,061 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 12:28:11,150 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-21 12:28:11,151 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:11,151 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 12:28:11,151 - INFO - integration_test -   Control dict from planner: {'a': -1.6724743944912704e-07, 'w': -0.04784430161398718}
2026-01-21 12:28:11,151 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:11,151 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:11,152 - INFO - integration_test - Step 38 completed in 1.981s
2026-01-21 12:28:11,222 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 12:28:11,223 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.65659672  4.51812413  0.35488682  3.00000001 10.8       ]
2026-01-21 12:28:11,223 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.172m, drift=0.057m)
2026-01-21 12:28:11,223 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-21 12:28:11,226 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:11,339 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.657, 4.518), path_start=(0.000, 0.000), dist=10.661m
2026-01-21 12:28:11,340 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.661m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:11,340 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 12:28:11,451 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:11,477 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:11,477 - INFO - integration_test - Warmstart k=0: x0=9.656596722145691 , y0=4.5181241290056064 , psi0=0.35488682356667967 , v0=3.000000013250924 , spline0=10.80000000328524 , a0=0.0 , w0=0.0
2026-01-21 12:28:11,477 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:11,478 - INFO - integration_test - Dyn residual k=0: pred=[9.937902469943795, 4.622369402523424, 0.35488682356667967, 3.000000013250924, 11.100000004610331], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.937902469943795, 4.622369402523424, 0.35488682356667967, 3.000000013250924, 11.100000004610331], res_norm=1.589e+01
2026-01-21 12:28:11,479 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:11,480 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:11,495 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:11,673 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:11,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:11,742 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:11,764 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:11,812 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:11,834 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:11,881 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:11,901 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:11,950 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:11,970 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:12,018 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:12,038 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:12,083 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:12,104 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:12,147 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:12,166 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:12,214 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:12,235 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:12,277 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:12,298 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:12,344 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:13,092 - INFO - integration_test - Step 39: MPC solve successful
2026-01-21 12:28:13,335 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-21 12:28:13,336 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:13,336 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 12:28:13,336 - INFO - integration_test -   Control dict from planner: {'a': 1.6748871631444343e-07, 'w': -0.07995664037629203}
2026-01-21 12:28:13,336 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:13,336 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:13,338 - INFO - integration_test - Step 39 completed in 2.115s
2026-01-21 12:28:13,411 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 12:28:13,419 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.93831623  4.62124368  0.34689116  3.00000003 11.10000001]
2026-01-21 12:28:13,420 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.272m, drift=0.357m)
2026-01-21 12:28:13,420 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-21 12:28:13,424 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:13,543 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.938, 4.621), path_start=(0.000, 0.000), dist=10.960m
2026-01-21 12:28:13,543 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.960m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:13,543 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 12:28:13,644 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:13,669 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:13,669 - INFO - integration_test - Warmstart k=0: x0=9.938316226269665 , y0=4.621243684935162 , psi0=0.3468911595290505 , v0=3.0000000299997955 , spline0=11.100000006285219 , a0=0.0 , w0=0.0
2026-01-21 12:28:13,669 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:13,670 - INFO - integration_test - Dyn residual k=0: pred=[10.220446484965517, 4.723236424520873, 0.3468911595290505, 3.0000000299997955, 11.400000009285199], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.220446484965517, 4.723236424520873, 0.3468911595290505, 3.0000000299997955, 11.400000009285199], res_norm=1.630e+01
2026-01-21 12:28:13,671 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:13,671 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:13,687 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:13,862 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:13,882 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:13,932 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:13,953 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:13,995 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:14,020 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:14,068 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:14,089 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:14,140 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:14,167 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:14,221 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:14,241 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:14,288 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:14,311 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:14,356 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:14,377 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:14,424 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:14,445 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:14,489 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:14,509 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:14,554 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:15,540 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 12:28:15,638 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-21 12:28:15,639 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:15,639 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 12:28:15,639 - INFO - integration_test -   Control dict from planner: {'a': -4.0766636237791315e-07, 'w': -0.04931170752910139}
2026-01-21 12:28:15,639 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:15,639 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:15,640 - INFO - integration_test - Step 40 completed in 2.221s
2026-01-21 12:28:15,698 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 12:28:15,699 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.22069681  4.7225404   0.34195999  2.99999999 11.40000001]
2026-01-21 12:28:15,699 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.163m, drift=0.169m)
2026-01-21 12:28:15,699 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-21 12:28:15,702 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:15,813 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.221, 4.723), path_start=(0.000, 0.000), dist=11.259m
2026-01-21 12:28:15,813 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.259m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:15,813 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 12:28:15,910 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:15,938 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:15,938 - INFO - integration_test - Warmstart k=0: x0=10.220696810944617 , y0=4.722540395654057 , psi0=0.3419599887761403 , v0=2.9999999892331592 , spline0=11.400000005208534 , a0=0.0 , w0=0.0
2026-01-21 12:28:15,938 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:15,939 - INFO - integration_test - Dyn residual k=0: pred=[10.503326577180497, 4.82314066698292, 0.3419599887761403, 2.9999999892331592, 11.70000000413185], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.503326577180497, 4.82314066698292, 0.3419599887761403, 2.9999999892331592, 11.70000000413185], res_norm=1.672e+01
2026-01-21 12:28:15,940 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:15,941 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:15,956 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,132 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,153 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,200 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,223 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,269 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,289 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,335 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,355 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,400 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,424 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,493 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,527 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,586 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,608 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,656 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,679 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,726 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:16,747 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,789 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:16,810 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:16,854 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:17,711 - INFO - integration_test - Step 41: MPC solve successful
2026-01-21 12:28:17,937 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-21 12:28:17,938 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:17,938 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 12:28:17,938 - INFO - integration_test -   Control dict from planner: {'a': 4.0203491823862025e-07, 'w': -0.08934655361426612}
2026-01-21 12:28:17,938 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:17,938 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:17,939 - INFO - integration_test - Step 41 completed in 2.241s
2026-01-21 12:28:17,996 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 12:28:18,001 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.50377223  4.82187674  0.33302533  3.00000003 11.70000001]
2026-01-21 12:28:18,001 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.220m, drift=0.019m)
2026-01-21 12:28:18,002 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-21 12:28:18,006 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:18,122 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.504, 4.822), path_start=(0.000, 0.000), dist=11.558m
2026-01-21 12:28:18,122 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.558m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:18,122 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 12:28:18,226 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:18,254 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:18,254 - INFO - integration_test - Warmstart k=0: x0=10.503772230183081 , y0=4.821876737818199 , psi0=0.3330253334147137 , v0=3.000000029436651 , spline0=11.7000000081522 , a0=0.0 , w0=0.0
2026-01-21 12:28:18,254 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:18,256 - INFO - integration_test - Dyn residual k=0: pred=[10.787289536194601, 4.919947829166103, 0.3330253334147137, 3.000000029436651, 12.000000011095866], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.787289536194601, 4.919947829166103, 0.3330253334147137, 3.000000029436651, 12.000000011095866], res_norm=1.714e+01
2026-01-21 12:28:18,256 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:18,257 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:18,274 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,449 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:18,470 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,519 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:18,541 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,586 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:18,609 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,657 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:18,677 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,724 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:18,744 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,787 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:18,808 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,852 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:18,872 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,922 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:18,943 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:18,988 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:19,011 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:19,054 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:19,075 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:19,119 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:20,018 - INFO - integration_test - Step 42: MPC solve successful
2026-01-21 12:28:20,115 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-21 12:28:20,115 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:20,115 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 12:28:20,115 - INFO - integration_test -   Control dict from planner: {'a': -8.252364006309829e-08, 'w': -0.05381947245562087}
2026-01-21 12:28:20,115 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:20,115 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:20,117 - INFO - integration_test - Step 42 completed in 2.116s
2026-01-21 12:28:20,179 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 12:28:20,181 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.78755207  4.91918442  0.32764339  3.00000002 12.00000001]
2026-01-21 12:28:20,182 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.223m, drift=0.281m)
2026-01-21 12:28:20,182 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-21 12:28:20,185 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:20,294 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.788, 4.919), path_start=(0.000, 0.000), dist=11.856m
2026-01-21 12:28:20,294 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.856m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:20,294 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 12:28:20,395 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:20,422 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:20,422 - INFO - integration_test - Warmstart k=0: x0=10.787552073192575 , y0=4.919184419838799 , psi0=0.3276433861691516 , v0=3.0000000211842868 , spline0=12.000000010270629 , a0=0.0 , w0=0.0
2026-01-21 12:28:20,422 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:20,424 - INFO - integration_test - Dyn residual k=0: pred=[11.0715930832347, 5.0157282227746, 0.3276433861691516, 3.0000000211842868, 12.300000012389058], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.0715930832347, 5.0157282227746, 0.3276433861691516, 3.0000000211842868, 12.300000012389058], res_norm=1.755e+01
2026-01-21 12:28:20,425 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:20,425 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:20,441 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:20,617 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:20,638 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:20,683 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:20,706 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:20,752 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:20,773 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:20,821 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:20,842 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:20,885 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:20,908 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:20,953 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:20,972 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:21,018 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:21,038 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:21,081 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:21,101 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:21,147 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:21,167 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:21,212 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:21,233 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:21,278 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:22,335 - INFO - integration_test - Step 43: MPC solve successful
2026-01-21 12:28:22,558 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-21 12:28:22,558 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:22,558 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 12:28:22,558 - INFO - integration_test -   Control dict from planner: {'a': 8.815484831319104e-08, 'w': -0.08931654281681849}
2026-01-21 12:28:22,558 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:22,558 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:22,559 - INFO - integration_test - Step 43 completed in 2.379s
2026-01-21 12:28:22,620 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 12:28:22,622 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[11.07202045  5.01445847  0.31871173  3.00000003 12.30000001]
2026-01-21 12:28:22,622 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.171m, drift=0.092m)
2026-01-21 12:28:22,622 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-21 12:28:22,625 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:22,745 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(11.072, 5.014), path_start=(0.000, 0.000), dist=12.155m
2026-01-21 12:28:22,745 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.155m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:22,745 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 12:28:22,870 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:22,910 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:22,910 - INFO - integration_test - Warmstart k=0: x0=11.07202045220197 , y0=5.014458469678753 , psi0=0.31871173188746976 , v0=3.0000000299997716 , spline0=12.300000013270607 , a0=0.0 , w0=0.0
2026-01-21 12:28:22,910 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:22,913 - INFO - integration_test - Dyn residual k=0: pred=[11.356912417955188, 5.10846149967914, 0.31871173188746976, 3.0000000299997716, 12.600000016270585], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.356912417955188, 5.10846149967914, 0.31871173188746976, 3.0000000299997716, 12.600000016270585], res_norm=1.797e+01
2026-01-21 12:28:22,916 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:22,918 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:22,942 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,116 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,138 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,184 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,204 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,252 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,271 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,318 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,338 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,383 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,405 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,453 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,475 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,519 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,542 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,587 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,609 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,655 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:23,676 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,721 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:23,743 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:23,788 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:24,751 - INFO - integration_test - Step 44: MPC solve successful
2026-01-21 12:28:24,843 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-21 12:28:24,843 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:24,843 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 12:28:24,843 - INFO - integration_test -   Control dict from planner: {'a': -2.701464832668717e-06, 'w': -0.047246148774904614}
2026-01-21 12:28:24,843 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:24,843 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:24,845 - INFO - integration_test - Step 44 completed in 2.223s
2026-01-21 12:28:24,908 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 12:28:24,913 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.35713341  5.10778814  0.31398712  2.99999976 12.59999999]
2026-01-21 12:28:24,914 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.285m, drift=0.096m)
2026-01-21 12:28:24,914 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-21 12:28:24,917 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:25,032 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.357, 5.108), path_start=(0.000, 0.000), dist=12.453m
2026-01-21 12:28:25,033 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.453m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:25,033 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 12:28:25,136 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:25,161 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:25,161 - INFO - integration_test - Warmstart k=0: x0=11.357133408867627 , y0=5.107788144607116 , psi0=0.3139871170099793 , v0=2.999999759853288 , spline0=12.599999989255936 , a0=0.0 , w0=0.0
2026-01-21 12:28:25,161 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:25,162 - INFO - integration_test - Dyn residual k=0: pred=[11.642466295717433, 5.200444117286447, 0.3139871170099793, 2.999999759853288, 12.899999965241266], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.642466295717433, 5.200444117286447, 0.3139871170099793, 2.999999759853288, 12.899999965241266], res_norm=1.839e+01
2026-01-21 12:28:25,163 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:25,163 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:25,178 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,355 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,377 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,425 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,449 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,501 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,525 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,574 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,601 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,651 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,674 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,719 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,743 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,787 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,809 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,854 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,874 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,920 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:25,942 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:25,985 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:26,006 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:26,053 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:27,276 - INFO - integration_test - Step 45: MPC solve successful
2026-01-21 12:28:27,522 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-21 12:28:27,523 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:27,523 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 12:28:27,523 - INFO - integration_test -   Control dict from planner: {'a': 2.6993003011295163e-06, 'w': -0.08761772763117441}
2026-01-21 12:28:27,523 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:27,523 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:27,524 - INFO - integration_test - Step 45 completed in 2.611s
2026-01-21 12:28:27,582 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 12:28:27,584 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.64286857  5.19919293  0.30522534  3.00000003 12.89999999]
2026-01-21 12:28:27,585 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.185m, drift=0.204m)
2026-01-21 12:28:27,585 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-21 12:28:27,589 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:27,700 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.643, 5.199), path_start=(0.000, 0.000), dist=12.751m
2026-01-21 12:28:27,700 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.751m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:27,700 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 12:28:27,806 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:27,832 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:27,832 - INFO - integration_test - Warmstart k=0: x0=11.642868570514223 , y0=5.199192932910629 , psi0=0.3052253442468618 , v0=3.0000000297833185 , spline0=12.899999992234267 , a0=0.0 , w0=0.0
2026-01-21 12:28:27,832 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:27,833 - INFO - integration_test - Dyn residual k=0: pred=[11.929002351058106, 5.289345367257484, 0.3052253442468618, 3.0000000297833185, 13.199999995212599], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.929002351058106, 5.289345367257484, 0.3052253442468618, 3.0000000297833185, 13.199999995212599], res_norm=1.880e+01
2026-01-21 12:28:27,834 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:27,835 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:27,851 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,026 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,049 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,093 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,116 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,163 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,183 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,228 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,251 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,296 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,318 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,363 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,382 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,429 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,449 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,493 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,515 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,569 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:28,592 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,640 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:28,660 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:28,708 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:30,137 - INFO - integration_test - Step 46: MPC solve successful
2026-01-21 12:28:30,241 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-21 12:28:30,241 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:30,241 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 12:28:30,241 - INFO - integration_test -   Control dict from planner: {'a': 2.1643109115709922e-09, 'w': -0.06251852708689586}
2026-01-21 12:28:30,241 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:30,241 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:30,243 - INFO - integration_test - Step 46 completed in 2.659s
2026-01-21 12:28:30,301 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 12:28:30,303 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.9292823   5.28845035  0.29897349  3.00000003 13.2       ]
2026-01-21 12:28:30,304 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.212m, drift=0.016m)
2026-01-21 12:28:30,304 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-21 12:28:30,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:30,416 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.929, 5.288), path_start=(0.000, 0.000), dist=13.049m
2026-01-21 12:28:30,417 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=13.049m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:30,417 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 12:28:30,522 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:30,548 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:30,548 - INFO - integration_test - Warmstart k=0: x0=11.929282296070056 , y0=5.2884503497717725 , psi0=0.2989734915381722 , v0=3.0000000299997494 , spline0=13.199999995234242 , a0=0.0 , w0=0.0
2026-01-21 12:28:30,548 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:30,549 - INFO - integration_test - Dyn residual k=0: pred=[12.215974100857975, 5.376812167699146, 0.2989734915381722, 3.0000000299997494, 13.499999998234216], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.215974100857975, 5.376812167699146, 0.2989734915381722, 3.0000000299997494, 13.499999998234216], res_norm=1.922e+01
2026-01-21 12:28:30,549 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:30,550 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:30,566 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:30,746 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:30,768 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:30,815 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:30,837 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:30,883 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:30,903 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:30,951 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:30,972 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:31,022 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:31,044 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:31,093 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:31,115 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:31,160 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:31,179 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:31,227 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:31,249 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:31,296 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:31,320 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:31,368 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:31,389 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:31,434 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:34,274 - INFO - integration_test - Step 47: MPC solve successful
2026-01-21 12:28:34,527 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-21 12:28:34,528 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:34,528 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 12:28:34,528 - INFO - integration_test -   Control dict from planner: {'a': -7.285331869544983e-07, 'w': -0.6933630460307274}
2026-01-21 12:28:34,528 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:34,528 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:34,530 - INFO - integration_test - Step 47 completed in 4.227s
2026-01-21 12:28:34,590 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 12:28:34,591 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.21880656  5.36680629  0.22963719  2.99999996 13.49999999]
2026-01-21 12:28:34,591 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.256m, drift=0.316m)
2026-01-21 12:28:34,591 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-21 12:28:34,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:34,706 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.219, 5.367), path_start=(0.000, 0.000), dist=13.345m
2026-01-21 12:28:34,706 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.345m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:34,706 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 12:28:34,810 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:34,837 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:34,837 - INFO - integration_test - Warmstart k=0: x0=12.218806555853744 , y0=5.36680629025778 , psi0=0.22963718693509946 , v0=2.999999957146431 , spline0=13.499999990948885 , a0=0.0 , w0=0.0
2026-01-21 12:28:34,837 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:34,838 - INFO - integration_test - Dyn residual k=0: pred=[12.510931264924121, 5.435093564177106, 0.22963718693509946, 2.999999957146431, 13.799999986663527], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.510931264924121, 5.435093564177106, 0.22963718693509946, 2.999999957146431, 13.799999986663527], res_norm=1.964e+01
2026-01-21 12:28:34,839 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:34,840 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:34,857 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,033 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,054 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,102 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,124 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,173 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,196 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,244 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,264 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,320 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,355 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,427 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,452 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,498 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,519 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,566 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,587 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,639 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:35,661 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,706 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:35,726 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:35,771 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:36,766 - INFO - integration_test - Step 48: MPC solve successful
2026-01-21 12:28:36,865 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-21 12:28:36,866 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:36,866 - INFO - integration_test - === Applying control at step 48 ===
2026-01-21 12:28:36,866 - INFO - integration_test -   Control dict from planner: {'a': 7.283098304755787e-07, 'w': 0.43175523275877575}
2026-01-21 12:28:36,866 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:36,866 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:36,867 - INFO - integration_test - Step 48 completed in 2.277s
2026-01-21 12:28:36,929 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-21 12:28:36,935 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.50936658  5.44137769  0.27281271  3.00000003 13.79999999]
2026-01-21 12:28:36,936 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.198m, drift=0.127m)
2026-01-21 12:28:36,936 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-21 12:28:36,939 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:37,051 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.509, 5.441), path_start=(0.000, 0.000), dist=13.642m
2026-01-21 12:28:37,051 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.642m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:37,051 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-21 12:28:37,155 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:37,181 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:37,182 - INFO - integration_test - Warmstart k=0: x0=12.509366577315763 , y0=5.441377690164624 , psi0=0.272812710210977 , v0=3.000000029977414 , spline0=13.799999993946626 , a0=0.0 , w0=0.0
2026-01-21 12:28:37,182 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:37,182 - INFO - integration_test - Dyn residual k=0: pred=[12.798271634231558, 5.522210046848855, 0.272812710210977, 3.000000029977414, 14.099999996944367], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.798271634231558, 5.522210046848855, 0.272812710210977, 3.000000029977414, 14.099999996944367], res_norm=2.005e+01
2026-01-21 12:28:37,183 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:37,184 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:37,202 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,396 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,418 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,477 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,502 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,552 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,572 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,621 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,641 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,688 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,710 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,756 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,777 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,824 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,846 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,892 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,913 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:37,964 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:37,985 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:38,029 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:38,048 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:38,092 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:40,097 - INFO - integration_test - Step 49: MPC solve successful
2026-01-21 12:28:40,365 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-21 12:28:40,365 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:40,365 - INFO - integration_test - === Applying control at step 49 ===
2026-01-21 12:28:40,365 - INFO - integration_test -   Control dict from planner: {'a': -2.110341764654163e-08, 'w': -0.1385973456347042}
2026-01-21 12:28:40,365 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:40,365 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:40,366 - INFO - integration_test - Step 49 completed in 3.432s
2026-01-21 12:28:40,433 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-21 12:28:40,434 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.79882253  5.52020542  0.25895298  3.00000003 14.1       ]
2026-01-21 12:28:40,435 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.296m, drift=0.061m)
2026-01-21 12:28:40,435 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-21 12:28:40,438 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:40,553 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.799, 5.520), path_start=(0.000, 0.000), dist=13.939m
2026-01-21 12:28:40,553 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.939m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:40,553 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-21 12:28:40,670 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:40,715 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:40,715 - INFO - integration_test - Warmstart k=0: x0=12.798822533355994 , y0=5.520205417316039 , psi0=0.25895297564750663 , v0=3.000000027867072 , spline0=14.099999996733333 , a0=0.0 , w0=0.0
2026-01-21 12:28:40,715 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:40,717 - INFO - integration_test - Dyn residual k=0: pred=[13.088820121442717, 5.597025991226337, 0.25895297564750663, 3.000000027867072, 14.39999999952004], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.088820121442717, 5.597025991226337, 0.25895297564750663, 3.000000027867072, 14.39999999952004], res_norm=2.047e+01
2026-01-21 12:28:40,718 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:40,720 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:40,749 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:40,946 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:40,970 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,020 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:41,044 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,094 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:41,119 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,170 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:41,192 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,247 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:41,271 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,324 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:41,348 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,397 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:41,420 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,469 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:41,493 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,544 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:41,570 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,622 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:41,646 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:41,696 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:43,086 - INFO - integration_test - Step 50: MPC solve successful
2026-01-21 12:28:43,190 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-21 12:28:43,191 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:43,191 - INFO - integration_test - === Applying control at step 50 ===
2026-01-21 12:28:43,191 - INFO - integration_test -   Control dict from planner: {'a': -6.763201535731977e-08, 'w': -0.36371227065432904}
2026-01-21 12:28:43,191 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:43,191 - INFO - integration_test -   Planner output success: True
2026-01-21 12:28:43,192 - INFO - integration_test - Step 50 completed in 2.758s
2026-01-21 12:28:43,260 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-21 12:28:43,261 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.09015306  5.59173585  0.22258175  3.00000002 14.4       ]
2026-01-21 12:28:43,262 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.231m, drift=0.239m)
2026-01-21 12:28:43,262 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-21 12:28:43,265 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:43,376 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.090, 5.592), path_start=(0.000, 0.000), dist=14.234m
2026-01-21 12:28:43,376 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.234m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:43,376 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-21 12:28:43,482 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:43,509 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:43,509 - INFO - integration_test - Warmstart k=0: x0=13.090153062788987 , y0=5.59173585237637 , psi0=0.22258174858207372 , v0=3.0000000211038707 , spline0=14.39999999884372 , a0=0.0 , w0=0.0
2026-01-21 12:28:43,509 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:43,510 - INFO - integration_test - Dyn residual k=0: pred=[13.382752299913022, 5.657960377294748, 0.22258174858207372, 3.0000000211038707, 14.700000000954107], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.382752299913022, 5.657960377294748, 0.22258174858207372, 3.0000000211038707, 14.700000000954107], res_norm=2.089e+01
2026-01-21 12:28:43,511 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:43,512 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:43,528 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:43,698 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:43,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:43,770 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:43,792 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:43,840 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:43,861 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:43,908 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:43,930 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:43,978 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:44,001 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:44,048 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:44,071 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:44,119 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:44,139 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:44,184 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:44,207 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:44,254 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:44,276 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:44,322 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:44,343 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:44,387 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:47,970 - WARNING - integration_test - Step 51: MPC solve failed
2026-01-21 12:28:47,970 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:28:48,232 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-21 12:28:48,233 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:48,233 - INFO - integration_test - === Applying control at step 51 ===
2026-01-21 12:28:48,233 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:28:48,233 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:48,233 - INFO - integration_test -   Planner output success: False
2026-01-21 12:28:48,233 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:28:48,234 - INFO - integration_test - Step 51 completed in 4.973s
2026-01-21 12:28:48,303 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-21 12:28:48,303 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.3827523   5.65796038  0.22258175  3.00000002 14.7       ]
2026-01-21 12:28:48,304 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.255m, drift=0.051m)
2026-01-21 12:28:48,304 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-21 12:28:48,307 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:48,420 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.383, 5.658), path_start=(0.000, 0.000), dist=14.530m
2026-01-21 12:28:48,420 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.530m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:48,420 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-21 12:28:48,525 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:48,551 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:48,552 - INFO - integration_test - Warmstart k=0: x0=13.382752299913022 , y0=5.657960377294748 , psi0=0.22258174858207372 , v0=3.0000000211038707 , spline0=14.700000000954107 , a0=0.0 , w0=0.0
2026-01-21 12:28:48,552 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:48,553 - INFO - integration_test - Dyn residual k=0: pred=[13.675351537037058, 5.724184902213127, 0.22258174858207372, 3.0000000211038707, 15.000000003064494], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.675351537037058, 5.724184902213127, 0.22258174858207372, 3.0000000211038707, 15.000000003064494], res_norm=2.130e+01
2026-01-21 12:28:48,553 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:48,554 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:48,570 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:48,747 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:48,769 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:48,819 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:48,840 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:48,887 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:48,910 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:48,959 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:48,979 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:49,029 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:49,049 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:49,098 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:49,121 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:49,170 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:49,191 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:49,236 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:49,259 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:49,307 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:49,329 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:49,374 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:49,395 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:49,441 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:53,215 - WARNING - integration_test - Step 52: MPC solve failed
2026-01-21 12:28:53,215 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 12:28:53,324 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-21 12:28:53,324 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:53,324 - INFO - integration_test - === Applying control at step 52 ===
2026-01-21 12:28:53,324 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:28:53,324 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:53,324 - INFO - integration_test -   Planner output success: False
2026-01-21 12:28:53,324 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:28:53,326 - INFO - integration_test - Step 52 completed in 5.023s
2026-01-21 12:28:53,398 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-21 12:28:53,399 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.67535154  5.7241849   0.22258175  3.00000002 15.        ]
2026-01-21 12:28:53,399 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.305m, drift=0.351m)
2026-01-21 12:28:53,399 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-21 12:28:53,402 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:53,513 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.675, 5.724), path_start=(0.000, 0.000), dist=14.825m
2026-01-21 12:28:53,513 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.825m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:53,514 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-21 12:28:53,629 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:53,656 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:53,656 - INFO - integration_test - Warmstart k=0: x0=13.675351537037058 , y0=5.724184902213127 , psi0=0.22258174858207372 , v0=3.0000000211038707 , spline0=15.000000003064494 , a0=0.0 , w0=0.0
2026-01-21 12:28:53,656 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:53,657 - INFO - integration_test - Dyn residual k=0: pred=[13.967950774161093, 5.790409427131505, 0.22258174858207372, 3.0000000211038707, 15.300000005174882], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.967950774161093, 5.790409427131505, 0.22258174858207372, 3.0000000211038707, 15.300000005174882], res_norm=2.172e+01
2026-01-21 12:28:53,658 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:53,659 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:53,675 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:53,850 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:53,873 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:53,920 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:53,941 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:53,986 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:54,009 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:54,054 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:54,077 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:54,123 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:54,143 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:54,189 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:54,212 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:54,257 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:54,278 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:54,327 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:54,347 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:54,394 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:54,414 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:54,460 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:54,482 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:54,526 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:58,309 - WARNING - integration_test - Step 53: MPC solve failed
2026-01-21 12:28:58,310 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 12:28:58,416 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-21 12:28:58,416 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:28:58,416 - INFO - integration_test - === Applying control at step 53 ===
2026-01-21 12:28:58,416 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:28:58,416 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:28:58,416 - INFO - integration_test -   Planner output success: False
2026-01-21 12:28:58,416 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:28:58,418 - INFO - integration_test - Step 53 completed in 5.019s
2026-01-21 12:28:58,486 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-21 12:28:58,494 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.96795077  5.79040943  0.22258175  3.00000002 15.30000001]
2026-01-21 12:28:58,495 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.251m, drift=0.163m)
2026-01-21 12:28:58,495 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-21 12:28:58,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:58,607 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.968, 5.790), path_start=(0.000, 0.000), dist=15.121m
2026-01-21 12:28:58,607 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.121m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:28:58,607 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-21 12:28:58,716 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:28:58,744 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:28:58,744 - INFO - integration_test - Warmstart k=0: x0=13.967950774161093 , y0=5.790409427131505 , psi0=0.22258174858207372 , v0=3.0000000211038707 , spline0=15.300000005174882 , a0=0.0 , w0=0.0
2026-01-21 12:28:58,744 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:28:58,745 - INFO - integration_test - Dyn residual k=0: pred=[14.260550011285128, 5.856633952049883, 0.22258174858207372, 3.0000000211038707, 15.600000007285269], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.260550011285128, 5.856633952049883, 0.22258174858207372, 3.0000000211038707, 15.600000007285269], res_norm=2.214e+01
2026-01-21 12:28:58,746 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:58,747 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:28:58,763 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:58,947 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:58,970 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,015 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:59,038 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,085 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:59,108 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,155 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:59,177 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,224 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:59,244 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,291 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:59,317 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,375 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:59,401 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,448 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:59,469 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,517 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:28:59,538 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,581 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:28:59,600 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:28:59,645 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:03,403 - WARNING - integration_test - Step 54: MPC solve failed
2026-01-21 12:29:03,403 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 12:29:03,667 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-21 12:29:03,667 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:03,667 - INFO - integration_test - === Applying control at step 54 ===
2026-01-21 12:29:03,667 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:03,667 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:03,667 - INFO - integration_test -   Planner output success: False
2026-01-21 12:29:03,667 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:03,669 - INFO - integration_test - Step 54 completed in 5.174s
2026-01-21 12:29:03,736 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-21 12:29:03,748 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[14.26055001  5.85663395  0.22258175  3.00000002 15.60000001]
2026-01-21 12:29:03,749 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.337m, drift=0.026m)
2026-01-21 12:29:03,749 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-21 12:29:03,752 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:03,863 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(14.261, 5.857), path_start=(0.000, 0.000), dist=15.416m
2026-01-21 12:29:03,863 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.416m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:03,863 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-21 12:29:03,973 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:04,003 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:04,003 - INFO - integration_test - Warmstart k=0: x0=14.260550011285128 , y0=5.856633952049883 , psi0=0.22258174858207372 , v0=3.0000000211038707 , spline0=15.600000007285269 , a0=0.0 , w0=0.0
2026-01-21 12:29:04,003 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:04,004 - INFO - integration_test - Dyn residual k=0: pred=[14.553149248409163, 5.922858476968261, 0.22258174858207372, 3.0000000211038707, 15.900000009395656], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.553149248409163, 5.922858476968261, 0.22258174858207372, 3.0000000211038707, 15.900000009395656], res_norm=2.256e+01
2026-01-21 12:29:04,005 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:04,006 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:04,023 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,208 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,229 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,278 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,303 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,353 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,374 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,423 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,445 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,495 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,517 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,563 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,585 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,634 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,655 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,704 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,726 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,773 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:04,795 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,841 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:04,861 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:04,906 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:08,630 - WARNING - integration_test - Step 55: MPC solve failed
2026-01-21 12:29:08,630 - WARNING - integration_test -   Consecutive MPC failures: 5/15
2026-01-21 12:29:08,746 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-21 12:29:08,746 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:08,746 - INFO - integration_test - === Applying control at step 55 ===
2026-01-21 12:29:08,746 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:08,747 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:08,747 - INFO - integration_test -   Planner output success: False
2026-01-21 12:29:08,747 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:08,748 - INFO - integration_test - Step 55 completed in 5.000s
2026-01-21 12:29:08,820 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-21 12:29:08,827 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.55314925  5.92285848  0.22258175  3.00000002 15.90000001]
2026-01-21 12:29:08,828 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.277m, drift=0.274m)
2026-01-21 12:29:08,828 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-21 12:29:08,831 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:08,952 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.553, 5.923), path_start=(0.000, 0.000), dist=15.712m
2026-01-21 12:29:08,952 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.712m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:08,952 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-21 12:29:09,060 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:09,085 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:09,085 - INFO - integration_test - Warmstart k=0: x0=14.553149248409163 , y0=5.922858476968261 , psi0=0.22258174858207372 , v0=3.0000000211038707 , spline0=15.900000009395656 , a0=0.0 , w0=0.0
2026-01-21 12:29:09,085 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:09,086 - INFO - integration_test - Dyn residual k=0: pred=[14.845748485533198, 5.989083001886639, 0.22258174858207372, 3.0000000211038707, 16.20000001150604], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.845748485533198, 5.989083001886639, 0.22258174858207372, 3.0000000211038707, 16.20000001150604], res_norm=2.297e+01
2026-01-21 12:29:09,087 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:09,088 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:09,106 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,290 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,314 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,365 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,388 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,437 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,460 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,509 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,531 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,577 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,598 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,657 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,681 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,730 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,752 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,801 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,824 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,872 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:09,894 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:09,942 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:09,963 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:10,013 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:13,614 - WARNING - integration_test - Step 56: MPC solve failed
2026-01-21 12:29:13,615 - WARNING - integration_test -   Consecutive MPC failures: 6/15
2026-01-21 12:29:13,954 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-21 12:29:13,955 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:13,955 - INFO - integration_test - === Applying control at step 56 ===
2026-01-21 12:29:13,955 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:13,955 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:13,955 - INFO - integration_test -   Planner output success: False
2026-01-21 12:29:13,955 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:13,957 - INFO - integration_test - Step 56 completed in 5.130s
2026-01-21 12:29:14,036 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-21 12:29:14,042 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.84574849  5.989083    0.22258175  3.00000002 16.20000001]
2026-01-21 12:29:14,043 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.293m, drift=0.086m)
2026-01-21 12:29:14,043 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-21 12:29:14,046 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:14,165 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.846, 5.989), path_start=(0.000, 0.000), dist=16.008m
2026-01-21 12:29:14,165 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=16.008m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:14,165 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-21 12:29:14,293 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:14,321 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:14,321 - INFO - integration_test - Warmstart k=0: x0=14.845748485533198 , y0=5.989083001886639 , psi0=0.22258174858207372 , v0=3.0000000211038707 , spline0=16.20000001150604 , a0=0.0 , w0=0.0
2026-01-21 12:29:14,321 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:14,322 - INFO - integration_test - Dyn residual k=0: pred=[15.138347722657233, 6.055307526805017, 0.22258174858207372, 3.0000000211038707, 16.50000001361643], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.138347722657233, 6.055307526805017, 0.22258174858207372, 3.0000000211038707, 16.50000001361643], res_norm=2.339e+01
2026-01-21 12:29:14,323 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:14,324 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:14,342 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:14,525 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:14,547 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:14,594 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:14,617 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:14,660 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:14,679 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:14,729 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:14,750 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:14,798 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:14,820 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:14,865 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:14,886 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:14,934 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:14,955 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:15,004 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:15,026 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:15,072 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:15,094 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:15,141 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:15,163 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:15,206 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:18,167 - WARNING - integration_test - Step 57: MPC solve failed
2026-01-21 12:29:18,167 - WARNING - integration_test -   Consecutive MPC failures: 7/15
2026-01-21 12:29:18,278 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-21 12:29:18,279 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:18,279 - INFO - integration_test - === Applying control at step 57 ===
2026-01-21 12:29:18,279 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:18,279 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:18,279 - INFO - integration_test -   Planner output success: False
2026-01-21 12:29:18,279 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:18,280 - INFO - integration_test - Step 57 completed in 4.238s
2026-01-21 12:29:18,346 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-21 12:29:18,351 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[15.13834772  6.05530753  0.22258175  3.00000002 16.50000001]
2026-01-21 12:29:18,351 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.324m, drift=0.386m)
2026-01-21 12:29:18,352 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-21 12:29:18,354 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:18,468 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(15.138, 6.055), path_start=(0.000, 0.000), dist=16.304m
2026-01-21 12:29:18,468 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.304m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:18,468 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-21 12:29:18,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:18,599 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:18,599 - INFO - integration_test - Warmstart k=0: x0=15.138347722657233 , y0=6.055307526805017 , psi0=0.22258174858207372 , v0=3.0000000211038707 , spline0=16.50000001361643 , a0=0.0 , w0=0.0
2026-01-21 12:29:18,599 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:18,600 - INFO - integration_test - Dyn residual k=0: pred=[15.430946959781268, 6.1215320517233955, 0.22258174858207372, 3.0000000211038707, 16.800000015726816], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.430946959781268, 6.1215320517233955, 0.22258174858207372, 3.0000000211038707, 16.800000015726816], res_norm=2.381e+01
2026-01-21 12:29:18,601 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:18,601 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:18,618 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:18,802 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:18,825 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:18,872 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:18,894 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:18,945 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:18,967 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:19,012 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:19,034 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:19,078 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:19,101 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:19,149 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:19,170 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:19,218 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:19,239 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:19,286 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:19,307 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:19,357 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:19,379 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:19,426 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:19,446 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:19,491 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:21,605 - INFO - integration_test - Step 58: MPC solve successful
2026-01-21 12:29:21,899 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-21 12:29:21,899 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:21,899 - INFO - integration_test - === Applying control at step 58 ===
2026-01-21 12:29:21,900 - INFO - integration_test -   Control dict from planner: {'a': 8.880399399175117e-08, 'w': 0.34903234321232607}
2026-01-21 12:29:21,900 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:21,900 - INFO - integration_test -   Planner output success: True
2026-01-21 12:29:21,901 - INFO - integration_test - Step 58 completed in 3.550s
2026-01-21 12:29:21,969 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-21 12:29:21,976 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.42973195  6.12662442  0.25748498  3.00000003 16.80000002]
2026-01-21 12:29:21,977 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.263m, drift=0.198m)
2026-01-21 12:29:21,977 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-21 12:29:21,980 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:22,089 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.430, 6.127), path_start=(0.000, 0.000), dist=16.602m
2026-01-21 12:29:22,090 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.602m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:22,090 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-21 12:29:22,192 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:22,220 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:22,220 - INFO - integration_test - Warmstart k=0: x0=15.429731947106578 , y0=6.12662441800243 , psi0=0.25748498290330635 , v0=3.00000002998427 , spline0=16.800000016614856 , a0=0.0 , w0=0.0
2026-01-21 12:29:22,220 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:22,221 - INFO - integration_test - Dyn residual k=0: pred=[15.719841994929908, 6.20301919499014, 0.25748498290330635, 3.00000002998427, 17.100000019613283], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.719841994929908, 6.20301919499014, 0.25748498290330635, 3.00000002998427, 17.100000019613283], res_norm=2.423e+01
2026-01-21 12:29:22,222 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:22,223 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:22,239 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,416 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,438 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,485 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,507 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,555 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,576 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,620 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,641 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,685 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,707 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,760 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,784 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,831 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,854 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,902 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,923 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:22,971 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:22,992 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:23,037 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:23,056 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:23,102 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:25,424 - INFO - integration_test - Step 59: MPC solve successful
2026-01-21 12:29:25,618 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-21 12:29:25,618 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:25,619 - INFO - integration_test - === Applying control at step 59 ===
2026-01-21 12:29:25,619 - INFO - integration_test -   Control dict from planner: {'a': -3.0826484838935187e-07, 'w': -0.12781980362207068}
2026-01-21 12:29:25,619 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:25,619 - INFO - integration_test -   Planner output success: True
2026-01-21 12:29:25,620 - INFO - integration_test - Step 59 completed in 3.644s
2026-01-21 12:29:25,684 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-21 12:29:25,693 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.72032233  6.20116305  0.244703    3.         17.10000002]
2026-01-21 12:29:25,694 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.341m, drift=0.009m)
2026-01-21 12:29:25,694 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-21 12:29:25,697 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:25,812 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.720, 6.201), path_start=(0.000, 0.000), dist=16.899m
2026-01-21 12:29:25,812 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.899m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:25,812 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-21 12:29:25,919 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:25,945 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:25,945 - INFO - integration_test - Warmstart k=0: x0=15.720322325476351 , y0=6.201163049186794 , psi0=0.24470300254109928 , v0=2.9999999991577853 , spline0=17.100000016530636 , a0=0.0 , w0=0.0
2026-01-21 12:29:25,945 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:25,946 - INFO - integration_test - Dyn residual k=0: pred=[16.011385121633737, 6.273843504898849, 0.24470300254109928, 2.9999999991577853, 17.400000016446416], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.011385121633737, 6.273843504898849, 0.24470300254109928, 2.9999999991577853, 17.400000016446416], res_norm=2.465e+01
2026-01-21 12:29:25,947 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:25,948 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:25,963 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,139 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,160 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,209 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,232 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,278 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,301 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,351 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,372 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,419 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,440 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,484 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,507 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,555 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,575 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,622 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,646 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,692 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:26,714 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,760 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:26,780 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:26,826 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:37,389 - WARNING - integration_test - Step 60: MPC solve failed
2026-01-21 12:29:37,389 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:29:37,690 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-21 12:29:37,690 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:37,690 - INFO - integration_test - === Applying control at step 60 ===
2026-01-21 12:29:37,690 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:37,690 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:37,690 - INFO - integration_test -   Planner output success: False
2026-01-21 12:29:37,690 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:37,692 - INFO - integration_test - Step 60 completed in 11.999s
2026-01-21 12:29:37,761 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-21 12:29:37,768 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[16.01138512  6.2738435   0.244703    3.         17.40000002]
2026-01-21 12:29:37,769 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.249m, drift=0.309m)
2026-01-21 12:29:37,769 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-21 12:29:37,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:37,890 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(16.011, 6.274), path_start=(0.000, 0.000), dist=17.197m
2026-01-21 12:29:37,890 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.197m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:37,890 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-21 12:29:37,997 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:38,027 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:38,027 - INFO - integration_test - Warmstart k=0: x0=16.011385121633737 , y0=6.273843504898849 , psi0=0.24470300254109928 , v0=2.9999999991577853 , spline0=17.400000016446416 , a0=0.0 , w0=0.0
2026-01-21 12:29:38,027 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:38,028 - INFO - integration_test - Dyn residual k=0: pred=[16.30244791779112, 6.346523960610904, 0.24470300254109928, 2.9999999991577853, 17.700000016362196], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.30244791779112, 6.346523960610904, 0.24470300254109928, 2.9999999991577853, 17.700000016362196], res_norm=2.507e+01
2026-01-21 12:29:38,029 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:38,029 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:38,048 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,224 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,244 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,291 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,314 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,358 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,380 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,425 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,446 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,493 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,515 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,562 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,582 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,628 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,650 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,696 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,719 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,765 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:38,785 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,832 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:38,851 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:38,897 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:40,777 - INFO - integration_test - Step 61: MPC solve successful
2026-01-21 12:29:40,885 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-21 12:29:40,886 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:40,886 - INFO - integration_test - === Applying control at step 61 ===
2026-01-21 12:29:40,886 - INFO - integration_test -   Control dict from planner: {'a': -1.2857406517181895e-06, 'w': -0.13061032901957104}
2026-01-21 12:29:40,886 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:40,886 - INFO - integration_test -   Planner output success: True
2026-01-21 12:29:40,887 - INFO - integration_test - Step 61 completed in 3.119s
2026-01-21 12:29:40,959 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-21 12:29:40,967 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.30291427  6.34462113  0.23164197  2.99999987 17.7       ]
2026-01-21 12:29:40,968 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.267m, drift=0.121m)
2026-01-21 12:29:40,968 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-21 12:29:40,970 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:41,081 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.303, 6.345), path_start=(0.000, 0.000), dist=17.494m
2026-01-21 12:29:41,081 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.494m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:41,081 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-21 12:29:41,187 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:41,215 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:41,215 - INFO - integration_test - Warmstart k=0: x0=16.302914270349902 , y0=6.344621129335312 , psi0=0.2316419696391422 , v0=2.99999987058372 , spline0=17.700000003504787 , a0=0.0 , w0=0.0
2026-01-21 12:29:41,215 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:41,216 - INFO - integration_test - Dyn residual k=0: pred=[16.5949014828944, 6.4134939102107555, 0.2316419696391422, 2.99999987058372, 17.999999990563158], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.5949014828944, 6.4134939102107555, 0.2316419696391422, 2.99999987058372, 17.999999990563158], res_norm=2.549e+01
2026-01-21 12:29:41,217 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:41,218 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:41,234 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,416 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,437 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,482 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,506 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,557 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,579 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,626 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,649 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,693 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,718 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,767 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,789 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,839 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,860 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,909 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,932 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:41,978 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:41,998 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:42,043 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:42,064 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:42,107 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:45,441 - WARNING - integration_test - Step 62: MPC solve failed
2026-01-21 12:29:45,441 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:29:45,756 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-21 12:29:45,756 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:29:45,756 - INFO - integration_test - === Applying control at step 62 ===
2026-01-21 12:29:45,756 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:45,756 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:29:45,756 - INFO - integration_test -   Planner output success: False
2026-01-21 12:29:45,756 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:29:45,758 - INFO - integration_test - Step 62 completed in 4.791s
2026-01-21 12:29:45,830 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-21 12:29:45,841 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.59490148  6.41349391  0.23164197  2.99999987 17.99999999]
2026-01-21 12:29:45,841 - DEBUG - integration_test - Step 63: Using propagated spline 18.0000 (close to path, dist=0.269m, drift=0.421m)
2026-01-21 12:29:45,842 - DEBUG - integration_test -   Set spline state to 18.0000
2026-01-21 12:29:45,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:45,964 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.595, 6.413), path_start=(0.000, 0.000), dist=17.791m
2026-01-21 12:29:45,964 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.791m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:29:45,964 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-21 12:29:46,070 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:29:46,095 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:29:46,095 - INFO - integration_test - Warmstart k=0: x0=16.5949014828944 , y0=6.4134939102107555 , psi0=0.2316419696391422 , v0=2.99999987058372 , spline0=17.999999990563158 , a0=0.0 , w0=0.0
2026-01-21 12:29:46,095 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:29:46,096 - INFO - integration_test - Dyn residual k=0: pred=[16.8868886954389, 6.482366691086199, 0.2316419696391422, 2.99999987058372, 18.29999997762153], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.8868886954389, 6.482366691086199, 0.2316419696391422, 2.99999987058372, 18.29999997762153], res_norm=2.591e+01
2026-01-21 12:29:46,097 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:46,097 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:29:46,113 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,292 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,314 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,362 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,383 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,430 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,451 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,499 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,522 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,568 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,588 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,636 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,657 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,703 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,726 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,774 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,795 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,840 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:29:46,862 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,907 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:29:46,929 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:29:46,972 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:23,027 - INFO - integration_test - Step 63: MPC solve successful
2026-01-21 12:30:23,163 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=18.000)
2026-01-21 12:30:23,163 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:23,164 - INFO - integration_test - === Applying control at step 63 ===
2026-01-21 12:30:23,164 - INFO - integration_test -   Control dict from planner: {'a': -1.8373961236500856e-05, 'w': -0.1835462250587179}
2026-01-21 12:30:23,164 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:23,164 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:23,165 - INFO - integration_test - Step 63 completed in 37.325s
2026-01-21 12:30:23,235 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-21 12:30:23,243 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.88750426  6.47968322  0.21328735  2.99999803 18.29999979]
2026-01-21 12:30:23,245 - DEBUG - integration_test - Step 64: Using propagated spline 18.3000 (close to path, dist=0.211m, drift=0.233m)
2026-01-21 12:30:23,246 - DEBUG - integration_test -   Set spline state to 18.3000
2026-01-21 12:30:23,249 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:23,366 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.888, 6.480), path_start=(0.000, 0.000), dist=18.088m
2026-01-21 12:30:23,366 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=18.088m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:23,366 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-21 12:30:23,474 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:23,504 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:23,504 - INFO - integration_test - Warmstart k=0: x0=16.88750426056149 , y0=6.479683221739375 , psi0=0.2132873471332704 , v0=2.9999980331875964 , spline0=18.299999793881916 , a0=0.0 , w0=0.0
2026-01-21 12:30:23,504 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:23,505 - INFO - integration_test - Dyn residual k=0: pred=[17.180706173723838, 6.543185348548105, 0.2132873471332704, 2.9999980331875964, 18.599999597200675], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.180706173723838, 6.543185348548105, 0.2132873471332704, 2.9999980331875964, 18.599999597200675], res_norm=2.632e+01
2026-01-21 12:30:23,506 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:23,507 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:23,527 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:23,707 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:23,730 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:23,777 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:23,799 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:23,848 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:23,869 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:23,916 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:23,938 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:24,024 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:24,057 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:24,107 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:24,132 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:24,180 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:24,200 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:24,248 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:24,269 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:24,315 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:24,337 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:24,383 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:24,402 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:24,447 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:26,389 - INFO - integration_test - Step 64: MPC solve successful
2026-01-21 12:30:26,704 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.300)
2026-01-21 12:30:26,705 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:26,705 - INFO - integration_test - === Applying control at step 64 ===
2026-01-21 12:30:26,705 - INFO - integration_test -   Control dict from planner: {'a': 1.996809027136672e-05, 'w': -0.12270844483202421}
2026-01-21 12:30:26,705 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:26,705 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:26,706 - INFO - integration_test - Step 64 completed in 3.463s
2026-01-21 12:30:26,775 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-21 12:30:26,787 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[17.18108852  6.54138488  0.2010165   3.00000003 18.5999998 ]
2026-01-21 12:30:26,787 - DEBUG - integration_test - Step 65: Using propagated spline 18.6000 (close to path, dist=0.318m, drift=0.533m)
2026-01-21 12:30:26,788 - DEBUG - integration_test -   Set spline state to 18.6000
2026-01-21 12:30:26,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:26,907 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(17.181, 6.541), path_start=(0.000, 0.000), dist=18.384m
2026-01-21 12:30:26,907 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.384m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:26,907 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-21 12:30:27,014 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:27,041 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:27,041 - INFO - integration_test - Warmstart k=0: x0=17.181088520922195 , y0=6.541384880303999 , psi0=0.20101650265006799 , v0=3.0000000299966234 , spline0=18.59999979688158 , a0=0.0 , w0=0.0
2026-01-21 12:30:27,041 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:27,042 - INFO - integration_test - Dyn residual k=0: pred=[17.47504776095177, 6.601284521379979, 0.20101650265006799, 3.0000000299966234, 18.899999799881243], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.47504776095177, 6.601284521379979, 0.20101650265006799, 3.0000000299966234, 18.899999799881243], res_norm=2.674e+01
2026-01-21 12:30:27,043 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:27,044 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:27,060 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,242 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,264 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,308 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,333 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,382 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,404 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,451 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,471 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,519 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,540 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,589 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,609 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,658 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,678 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,724 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,745 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,790 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:27,810 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,856 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:27,878 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:27,923 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:29,880 - INFO - integration_test - Step 65: MPC solve successful
2026-01-21 12:30:29,998 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.600)
2026-01-21 12:30:29,999 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:29,999 - INFO - integration_test - === Applying control at step 65 ===
2026-01-21 12:30:29,999 - INFO - integration_test -   Control dict from planner: {'a': -1.34344204756583e-05, 'w': -0.03457635190229104}
2026-01-21 12:30:29,999 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:29,999 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:30,001 - INFO - integration_test - Step 65 completed in 3.214s
2026-01-21 12:30:30,067 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-21 12:30:30,072 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.47515066  6.60077619  0.19755887  2.99999869 18.89999967]
2026-01-21 12:30:30,073 - DEBUG - integration_test - Step 66: Using propagated spline 18.9000 (close to path, dist=0.194m, drift=0.344m)
2026-01-21 12:30:30,073 - DEBUG - integration_test -   Set spline state to 18.9000
2026-01-21 12:30:30,076 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:30,191 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.475, 6.601), path_start=(0.000, 0.000), dist=18.680m
2026-01-21 12:30:30,191 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.680m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:30,191 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-21 12:30:30,297 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:30,323 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:30,323 - INFO - integration_test - Warmstart k=0: x0=17.47515066482655 , y0=6.600776187367318 , psi0=0.1975588674598389 , v0=2.999998686554576 , spline0=18.899999665537038 , a0=0.0 , w0=0.0
2026-01-21 12:30:30,323 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:30,324 - INFO - integration_test - Dyn residual k=0: pred=[17.769315126644244, 6.659659042230154, 0.1975588674598389, 2.999998686554576, 19.199999534192496], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.769315126644244, 6.659659042230154, 0.1975588674598389, 2.999998686554576, 19.199999534192496], res_norm=2.716e+01
2026-01-21 12:30:30,325 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:30,326 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:30,342 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:30,518 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:30,540 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:30,589 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:30,615 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:30,664 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:30,689 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:30,736 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:30,758 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:30,806 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:30,829 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:30,876 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:30,896 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:30,944 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:30,965 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:31,010 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:31,035 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:31,082 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:31,104 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:31,153 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:31,179 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:31,230 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:33,807 - INFO - integration_test - Step 66: MPC solve successful
2026-01-21 12:30:33,917 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.900)
2026-01-21 12:30:33,917 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:33,917 - INFO - integration_test - === Applying control at step 66 ===
2026-01-21 12:30:33,917 - INFO - integration_test -   Control dict from planner: {'a': 1.3432907960500412e-05, 'w': -0.08279900374019185}
2026-01-21 12:30:33,917 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:33,918 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:33,919 - INFO - integration_test - Step 66 completed in 3.847s
2026-01-21 12:30:33,987 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-21 12:30:33,998 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.7695556   6.65844056  0.18927897  3.00000003 19.19999967]
2026-01-21 12:30:33,998 - DEBUG - integration_test - Step 67: Using propagated spline 19.2000 (close to path, dist=0.252m, drift=0.156m)
2026-01-21 12:30:33,999 - DEBUG - integration_test -   Set spline state to 19.2000
2026-01-21 12:30:34,003 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:34,116 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.770, 6.658), path_start=(0.000, 0.000), dist=18.976m
2026-01-21 12:30:34,116 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.976m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:34,116 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-21 12:30:34,227 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:34,252 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:34,252 - INFO - integration_test - Warmstart k=0: x0=17.769555602119382 , y0=6.65844056298753 , psi0=0.1892789670858197 , v0=3.000000029845372 , spline0=19.199999668521574 , a0=0.0 , w0=0.0
2026-01-21 12:30:34,252 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:34,253 - INFO - integration_test - Dyn residual k=0: pred=[18.064197651046182, 6.71488580011998, 0.1892789670858197, 3.000000029845372, 19.49999967150611], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.064197651046182, 6.71488580011998, 0.1892789670858197, 3.000000029845372, 19.49999967150611], res_norm=2.758e+01
2026-01-21 12:30:34,254 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:34,255 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:34,272 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,452 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:34,474 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,521 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:34,545 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,590 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:34,613 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,659 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:34,679 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,728 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:34,749 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,793 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:34,816 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,861 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:34,884 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,930 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:34,950 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:34,997 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:35,021 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:35,063 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:35,085 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:35,132 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:37,064 - INFO - integration_test - Step 67: MPC solve successful
2026-01-21 12:30:37,397 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.200)
2026-01-21 12:30:37,398 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:37,398 - INFO - integration_test - === Applying control at step 67 ===
2026-01-21 12:30:37,398 - INFO - integration_test -   Control dict from planner: {'a': -1.2447696894304416e-09, 'w': -0.044884823241530564}
2026-01-21 12:30:37,398 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:37,398 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:37,399 - INFO - integration_test - Step 67 completed in 3.402s
2026-01-21 12:30:37,463 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-21 12:30:37,474 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[18.06432334  6.71422436  0.18479048  3.00000003 19.49999967]
2026-01-21 12:30:37,475 - DEBUG - integration_test - Step 68: Using propagated spline 19.5000 (close to path, dist=0.216m, drift=0.456m)
2026-01-21 12:30:37,477 - DEBUG - integration_test -   Set spline state to 19.5000
2026-01-21 12:30:37,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:37,601 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(18.064, 6.714), path_start=(0.000, 0.000), dist=19.272m
2026-01-21 12:30:37,601 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=19.272m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:37,601 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-21 12:30:37,721 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:37,748 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:37,748 - INFO - integration_test - Warmstart k=0: x0=18.064323338219964 , y0=6.71422436388615 , psi0=0.18479048476166665 , v0=3.000000029720895 , spline0=19.499999671493665 , a0=0.0 , w0=0.0
2026-01-21 12:30:37,749 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:37,750 - INFO - integration_test - Dyn residual k=0: pred=[18.359215771738842, 6.769346541243068, 0.18479048476166665, 3.000000029720895, 19.799999674465756], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.359215771738842, 6.769346541243068, 0.18479048476166665, 3.000000029720895, 19.799999674465756], res_norm=2.800e+01
2026-01-21 12:30:37,750 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:37,751 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:37,770 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:37,956 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:37,977 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,025 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:38,046 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,091 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:38,114 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,159 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:38,179 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,225 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:38,245 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,287 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:38,307 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,356 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:38,376 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,425 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:38,446 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,492 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:38,515 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,562 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:38,582 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:38,628 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:39,464 - INFO - integration_test - Step 68: MPC solve successful
2026-01-21 12:30:39,592 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.500)
2026-01-21 12:30:39,592 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:39,592 - INFO - integration_test - === Applying control at step 68 ===
2026-01-21 12:30:39,592 - INFO - integration_test -   Control dict from planner: {'a': -3.643574059733677e-07, 'w': 0.010716475884794775}
2026-01-21 12:30:39,592 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:39,592 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:39,593 - INFO - integration_test - Step 68 completed in 2.120s
2026-01-21 12:30:39,657 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-21 12:30:39,663 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[18.35918618  6.76950454  0.18586213  2.99999999 19.79999967]
2026-01-21 12:30:39,663 - DEBUG - integration_test - Step 69: Using propagated spline 19.8000 (close to path, dist=0.189m, drift=0.268m)
2026-01-21 12:30:39,664 - DEBUG - integration_test -   Set spline state to 19.8000
2026-01-21 12:30:39,666 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:39,776 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(18.359, 6.770), path_start=(0.000, 0.000), dist=19.567m
2026-01-21 12:30:39,776 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.567m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:39,777 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-21 12:30:39,881 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:39,906 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:39,906 - INFO - integration_test - Warmstart k=0: x0=18.359186177733108 , y0=6.769504540723904 , psi0=0.18586213235014612 , v0=2.9999999932851544 , spline0=19.79999967082218 , a0=0.0 , w0=0.0
2026-01-21 12:30:39,906 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:39,908 - INFO - integration_test - Dyn residual k=0: pred=[18.654019366802604, 6.824942706460327, 0.18586213235014612, 2.9999999932851544, 20.099999670150698], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.654019366802604, 6.824942706460327, 0.18586213235014612, 2.9999999932851544, 20.099999670150698], res_norm=2.842e+01
2026-01-21 12:30:39,909 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:39,911 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:39,928 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,102 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,125 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,169 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,190 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,238 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,259 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,303 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,327 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,373 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,395 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,442 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,461 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,505 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,529 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,575 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,600 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,650 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:40,670 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,720 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:40,744 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:40,792 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:41,775 - INFO - integration_test - Step 69: MPC solve successful
2026-01-21 12:30:41,955 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.800)
2026-01-21 12:30:41,955 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:41,955 - INFO - integration_test - === Applying control at step 69 ===
2026-01-21 12:30:41,955 - INFO - integration_test -   Control dict from planner: {'a': 3.671422124255515e-07, 'w': -0.10878998810820661}
2026-01-21 12:30:41,955 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:41,955 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:41,956 - INFO - integration_test - Step 69 completed in 2.294s
2026-01-21 12:30:42,025 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-21 12:30:42,036 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.65431511  6.82333788  0.17498313  3.00000003 20.09999967]
2026-01-21 12:30:42,036 - DEBUG - integration_test - Step 70: Using propagated spline 20.1000 (close to path, dist=0.266m, drift=0.568m)
2026-01-21 12:30:42,037 - DEBUG - integration_test -   Set spline state to 20.1000
2026-01-21 12:30:42,040 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:42,351 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.654, 6.823), path_start=(0.000, 0.000), dist=19.863m
2026-01-21 12:30:42,351 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.863m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:42,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-21 12:30:42,455 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:42,480 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:42,480 - INFO - integration_test - Warmstart k=0: x0=18.654315105827212 , y0=6.823337884111795 , psi0=0.17498313353932546 , v0=3.000000029999376 , spline0=20.09999967382212 , a0=0.0 , w0=0.0
2026-01-21 12:30:42,480 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:42,481 - INFO - integration_test - Dyn residual k=0: pred=[18.949733951387216, 6.875565343249275, 0.17498313353932546, 3.000000029999376, 20.399999676822056], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.949733951387216, 6.875565343249275, 0.17498313353932546, 3.000000029999376, 20.399999676822056], res_norm=2.884e+01
2026-01-21 12:30:42,482 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:42,483 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:42,498 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:42,679 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:42,701 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:42,753 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:42,779 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:42,834 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:42,860 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:42,910 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:42,935 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:42,989 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:43,018 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:43,072 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:43,094 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:43,145 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:43,170 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:43,223 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:43,247 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:43,303 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:43,329 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:43,384 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:43,408 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:43,457 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:44,447 - INFO - integration_test - Step 70: MPC solve successful
2026-01-21 12:30:44,575 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=20.100)
2026-01-21 12:30:44,575 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:44,575 - INFO - integration_test - === Applying control at step 70 ===
2026-01-21 12:30:44,575 - INFO - integration_test -   Control dict from planner: {'a': -2.1781861509168976e-07, 'w': 0.0014696405128278786}
2026-01-21 12:30:44,575 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:44,575 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:44,576 - INFO - integration_test - Step 70 completed in 2.541s
2026-01-21 12:30:44,644 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-21 12:30:44,653 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.94973011  6.87558705  0.1751301   3.00000001 20.39999967]
2026-01-21 12:30:44,654 - DEBUG - integration_test - Step 71: Using propagated spline 20.4000 (close to path, dist=0.153m, drift=0.380m)
2026-01-21 12:30:44,655 - DEBUG - integration_test -   Set spline state to 20.4000
2026-01-21 12:30:44,658 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:44,773 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.950, 6.876), path_start=(0.000, 0.000), dist=20.159m
2026-01-21 12:30:44,773 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=20.159m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:44,773 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-21 12:30:44,881 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:44,908 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:44,908 - INFO - integration_test - Warmstart k=0: x0=18.949730111471858 , y0=6.8755870508467085 , psi0=0.17513009759060824 , v0=3.0000000082175142 , spline0=20.39999967464387 , a0=0.0 , w0=0.0
2026-01-21 12:30:44,908 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:44,909 - INFO - integration_test - Dyn residual k=0: pred=[19.245141276137748, 6.9278579249908665, 0.17513009759060824, 3.0000000082175142, 20.69999967546562], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.245141276137748, 6.9278579249908665, 0.17513009759060824, 3.0000000082175142, 20.69999967546562], res_norm=2.926e+01
2026-01-21 12:30:44,910 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:44,911 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:44,929 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,105 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,128 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,175 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,200 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,250 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,274 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,321 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,343 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,392 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,414 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,459 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,481 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,527 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,548 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,599 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,621 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,667 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:45,688 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,735 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:45,756 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:45,801 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:46,967 - INFO - integration_test - Step 71: MPC solve successful
2026-01-21 12:30:47,123 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=20.400)
2026-01-21 12:30:47,123 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:47,123 - INFO - integration_test - === Applying control at step 71 ===
2026-01-21 12:30:47,123 - INFO - integration_test -   Control dict from planner: {'a': 2.099394948119118e-07, 'w': -0.03302388580999186}
2026-01-21 12:30:47,123 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:47,123 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:47,125 - INFO - integration_test - Step 71 completed in 2.472s
2026-01-21 12:30:47,220 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-21 12:30:47,229 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[19.24522705  6.92737005  0.17182771  3.00000003 20.69999968]
2026-01-21 12:30:47,230 - DEBUG - integration_test - Step 72: Using propagated spline 20.7000 (close to path, dist=0.261m, drift=0.191m)
2026-01-21 12:30:47,231 - DEBUG - integration_test -   Set spline state to 20.7000
2026-01-21 12:30:47,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:47,350 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(19.245, 6.927), path_start=(0.000, 0.000), dist=20.454m
2026-01-21 12:30:47,350 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=20.454m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:47,350 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-21 12:30:47,458 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:47,485 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:47,485 - INFO - integration_test - Warmstart k=0: x0=19.24522704951488 , y0=6.927370049377371 , psi0=0.17182770900960906 , v0=3.000000029211464 , spline0=20.699999677565014 , a0=0.0 , w0=0.0
2026-01-21 12:30:47,485 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:47,486 - INFO - integration_test - Dyn residual k=0: pred=[19.54080922383169, 6.978665078169993, 0.17182770900960906, 3.000000029211464, 20.99999968048616], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.54080922383169, 6.978665078169993, 0.17182770900960906, 3.000000029211464, 20.99999968048616], res_norm=2.967e+01
2026-01-21 12:30:47,487 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:47,488 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:47,504 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:47,679 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:47,703 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:47,751 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:47,773 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:47,821 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:47,844 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:47,892 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:47,915 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:47,961 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:47,983 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:48,031 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:48,052 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:48,099 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:48,121 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:48,168 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:48,188 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:48,236 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:48,258 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:48,304 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:48,325 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:48,371 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:49,794 - INFO - integration_test - Step 72: MPC solve successful
2026-01-21 12:30:50,139 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.700)
2026-01-21 12:30:50,140 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:50,140 - INFO - integration_test - === Applying control at step 72 ===
2026-01-21 12:30:50,140 - INFO - integration_test -   Control dict from planner: {'a': 7.880072224451012e-09, 'w': -0.011761899270788573}
2026-01-21 12:30:50,140 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:50,140 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:50,141 - INFO - integration_test - Step 72 completed in 2.912s
2026-01-21 12:30:50,210 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-21 12:30:50,222 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[19.54083932  6.97849124  0.17065152  3.00000003 20.99999968]
2026-01-21 12:30:50,222 - DEBUG - integration_test - Step 73: Using propagated spline 21.0000 (close to path, dist=0.159m, drift=0.491m)
2026-01-21 12:30:50,222 - DEBUG - integration_test -   Set spline state to 21.0000
2026-01-21 12:30:50,227 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:50,341 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(19.541, 6.978), path_start=(0.000, 0.000), dist=20.750m
2026-01-21 12:30:50,341 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.750m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:50,341 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-21 12:30:50,449 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:50,477 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:50,477 - INFO - integration_test - Warmstart k=0: x0=19.540839322062613 , y0=6.978491235981593 , psi0=0.1706515190825302 , v0=3.0000000299994714 , spline0=20.99999968056496 , a0=0.0 , w0=0.0
2026-01-21 12:30:50,477 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:50,478 - INFO - integration_test - Dyn residual k=0: pred=[19.836481624681813, 7.029438568610351, 0.1706515190825302, 3.0000000299994714, 21.29999968356491], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.836481624681813, 7.029438568610351, 0.1706515190825302, 3.0000000299994714, 21.29999968356491], res_norm=3.009e+01
2026-01-21 12:30:50,479 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:50,479 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:50,496 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:50,677 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:50,698 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:50,749 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:50,771 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:50,819 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:50,841 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:50,887 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:50,907 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:50,956 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:50,979 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:51,026 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:51,046 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:51,093 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:51,116 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:51,161 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:51,181 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:51,228 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:51,251 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:51,295 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:51,315 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:51,360 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:52,826 - INFO - integration_test - Step 73: MPC solve successful
2026-01-21 12:30:53,029 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=21.000)
2026-01-21 12:30:53,029 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:53,029 - INFO - integration_test - === Applying control at step 73 ===
2026-01-21 12:30:53,029 - INFO - integration_test -   Control dict from planner: {'a': -1.3640943832014861e-06, 'w': -0.005468915512726815}
2026-01-21 12:30:53,029 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:53,029 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:53,031 - INFO - integration_test - Step 73 completed in 2.809s
2026-01-21 12:30:53,099 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-21 12:30:53,107 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.83649553  7.02935772  0.17010463  2.99999989 21.29999967]
2026-01-21 12:30:53,108 - DEBUG - integration_test - Step 74: Using propagated spline 21.3000 (close to path, dist=0.184m, drift=0.303m)
2026-01-21 12:30:53,109 - DEBUG - integration_test -   Set spline state to 21.3000
2026-01-21 12:30:53,112 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:53,229 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.836, 7.029), path_start=(0.000, 0.000), dist=21.045m
2026-01-21 12:30:53,229 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=21.045m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:53,229 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-21 12:30:53,335 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:53,364 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:53,364 - INFO - integration_test - Warmstart k=0: x0=19.836495534555237 , y0=7.0293577227781405 , psi0=0.17010462753125752 , v0=2.999999893590033 , spline0=21.299999669923963 , a0=0.0 , w0=0.0
2026-01-21 12:30:53,364 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:53,365 - INFO - integration_test - Dyn residual k=0: pred=[20.132165642182876, 7.0801433612093145, 0.17010462753125752, 2.999999893590033, 21.599999659282965], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.132165642182876, 7.0801433612093145, 0.17010462753125752, 2.999999893590033, 21.599999659282965], res_norm=3.051e+01
2026-01-21 12:30:53,366 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:53,367 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:53,382 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:53,558 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:53,579 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:53,628 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:53,650 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:53,697 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:53,717 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:53,765 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:53,785 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:53,834 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:53,857 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:53,903 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:53,926 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:53,976 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:53,997 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:54,046 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:54,067 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:54,112 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:54,135 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:54,179 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:54,200 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:54,249 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:55,920 - INFO - integration_test - Step 74: MPC solve successful
2026-01-21 12:30:56,061 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=21.300)
2026-01-21 12:30:56,062 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:30:56,062 - INFO - integration_test - === Applying control at step 74 ===
2026-01-21 12:30:56,062 - INFO - integration_test -   Control dict from planner: {'a': 1.3380786675202808e-06, 'w': -0.021781207600276513}
2026-01-21 12:30:56,062 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:30:56,062 - INFO - integration_test -   Planner output success: True
2026-01-21 12:30:56,063 - INFO - integration_test - Step 74 completed in 2.956s
2026-01-21 12:30:56,135 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-21 12:30:56,142 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[20.13222072  7.07982132  0.16792651  3.00000003 21.59999967]
2026-01-21 12:30:56,142 - DEBUG - integration_test - Step 75: Using propagated spline 21.6000 (close to path, dist=0.203m, drift=0.603m)
2026-01-21 12:30:56,143 - DEBUG - integration_test -   Set spline state to 21.6000
2026-01-21 12:30:56,146 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:56,260 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(20.132, 7.080), path_start=(0.000, 0.000), dist=21.341m
2026-01-21 12:30:56,260 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=21.341m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:30:56,260 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-21 12:30:56,370 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:30:56,398 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:30:56,398 - INFO - integration_test - Warmstart k=0: x0=20.132220723596376 , y0=7.079821319703578 , psi0=0.16792650677122986 , v0=3.0000000273978995 , spline0=21.599999672663753 , a0=0.0 , w0=0.0
2026-01-21 12:30:56,398 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:30:56,399 - INFO - integration_test - Dyn residual k=0: pred=[20.428000760222222, 7.129962835212048, 0.16792650677122986, 3.0000000273978995, 21.899999675403542], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.428000760222222, 7.129962835212048, 0.16792650677122986, 3.0000000273978995, 21.899999675403542], res_norm=3.093e+01
2026-01-21 12:30:56,399 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:56,400 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:30:56,420 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:56,843 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:56,879 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:56,934 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:56,958 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,011 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:57,035 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,088 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:57,110 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,162 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:57,183 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,232 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:57,254 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,298 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:57,321 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,366 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:57,388 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,437 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:30:57,459 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,504 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:30:57,525 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:30:57,570 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:01,828 - WARNING - integration_test - Step 75: MPC solve failed
2026-01-21 12:31:01,828 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 12:31:01,968 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.600)
2026-01-21 12:31:01,968 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:31:01,968 - INFO - integration_test - === Applying control at step 75 ===
2026-01-21 12:31:01,968 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:31:01,968 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:31:01,968 - INFO - integration_test -   Planner output success: False
2026-01-21 12:31:01,968 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:31:01,970 - INFO - integration_test - Step 75 completed in 5.828s
2026-01-21 12:31:02,044 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-21 12:31:02,053 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[20.42800076  7.12996284  0.16792651  3.00000003 21.89999968]
2026-01-21 12:31:02,053 - DEBUG - integration_test - Step 76: Using propagated spline 21.9000 (close to path, dist=0.118m, drift=0.415m)
2026-01-21 12:31:02,054 - DEBUG - integration_test -   Set spline state to 21.9000
2026-01-21 12:31:02,057 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:31:02,176 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(20.428, 7.130), path_start=(0.000, 0.000), dist=21.637m
2026-01-21 12:31:02,176 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.637m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:31:02,176 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-21 12:31:02,287 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:31:02,317 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:31:02,317 - INFO - integration_test - Warmstart k=0: x0=20.428000760222222 , y0=7.129962835212048 , psi0=0.16792650677122986 , v0=3.0000000273978995 , spline0=21.899999675403542 , a0=0.0 , w0=0.0
2026-01-21 12:31:02,317 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:31:02,318 - INFO - integration_test - Dyn residual k=0: pred=[20.723780796848068, 7.180104350720518, 0.16792650677122986, 3.0000000273978995, 22.19999967814333], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.723780796848068, 7.180104350720518, 0.16792650677122986, 3.0000000273978995, 22.19999967814333], res_norm=3.135e+01
2026-01-21 12:31:02,318 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:31:02,319 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:31:02,335 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:02,516 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:02,538 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:02,584 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:02,608 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:02,655 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:02,674 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:02,720 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:02,741 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:02,788 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:02,809 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:02,858 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:02,880 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:02,927 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:02,948 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:02,995 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:03,018 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:03,064 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:03,087 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:03,131 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:03,153 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:03,197 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:06,436 - WARNING - integration_test - Step 76: MPC solve failed
2026-01-21 12:31:06,436 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 12:31:06,574 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.900)
2026-01-21 12:31:06,574 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:31:06,574 - INFO - integration_test - === Applying control at step 76 ===
2026-01-21 12:31:06,574 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:31:06,574 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:31:06,574 - INFO - integration_test -   Planner output success: False
2026-01-21 12:31:06,574 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:31:06,576 - INFO - integration_test - Step 76 completed in 4.523s
2026-01-21 12:31:06,649 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-21 12:31:06,656 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[20.7237808   7.18010435  0.16792651  3.00000003 22.19999968]
2026-01-21 12:31:06,657 - DEBUG - integration_test - Step 77: Using propagated spline 22.2000 (close to path, dist=0.267m, drift=0.715m)
2026-01-21 12:31:06,657 - DEBUG - integration_test -   Set spline state to 22.2000
2026-01-21 12:31:06,660 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:31:06,775 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(20.724, 7.180), path_start=(0.000, 0.000), dist=21.932m
2026-01-21 12:31:06,775 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=21.932m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:31:06,776 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-21 12:31:06,881 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:31:06,908 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:31:06,909 - INFO - integration_test - Warmstart k=0: x0=20.723780796848068 , y0=7.180104350720518 , psi0=0.16792650677122986 , v0=3.0000000273978995 , spline0=22.19999967814333 , a0=0.0 , w0=0.0
2026-01-21 12:31:06,909 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:31:06,910 - INFO - integration_test - Dyn residual k=0: pred=[21.019560833473914, 7.230245866228987, 0.16792650677122986, 3.0000000273978995, 22.49999968088312], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.019560833473914, 7.230245866228987, 0.16792650677122986, 3.0000000273978995, 22.49999968088312], res_norm=3.177e+01
2026-01-21 12:31:06,910 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:31:06,911 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:31:06,928 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,107 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,129 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,181 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,204 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,250 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,270 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,318 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,340 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,387 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,408 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,455 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,475 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,522 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,543 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,587 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,607 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,656 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:07,677 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,720 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:07,742 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:07,789 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:11,610 - WARNING - integration_test - Step 77: MPC solve failed
2026-01-21 12:31:11,610 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 12:31:11,779 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=22.200)
2026-01-21 12:31:11,780 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:31:11,780 - INFO - integration_test - === Applying control at step 77 ===
2026-01-21 12:31:11,780 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 12:31:11,780 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:31:11,780 - INFO - integration_test -   Planner output success: False
2026-01-21 12:31:11,780 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 12:31:11,781 - INFO - integration_test - Step 77 completed in 5.126s
2026-01-21 12:31:11,856 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-21 12:31:11,864 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[21.01956083  7.23024587  0.16792651  3.00000003 22.49999968]
2026-01-21 12:31:11,865 - DEBUG - integration_test - Step 78: Using propagated spline 22.5000 (close to path, dist=0.089m, drift=0.526m)
2026-01-21 12:31:11,865 - DEBUG - integration_test -   Set spline state to 22.5000
2026-01-21 12:31:11,869 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:31:11,988 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(21.020, 7.230), path_start=(0.000, 0.000), dist=22.228m
2026-01-21 12:31:11,988 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=22.228m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:31:11,988 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-21 12:31:12,094 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:31:12,123 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:31:12,123 - INFO - integration_test - Warmstart k=0: x0=21.019560833473914 , y0=7.230245866228987 , psi0=0.16792650677122986 , v0=3.0000000273978995 , spline0=22.49999968088312 , a0=0.0 , w0=0.0
2026-01-21 12:31:12,123 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:31:12,124 - INFO - integration_test - Dyn residual k=0: pred=[21.31534087009976, 7.280387381737457, 0.16792650677122986, 3.0000000273978995, 22.79999968362291], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.31534087009976, 7.280387381737457, 0.16792650677122986, 3.0000000273978995, 22.79999968362291], res_norm=3.219e+01
2026-01-21 12:31:12,125 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:31:12,126 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:31:12,142 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,331 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,354 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,404 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,429 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,473 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,493 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,539 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,560 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,606 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,629 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,675 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,695 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,743 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,766 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,813 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,836 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,881 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:12,901 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:12,947 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:12,968 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:13,013 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:14,376 - INFO - integration_test - Step 78: MPC solve successful
2026-01-21 12:31:14,508 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=22.500)
2026-01-21 12:31:14,508 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:31:14,508 - INFO - integration_test - === Applying control at step 78 ===
2026-01-21 12:31:14,508 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199857326, 'w': -0.3952149509932562}
2026-01-21 12:31:14,508 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:31:14,508 - INFO - integration_test -   Planner output success: True
2026-01-21 12:31:14,509 - INFO - integration_test - Step 78 completed in 2.646s
2026-01-21 12:31:14,578 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-21 12:31:14,583 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[21.30635507  7.27311925  0.12840501  2.80000003 22.77999968]
2026-01-21 12:31:14,584 - DEBUG - integration_test - Step 79: Using propagated spline 22.7800 (close to path, dist=0.211m, drift=0.318m)
2026-01-21 12:31:14,584 - DEBUG - integration_test -   Set spline state to 22.7800
2026-01-21 12:31:14,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:31:14,702 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(21.306, 7.273), path_start=(0.000, 0.000), dist=22.514m
2026-01-21 12:31:14,702 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=22.514m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 12:31:14,702 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-21 12:31:14,804 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 12:31:14,832 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 12:31:14,832 - INFO - integration_test - Warmstart k=0: x0=21.306355067473902 , y0=7.2731192527244835 , psi0=0.12840501167190424 , v0=2.8000000253993265 , spline0=22.779999683423053 , a0=0.0 , w0=0.0
2026-01-21 12:31:14,832 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 12:31:14,833 - INFO - integration_test - Dyn residual k=0: pred=[21.58404994124004, 7.30897393869956, 0.12840501167190424, 2.8000000253993265, 23.059999685962985], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.58404994124004, 7.30897393869956, 0.12840501167190424, 2.8000000253993265, 23.059999685962985], res_norm=3.254e+01
2026-01-21 12:31:14,834 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:31:14,835 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 12:31:14,851 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,034 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,057 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,102 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,125 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,173 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,194 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,243 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,263 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,350 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,381 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,431 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,454 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,501 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,523 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,569 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,594 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,644 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 12:31:15,668 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,710 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:15,732 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 12:31:15,775 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 12:31:17,031 - INFO - integration_test - Step 79: MPC solve successful
2026-01-21 12:31:17,410 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.780)
2026-01-21 12:31:17,410 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 12:31:17,410 - INFO - integration_test - === Applying control at step 79 ===
2026-01-21 12:31:17,410 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000044586534, 'w': -0.799999478810299}
2026-01-21 12:31:17,410 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 12:31:17,410 - INFO - integration_test -   Planner output success: True
2026-01-21 12:31:17,411 - INFO - integration_test - Goal reached at step 79!
2026-01-21 12:31:17,411 - INFO - integration_test - Step 79 completed in 2.828s
2026-01-21 12:31:17,479 - INFO - integration_test - Goal reached at step 79, added 3 extra frames for visualization
2026-01-21 12:31:17,490 - INFO - integration_test - Saving test results...
2026-01-21 12:31:17,494 - INFO - integration_test - Saved 84 vehicle states to test_outputs/20260121_122650_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-21 12:31:17,494 - INFO - integration_test - Saved obstacle summary to test_outputs/20260121_122650_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-21 12:31:17,494 - INFO - integration_test - Saved 91 states for obstacle 0 to test_outputs/20260121_122650_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-21 12:31:17,495 - INFO - integration_test - Saved 91 states for obstacle 1 to test_outputs/20260121_122650_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-21 12:31:17,495 - INFO - integration_test - Saved 91 states for obstacle 2 to test_outputs/20260121_122650_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-21 12:31:17,495 - INFO - integration_test - Saved 91 states for obstacle 3 to test_outputs/20260121_122650_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-21 12:31:17,495 - INFO - integration_test - Saved state history: 84 vehicle states, 4 obstacles
2026-01-21 12:31:17,496 - INFO - integration_test - Creating animation...
2026-01-21 12:31:17,546 - DEBUG - integration_test - Creating animation with 84 frames (range: 0 to 83)
2026-01-21 12:31:17,547 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 12:31:17,653 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 12:31:17,653 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 12:31:17,653 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 12:31:17,682 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 12:31:17,683 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 12:31:17,792 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 12:31:17,792 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 12:31:17,792 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 12:31:17,825 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 12:31:17,909 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-21 12:31:18,021 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-21 12:31:18,021 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-21 12:31:18,021 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 12:31:18,049 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-21 12:31:18,089 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-21 12:31:18,213 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-21 12:31:18,213 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-21 12:31:18,213 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 12:31:18,474 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-21 12:31:43,660 - INFO - integration_test - Saved animation with 84 frames at 10.00 fps to test_outputs/20260121_122650_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 8.40s, size: 1371160 bytes)
2026-01-21 12:31:43,702 - INFO - integration_test - Animation created successfully
2026-01-21 12:31:43,703 - INFO - integration_test - Test completed successfully
