2026-01-21 13:25:44,419 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 13:25:44,419 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 13:25:44,419 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 13:25:44,419 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 13:25:44,419 - INFO - integration_test - Creating objective module: contouring
2026-01-21 13:25:44,427 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 13:25:44,427 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 13:25:44,427 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 13:25:44,448 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 13:25:44,448 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 13:25:44,453 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 13:25:44,453 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 13:25:44,469 - INFO - integration_test - Setting solver on all modules...
2026-01-21 13:25:44,469 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 13:25:44,469 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 13:25:44,469 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 13:25:44,469 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 13:25:44,469 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 13:25:44,469 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 13:25:44,470 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 13:25:44,470 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 13:25:44,470 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 13:25:44,470 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 13:25:44,470 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 13:25:44,470 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 13:25:44,470 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 13:25:44,471 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 13:25:44,471 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 13:25:44,471 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 13:25:44,471 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 13:25:44,471 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 13:25:44,471 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 13:25:44,471 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 13:25:44,474 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:44,487 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 13:25:44,487 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 13:25:44,610 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:44,636 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:44,636 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 13:25:44,636 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:44,637 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 13:25:44,637 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:44,638 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:44,652 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:44,792 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:44,810 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:44,851 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:44,870 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:44,909 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:44,928 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:44,967 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:44,986 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:45,027 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:45,047 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:45,086 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:45,105 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:45,144 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:45,162 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:45,202 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:45,220 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:45,263 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:45,289 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:45,335 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:45,356 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:45,409 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:46,405 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 13:25:46,631 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 13:25:46,631 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:25:46,631 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 13:25:46,631 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 13:25:46,631 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001964614, 'w': 0.7999999976446949}
2026-01-21 13:25:46,631 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:25:46,632 - INFO - integration_test -   Planner output success: True
2026-01-21 13:25:46,633 - INFO - integration_test - Step 0 completed in 2.162s
2026-01-21 13:25:46,691 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 13:25:46,695 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 13:25:46,696 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 13:25:46,696 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 13:25:46,699 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:46,798 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 13:25:46,798 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 13:25:46,885 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:46,908 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:46,908 - INFO - integration_test - Warmstart k=0: x0=0.10987737537998617 , y0=0.004530845044980683 , psi0=0.07999999976446948 , v0=1.200000001964614 , spline0=0.1200000001964614 , a0=0.0 , w0=0.0
2026-01-21 13:25:46,908 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:46,909 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803343922, 0.01412060830880829, 0.07999999976446948, 1.200000001964614, 0.2400000003929228], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.2294935803343922, 0.01412060830880829, 0.07999999976446948, 1.200000001964614, 0.2400000003929228], res_norm=1.248e+00
2026-01-21 13:25:46,910 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:46,911 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:46,926 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,056 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,076 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,118 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,137 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,179 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,198 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,241 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,259 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,301 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,320 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,362 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,380 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,422 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,441 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,482 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,500 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,541 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:47,559 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,597 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:47,616 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:47,655 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:48,240 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 13:25:48,344 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 13:25:48,344 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:25:48,344 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 13:25:48,344 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018506322, 'w': 0.7999999421778944}
2026-01-21 13:25:48,344 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:25:48,344 - INFO - integration_test -   Planner output success: True
2026-01-21 13:25:48,346 - INFO - integration_test - Step 1 completed in 1.650s
2026-01-21 13:25:48,397 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 13:25:48,398 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-21 13:25:48,398 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 13:25:48,398 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 13:25:48,401 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:48,493 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 13:25:48,493 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 13:25:48,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:48,598 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:48,598 - INFO - integration_test - Warmstart k=0: x0=0.23889212823401484 , y0=0.020221621333871752 , psi0=0.1599999939822589 , v0=1.4000000038152463 , spline0=0.260000000577986 , a0=0.0 , w0=0.0
2026-01-21 13:25:48,598 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:48,599 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394841747713, 0.042526169488927054, 0.1599999939822589, 1.4000000038152463, 0.4000000009595106], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394841747713, 0.042526169488927054, 0.1599999939822589, 1.4000000038152463, 0.4000000009595106], res_norm=1.513e+00
2026-01-21 13:25:48,600 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:48,601 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:48,614 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:48,743 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:48,763 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:48,804 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:48,824 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:48,865 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:48,883 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:48,923 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:48,942 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:48,983 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:49,001 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:49,043 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:49,061 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:49,101 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:49,119 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:49,160 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:49,178 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:49,222 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:49,241 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:49,281 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:49,298 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:49,338 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:49,916 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 13:25:49,965 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 13:25:49,965 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:25:49,965 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 13:25:49,965 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199206327, 'w': 0.8000000051240708}
2026-01-21 13:25:49,965 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:25:49,965 - INFO - integration_test -   Planner output success: True
2026-01-21 13:25:49,967 - INFO - integration_test - Step 2 completed in 1.569s
2026-01-21 13:25:50,020 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 13:25:50,023 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999999 1.60000001 0.42      ]
2026-01-21 13:25:50,023 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 13:25:50,023 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 13:25:50,026 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:50,115 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 13:25:50,115 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 13:25:50,261 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:50,282 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:50,283 - INFO - integration_test - Warmstart k=0: x0=0.38583643593583694 , y0=0.05014471519007101 , psi0=0.23999999449466597 , v0=1.6000000058073094 , spline0=0.42000000115871694 , a0=0.0 , w0=0.0
2026-01-21 13:25:50,283 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:50,283 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505126856288, 0.0881771347008474, 0.23999999449466597, 1.6000000058073094, 0.5800000017394479], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505126856288, 0.0881771347008474, 0.23999999449466597, 1.6000000058073094, 0.5800000017394479], res_norm=1.804e+00
2026-01-21 13:25:50,284 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:50,285 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:50,298 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,434 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,451 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,492 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,510 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,551 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,569 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,608 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,625 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,667 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,685 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,725 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,744 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,785 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,803 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,848 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,866 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,906 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:50,926 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:50,965 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:50,983 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:51,025 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:51,638 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 13:25:51,690 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 13:25:51,691 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:25:51,691 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 13:25:51,691 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999559, 'w': 0.8000000099631196}
2026-01-21 13:25:51,691 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:25:51,691 - INFO - integration_test -   Planner output success: True
2026-01-21 13:25:51,692 - INFO - integration_test - Step 3 completed in 1.669s
2026-01-21 13:25:51,756 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 13:25:51,757 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.32       1.80000001 0.6       ]
2026-01-21 13:25:51,757 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 13:25:51,757 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 13:25:51,760 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:51,858 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 13:25:51,858 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 13:25:51,940 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:51,962 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:51,962 - INFO - integration_test - Warmstart k=0: x0=0.5491354617042017 , y0=0.09724075492351378 , psi0=0.3199999954909779 , v0=1.8000000078072653 , spline0=0.6000000019394435 , a0=0.0 , w0=0.0
2026-01-21 13:25:51,962 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:51,963 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978379554441, 0.1538627353095832, 0.3199999954909779, 1.8000000078072653, 0.78000000272017], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978379554441, 0.1538627353095832, 0.3199999954909779, 1.8000000078072653, 0.78000000272017], res_norm=2.120e+00
2026-01-21 13:25:51,964 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:51,964 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:51,978 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,107 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,125 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,166 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,185 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,228 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,248 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,289 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,308 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,348 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,367 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,408 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,429 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,472 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,491 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,532 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,551 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,591 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:52,609 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,652 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:52,672 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:52,712 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:53,302 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 13:25:53,422 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 13:25:53,422 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:25:53,422 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 13:25:53,422 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199958743, 'w': 0.8000000094437127}
2026-01-21 13:25:53,422 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:25:53,422 - INFO - integration_test -   Planner output success: True
2026-01-21 13:25:53,424 - INFO - integration_test - Step 4 completed in 1.667s
2026-01-21 13:25:53,478 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 13:25:53,478 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 13:25:53,479 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 13:25:53,479 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 13:25:53,482 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:53,588 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 13:25:53,588 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 13:25:53,679 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:53,705 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:53,705 - INFO - integration_test - Warmstart k=0: x0=0.7268614894718224 , y0=0.1642797656288113 , psi0=0.39999999643534917 , v0=2.0000000098068527 , spline0=0.8000000029201287 , a0=0.0 , w0=0.0
2026-01-21 13:25:53,705 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:53,706 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736894532985, 0.24216343381578606, 0.39999999643534917, 2.0000000098068527, 1.000000003900814], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736894532985, 0.24216343381578606, 0.39999999643534917, 2.0000000098068527, 1.000000003900814], res_norm=2.459e+00
2026-01-21 13:25:53,706 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:53,707 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:53,721 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:53,878 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:53,897 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:53,939 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:53,958 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,002 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:54,021 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,066 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:54,085 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,128 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:54,146 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,193 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:54,217 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,278 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:54,310 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,368 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:54,387 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,431 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:54,451 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,493 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:54,511 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:54,553 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:55,170 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 13:25:55,226 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 13:25:55,227 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:25:55,227 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 13:25:55,227 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198046797, 'w': 0.7999999361723461}
2026-01-21 13:25:55,227 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:25:55,227 - INFO - integration_test -   Planner output success: True
2026-01-21 13:25:55,229 - INFO - integration_test - Step 5 completed in 1.750s
2026-01-21 13:25:55,282 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 13:25:55,283 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-21 13:25:55,283 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 13:25:55,283 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 13:25:55,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:55,382 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 13:25:55,382 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 13:25:55,541 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:55,564 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:55,564 - INFO - integration_test - Warmstart k=0: x0=0.9167519042182386 , y0=0.25382380442377156 , psi0=0.47999999005258376 , v0=2.2000000117873206 , spline0=1.0200000040988608 , a0=0.0 , w0=0.0
2026-01-21 13:25:55,564 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:55,564 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907892857826, 0.35541522164608397, 0.47999999005258376, 2.2000000117873206, 1.2400000052775928], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907892857826, 0.35541522164608397, 0.47999999005258376, 2.2000000117873206, 1.2400000052775928], res_norm=2.823e+00
2026-01-21 13:25:55,565 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:55,566 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:55,581 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:55,717 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:55,737 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:55,780 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:55,800 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:55,848 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:55,867 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:55,909 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:55,928 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:55,971 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:55,989 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:56,032 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:56,053 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:56,096 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:56,114 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:56,158 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:56,178 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:56,222 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:56,242 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:56,283 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:56,302 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:56,344 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:56,916 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 13:25:56,980 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 13:25:56,980 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:25:56,980 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 13:25:56,980 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000184274365, 'w': 0.7999933871628515}
2026-01-21 13:25:56,981 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:25:56,981 - INFO - integration_test -   Planner output success: True
2026-01-21 13:25:56,982 - INFO - integration_test - Step 6 completed in 1.699s
2026-01-21 13:25:57,041 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 13:25:57,041 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.1162309  0.36819138 0.55999933 2.40000001 1.26000001]
2026-01-21 13:25:57,042 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 13:25:57,042 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 13:25:57,045 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:57,140 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 13:25:57,140 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 13:25:57,226 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:57,250 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:57,250 - INFO - integration_test - Warmstart k=0: x0=1.116230904859178 , y0=0.3681913754864583 , psi0=0.5599993287688689 , v0=2.400000013630064 , spline0=1.2600000054618672 , a0=0.0 , w0=0.0
2026-01-21 13:25:57,250 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:57,251 - INFO - integration_test - Dyn residual k=0: pred=[1.3195722182288576, 0.49567592722248943, 0.5599993287688689, 2.400000013630064, 1.5000000068248736], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195722182288576, 0.49567592722248943, 0.5599993287688689, 2.400000013630064, 1.5000000068248736], res_norm=3.211e+00
2026-01-21 13:25:57,252 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:57,253 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:57,266 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,401 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,424 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,467 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,486 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,531 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,550 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,593 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,612 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,657 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,677 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,725 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,743 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,785 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,805 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,850 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,869 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,911 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:57,929 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:57,972 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:57,991 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:58,033 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:58,736 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 13:25:58,878 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 13:25:58,878 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:25:58,878 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 13:25:58,878 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199770813, 'w': -0.17889112964235218}
2026-01-21 13:25:58,878 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:25:58,878 - INFO - integration_test -   Planner output success: True
2026-01-21 13:25:58,879 - INFO - integration_test - Step 7 completed in 1.838s
2026-01-21 13:25:58,937 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 13:25:58,938 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32923686 0.49906077 0.54211022 2.60000002 1.52000001]
2026-01-21 13:25:58,938 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 13:25:58,938 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 13:25:58,941 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:59,036 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 13:25:59,036 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 13:25:59,124 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:25:59,147 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:25:59,147 - INFO - integration_test - Warmstart k=0: x0=1.3292368596270503 , y0=0.4990607687886285 , psi0=0.5421102158046337 , v0=2.600000015627772 , spline0=1.5200000070246444 , a0=0.0 , w0=0.0
2026-01-21 13:25:59,147 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:25:59,148 - INFO - integration_test - Dyn residual k=0: pred=[1.5519585379569327, 0.6332064165546463, 0.5421102158046337, 2.600000015627772, 1.7800000085874217], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5519585379569327, 0.6332064165546463, 0.5421102158046337, 2.600000015627772, 1.7800000085874217], res_norm=3.610e+00
2026-01-21 13:25:59,149 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:59,149 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:25:59,164 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,302 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,321 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,365 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,384 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,429 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,448 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,490 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,511 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,553 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,572 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,616 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,636 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,680 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,698 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,742 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,761 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,805 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:25:59,827 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,870 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:25:59,888 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:25:59,929 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:00,669 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 13:26:00,735 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 13:26:00,735 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:00,735 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 13:26:00,735 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000111467195, 'w': -0.03527177505779103}
2026-01-21 13:26:00,736 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:00,736 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:00,737 - INFO - integration_test - Step 8 completed in 1.799s
2026-01-21 13:26:00,797 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 13:26:00,798 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56077298 0.63795264 0.53858304 2.80000002 1.80000001]
2026-01-21 13:26:00,798 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 13:26:00,798 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 13:26:00,801 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:00,898 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 13:26:00,898 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 13:26:00,987 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:01,010 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:01,010 - INFO - integration_test - Warmstart k=0: x0=1.560772977582316 , y0=0.6379526382837041 , psi0=0.5385830382988546 , v0=2.800000016742444 , spline0=1.800000008698889 , a0=0.0 , w0=0.0
2026-01-21 13:26:01,010 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:01,011 - INFO - integration_test - Dyn residual k=0: pred=[1.8011351517231167, 0.7815702771024937, 0.5385830382988546, 2.800000016742444, 2.0800000103731335], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.8011351517231167, 0.7815702771024937, 0.5385830382988546, 2.800000016742444, 2.0800000103731335], res_norm=4.039e+00
2026-01-21 13:26:01,011 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:01,012 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:01,026 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,246 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,265 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,307 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,326 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,371 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,390 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,435 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,454 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,496 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,514 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,558 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,576 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,619 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,639 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,681 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,699 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,742 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:01,762 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,802 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:01,821 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:01,865 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:02,513 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 13:26:02,578 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 13:26:02,578 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:02,578 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 13:26:02,578 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199956736, 'w': -0.07611715464469807}
2026-01-21 13:26:02,578 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:02,578 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:02,579 - INFO - integration_test - Step 9 completed in 1.782s
2026-01-21 13:26:02,632 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 13:26:02,637 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81028968 0.78573968 0.53097132 3.00000002 2.10000001]
2026-01-21 13:26:02,637 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 13:26:02,637 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 13:26:02,640 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:02,738 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 13:26:02,738 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 13:26:02,831 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:02,857 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:02,857 - INFO - integration_test - Warmstart k=0: x0=1.8102896832803133 , y0=0.7857396766811142 , psi0=0.5309713228343848 , v0=3.0000000187420115 , spline0=2.10000001057309 , a0=0.0 , w0=0.0
2026-01-21 13:26:02,857 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:02,858 - INFO - integration_test - Dyn residual k=0: pred=[2.0689843731460758, 0.9376510276716756, 0.5309713228343848, 3.0000000187420115, 2.400000012447291], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.0689843731460758, 0.9376510276716756, 0.5309713228343848, 3.0000000187420115, 2.400000012447291], res_norm=4.495e+00
2026-01-21 13:26:02,858 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:02,859 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:02,878 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,023 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,046 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,094 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,114 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,161 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,181 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,226 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,249 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,296 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,316 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,360 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,378 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,418 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,440 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,483 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,503 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,546 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:03,564 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,603 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:03,620 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:03,664 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:04,335 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 13:26:04,494 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 13:26:04,494 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:04,494 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 13:26:04,494 - INFO - integration_test -   Control dict from planner: {'a': 1.0308489241042482e-07, 'w': -0.056539351655896616}
2026-01-21 13:26:04,494 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:04,494 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:04,495 - INFO - integration_test - Step 10 completed in 1.859s
2026-01-21 13:26:04,550 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 13:26:04,553 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06941244 0.9369189  0.52531739 3.00000003 2.40000001]
2026-01-21 13:26:04,554 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 13:26:04,554 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 13:26:04,557 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:04,653 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 13:26:04,653 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 13:26:04,739 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:04,761 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:04,761 - INFO - integration_test - Warmstart k=0: x0=2.0694124426330527 , y0=0.936918899020501 , psi0=0.5253173876687951 , v0=3.0000000290505007 , spline0=2.4000000134781403 , a0=0.0 , w0=0.0
2026-01-21 13:26:04,761 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:04,762 - INFO - integration_test - Dyn residual k=0: pred=[2.328961890910694, 1.0873651872492303, 0.5253173876687951, 3.0000000290505007, 2.7000000163831905], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.328961890910694, 1.0873651872492303, 0.5253173876687951, 3.0000000290505007, 2.7000000163831905], res_norm=4.814e+00
2026-01-21 13:26:04,763 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:04,763 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:04,778 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:04,918 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:04,939 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:04,983 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:05,003 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,048 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:05,067 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,109 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:05,127 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,170 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:05,189 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,233 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:05,252 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,294 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:05,314 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,357 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:05,376 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,422 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:05,445 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,488 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:05,506 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:05,547 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:06,125 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 13:26:06,199 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 13:26:06,200 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:06,200 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 13:26:06,200 - INFO - integration_test -   Control dict from planner: {'a': 6.166770188379563e-09, 'w': -0.062311622719253536}
2026-01-21 13:26:06,200 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:06,200 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:06,201 - INFO - integration_test - Step 11 completed in 1.648s
2026-01-21 13:26:06,266 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 13:26:06,267 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32942894 1.08655557 0.51908623 3.00000003 2.70000002]
2026-01-21 13:26:06,267 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 13:26:06,267 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 13:26:06,271 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:06,381 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 13:26:06,381 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 13:26:06,495 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:06,521 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:06,521 - INFO - integration_test - Warmstart k=0: x0=2.3294289374374753 , y0=1.0865555689455 , psi0=0.5190862253968698 , v0=3.0000000296671776 , spline0=2.700000016444858 , a0=0.0 , w0=0.0
2026-01-21 13:26:06,521 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:06,522 - INFO - integration_test - Dyn residual k=0: pred=[2.5899107961406984, 1.2353816522324856, 0.5190862253968698, 3.0000000296671776, 3.000000019411576], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5899107961406984, 1.2353816522324856, 0.5190862253968698, 3.0000000296671776, 3.000000019411576], res_norm=5.148e+00
2026-01-21 13:26:06,523 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:06,524 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:06,541 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:06,693 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:06,714 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:06,760 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:06,781 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:06,829 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:06,852 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:06,898 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:06,919 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:06,964 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:06,984 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:07,029 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:07,052 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:07,117 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:07,144 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:07,194 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:07,216 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:07,265 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:07,286 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:07,330 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:07,348 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:07,388 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:08,328 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 13:26:08,490 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 13:26:08,490 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:08,490 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 13:26:08,490 - INFO - integration_test -   Control dict from planner: {'a': -2.2963119569712682e-07, 'w': -0.06382381712308843}
2026-01-21 13:26:08,490 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:08,490 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:08,491 - INFO - integration_test - Step 12 completed in 2.224s
2026-01-21 13:26:08,544 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 13:26:08,545 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59038396 1.2345494  0.51270384 3.00000001 3.00000002]
2026-01-21 13:26:08,545 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-21 13:26:08,545 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 13:26:08,548 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:08,643 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.870m
2026-01-21 13:26:08,643 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 13:26:08,731 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:08,753 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:08,753 - INFO - integration_test - Warmstart k=0: x0=2.5903839575231697 , y0=1.2345493967652923 , psi0=0.5127038436845609 , v0=3.000000006704058 , spline0=3.000000017115264 , a0=0.0 , w0=0.0
2026-01-21 13:26:08,753 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:08,754 - INFO - integration_test - Dyn residual k=0: pred=[2.851810367329157, 1.381709964371549, 0.5127038436845609, 3.000000006704058, 3.3000000177856696], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.851810367329157, 1.381709964371549, 0.5127038436845609, 3.000000006704058, 3.3000000177856696], res_norm=5.495e+00
2026-01-21 13:26:08,755 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:08,755 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:08,769 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:08,911 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:08,930 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:08,972 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:08,993 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,037 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:09,058 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,105 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:09,125 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,173 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:09,192 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,238 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:09,258 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,300 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:09,320 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,365 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:09,383 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,428 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:09,448 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,490 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:09,508 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:09,551 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:10,256 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 13:26:10,330 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 13:26:10,330 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:10,330 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 13:26:10,330 - INFO - integration_test -   Control dict from planner: {'a': 2.3268683731013864e-07, 'w': -0.05706442259442597}
2026-01-21 13:26:10,330 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:10,330 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:10,332 - INFO - integration_test - Step 13 completed in 1.787s
2026-01-21 13:26:10,389 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 13:26:10,390 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85222883 1.38096326 0.5069974  3.00000003 3.30000002]
2026-01-21 13:26:10,391 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.147m, drift=0.370m)
2026-01-21 13:26:10,391 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 13:26:10,394 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:10,585 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 13:26:10,585 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 13:26:10,673 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:10,695 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:10,695 - INFO - integration_test - Warmstart k=0: x0=2.8522288300233707 , y0=1.3809632609307512 , psi0=0.5069974014251183 , v0=3.000000029972742 , spline0=3.300000020112538 , a0=0.0 , w0=0.0
2026-01-21 13:26:10,695 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:10,696 - INFO - integration_test - Dyn residual k=0: pred=[3.114490744122128, 1.526629627026774, 0.5069974014251183, 3.000000029972742, 3.6000000231098124], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.114490744122128, 1.526629627026774, 0.5069974014251183, 3.000000029972742, 3.6000000231098124], res_norm=5.852e+00
2026-01-21 13:26:10,696 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:10,697 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:10,710 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:10,850 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:10,870 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:10,912 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:10,931 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:10,978 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:10,997 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:11,042 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:11,062 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:11,104 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:11,124 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:11,168 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:11,186 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:11,226 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:11,249 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:11,292 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:11,309 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:11,353 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:11,373 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:11,415 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:11,434 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:11,477 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:12,037 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 13:26:12,112 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 13:26:12,112 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:12,112 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 13:26:12,112 - INFO - integration_test -   Control dict from planner: {'a': -9.564935468083531e-09, 'w': -0.0624081395892856}
2026-01-21 13:26:12,112 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:12,112 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:12,114 - INFO - integration_test - Step 14 completed in 1.723s
2026-01-21 13:26:12,166 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 13:26:12,170 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11494358 1.52581032 0.50075659 3.00000003 3.60000002]
2026-01-21 13:26:12,170 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 13:26:12,170 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 13:26:12,173 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:12,271 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 13:26:12,271 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 13:26:12,360 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:12,383 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:12,383 - INFO - integration_test - Warmstart k=0: x0=3.114943578534882 , y0=1.5258103201914759 , psi0=0.5007565874661897 , v0=3.0000000290162485 , spline0=3.600000023014163 , a0=0.0 , w0=0.0
2026-01-21 13:26:12,383 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:12,383 - INFO - integration_test - Dyn residual k=0: pred=[3.3781094560992213, 1.6698371323715908, 0.5007565874661897, 3.0000000290162485, 3.900000025915788], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3781094560992213, 1.6698371323715908, 0.5007565874661897, 3.0000000290162485, 3.900000025915788], res_norm=6.218e+00
2026-01-21 13:26:12,384 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:12,385 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:12,398 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:12,536 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:12,556 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:12,598 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:12,616 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:12,660 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:12,680 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:12,721 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:12,744 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:12,785 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:12,804 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:12,850 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:12,871 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:12,913 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:12,934 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:12,977 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:12,996 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:13,039 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:13,067 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:13,131 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:13,156 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:13,200 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:14,148 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 13:26:14,328 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 13:26:14,329 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:14,329 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 13:26:14,329 - INFO - integration_test -   Control dict from planner: {'a': 9.836260295565862e-09, 'w': -0.053508318149422425}
2026-01-21 13:26:14,329 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:14,329 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:14,331 - INFO - integration_test - Step 15 completed in 2.161s
2026-01-21 13:26:14,388 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 13:26:14,390 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37849353 1.66913237 0.49540576 3.00000003 3.90000003]
2026-01-21 13:26:14,390 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.147m, drift=0.482m)
2026-01-21 13:26:14,390 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 13:26:14,393 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:14,490 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.669), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 13:26:14,490 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 13:26:14,572 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:14,594 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:14,594 - INFO - integration_test - Warmstart k=0: x0=3.378493531048049 , y0=1.6691323686192558 , psi0=0.49540575565124745 , v0=3.0000000299998746 , spline0=3.9000000260141507 , a0=0.0 , w0=0.0
2026-01-21 13:26:14,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:14,595 - INFO - integration_test - Dyn residual k=0: pred=[3.6424263008753095, 1.811748969375629, 0.49540575565124745, 3.0000000299998746, 4.200000029014138], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.6424263008753095, 1.811748969375629, 0.49540575565124745, 3.0000000299998746, 4.200000029014138], res_norm=6.591e+00
2026-01-21 13:26:14,596 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:14,597 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:14,610 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:14,754 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:14,776 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:14,821 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:14,842 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:14,886 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:14,907 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:14,956 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:14,976 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:15,017 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:15,039 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:15,084 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:15,102 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:15,144 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:15,164 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:15,206 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:15,226 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:15,270 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:15,291 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:15,333 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:15,354 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:15,397 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:15,944 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 13:26:16,028 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 13:26:16,028 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:16,028 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 13:26:16,028 - INFO - integration_test -   Control dict from planner: {'a': -2.1906876247974022e-07, 'w': -0.07400052164691773}
2026-01-21 13:26:16,028 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:16,028 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:16,029 - INFO - integration_test - Step 16 completed in 1.640s
2026-01-21 13:26:16,089 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 13:26:16,092 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64295157 1.81077111 0.4880057  3.00000001 4.20000003]
2026-01-21 13:26:16,092 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.144m, drift=0.294m)
2026-01-21 13:26:16,092 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 13:26:16,095 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:16,206 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 13:26:16,206 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 13:26:16,404 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:16,428 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:16,428 - INFO - integration_test - Warmstart k=0: x0=3.6429515737901355 , y0=1.8107711135549287 , psi0=0.4880057034865557 , v0=3.0000000080929983 , spline0=4.20000002682345 , a0=0.0 , w0=0.0
2026-01-21 13:26:16,428 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:16,429 - INFO - integration_test - Dyn residual k=0: pred=[3.9079324757873106, 1.9514307099653527, 0.4880057034865557, 3.0000000080929983, 4.50000002763275], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9079324757873106, 1.9514307099653527, 0.4880057034865557, 3.0000000080929983, 4.50000002763275], res_norm=6.969e+00
2026-01-21 13:26:16,430 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:16,431 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:16,446 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:16,587 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:16,608 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:16,651 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:16,671 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:16,713 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:16,732 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:16,776 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:16,795 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:16,840 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:16,860 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:16,903 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:16,924 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:16,967 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:16,985 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:17,027 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:17,048 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:17,090 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:17,113 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:17,153 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:17,171 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:17,212 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:17,975 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 13:26:18,079 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 13:26:18,079 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:18,079 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 13:26:18,079 - INFO - integration_test -   Control dict from planner: {'a': 2.1906872000927883e-07, 'w': -0.04064102007827724}
2026-01-21 13:26:18,080 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:18,080 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:18,081 - INFO - integration_test - Step 17 completed in 1.990s
2026-01-21 13:26:18,156 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 13:26:18,159 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90821757 1.95089187 0.4839416  3.00000003 4.50000003]
2026-01-21 13:26:18,159 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 13:26:18,160 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 13:26:18,163 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:18,262 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.951), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 13:26:18,262 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 13:26:18,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:18,377 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:18,377 - INFO - integration_test - Warmstart k=0: x0=3.9082175743925363 , y0=1.9508918692991735 , psi0=0.483941601478728 , v0=3.00000002999987 , spline0=4.500000029823437 , a0=0.0 , w0=0.0
2026-01-21 13:26:18,377 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:18,378 - INFO - integration_test - Dyn residual k=0: pred=[4.173767943371519, 2.0904733986471435, 0.483941601478728, 3.00000002999987, 4.800000032823424], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.173767943371519, 2.0904733986471435, 0.483941601478728, 3.00000002999987, 4.800000032823424], res_norm=7.353e+00
2026-01-21 13:26:18,378 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:18,379 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:18,394 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:18,549 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:18,569 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:18,611 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:18,632 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:18,677 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:18,696 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:18,739 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:18,758 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:18,800 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:18,821 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:18,867 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:18,886 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:18,931 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:18,951 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:18,994 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:19,013 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:19,057 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:19,076 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:19,119 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:19,144 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:19,190 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:19,801 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 13:26:20,004 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 13:26:20,004 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:20,004 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 13:26:20,004 - INFO - integration_test -   Control dict from planner: {'a': -9.553978076872133e-06, 'w': -0.05906478695893782}
2026-01-21 13:26:20,004 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:20,004 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:20,005 - INFO - integration_test - Step 18 completed in 1.847s
2026-01-21 13:26:20,071 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 13:26:20,072 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17417857 2.08968833 0.47803512 2.99999907 4.79999994]
2026-01-21 13:26:20,072 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.127m, drift=0.405m)
2026-01-21 13:26:20,072 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 13:26:20,075 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:20,173 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 13:26:20,173 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 13:26:20,263 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:20,287 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:20,287 - INFO - integration_test - Warmstart k=0: x0=4.174178573449044 , y0=2.089688333485777 , psi0=0.4780351227828342 , v0=2.9999990746020626 , spline0=4.799999937283643 , a0=0.0 , w0=0.0
2026-01-21 13:26:20,287 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:20,288 - INFO - integration_test - Dyn residual k=0: pred=[4.440548656087279, 2.227698925656929, 0.4780351227828342, 2.9999990746020626, 5.0999998447438495], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440548656087279, 2.227698925656929, 0.4780351227828342, 2.9999990746020626, 5.0999998447438495], res_norm=7.741e+00
2026-01-21 13:26:20,288 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:20,289 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:20,303 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,444 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,467 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,508 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,529 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,572 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,591 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,632 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,653 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,695 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,713 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,758 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,777 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,817 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,838 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,882 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,901 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:20,944 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:20,963 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:21,003 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:21,023 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:21,065 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:21,677 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 13:26:21,771 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 13:26:21,771 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:21,771 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 13:26:21,771 - INFO - integration_test -   Control dict from planner: {'a': 9.553978035223679e-06, 'w': -0.06581198206507305}
2026-01-21 13:26:21,771 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:21,771 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:21,772 - INFO - integration_test - Step 19 completed in 1.701s
2026-01-21 13:26:21,836 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 13:26:21,837 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44100091 2.22682144 0.47145392 3.00000003 5.09999994]
2026-01-21 13:26:21,838 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.154m, drift=0.217m)
2026-01-21 13:26:21,838 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 13:26:21,841 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:21,943 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 13:26:21,943 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 13:26:22,151 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:22,174 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:22,174 - INFO - integration_test - Warmstart k=0: x0=4.4410009116498115 , y0=2.2268214372009076 , psi0=0.4714539245763269 , v0=3.000000029999866 , spline0=5.09999994028363 , a0=0.0 , w0=0.0
2026-01-21 13:26:22,174 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:22,175 - INFO - integration_test - Dyn residual k=0: pred=[4.7082735793981065, 2.363076062350667, 0.4714539245763269, 3.000000029999866, 5.399999943283617], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.7082735793981065, 2.363076062350667, 0.4714539245763269, 3.000000029999866, 5.399999943283617], res_norm=8.132e+00
2026-01-21 13:26:22,175 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:22,176 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:22,190 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,344 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,363 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,406 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,425 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,468 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,487 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,533 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,552 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,593 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,610 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,654 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,673 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,715 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,734 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,775 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,793 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,835 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:22,856 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,897 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:22,919 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:22,962 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:23,579 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 13:26:23,680 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 13:26:23,680 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:23,680 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 13:26:23,680 - INFO - integration_test -   Control dict from planner: {'a': -1.3248705422664722e-07, 'w': -0.0474726547782452}
2026-01-21 13:26:23,680 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:23,680 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:23,682 - INFO - integration_test - Step 20 completed in 1.845s
2026-01-21 13:26:23,744 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 13:26:23,745 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70859599 2.36244114 0.46670666 3.00000002 5.39999994]
2026-01-21 13:26:23,746 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 13:26:23,746 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 13:26:23,748 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:23,849 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.709, 2.362), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 13:26:23,849 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 13:26:23,944 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:23,968 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:23,968 - INFO - integration_test - Warmstart k=0: x0=4.708595992740129 , y0=2.362441144304934 , psi0=0.4667066590985024 , v0=3.000000016751161 , spline0=5.399999941958746 , a0=0.0 , w0=0.0
2026-01-21 13:26:23,968 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:23,969 - INFO - integration_test - Dyn residual k=0: pred=[4.9765124820603095, 2.497425423965269, 0.4667066590985024, 3.000000016751161, 5.699999943633862], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.9765124820603095, 2.497425423965269, 0.4667066590985024, 3.000000016751161, 5.699999943633862], res_norm=8.527e+00
2026-01-21 13:26:23,970 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:23,970 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:23,986 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,153 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,175 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,221 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,243 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,289 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,313 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,357 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,378 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,426 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,449 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,498 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,518 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,564 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,586 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,635 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,656 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,700 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:24,720 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,762 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:24,781 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:24,823 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:25,851 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 13:26:26,284 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 13:26:26,285 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:26,285 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 13:26:26,285 - INFO - integration_test -   Control dict from planner: {'a': 1.1967779427282525e-07, 'w': -0.07468264822695686}
2026-01-21 13:26:26,285 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:26,285 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:26,287 - INFO - integration_test - Step 21 completed in 2.542s
2026-01-21 13:26:26,375 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 13:26:26,376 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97701404 2.49642374 0.45923839 3.00000003 5.69999994]
2026-01-21 13:26:26,377 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 13:26:26,377 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 13:26:26,381 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:26,506 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.496), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 13:26:26,506 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 13:26:26,609 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:26,636 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:26,636 - INFO - integration_test - Warmstart k=0: x0=4.977014038928085 , y0=2.4964237384482137 , psi0=0.4592383942758067 , v0=3.00000002871894 , spline0=5.6999999448306395 , a0=0.0 , w0=0.0
2026-01-21 13:26:26,636 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:26,637 - INFO - integration_test - Dyn residual k=0: pred=[5.2459311468137475, 2.62940340159092, 0.4592383942758067, 3.00000002871894, 5.999999947702533], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.2459311468137475, 2.62940340159092, 0.4592383942758067, 3.00000002871894, 5.999999947702533], res_norm=8.924e+00
2026-01-21 13:26:26,638 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:26,639 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:26,654 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:26,814 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:26,836 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:26,880 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:26,900 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:26,946 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:26,966 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:27,012 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:27,035 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:27,081 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:27,102 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:27,147 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:27,168 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:27,212 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:27,234 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:27,277 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:27,301 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:27,347 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:27,368 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:27,415 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:27,438 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:27,485 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:28,175 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 13:26:28,292 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 13:26:28,293 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:28,293 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 13:26:28,293 - INFO - integration_test -   Control dict from planner: {'a': -1.625493648819284e-06, 'w': -0.06570541034777445}
2026-01-21 13:26:28,293 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:28,293 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:28,294 - INFO - integration_test - Step 22 completed in 1.918s
2026-01-21 13:26:28,360 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 13:26:28,361 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24636608 2.62851898 0.45266785 2.99999987 5.99999993]
2026-01-21 13:26:28,362 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.175m, drift=0.140m)
2026-01-21 13:26:28,362 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 13:26:28,365 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:28,468 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 13:26:28,468 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 13:26:28,566 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:28,593 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:28,593 - INFO - integration_test - Warmstart k=0: x0=5.246366077163366 , y0=2.6285189789214347 , psi0=0.45266785324102926 , v0=2.999999866169575 , spline0=5.999999931447597 , a0=0.0 , w0=0.0
2026-01-21 13:26:28,593 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:28,594 - INFO - integration_test - Dyn residual k=0: pred=[5.51615110765272, 2.7597288462867837, 0.45266785324102926, 2.999999866169575, 6.299999918064555], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.51615110765272, 2.7597288462867837, 0.45266785324102926, 2.999999866169575, 6.299999918064555], res_norm=9.324e+00
2026-01-21 13:26:28,595 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:28,596 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:28,613 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:28,774 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:28,795 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:28,839 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:28,862 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:28,907 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:28,927 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:28,972 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:28,994 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:29,038 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:29,059 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:29,104 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:29,123 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:29,165 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:29,188 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:29,231 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:29,254 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:29,299 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:29,319 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:29,359 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:29,377 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:29,419 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:30,059 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 13:26:30,286 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 13:26:30,286 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:30,286 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 13:26:30,286 - INFO - integration_test -   Control dict from planner: {'a': 1.6381793212960466e-06, 'w': -0.04004762308765564}
2026-01-21 13:26:30,286 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:30,287 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:30,288 - INFO - integration_test - Step 23 completed in 1.927s
2026-01-21 13:26:30,344 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 13:26:30,346 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51641313 2.75918829 0.44866309 3.00000003 6.29999993]
2026-01-21 13:26:30,346 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 13:26:30,347 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 13:26:30,349 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:30,450 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.759), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 13:26:30,450 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 13:26:30,537 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:30,559 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:30,559 - INFO - integration_test - Warmstart k=0: x0=5.516413125702499 , y0=2.759188287384406 , psi0=0.4486630909322637 , v0=3.000000029987507 , spline0=6.2999999344463475 , a0=0.0 , w0=0.0
2026-01-21 13:26:30,559 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:30,560 - INFO - integration_test - Dyn residual k=0: pred=[5.786721470459482, 2.8893166876434977, 0.4486630909322637, 3.000000029987507, 6.599999937445098], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.786721470459482, 2.8893166876434977, 0.4486630909322637, 3.000000029987507, 6.599999937445098], res_norm=9.726e+00
2026-01-21 13:26:30,560 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:30,561 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:30,575 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:30,730 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:30,751 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:30,794 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:30,813 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:30,858 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:30,877 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:30,922 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:30,942 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:30,984 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:31,005 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:31,048 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:31,068 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:31,110 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:31,129 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:31,172 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:31,192 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:31,233 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:31,255 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:31,297 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:31,316 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:31,355 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:31,973 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 13:26:32,087 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 13:26:32,087 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:32,087 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 13:26:32,087 - INFO - integration_test -   Control dict from planner: {'a': -3.168752616987497e-07, 'w': 0.7017674795238947}
2026-01-21 13:26:32,087 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:32,087 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:32,089 - INFO - integration_test - Step 24 completed in 1.744s
2026-01-21 13:26:32,155 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 13:26:32,156 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78193554 2.89869069 0.51883984 3.         6.59999993]
2026-01-21 13:26:32,157 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.101m, drift=0.252m)
2026-01-21 13:26:32,157 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 13:26:32,160 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:32,265 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.782, 2.899), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 13:26:32,265 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 13:26:32,503 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:32,527 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:32,527 - INFO - integration_test - Warmstart k=0: x0=5.781935537516233 , y0=2.8986906939281836 , psi0=0.5188398388846531 , v0=2.9999999982999808 , spline0=6.599999934276346 , a0=0.0 , w0=0.0
2026-01-21 13:26:32,527 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:32,528 - INFO - integration_test - Dyn residual k=0: pred=[6.0424540543283145, 3.047452591926401, 0.5188398388846531, 2.9999999982999808, 6.899999934106344], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.0424540543283145, 3.047452591926401, 0.5188398388846531, 2.9999999982999808, 6.899999934106344], res_norm=1.013e+01
2026-01-21 13:26:32,529 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:32,530 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:32,546 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:32,713 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:32,735 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:32,782 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:32,804 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:32,853 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:32,877 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:32,925 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:32,945 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:32,990 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:33,010 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:33,055 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:33,075 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:33,122 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:33,141 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:33,181 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:33,203 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:33,245 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:33,264 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:33,308 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:33,327 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:33,368 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:33,944 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 13:26:34,052 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 13:26:34,052 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:34,052 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 13:26:34,052 - INFO - integration_test -   Control dict from planner: {'a': 2.0140120012494795e-07, 'w': -0.7999803268481632}
2026-01-21 13:26:34,052 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:34,052 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:34,053 - INFO - integration_test - Step 25 completed in 1.897s
2026-01-21 13:26:34,116 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 13:26:34,120 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.04812343 3.03687905 0.43884181 3.00000002 6.89999994]
2026-01-21 13:26:34,120 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.193m, drift=0.064m)
2026-01-21 13:26:34,120 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 13:26:34,123 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:34,219 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.048, 3.037), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 13:26:34,219 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 13:26:34,310 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:34,335 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:34,335 - INFO - integration_test - Warmstart k=0: x0=6.04812343207765 , y0=3.036879045276398 , psi0=0.4388418061998368 , v0=3.0000000184401006 , spline0=6.899999936120356 , a0=0.0 , w0=0.0
2026-01-21 13:26:34,335 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:34,336 - INFO - integration_test - Dyn residual k=0: pred=[6.319696746767327, 3.164346436615782, 0.4388418061998368, 3.0000000184401006, 7.199999937964366], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.319696746767327, 3.164346436615782, 0.4388418061998368, 3.0000000184401006, 7.199999937964366], res_norm=1.053e+01
2026-01-21 13:26:34,337 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:34,338 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:34,351 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:34,507 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:34,526 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:34,566 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:34,584 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:34,628 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:34,646 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:34,692 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:34,712 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:34,754 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:34,774 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:34,819 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:34,839 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:34,888 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:34,909 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:34,951 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:34,973 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:35,016 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:35,036 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:35,078 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:35,097 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:35,138 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:35,741 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 13:26:35,989 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 13:26:35,989 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:35,989 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 13:26:35,989 - INFO - integration_test -   Control dict from planner: {'a': -2.6397579643548598e-05, 'w': -0.799999881947967}
2026-01-21 13:26:35,989 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:35,989 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:35,992 - INFO - integration_test - Step 26 completed in 1.873s
2026-01-21 13:26:36,050 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 13:26:36,051 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.32450302 3.15335333 0.35884182 2.99999738 7.19999967]
2026-01-21 13:26:36,051 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.165m, drift=0.364m)
2026-01-21 13:26:36,052 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 13:26:36,055 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:36,152 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.325, 3.153), path_start=(0.000, 0.000), dist=7.067m
2026-01-21 13:26:36,152 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 13:26:36,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:36,261 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:36,261 - INFO - integration_test - Warmstart k=0: x0=6.324503019163727 , y0=3.1533533283158706 , psi0=0.3588418180050401 , v0=2.9999973786821363 , spline0=7.199999673988569 , a0=0.0 , w0=0.0
2026-01-21 13:26:36,261 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:36,262 - INFO - integration_test - Dyn residual k=0: pred=[6.605394031797184, 3.258710253777596, 0.3588418180050401, 2.9999973786821363, 7.499999411856782], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.605394031797184, 3.258710253777596, 0.3588418180050401, 2.9999973786821363, 7.499999411856782], res_norm=1.094e+01
2026-01-21 13:26:36,263 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:36,264 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:36,278 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,472 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,494 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,537 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,558 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,601 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,619 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,660 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,681 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,725 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,743 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,787 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,808 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,850 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,870 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,917 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,936 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:36,978 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:36,999 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:37,041 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:37,060 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:37,102 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:37,738 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 13:26:37,853 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 13:26:37,853 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:37,854 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 13:26:37,854 - INFO - integration_test -   Control dict from planner: {'a': 2.6430967954815096e-05, 'w': -0.7999454038863654}
2026-01-21 13:26:37,854 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:37,854 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:37,855 - INFO - integration_test - Step 27 completed in 1.804s
2026-01-21 13:26:37,921 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 13:26:37,922 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60930642 3.24736908 0.27884728 3.00000002 7.49999968]
2026-01-21 13:26:37,923 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.144m, drift=0.175m)
2026-01-21 13:26:37,923 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 13:26:37,926 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:38,053 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.609, 3.247), path_start=(0.000, 0.000), dist=7.364m
2026-01-21 13:26:38,053 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 13:26:38,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:38,178 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:38,178 - INFO - integration_test - Warmstart k=0: x0=6.609306424249612 , y0=3.2473690815313794 , psi0=0.2788472776164036 , v0=3.000000021778932 , spline0=7.499999676166462 , a0=0.0 , w0=0.0
2026-01-21 13:26:38,178 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:38,179 - INFO - integration_test - Dyn residual k=0: pred=[6.897718434664962, 3.329943372657078, 0.2788472776164036, 3.000000021778932, 7.7999996783443555], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.897718434664962, 3.329943372657078, 0.2788472776164036, 3.000000021778932, 7.7999996783443555], res_norm=1.134e+01
2026-01-21 13:26:38,180 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:38,180 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:38,195 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,347 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,368 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,411 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,430 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,471 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,491 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,537 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,555 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,598 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,619 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,659 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,679 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,725 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,744 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,787 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,806 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,849 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:38,868 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,914 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:38,933 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:38,973 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:39,628 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 13:26:39,879 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 13:26:39,879 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:39,879 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 13:26:39,880 - INFO - integration_test -   Control dict from planner: {'a': 8.169523214061709e-08, 'w': -0.6186127781145084}
2026-01-21 13:26:39,880 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:39,880 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:39,883 - INFO - integration_test - Step 28 completed in 1.961s
2026-01-21 13:26:39,943 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 13:26:39,944 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.90008778 3.32097279 0.216986   3.00000003 7.79999968]
2026-01-21 13:26:39,944 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.291m, drift=0.013m)
2026-01-21 13:26:39,944 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 13:26:39,947 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:40,045 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.900, 3.321), path_start=(0.000, 0.000), dist=7.658m
2026-01-21 13:26:40,045 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 13:26:40,132 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:40,156 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:40,156 - INFO - integration_test - Warmstart k=0: x0=6.90008778289107 , y0=3.3209727938103106 , psi0=0.21698599980495276 , v0=3.0000000299484553 , spline0=7.799999679161308 , a0=0.0 , w0=0.0
2026-01-21 13:26:40,156 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:40,157 - INFO - integration_test - Dyn residual k=0: pred=[7.193053013768354, 3.3855589788186133, 0.21698599980495276, 3.0000000299484553, 8.099999682156154], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.193053013768354, 3.3855589788186133, 0.21698599980495276, 3.0000000299484553, 8.099999682156154], res_norm=1.174e+01
2026-01-21 13:26:40,157 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:40,158 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:40,172 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,326 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,346 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,390 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,412 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,456 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,474 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,518 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,537 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,579 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,599 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,641 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,659 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,701 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,720 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,761 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,781 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,825 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:40,845 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,887 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:40,907 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:40,948 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:41,818 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 13:26:41,934 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 13:26:41,934 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:41,934 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 13:26:41,934 - INFO - integration_test -   Control dict from planner: {'a': -2.0298703298586298e-05, 'w': 0.799567209162117}
2026-01-21 13:26:41,934 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:41,934 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:41,935 - INFO - integration_test - Step 29 completed in 1.992s
2026-01-21 13:26:41,996 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 13:26:42,006 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.19016019 3.39719619 0.29694272 2.999998   8.09999948]
2026-01-21 13:26:42,006 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.254m, drift=0.287m)
2026-01-21 13:26:42,006 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 13:26:42,009 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:42,110 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.190, 3.397), path_start=(0.000, 0.000), dist=7.952m
2026-01-21 13:26:42,110 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 13:26:42,198 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:42,222 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:42,222 - INFO - integration_test - Warmstart k=0: x0=7.190160187163511 , y0=3.3971961885328317 , psi0=0.29694272072116445 , v0=2.9999980000781252 , spline0=8.09999947916912 , a0=0.0 , w0=0.0
2026-01-21 13:26:42,222 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:42,223 - INFO - integration_test - Dyn residual k=0: pred=[7.4770306491583485, 3.4849755599112817, 0.29694272072116445, 2.9999980000781252, 8.399999279176933], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.4770306491583485, 3.4849755599112817, 0.29694272072116445, 2.9999980000781252, 8.399999279176933], res_norm=1.215e+01
2026-01-21 13:26:42,224 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:42,225 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:42,239 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,393 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,414 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,455 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,474 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,518 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,538 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,580 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,600 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,642 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,662 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,711 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,736 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,797 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,816 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,858 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,877 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,922 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:42,941 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:42,984 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:43,003 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:43,044 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:43,749 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 13:26:44,021 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 13:26:44,021 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:44,021 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 13:26:44,021 - INFO - integration_test -   Control dict from planner: {'a': 2.0264612677430793e-05, 'w': -0.6895920043558611}
2026-01-21 13:26:44,021 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:44,021 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:44,023 - INFO - integration_test - Step 30 completed in 2.017s
2026-01-21 13:26:44,078 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 13:26:44,079 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.47982884 3.47501877 0.22798352 3.00000003 8.39999948]
2026-01-21 13:26:44,080 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.305m, drift=0.099m)
2026-01-21 13:26:44,080 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 13:26:44,083 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:44,215 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.480, 3.475), path_start=(0.000, 0.000), dist=8.248m
2026-01-21 13:26:44,215 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 13:26:44,307 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:44,331 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:44,331 - INFO - integration_test - Warmstart k=0: x0=7.479828839467343 , y0=3.475018771858198 , psi0=0.22798352028557833 , v0=3.000000026539393 , spline0=8.39999948182306 , a0=0.0 , w0=0.0
2026-01-21 13:26:44,331 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:44,332 - INFO - integration_test - Dyn residual k=0: pred=[7.772066080209477, 3.542822877307555, 0.22798352028557833, 3.000000026539393, 8.699999484477], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.772066080209477, 3.542822877307555, 0.22798352028557833, 3.000000026539393, 8.699999484477], res_norm=1.256e+01
2026-01-21 13:26:44,332 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:44,333 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:44,347 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:44,501 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:44,522 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:44,563 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:44,585 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:44,628 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:44,646 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:44,687 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:44,709 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:44,752 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:44,771 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:44,816 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:44,835 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:44,875 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:44,894 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:44,939 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:44,959 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:45,000 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:45,021 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:45,061 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:45,080 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:45,122 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:45,758 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 13:26:45,871 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 13:26:45,871 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:45,871 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 13:26:45,871 - INFO - integration_test -   Control dict from planner: {'a': -4.566979468662979e-06, 'w': 0.6522138852418964}
2026-01-21 13:26:45,871 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:45,871 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:45,872 - INFO - integration_test - Step 31 completed in 1.794s
2026-01-21 13:26:45,937 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 13:26:45,938 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.76964856 3.55230149 0.29320491 2.99999957 8.69999944]
2026-01-21 13:26:45,939 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.389m, drift=0.399m)
2026-01-21 13:26:45,939 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 13:26:45,942 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:46,040 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.770, 3.552), path_start=(0.000, 0.000), dist=8.543m
2026-01-21 13:26:46,040 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 13:26:46,133 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:46,157 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:46,157 - INFO - integration_test - Warmstart k=0: x0=7.769648560950603 , y0=3.5523014922281586 , psi0=0.29320490880976796 , v0=2.999999569841446 , spline0=8.699999438807206 , a0=0.0 , w0=0.0
2026-01-21 13:26:46,157 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:46,158 - INFO - integration_test - Dyn residual k=0: pred=[8.05684527127293, 3.639008030450615, 0.29320490880976796, 2.999999569841446, 8.99999939579135], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.05684527127293, 3.639008030450615, 0.29320490880976796, 2.999999569841446, 8.99999939579135], res_norm=1.297e+01
2026-01-21 13:26:46,158 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:46,159 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:46,173 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,330 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,349 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,392 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,413 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,457 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,476 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,519 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,538 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,584 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,605 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,648 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,666 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,712 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,735 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,775 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,794 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,835 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:46,854 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,895 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:46,915 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:46,956 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:47,642 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 13:26:47,928 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 13:26:47,928 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:47,928 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 13:26:47,928 - INFO - integration_test -   Control dict from planner: {'a': 4.600913722717501e-06, 'w': -0.8000000054917251}
2026-01-21 13:26:47,928 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:47,928 - INFO - integration_test -   Planner output success: True
2026-01-21 13:26:47,929 - INFO - integration_test - Step 32 completed in 1.991s
2026-01-21 13:26:47,987 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 13:26:47,988 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[8.06000546 3.62743384 0.21320491 3.00000003 8.99999944]
2026-01-21 13:26:47,989 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.381m, drift=0.211m)
2026-01-21 13:26:47,989 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 13:26:47,992 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:48,090 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(8.060, 3.627), path_start=(0.000, 0.000), dist=8.839m
2026-01-21 13:26:48,090 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 13:26:48,180 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:48,204 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:48,204 - INFO - integration_test - Warmstart k=0: x0=8.060005464805919 , y0=3.627433836664351 , psi0=0.21320490826059546 , v0=3.000000029932818 , spline0=8.999999441800487 , a0=0.0 , w0=0.0
2026-01-21 13:26:48,204 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:48,205 - INFO - integration_test - Dyn residual k=0: pred=[8.353212807169136, 3.690911834271932, 0.21320490826059546, 3.000000029932818, 9.299999444793768], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.353212807169136, 3.690911834271932, 0.21320490826059546, 3.000000029932818, 9.299999444793768], res_norm=1.338e+01
2026-01-21 13:26:48,206 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:48,207 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:48,220 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,374 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,394 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,435 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,454 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,500 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,520 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,563 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,582 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,626 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,645 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,685 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,708 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,751 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,770 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,812 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,832 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,874 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:48,894 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,938 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:48,956 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:48,999 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:51,891 - WARNING - integration_test - Step 33: MPC solve failed
2026-01-21 13:26:51,891 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:26:52,024 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 13:26:52,025 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:52,025 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 13:26:52,025 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:26:52,025 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:52,025 - INFO - integration_test -   Planner output success: False
2026-01-21 13:26:52,025 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:26:52,026 - INFO - integration_test - Step 33 completed in 4.038s
2026-01-21 13:26:52,087 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 13:26:52,089 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.35321281 3.69091183 0.21320491 3.00000003 9.29999944]
2026-01-21 13:26:52,090 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.464m, drift=0.022m)
2026-01-21 13:26:52,090 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 13:26:52,093 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:52,191 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.353, 3.691), path_start=(0.000, 0.000), dist=9.132m
2026-01-21 13:26:52,191 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 13:26:52,278 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:52,303 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:52,303 - INFO - integration_test - Warmstart k=0: x0=8.353212807169136 , y0=3.690911834271932 , psi0=0.21320490826059546 , v0=3.000000029932818 , spline0=9.299999444793768 , a0=0.0 , w0=0.0
2026-01-21 13:26:52,303 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:52,304 - INFO - integration_test - Dyn residual k=0: pred=[8.646420149532354, 3.7543898318795126, 0.21320490826059546, 3.000000029932818, 9.599999447787049], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.646420149532354, 3.7543898318795126, 0.21320490826059546, 3.000000029932818, 9.599999447787049], res_norm=1.379e+01
2026-01-21 13:26:52,305 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:52,305 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:52,320 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,476 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:52,499 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,542 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:52,560 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,604 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:52,623 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,663 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:52,681 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,725 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:52,745 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,788 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:52,808 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,852 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:52,871 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,917 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:52,937 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:52,982 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:53,002 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:53,042 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:53,060 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:53,103 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:55,801 - WARNING - integration_test - Step 34: MPC solve failed
2026-01-21 13:26:55,801 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 13:26:56,094 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 13:26:56,094 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:26:56,094 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 13:26:56,094 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:26:56,094 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:26:56,094 - INFO - integration_test -   Planner output success: False
2026-01-21 13:26:56,094 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:26:56,096 - INFO - integration_test - Step 34 completed in 4.007s
2026-01-21 13:26:56,157 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 13:26:56,163 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.64642015 3.75438983 0.21320491 3.00000003 9.59999945]
2026-01-21 13:26:56,164 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.509m, drift=0.322m)
2026-01-21 13:26:56,164 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 13:26:56,167 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:56,266 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.646, 3.754), path_start=(0.000, 0.000), dist=9.426m
2026-01-21 13:26:56,267 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 13:26:56,358 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:26:56,380 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:26:56,380 - INFO - integration_test - Warmstart k=0: x0=8.646420149532354 , y0=3.7543898318795126 , psi0=0.21320490826059546 , v0=3.000000029932818 , spline0=9.599999447787049 , a0=0.0 , w0=0.0
2026-01-21 13:26:56,380 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:26:56,381 - INFO - integration_test - Dyn residual k=0: pred=[8.939627491895571, 3.8178678294870934, 0.21320490826059546, 3.000000029932818, 9.89999945078033], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.939627491895571, 3.8178678294870934, 0.21320490826059546, 3.000000029932818, 9.89999945078033], res_norm=1.420e+01
2026-01-21 13:26:56,382 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:56,383 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:26:56,396 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:56,563 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:56,581 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:56,625 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:56,644 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:56,687 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:56,708 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:56,751 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:56,771 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:56,813 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:56,833 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:56,874 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:56,896 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:56,941 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:56,963 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:57,007 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:57,025 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:57,068 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:26:57,087 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:57,129 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:26:57,147 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:26:57,188 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:00,035 - WARNING - integration_test - Step 35: MPC solve failed
2026-01-21 13:27:00,035 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 13:27:00,190 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 13:27:00,191 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:00,191 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 13:27:00,191 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:00,191 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:00,191 - INFO - integration_test -   Planner output success: False
2026-01-21 13:27:00,191 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:00,192 - INFO - integration_test - Step 35 completed in 4.029s
2026-01-21 13:27:00,266 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 13:27:00,268 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.93962749 3.81786783 0.21320491 3.00000003 9.89999945]
2026-01-21 13:27:00,269 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.544m, drift=0.134m)
2026-01-21 13:27:00,269 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 13:27:00,273 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:00,383 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.940, 3.818), path_start=(0.000, 0.000), dist=9.721m
2026-01-21 13:27:00,383 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 13:27:00,657 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:00,682 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:00,682 - INFO - integration_test - Warmstart k=0: x0=8.939627491895571 , y0=3.8178678294870934 , psi0=0.21320490826059546 , v0=3.000000029932818 , spline0=9.89999945078033 , a0=0.0 , w0=0.0
2026-01-21 13:27:00,682 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:00,683 - INFO - integration_test - Dyn residual k=0: pred=[9.232834834258789, 3.881345827094674, 0.21320490826059546, 3.000000029932818, 10.19999945377361], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.232834834258789, 3.881345827094674, 0.21320490826059546, 3.000000029932818, 10.19999945377361], res_norm=1.461e+01
2026-01-21 13:27:00,684 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:00,685 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:00,700 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:00,862 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:00,883 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:00,928 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:00,950 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:00,999 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:01,021 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:01,066 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:01,087 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:01,129 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:01,147 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:01,194 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:01,214 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:01,255 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:01,276 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:01,318 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:01,337 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:01,386 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:01,408 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:01,450 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:01,468 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:01,511 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:04,508 - WARNING - integration_test - Step 36: MPC solve failed
2026-01-21 13:27:04,508 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 13:27:04,666 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 13:27:04,666 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:04,666 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 13:27:04,666 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:04,666 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:04,666 - INFO - integration_test -   Planner output success: False
2026-01-21 13:27:04,666 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:04,667 - INFO - integration_test - Step 36 completed in 4.400s
2026-01-21 13:27:04,745 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 13:27:04,746 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.23283483  3.88134583  0.21320491  3.00000003 10.19999945]
2026-01-21 13:27:04,747 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.633m, drift=0.054m)
2026-01-21 13:27:04,747 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 13:27:04,751 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:04,857 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.233, 3.881), path_start=(0.000, 0.000), dist=10.015m
2026-01-21 13:27:04,857 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.015m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:04,857 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 13:27:04,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:04,981 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:04,981 - INFO - integration_test - Warmstart k=0: x0=9.232834834258789 , y0=3.881345827094674 , psi0=0.21320490826059546 , v0=3.000000029932818 , spline0=10.19999945377361 , a0=0.0 , w0=0.0
2026-01-21 13:27:04,981 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:04,982 - INFO - integration_test - Dyn residual k=0: pred=[9.526042176622006, 3.944823824702255, 0.21320490826059546, 3.000000029932818, 10.499999456766892], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.526042176622006, 3.944823824702255, 0.21320490826059546, 3.000000029932818, 10.499999456766892], res_norm=1.502e+01
2026-01-21 13:27:04,983 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:04,983 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:05,001 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,165 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,187 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,235 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,257 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,307 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,329 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,375 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,397 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,443 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,463 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,510 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,530 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,574 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,595 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,637 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,656 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,699 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:05,719 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,759 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:05,778 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:05,819 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:09,086 - WARNING - integration_test - Step 37: MPC solve failed
2026-01-21 13:27:09,086 - WARNING - integration_test -   Consecutive MPC failures: 5/15
2026-01-21 13:27:09,412 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-21 13:27:09,412 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:09,412 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 13:27:09,412 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:09,412 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:09,412 - INFO - integration_test -   Planner output success: False
2026-01-21 13:27:09,412 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:09,414 - INFO - integration_test - Step 37 completed in 4.667s
2026-01-21 13:27:09,480 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 13:27:09,487 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.52604218  3.94482382  0.21320491  3.00000003 10.49999946]
2026-01-21 13:27:09,487 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.645m, drift=0.246m)
2026-01-21 13:27:09,487 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-21 13:27:09,491 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:09,587 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.526, 3.945), path_start=(0.000, 0.000), dist=10.311m
2026-01-21 13:27:09,587 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.311m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:09,587 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 13:27:09,682 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:09,706 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:09,706 - INFO - integration_test - Warmstart k=0: x0=9.526042176622006 , y0=3.944823824702255 , psi0=0.21320490826059546 , v0=3.000000029932818 , spline0=10.499999456766892 , a0=0.0 , w0=0.0
2026-01-21 13:27:09,706 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:09,707 - INFO - integration_test - Dyn residual k=0: pred=[9.819249518985224, 4.008301822309836, 0.21320490826059546, 3.000000029932818, 10.799999459760173], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.819249518985224, 4.008301822309836, 0.21320490826059546, 3.000000029932818, 10.799999459760173], res_norm=1.543e+01
2026-01-21 13:27:09,707 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:09,708 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:09,723 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:09,876 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:09,897 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:09,944 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:09,965 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,012 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:10,035 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,076 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:10,098 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,141 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:10,160 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,203 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:10,222 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,262 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:10,281 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,328 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:10,350 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,395 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:10,416 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,459 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:10,478 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:10,524 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:12,136 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 13:27:12,296 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-21 13:27:12,296 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:12,296 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 13:27:12,296 - INFO - integration_test -   Control dict from planner: {'a': -1.416417129508548e-07, 'w': 0.7999975320571729}
2026-01-21 13:27:12,296 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:12,296 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:12,298 - INFO - integration_test - Step 38 completed in 2.811s
2026-01-21 13:27:12,361 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 13:27:12,363 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.81639911  4.01995614  0.29320466  3.00000002 10.79999946]
2026-01-21 13:27:12,363 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.684m, drift=0.057m)
2026-01-21 13:27:12,363 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-21 13:27:12,366 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:12,508 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.816, 4.020), path_start=(0.000, 0.000), dist=10.608m
2026-01-21 13:27:12,508 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.608m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:12,508 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 13:27:12,609 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:12,635 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:12,635 - INFO - integration_test - Warmstart k=0: x0=9.816399111753075 , y0=4.019956139225049 , psi0=0.29320466146631274 , v0=3.000000015768647 , spline0=10.799999458343756 , a0=0.0 , w0=0.0
2026-01-21 13:27:12,635 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:12,636 - INFO - integration_test - Dyn residual k=0: pred=[10.103595886211306, 4.106662619299535, 0.29320466146631274, 3.000000015768647, 11.099999459920621], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.103595886211306, 4.106662619299535, 0.29320466146631274, 3.000000015768647, 11.099999459920621], res_norm=1.585e+01
2026-01-21 13:27:12,637 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:12,638 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:12,652 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:12,817 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:12,839 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:12,887 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:12,910 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:12,958 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:12,981 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:13,029 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:13,052 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:13,101 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:13,124 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:13,167 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:13,188 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:13,232 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:13,252 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:13,297 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:13,318 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:13,361 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:13,382 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:13,424 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:13,446 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:13,490 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:16,314 - WARNING - integration_test - Step 39: MPC solve failed
2026-01-21 13:27:16,314 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:27:16,677 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-21 13:27:16,677 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:16,677 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 13:27:16,677 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:16,677 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:16,677 - INFO - integration_test -   Planner output success: False
2026-01-21 13:27:16,677 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:16,678 - INFO - integration_test - Step 39 completed in 4.316s
2026-01-21 13:27:16,745 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 13:27:16,746 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[10.10359589  4.10666262  0.29320466  3.00000002 11.09999946]
2026-01-21 13:27:16,746 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.723m, drift=0.357m)
2026-01-21 13:27:16,747 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-21 13:27:16,751 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:16,856 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(10.104, 4.107), path_start=(0.000, 0.000), dist=10.906m
2026-01-21 13:27:16,856 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.906m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:16,856 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 13:27:16,956 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:16,984 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:16,984 - INFO - integration_test - Warmstart k=0: x0=10.103595886211306 , y0=4.106662619299535 , psi0=0.29320466146631274 , v0=3.000000015768647 , spline0=11.099999459920621 , a0=0.0 , w0=0.0
2026-01-21 13:27:16,984 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:16,985 - INFO - integration_test - Dyn residual k=0: pred=[10.390792660669536, 4.193369099374022, 0.29320466146631274, 3.000000015768647, 11.399999461497487], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.390792660669536, 4.193369099374022, 0.29320466146631274, 3.000000015768647, 11.399999461497487], res_norm=1.627e+01
2026-01-21 13:27:16,986 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:16,987 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:17,004 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,174 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,196 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,240 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,260 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,310 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,329 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,371 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,391 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,436 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,458 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,504 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,525 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,566 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,587 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,630 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,649 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,697 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:17,719 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,770 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:17,792 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:17,837 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:19,056 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 13:27:19,269 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-21 13:27:19,269 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:19,269 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 13:27:19,269 - INFO - integration_test -   Control dict from planner: {'a': 1.4231143915770077e-07, 'w': 0.8000000099705341}
2026-01-21 13:27:19,269 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:19,269 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:19,271 - INFO - integration_test - Step 40 completed in 2.525s
2026-01-21 13:27:19,340 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 13:27:19,349 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.38702001  4.20475839  0.37320466  3.00000003 11.39999946]
2026-01-21 13:27:19,350 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.702m, drift=0.169m)
2026-01-21 13:27:19,350 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-21 13:27:19,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:19,455 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.387, 4.205), path_start=(0.000, 0.000), dist=11.206m
2026-01-21 13:27:19,455 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.206m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:19,455 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 13:27:19,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:19,575 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:19,576 - INFO - integration_test - Warmstart k=0: x0=10.38702001024908 , y0=4.204758389251647 , psi0=0.37320466246336614 , v0=3.0000000299997907 , spline0=11.3999994629206 , a0=0.0 , w0=0.0
2026-01-21 13:27:19,576 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:19,577 - INFO - integration_test - Dyn residual k=0: pred=[10.66636912446945, 4.314138799674547, 0.37320466246336614, 3.0000000299997907, 11.69999946592058], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.66636912446945, 4.314138799674547, 0.37320466246336614, 3.0000000299997907, 11.69999946592058], res_norm=1.669e+01
2026-01-21 13:27:19,577 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:19,578 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:19,593 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:19,755 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:19,778 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:19,822 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:19,845 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:19,893 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:19,913 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:19,957 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:19,979 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:20,023 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:20,045 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:20,087 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:20,108 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:20,154 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:20,173 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:20,216 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:20,235 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:20,280 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:20,300 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:20,341 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:20,359 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:20,406 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:21,601 - INFO - integration_test - Step 41: MPC solve successful
2026-01-21 13:27:22,043 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-21 13:27:22,043 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:22,043 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 13:27:22,043 - INFO - integration_test -   Control dict from planner: {'a': -3.0046919431634455e-07, 'w': 0.7999489497962723}
2026-01-21 13:27:22,043 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:22,043 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:22,045 - INFO - integration_test - Step 41 completed in 2.696s
2026-01-21 13:27:22,128 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 13:27:22,129 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.66169868  4.32518948  0.45319956  3.         11.69999946]
2026-01-21 13:27:22,130 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.702m, drift=0.019m)
2026-01-21 13:27:22,130 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-21 13:27:22,133 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:22,233 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.662, 4.325), path_start=(0.000, 0.000), dist=11.506m
2026-01-21 13:27:22,233 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.506m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:22,233 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 13:27:22,325 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:22,348 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:22,348 - INFO - integration_test - Warmstart k=0: x0=10.661698683241887 , y0=4.325189475029059 , psi0=0.45319955744299334 , v0=2.999999999952871 , spline0=11.699999462915887 , a0=0.0 , w0=0.0
2026-01-21 13:27:22,348 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:22,349 - INFO - integration_test - Dyn residual k=0: pred=[10.931413922789135, 4.456542775532484, 0.45319955744299334, 2.999999999952871, 11.999999462911173], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.931413922789135, 4.456542775532484, 0.45319955744299334, 2.999999999952871, 11.999999462911173], res_norm=1.710e+01
2026-01-21 13:27:22,349 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:22,350 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:22,365 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:22,521 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:22,539 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:22,582 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:22,603 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:22,646 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:22,666 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:22,712 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:22,732 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:22,776 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:22,795 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:22,838 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:22,857 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:22,902 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:22,922 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:22,963 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:22,985 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:23,027 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:23,046 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:23,090 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:23,109 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:23,151 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:24,341 - INFO - integration_test - Step 42: MPC solve successful
2026-01-21 13:27:24,516 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-21 13:27:24,516 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:24,516 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 13:27:24,516 - INFO - integration_test -   Control dict from planner: {'a': 2.972254167062961e-07, 'w': 0.25057255552458046}
2026-01-21 13:27:24,516 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:24,516 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:24,518 - INFO - integration_test - Step 42 completed in 2.389s
2026-01-21 13:27:24,576 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 13:27:24,577 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.92974011  4.45990802  0.47825681  3.00000003 11.99999947]
2026-01-21 13:27:24,578 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.658m, drift=0.281m)
2026-01-21 13:27:24,578 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-21 13:27:24,581 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:24,682 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.930, 4.460), path_start=(0.000, 0.000), dist=11.805m
2026-01-21 13:27:24,682 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.805m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:24,682 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 13:27:24,771 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:24,797 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:24,797 - INFO - integration_test - Warmstart k=0: x0=10.92974011035733 , y0=4.459908016316035 , psi0=0.47825681299545136 , v0=3.000000029675413 , spline0=11.999999465883429 , a0=0.0 , w0=0.0
2026-01-21 13:27:24,797 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:24,798 - INFO - integration_test - Dyn residual k=0: pred=[11.19607967564398, 4.597977700691144, 0.47825681299545136, 3.000000029675413, 12.29999946885097], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.19607967564398, 4.597977700691144, 0.47825681299545136, 3.000000029675413, 12.29999946885097], res_norm=1.752e+01
2026-01-21 13:27:24,798 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:24,799 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:24,814 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:24,972 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:24,995 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,037 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:25,061 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,104 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:25,123 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,165 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:25,183 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,228 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:25,250 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,313 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:25,339 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,388 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:25,409 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,455 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:25,477 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,521 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:25,542 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,583 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:25,604 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:25,644 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:27,438 - INFO - integration_test - Step 43: MPC solve successful
2026-01-21 13:27:27,816 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-21 13:27:27,816 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:27,816 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 13:27:27,816 - INFO - integration_test -   Control dict from planner: {'a': -4.354052848733588e-06, 'w': -0.34021071364832167}
2026-01-21 13:27:27,817 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:27,817 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:27,818 - INFO - integration_test - Step 43 completed in 3.241s
2026-01-21 13:27:27,885 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 13:27:27,890 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[11.19837669  4.59342092  0.44423574  2.99999959 12.29999943]
2026-01-21 13:27:27,890 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.608m, drift=0.092m)
2026-01-21 13:27:27,890 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-21 13:27:27,894 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:27,998 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(11.198, 4.593), path_start=(0.000, 0.000), dist=12.104m
2026-01-21 13:27:27,998 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.104m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:27,998 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 13:27:28,106 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:28,130 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:28,130 - INFO - integration_test - Warmstart k=0: x0=11.198376693581476 , y0=4.593420916599166 , psi0=0.4442357416306192 , v0=2.999999594270128 , spline0=12.29999942531044 , a0=0.0 , w0=0.0
2026-01-21 13:27:28,130 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:28,131 - INFO - integration_test - Dyn residual k=0: pred=[11.469258471786075, 4.722351277232045, 0.4442357416306192, 2.999999594270128, 12.599999384737453], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.469258471786075, 4.722351277232045, 0.4442357416306192, 2.999999594270128, 12.599999384737453], res_norm=1.794e+01
2026-01-21 13:27:28,132 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:28,132 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:28,148 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,307 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,328 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,371 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,392 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,436 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,458 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,509 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,531 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,579 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,601 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,646 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,667 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,711 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,733 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,778 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,800 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,843 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:28,865 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,908 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:28,928 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:28,974 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:30,199 - INFO - integration_test - Step 44: MPC solve successful
2026-01-21 13:27:30,355 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-21 13:27:30,355 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:30,355 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 13:27:30,355 - INFO - integration_test -   Control dict from planner: {'a': 4.3517510287819455e-06, 'w': -0.10346160663390616}
2026-01-21 13:27:30,355 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:30,355 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:30,356 - INFO - integration_test - Step 44 completed in 2.466s
2026-01-21 13:27:30,425 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 13:27:30,427 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.46992062  4.72094771  0.43388958  3.00000003 12.59999943]
2026-01-21 13:27:30,427 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.621m, drift=0.096m)
2026-01-21 13:27:30,427 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-21 13:27:30,432 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:30,542 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.470, 4.721), path_start=(0.000, 0.000), dist=12.403m
2026-01-21 13:27:30,542 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.403m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:30,542 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 13:27:30,643 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:30,666 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:30,666 - INFO - integration_test - Warmstart k=0: x0=11.469920620018893 , y0=4.7209477055781495 , psi0=0.43388958096722857 , v0=3.000000029445231 , spline0=12.599999428254964 , a0=0.0 , w0=0.0
2026-01-21 13:27:30,666 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:30,668 - INFO - integration_test - Dyn residual k=0: pred=[11.74212185026087, 4.847068647619779, 0.43388958096722857, 3.000000029445231, 12.899999431199488], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.74212185026087, 4.847068647619779, 0.43388958096722857, 3.000000029445231, 12.899999431199488], res_norm=1.836e+01
2026-01-21 13:27:30,668 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:30,669 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:30,685 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:30,852 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:30,873 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:30,915 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:30,935 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:30,982 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:31,003 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:31,050 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:31,072 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:31,117 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:31,138 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:31,183 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:31,203 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:31,245 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:31,267 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:31,309 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:31,328 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:31,372 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:31,393 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:31,434 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:31,452 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:31,494 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:32,708 - INFO - integration_test - Step 45: MPC solve successful
2026-01-21 13:27:32,873 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-21 13:27:32,873 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:32,873 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 13:27:32,873 - INFO - integration_test -   Control dict from planner: {'a': -1.475532005260707e-08, 'w': -0.27312706425753175}
2026-01-21 13:27:32,873 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:32,873 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:32,874 - INFO - integration_test - Step 45 completed in 2.448s
2026-01-21 13:27:32,943 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 13:27:32,944 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.74381025  4.84333592  0.40657687  3.00000003 12.89999943]
2026-01-21 13:27:32,944 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.543m, drift=0.204m)
2026-01-21 13:27:32,944 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-21 13:27:32,947 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:33,053 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.744, 4.843), path_start=(0.000, 0.000), dist=12.703m
2026-01-21 13:27:33,053 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.703m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:33,053 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 13:27:33,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:33,180 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:33,180 - INFO - integration_test - Warmstart k=0: x0=11.743810253615381 , y0=4.843335922433902 , psi0=0.4065768745414754 , v0=3.000000027969699 , spline0=12.899999431051935 , a0=0.0 , w0=0.0
2026-01-21 13:27:33,180 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:33,181 - INFO - integration_test - Dyn residual k=0: pred=[12.019354237158954, 4.961976197261303, 0.4065768745414754, 3.000000027969699, 13.199999433848905], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.019354237158954, 4.961976197261303, 0.4065768745414754, 3.000000027969699, 13.199999433848905], res_norm=1.877e+01
2026-01-21 13:27:33,182 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:33,182 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:33,198 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,361 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,381 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,427 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,447 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,491 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,513 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,564 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,588 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,648 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,677 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,734 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,757 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,804 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,825 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,874 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,896 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:33,942 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:33,963 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:34,010 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:34,031 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:34,074 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:34,963 - INFO - integration_test - Step 46: MPC solve successful
2026-01-21 13:27:35,340 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-21 13:27:35,340 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:35,340 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 13:27:35,340 - INFO - integration_test -   Control dict from planner: {'a': -3.9270114930815726e-08, 'w': -0.03331683894139837}
2026-01-21 13:27:35,340 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:35,340 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:35,341 - INFO - integration_test - Step 46 completed in 2.397s
2026-01-21 13:27:35,414 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 13:27:35,421 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[12.01955136  4.96151697  0.40324519  3.00000002 13.19999943]
2026-01-21 13:27:35,422 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.529m, drift=0.016m)
2026-01-21 13:27:35,422 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-21 13:27:35,425 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:35,526 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(12.020, 4.962), path_start=(0.000, 0.000), dist=13.003m
2026-01-21 13:27:35,526 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=13.003m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:35,526 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 13:27:35,619 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:35,645 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:35,645 - INFO - integration_test - Warmstart k=0: x0=12.019551362980568 , y0=4.961516965395889 , psi0=0.40324519064733555 , v0=3.0000000240426874 , spline0=13.199999433456204 , a0=0.0 , w0=0.0
2026-01-21 13:27:35,645 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:35,646 - INFO - integration_test - Dyn residual k=0: pred=[12.295489088040624, 5.079238557855566, 0.40324519064733555, 3.0000000240426874, 13.499999435860474], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.295489088040624, 5.079238557855566, 0.40324519064733555, 3.0000000240426874, 13.499999435860474], res_norm=1.919e+01
2026-01-21 13:27:35,647 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:35,648 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:35,662 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:35,818 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:35,839 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:35,884 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:35,904 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:35,947 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:35,966 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:36,013 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:36,033 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:36,078 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:36,099 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:36,145 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:36,165 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:36,210 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:36,229 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:36,275 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:36,294 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:36,339 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:36,359 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:36,401 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:36,419 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:36,465 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:37,484 - INFO - integration_test - Step 47: MPC solve successful
2026-01-21 13:27:37,686 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-21 13:27:37,686 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:37,686 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 13:27:37,686 - INFO - integration_test -   Control dict from planner: {'a': -5.3478782455023454e-09, 'w': -0.19863788048194567}
2026-01-21 13:27:37,686 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:37,687 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:37,688 - INFO - integration_test - Step 47 completed in 2.267s
2026-01-21 13:27:37,753 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 13:27:37,761 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.2966401   5.07649032  0.3833814   3.00000002 13.49999944]
2026-01-21 13:27:37,761 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.512m, drift=0.316m)
2026-01-21 13:27:37,761 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-21 13:27:37,765 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:37,867 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.297, 5.076), path_start=(0.000, 0.000), dist=13.303m
2026-01-21 13:27:37,867 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.303m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:37,867 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 13:27:37,963 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:37,988 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:37,988 - INFO - integration_test - Warmstart k=0: x0=12.296640102197628 , y0=5.076490322303716 , psi0=0.383381402599141 , v0=3.0000000235078996 , spline0=13.499999435806995 , a0=0.0 , w0=0.0
2026-01-21 13:27:37,988 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:37,989 - INFO - integration_test - Dyn residual k=0: pred=[12.574861633600973, 5.188707882756846, 0.383381402599141, 3.0000000235078996, 13.799999438157785], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.574861633600973, 5.188707882756846, 0.383381402599141, 3.0000000235078996, 13.799999438157785], res_norm=1.961e+01
2026-01-21 13:27:37,989 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:37,990 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:38,005 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,166 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,189 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,234 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,255 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,296 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,315 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,359 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,380 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,421 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,440 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,482 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,500 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,543 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,564 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,607 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,631 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,679 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:38,700 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,746 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:38,767 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:38,821 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:40,057 - INFO - integration_test - Step 48: MPC solve successful
2026-01-21 13:27:40,264 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-21 13:27:40,265 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:40,265 - INFO - integration_test - === Applying control at step 48 ===
2026-01-21 13:27:40,265 - INFO - integration_test -   Control dict from planner: {'a': -4.7090554834848145e-08, 'w': -0.1320380809435624}
2026-01-21 13:27:40,265 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:40,265 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:40,266 - INFO - integration_test - Step 48 completed in 2.506s
2026-01-21 13:27:40,340 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-21 13:27:40,342 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.57559439  5.18686786  0.37017759  3.00000002 13.79999944]
2026-01-21 13:27:40,343 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.460m, drift=0.127m)
2026-01-21 13:27:40,343 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-21 13:27:40,346 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:40,676 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.576, 5.187), path_start=(0.000, 0.000), dist=13.603m
2026-01-21 13:27:40,676 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.603m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:40,676 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-21 13:27:40,779 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:40,804 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:40,804 - INFO - integration_test - Warmstart k=0: x0=12.575594388042783 , y0=5.1868678568530555 , psi0=0.37017759450478477 , v0=3.0000000187988443 , spline0=13.799999437686878 , a0=0.0 , w0=0.0
2026-01-21 13:27:40,804 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:40,805 - INFO - integration_test - Dyn residual k=0: pred=[12.855273322792359, 5.29540215827557, 0.37017759450478477, 3.0000000187988443, 14.099999439566762], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.855273322792359, 5.29540215827557, 0.37017759450478477, 3.0000000187988443, 14.099999439566762], res_norm=2.003e+01
2026-01-21 13:27:40,805 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:40,806 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:40,822 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:40,982 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,003 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,049 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,070 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,114 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,134 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,177 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,196 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,238 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,261 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,302 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,322 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,365 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,384 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,426 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,450 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,494 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:41,514 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,554 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:41,572 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:41,611 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:42,630 - INFO - integration_test - Step 49: MPC solve successful
2026-01-21 13:27:42,808 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-21 13:27:42,808 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:42,808 - INFO - integration_test - === Applying control at step 49 ===
2026-01-21 13:27:42,808 - INFO - integration_test -   Control dict from planner: {'a': 1.1194360971761624e-07, 'w': -0.14892398558919595}
2026-01-21 13:27:42,808 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:42,808 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:42,809 - INFO - integration_test - Step 49 completed in 2.468s
2026-01-21 13:27:42,875 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-21 13:27:42,881 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.85607114  5.29331564  0.3552852   3.00000003 14.09999944]
2026-01-21 13:27:42,882 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.490m, drift=0.061m)
2026-01-21 13:27:42,882 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-21 13:27:42,885 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:42,985 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.856, 5.293), path_start=(0.000, 0.000), dist=13.903m
2026-01-21 13:27:42,985 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.903m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:42,985 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-21 13:27:43,080 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:43,106 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:43,106 - INFO - integration_test - Warmstart k=0: x0=12.856071138505742 , y0=5.293315640072496 , psi0=0.35528519594586516 , v0=3.0000000299932053 , spline0=14.099999440686199 , a0=0.0 , w0=0.0
2026-01-21 13:27:43,106 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:43,107 - INFO - integration_test - Dyn residual k=0: pred=[13.137335337115294, 5.397672970337881, 0.35528519594586516, 3.0000000299932053, 14.39999944368552], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.137335337115294, 5.397672970337881, 0.35528519594586516, 3.0000000299932053, 14.39999944368552], res_norm=2.045e+01
2026-01-21 13:27:43,108 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:43,108 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:43,124 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,283 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,303 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,345 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,365 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,408 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,426 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,473 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,494 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,546 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,573 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,643 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,666 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,712 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,731 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,774 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,793 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,837 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:43,857 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,898 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:43,918 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:43,959 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:45,300 - INFO - integration_test - Step 50: MPC solve successful
2026-01-21 13:27:45,504 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-21 13:27:45,504 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:45,504 - INFO - integration_test - === Applying control at step 50 ===
2026-01-21 13:27:45,504 - INFO - integration_test -   Control dict from planner: {'a': -1.4206664323845763e-06, 'w': -0.1185514823479117}
2026-01-21 13:27:45,504 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:45,504 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:45,506 - INFO - integration_test - Step 50 completed in 2.624s
2026-01-21 13:27:45,571 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-21 13:27:45,577 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.13794732  5.39600333  0.34343005  2.99999989 14.39999943]
2026-01-21 13:27:45,578 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.423m, drift=0.239m)
2026-01-21 13:27:45,578 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-21 13:27:45,581 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:45,686 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.138, 5.396), path_start=(0.000, 0.000), dist=14.203m
2026-01-21 13:27:45,686 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.203m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:45,686 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-21 13:27:45,777 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:45,800 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:45,800 - INFO - integration_test - Warmstart k=0: x0=13.137947320691605 , y0=5.396003328604615 , psi0=0.343430047711074 , v0=2.999999887926562 , spline0=14.399999429478855 , a0=0.0 , w0=0.0
2026-01-21 13:27:45,800 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:45,801 - INFO - integration_test - Dyn residual k=0: pred=[13.420428883722185, 5.497018970083521, 0.343430047711074, 2.999999887926562, 14.699999418271512], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.420428883722185, 5.497018970083521, 0.343430047711074, 2.999999887926562, 14.699999418271512], res_norm=2.087e+01
2026-01-21 13:27:45,802 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:45,803 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:45,816 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:45,973 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:45,991 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,036 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:46,059 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,103 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:46,125 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,170 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:46,188 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,233 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:46,253 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,296 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:46,318 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,363 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:46,381 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,425 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:46,447 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,492 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:46,511 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,552 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:46,570 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:46,611 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:47,640 - INFO - integration_test - Step 51: MPC solve successful
2026-01-21 13:27:48,043 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-21 13:27:48,043 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:48,043 - INFO - integration_test - === Applying control at step 51 ===
2026-01-21 13:27:48,043 - INFO - integration_test -   Control dict from planner: {'a': 1.4200277573082634e-06, 'w': -0.8000000007745127}
2026-01-21 13:27:48,043 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:48,043 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:48,045 - INFO - integration_test - Step 51 completed in 2.468s
2026-01-21 13:27:48,109 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-21 13:27:48,121 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.42416615  5.48561802  0.26343005  3.00000003 14.69999943]
2026-01-21 13:27:48,122 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.423m, drift=0.051m)
2026-01-21 13:27:48,122 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-21 13:27:48,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:48,221 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.424, 5.486), path_start=(0.000, 0.000), dist=14.502m
2026-01-21 13:27:48,221 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.502m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:48,221 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-21 13:27:48,349 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:48,383 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:48,383 - INFO - integration_test - Warmstart k=0: x0=13.424166148456143 , y0=5.485618020301594 , psi0=0.2634300476336227 , v0=3.0000000299293377 , spline0=14.69999943247179 , a0=0.0 , w0=0.0
2026-01-21 13:27:48,383 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:48,384 - INFO - integration_test - Dyn residual k=0: pred=[13.713816900275395, 5.563736160104729, 0.2634300476336227, 3.0000000299293377, 14.999999435464725], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.713816900275395, 5.563736160104729, 0.2634300476336227, 3.0000000299293377, 14.999999435464725], res_norm=2.129e+01
2026-01-21 13:27:48,385 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:48,386 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:48,403 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:48,556 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:48,575 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:48,618 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:48,637 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:48,682 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:48,702 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:48,743 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:48,765 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:48,810 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:48,829 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:48,874 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:48,894 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:48,937 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:48,959 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:48,999 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:49,023 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:49,070 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:49,090 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:49,132 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:49,151 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:49,192 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:50,200 - INFO - integration_test - Step 52: MPC solve successful
2026-01-21 13:27:50,396 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-21 13:27:50,397 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:50,397 - INFO - integration_test - === Applying control at step 52 ===
2026-01-21 13:27:50,397 - INFO - integration_test -   Control dict from planner: {'a': -3.1032636792375195e-08, 'w': -0.7999999888693136}
2026-01-21 13:27:50,397 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:50,397 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:50,398 - INFO - integration_test - Step 52 completed in 2.277s
2026-01-21 13:27:50,470 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-21 13:27:50,471 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.7166311   5.55207301  0.18343005  3.00000003 14.99999944]
2026-01-21 13:27:50,472 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.456m, drift=0.351m)
2026-01-21 13:27:50,472 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-21 13:27:50,475 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:50,572 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.717, 5.552), path_start=(0.000, 0.000), dist=14.798m
2026-01-21 13:27:50,572 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.798m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:50,572 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-21 13:27:50,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:50,684 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:50,684 - INFO - integration_test - Warmstart k=0: x0=13.716631101726897 , y0=5.552073009650611 , psi0=0.18343004874669136 , v0=3.000000026826074 , spline0=14.999999435154397 , a0=0.0 , w0=0.0
2026-01-21 13:27:50,684 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:50,684 - INFO - integration_test - Dyn residual k=0: pred=[14.011598252241944, 5.6067939537817, 0.18343004874669136, 3.000000026826074, 15.299999437837004], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.011598252241944, 5.6067939537817, 0.18343004874669136, 3.000000026826074, 15.299999437837004], res_norm=2.170e+01
2026-01-21 13:27:50,685 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:50,686 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:50,700 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:50,858 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:50,879 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:50,920 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:50,941 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:50,983 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:51,001 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:51,045 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:51,067 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:51,112 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:51,132 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:51,174 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:51,195 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:51,236 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:51,258 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:51,300 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:51,319 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:51,361 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:51,380 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:51,419 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:51,440 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:51,482 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:52,496 - INFO - integration_test - Step 53: MPC solve successful
2026-01-21 13:27:52,697 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-21 13:27:52,697 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:52,697 - INFO - integration_test - === Applying control at step 53 ===
2026-01-21 13:27:52,697 - INFO - integration_test -   Control dict from planner: {'a': 2.7859506253840363e-08, 'w': -0.7999988900325093}
2026-01-21 13:27:52,698 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:52,698 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:52,699 - INFO - integration_test - Step 53 completed in 2.228s
2026-01-21 13:27:52,767 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-21 13:27:52,774 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[14.01347139  5.59494323  0.10343016  3.00000003 15.29999944]
2026-01-21 13:27:52,774 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.452m, drift=0.163m)
2026-01-21 13:27:52,774 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-21 13:27:52,778 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:52,896 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(14.013, 5.595), path_start=(0.000, 0.000), dist=15.089m
2026-01-21 13:27:52,896 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.089m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:52,896 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-21 13:27:53,008 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:53,034 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:53,034 - INFO - integration_test - Warmstart k=0: x0=14.01347139411668 , y0=5.594943225853301 , psi0=0.10343015974344043 , v0=3.0000000296120244 , spline0=15.299999438115599 , a0=0.0 , w0=0.0
2026-01-21 13:27:53,034 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:53,035 - INFO - integration_test - Dyn residual k=0: pred=[14.311868157396363, 5.625916979919127, 0.10343015974344043, 3.0000000296120244, 15.5999994410768], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.311868157396363, 5.625916979919127, 0.10343015974344043, 3.0000000296120244, 15.5999994410768], res_norm=2.211e+01
2026-01-21 13:27:53,036 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:53,037 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:53,053 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,216 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,237 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,281 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,301 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,346 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,365 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,408 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,430 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,475 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,494 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,538 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,559 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,599 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,621 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,665 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,686 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,734 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:53,754 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,798 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:53,818 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:53,863 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:54,954 - INFO - integration_test - Step 54: MPC solve successful
2026-01-21 13:27:55,429 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-21 13:27:55,429 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:55,429 - INFO - integration_test - === Applying control at step 54 ===
2026-01-21 13:27:55,429 - INFO - integration_test -   Control dict from planner: {'a': 1.8851924271607816e-09, 'w': -0.7999999300541829}
2026-01-21 13:27:55,429 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:55,429 - INFO - integration_test -   Planner output success: True
2026-01-21 13:27:55,430 - INFO - integration_test - Step 54 completed in 2.657s
2026-01-21 13:27:55,498 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-21 13:27:55,506 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[14.31278826  5.61395445  0.02343017  3.00000003 15.59999944]
2026-01-21 13:27:55,506 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.554m, drift=0.026m)
2026-01-21 13:27:55,506 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-21 13:27:55,509 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:55,602 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(14.313, 5.614), path_start=(0.000, 0.000), dist=15.374m
2026-01-21 13:27:55,603 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.374m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:55,603 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-21 13:27:55,697 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:55,720 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:55,720 - INFO - integration_test - Warmstart k=0: x0=14.31278826309758 , y0=5.613954447046025 , psi0=0.023430166738022132 , v0=3.000000029800544 , spline0=15.599999441095653 , a0=0.0 , w0=0.0
2026-01-21 13:27:55,720 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:55,721 - INFO - integration_test - Dyn residual k=0: pred=[14.61270592393688, 5.6209828540287905, 0.023430166738022132, 3.000000029800544, 15.899999444075707], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.61270592393688, 5.6209828540287905, 0.023430166738022132, 3.000000029800544, 15.899999444075707], res_norm=2.252e+01
2026-01-21 13:27:55,722 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:55,723 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:55,740 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:55,896 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:55,917 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:55,960 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:55,981 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,023 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:56,045 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,091 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:56,110 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,155 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:56,175 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,218 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:56,239 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,281 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:56,302 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,344 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:56,365 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,408 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:56,428 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,474 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:56,493 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:56,535 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:27:59,306 - WARNING - integration_test - Step 55: MPC solve failed
2026-01-21 13:27:59,306 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:27:59,502 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-21 13:27:59,502 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:27:59,502 - INFO - integration_test - === Applying control at step 55 ===
2026-01-21 13:27:59,502 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:59,502 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:27:59,502 - INFO - integration_test -   Planner output success: False
2026-01-21 13:27:59,502 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:27:59,503 - INFO - integration_test - Step 55 completed in 3.998s
2026-01-21 13:27:59,580 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-21 13:27:59,581 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.61270592  5.62098285  0.02343017  3.00000003 15.89999944]
2026-01-21 13:27:59,581 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.576m, drift=0.274m)
2026-01-21 13:27:59,581 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-21 13:27:59,584 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:59,684 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.613, 5.621), path_start=(0.000, 0.000), dist=15.657m
2026-01-21 13:27:59,684 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.657m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:27:59,684 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-21 13:27:59,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:27:59,798 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:27:59,799 - INFO - integration_test - Warmstart k=0: x0=14.61270592393688 , y0=5.6209828540287905 , psi0=0.023430166738022132 , v0=3.000000029800544 , spline0=15.899999444075707 , a0=0.0 , w0=0.0
2026-01-21 13:27:59,799 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:27:59,799 - INFO - integration_test - Dyn residual k=0: pred=[14.912623584776181, 5.628011261011556, 0.023430166738022132, 3.000000029800544, 16.199999447055763], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.912623584776181, 5.628011261011556, 0.023430166738022132, 3.000000029800544, 16.199999447055763], res_norm=2.292e+01
2026-01-21 13:27:59,800 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:59,801 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:27:59,815 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:27:59,972 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:27:59,991 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,034 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:00,055 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,100 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:00,120 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,165 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:00,184 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,227 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:00,248 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,290 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:00,310 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,352 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:00,371 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,417 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:00,437 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,481 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:00,501 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,542 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:00,562 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:00,602 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:03,988 - WARNING - integration_test - Step 56: MPC solve failed
2026-01-21 13:28:03,988 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 13:28:04,437 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-21 13:28:04,438 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:04,438 - INFO - integration_test - === Applying control at step 56 ===
2026-01-21 13:28:04,438 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:04,438 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:04,438 - INFO - integration_test -   Planner output success: False
2026-01-21 13:28:04,438 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:04,439 - INFO - integration_test - Step 56 completed in 4.859s
2026-01-21 13:28:04,507 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-21 13:28:04,513 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.91262358  5.62801126  0.02343017  3.00000003 16.19999945]
2026-01-21 13:28:04,514 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.649m, drift=0.086m)
2026-01-21 13:28:04,514 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-21 13:28:04,517 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:04,618 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.913, 5.628), path_start=(0.000, 0.000), dist=15.939m
2026-01-21 13:28:04,618 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.939m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:04,618 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-21 13:28:04,706 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:04,732 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:04,732 - INFO - integration_test - Warmstart k=0: x0=14.912623584776181 , y0=5.628011261011556 , psi0=0.023430166738022132 , v0=3.000000029800544 , spline0=16.199999447055763 , a0=0.0 , w0=0.0
2026-01-21 13:28:04,732 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:04,733 - INFO - integration_test - Dyn residual k=0: pred=[15.212541245615482, 5.635039667994322, 0.023430166738022132, 3.000000029800544, 16.49999945003582], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.212541245615482, 5.635039667994322, 0.023430166738022132, 3.000000029800544, 16.49999945003582], res_norm=2.333e+01
2026-01-21 13:28:04,734 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:04,735 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:04,750 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:04,906 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:04,926 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:04,971 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:04,990 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,035 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:05,054 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,098 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:05,117 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,164 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:05,183 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,224 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:05,247 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,291 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:05,309 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,354 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:05,374 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,416 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:05,438 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,478 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:05,495 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:05,537 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:08,294 - WARNING - integration_test - Step 57: MPC solve failed
2026-01-21 13:28:08,294 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 13:28:08,519 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-21 13:28:08,519 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:08,519 - INFO - integration_test - === Applying control at step 57 ===
2026-01-21 13:28:08,519 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:08,519 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:08,519 - INFO - integration_test -   Planner output success: False
2026-01-21 13:28:08,519 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:08,522 - INFO - integration_test - Step 57 completed in 4.009s
2026-01-21 13:28:08,588 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-21 13:28:08,599 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[15.21254125  5.63503967  0.02343017  3.00000003 16.49999945]
2026-01-21 13:28:08,601 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.713m, drift=0.386m)
2026-01-21 13:28:08,601 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-21 13:28:08,604 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:08,701 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(15.213, 5.635), path_start=(0.000, 0.000), dist=16.223m
2026-01-21 13:28:08,701 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.223m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:08,701 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-21 13:28:08,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:08,812 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:08,812 - INFO - integration_test - Warmstart k=0: x0=15.212541245615482 , y0=5.635039667994322 , psi0=0.023430166738022132 , v0=3.000000029800544 , spline0=16.49999945003582 , a0=0.0 , w0=0.0
2026-01-21 13:28:08,813 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:08,813 - INFO - integration_test - Dyn residual k=0: pred=[15.512458906454782, 5.642068074977088, 0.023430166738022132, 3.000000029800544, 16.799999453015875], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.512458906454782, 5.642068074977088, 0.023430166738022132, 3.000000029800544, 16.799999453015875], res_norm=2.374e+01
2026-01-21 13:28:08,816 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:08,817 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:08,832 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:08,990 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,010 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,052 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,072 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,117 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,138 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,185 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,205 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,247 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,269 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,311 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,332 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,376 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,395 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,440 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,460 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,501 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:09,521 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,564 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:09,582 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:09,622 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:12,429 - WARNING - integration_test - Step 58: MPC solve failed
2026-01-21 13:28:12,429 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 13:28:12,624 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-21 13:28:12,625 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:12,625 - INFO - integration_test - === Applying control at step 58 ===
2026-01-21 13:28:12,625 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:12,625 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:12,625 - INFO - integration_test -   Planner output success: False
2026-01-21 13:28:12,625 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:12,626 - INFO - integration_test - Step 58 completed in 4.027s
2026-01-21 13:28:12,704 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-21 13:28:12,704 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.51245891  5.64206807  0.02343017  3.00000003 16.79999945]
2026-01-21 13:28:12,706 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.755m, drift=0.198m)
2026-01-21 13:28:12,706 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-21 13:28:12,709 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:13,058 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.512, 5.642), path_start=(0.000, 0.000), dist=16.507m
2026-01-21 13:28:13,058 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.507m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:13,058 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-21 13:28:13,155 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:13,178 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:13,178 - INFO - integration_test - Warmstart k=0: x0=15.512458906454782 , y0=5.642068074977088 , psi0=0.023430166738022132 , v0=3.000000029800544 , spline0=16.799999453015875 , a0=0.0 , w0=0.0
2026-01-21 13:28:13,178 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:13,179 - INFO - integration_test - Dyn residual k=0: pred=[15.812376567294082, 5.6490964819598535, 0.023430166738022132, 3.000000029800544, 17.09999945599593], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.812376567294082, 5.6490964819598535, 0.023430166738022132, 3.000000029800544, 17.09999945599593], res_norm=2.415e+01
2026-01-21 13:28:13,180 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:13,181 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:13,195 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,356 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,377 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,422 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,443 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,485 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,504 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,549 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,568 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,608 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,627 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,672 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,693 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,738 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,759 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,799 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,817 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,861 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:13,881 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,921 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:13,943 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:13,985 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:17,227 - INFO - integration_test - Step 59: MPC solve successful
2026-01-21 13:28:17,431 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-21 13:28:17,432 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:17,432 - INFO - integration_test - === Applying control at step 59 ===
2026-01-21 13:28:17,432 - INFO - integration_test -   Control dict from planner: {'a': -7.931890507612253e-07, 'w': 0.7999993513180029}
2026-01-21 13:28:17,432 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:17,432 - INFO - integration_test -   Planner output success: True
2026-01-21 13:28:17,433 - INFO - integration_test - Step 59 completed in 4.729s
2026-01-21 13:28:17,499 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-21 13:28:17,505 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.81177577  5.66107929  0.1034301   2.99999995 17.09999945]
2026-01-21 13:28:17,506 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.837m, drift=0.498m)
2026-01-21 13:28:17,507 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-21 13:28:17,509 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:17,610 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.812, 5.661), path_start=(0.000, 0.000), dist=16.795m
2026-01-21 13:28:17,610 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.795m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:17,610 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-21 13:28:17,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:17,723 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:17,723 - INFO - integration_test - Warmstart k=0: x0=15.811775772157123 , y0=5.661079287212511 , psi0=0.10343010186982243 , v0=2.9999999504816386 , spline0=17.09999944806404 , a0=0.0 , w0=0.0
2026-01-21 13:28:17,723 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:17,724 - INFO - integration_test - Dyn residual k=0: pred=[16.110172529358618, 5.692053023192049, 0.10343010186982243, 2.9999999504816386, 17.399999443112204], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.110172529358618, 5.692053023192049, 0.10343010186982243, 2.9999999504816386, 17.399999443112204], res_norm=2.457e+01
2026-01-21 13:28:17,725 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:17,725 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:17,740 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:17,906 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:17,926 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:17,971 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:17,991 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,032 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:18,052 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,094 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:18,114 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,160 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:18,181 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,225 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:18,244 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,287 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:18,306 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,350 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:18,370 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,412 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:18,431 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,472 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:18,492 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:18,533 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:21,559 - WARNING - integration_test - Step 60: MPC solve failed
2026-01-21 13:28:21,559 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:28:21,779 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-21 13:28:21,780 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:21,780 - INFO - integration_test - === Applying control at step 60 ===
2026-01-21 13:28:21,780 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:21,780 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:21,780 - INFO - integration_test -   Planner output success: False
2026-01-21 13:28:21,780 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:21,782 - INFO - integration_test - Step 60 completed in 4.277s
2026-01-21 13:28:21,853 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-21 13:28:21,860 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[16.11017253  5.69205302  0.1034301   2.99999995 17.39999944]
2026-01-21 13:28:21,861 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.830m, drift=0.309m)
2026-01-21 13:28:21,861 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-21 13:28:21,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:21,966 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(16.110, 5.692), path_start=(0.000, 0.000), dist=17.086m
2026-01-21 13:28:21,966 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.086m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:21,966 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-21 13:28:22,056 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:22,079 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:22,079 - INFO - integration_test - Warmstart k=0: x0=16.110172529358618 , y0=5.692053023192049 , psi0=0.10343010186982243 , v0=2.9999999504816386 , spline0=17.399999443112204 , a0=0.0 , w0=0.0
2026-01-21 13:28:22,080 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:22,080 - INFO - integration_test - Dyn residual k=0: pred=[16.408569286560112, 5.723026759171587, 0.10343010186982243, 2.9999999504816386, 17.69999943816037], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.408569286560112, 5.723026759171587, 0.10343010186982243, 2.9999999504816386, 17.69999943816037], res_norm=2.499e+01
2026-01-21 13:28:22,081 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:22,082 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:22,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,270 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,296 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,342 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,362 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,405 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,424 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,466 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,485 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,526 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,548 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,591 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,610 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,654 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,674 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,717 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,741 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,784 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:22,805 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,849 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:22,869 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:22,911 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:24,558 - INFO - integration_test - Step 61: MPC solve successful
2026-01-21 13:28:25,057 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-21 13:28:25,057 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:25,057 - INFO - integration_test - === Applying control at step 61 ===
2026-01-21 13:28:25,057 - INFO - integration_test -   Control dict from planner: {'a': 7.837002333438237e-07, 'w': 0.8000000072560796}
2026-01-21 13:28:25,057 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:25,057 - INFO - integration_test -   Planner output success: True
2026-01-21 13:28:25,058 - INFO - integration_test - Step 61 completed in 3.198s
2026-01-21 13:28:25,125 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-21 13:28:25,137 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.40701282  5.73492324  0.1834301   3.00000003 17.69999945]
2026-01-21 13:28:25,138 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.860m, drift=0.121m)
2026-01-21 13:28:25,140 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-21 13:28:25,144 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:25,244 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.407, 5.735), path_start=(0.000, 0.000), dist=17.380m
2026-01-21 13:28:25,244 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.380m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:25,244 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-21 13:28:25,340 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:25,366 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:25,367 - INFO - integration_test - Warmstart k=0: x0=16.407012817791216 , y0=5.7349232382680535 , psi0=0.18343010259543036 , v0=3.000000028851662 , spline0=17.69999944599737 , a0=0.0 , w0=0.0
2026-01-21 13:28:25,367 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:25,368 - INFO - integration_test - Dyn residual k=0: pred=[16.70197996555877, 5.789644198319699, 0.18343010259543036, 3.000000028851662, 17.999999448882537], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.70197996555877, 5.789644198319699, 0.18343010259543036, 3.000000028851662, 17.999999448882537], res_norm=2.541e+01
2026-01-21 13:28:25,369 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:25,370 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:25,386 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:25,546 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:25,567 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:25,608 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:25,626 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:25,672 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:25,692 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:25,736 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:25,756 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:25,800 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:25,820 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:25,862 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:25,882 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:25,923 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:25,946 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:25,988 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:26,007 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:26,050 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:26,070 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:26,110 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:26,131 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:26,176 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:27,588 - INFO - integration_test - Step 62: MPC solve successful
2026-01-21 13:28:27,827 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-21 13:28:27,827 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:27,827 - INFO - integration_test - === Applying control at step 62 ===
2026-01-21 13:28:27,827 - INFO - integration_test -   Control dict from planner: {'a': -1.999999997578992, 'w': 0.79999993136214}
2026-01-21 13:28:27,827 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:27,827 - INFO - integration_test -   Planner output success: True
2026-01-21 13:28:27,828 - INFO - integration_test - Step 62 completed in 2.692s
2026-01-21 13:28:27,898 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-21 13:28:27,909 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.68975847  5.79903309  0.2634301   2.80000003 17.97999945]
2026-01-21 13:28:27,910 - DEBUG - integration_test - Step 63: Using propagated spline 17.9800 (close to path, dist=0.848m, drift=0.401m)
2026-01-21 13:28:27,911 - DEBUG - integration_test -   Set spline state to 17.9800
2026-01-21 13:28:27,914 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:28,017 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.690, 5.799), path_start=(0.000, 0.000), dist=17.669m
2026-01-21 13:28:28,017 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.669m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:28,017 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-21 13:28:28,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:28,132 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:28,132 - INFO - integration_test - Warmstart k=0: x0=16.68975847172744 , y0=5.7990330913432935 , psi0=0.26343009573164433 , v0=2.8000000290937628 , spline0=17.979999448906746 , a0=0.0 , w0=0.0
2026-01-21 13:28:28,132 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:28,133 - INFO - integration_test - Dyn residual k=0: pred=[16.96009917003054, 5.871943368192604, 0.26343009573164433, 2.8000000290937628, 18.25999945181612], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.96009917003054, 5.871943368192604, 0.26343009573164433, 2.8000000290937628, 18.25999945181612], res_norm=2.576e+01
2026-01-21 13:28:28,134 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:28,135 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:28,153 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,312 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,332 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,377 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,396 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,439 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,461 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,507 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,530 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,575 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,596 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,639 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,660 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,702 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,722 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,767 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,786 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,830 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:28,849 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,891 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:28,911 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:28,956 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:36,990 - WARNING - integration_test - Step 63: MPC solve failed
2026-01-21 13:28:36,990 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:28:37,275 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=17.980)
2026-01-21 13:28:37,276 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:37,276 - INFO - integration_test - === Applying control at step 63 ===
2026-01-21 13:28:37,276 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:37,276 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:37,276 - INFO - integration_test -   Planner output success: False
2026-01-21 13:28:37,276 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:37,277 - INFO - integration_test - Step 63 completed in 9.368s
2026-01-21 13:28:37,349 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-21 13:28:37,359 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.96009917  5.87194337  0.2634301   2.80000003 18.25999945]
2026-01-21 13:28:37,360 - DEBUG - integration_test - Step 64: Using propagated spline 18.2600 (close to path, dist=0.820m, drift=0.193m)
2026-01-21 13:28:37,361 - DEBUG - integration_test -   Set spline state to 18.2600
2026-01-21 13:28:37,364 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:37,467 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.960, 5.872), path_start=(0.000, 0.000), dist=17.948m
2026-01-21 13:28:37,467 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=17.948m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:37,467 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-21 13:28:37,559 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:37,583 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:37,583 - INFO - integration_test - Warmstart k=0: x0=16.96009917003054 , y0=5.871943368192604 , psi0=0.26343009573164433 , v0=2.8000000290937628 , spline0=18.25999945181612 , a0=0.0 , w0=0.0
2026-01-21 13:28:37,583 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:37,584 - INFO - integration_test - Dyn residual k=0: pred=[17.23043986833364, 5.944853645041915, 0.26343009573164433, 2.8000000290937628, 18.539999454725496], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.23043986833364, 5.944853645041915, 0.26343009573164433, 2.8000000290937628, 18.539999454725496], res_norm=2.615e+01
2026-01-21 13:28:37,584 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:37,585 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:37,599 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:37,761 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:37,783 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:37,827 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:37,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:37,892 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:37,914 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:37,958 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:37,978 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:38,022 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:38,042 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:38,086 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:38,106 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:38,150 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:38,171 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:38,216 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:38,237 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:38,281 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:38,300 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:38,341 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:38,363 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:38,403 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:41,122 - WARNING - integration_test - Step 64: MPC solve failed
2026-01-21 13:28:41,122 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 13:28:41,396 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.260)
2026-01-21 13:28:41,396 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:41,396 - INFO - integration_test - === Applying control at step 64 ===
2026-01-21 13:28:41,396 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:41,396 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:41,396 - INFO - integration_test -   Planner output success: False
2026-01-21 13:28:41,396 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:41,398 - INFO - integration_test - Step 64 completed in 4.039s
2026-01-21 13:28:41,469 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-21 13:28:41,476 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[17.23043987  5.94485365  0.2634301   2.80000003 18.53999945]
2026-01-21 13:28:41,477 - DEBUG - integration_test - Step 65: Using propagated spline 18.5400 (close to path, dist=0.816m, drift=0.473m)
2026-01-21 13:28:41,477 - DEBUG - integration_test -   Set spline state to 18.5400
2026-01-21 13:28:41,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:41,583 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(17.230, 5.945), path_start=(0.000, 0.000), dist=18.227m
2026-01-21 13:28:41,583 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.227m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:41,583 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-21 13:28:41,675 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:41,699 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:41,699 - INFO - integration_test - Warmstart k=0: x0=17.23043986833364 , y0=5.944853645041915 , psi0=0.26343009573164433 , v0=2.8000000290937628 , spline0=18.539999454725496 , a0=0.0 , w0=0.0
2026-01-21 13:28:41,699 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:41,700 - INFO - integration_test - Dyn residual k=0: pred=[17.50078056663674, 6.017763921891226, 0.26343009573164433, 2.8000000290937628, 18.81999945763487], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.50078056663674, 6.017763921891226, 0.26343009573164433, 2.8000000290937628, 18.81999945763487], res_norm=2.654e+01
2026-01-21 13:28:41,700 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:41,701 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:41,715 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:41,871 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:41,890 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:41,931 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:41,952 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:41,997 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:42,018 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:42,062 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:42,082 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:42,126 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:42,146 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:42,194 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:42,215 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:42,260 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:42,280 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:42,321 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:42,340 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:42,385 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:42,405 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:42,445 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:42,464 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:42,503 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:44,936 - WARNING - integration_test - Step 65: MPC solve failed
2026-01-21 13:28:44,936 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 13:28:45,242 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.540)
2026-01-21 13:28:45,242 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:45,242 - INFO - integration_test - === Applying control at step 65 ===
2026-01-21 13:28:45,243 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:45,243 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:45,243 - INFO - integration_test -   Planner output success: False
2026-01-21 13:28:45,243 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:28:45,244 - INFO - integration_test - Step 65 completed in 3.768s
2026-01-21 13:28:45,320 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-21 13:28:45,333 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.50078057  6.01776392  0.2634301   2.80000003 18.81999946]
2026-01-21 13:28:45,333 - DEBUG - integration_test - Step 66: Using propagated spline 18.8200 (close to path, dist=0.769m, drift=0.264m)
2026-01-21 13:28:45,334 - DEBUG - integration_test -   Set spline state to 18.8200
2026-01-21 13:28:45,339 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:45,447 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.501, 6.018), path_start=(0.000, 0.000), dist=18.507m
2026-01-21 13:28:45,447 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.507m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:45,447 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-21 13:28:45,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:45,564 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:45,564 - INFO - integration_test - Warmstart k=0: x0=17.50078056663674 , y0=6.017763921891226 , psi0=0.26343009573164433 , v0=2.8000000290937628 , spline0=18.81999945763487 , a0=0.0 , w0=0.0
2026-01-21 13:28:45,564 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:45,565 - INFO - integration_test - Dyn residual k=0: pred=[17.771121264939843, 6.090674198740537, 0.26343009573164433, 2.8000000290937628, 19.099999460544247], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.771121264939843, 6.090674198740537, 0.26343009573164433, 2.8000000290937628, 19.099999460544247], res_norm=2.694e+01
2026-01-21 13:28:45,565 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:45,566 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:45,581 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:45,745 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:45,766 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:45,810 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:45,829 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:45,873 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:45,892 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:45,934 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:45,956 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:46,001 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:46,021 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:46,065 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:46,084 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:46,129 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:46,151 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:46,196 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:46,216 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:46,260 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:46,281 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:46,320 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:46,338 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:46,383 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:47,860 - INFO - integration_test - Step 66: MPC solve successful
2026-01-21 13:28:48,425 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.820)
2026-01-21 13:28:48,425 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:48,425 - INFO - integration_test - === Applying control at step 66 ===
2026-01-21 13:28:48,425 - INFO - integration_test -   Control dict from planner: {'a': 1.9999998324666348, 'w': 0.799996319360073}
2026-01-21 13:28:48,425 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:48,425 - INFO - integration_test -   Planner output success: True
2026-01-21 13:28:48,426 - INFO - integration_test - Step 66 completed in 3.094s
2026-01-21 13:28:48,492 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-21 13:28:48,500 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.77741896  6.10451863  0.34342973  3.00000001 19.11999946]
2026-01-21 13:28:48,500 - DEBUG - integration_test - Step 67: Using propagated spline 19.1200 (close to path, dist=0.772m, drift=0.564m)
2026-01-21 13:28:48,500 - DEBUG - integration_test -   Set spline state to 19.1200
2026-01-21 13:28:48,505 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:48,603 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.777, 6.105), path_start=(0.000, 0.000), dist=18.796m
2026-01-21 13:28:48,603 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.796m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:48,604 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-21 13:28:48,692 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:48,715 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:48,715 - INFO - integration_test - Warmstart k=0: x0=17.777418956456163 , y0=6.104518629460007 , psi0=0.3434297276676516 , v0=3.0000000123404265 , spline0=19.119999458868914 , a0=0.0 , w0=0.0
2026-01-21 13:28:48,715 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:48,716 - INFO - integration_test - Dyn residual k=0: pred=[18.059900563530995, 6.205534184721787, 0.3434297276676516, 3.0000000123404265, 19.419999460102957], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.059900563530995, 6.205534184721787, 0.3434297276676516, 3.0000000123404265, 19.419999460102957], res_norm=2.740e+01
2026-01-21 13:28:48,716 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:48,717 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:48,732 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:48,893 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:48,914 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:48,960 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:48,981 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,024 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:49,043 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,086 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:49,106 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,148 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:49,170 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,215 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:49,237 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,281 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:49,299 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,343 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:49,363 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,407 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:49,427 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,469 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:49,488 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:49,529 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:50,928 - INFO - integration_test - Step 67: MPC solve successful
2026-01-21 13:28:51,189 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.120)
2026-01-21 13:28:51,189 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:51,189 - INFO - integration_test - === Applying control at step 67 ===
2026-01-21 13:28:51,189 - INFO - integration_test -   Control dict from planner: {'a': 1.7470849032614488e-07, 'w': -0.1337280740327795}
2026-01-21 13:28:51,189 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:51,189 - INFO - integration_test -   Planner output success: True
2026-01-21 13:28:51,191 - INFO - integration_test - Step 67 completed in 2.691s
2026-01-21 13:28:51,266 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-21 13:28:51,275 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[18.06056757  6.20364242  0.33005692  3.00000003 19.41999946]
2026-01-21 13:28:51,276 - DEBUG - integration_test - Step 68: Using propagated spline 19.4200 (close to path, dist=0.680m, drift=0.376m)
2026-01-21 13:28:51,277 - DEBUG - integration_test -   Set spline state to 19.4200
2026-01-21 13:28:51,281 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:51,382 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(18.061, 6.204), path_start=(0.000, 0.000), dist=19.096m
2026-01-21 13:28:51,382 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=19.096m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:51,382 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-21 13:28:51,473 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:51,497 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:51,497 - INFO - integration_test - Warmstart k=0: x0=18.06056756569409 , y0=6.203642416319265 , psi0=0.33005692026437367 , v0=3.0000000298112757 , spline0=19.419999461850043 , a0=0.0 , w0=0.0
2026-01-21 13:28:51,497 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:51,498 - INFO - integration_test - Dyn residual k=0: pred=[18.344374737728607, 6.300871480340501, 0.33005692026437367, 3.0000000298112757, 19.719999464831172], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.344374737728607, 6.300871480340501, 0.33005692026437367, 3.0000000298112757, 19.719999464831172], res_norm=2.782e+01
2026-01-21 13:28:51,499 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:51,500 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:51,516 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:51,676 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:51,697 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:51,739 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:51,762 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:51,808 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:51,828 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:51,872 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:51,891 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:51,936 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:51,956 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:52,000 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:52,021 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:52,065 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:52,084 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:52,129 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:52,148 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:52,194 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:52,214 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:52,258 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:52,277 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:52,318 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:53,980 - INFO - integration_test - Step 68: MPC solve successful
2026-01-21 13:28:54,263 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.420)
2026-01-21 13:28:54,264 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:54,264 - INFO - integration_test - === Applying control at step 68 ===
2026-01-21 13:28:54,264 - INFO - integration_test -   Control dict from planner: {'a': -2.5593742390705097e-05, 'w': -0.13669941509365027}
2026-01-21 13:28:54,264 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:54,264 - INFO - integration_test -   Planner output success: True
2026-01-21 13:28:54,265 - INFO - integration_test - Step 68 completed in 2.990s
2026-01-21 13:28:54,333 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-21 13:28:54,335 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[18.34503032  6.29892863  0.31638698  2.99999747 19.71999921]
2026-01-21 13:28:54,336 - DEBUG - integration_test - Step 69: Using propagated spline 19.7200 (close to path, dist=0.654m, drift=0.188m)
2026-01-21 13:28:54,336 - DEBUG - integration_test -   Set spline state to 19.7200
2026-01-21 13:28:54,342 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:54,445 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(18.345, 6.299), path_start=(0.000, 0.000), dist=19.396m
2026-01-21 13:28:54,445 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.396m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:54,445 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-21 13:28:54,539 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:54,563 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:54,563 - INFO - integration_test - Warmstart k=0: x0=18.345030324794656 , y0=6.298928628331713 , psi0=0.31638697875500865 , v0=2.9999974704370365 , spline0=19.719999208893746 , a0=0.0 , w0=0.0
2026-01-21 13:28:54,563 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:54,564 - INFO - integration_test - Dyn residual k=0: pred=[18.6301398110917, 6.39226902178344, 0.31638697875500865, 2.9999974704370365, 20.01999895593745], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.6301398110917, 6.39226902178344, 0.31638697875500865, 2.9999974704370365, 20.01999895593745], res_norm=2.825e+01
2026-01-21 13:28:54,565 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:54,566 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:54,580 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:54,738 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:54,759 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:54,802 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:54,823 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:54,866 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:54,885 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:54,928 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:54,949 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:54,994 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:55,014 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:55,057 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:55,076 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:55,117 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:55,138 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:55,182 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:55,202 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:55,248 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:55,269 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:55,310 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:55,329 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:55,372 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:57,029 - INFO - integration_test - Step 69: MPC solve successful
2026-01-21 13:28:57,459 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.720)
2026-01-21 13:28:57,459 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:28:57,459 - INFO - integration_test - === Applying control at step 69 ===
2026-01-21 13:28:57,460 - INFO - integration_test -   Control dict from planner: {'a': 2.5595111823273316e-05, 'w': -0.20810838017790806}
2026-01-21 13:28:57,460 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:28:57,460 - INFO - integration_test -   Planner output success: True
2026-01-21 13:28:57,462 - INFO - integration_test - Step 69 completed in 3.127s
2026-01-21 13:28:57,538 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-21 13:28:57,540 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.63109056  6.38929575  0.29557614  3.00000003 20.01999921]
2026-01-21 13:28:57,541 - DEBUG - integration_test - Step 70: Using propagated spline 20.0200 (close to path, dist=0.598m, drift=0.488m)
2026-01-21 13:28:57,541 - DEBUG - integration_test -   Set spline state to 20.0200
2026-01-21 13:28:57,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:57,651 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.631, 6.389), path_start=(0.000, 0.000), dist=19.696m
2026-01-21 13:28:57,651 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.696m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:28:57,651 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-21 13:28:58,063 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:28:58,089 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:28:58,089 - INFO - integration_test - Warmstart k=0: x0=18.63109056484604 , y0=6.38929574598131 , psi0=0.29557614073721783 , v0=3.0000000299482186 , spline0=20.019999211888567 , a0=0.0 , w0=0.0
2026-01-21 13:28:58,089 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:28:58,090 - INFO - integration_test - Dyn residual k=0: pred=[18.91808091064873, 6.476683063212967, 0.29557614073721783, 3.0000000299482186, 20.31999921488339], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.91808091064873, 6.476683063212967, 0.29557614073721783, 3.0000000299482186, 20.31999921488339], res_norm=2.867e+01
2026-01-21 13:28:58,091 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:58,092 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:28:58,107 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,279 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,299 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,344 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,365 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,411 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,430 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,474 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,494 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,538 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,559 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,603 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,623 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,669 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,691 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,734 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,756 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,800 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:28:58,818 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,869 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:28:58,890 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:28:58,933 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:00,783 - INFO - integration_test - Step 70: MPC solve successful
2026-01-21 13:29:01,180 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=20.020)
2026-01-21 13:29:01,181 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:01,181 - INFO - integration_test - === Applying control at step 70 ===
2026-01-21 13:29:01,181 - INFO - integration_test -   Control dict from planner: {'a': -1.2132803225683569e-07, 'w': -0.086038452171392}
2026-01-21 13:29:01,181 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:01,181 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:01,182 - INFO - integration_test - Step 70 completed in 3.642s
2026-01-21 13:29:01,262 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-21 13:29:01,276 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.9184533   6.47544738  0.2869723   3.00000002 20.31999921]
2026-01-21 13:29:01,277 - DEBUG - integration_test - Step 71: Using propagated spline 20.3200 (close to path, dist=0.552m, drift=0.300m)
2026-01-21 13:29:01,277 - DEBUG - integration_test -   Set spline state to 20.3200
2026-01-21 13:29:01,283 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:01,419 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.918, 6.475), path_start=(0.000, 0.000), dist=19.996m
2026-01-21 13:29:01,419 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.996m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:01,419 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-21 13:29:01,544 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:01,571 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:01,571 - INFO - integration_test - Warmstart k=0: x0=18.918453300439158 , y0=6.475447382244984 , psi0=0.28697229552007864 , v0=3.0000000178154154 , spline0=20.31999921367011 , a0=0.0 , w0=0.0
2026-01-21 13:29:01,571 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:01,573 - INFO - integration_test - Dyn residual k=0: pred=[19.20618488042329, 6.560362274630008, 0.28697229552007864, 3.0000000178154154, 20.61999921545165], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.20618488042329, 6.560362274630008, 0.28697229552007864, 3.0000000178154154, 20.61999921545165], res_norm=2.909e+01
2026-01-21 13:29:01,574 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:01,575 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:01,599 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:01,804 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:01,827 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:01,871 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:01,891 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:01,931 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:01,953 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:01,999 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:02,018 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:02,063 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:02,083 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:02,126 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:02,147 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:02,192 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:02,213 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:02,263 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:02,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:02,326 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:02,348 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:02,393 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:02,415 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:02,463 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:04,229 - INFO - integration_test - Step 71: MPC solve successful
2026-01-21 13:29:04,602 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=20.320)
2026-01-21 13:29:04,602 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:04,602 - INFO - integration_test - === Applying control at step 71 ===
2026-01-21 13:29:04,602 - INFO - integration_test -   Control dict from planner: {'a': 1.218405601873256e-07, 'w': -0.09265063841692217}
2026-01-21 13:29:04,603 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:04,603 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:04,604 - INFO - integration_test - Step 71 completed in 3.328s
2026-01-21 13:29:04,678 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-21 13:29:04,689 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[19.20657413  6.55902814  0.27770723  3.00000003 20.61999922]
2026-01-21 13:29:04,690 - DEBUG - integration_test - Step 72: Using propagated spline 20.6200 (close to path, dist=0.544m, drift=0.600m)
2026-01-21 13:29:04,690 - DEBUG - integration_test -   Set spline state to 20.6200
2026-01-21 13:29:04,694 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:04,801 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(19.207, 6.559), path_start=(0.000, 0.000), dist=20.296m
2026-01-21 13:29:04,801 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=20.296m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:04,801 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-21 13:29:04,902 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:04,924 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:04,924 - INFO - integration_test - Warmstart k=0: x0=19.20657413261529 , y0=6.55902814374135 , psi0=0.2777072316783864 , v0=3.0000000299994714 , spline0=20.619999216670056 , a0=0.0 , w0=0.0
2026-01-21 13:29:04,925 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:04,925 - INFO - integration_test - Dyn residual k=0: pred=[19.495080094860782, 6.641273578561599, 0.2777072316783864, 3.0000000299994714, 20.919999219670004], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.495080094860782, 6.641273578561599, 0.2777072316783864, 3.0000000299994714, 20.919999219670004], res_norm=2.951e+01
2026-01-21 13:29:04,926 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:04,927 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:04,943 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,111 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,132 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,181 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,201 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,249 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,272 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,318 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,338 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,385 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,407 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,453 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,473 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,520 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,542 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,585 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,606 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,651 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:05,671 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,714 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:05,735 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:05,777 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:07,314 - INFO - integration_test - Step 72: MPC solve successful
2026-01-21 13:29:07,707 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.620)
2026-01-21 13:29:07,707 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:07,707 - INFO - integration_test - === Applying control at step 72 ===
2026-01-21 13:29:07,707 - INFO - integration_test -   Control dict from planner: {'a': -1.1182946271982218e-06, 'w': -0.052229783309557236}
2026-01-21 13:29:07,707 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:07,707 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:07,709 - INFO - integration_test - Step 72 completed in 3.020s
2026-01-21 13:29:07,781 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-21 13:29:07,788 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[19.49529356  6.64051977  0.27248425  2.99999992 20.91999921]
2026-01-21 13:29:07,788 - DEBUG - integration_test - Step 73: Using propagated spline 20.9200 (close to path, dist=0.464m, drift=0.411m)
2026-01-21 13:29:07,788 - DEBUG - integration_test -   Set spline state to 20.9200
2026-01-21 13:29:07,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:07,904 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(19.495, 6.641), path_start=(0.000, 0.000), dist=20.595m
2026-01-21 13:29:07,904 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.595m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:07,904 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-21 13:29:08,003 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:08,027 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:08,027 - INFO - integration_test - Warmstart k=0: x0=19.495293560337252 , y0=6.640519774630379 , psi0=0.2724842533474307 , v0=2.9999999181700088 , spline0=20.919999208487056 , a0=0.0 , w0=0.0
2026-01-21 13:29:08,028 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:08,028 - INFO - integration_test - Dyn residual k=0: pred=[19.784225140842583, 6.721257231098188, 0.2724842533474307, 2.9999999181700088, 21.219999200304056], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.784225140842583, 6.721257231098188, 0.2724842533474307, 2.9999999181700088, 21.219999200304056], res_norm=2.993e+01
2026-01-21 13:29:08,029 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:08,030 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:08,045 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,211 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,234 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,281 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,302 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,347 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,367 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,411 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,433 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,477 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,500 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,543 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,561 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,605 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,628 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,674 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,694 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,738 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:08,757 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,798 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:08,820 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:08,863 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:10,141 - INFO - integration_test - Step 73: MPC solve successful
2026-01-21 13:29:10,886 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.920)
2026-01-21 13:29:10,886 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:10,886 - INFO - integration_test - === Applying control at step 73 ===
2026-01-21 13:29:10,886 - INFO - integration_test -   Control dict from planner: {'a': 1.111400504773906e-06, 'w': -0.05305816466811657}
2026-01-21 13:29:10,886 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:10,886 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:10,887 - INFO - integration_test - Step 73 completed in 3.100s
2026-01-21 13:29:10,965 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-21 13:29:10,978 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.78443798  6.72049035  0.26717844  3.00000003 21.21999921]
2026-01-21 13:29:10,981 - DEBUG - integration_test - Step 74: Using propagated spline 21.2200 (close to path, dist=0.483m, drift=0.223m)
2026-01-21 13:29:10,982 - DEBUG - integration_test -   Set spline state to 21.2200
2026-01-21 13:29:10,986 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:11,111 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.784, 6.720), path_start=(0.000, 0.000), dist=20.895m
2026-01-21 13:29:11,111 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=20.895m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:11,111 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-21 13:29:11,214 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:11,240 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:11,240 - INFO - integration_test - Warmstart k=0: x0=19.78443797911036 , y0=6.720490346588772 , psi0=0.26717843688061904 , v0=3.0000000293100593 , spline0=21.219999211418063 , a0=0.0 , w0=0.0
2026-01-21 13:29:11,240 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:11,241 - INFO - integration_test - Dyn residual k=0: pred=[20.073793879505093, 6.799693658800813, 0.26717843688061904, 3.0000000293100593, 21.51999921434907], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.073793879505093, 6.799693658800813, 0.26717843688061904, 3.0000000293100593, 21.51999921434907], res_norm=3.035e+01
2026-01-21 13:29:11,242 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:11,243 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:11,259 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:11,452 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:11,484 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:11,540 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:11,560 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:11,603 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:11,625 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:11,672 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:11,691 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:11,740 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:11,761 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:11,810 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:11,832 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:11,876 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:11,897 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:11,939 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:11,959 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:12,007 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:12,030 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:12,076 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:12,097 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:12,142 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:13,756 - INFO - integration_test - Step 74: MPC solve successful
2026-01-21 13:29:14,195 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=21.220)
2026-01-21 13:29:14,196 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:14,196 - INFO - integration_test - === Applying control at step 74 ===
2026-01-21 13:29:14,196 - INFO - integration_test -   Control dict from planner: {'a': -1.1403124223715538e-07, 'w': -0.03531517723876383}
2026-01-21 13:29:14,196 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:14,196 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:14,197 - INFO - integration_test - Step 74 completed in 3.219s
2026-01-21 13:29:14,287 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-21 13:29:14,288 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[20.07393313  6.79918256  0.26364692  3.00000002 21.51999921]
2026-01-21 13:29:14,289 - DEBUG - integration_test - Step 75: Using propagated spline 21.5200 (close to path, dist=0.393m, drift=0.523m)
2026-01-21 13:29:14,290 - DEBUG - integration_test -   Set spline state to 21.5200
2026-01-21 13:29:14,295 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:14,416 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(20.074, 6.799), path_start=(0.000, 0.000), dist=21.194m
2026-01-21 13:29:14,417 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=21.194m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:14,417 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-21 13:29:14,516 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:14,541 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:14,541 - INFO - integration_test - Warmstart k=0: x0=20.073933131304273 , y0=6.79918256180509 , psi0=0.26364691915674265 , v0=3.000000017906935 , spline0=21.519999213208756 , a0=0.0 , w0=0.0
2026-01-21 13:29:14,542 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:14,542 - INFO - integration_test - Dyn residual k=0: pred=[20.36356693355139, 6.877363516457069, 0.26364691915674265, 3.000000017906935, 21.81999921499945], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.36356693355139, 6.877363516457069, 0.26364691915674265, 3.000000017906935, 21.81999921499945], res_norm=3.078e+01
2026-01-21 13:29:14,543 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:14,544 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:14,558 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:14,730 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:14,753 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:14,797 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:14,820 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:14,880 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:14,911 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:14,965 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:14,990 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:15,041 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:15,066 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:15,117 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:15,142 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:15,193 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:15,216 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:15,275 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:15,301 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:15,352 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:15,376 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:15,428 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:15,454 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:15,505 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:17,102 - INFO - integration_test - Step 75: MPC solve successful
2026-01-21 13:29:17,759 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.520)
2026-01-21 13:29:17,759 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:17,760 - INFO - integration_test - === Applying control at step 75 ===
2026-01-21 13:29:17,760 - INFO - integration_test -   Control dict from planner: {'a': -7.186150115689623e-09, 'w': -0.04166080667164659}
2026-01-21 13:29:17,760 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:17,760 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:17,761 - INFO - integration_test - Step 75 completed in 3.473s
2026-01-21 13:29:17,853 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-21 13:29:17,866 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[20.36372895  6.87675997  0.25948084  3.00000002 21.81999921]
2026-01-21 13:29:17,866 - DEBUG - integration_test - Step 76: Using propagated spline 21.8200 (close to path, dist=0.379m, drift=0.335m)
2026-01-21 13:29:17,866 - DEBUG - integration_test -   Set spline state to 21.8200
2026-01-21 13:29:17,875 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:18,013 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(20.364, 6.877), path_start=(0.000, 0.000), dist=21.494m
2026-01-21 13:29:18,013 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.494m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:18,013 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-21 13:29:18,139 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:18,171 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:18,171 - INFO - integration_test - Warmstart k=0: x0=20.363728949538686 , y0=6.876759972274154 , psi0=0.259480838489578 , v0=3.00000001718832 , spline0=21.819999214927588 , a0=0.0 , w0=0.0
2026-01-21 13:29:18,171 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:18,172 - INFO - integration_test - Dyn residual k=0: pred=[20.653685945466346, 6.95373361415178, 0.259480838489578, 3.00000001718832, 22.11999921664642], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.653685945466346, 6.95373361415178, 0.259480838489578, 3.00000001718832, 22.11999921664642], res_norm=3.120e+01
2026-01-21 13:29:18,173 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:18,174 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:18,192 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:18,398 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:18,427 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:18,480 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:18,505 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:18,566 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:18,590 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:18,645 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:18,667 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:18,720 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:18,747 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:18,803 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:18,830 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:18,882 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:18,905 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:18,956 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:18,978 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:19,031 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:19,055 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:19,107 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:19,131 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:19,181 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:20,554 - INFO - integration_test - Step 76: MPC solve successful
2026-01-21 13:29:21,532 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.820)
2026-01-21 13:29:21,532 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:21,532 - INFO - integration_test - === Applying control at step 76 ===
2026-01-21 13:29:21,532 - INFO - integration_test -   Control dict from planner: {'a': 1.281077738599926e-07, 'w': -0.06642740208982961}
2026-01-21 13:29:21,532 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:21,533 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:21,534 - INFO - integration_test - Step 76 completed in 3.669s
2026-01-21 13:29:21,609 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-21 13:29:21,610 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[20.65393947  6.95277     0.2528381   3.00000003 22.11999922]
2026-01-21 13:29:21,611 - DEBUG - integration_test - Step 77: Using propagated spline 22.1200 (close to path, dist=0.346m, drift=0.635m)
2026-01-21 13:29:21,611 - DEBUG - integration_test -   Set spline state to 22.1200
2026-01-21 13:29:21,617 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:21,720 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(20.654, 6.953), path_start=(0.000, 0.000), dist=21.793m
2026-01-21 13:29:21,720 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=21.793m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:21,720 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-21 13:29:21,824 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:21,848 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:21,848 - INFO - integration_test - Warmstart k=0: x0=20.65393947066366 , y0=6.952769997268342 , psi0=0.252838098280595 , v0=3.0000000299990974 , spline0=22.119999217927496 , a0=0.0 , w0=0.0
2026-01-21 13:29:21,848 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:21,849 - INFO - integration_test - Dyn residual k=0: pred=[20.94440138267991, 7.027815846372804, 0.252838098280595, 3.0000000299990974, 22.419999220927405], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.94440138267991, 7.027815846372804, 0.252838098280595, 3.0000000299990974, 22.419999220927405], res_norm=3.162e+01
2026-01-21 13:29:21,850 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:21,851 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:21,866 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,037 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,061 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,105 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,127 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,174 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,195 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,243 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,264 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,314 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,338 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,385 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,407 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,454 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,475 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,516 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,537 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,583 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:22,602 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,645 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:22,665 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:22,708 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:24,501 - INFO - integration_test - Step 77: MPC solve successful
2026-01-21 13:29:24,850 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=22.120)
2026-01-21 13:29:24,850 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:24,850 - INFO - integration_test - === Applying control at step 77 ===
2026-01-21 13:29:24,850 - INFO - integration_test -   Control dict from planner: {'a': -4.320402707231259e-06, 'w': -0.06732974093570113}
2026-01-21 13:29:24,850 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:24,850 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:24,851 - INFO - integration_test - Step 77 completed in 3.242s
2026-01-21 13:29:24,927 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-21 13:29:24,928 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[20.94465181  7.02683744  0.24610512  2.9999996  22.41999918]
2026-01-21 13:29:24,929 - DEBUG - integration_test - Step 78: Using propagated spline 22.4200 (close to path, dist=0.284m, drift=0.446m)
2026-01-21 13:29:24,929 - DEBUG - integration_test -   Set spline state to 22.4200
2026-01-21 13:29:24,937 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:25,049 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(20.945, 7.027), path_start=(0.000, 0.000), dist=22.092m
2026-01-21 13:29:25,049 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=22.092m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:25,049 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-21 13:29:25,149 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:25,174 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:25,174 - INFO - integration_test - Warmstart k=0: x0=20.9446518070883 , y0=7.026837441485738 , psi0=0.2461051241870249 , v0=2.9999995979588268 , spline0=22.41999917772338 , a0=0.0 , w0=0.0
2026-01-21 13:29:25,174 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:25,175 - INFO - integration_test - Dyn residual k=0: pred=[21.235612371421162, 7.099925921293667, 0.2461051241870249, 2.9999995979588268, 22.719999137519263], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.235612371421162, 7.099925921293667, 0.2461051241870249, 2.9999995979588268, 22.719999137519263], res_norm=3.204e+01
2026-01-21 13:29:25,175 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:25,176 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:25,191 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,364 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,386 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,434 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,458 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,534 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,561 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,613 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,633 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,677 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,696 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,738 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,759 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,804 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,823 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,870 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,890 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,932 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:25,954 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:25,998 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:26,018 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:26,065 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:27,534 - INFO - integration_test - Step 78: MPC solve successful
2026-01-21 13:29:28,026 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=22.420)
2026-01-21 13:29:28,026 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:28,027 - INFO - integration_test - === Applying control at step 78 ===
2026-01-21 13:29:28,027 - INFO - integration_test -   Control dict from planner: {'a': -1.1945341380043422, 'w': -0.14096705568041099}
2026-01-21 13:29:28,027 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:28,027 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:28,028 - INFO - integration_test - Step 78 completed in 3.100s
2026-01-21 13:29:28,103 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-21 13:29:28,111 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[21.23031179  7.09647214  0.23200842  2.88054618 22.7080538 ]
2026-01-21 13:29:28,111 - DEBUG - integration_test - Step 79: Using propagated spline 22.7081 (close to path, dist=0.330m, drift=0.734m)
2026-01-21 13:29:28,111 - DEBUG - integration_test -   Set spline state to 22.7081
2026-01-21 13:29:28,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:28,231 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(21.230, 7.096), path_start=(0.000, 0.000), dist=22.385m
2026-01-21 13:29:28,231 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=22.385m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:28,231 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-21 13:29:28,331 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:28,358 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:28,358 - INFO - integration_test - Warmstart k=0: x0=21.23031178688562 , y0=7.096472140198662 , psi0=0.2320084186189838 , v0=2.8805461841583924 , spline0=22.708053796139218 , a0=0.0 , w0=0.0
2026-01-21 13:29:28,358 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:28,359 - INFO - integration_test - Dyn residual k=0: pred=[21.510648430373983, 7.162705285287598, 0.2320084186189838, 2.8805461841583924, 22.996108414555056], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.510648430373983, 7.162705285287598, 0.2320084186189838, 2.8805461841583924, 22.996108414555056], res_norm=3.242e+01
2026-01-21 13:29:28,360 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:28,361 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:28,376 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:28,543 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:28,562 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:28,603 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:28,624 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:28,674 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:28,695 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:28,742 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:28,763 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:28,808 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:28,831 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:28,879 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:28,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:28,949 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:28,971 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:29,015 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:29,039 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:29,087 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:29,108 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:29,152 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:29,172 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:29,215 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:30,601 - INFO - integration_test - Step 79: MPC solve successful
2026-01-21 13:29:31,137 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.708)
2026-01-21 13:29:31,137 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:31,137 - INFO - integration_test - === Applying control at step 79 ===
2026-01-21 13:29:31,138 - INFO - integration_test -   Control dict from planner: {'a': -2.000000016236028, 'w': -0.7999999941813161}
2026-01-21 13:29:31,138 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:31,138 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:31,140 - INFO - integration_test - Step 79 completed in 3.029s
2026-01-21 13:29:31,227 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-21 13:29:31,242 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[21.50315837  7.14965022  0.15200842  2.68054618 22.97610841]
2026-01-21 13:29:31,242 - DEBUG - integration_test - Step 80: Using propagated spline 22.9761 (close to path, dist=0.225m, drift=0.514m)
2026-01-21 13:29:31,243 - DEBUG - integration_test -   Set spline state to 22.9761
2026-01-21 13:29:31,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:31,387 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(21.503, 7.150), path_start=(0.000, 0.000), dist=22.661m
2026-01-21 13:29:31,387 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=22.661m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:29:31,387 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-21 13:29:31,511 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:29:31,544 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:29:31,544 - INFO - integration_test - Warmstart k=0: x0=21.503158367873755 , y0=7.149650222640555 , psi0=0.1520084192008522 , v0=2.6805461825347896 , spline0=22.976108414392698 , a0=0.0 , w0=0.0
2026-01-21 13:29:31,544 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:29:31,545 - INFO - integration_test - Dyn residual k=0: pred=[21.76812203478669, 7.190240043816191, 0.1520084192008522, 2.6805461825347896, 23.244163032646178], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.76812203478669, 7.190240043816191, 0.1520084192008522, 2.6805461825347896, 23.244163032646178], res_norm=3.276e+01
2026-01-21 13:29:31,546 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:31,547 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:29:31,565 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:31,764 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:31,786 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:31,830 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:31,852 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:31,898 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:31,918 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:31,968 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:31,990 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:32,039 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:32,062 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:32,109 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:32,131 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:32,180 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:32,201 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:32,249 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:32,270 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:32,317 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:29:32,339 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:32,384 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:32,405 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:29:32,453 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:29:33,747 - INFO - integration_test - Step 80: MPC solve successful
2026-01-21 13:29:34,530 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.976)
2026-01-21 13:29:34,530 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:29:34,530 - INFO - integration_test - === Applying control at step 80 ===
2026-01-21 13:29:34,530 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019698565, 'w': 0.05813181967889701}
2026-01-21 13:29:34,530 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:29:34,530 - INFO - integration_test -   Planner output success: True
2026-01-21 13:29:34,532 - INFO - integration_test - Goal reached at step 80!
2026-01-21 13:29:34,532 - INFO - integration_test - Step 80 completed in 3.291s
2026-01-21 13:29:34,609 - INFO - integration_test - Goal reached at step 80, added 3 extra frames for visualization
2026-01-21 13:29:34,620 - INFO - integration_test - Saving test results...
2026-01-21 13:29:34,623 - INFO - integration_test - Saved 85 vehicle states to test_outputs/20260121_132544_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-21 13:29:34,623 - INFO - integration_test - Saved obstacle summary to test_outputs/20260121_132544_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-21 13:29:34,624 - INFO - integration_test - Saved 92 states for obstacle 0 to test_outputs/20260121_132544_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-21 13:29:34,624 - INFO - integration_test - Saved 92 states for obstacle 1 to test_outputs/20260121_132544_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-21 13:29:34,624 - INFO - integration_test - Saved 92 states for obstacle 2 to test_outputs/20260121_132544_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-21 13:29:34,625 - INFO - integration_test - Saved 92 states for obstacle 3 to test_outputs/20260121_132544_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-21 13:29:34,625 - INFO - integration_test - Saved state history: 85 vehicle states, 4 obstacles
2026-01-21 13:29:34,625 - INFO - integration_test - Creating animation...
2026-01-21 13:29:34,672 - DEBUG - integration_test - Creating animation with 85 frames (range: 0 to 84)
2026-01-21 13:29:34,673 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 13:29:34,775 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 13:29:34,775 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 13:29:34,775 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 13:29:34,813 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 13:29:34,813 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 13:29:34,913 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 13:29:34,913 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 13:29:34,913 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 13:29:34,949 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 13:29:35,075 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-21 13:29:35,177 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-21 13:29:35,177 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-21 13:29:35,177 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 13:29:35,214 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-21 13:29:35,291 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-21 13:29:35,436 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-21 13:29:35,436 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-21 13:29:35,436 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 13:29:35,807 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-21 13:30:19,355 - INFO - integration_test - Saved animation with 85 frames at 10.00 fps to test_outputs/20260121_132544_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 8.50s, size: 1483993 bytes)
2026-01-21 13:30:19,391 - INFO - integration_test - Animation created successfully
2026-01-21 13:30:19,392 - INFO - integration_test - Test completed successfully
