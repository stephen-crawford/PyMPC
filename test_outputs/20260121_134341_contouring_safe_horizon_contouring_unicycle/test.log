2026-01-21 13:43:41,229 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 13:43:41,229 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 13:43:41,230 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 13:43:41,230 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 13:43:41,230 - INFO - integration_test - Creating objective module: contouring
2026-01-21 13:43:41,236 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 13:43:41,236 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 13:43:41,236 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 13:43:41,250 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 13:43:41,250 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 13:43:41,257 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 13:43:41,257 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 13:43:41,276 - INFO - integration_test - Setting solver on all modules...
2026-01-21 13:43:41,276 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 13:43:41,276 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 13:43:41,276 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 13:43:41,276 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 13:43:41,276 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 13:43:41,276 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 13:43:41,277 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 13:43:41,277 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 13:43:41,277 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 13:43:41,277 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 13:43:41,277 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 13:43:41,277 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 13:43:41,277 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 13:43:41,278 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 13:43:41,278 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 13:43:41,278 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 13:43:41,278 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 13:43:41,278 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 13:43:41,279 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 13:43:41,279 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 13:43:41,282 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:41,297 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 13:43:41,297 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 13:43:41,442 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:41,468 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:41,468 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 13:43:41,468 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:41,469 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 13:43:41,469 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:41,470 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:41,485 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:41,649 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:41,668 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:41,713 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:41,733 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:41,782 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:41,809 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:41,871 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:41,908 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:41,981 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:42,010 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:42,076 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:42,102 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:42,162 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:42,189 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:42,253 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:42,282 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:42,339 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:42,364 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:42,425 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:42,449 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:42,502 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:43,679 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 13:43:43,987 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 13:43:43,988 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:43:43,988 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 13:43:43,988 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 13:43:43,988 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196288323, 'w': 0.7999999970477455}
2026-01-21 13:43:43,988 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:43:43,988 - INFO - integration_test -   Planner output success: True
2026-01-21 13:43:43,989 - INFO - integration_test - Step 0 completed in 2.711s
2026-01-21 13:43:44,055 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 13:43:44,056 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 13:43:44,056 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 13:43:44,056 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 13:43:44,060 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:44,168 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 13:43:44,168 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 13:43:44,262 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:44,285 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:44,285 - INFO - integration_test - Warmstart k=0: x0=0.1098773753800827 , y0=0.004530845041598927 , psi0=0.07999999970477455 , v0=1.2000000019628834 , spline0=0.12000000019628834 , a0=0.0 , w0=0.0
2026-01-21 13:43:44,285 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:44,286 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803348887, 0.014120608298272223, 0.07999999970477455, 1.2000000019628834, 0.24000000039257668], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.2294935803348887, 0.014120608298272223, 0.07999999970477455, 1.2000000019628834, 0.24000000039257668], res_norm=1.248e+00
2026-01-21 13:43:44,287 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:44,288 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:44,305 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:44,461 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:44,486 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:44,531 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:44,555 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:44,601 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:44,621 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:44,672 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:44,691 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:44,739 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:44,763 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:44,814 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:44,837 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:44,886 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:44,908 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:44,957 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:44,982 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:45,035 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:45,057 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:45,105 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:45,126 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:45,174 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:45,832 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 13:43:45,941 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 13:43:45,941 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:43:45,941 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 13:43:45,941 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000183758213, 'w': 0.799999936329676}
2026-01-21 13:43:45,941 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:43:45,941 - INFO - integration_test -   Planner output success: True
2026-01-21 13:43:45,943 - INFO - integration_test - Step 1 completed in 1.887s
2026-01-21 13:43:46,004 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 13:43:46,005 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-21 13:43:46,006 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 13:43:46,006 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 13:43:46,009 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:46,114 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 13:43:46,114 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 13:43:46,216 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:46,242 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:46,242 - INFO - integration_test - Warmstart k=0: x0=0.23889212823943745 , y0=0.02022162128404945 , psi0=0.15999999333774215 , v0=1.4000000038004654 , spline0=0.2600000005763349 , a0=0.0 , w0=0.0
2026-01-21 13:43:46,242 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:46,243 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039484358162, 0.042526169349789436, 0.15999999333774215, 1.4000000038004654, 0.40000000095638144], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.3771039484358162, 0.042526169349789436, 0.15999999333774215, 1.4000000038004654, 0.40000000095638144], res_norm=1.513e+00
2026-01-21 13:43:46,244 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:46,244 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:46,261 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,422 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,443 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,492 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,514 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,560 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,582 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,636 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,656 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,705 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,726 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,774 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,796 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,844 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,864 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,911 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,930 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:46,976 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:46,999 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:47,046 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:47,065 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:47,107 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:47,804 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 13:43:47,858 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 13:43:47,858 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:43:47,859 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 13:43:47,859 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199106425, 'w': 0.8000000045145198}
2026-01-21 13:43:47,859 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:43:47,859 - INFO - integration_test -   Planner output success: True
2026-01-21 13:43:47,860 - INFO - integration_test - Step 2 completed in 1.855s
2026-01-21 13:43:47,927 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 13:43:47,927 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999999 1.60000001 0.42      ]
2026-01-21 13:43:47,928 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 13:43:47,928 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 13:43:47,931 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:48,042 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 13:43:48,042 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 13:43:48,203 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:48,229 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:48,229 - INFO - integration_test - Warmstart k=0: x0=0.38583643596004036 , y0=0.05014471504067061 , psi0=0.23999999378919412 , v0=1.6000000057915296 , spline0=0.42000000115548786 , a0=0.0 , w0=0.0
2026-01-21 13:43:48,229 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:48,230 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505127351304, 0.08817713444143166, 0.23999999378919412, 1.6000000057915296, 0.5800000017346408], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505127351304, 0.08817713444143166, 0.23999999378919412, 1.6000000057915296, 0.5800000017346408], res_norm=1.804e+00
2026-01-21 13:43:48,231 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:48,231 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:48,248 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,397 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,423 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,474 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,495 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,542 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,563 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,610 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,633 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,681 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,703 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,751 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,772 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,823 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,844 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,889 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,911 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:48,957 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:48,979 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:49,031 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:49,053 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:49,101 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:49,778 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 13:43:49,843 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 13:43:49,843 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:43:49,844 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 13:43:49,844 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999559, 'w': 0.8000000099631353}
2026-01-21 13:43:49,844 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:43:49,844 - INFO - integration_test -   Planner output success: True
2026-01-21 13:43:49,845 - INFO - integration_test - Step 3 completed in 1.918s
2026-01-21 13:43:49,906 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 13:43:49,908 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-21 13:43:49,908 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 13:43:49,908 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 13:43:49,911 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:50,024 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 13:43:50,024 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 13:43:50,141 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:50,169 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:50,169 - INFO - integration_test - Warmstart k=0: x0=0.549135461760114 , y0=0.09724075465847468 , psi0=0.31999999478550767 , v0=1.8000000077914855 , spline0=0.6000000019346364 , a0=0.0 , w0=0.0
2026-01-21 13:43:50,169 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:50,170 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978380498036, 0.1538627349235094, 0.31999999478550767, 1.8000000077914855, 0.780000002713785], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978380498036, 0.1538627349235094, 0.31999999478550767, 1.8000000077914855, 0.780000002713785], res_norm=2.120e+00
2026-01-21 13:43:50,171 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:50,172 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:50,189 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,339 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,359 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,408 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,431 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,481 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,502 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,550 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,571 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,617 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,640 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,683 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,704 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,764 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,788 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,833 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,856 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,899 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:50,918 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:50,963 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:50,984 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:51,030 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:51,691 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 13:43:51,822 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 13:43:51,822 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:43:51,822 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 13:43:51,822 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019995696, 'w': 0.8000000094193026}
2026-01-21 13:43:51,822 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:43:51,822 - INFO - integration_test -   Planner output success: True
2026-01-21 13:43:51,823 - INFO - integration_test - Step 4 completed in 1.916s
2026-01-21 13:43:51,884 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 13:43:51,885 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 13:43:51,886 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 13:43:51,886 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 13:43:51,889 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:51,998 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 13:43:51,998 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 13:43:52,106 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:52,134 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:52,134 - INFO - integration_test - Warmstart k=0: x0=0.7268614895736376 , y0=0.1642797652376161 , psi0=0.39999999572743794 , v0=2.000000009791055 , spline0=0.800000002913742 , a0=0.0 , w0=0.0
2026-01-21 13:43:52,134 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:52,135 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736896087933, 0.24216343329356976, 0.39999999572743794, 2.000000009791055, 1.0000000038928474], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736896087933, 0.24216343329356976, 0.39999999572743794, 2.000000009791055, 1.0000000038928474], res_norm=2.459e+00
2026-01-21 13:43:52,136 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:52,137 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:52,153 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,316 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,337 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,387 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,410 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,459 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,482 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,537 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,562 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,613 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,634 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,684 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,704 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,751 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,773 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,823 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,845 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,891 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:52,914 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:52,963 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:52,984 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:53,031 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:53,721 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 13:43:53,788 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 13:43:53,788 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:43:53,788 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 13:43:53,788 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019214454, 'w': 0.7999997384729658}
2026-01-21 13:43:53,788 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:43:53,788 - INFO - integration_test -   Planner output success: True
2026-01-21 13:43:53,790 - INFO - integration_test - Step 5 completed in 1.904s
2026-01-21 13:43:53,855 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 13:43:53,856 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.2538238  0.47999997 2.20000001 1.02      ]
2026-01-21 13:43:53,856 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 13:43:53,856 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 13:43:53,860 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:53,970 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 13:43:53,970 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 13:43:54,067 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:54,094 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:54,095 - INFO - integration_test - Warmstart k=0: x0=0.9167519053035601 , y0=0.2538238020011233 , psi0=0.4799999695747345 , v0=2.2000000117125005 , spline0=1.020000004084992 , a0=0.0 , w0=0.0
2026-01-21 13:43:54,095 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:54,096 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907924448413, 0.355415215223956, 0.4799999695747345, 2.2000000117125005, 1.2400000052562419], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907924448413, 0.355415215223956, 0.4799999695747345, 2.2000000117125005, 1.2400000052562419], res_norm=2.823e+00
2026-01-21 13:43:54,097 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:54,098 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:54,117 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,344 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,365 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,418 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,441 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,495 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,517 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,567 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,590 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,636 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,658 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,706 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,732 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,780 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,802 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,853 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,877 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,925 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:54,947 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:54,995 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:55,015 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:55,058 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:55,771 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 13:43:55,836 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 13:43:55,836 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:43:55,836 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 13:43:55,836 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019143305, 'w': 0.7999982372554326}
2026-01-21 13:43:55,836 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:43:55,836 - INFO - integration_test -   Planner output success: True
2026-01-21 13:43:55,838 - INFO - integration_test - Step 6 completed in 1.982s
2026-01-21 13:43:55,899 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 13:43:55,899 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.36819142 0.55999979 2.40000001 1.26000001]
2026-01-21 13:43:55,900 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 13:43:55,900 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 13:43:55,903 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:56,013 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 13:43:56,013 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 13:43:56,109 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:56,134 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:56,134 - INFO - integration_test - Warmstart k=0: x0=1.1162308795018854 , y0=0.3681914176831099 , psi0=0.5599997933002778 , v0=2.400000013626831 , spline0=1.260000005447675 , a0=0.0 , w0=0.0
2026-01-21 13:43:56,134 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:56,135 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721336506907, 0.4956760638773824, 0.5599997933002778, 2.400000013626831, 1.500000006810358], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721336506907, 0.4956760638773824, 0.5599997933002778, 2.400000013626831, 1.500000006810358], res_norm=3.211e+00
2026-01-21 13:43:56,136 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:56,137 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:56,153 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,308 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,328 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,376 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,411 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,492 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,520 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,571 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,593 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,642 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,663 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,711 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,730 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,777 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,800 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,847 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,867 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,914 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:56,933 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:56,977 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:57,000 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:57,047 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:57,772 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 13:43:57,913 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 13:43:57,914 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:43:57,914 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 13:43:57,914 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196847916, 'w': -0.17675140858225147}
2026-01-21 13:43:57,914 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:43:57,914 - INFO - integration_test -   Planner output success: True
2026-01-21 13:43:57,915 - INFO - integration_test - Step 7 completed in 2.016s
2026-01-21 13:43:57,970 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 13:43:57,971 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32922265 0.49908404 0.54232465 2.60000002 1.52000001]
2026-01-21 13:43:57,972 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 13:43:57,972 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 13:43:57,975 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:58,082 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 13:43:58,082 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 13:43:58,184 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:43:58,211 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:43:58,211 - INFO - integration_test - Warmstart k=0: x0=1.329222651828266 , y0=0.4990840431522421 , psi0=0.5423246524420526 , v0=2.6000000155953105 , spline0=1.520000007007206 , a0=0.0 , w0=0.0
2026-01-21 13:43:58,211 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:43:58,212 - INFO - integration_test - Dyn residual k=0: pred=[1.5519155592932437, 0.6332774475197853, 0.5423246524420526, 2.6000000155953105, 1.780000008566737], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5519155592932437, 0.6332774475197853, 0.5423246524420526, 2.6000000155953105, 1.780000008566737], res_norm=3.610e+00
2026-01-21 13:43:58,213 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:58,214 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:43:58,230 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,387 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,410 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,458 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,480 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,533 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,556 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,609 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,632 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,675 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,695 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,740 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,760 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,805 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,828 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,872 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,891 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:58,936 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:43:58,956 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:59,002 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:59,025 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:43:59,071 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:43:59,950 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 13:44:00,019 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 13:44:00,019 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:00,019 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 13:44:00,019 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199961963, 'w': -0.03784884926045967}
2026-01-21 13:44:00,020 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:00,020 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:00,021 - INFO - integration_test - Step 8 completed in 2.050s
2026-01-21 13:44:00,080 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 13:44:00,081 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56074709 0.63799535 0.53853977 2.80000002 1.80000001]
2026-01-21 13:44:00,081 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 13:44:00,081 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 13:44:00,085 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:00,190 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 13:44:00,190 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 13:44:00,289 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:00,312 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:00,312 - INFO - integration_test - Warmstart k=0: x0=1.5607470850066079 , y0=0.6379953484909453 , psi0=0.5385397675160066 , v0=2.8000000175949302 , spline0=1.800000008766699 , a0=0.0 , w0=0.0
2026-01-21 13:44:00,312 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:00,313 - INFO - integration_test - Dyn residual k=0: pred=[1.801115473443229, 0.7816025865595666, 0.5385397675160066, 2.8000000175949302, 2.080000010526192], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.801115473443229, 0.7816025865595666, 0.5385397675160066, 2.8000000175949302, 2.080000010526192], res_norm=4.039e+00
2026-01-21 13:44:00,313 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:00,314 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:00,333 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:00,569 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:00,591 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:00,636 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:00,658 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:00,703 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:00,724 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:00,771 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:00,793 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:00,839 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:00,860 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:00,904 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:00,923 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:00,984 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:01,019 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:01,084 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:01,108 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:01,152 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:01,176 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:01,224 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:01,243 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:01,287 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:01,979 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 13:44:02,049 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 13:44:02,050 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:02,050 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 13:44:02,050 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199965347, 'w': -0.0759830601364108}
2026-01-21 13:44:02,050 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:02,050 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:02,051 - INFO - integration_test - Step 9 completed in 1.970s
2026-01-21 13:44:02,114 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 13:44:02,115 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81026919 0.78577328 0.53094146 3.00000002 2.10000001]
2026-01-21 13:44:02,115 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 13:44:02,115 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 13:44:02,118 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:02,232 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 13:44:02,232 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 13:44:02,335 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:02,360 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:02,360 - INFO - integration_test - Warmstart k=0: x0=1.8102691853315138 , y0=0.7857732834757905 , psi0=0.5309414615023655 , v0=3.0000000195945837 , spline0=2.1000000107261574 , a0=0.0 , w0=0.0
2026-01-21 13:44:02,360 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:02,361 - INFO - integration_test - Dyn residual k=0: pred=[2.0689684114307463, 0.9376769094737674, 0.5309414615023655, 3.0000000195945837, 2.4000000126856156], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.0689684114307463, 0.9376769094737674, 0.5309414615023655, 3.0000000195945837, 2.4000000126856156], res_norm=4.495e+00
2026-01-21 13:44:02,362 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:02,362 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:02,378 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:02,546 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:02,568 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:02,616 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:02,637 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:02,683 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:02,706 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:02,751 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:02,770 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:02,819 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:02,840 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:02,886 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:02,907 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:02,952 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:02,974 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:03,022 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:03,043 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:03,089 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:03,114 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:03,162 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:03,184 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:03,236 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:04,000 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 13:44:04,083 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 13:44:04,083 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:04,083 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 13:44:04,083 - INFO - integration_test -   Control dict from planner: {'a': 1.0403500033268486e-07, 'w': -0.05727775483561611}
2026-01-21 13:44:04,083 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:04,083 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:04,085 - INFO - integration_test - Step 10 completed in 1.970s
2026-01-21 13:44:04,152 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 13:44:04,153 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06940203 0.9369352  0.52521369 3.00000003 2.40000001]
2026-01-21 13:44:04,154 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 13:44:04,154 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 13:44:04,157 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:04,371 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 13:44:04,371 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 13:44:04,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:04,509 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:04,509 - INFO - integration_test - Warmstart k=0: x0=2.069402031083778 , y0=0.9369351956258282 , psi0=0.5252136860188039 , v0=3.0000000299980836 , spline0=2.4000000137259656 , a0=0.0 , w0=0.0
2026-01-21 13:44:04,509 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:04,510 - INFO - integration_test - Dyn residual k=0: pred=[2.328967079576101, 1.0873545673871245, 0.5252136860188039, 3.0000000299980836, 2.700000016725774], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.328967079576101, 1.0873545673871245, 0.5252136860188039, 3.0000000299980836, 2.700000016725774], res_norm=4.814e+00
2026-01-21 13:44:04,511 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:04,512 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:04,529 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:04,693 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:04,715 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:04,762 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:04,783 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:04,835 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:04,858 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:04,906 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:04,927 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:04,976 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:04,998 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:05,049 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:05,072 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:05,119 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:05,140 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:05,189 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:05,213 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:05,278 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:05,311 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:05,375 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:05,395 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:05,443 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:06,039 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 13:44:06,110 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 13:44:06,111 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:06,111 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 13:44:06,111 - INFO - integration_test -   Control dict from planner: {'a': -4.759220871919623e-09, 'w': -0.06568979239836957}
2026-01-21 13:44:06,111 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:06,111 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:06,112 - INFO - integration_test - Step 11 completed in 1.959s
2026-01-21 13:44:06,170 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 13:44:06,171 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32945926 1.08650095 0.51864471 3.00000003 2.70000002]
2026-01-21 13:44:06,171 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 13:44:06,171 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 13:44:06,174 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:06,282 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 13:44:06,282 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 13:44:06,374 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:06,400 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:06,400 - INFO - integration_test - Warmstart k=0: x0=2.329459261878567 , y0=1.0865009499326437 , psi0=0.518644706778967 , v0=3.0000000295221616 , spline0=2.7000000166781817 , a0=0.0 , w0=0.0
2026-01-21 13:44:06,400 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:06,401 - INFO - integration_test - Dyn residual k=0: pred=[2.5900068046646654, 1.2352120111199536, 0.518644706778967, 3.0000000295221616, 3.0000000196303978], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5900068046646654, 1.2352120111199536, 0.518644706778967, 3.0000000295221616, 3.0000000196303978], res_norm=5.148e+00
2026-01-21 13:44:06,402 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:06,402 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:06,420 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:06,573 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:06,592 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:06,636 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:06,657 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:06,702 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:06,722 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:06,768 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:06,789 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:06,833 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:06,858 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:06,902 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:06,927 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:06,973 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:06,993 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:07,038 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:07,060 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:07,105 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:07,123 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:07,167 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:07,186 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:07,235 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:07,860 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 13:44:08,027 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 13:44:08,027 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:08,027 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 13:44:08,027 - INFO - integration_test -   Control dict from planner: {'a': 4.758660994982246e-09, 'w': -0.05169198551981265}
2026-01-21 13:44:08,027 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:08,027 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:08,029 - INFO - integration_test - Step 12 completed in 1.858s
2026-01-21 13:44:08,084 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 13:44:08,085 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59039    1.23453794 0.51347551 3.00000003 3.00000002]
2026-01-21 13:44:08,086 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-21 13:44:08,086 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 13:44:08,089 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:08,191 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.870m
2026-01-21 13:44:08,191 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 13:44:08,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:08,312 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:08,312 - INFO - integration_test - Warmstart k=0: x0=2.590390002000499 , y0=1.2345379393665112 , psi0=0.5134755082269857 , v0=3.0000000299980276 , spline0=3.0000000196779846 , a0=0.0 , w0=0.0
2026-01-21 13:44:08,313 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:08,313 - INFO - integration_test - Dyn residual k=0: pred=[2.851702777419408, 1.3819001977732976, 0.5134755082269857, 3.0000000299980276, 3.3000000226777875], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.851702777419408, 1.3819001977732976, 0.5134755082269857, 3.0000000299980276, 3.3000000226777875], res_norm=5.495e+00
2026-01-21 13:44:08,314 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:08,315 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:08,330 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:08,482 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:08,506 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:08,553 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:08,576 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:08,631 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:08,650 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:08,698 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:08,720 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:08,763 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:08,783 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:08,832 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:08,855 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:08,900 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:08,922 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:08,968 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:08,988 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:09,037 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:09,057 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:09,101 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:09,122 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:09,167 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:09,786 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 13:44:09,869 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 13:44:09,869 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:09,869 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 13:44:09,869 - INFO - integration_test -   Control dict from planner: {'a': -1.5036659183987966e-07, 'w': -0.07284913036878315}
2026-01-21 13:44:09,869 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:09,869 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:09,870 - INFO - integration_test - Step 13 completed in 1.785s
2026-01-21 13:44:09,933 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 13:44:09,934 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85223722 1.38094708 0.5061906  3.00000001 3.30000002]
2026-01-21 13:44:09,934 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.147m, drift=0.370m)
2026-01-21 13:44:09,934 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 13:44:09,938 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:10,153 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 13:44:10,153 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 13:44:10,250 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:10,275 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:10,275 - INFO - integration_test - Warmstart k=0: x0=2.8522372237043543 , y0=1.380947077779875 , psi0=0.5061905951901075 , v0=3.0000000149613686 , spline0=3.3000000211741214 , a0=0.0 , w0=0.0
2026-01-21 13:44:10,275 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:10,276 - INFO - integration_test - Dyn residual k=0: pred=[3.114616575651972, 1.5264018012137677, 0.5061905951901075, 3.0000000149613686, 3.600000022670258], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.114616575651972, 1.5264018012137677, 0.5061905951901075, 3.0000000149613686, 3.600000022670258], res_norm=5.852e+00
2026-01-21 13:44:10,276 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:10,277 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:10,293 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,443 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:10,463 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,511 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:10,532 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,580 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:10,600 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,648 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:10,667 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,713 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:10,732 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,778 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:10,798 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,849 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:10,870 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,921 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:10,943 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:10,989 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:11,011 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:11,053 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:11,072 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:11,119 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:11,810 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 13:44:11,890 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 13:44:11,890 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:11,890 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 13:44:11,890 - INFO - integration_test -   Control dict from planner: {'a': 1.50385080316936e-07, 'w': -0.04284023545521695}
2026-01-21 13:44:11,891 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:11,891 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:11,892 - INFO - integration_test - Step 14 completed in 1.958s
2026-01-21 13:44:11,950 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 13:44:11,951 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11492734 1.52583934 0.50190657 3.00000003 3.60000002]
2026-01-21 13:44:11,952 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 13:44:11,952 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 13:44:11,954 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:12,057 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 13:44:12,057 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 13:44:12,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:12,179 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:12,179 - INFO - integration_test - Warmstart k=0: x0=3.1149273389964125 , y0=1.5258393378573294 , psi0=0.5019065716445857 , v0=3.000000029999877 , spline0=3.600000024174109 , a0=0.0 , w0=0.0
2026-01-21 13:44:12,179 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:12,180 - INFO - integration_test - Dyn residual k=0: pred=[3.3779274141145885, 1.6701686913784564, 0.5019065716445857, 3.000000029999877, 3.9000000271740967], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3779274141145885, 1.6701686913784564, 0.5019065716445857, 3.000000029999877, 3.9000000271740967], res_norm=6.218e+00
2026-01-21 13:44:12,181 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:12,182 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:12,198 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,357 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,377 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,424 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,446 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,490 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,512 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,564 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,584 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,632 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,652 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,700 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,722 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,766 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,786 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,833 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,855 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,915 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:12,941 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:12,988 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:13,007 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:13,053 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:13,642 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 13:44:13,862 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 13:44:13,862 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:13,862 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 13:44:13,862 - INFO - integration_test -   Control dict from planner: {'a': -7.344109968326958e-07, 'w': -0.07210747778389927}
2026-01-21 13:44:13,862 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:13,862 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:13,864 - INFO - integration_test - Step 15 completed in 1.913s
2026-01-21 13:44:13,922 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 13:44:13,923 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37844549 1.66921923 0.49469582 2.99999996 3.90000002]
2026-01-21 13:44:13,923 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.147m, drift=0.482m)
2026-01-21 13:44:13,923 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 13:44:13,926 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:14,032 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.669), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 13:44:14,033 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 13:44:14,126 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:14,157 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:14,157 - INFO - integration_test - Warmstart k=0: x0=3.3784454908113855 , y0=1.6692192294042287 , psi0=0.4946958238661958 , v0=2.999999956558777 , spline0=3.900000019829987 , a0=0.0 , w0=0.0
2026-01-21 13:44:14,158 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:14,159 - INFO - integration_test - Dyn residual k=0: pred=[3.642479435712977, 1.8116484164875999, 0.4946958238661958, 2.999999956558777, 4.200000015485864], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.642479435712977, 1.8116484164875999, 0.4946958238661958, 2.999999956558777, 4.200000015485864], res_norm=6.590e+00
2026-01-21 13:44:14,160 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:14,162 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:14,182 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,338 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,357 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,400 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,426 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,471 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,491 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,537 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,561 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,607 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,631 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,677 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,697 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,742 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,761 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,809 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,831 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,876 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:14,897 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:14,937 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:14,957 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:15,004 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:15,624 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 13:44:15,711 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 13:44:15,712 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:15,712 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 13:44:15,712 - INFO - integration_test -   Control dict from planner: {'a': 7.341980464824755e-07, 'w': -0.048032987449327935}
2026-01-21 13:44:15,712 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:15,712 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:15,713 - INFO - integration_test - Step 16 completed in 1.790s
2026-01-21 13:44:15,768 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 13:44:15,769 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64282049 1.81101375 0.48989253 3.00000003 4.20000002]
2026-01-21 13:44:15,770 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.144m, drift=0.294m)
2026-01-21 13:44:15,770 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 13:44:15,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:15,879 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 13:44:15,880 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 13:44:16,085 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:16,111 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:16,111 - INFO - integration_test - Warmstart k=0: x0=3.6428204879763624 , y0=1.811013754801774 , psi0=0.489892525121263 , v0=3.0000000299785814 , spline0=4.200000022827845 , a0=0.0 , w0=0.0
2026-01-21 13:44:16,111 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:16,112 - INFO - integration_test - Dyn residual k=0: pred=[3.9075355208139544, 1.9521730732632467, 0.489892525121263, 3.0000000299785814, 4.5000000258257025], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9075355208139544, 1.9521730732632467, 0.489892525121263, 3.0000000299785814, 4.5000000258257025], res_norm=6.969e+00
2026-01-21 13:44:16,113 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:16,113 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:16,129 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,279 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,299 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,344 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,366 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,410 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,430 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,476 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,495 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,544 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,567 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,614 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,634 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,675 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,695 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,740 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,762 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,807 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:16,831 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,876 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:16,894 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:16,935 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:17,726 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 13:44:17,818 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 13:44:17,819 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:17,819 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 13:44:17,819 - INFO - integration_test -   Control dict from planner: {'a': -6.045372857724703e-07, 'w': -0.06725154430144795}
2026-01-21 13:44:17,819 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:17,819 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:17,820 - INFO - integration_test - Step 17 completed in 2.051s
2026-01-21 13:44:17,881 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 13:44:17,882 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90800818 1.95128189 0.48316737 2.99999997 4.50000002]
2026-01-21 13:44:17,883 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 13:44:17,883 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 13:44:17,886 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:17,999 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.951), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 13:44:17,999 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 13:44:18,100 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:18,127 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:18,127 - INFO - integration_test - Warmstart k=0: x0=3.9080081800553432 , y0=1.9512818864204708 , psi0=0.4831673706911182 , v0=2.9999999695248527 , spline0=4.50000001978033 , a0=0.0 , w0=0.0
2026-01-21 13:44:18,127 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:18,129 - INFO - integration_test - Dyn residual k=0: pred=[4.173666532395837, 2.090657773873163, 0.4831673706911182, 2.9999999695248527, 4.800000016732816], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.173666532395837, 2.090657773873163, 0.4831673706911182, 2.9999999695248527, 4.800000016732816], res_norm=7.353e+00
2026-01-21 13:44:18,130 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:18,131 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:18,154 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,349 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,369 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,417 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,438 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,485 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,506 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,560 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,589 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,642 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,661 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,711 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,733 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,775 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,796 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,844 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,865 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,909 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:18,931 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:18,977 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:18,998 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:19,048 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:19,662 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 13:44:19,871 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 13:44:19,871 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:19,871 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 13:44:19,871 - INFO - integration_test -   Control dict from planner: {'a': 6.047492839953248e-07, 'w': -0.05345925584544458}
2026-01-21 13:44:19,871 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:19,871 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:19,872 - INFO - integration_test - Step 18 completed in 1.990s
2026-01-21 13:44:19,928 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 13:44:19,930 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17403782 2.08994702 0.47782145 3.00000003 4.80000002]
2026-01-21 13:44:19,931 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.127m, drift=0.405m)
2026-01-21 13:44:19,931 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 13:44:19,935 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:20,043 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 13:44:20,043 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 13:44:20,141 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:20,167 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:20,167 - INFO - integration_test - Warmstart k=0: x0=4.17403781538289 , y0=2.0899470182005393 , psi0=0.47782144510657376 , v0=3.0000000299997813 , spline0=4.800000022780308 , a0=0.0 , w0=0.0
2026-01-21 13:44:20,167 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:20,168 - INFO - integration_test - Dyn residual k=0: pred=[4.440437466561758, 2.227900733814742, 0.47782144510657376, 3.0000000299997813, 5.100000025780286], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440437466561758, 2.227900733814742, 0.47782144510657376, 3.0000000299997813, 5.100000025780286], res_norm=7.741e+00
2026-01-21 13:44:20,169 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:20,169 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:20,185 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,336 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,356 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,404 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,425 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,479 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,500 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,548 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,572 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,620 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,643 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,692 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,712 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,759 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,779 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,828 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,849 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,893 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:20,913 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:20,954 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:20,973 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:21,019 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:21,611 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 13:44:21,707 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 13:44:21,707 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:21,707 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 13:44:21,707 - INFO - integration_test -   Control dict from planner: {'a': -4.298651816494311e-08, 'w': -0.07344578908339935}
2026-01-21 13:44:21,707 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:21,707 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:21,709 - INFO - integration_test - Step 19 completed in 1.779s
2026-01-21 13:44:21,765 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 13:44:21,766 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44094168 2.2269212  0.47047687 3.00000003 5.10000003]
2026-01-21 13:44:21,767 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.154m, drift=0.217m)
2026-01-21 13:44:21,767 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 13:44:21,770 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:21,878 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 13:44:21,878 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 13:44:21,975 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:22,001 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:22,002 - INFO - integration_test - Warmstart k=0: x0=4.44094167501592 , y0=2.2269212012191875 , psi0=0.4704768661982338 , v0=3.0000000257011297 , spline0=5.100000025350421 , a0=0.0 , w0=0.0
2026-01-21 13:44:22,002 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:22,002 - INFO - integration_test - Dyn residual k=0: pred=[4.708347343507931, 2.3629146201791085, 0.4704768661982338, 3.0000000257011297, 5.400000027920534], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.708347343507931, 2.3629146201791085, 0.4704768661982338, 3.0000000257011297, 5.400000027920534], res_norm=8.132e+00
2026-01-21 13:44:22,003 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:22,004 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:22,021 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,307 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,329 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,374 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,394 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,462 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,494 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,561 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,584 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,632 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,653 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,699 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,718 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,763 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,784 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,831 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,852 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,899 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:22,918 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:22,966 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:22,986 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:23,032 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:24,486 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 13:44:24,590 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 13:44:24,590 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:24,590 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 13:44:24,591 - INFO - integration_test -   Control dict from planner: {'a': 4.29846272157954e-08, 'w': -0.039907342325430695}
2026-01-21 13:44:24,591 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:24,591 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:24,592 - INFO - integration_test - Step 20 completed in 2.826s
2026-01-21 13:44:24,653 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 13:44:24,656 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70861799 2.36238069 0.46648613 3.00000003 5.40000003]
2026-01-21 13:44:24,656 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 13:44:24,656 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 13:44:24,659 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:24,763 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.709, 2.362), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 13:44:24,763 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 13:44:24,862 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:24,888 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:24,888 - INFO - integration_test - Warmstart k=0: x0=4.708617990354454 , y0=2.362380687535897 , psi0=0.4664861319656907 , v0=3.0000000299995926 , spline0=5.40000002835038 , a0=0.0 , w0=0.0
2026-01-21 13:44:24,888 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:24,889 - INFO - integration_test - Dyn residual k=0: pred=[4.976564242039164, 2.497305881655045, 0.4664861319656907, 3.0000000299995926, 5.700000031350339], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.976564242039164, 2.497305881655045, 0.4664861319656907, 3.0000000299995926, 5.700000031350339], res_norm=8.527e+00
2026-01-21 13:44:24,890 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:24,891 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:24,908 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,083 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,105 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,151 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,174 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,226 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,252 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,297 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,322 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,365 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,390 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,439 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,462 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,513 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,533 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,580 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,600 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,650 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:25,672 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,718 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:25,738 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:25,783 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:26,374 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 13:44:26,598 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 13:44:26,598 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:26,598 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 13:44:26,598 - INFO - integration_test -   Control dict from planner: {'a': -4.3883958031879264e-07, 'w': -0.05994813201690151}
2026-01-21 13:44:26,598 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:26,598 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:26,600 - INFO - integration_test - Step 21 completed in 1.944s
2026-01-21 13:44:26,664 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 13:44:26,665 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97696706 2.49650193 0.46049132 2.99999999 5.70000003]
2026-01-21 13:44:26,665 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 13:44:26,665 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 13:44:26,668 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:26,777 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 13:44:26,777 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 13:44:26,911 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:26,952 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:26,952 - INFO - integration_test - Warmstart k=0: x0=4.9769670596356335 , y0=2.4965019310672396 , psi0=0.46049131876400057 , v0=2.9999999861156343 , spline0=5.700000026961944 , a0=0.0 , w0=0.0
2026-01-21 13:44:26,952 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:26,953 - INFO - integration_test - Dyn residual k=0: pred=[5.245717339196285, 2.6298184206812767, 0.46049131876400057, 2.9999999861156343, 6.000000025573508], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.245717339196285, 2.6298184206812767, 0.46049131876400057, 2.9999999861156343, 6.000000025573508], res_norm=8.924e+00
2026-01-21 13:44:26,954 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:26,955 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:26,972 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,144 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,165 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,214 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,238 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,283 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,305 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,349 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,370 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,420 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,442 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,488 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,513 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,566 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,592 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,645 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,668 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,716 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:27,739 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,785 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:27,805 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:27,853 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:28,798 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 13:44:28,915 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 13:44:28,915 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:28,915 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 13:44:28,915 - INFO - integration_test -   Control dict from planner: {'a': -4.32111390213168e-05, 'w': -0.07131421135687814}
2026-01-21 13:44:28,915 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:28,915 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:28,917 - INFO - integration_test - Step 22 completed in 2.252s
2026-01-21 13:44:28,979 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 13:44:28,980 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24619023 2.62885891 0.4533599  2.99999567 5.99999959]
2026-01-21 13:44:28,981 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 13:44:28,981 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 13:44:28,984 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:29,101 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 13:44:29,102 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 13:44:29,208 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:29,237 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:29,238 - INFO - integration_test - Warmstart k=0: x0=5.246190233219788 , y0=2.6288589139259084 , psi0=0.45335989762831275 , v0=2.999995665001732 , spline0=5.9999995934621175 , a0=0.0 , w0=0.0
2026-01-21 13:44:29,238 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:29,239 - INFO - integration_test - Dyn residual k=0: pred=[5.515884018383839, 2.7602552690662945, 0.45335989762831275, 2.999995665001732, 6.299999159962291], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.515884018383839, 2.7602552690662945, 0.45335989762831275, 2.999995665001732, 6.299999159962291], res_norm=9.324e+00
2026-01-21 13:44:29,240 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:29,241 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:29,258 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:29,441 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:29,464 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:29,510 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:29,531 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:29,578 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:29,601 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:29,652 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:29,675 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:29,724 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:29,747 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:29,795 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:29,818 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:29,865 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:29,887 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:29,934 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:29,956 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:30,005 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:30,032 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:30,082 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:30,103 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:30,150 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:30,836 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 13:44:31,128 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 13:44:31,128 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:31,129 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 13:44:31,129 - INFO - integration_test -   Control dict from planner: {'a': 4.36153844167091e-05, 'w': -0.04781873448547856}
2026-01-21 13:44:31,129 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:31,129 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:31,130 - INFO - integration_test - Step 23 completed in 2.150s
2026-01-21 13:44:31,197 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 13:44:31,198 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51619735 2.75961004 0.44857802 3.00000003 6.2999996 ]
2026-01-21 13:44:31,199 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 13:44:31,199 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 13:44:31,202 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:31,323 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 13:44:31,323 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 13:44:31,423 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:31,451 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:31,451 - INFO - integration_test - Warmstart k=0: x0=5.51619734669054 , y0=2.7596100436516315 , psi0=0.4485780241797649 , v0=3.0000000265401736 , spline0=6.299999596116135 , a0=0.0 , w0=0.0
2026-01-21 13:44:31,451 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:31,452 - INFO - integration_test - Dyn residual k=0: pred=[5.7865167597592775, 2.889715449037356, 0.4485780241797649, 3.0000000265401736, 6.599999598770152], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.7865167597592775, 2.889715449037356, 0.4485780241797649, 3.0000000265401736, 6.599999598770152], res_norm=9.726e+00
2026-01-21 13:44:31,452 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:31,453 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:31,469 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:31,644 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:31,666 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:31,714 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:31,738 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:31,785 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:31,806 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:31,855 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:31,876 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:31,924 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:31,946 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:31,990 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:32,012 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:32,062 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:32,084 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:32,132 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:32,156 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:32,204 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:32,227 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:32,274 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:32,296 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:32,348 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:33,147 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 13:44:33,315 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 13:44:33,315 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:33,315 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 13:44:33,315 - INFO - integration_test -   Control dict from planner: {'a': 3.459679731541936e-08, 'w': -0.06245114391434628}
2026-01-21 13:44:33,315 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:33,315 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:33,317 - INFO - integration_test - Step 24 completed in 2.119s
2026-01-21 13:44:33,387 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 13:44:33,389 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78692126 2.88887052 0.44233291 3.00000003 6.5999996 ]
2026-01-21 13:44:33,390 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.112m, drift=0.252m)
2026-01-21 13:44:33,390 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 13:44:33,393 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:33,514 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.889), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 13:44:33,514 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 13:44:33,749 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:33,773 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:33,773 - INFO - integration_test - Warmstart k=0: x0=5.786921263026738 , y0=2.88887051831175 , psi0=0.4423329097883303 , v0=3.0000000299998533 , spline0=6.59999959911612 , a0=0.0 , w0=0.0
2026-01-21 13:44:33,773 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:33,774 - INFO - integration_test - Dyn residual k=0: pred=[6.058047922858225, 3.017285222020525, 0.4423329097883303, 3.0000000299998533, 6.899999602116105], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.058047922858225, 3.017285222020525, 0.4423329097883303, 3.0000000299998533, 6.899999602116105], res_norm=1.013e+01
2026-01-21 13:44:33,774 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:33,775 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:33,792 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:33,966 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:33,987 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,039 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:34,064 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,116 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:34,136 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,179 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:34,206 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,259 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:34,282 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,331 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:34,353 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,401 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:34,423 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,473 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:34,494 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,542 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:34,565 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,614 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:34,638 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:34,685 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:35,862 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 13:44:35,996 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 13:44:35,996 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:35,997 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 13:44:35,997 - INFO - integration_test -   Control dict from planner: {'a': -3.319188088023983e-07, 'w': -0.06300635731666358}
2026-01-21 13:44:35,997 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:35,997 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:35,998 - INFO - integration_test - Step 25 completed in 2.609s
2026-01-21 13:44:36,066 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 13:44:36,067 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05845067 3.01643024 0.43603227 3.         6.8999996 ]
2026-01-21 13:44:36,068 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.205m, drift=0.064m)
2026-01-21 13:44:36,068 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 13:44:36,072 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:36,195 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.016), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 13:44:36,195 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 13:44:36,309 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:36,342 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:36,342 - INFO - integration_test - Warmstart k=0: x0=6.058450673291282 , y0=3.0164302393487366 , psi0=0.43603227405666395 , v0=2.9999999968079725 , spline0=6.899999598796917 , a0=0.0 , w0=0.0
2026-01-21 13:44:36,342 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:36,343 - INFO - integration_test - Dyn residual k=0: pred=[6.330381037454864, 3.143134133741686, 0.43603227405666395, 2.9999999968079725, 7.1999995984777145], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.330381037454864, 3.143134133741686, 0.43603227405666395, 2.9999999968079725, 7.1999995984777145], res_norm=1.053e+01
2026-01-21 13:44:36,344 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:36,346 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:36,366 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:36,562 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:36,584 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:36,636 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:36,663 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:36,714 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:36,735 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:36,783 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:36,806 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:36,857 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:36,879 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:36,932 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:36,953 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:37,002 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:37,024 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:37,075 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:37,096 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:37,143 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:37,166 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:37,213 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:37,234 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:37,280 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:38,237 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 13:44:38,519 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 13:44:38,520 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:38,520 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 13:44:38,520 - INFO - integration_test -   Control dict from planner: {'a': 3.3191875259035057e-07, 'w': -0.06260439483030623}
2026-01-21 13:44:38,520 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:38,520 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:38,521 - INFO - integration_test - Step 26 completed in 2.454s
2026-01-21 13:44:38,589 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 13:44:38,590 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33077587 3.14228211 0.42977183 3.00000003 7.1999996 ]
2026-01-21 13:44:38,591 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.174m, drift=0.364m)
2026-01-21 13:44:38,591 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 13:44:38,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:38,718 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.331, 3.142), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 13:44:38,718 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 13:44:38,820 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:38,846 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:38,847 - INFO - integration_test - Warmstart k=0: x0=6.330775872402797 , y0=3.14228210777077 , psi0=0.4297718345736333 , v0=3.000000029999848 , spline0=7.199999601796902 , a0=0.0 , w0=0.0
2026-01-21 13:44:38,847 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:38,848 - INFO - integration_test - Dyn residual k=0: pred=[6.603494127585456, 3.267281128127398, 0.4297718345736333, 3.000000029999848, 7.499999604796887], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.603494127585456, 3.267281128127398, 0.4297718345736333, 3.000000029999848, 7.499999604796887], res_norm=1.094e+01
2026-01-21 13:44:38,849 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:38,849 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:38,867 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,051 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,076 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,132 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,161 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,222 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,250 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,315 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,338 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,395 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,418 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,483 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,520 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,611 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,644 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,709 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,736 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,793 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:39,818 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,871 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:39,893 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:39,937 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:40,666 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 13:44:40,803 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 13:44:40,803 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:40,803 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 13:44:40,803 - INFO - integration_test -   Control dict from planner: {'a': -4.376505125134876e-07, 'w': -0.05141597097914766}
2026-01-21 13:44:40,803 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:40,803 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:40,804 - INFO - integration_test - Step 27 completed in 2.214s
2026-01-21 13:44:40,867 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 13:44:40,867 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60381427 3.26657947 0.42463024 2.99999999 7.4999996 ]
2026-01-21 13:44:40,868 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.125m, drift=0.175m)
2026-01-21 13:44:40,868 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 13:44:40,872 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:40,981 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.604, 3.267), path_start=(0.000, 0.000), dist=7.368m
2026-01-21 13:44:40,981 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 13:44:41,083 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:41,108 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:41,108 - INFO - integration_test - Warmstart k=0: x0=6.603814270589396 , y0=3.2665794743269343 , psi0=0.42463023747571854 , v0=2.999999986234797 , spline0=7.499999600420382 , a0=0.0 , w0=0.0
2026-01-21 13:44:41,108 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:41,109 - INFO - integration_test - Dyn residual k=0: pred=[6.877171608768039, 3.390174639434534, 0.42463023747571854, 2.999999986234797, 7.799999599043861], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.877171608768039, 3.390174639434534, 0.42463023747571854, 2.999999986234797, 7.799999599043861], res_norm=1.135e+01
2026-01-21 13:44:41,110 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:41,110 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:41,126 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,306 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,331 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,385 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,409 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,465 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,491 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,544 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,565 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,612 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,633 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,683 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,704 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,749 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,769 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,813 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,833 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,880 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:41,901 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:41,945 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:41,965 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:42,008 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:43,272 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 13:44:43,561 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 13:44:43,561 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:43,561 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 13:44:43,562 - INFO - integration_test -   Control dict from planner: {'a': 4.3718600968145223e-07, 'w': -0.06785065242206413}
2026-01-21 13:44:43,562 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:43,562 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:43,563 - INFO - integration_test - Step 28 completed in 2.696s
2026-01-21 13:44:43,622 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 13:44:43,626 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.87758881 3.38924632 0.41784517 3.00000003 7.7999996 ]
2026-01-21 13:44:43,627 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.243m, drift=0.013m)
2026-01-21 13:44:43,627 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 13:44:43,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:43,816 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.878, 3.389), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 13:44:43,816 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 13:44:43,928 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:43,955 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:43,955 - INFO - integration_test - Warmstart k=0: x0=6.877588812359421 , y0=3.389246321871785 , psi0=0.41784517223351214 , v0=3.000000029953398 , spline0=7.7999996034157215 , a0=0.0 , w0=0.0
2026-01-21 13:44:43,955 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:43,956 - INFO - integration_test - Dyn residual k=0: pred=[7.151778457091391, 3.510983910639429, 0.41784517223351214, 3.000000029953398, 8.09999960641106], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.151778457091391, 3.510983910639429, 0.41784517223351214, 3.000000029953398, 8.09999960641106], res_norm=1.176e+01
2026-01-21 13:44:43,956 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:43,957 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:43,973 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,155 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,176 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,225 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,249 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,300 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,323 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,370 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,392 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,441 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,468 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,517 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,537 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,578 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,596 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,642 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,667 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,714 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:44,734 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,780 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:44,801 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:44,855 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:45,757 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 13:44:45,893 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 13:44:45,893 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:45,893 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 13:44:45,893 - INFO - integration_test -   Control dict from planner: {'a': -2.204071578711709e-07, 'w': -0.07227945894544771}
2026-01-21 13:44:45,893 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:45,893 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:45,895 - INFO - integration_test - Step 29 completed in 2.269s
2026-01-21 13:44:45,961 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 13:44:45,962 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.15221602 3.50999194 0.41061723 3.00000001 8.0999996 ]
2026-01-21 13:44:45,963 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.152m, drift=0.287m)
2026-01-21 13:44:45,963 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 13:44:45,966 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:46,085 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.152, 3.510), path_start=(0.000, 0.000), dist=7.967m
2026-01-21 13:44:46,085 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 13:44:46,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:46,279 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:46,279 - INFO - integration_test - Warmstart k=0: x0=7.152216023101445 , y0=3.5099919405619557 , psi0=0.41061722633896736 , v0=3.000000007912682 , spline0=8.099999604206989 , a0=0.0 , w0=0.0
2026-01-21 13:44:46,279 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:46,280 - INFO - integration_test - Dyn residual k=0: pred=[7.42727840861465, 3.6297445378220816, 0.41061722633896736, 3.000000007912682, 8.399999604998257], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.42727840861465, 3.6297445378220816, 0.41061722633896736, 3.000000007912682, 8.399999604998257], res_norm=1.217e+01
2026-01-21 13:44:46,281 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:46,282 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:46,303 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:46,485 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:46,506 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:46,553 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:46,573 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:46,616 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:46,640 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:46,690 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:46,711 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:46,759 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:46,783 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:46,826 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:46,846 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:46,895 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:46,915 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:46,961 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:46,980 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:47,021 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:47,043 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:47,090 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:47,110 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:47,157 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:48,442 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 13:44:48,729 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 13:44:48,730 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:48,730 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 13:44:48,730 - INFO - integration_test -   Control dict from planner: {'a': 2.2086112423499853e-07, 'w': -0.046273698747832936}
2026-01-21 13:44:48,730 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:48,730 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:48,731 - INFO - integration_test - Step 30 completed in 2.769s
2026-01-21 13:44:48,789 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 13:44:48,791 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.4275545  3.6291077  0.40598986 3.00000003 8.39999961]
2026-01-21 13:44:48,791 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.152m, drift=0.099m)
2026-01-21 13:44:48,791 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 13:44:48,795 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:48,902 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.428, 3.629), path_start=(0.000, 0.000), dist=8.267m
2026-01-21 13:44:48,902 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 13:44:48,998 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:49,023 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:49,023 - INFO - integration_test - Warmstart k=0: x0=7.4275544972844365 , y0=3.6291077043295124 , psi0=0.40598985646418406 , v0=3.0000000299987946 , spline0=8.399999607206869 , a0=0.0 , w0=0.0
2026-01-21 13:44:49,024 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:49,025 - INFO - integration_test - Dyn residual k=0: pred=[7.703168077521563, 3.74758620950577, 0.40598985646418406, 3.0000000299987946, 8.69999961020675], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.703168077521563, 3.74758620950577, 0.40598985646418406, 3.0000000299987946, 8.69999961020675], res_norm=1.258e+01
2026-01-21 13:44:49,025 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:49,026 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:49,045 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,221 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,242 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,291 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,312 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,359 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,380 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,424 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,446 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,496 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,518 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,565 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,584 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,628 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,655 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,714 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,741 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,787 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:49,811 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,858 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:49,878 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:49,923 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:51,559 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 13:44:51,794 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 13:44:51,794 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:51,794 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 13:44:51,794 - INFO - integration_test -   Control dict from planner: {'a': -1.3450808153031548e-06, 'w': -0.05699660614276614}
2026-01-21 13:44:51,794 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:51,794 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:51,795 - INFO - integration_test - Step 31 completed in 3.005s
2026-01-21 13:44:51,877 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 13:44:51,886 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.70350422 3.74680012 0.4002902  2.9999999  8.6999996 ]
2026-01-21 13:44:51,887 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.252m, drift=0.399m)
2026-01-21 13:44:51,887 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 13:44:51,890 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:52,018 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.704, 3.747), path_start=(0.000, 0.000), dist=8.566m
2026-01-21 13:44:52,018 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 13:44:52,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:52,151 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:52,151 - INFO - integration_test - Warmstart k=0: x0=7.703504221786255 , y0=3.7468001155819297 , psi0=0.40029019584990744 , v0=2.999999895490713 , spline0=8.69999959675594 , a0=0.0 , w0=0.0
2026-01-21 13:44:52,151 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:52,152 - INFO - integration_test - Dyn residual k=0: pred=[7.979788596451907, 3.8637057957050644, 0.40029019584990744, 2.999999895490713, 8.999999586305012], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.979788596451907, 3.8637057957050644, 0.40029019584990744, 2.999999895490713, 8.999999586305012], res_norm=1.299e+01
2026-01-21 13:44:52,153 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:52,154 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:52,171 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:52,356 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:52,378 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:52,428 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:52,452 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:52,510 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:52,534 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:52,588 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:52,619 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:52,709 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:52,759 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:52,839 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:52,865 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:52,921 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:52,944 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:52,992 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:53,012 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:53,062 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:53,086 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:53,136 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:53,156 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:53,205 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:54,193 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 13:44:54,496 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 13:44:54,497 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:54,497 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 13:44:54,497 - INFO - integration_test -   Control dict from planner: {'a': 1.3450807107926811e-06, 'w': -0.0664819795882013}
2026-01-21 13:44:54,497 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:54,497 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:54,498 - INFO - integration_test - Step 32 completed in 2.612s
2026-01-21 13:44:54,565 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 13:44:54,566 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.98017517 3.86278654 0.393642   3.00000003 8.9999996 ]
2026-01-21 13:44:54,567 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.138m, drift=0.211m)
2026-01-21 13:44:54,567 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 13:44:54,570 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:54,688 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.980, 3.863), path_start=(0.000, 0.000), dist=8.866m
2026-01-21 13:44:54,688 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 13:44:54,797 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:54,824 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:54,824 - INFO - integration_test - Warmstart k=0: x0=7.98017517205507 , y0=3.862786543898496 , psi0=0.3936419978910873 , v0=3.000000029998784 , spline0=8.999999599755819 , a0=0.0 , w0=0.0
2026-01-21 13:44:54,824 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:54,825 - INFO - integration_test - Dyn residual k=0: pred=[8.25723065986153, 3.97785286597516, 0.3936419978910873, 3.000000029998784, 9.299999602755697], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.25723065986153, 3.97785286597516, 0.3936419978910873, 3.000000029998784, 9.299999602755697], res_norm=1.340e+01
2026-01-21 13:44:54,826 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:54,827 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:54,843 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,021 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,043 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,090 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,112 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,159 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,180 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,228 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,248 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,296 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,316 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,363 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,384 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,428 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,448 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,495 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,518 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,565 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:55,585 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,630 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:55,650 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:55,697 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:56,854 - INFO - integration_test - Step 33: MPC solve successful
2026-01-21 13:44:56,999 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 13:44:57,000 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:57,000 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 13:44:57,000 - INFO - integration_test -   Control dict from planner: {'a': -1.5508837599794487e-08, 'w': -0.04476867478158028}
2026-01-21 13:44:57,000 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:57,000 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:57,001 - INFO - integration_test - Step 33 completed in 2.435s
2026-01-21 13:44:57,062 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 13:44:57,065 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.2574873  3.97723231 0.38916513 3.00000003 9.2999996 ]
2026-01-21 13:44:57,066 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.191m, drift=0.022m)
2026-01-21 13:44:57,066 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 13:44:57,069 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:57,177 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.257, 3.977), path_start=(0.000, 0.000), dist=9.165m
2026-01-21 13:44:57,177 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 13:44:57,290 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:57,320 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:57,320 - INFO - integration_test - Warmstart k=0: x0=8.257487302224682 , y0=3.9772323122638964 , psi0=0.38916513041292927 , v0=3.0000000284479 , spline0=9.299999602600609 , a0=0.0 , w0=0.0
2026-01-21 13:44:57,320 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:57,321 - INFO - integration_test - Dyn residual k=0: pred=[8.535055148426192, 4.091057144624542, 0.38916513041292927, 3.0000000284479, 9.599999605445399], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.535055148426192, 4.091057144624542, 0.38916513041292927, 3.0000000284479, 9.599999605445399], res_norm=1.382e+01
2026-01-21 13:44:57,322 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:57,323 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:57,339 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:57,529 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:57,558 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:57,614 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:57,636 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:57,689 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:57,717 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:57,769 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:57,792 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:57,841 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:57,864 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:57,916 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:57,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:57,987 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:58,008 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:58,056 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:58,077 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:58,125 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:44:58,145 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:58,188 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:58,207 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:44:58,251 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:44:59,376 - INFO - integration_test - Step 34: MPC solve successful
2026-01-21 13:44:59,673 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 13:44:59,673 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:44:59,673 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 13:44:59,674 - INFO - integration_test -   Control dict from planner: {'a': -7.952837964839776e-08, 'w': -0.09976352628152166}
2026-01-21 13:44:59,674 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:44:59,674 - INFO - integration_test -   Planner output success: True
2026-01-21 13:44:59,675 - INFO - integration_test - Step 34 completed in 2.610s
2026-01-21 13:44:59,743 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 13:44:59,745 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.53561832 4.08967071 0.37918878 3.00000002 9.5999996 ]
2026-01-21 13:44:59,745 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.215m, drift=0.322m)
2026-01-21 13:44:59,745 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 13:44:59,749 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:59,858 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.536, 4.090), path_start=(0.000, 0.000), dist=9.465m
2026-01-21 13:44:59,858 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 13:44:59,963 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:44:59,989 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:44:59,989 - INFO - integration_test - Warmstart k=0: x0=8.535618317427302 , y0=4.089670710494413 , psi0=0.3791887777847771 , v0=3.000000020495062 , spline0=9.599999604650115 , a0=0.0 , w0=0.0
2026-01-21 13:44:59,989 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:44:59,991 - INFO - integration_test - Dyn residual k=0: pred=[8.81430788800119, 4.200720809472513, 0.3791887777847771, 3.000000020495062, 9.899999606699621], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.81430788800119, 4.200720809472513, 0.3791887777847771, 3.000000020495062, 9.899999606699621], res_norm=1.423e+01
2026-01-21 13:44:59,992 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:44:59,993 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:00,010 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,186 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,205 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,249 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,270 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,319 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,343 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,386 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,409 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,452 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,473 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,521 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,544 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,591 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,612 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,658 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,678 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,728 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:00,751 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,793 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:00,812 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:00,854 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:01,808 - INFO - integration_test - Step 35: MPC solve successful
2026-01-21 13:45:01,943 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 13:45:01,943 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:01,943 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 13:45:01,944 - INFO - integration_test -   Control dict from planner: {'a': -2.921079774261437e-06, 'w': -0.052604611278484564}
2026-01-21 13:45:01,944 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:01,944 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:01,945 - INFO - integration_test - Step 35 completed in 2.201s
2026-01-21 13:45:02,007 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 13:45:02,008 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.81459868 4.19998728 0.37392832 2.99999973 9.89999958]
2026-01-21 13:45:02,009 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.142m, drift=0.134m)
2026-01-21 13:45:02,009 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 13:45:02,012 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:02,132 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.815, 4.200), path_start=(0.000, 0.000), dist=9.764m
2026-01-21 13:45:02,132 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 13:45:02,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:02,295 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:02,295 - INFO - integration_test - Warmstart k=0: x0=8.814598675769902 , y0=4.19998727580702 , psi0=0.37392831665692866 , v0=2.9999997283870847 , spline0=9.899999577488824 , a0=0.0 , w0=0.0
2026-01-21 13:45:02,295 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:02,296 - INFO - integration_test - Dyn residual k=0: pred=[9.093868535183244, 4.309569798713175, 0.37392831665692866, 2.9999997283870847, 10.199999550327533], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.093868535183244, 4.309569798713175, 0.37392831665692866, 2.9999997283870847, 10.199999550327533], res_norm=1.464e+01
2026-01-21 13:45:02,297 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:02,298 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:02,315 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:02,480 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:02,502 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:02,552 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:02,574 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:02,620 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:02,642 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:02,690 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:02,715 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:02,764 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:02,785 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:02,834 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:02,855 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:02,902 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:02,923 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:02,971 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:02,993 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:03,038 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:03,059 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:03,105 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:03,126 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:03,173 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:04,428 - INFO - integration_test - Step 36: MPC solve successful
2026-01-21 13:45:04,768 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 13:45:04,768 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:04,768 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 13:45:04,768 - INFO - integration_test -   Control dict from planner: {'a': 2.968457275376361e-06, 'w': -0.06952167498122794}
2026-01-21 13:45:04,768 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:04,768 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:04,769 - INFO - integration_test - Step 36 completed in 2.761s
2026-01-21 13:45:04,846 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 13:45:04,856 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.09424722  4.30859816  0.36697615  3.00000003 10.19999958]
2026-01-21 13:45:04,856 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.243m, drift=0.054m)
2026-01-21 13:45:04,856 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 13:45:04,860 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:04,981 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.094, 4.309), path_start=(0.000, 0.000), dist=10.063m
2026-01-21 13:45:04,981 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.063m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:04,981 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 13:45:05,087 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:05,117 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:05,117 - INFO - integration_test - Warmstart k=0: x0=9.094247215882106 , y0=4.308598159827558 , psi0=0.3669761491588059 , v0=3.0000000252328123 , spline0=10.199999580012106 , a0=0.0 , w0=0.0
2026-01-21 13:45:05,117 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:05,118 - INFO - integration_test - Dyn residual k=0: pred=[9.374272184024104, 4.416236529989142, 0.3669761491588059, 3.0000000252328123, 10.499999582535388], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.374272184024104, 4.416236529989142, 0.3669761491588059, 3.0000000252328123, 10.499999582535388], res_norm=1.506e+01
2026-01-21 13:45:05,119 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:05,119 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:05,136 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,310 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,330 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,380 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,400 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,447 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,468 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,514 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,535 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,579 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,599 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,644 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,664 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,712 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,734 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,782 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,810 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,864 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:05,888 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:05,936 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:05,956 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:06,001 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:06,989 - INFO - integration_test - Step 37: MPC solve successful
2026-01-21 13:45:07,139 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-21 13:45:07,140 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:07,140 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 13:45:07,140 - INFO - integration_test -   Control dict from planner: {'a': 4.582013704549724e-08, 'w': -0.06984417440999849}
2026-01-21 13:45:07,140 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:07,140 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:07,141 - INFO - integration_test - Step 37 completed in 2.286s
2026-01-21 13:45:07,208 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 13:45:07,210 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.3746458   4.41525775  0.35999173  3.00000003 10.49999958]
2026-01-21 13:45:07,211 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.181m, drift=0.246m)
2026-01-21 13:45:07,211 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-21 13:45:07,214 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:07,327 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.375, 4.415), path_start=(0.000, 0.000), dist=10.362m
2026-01-21 13:45:07,327 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.362m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:07,327 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 13:45:07,421 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:07,444 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:07,445 - INFO - integration_test - Warmstart k=0: x0=9.374645801670582 , y0=4.415257753274826 , psi0=0.359991731717806 , v0=3.000000029814826 , spline0=10.499999582993588 , a0=0.0 , w0=0.0
2026-01-21 13:45:07,445 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:07,446 - INFO - integration_test - Dyn residual k=0: pred=[9.655415725365565, 4.520937702826305, 0.359991731717806, 3.000000029814826, 10.79999958597507], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.655415725365565, 4.520937702826305, 0.359991731717806, 3.000000029814826, 10.79999958597507], res_norm=1.547e+01
2026-01-21 13:45:07,446 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:07,447 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:07,463 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:07,637 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:07,659 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:07,708 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:07,734 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:07,783 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:07,806 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:07,853 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:07,873 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:07,923 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:07,945 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:07,993 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:08,016 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:08,065 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:08,086 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:08,132 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:08,154 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:08,199 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:08,219 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:08,263 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:08,283 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:08,329 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:09,218 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 13:45:09,369 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-21 13:45:09,370 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:09,370 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 13:45:09,370 - INFO - integration_test -   Control dict from planner: {'a': 1.849748795377539e-09, 'w': -0.06867240297229467}
2026-01-21 13:45:09,370 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:09,370 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:09,371 - INFO - integration_test - Step 38 completed in 2.161s
2026-01-21 13:45:09,429 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 13:45:09,434 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.65577638  4.51997282  0.35312449  3.00000003 10.79999959]
2026-01-21 13:45:09,434 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.170m, drift=0.057m)
2026-01-21 13:45:09,434 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-21 13:45:09,437 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:09,549 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.656, 4.520), path_start=(0.000, 0.000), dist=10.661m
2026-01-21 13:45:09,549 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.661m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:09,549 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 13:45:09,829 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:09,853 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:09,853 - INFO - integration_test - Warmstart k=0: x0=9.65577638195341 , y0=4.519972818726494 , psi0=0.35312449142057656 , v0=3.000000029999801 , spline0=10.799999585993568 , a0=0.0 , w0=0.0
2026-01-21 13:45:09,853 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:09,854 - INFO - integration_test - Dyn residual k=0: pred=[9.937265409182924, 4.623722177034728, 0.35312449142057656, 3.000000029999801, 11.099999588993548], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.937265409182924, 4.623722177034728, 0.35312449142057656, 3.000000029999801, 11.099999588993548], res_norm=1.589e+01
2026-01-21 13:45:09,857 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:09,857 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:09,873 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,056 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,080 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,129 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,152 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,202 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,223 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,269 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,292 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,341 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,362 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,407 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,431 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,478 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,501 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,549 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,571 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,617 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:10,638 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,679 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:10,701 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:10,752 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:11,860 - INFO - integration_test - Step 39: MPC solve successful
2026-01-21 13:45:12,014 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-21 13:45:12,014 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:12,014 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 13:45:12,014 - INFO - integration_test -   Control dict from planner: {'a': -6.774928172463493e-08, 'w': -0.04568498229089672}
2026-01-21 13:45:12,014 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:12,014 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:12,015 - INFO - integration_test - Step 39 completed in 2.582s
2026-01-21 13:45:12,074 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 13:45:12,075 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.93750142  4.62307883  0.34855599  3.00000002 11.09999959]
2026-01-21 13:45:12,075 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.271m, drift=0.357m)
2026-01-21 13:45:12,075 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-21 13:45:12,078 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:12,188 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.938, 4.623), path_start=(0.000, 0.000), dist=10.960m
2026-01-21 13:45:12,188 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.960m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:12,188 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 13:45:12,282 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:12,308 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:12,308 - INFO - integration_test - Warmstart k=0: x0=9.93750141866561 , y0=4.623078826080881 , psi0=0.3485559931914869 , v0=3.0000000232248727 , spline0=11.099999588316056 , a0=0.0 , w0=0.0
2026-01-21 13:45:12,308 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:12,310 - INFO - integration_test - Dyn residual k=0: pred=[10.219461484870909, 4.72554112382496, 0.3485559931914869, 3.0000000232248727, 11.399999590638544], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.219461484870909, 4.72554112382496, 0.3485559931914869, 3.0000000232248727, 11.399999590638544], res_norm=1.630e+01
2026-01-21 13:45:12,311 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:12,312 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:12,329 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:12,503 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:12,535 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:12,593 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:12,615 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:12,664 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:12,685 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:12,735 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:12,758 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:12,807 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:12,829 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:12,874 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:12,895 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:12,951 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:12,977 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:13,032 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:13,061 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:13,117 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:13,145 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:13,199 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:13,226 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:13,279 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:14,550 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 13:45:14,696 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-21 13:45:14,696 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:14,696 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 13:45:14,696 - INFO - integration_test -   Control dict from planner: {'a': 6.774917509821373e-08, 'w': -0.09064823887376083}
2026-01-21 13:45:14,696 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:14,696 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:14,697 - INFO - integration_test - Step 40 completed in 2.623s
2026-01-21 13:45:14,768 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 13:45:14,769 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.21992202  4.72426177  0.33949117  3.00000003 11.39999959]
2026-01-21 13:45:14,770 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.161m, drift=0.169m)
2026-01-21 13:45:14,770 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-21 13:45:14,775 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:14,885 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.220, 4.724), path_start=(0.000, 0.000), dist=11.259m
2026-01-21 13:45:14,886 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.259m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:14,886 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 13:45:15,191 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:15,216 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:15,216 - INFO - integration_test - Warmstart k=0: x0=10.219922021876949 , y0=4.724261770285138 , psi0=0.33949116930411083 , v0=3.00000002999979 , spline0=11.399999591316035 , a0=0.0 , w0=0.0
2026-01-21 13:45:15,216 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:15,217 - INFO - integration_test - Dyn residual k=0: pred=[10.502799294289654, 4.8241639752274486, 0.33949116930411083, 3.00000002999979, 11.699999594316015], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.502799294289654, 4.8241639752274486, 0.33949116930411083, 3.00000002999979, 11.699999594316015], res_norm=1.672e+01
2026-01-21 13:45:15,218 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:15,219 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:15,238 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:15,423 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:15,451 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:15,510 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:15,537 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:15,591 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:15,614 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:15,664 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:15,687 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:15,737 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:15,763 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:15,821 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:15,844 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:15,893 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:15,915 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:15,970 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:15,994 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:16,045 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:16,069 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:16,120 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:16,144 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:16,198 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:17,547 - INFO - integration_test - Step 41: MPC solve successful
2026-01-21 13:45:17,722 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-21 13:45:17,723 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:17,723 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 13:45:17,723 - INFO - integration_test -   Control dict from planner: {'a': -8.05212683205662e-07, 'w': -0.05479394540390495}
2026-01-21 13:45:17,723 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:17,723 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:17,724 - INFO - integration_test - Step 41 completed in 2.955s
2026-01-21 13:45:17,798 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 13:45:17,799 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.50307158  4.82338848  0.33401177  2.99999995 11.69999959]
2026-01-21 13:45:17,800 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.219m, drift=0.019m)
2026-01-21 13:45:17,800 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-21 13:45:17,804 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:17,918 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.503, 4.823), path_start=(0.000, 0.000), dist=11.558m
2026-01-21 13:45:17,918 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.558m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:17,918 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 13:45:18,018 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:18,044 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:18,044 - INFO - integration_test - Warmstart k=0: x0=10.503071576097328 , y0=4.823388477842685 , psi0=0.33401177476372035 , v0=2.999999949478522 , spline0=11.699999586263887 , a0=0.0 , w0=0.0
2026-01-21 13:45:18,044 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:18,046 - INFO - integration_test - Dyn residual k=0: pred=[10.786491995250378, 4.9217391920028835, 0.33401177476372035, 2.999999949478522, 11.999999581211739], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.786491995250378, 4.9217391920028835, 0.33401177476372035, 2.999999949478522, 11.999999581211739], res_norm=1.714e+01
2026-01-21 13:45:18,046 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:18,047 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:18,064 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,261 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,291 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,344 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,365 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,417 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,440 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,484 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,505 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,550 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,574 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,624 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,649 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,701 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,724 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,773 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,798 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,850 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:18,872 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,917 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:18,938 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:18,985 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:20,309 - INFO - integration_test - Step 42: MPC solve successful
2026-01-21 13:45:20,455 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-21 13:45:20,456 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:20,456 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 13:45:20,456 - INFO - integration_test -   Control dict from planner: {'a': 8.052125634495041e-07, 'w': -0.10475740941590843}
2026-01-21 13:45:20,456 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:20,456 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:20,457 - INFO - integration_test - Step 42 completed in 2.658s
2026-01-21 13:45:20,517 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 13:45:20,523 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.78700196  4.92025289  0.32353603  3.00000003 11.99999959]
2026-01-21 13:45:20,523 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.222m, drift=0.281m)
2026-01-21 13:45:20,523 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-21 13:45:20,526 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:20,638 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.787, 4.920), path_start=(0.000, 0.000), dist=11.856m
2026-01-21 13:45:20,638 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.856m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:20,638 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 13:45:20,741 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:20,765 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:20,765 - INFO - integration_test - Warmstart k=0: x0=10.787001958869395 , y0=4.920252888584783 , psi0=0.32353603382212953 , v0=3.000000029999778 , spline0=11.999999589263865 , a0=0.0 , w0=0.0
2026-01-21 13:45:20,765 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:20,766 - INFO - integration_test - Dyn residual k=0: pred=[11.071437112116644, 5.015629224209509, 0.32353603382212953, 3.000000029999778, 12.299999592263843], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.071437112116644, 5.015629224209509, 0.32353603382212953, 3.000000029999778, 12.299999592263843], res_norm=1.755e+01
2026-01-21 13:45:20,767 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:20,768 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:20,784 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,012 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,035 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,090 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,115 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,171 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,199 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,257 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,282 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,336 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,359 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,409 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,431 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,479 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,499 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,543 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,566 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,615 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:21,640 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,683 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:21,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:21,750 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:23,227 - INFO - integration_test - Step 43: MPC solve successful
2026-01-21 13:45:23,576 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-21 13:45:23,576 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:23,576 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 13:45:23,577 - INFO - integration_test -   Control dict from planner: {'a': -1.0497766161228697e-06, 'w': -0.034703905005077244}
2026-01-21 13:45:23,577 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:23,577 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:23,578 - INFO - integration_test - Step 43 completed in 3.055s
2026-01-21 13:45:23,646 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 13:45:23,649 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[11.07160203  5.01513548  0.32006564  2.99999993 12.29999958]
2026-01-21 13:45:23,649 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.170m, drift=0.092m)
2026-01-21 13:45:23,649 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-21 13:45:23,652 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:23,761 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(11.072, 5.015), path_start=(0.000, 0.000), dist=12.155m
2026-01-21 13:45:23,761 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.155m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:23,762 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 13:45:23,877 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:23,902 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:23,902 - INFO - integration_test - Warmstart k=0: x0=11.071602032597378 , y0=5.015135481074939 , psi0=0.3200656433216218 , v0=2.9999999250221165 , spline0=12.299999581766077 , a0=0.0 , w0=0.0
2026-01-21 13:45:23,902 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:23,903 - INFO - integration_test - Dyn residual k=0: pred=[11.356366455533385, 5.109524139987171, 0.3200656433216218, 2.9999999250221165, 12.599999574268288], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.356366455533385, 5.109524139987171, 0.3200656433216218, 2.9999999250221165, 12.599999574268288], res_norm=1.797e+01
2026-01-21 13:45:23,903 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:23,904 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:23,919 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,093 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,115 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,161 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,184 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,232 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,256 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,305 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,325 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,372 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,400 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,449 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,470 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,520 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,541 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,587 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,607 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,659 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:24,682 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,727 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:24,750 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:24,798 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:25,928 - INFO - integration_test - Step 44: MPC solve successful
2026-01-21 13:45:26,115 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-21 13:45:26,115 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:26,115 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 13:45:26,115 - INFO - integration_test -   Control dict from planner: {'a': 1.0497764829188587e-06, 'w': -0.07529041177069137}
2026-01-21 13:45:26,115 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:26,115 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:26,117 - INFO - integration_test - Step 44 completed in 2.469s
2026-01-21 13:45:26,186 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 13:45:26,195 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.3567191   5.10845125  0.3125366   3.00000003 12.59999958]
2026-01-21 13:45:26,196 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.285m, drift=0.096m)
2026-01-21 13:45:26,196 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-21 13:45:26,199 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:26,318 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.357, 5.108), path_start=(0.000, 0.000), dist=12.453m
2026-01-21 13:45:26,318 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.453m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:26,318 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 13:45:26,433 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:26,459 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:26,459 - INFO - integration_test - Warmstart k=0: x0=11.356719096521914 , y0=5.108451253387345 , psi0=0.31253660214455264 , v0=3.000000029999765 , spline0=12.599999584766053 , a0=0.0 , w0=0.0
2026-01-21 13:45:26,459 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:26,460 - INFO - integration_test - Dyn residual k=0: pred=[11.642186107727104, 5.2006932574503635, 0.31253660214455264, 3.000000029999765, 12.899999587766029], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.642186107727104, 5.2006932574503635, 0.31253660214455264, 3.000000029999765, 12.899999587766029], res_norm=1.839e+01
2026-01-21 13:45:26,461 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:26,461 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:26,479 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:26,656 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:26,681 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:26,727 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:26,748 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:26,796 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:26,821 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:26,872 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:26,893 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:26,942 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:26,962 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:27,007 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:27,029 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:27,076 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:27,097 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:27,142 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:27,164 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:27,211 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:27,232 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:27,281 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:27,300 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:27,343 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:28,614 - INFO - integration_test - Step 45: MPC solve successful
2026-01-21 13:45:28,988 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-21 13:45:28,988 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:28,988 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 13:45:28,988 - INFO - integration_test -   Control dict from planner: {'a': -9.122946332322938e-08, 'w': -0.06895815660078312}
2026-01-21 13:45:28,988 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:28,988 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:28,989 - INFO - integration_test - Step 45 completed in 2.794s
2026-01-21 13:45:29,057 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 13:45:29,059 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.64250189  5.19970827  0.30564079  3.00000002 12.89999959]
2026-01-21 13:45:29,059 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.184m, drift=0.204m)
2026-01-21 13:45:29,060 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-21 13:45:29,066 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:29,193 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.643, 5.200), path_start=(0.000, 0.000), dist=12.751m
2026-01-21 13:45:29,193 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.751m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:29,193 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 13:45:29,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:29,324 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:29,324 - INFO - integration_test - Warmstart k=0: x0=11.642501885531548 , y0=5.199708266218256 , psi0=0.30564078648447435 , v0=3.0000000208768185 , spline0=12.899999586853735 , a0=0.0 , w0=0.0
2026-01-21 13:45:29,324 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:29,325 - INFO - integration_test - Dyn residual k=0: pred=[11.928598187405848, 5.289979564571931, 0.30564078648447435, 3.0000000208768185, 13.199999588941417], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.928598187405848, 5.289979564571931, 0.30564078648447435, 3.0000000208768185, 13.199999588941417], res_norm=1.880e+01
2026-01-21 13:45:29,326 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:29,327 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:29,342 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:29,516 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:29,537 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:29,582 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:29,603 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:29,649 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:29,672 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:29,718 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:29,739 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:29,785 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:29,807 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:29,857 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:29,879 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:29,925 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:29,946 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:29,993 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:30,013 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:30,062 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:30,084 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:30,127 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:30,148 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:30,194 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:31,366 - INFO - integration_test - Step 46: MPC solve successful
2026-01-21 13:45:31,630 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-21 13:45:31,631 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:31,631 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 13:45:31,631 - INFO - integration_test -   Control dict from planner: {'a': 9.122925659999983e-08, 'w': -0.0598351273581014}
2026-01-21 13:45:31,631 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:31,631 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:31,632 - INFO - integration_test - Step 46 completed in 2.573s
2026-01-21 13:45:31,715 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 13:45:31,717 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.92886655  5.2891231   0.29965727  3.00000003 13.19999959]
2026-01-21 13:45:31,717 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.211m, drift=0.016m)
2026-01-21 13:45:31,717 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-21 13:45:31,721 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:31,841 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.929, 5.289), path_start=(0.000, 0.000), dist=13.049m
2026-01-21 13:45:31,841 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=13.049m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:31,841 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 13:45:31,948 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:31,974 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:31,974 - INFO - integration_test - Warmstart k=0: x0=11.928866549613627 , y0=5.289123098173958 , psi0=0.2996572737486642 , v0=3.000000029999744 , spline0=13.199999589853709 , a0=0.0 , w0=0.0
2026-01-21 13:45:31,974 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:31,975 - INFO - integration_test - Dyn residual k=0: pred=[12.215497867144531, 5.377680930184922, 0.2996572737486642, 3.000000029999744, 13.499999592853683], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.215497867144531, 5.377680930184922, 0.2996572737486642, 3.000000029999744, 13.499999592853683], res_norm=1.922e+01
2026-01-21 13:45:31,976 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:31,977 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:31,993 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,164 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,188 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,234 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,254 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,303 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,323 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,367 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,390 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,438 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,460 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,507 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,529 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,579 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,600 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,646 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,674 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,724 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:32,745 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,800 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:32,830 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:32,905 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:34,021 - INFO - integration_test - Step 47: MPC solve successful
2026-01-21 13:45:34,207 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-21 13:45:34,207 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:34,207 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 13:45:34,207 - INFO - integration_test -   Control dict from planner: {'a': -9.839946061159551e-08, 'w': -0.08864958831323838}
2026-01-21 13:45:34,207 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:34,208 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:34,209 - INFO - integration_test - Step 47 completed in 2.492s
2026-01-21 13:45:34,275 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 13:45:34,284 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.21588664  5.37640929  0.29079231  3.00000002 13.49999959]
2026-01-21 13:45:34,284 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.249m, drift=0.316m)
2026-01-21 13:45:34,284 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-21 13:45:34,287 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:34,386 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.216, 5.376), path_start=(0.000, 0.000), dist=13.347m
2026-01-21 13:45:34,386 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.347m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:34,386 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 13:45:34,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:34,512 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:34,512 - INFO - integration_test - Warmstart k=0: x0=12.215886640612926 , y0=5.376409291029689 , psi0=0.29079231491734037 , v0=3.000000020159798 , spline0=13.499999591869688 , a0=0.0 , w0=0.0
2026-01-21 13:45:34,512 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:34,513 - INFO - integration_test - Dyn residual k=0: pred=[12.503291745708617, 5.462422701463889, 0.29079231491734037, 3.000000020159798, 13.799999593885667], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.503291745708617, 5.462422701463889, 0.29079231491734037, 3.000000020159798, 13.799999593885667], res_norm=1.964e+01
2026-01-21 13:45:34,513 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:34,514 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:34,528 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:34,910 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:34,934 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:34,982 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:35,004 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,054 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:35,081 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,130 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:35,151 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,198 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:35,218 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,263 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:35,287 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,332 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:35,352 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,400 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:35,421 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,468 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:35,490 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,533 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:35,553 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:35,599 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:36,959 - INFO - integration_test - Step 48: MPC solve successful
2026-01-21 13:45:37,251 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-21 13:45:37,252 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:37,252 - INFO - integration_test - === Applying control at step 48 ===
2026-01-21 13:45:37,252 - INFO - integration_test -   Control dict from planner: {'a': 9.832624730779224e-08, 'w': -0.05466346583644565}
2026-01-21 13:45:37,252 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:37,252 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:37,253 - INFO - integration_test - Step 48 completed in 2.970s
2026-01-21 13:45:37,319 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-21 13:45:37,320 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.5035254   5.46163675  0.28532597  3.00000003 13.79999959]
2026-01-21 13:45:37,321 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.177m, drift=0.127m)
2026-01-21 13:45:37,321 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-21 13:45:37,324 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:37,429 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.504, 5.462), path_start=(0.000, 0.000), dist=13.644m
2026-01-21 13:45:37,429 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.644m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:37,429 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-21 13:45:37,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:37,571 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:37,571 - INFO - integration_test - Warmstart k=0: x0=12.503525403830404 , y0=5.4616367472423075 , psi0=0.2853259683336958 , v0=3.0000000299924228 , spline0=13.79999959486893 , a0=0.0 , w0=0.0
2026-01-21 13:45:37,571 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:37,572 - INFO - integration_test - Dyn residual k=0: pred=[12.791396392682945, 5.546077824785208, 0.2853259683336958, 3.0000000299924228, 14.099999597868173], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.791396392682945, 5.546077824785208, 0.2853259683336958, 3.0000000299924228, 14.099999597868173], res_norm=2.006e+01
2026-01-21 13:45:37,573 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:37,574 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:37,593 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:37,782 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:37,804 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:37,860 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:37,884 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:37,936 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:37,960 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:38,010 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:38,033 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:38,090 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:38,112 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:38,164 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:38,186 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:38,238 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:38,263 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:38,317 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:38,341 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:38,395 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:38,420 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:38,472 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:38,498 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:38,547 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:39,503 - INFO - integration_test - Step 49: MPC solve successful
2026-01-21 13:45:39,715 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-21 13:45:39,715 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:39,715 - INFO - integration_test - === Applying control at step 49 ===
2026-01-21 13:45:39,715 - INFO - integration_test -   Control dict from planner: {'a': -1.4004678814089782e-07, 'w': -0.7448892045779445}
2026-01-21 13:45:39,716 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:39,716 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:39,717 - INFO - integration_test - Step 49 completed in 2.397s
2026-01-21 13:45:39,789 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-21 13:45:39,795 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.79427376  5.53528312  0.21083705  3.00000002 14.0999996 ]
2026-01-21 13:45:39,795 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.285m, drift=0.061m)
2026-01-21 13:45:39,796 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-21 13:45:39,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:39,923 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.794, 5.535), path_start=(0.000, 0.000), dist=13.940m
2026-01-21 13:45:39,923 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.940m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:39,923 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-21 13:45:40,033 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:40,062 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:40,062 - INFO - integration_test - Warmstart k=0: x0=12.794273763941954 , y0=5.535283115762879 , psi0=0.21083704787590132 , v0=3.000000015987744 , spline0=14.099999596467706 , a0=0.0 , w0=0.0
2026-01-21 13:45:40,062 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:40,063 - INFO - integration_test - Dyn residual k=0: pred=[13.087630589865297, 5.598066661723952, 0.21083704787590132, 3.000000015987744, 14.399999598066481], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.087630589865297, 5.598066661723952, 0.21083704787590132, 3.000000015987744, 14.399999598066481], res_norm=2.047e+01
2026-01-21 13:45:40,064 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:40,065 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:40,081 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,264 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,288 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,343 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,367 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,420 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,443 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,502 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,532 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,588 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,615 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,666 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,691 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,741 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,763 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,810 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,833 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:40,893 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:40,932 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:41,005 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:41,029 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:41,076 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:41,877 - INFO - integration_test - Step 50: MPC solve successful
2026-01-21 13:45:42,301 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-21 13:45:42,301 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:42,301 - INFO - integration_test - === Applying control at step 50 ===
2026-01-21 13:45:42,301 - INFO - integration_test -   Control dict from planner: {'a': -2.6672097231591205e-06, 'w': 0.7999999256494611}
2026-01-21 13:45:42,301 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:42,301 - INFO - integration_test -   Planner output success: True
2026-01-21 13:45:42,302 - INFO - integration_test - Step 50 completed in 2.508s
2026-01-21 13:45:42,366 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-21 13:45:42,372 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.08480776  5.60972773  0.29083704  2.99999975 14.39999957]
2026-01-21 13:45:42,372 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.213m, drift=0.239m)
2026-01-21 13:45:42,372 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-21 13:45:42,375 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:42,487 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.085, 5.610), path_start=(0.000, 0.000), dist=14.237m
2026-01-21 13:45:42,487 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.237m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:42,487 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-21 13:45:42,592 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:42,619 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:42,619 - INFO - integration_test - Warmstart k=0: x0=13.08480776484587 , y0=5.609727726629105 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=14.399999571394384 , a0=0.0 , w0=0.0
2026-01-21 13:45:42,619 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:42,620 - INFO - integration_test - Dyn residual k=0: pred=[13.372208996707629, 5.695753983553083, 0.29083704044084746, 2.9999997492667716, 14.699999546321061], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.372208996707629, 5.695753983553083, 0.29083704044084746, 2.9999997492667716, 14.699999546321061], res_norm=2.089e+01
2026-01-21 13:45:42,621 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:42,621 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:42,637 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:42,817 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:42,839 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:42,888 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:42,910 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:42,954 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:42,980 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:43,023 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:43,044 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:43,092 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:43,113 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:43,159 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:43,184 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:43,228 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:43,248 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:43,301 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:43,322 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:43,366 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:43,390 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:43,432 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:43,451 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:43,500 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:47,091 - WARNING - integration_test - Step 51: MPC solve failed
2026-01-21 13:45:47,091 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:45:47,335 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-21 13:45:47,336 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:47,336 - INFO - integration_test - === Applying control at step 51 ===
2026-01-21 13:45:47,336 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:45:47,336 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:47,336 - INFO - integration_test -   Planner output success: False
2026-01-21 13:45:47,336 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:45:47,337 - INFO - integration_test - Step 51 completed in 4.966s
2026-01-21 13:45:47,412 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-21 13:45:47,417 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.372209    5.69575398  0.29083704  2.99999975 14.69999955]
2026-01-21 13:45:47,418 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.221m, drift=0.051m)
2026-01-21 13:45:47,418 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-21 13:45:47,421 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:47,543 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.372, 5.696), path_start=(0.000, 0.000), dist=14.535m
2026-01-21 13:45:47,543 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.535m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:47,543 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-21 13:45:47,645 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:47,676 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:47,677 - INFO - integration_test - Warmstart k=0: x0=13.372208996707629 , y0=5.695753983553083 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=14.699999546321061 , a0=0.0 , w0=0.0
2026-01-21 13:45:47,677 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:47,678 - INFO - integration_test - Dyn residual k=0: pred=[13.659610228569388, 5.781780240477062, 0.29083704044084746, 2.9999997492667716, 14.999999521247739], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.659610228569388, 5.781780240477062, 0.29083704044084746, 2.9999997492667716, 14.999999521247739], res_norm=2.131e+01
2026-01-21 13:45:47,678 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:47,679 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:47,696 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:47,876 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:47,900 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:47,948 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:47,970 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,016 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:48,037 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,086 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:48,107 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,154 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:48,177 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,222 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:48,245 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,296 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:48,319 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,369 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:48,395 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,443 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:48,467 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,552 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:48,588 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:48,641 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:51,640 - WARNING - integration_test - Step 52: MPC solve failed
2026-01-21 13:45:51,640 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 13:45:52,094 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-21 13:45:52,094 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:52,094 - INFO - integration_test - === Applying control at step 52 ===
2026-01-21 13:45:52,094 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:45:52,094 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:52,094 - INFO - integration_test -   Planner output success: False
2026-01-21 13:45:52,094 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:45:52,096 - INFO - integration_test - Step 52 completed in 4.679s
2026-01-21 13:45:52,165 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-21 13:45:52,172 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.65961023  5.78178024  0.29083704  2.99999975 14.99999952]
2026-01-21 13:45:52,173 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.260m, drift=0.351m)
2026-01-21 13:45:52,173 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-21 13:45:52,177 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:52,294 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.660, 5.782), path_start=(0.000, 0.000), dist=14.833m
2026-01-21 13:45:52,294 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.833m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:52,294 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-21 13:45:52,400 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:52,424 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:52,424 - INFO - integration_test - Warmstart k=0: x0=13.659610228569388 , y0=5.781780240477062 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=14.999999521247739 , a0=0.0 , w0=0.0
2026-01-21 13:45:52,424 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:52,425 - INFO - integration_test - Dyn residual k=0: pred=[13.947011460431147, 5.86780649740104, 0.29083704044084746, 2.9999997492667716, 15.299999496174417], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.947011460431147, 5.86780649740104, 0.29083704044084746, 2.9999997492667716, 15.299999496174417], res_norm=2.173e+01
2026-01-21 13:45:52,426 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:52,427 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:52,442 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:52,624 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:52,645 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:52,700 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:52,736 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:52,812 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:52,836 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:52,892 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:52,916 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:52,969 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:52,995 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:53,041 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:53,062 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:53,110 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:53,135 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:53,187 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:53,207 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:53,256 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:53,284 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:53,331 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:53,356 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:53,406 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:56,703 - WARNING - integration_test - Step 53: MPC solve failed
2026-01-21 13:45:56,703 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 13:45:57,004 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-21 13:45:57,004 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:45:57,004 - INFO - integration_test - === Applying control at step 53 ===
2026-01-21 13:45:57,004 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:45:57,004 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:45:57,004 - INFO - integration_test -   Planner output success: False
2026-01-21 13:45:57,004 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:45:57,006 - INFO - integration_test - Step 53 completed in 4.834s
2026-01-21 13:45:57,088 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-21 13:45:57,089 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.94701146  5.8678065   0.29083704  2.99999975 15.2999995 ]
2026-01-21 13:45:57,090 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.171m, drift=0.163m)
2026-01-21 13:45:57,090 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-21 13:45:57,093 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:57,207 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.947, 5.868), path_start=(0.000, 0.000), dist=15.131m
2026-01-21 13:45:57,207 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.131m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:45:57,208 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-21 13:45:57,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:45:57,335 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:45:57,335 - INFO - integration_test - Warmstart k=0: x0=13.947011460431147 , y0=5.86780649740104 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=15.299999496174417 , a0=0.0 , w0=0.0
2026-01-21 13:45:57,335 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:45:57,336 - INFO - integration_test - Dyn residual k=0: pred=[14.234412692292906, 5.953832754325019, 0.29083704044084746, 2.9999997492667716, 15.599999471101095], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.234412692292906, 5.953832754325019, 0.29083704044084746, 2.9999997492667716, 15.599999471101095], res_norm=2.215e+01
2026-01-21 13:45:57,337 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:57,338 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:45:57,354 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:57,528 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:57,555 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:57,603 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:57,624 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:57,672 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:57,694 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:57,741 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:57,761 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:57,809 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:57,830 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:57,878 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:57,902 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:57,954 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:57,977 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:58,023 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:58,046 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:58,094 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:45:58,115 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:58,165 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:45:58,186 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:45:58,229 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:01,110 - WARNING - integration_test - Step 54: MPC solve failed
2026-01-21 13:46:01,110 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 13:46:01,403 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-21 13:46:01,403 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:46:01,403 - INFO - integration_test - === Applying control at step 54 ===
2026-01-21 13:46:01,403 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:01,403 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:46:01,403 - INFO - integration_test -   Planner output success: False
2026-01-21 13:46:01,403 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:01,404 - INFO - integration_test - Step 54 completed in 4.315s
2026-01-21 13:46:01,480 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-21 13:46:01,481 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[14.23441269  5.95383275  0.29083704  2.99999975 15.59999947]
2026-01-21 13:46:01,482 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.270m, drift=0.026m)
2026-01-21 13:46:01,482 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-21 13:46:01,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:01,599 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(14.234, 5.954), path_start=(0.000, 0.000), dist=15.429m
2026-01-21 13:46:01,599 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.429m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:46:01,599 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-21 13:46:01,952 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:01,979 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:46:01,979 - INFO - integration_test - Warmstart k=0: x0=14.234412692292906 , y0=5.953832754325019 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=15.599999471101095 , a0=0.0 , w0=0.0
2026-01-21 13:46:01,979 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:46:01,980 - INFO - integration_test - Dyn residual k=0: pred=[14.521813924154666, 6.039859011248997, 0.29083704044084746, 2.9999997492667716, 15.899999446027772], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.521813924154666, 6.039859011248997, 0.29083704044084746, 2.9999997492667716, 15.899999446027772], res_norm=2.257e+01
2026-01-21 13:46:01,981 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:01,981 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:01,998 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,190 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,215 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,266 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,292 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,343 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,364 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,415 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,440 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,490 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,516 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,572 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,596 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,644 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,667 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,715 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,738 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,787 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:02,810 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,854 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:02,875 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:02,924 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:05,813 - WARNING - integration_test - Step 55: MPC solve failed
2026-01-21 13:46:05,813 - WARNING - integration_test -   Consecutive MPC failures: 5/15
2026-01-21 13:46:06,053 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-21 13:46:06,053 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:46:06,053 - INFO - integration_test - === Applying control at step 55 ===
2026-01-21 13:46:06,054 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:06,054 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:46:06,054 - INFO - integration_test -   Planner output success: False
2026-01-21 13:46:06,054 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:06,055 - INFO - integration_test - Step 55 completed in 4.574s
2026-01-21 13:46:06,133 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-21 13:46:06,143 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.52181392  6.03985901  0.29083704  2.99999975 15.89999945]
2026-01-21 13:46:06,144 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.164m, drift=0.274m)
2026-01-21 13:46:06,144 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-21 13:46:06,147 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:06,253 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.522, 6.040), path_start=(0.000, 0.000), dist=15.728m
2026-01-21 13:46:06,253 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.728m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:46:06,254 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-21 13:46:06,358 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:06,384 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:46:06,384 - INFO - integration_test - Warmstart k=0: x0=14.521813924154666 , y0=6.039859011248997 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=15.899999446027772 , a0=0.0 , w0=0.0
2026-01-21 13:46:06,384 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:46:06,385 - INFO - integration_test - Dyn residual k=0: pred=[14.809215156016425, 6.125885268172976, 0.29083704044084746, 2.9999997492667716, 16.19999942095445], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.809215156016425, 6.125885268172976, 0.29083704044084746, 2.9999997492667716, 16.19999942095445], res_norm=2.299e+01
2026-01-21 13:46:06,386 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:06,387 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:06,402 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:06,587 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:06,610 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:06,656 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:06,678 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:06,733 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:06,760 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:06,811 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:06,833 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:06,879 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:06,902 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:06,954 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:06,977 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:07,025 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:07,046 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:07,097 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:07,119 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:07,169 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:07,192 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:07,240 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:07,260 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:07,309 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:10,367 - WARNING - integration_test - Step 56: MPC solve failed
2026-01-21 13:46:10,367 - WARNING - integration_test -   Consecutive MPC failures: 6/15
2026-01-21 13:46:10,628 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-21 13:46:10,628 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:46:10,628 - INFO - integration_test - === Applying control at step 56 ===
2026-01-21 13:46:10,628 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:10,628 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:46:10,628 - INFO - integration_test -   Planner output success: False
2026-01-21 13:46:10,628 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:10,630 - INFO - integration_test - Step 56 completed in 4.487s
2026-01-21 13:46:10,702 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-21 13:46:10,720 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.80921516  6.12588527  0.29083704  2.99999975 16.19999942]
2026-01-21 13:46:10,721 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.177m, drift=0.086m)
2026-01-21 13:46:10,721 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-21 13:46:10,725 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:10,842 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.809, 6.126), path_start=(0.000, 0.000), dist=16.026m
2026-01-21 13:46:10,842 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=16.026m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:46:10,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-21 13:46:10,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:10,987 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:46:10,987 - INFO - integration_test - Warmstart k=0: x0=14.809215156016425 , y0=6.125885268172976 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=16.19999942095445 , a0=0.0 , w0=0.0
2026-01-21 13:46:10,987 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:46:10,988 - INFO - integration_test - Dyn residual k=0: pred=[15.096616387878184, 6.211911525096954, 0.29083704044084746, 2.9999997492667716, 16.499999395881126], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.096616387878184, 6.211911525096954, 0.29083704044084746, 2.9999997492667716, 16.499999395881126], res_norm=2.341e+01
2026-01-21 13:46:10,989 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:10,990 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:11,007 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:11,448 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:11,472 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:11,520 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:11,544 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:11,595 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:11,618 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:11,662 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:11,687 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:11,737 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:11,760 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:11,810 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:11,834 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:11,881 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:11,902 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:11,955 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:11,981 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:12,032 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:12,055 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:12,101 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:12,122 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:12,170 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:15,310 - WARNING - integration_test - Step 57: MPC solve failed
2026-01-21 13:46:15,310 - WARNING - integration_test -   Consecutive MPC failures: 7/15
2026-01-21 13:46:15,591 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-21 13:46:15,592 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:46:15,592 - INFO - integration_test - === Applying control at step 57 ===
2026-01-21 13:46:15,592 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:15,592 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:46:15,592 - INFO - integration_test -   Planner output success: False
2026-01-21 13:46:15,592 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:15,593 - INFO - integration_test - Step 57 completed in 4.874s
2026-01-21 13:46:15,660 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-21 13:46:15,668 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[15.09661639  6.21191153  0.29083704  2.99999975 16.4999994 ]
2026-01-21 13:46:15,668 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.205m, drift=0.386m)
2026-01-21 13:46:15,669 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-21 13:46:15,672 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:15,798 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(15.097, 6.212), path_start=(0.000, 0.000), dist=16.325m
2026-01-21 13:46:15,798 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.325m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:46:15,798 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-21 13:46:15,904 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:15,931 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:46:15,931 - INFO - integration_test - Warmstart k=0: x0=15.096616387878184 , y0=6.211911525096954 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=16.499999395881126 , a0=0.0 , w0=0.0
2026-01-21 13:46:15,932 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:46:15,932 - INFO - integration_test - Dyn residual k=0: pred=[15.384017619739943, 6.297937782020933, 0.29083704044084746, 2.9999997492667716, 16.799999370807804], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.384017619739943, 6.297937782020933, 0.29083704044084746, 2.9999997492667716, 16.799999370807804], res_norm=2.383e+01
2026-01-21 13:46:15,933 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:15,934 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:15,954 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,130 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,153 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,201 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,222 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,270 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,292 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,338 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,362 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,408 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,429 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,475 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,496 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,544 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,566 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,615 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,636 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,681 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:16,704 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,753 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:16,776 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:16,827 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:19,755 - WARNING - integration_test - Step 58: MPC solve failed
2026-01-21 13:46:19,755 - WARNING - integration_test -   Consecutive MPC failures: 8/15
2026-01-21 13:46:20,058 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-21 13:46:20,059 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:46:20,059 - INFO - integration_test - === Applying control at step 58 ===
2026-01-21 13:46:20,059 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:20,059 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:46:20,059 - INFO - integration_test -   Planner output success: False
2026-01-21 13:46:20,059 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:20,060 - INFO - integration_test - Step 58 completed in 4.393s
2026-01-21 13:46:20,132 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-21 13:46:20,143 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.38401762  6.29793778  0.29083704  2.99999975 16.79999937]
2026-01-21 13:46:20,144 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.091m, drift=0.198m)
2026-01-21 13:46:20,144 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-21 13:46:20,149 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:20,264 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.384, 6.298), path_start=(0.000, 0.000), dist=16.623m
2026-01-21 13:46:20,264 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.623m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:46:20,264 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-21 13:46:20,370 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:20,393 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:46:20,393 - INFO - integration_test - Warmstart k=0: x0=15.384017619739943 , y0=6.297937782020933 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=16.799999370807804 , a0=0.0 , w0=0.0
2026-01-21 13:46:20,394 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:46:20,394 - INFO - integration_test - Dyn residual k=0: pred=[15.671418851601702, 6.383964038944911, 0.29083704044084746, 2.9999997492667716, 17.09999934573448], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.671418851601702, 6.383964038944911, 0.29083704044084746, 2.9999997492667716, 17.09999934573448], res_norm=2.425e+01
2026-01-21 13:46:20,395 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:20,396 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:20,412 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:20,593 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:20,613 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:20,659 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:20,683 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:20,729 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:20,751 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:20,801 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:20,822 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:20,869 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:20,891 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:20,935 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:20,960 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:21,010 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:21,031 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:21,081 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:21,103 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:21,149 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:21,173 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:21,220 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:21,240 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:21,286 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:35,348 - WARNING - integration_test - Step 59: MPC solve failed
2026-01-21 13:46:35,348 - WARNING - integration_test -   Consecutive MPC failures: 9/15
2026-01-21 13:46:35,634 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-21 13:46:35,634 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:46:35,634 - INFO - integration_test - === Applying control at step 59 ===
2026-01-21 13:46:35,634 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:35,634 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:46:35,634 - INFO - integration_test -   Planner output success: False
2026-01-21 13:46:35,634 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:35,636 - INFO - integration_test - Step 59 completed in 15.493s
2026-01-21 13:46:35,707 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-21 13:46:35,717 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.67141885  6.38396404  0.29083704  2.99999975 17.09999935]
2026-01-21 13:46:35,718 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.250m, drift=0.009m)
2026-01-21 13:46:35,718 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-21 13:46:35,725 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:35,842 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.671, 6.384), path_start=(0.000, 0.000), dist=16.922m
2026-01-21 13:46:35,842 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.922m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:46:35,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-21 13:46:35,944 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:35,973 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:46:35,973 - INFO - integration_test - Warmstart k=0: x0=15.671418851601702 , y0=6.383964038944911 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=17.09999934573448 , a0=0.0 , w0=0.0
2026-01-21 13:46:35,973 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:46:35,974 - INFO - integration_test - Dyn residual k=0: pred=[15.958820083463461, 6.4699902958688895, 0.29083704044084746, 2.9999997492667716, 17.39999932066116], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.958820083463461, 6.4699902958688895, 0.29083704044084746, 2.9999997492667716, 17.39999932066116], res_norm=2.467e+01
2026-01-21 13:46:35,975 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:35,976 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:35,994 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,172 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,194 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,238 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,264 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,312 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,333 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,381 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,402 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,452 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,473 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,518 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,538 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,587 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,608 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,653 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,673 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,717 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:36,739 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,789 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:36,810 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:36,853 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:54,541 - WARNING - integration_test - Step 60: MPC solve failed
2026-01-21 13:46:54,541 - WARNING - integration_test -   Consecutive MPC failures: 10/15
2026-01-21 13:46:54,799 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-21 13:46:54,799 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:46:54,799 - INFO - integration_test - === Applying control at step 60 ===
2026-01-21 13:46:54,799 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:54,799 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:46:54,799 - INFO - integration_test -   Planner output success: False
2026-01-21 13:46:54,799 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:46:54,801 - INFO - integration_test - Step 60 completed in 19.084s
2026-01-21 13:46:54,870 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-21 13:46:54,879 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[15.95882008  6.4699903   0.29083704  2.99999975 17.39999932]
2026-01-21 13:46:54,880 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.067m, drift=0.309m)
2026-01-21 13:46:54,880 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-21 13:46:54,886 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:55,001 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.959, 6.470), path_start=(0.000, 0.000), dist=17.220m
2026-01-21 13:46:55,001 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.220m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:46:55,001 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-21 13:46:55,109 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:55,138 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:46:55,138 - INFO - integration_test - Warmstart k=0: x0=15.958820083463461 , y0=6.4699902958688895 , psi0=0.29083704044084746 , v0=2.9999997492667716 , spline0=17.39999932066116 , a0=0.0 , w0=0.0
2026-01-21 13:46:55,138 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:46:55,139 - INFO - integration_test - Dyn residual k=0: pred=[16.24622131532522, 6.556016552792868, 0.29083704044084746, 2.9999997492667716, 17.699999295587837], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.24622131532522, 6.556016552792868, 0.29083704044084746, 2.9999997492667716, 17.699999295587837], res_norm=2.509e+01
2026-01-21 13:46:55,140 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:55,140 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:55,157 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,338 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,363 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,412 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,434 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,482 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,504 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,548 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,571 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,621 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,642 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,693 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,716 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,759 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,783 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,829 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,850 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,897 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:55,916 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:55,958 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:55,982 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:56,025 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:57,354 - INFO - integration_test - Step 61: MPC solve successful
2026-01-21 13:46:57,879 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-21 13:46:57,879 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:46:57,879 - INFO - integration_test - === Applying control at step 61 ===
2026-01-21 13:46:57,879 - INFO - integration_test -   Control dict from planner: {'a': 2.806173922278384e-06, 'w': -0.8000000083065385}
2026-01-21 13:46:57,879 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:46:57,879 - INFO - integration_test -   Planner output success: True
2026-01-21 13:46:57,881 - INFO - integration_test - Step 61 completed in 3.001s
2026-01-21 13:46:57,953 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-21 13:46:57,955 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.24935409  6.54443491  0.21083704  3.00000003 17.69999932]
2026-01-21 13:46:57,955 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.155m, drift=0.121m)
2026-01-21 13:46:57,955 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-21 13:46:57,959 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:58,075 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.249, 6.544), path_start=(0.000, 0.000), dist=17.518m
2026-01-21 13:46:58,075 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.518m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:46:58,075 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-21 13:46:58,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:46:58,208 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:46:58,208 - INFO - integration_test - Warmstart k=0: x0=16.249354085334232 , y0=6.544434905693726 , psi0=0.21083703961019362 , v0=3.000000029884164 , spline0=17.699999323649575 , a0=0.0 , w0=0.0
2026-01-21 13:46:58,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:46:58,209 - INFO - integration_test - Dyn residual k=0: pred=[16.542710913135394, 6.60721844952082, 0.21083703961019362, 3.000000029884164, 17.99999932663799], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.542710913135394, 6.60721844952082, 0.21083703961019362, 3.000000029884164, 17.99999932663799], res_norm=2.550e+01
2026-01-21 13:46:58,210 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:58,211 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:46:58,228 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,398 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,419 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,467 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,491 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,535 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,558 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,608 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,628 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,673 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,694 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,736 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,757 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,808 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,829 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,876 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,899 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:58,943 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:46:58,963 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:59,011 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:46:59,031 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:46:59,076 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:00,549 - INFO - integration_test - Step 62: MPC solve successful
2026-01-21 13:47:00,793 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-21 13:47:00,793 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:00,793 - INFO - integration_test - === Applying control at step 62 ===
2026-01-21 13:47:00,793 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019995612, 'w': -0.6555521355324425}
2026-01-21 13:47:00,793 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:00,793 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:00,794 - INFO - integration_test - Step 62 completed in 2.840s
2026-01-21 13:47:00,861 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-21 13:47:00,874 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.53469852  6.59589803  0.14528183  2.80000003 17.97999933]
2026-01-21 13:47:00,875 - DEBUG - integration_test - Step 63: Using propagated spline 17.9800 (close to path, dist=0.138m, drift=0.401m)
2026-01-21 13:47:00,875 - DEBUG - integration_test -   Set spline state to 17.9800
2026-01-21 13:47:00,880 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:00,995 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.535, 6.596), path_start=(0.000, 0.000), dist=17.802m
2026-01-21 13:47:00,995 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.802m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:00,995 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-21 13:47:01,099 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:01,124 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:01,124 - INFO - integration_test - Warmstart k=0: x0=16.53469852248945 , y0=6.5958980281247195 , psi0=0.1452818260569494 , v0=2.800000027884603 , spline0=17.979999326438033 , a0=0.0 , w0=0.0
2026-01-21 13:47:01,124 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:01,125 - INFO - integration_test - Dyn residual k=0: pred=[16.811748765805135, 6.636433990432998, 0.1452818260569494, 2.800000027884603, 18.259999329226492], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.811748765805135, 6.636433990432998, 0.1452818260569494, 2.800000027884603, 18.259999329226492], res_norm=2.585e+01
2026-01-21 13:47:01,126 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:01,126 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:01,143 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,320 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,345 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,405 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,442 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,512 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,532 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,580 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,603 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,648 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,670 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,718 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,740 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,791 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,813 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,859 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,881 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:01,939 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:01,965 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:02,015 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:02,036 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:02,081 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:03,295 - INFO - integration_test - Step 63: MPC solve successful
2026-01-21 13:47:03,637 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=17.980)
2026-01-21 13:47:03,637 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:03,637 - INFO - integration_test - === Applying control at step 63 ===
2026-01-21 13:47:03,637 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199099324, 'w': 0.18248820754543804}
2026-01-21 13:47:03,637 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:03,638 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:03,639 - INFO - integration_test - Step 63 completed in 2.765s
2026-01-21 13:47:03,714 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-21 13:47:03,722 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.80148732  6.63739163  0.16353065  2.60000003 18.23999933]
2026-01-21 13:47:03,723 - DEBUG - integration_test - Step 64: Using propagated spline 18.2400 (close to path, dist=0.111m, drift=0.173m)
2026-01-21 13:47:03,723 - DEBUG - integration_test -   Set spline state to 18.2400
2026-01-21 13:47:03,728 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:03,854 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.801, 6.637), path_start=(0.000, 0.000), dist=18.065m
2026-01-21 13:47:03,854 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=18.065m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:03,854 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-21 13:47:03,966 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:03,996 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:03,996 - INFO - integration_test - Warmstart k=0: x0=16.801487316699397 , y0=6.637391625171267 , psi0=0.1635306468114932 , v0=2.6000000258936096 , spline0=18.239999329027395 , a0=0.0 , w0=0.0
2026-01-21 13:47:03,996 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:03,998 - INFO - integration_test - Dyn residual k=0: pred=[17.058018564382277, 6.679720342476816, 0.1635306468114932, 2.6000000258936096, 18.499999331616756], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.058018564382277, 6.679720342476816, 0.1635306468114932, 2.6000000258936096, 18.499999331616756], res_norm=2.617e+01
2026-01-21 13:47:03,999 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:04,000 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:04,018 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,204 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,227 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,274 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,298 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,344 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,365 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,413 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,435 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,479 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,501 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,546 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,569 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,615 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,634 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,678 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,699 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,742 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:04,767 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,815 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:04,836 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:04,880 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:05,911 - INFO - integration_test - Step 64: MPC solve successful
2026-01-21 13:47:06,521 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.240)
2026-01-21 13:47:06,521 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:06,521 - INFO - integration_test - === Applying control at step 64 ===
2026-01-21 13:47:06,521 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019998069, 'w': -0.0472665999797011}
2026-01-21 13:47:06,521 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:06,521 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:06,522 - INFO - integration_test - Step 64 completed in 2.801s
2026-01-21 13:47:06,588 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-21 13:47:06,597 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[17.04824598  6.67751699  0.15880399  2.40000002 18.47999933]
2026-01-21 13:47:06,598 - DEBUG - integration_test - Step 65: Using propagated spline 18.4800 (close to path, dist=0.149m, drift=0.413m)
2026-01-21 13:47:06,598 - DEBUG - integration_test -   Set spline state to 18.4800
2026-01-21 13:47:06,603 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:06,712 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(17.048, 6.678), path_start=(0.000, 0.000), dist=18.309m
2026-01-21 13:47:06,712 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.309m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:06,713 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-21 13:47:06,820 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:06,844 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:06,844 - INFO - integration_test - Warmstart k=0: x0=17.048245984298678 , y0=6.677516990097496 , psi0=0.1588039868135231 , v0=2.400000023893803 , spline0=18.479999331416774 , a0=0.0 , w0=0.0
2026-01-21 13:47:06,844 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:06,845 - INFO - integration_test - Dyn residual k=0: pred=[17.28522609639827, 6.715469955939016, 0.1588039868135231, 2.400000023893803, 18.719999333806154], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.28522609639827, 6.715469955939016, 0.1588039868135231, 2.400000023893803, 18.719999333806154], res_norm=2.646e+01
2026-01-21 13:47:06,846 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:06,847 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:06,862 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,041 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,068 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,116 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,138 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,187 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,209 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,255 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,277 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,324 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,347 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,398 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,421 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,468 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,491 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,539 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,562 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,612 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:07,634 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,679 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:07,700 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:07,743 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:08,914 - INFO - integration_test - Step 65: MPC solve successful
2026-01-21 13:47:09,228 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.480)
2026-01-21 13:47:09,228 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:09,228 - INFO - integration_test - === Applying control at step 65 ===
2026-01-21 13:47:09,228 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019998292, 'w': -0.008501337040919082}
2026-01-21 13:47:09,228 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:09,229 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:09,230 - INFO - integration_test - Step 65 completed in 2.633s
2026-01-21 13:47:09,300 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-21 13:47:09,308 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.27536713  6.71379344  0.15795385  2.20000002 18.69999933]
2026-01-21 13:47:09,308 - DEBUG - integration_test - Step 66: Using propagated spline 18.7000 (close to path, dist=0.146m, drift=0.144m)
2026-01-21 13:47:09,308 - DEBUG - integration_test -   Set spline state to 18.7000
2026-01-21 13:47:09,316 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:09,454 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.275, 6.714), path_start=(0.000, 0.000), dist=18.534m
2026-01-21 13:47:09,454 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.534m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:09,454 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-21 13:47:09,581 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:09,606 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:09,606 - INFO - integration_test - Warmstart k=0: x0=17.27536713459327 , y0=6.7137934419356355 , psi0=0.1579538531094312 , v0=2.2000000218939735 , spline0=18.699999333606172 , a0=0.0 , w0=0.0
2026-01-21 13:47:09,606 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:09,607 - INFO - integration_test - Dyn residual k=0: pred=[17.492628401851295, 6.748398972025096, 0.1579538531094312, 2.2000000218939735, 18.91999933579557], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.492628401851295, 6.748398972025096, 0.1579538531094312, 2.2000000218939735, 18.91999933579557], res_norm=2.673e+01
2026-01-21 13:47:09,608 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:09,608 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:09,623 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:09,798 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:09,819 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:09,868 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:09,889 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:09,933 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:09,954 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:10,004 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:10,026 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:10,075 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:10,095 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:10,143 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:10,165 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:10,215 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:10,236 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:10,282 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:10,303 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:10,348 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:10,368 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:10,417 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:10,437 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:10,482 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:11,493 - INFO - integration_test - Step 66: MPC solve successful
2026-01-21 13:47:11,783 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.700)
2026-01-21 13:47:11,783 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:11,784 - INFO - integration_test - === Applying control at step 66 ===
2026-01-21 13:47:11,784 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019998354, 'w': 0.04341407834056157}
2026-01-21 13:47:11,784 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:11,784 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:11,785 - INFO - integration_test - Step 66 completed in 2.477s
2026-01-21 13:47:11,856 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-21 13:47:11,870 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.48268169  6.74726892  0.16229526  2.00000002 18.89999934]
2026-01-21 13:47:11,871 - DEBUG - integration_test - Step 67: Using propagated spline 18.9000 (close to path, dist=0.085m, drift=0.344m)
2026-01-21 13:47:11,871 - DEBUG - integration_test -   Set spline state to 18.9000
2026-01-21 13:47:11,876 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:11,990 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.483, 6.747), path_start=(0.000, 0.000), dist=18.740m
2026-01-21 13:47:11,990 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.740m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:11,990 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-21 13:47:12,101 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:12,127 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:12,127 - INFO - integration_test - Warmstart k=0: x0=17.4826816881299 , y0=6.747268918872049 , psi0=0.16229526094348734 , v0=2.000000019894138 , spline0=18.899999335595584 , a0=0.0 , w0=0.0
2026-01-21 13:47:12,127 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:12,128 - INFO - integration_test - Dyn residual k=0: pred=[17.680053491367968, 6.77958566503127, 0.16229526094348734, 2.000000019894138, 19.099999337584997], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.680053491367968, 6.77958566503127, 0.16229526094348734, 2.000000019894138, 19.099999337584997], res_norm=2.697e+01
2026-01-21 13:47:12,129 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:12,130 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:12,146 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,324 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,346 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,400 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,425 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,472 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,495 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,543 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,564 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,614 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,636 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,683 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,703 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,748 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,769 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,819 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,841 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,888 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:12,911 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:12,956 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:12,977 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:13,024 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:14,230 - INFO - integration_test - Step 67: MPC solve successful
2026-01-21 13:47:14,777 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=18.900)
2026-01-21 13:47:14,778 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:14,778 - INFO - integration_test - === Applying control at step 67 ===
2026-01-21 13:47:14,778 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199937347, 'w': -0.11126674561551803}
2026-01-21 13:47:14,778 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:14,778 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:14,779 - INFO - integration_test - Step 67 completed in 2.909s
2026-01-21 13:47:14,857 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-21 13:47:14,869 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.69010948  6.78002955  0.15116859  2.20000002 19.11999934]
2026-01-21 13:47:14,870 - DEBUG - integration_test - Step 68: Using propagated spline 19.1200 (close to path, dist=0.238m, drift=0.076m)
2026-01-21 13:47:14,870 - DEBUG - integration_test -   Set spline state to 19.1200
2026-01-21 13:47:14,874 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:14,992 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.690, 6.780), path_start=(0.000, 0.000), dist=18.945m
2026-01-21 13:47:14,992 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=18.945m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:14,992 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-21 13:47:15,097 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:15,122 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:15,122 - INFO - integration_test - Warmstart k=0: x0=17.690109476465683 , y0=6.780029548815466 , psi0=0.15116858638193553 , v0=2.200000021893511 , spline0=19.119999337784936 , a0=0.0 , w0=0.0
2026-01-21 13:47:15,122 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:15,123 - INFO - integration_test - Dyn residual k=0: pred=[17.907600548355518, 6.81316011795524, 0.15116858638193553, 2.200000021893511, 19.339999339974288], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.907600548355518, 6.81316011795524, 0.15116858638193553, 2.200000021893511, 19.339999339974288], res_norm=2.731e+01
2026-01-21 13:47:15,124 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:15,124 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:15,142 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,320 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,341 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,388 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,412 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,457 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,481 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,528 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,549 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,596 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,617 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,660 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,684 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,730 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,750 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,797 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,821 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,867 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:15,890 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:15,932 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:15,953 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:16,000 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:16,861 - INFO - integration_test - Step 68: MPC solve successful
2026-01-21 13:47:17,163 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.120)
2026-01-21 13:47:17,164 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:17,164 - INFO - integration_test - === Applying control at step 68 ===
2026-01-21 13:47:17,164 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000155667172, 'w': -0.011938789624957844}
2026-01-21 13:47:17,164 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:17,164 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:17,165 - INFO - integration_test - Step 68 completed in 2.297s
2026-01-21 13:47:17,243 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-21 13:47:17,253 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[17.91750743  6.81452835  0.14997471  2.40000002 19.35999934]
2026-01-21 13:47:17,253 - DEBUG - integration_test - Step 69: Using propagated spline 19.3600 (close to path, dist=0.053m, drift=0.316m)
2026-01-21 13:47:17,253 - DEBUG - integration_test -   Set spline state to 19.3600
2026-01-21 13:47:17,259 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:17,369 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(17.918, 6.815), path_start=(0.000, 0.000), dist=19.170m
2026-01-21 13:47:17,369 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.170m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:17,369 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-21 13:47:17,476 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:17,504 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:17,504 - INFO - integration_test - Warmstart k=0: x0=17.917507426502763 , y0=6.8145283470901 , psi0=0.14997470741943975 , v0=2.400000023450183 , spline0=19.359999340129953 , a0=0.0 , w0=0.0
2026-01-21 13:47:17,504 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:17,505 - INFO - integration_test - Dyn residual k=0: pred=[18.154813394572447, 6.850387497165355, 0.14997470741943975, 2.400000023450183, 19.59999934247497], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.154813394572447, 6.850387497165355, 0.14997470741943975, 2.400000023450183, 19.59999934247497], res_norm=2.769e+01
2026-01-21 13:47:17,506 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:17,507 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:17,523 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:17,701 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:17,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:17,776 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:17,799 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:17,848 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:17,870 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:17,917 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:17,937 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:17,987 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:18,010 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:18,062 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:18,086 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:18,132 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:18,152 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:18,203 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:18,226 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:18,275 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:18,297 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:18,342 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:18,365 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:18,415 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:19,536 - INFO - integration_test - Step 69: MPC solve successful
2026-01-21 13:47:19,900 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.360)
2026-01-21 13:47:19,900 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:19,900 - INFO - integration_test - === Applying control at step 69 ===
2026-01-21 13:47:19,900 - INFO - integration_test -   Control dict from planner: {'a': 1.9999998936326777, 'w': -0.014377039693784583}
2026-01-21 13:47:19,900 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:19,900 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:19,902 - INFO - integration_test - Step 69 completed in 2.649s
2026-01-21 13:47:19,973 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-21 13:47:19,983 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.16472827  6.85170155  0.148537    2.60000001 19.61999934]
2026-01-21 13:47:19,984 - DEBUG - integration_test - Step 70: Using propagated spline 19.6200 (close to path, dist=0.254m, drift=0.576m)
2026-01-21 13:47:19,984 - DEBUG - integration_test -   Set spline state to 19.6200
2026-01-21 13:47:19,990 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:20,108 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.165, 6.852), path_start=(0.000, 0.000), dist=19.414m
2026-01-21 13:47:20,108 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.414m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:20,108 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-21 13:47:20,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:20,245 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:20,245 - INFO - integration_test - Warmstart k=0: x0=18.16472826525377 , y0=6.851701550261128 , psi0=0.1485370034500613 , v0=2.600000012813451 , spline0=19.619999341411297 , a0=0.0 , w0=0.0
2026-01-21 13:47:20,245 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:20,246 - INFO - integration_test - Dyn residual k=0: pred=[18.421865314784682, 6.890179315591723, 0.1485370034500613, 2.600000012813451, 19.879999342692642], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.421865314784682, 6.890179315591723, 0.1485370034500613, 2.600000012813451, 19.879999342692642], res_norm=2.809e+01
2026-01-21 13:47:20,246 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:20,247 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:20,265 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,444 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:20,467 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,512 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:20,533 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,580 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:20,601 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,647 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:20,669 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,714 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:20,734 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,783 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:20,806 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,855 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:20,879 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,924 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:20,944 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:20,990 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:21,013 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:21,059 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:21,082 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:21,126 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:22,334 - INFO - integration_test - Step 70: MPC solve successful
2026-01-21 13:47:22,791 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.620)
2026-01-21 13:47:22,792 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:22,792 - INFO - integration_test - === Applying control at step 70 ===
2026-01-21 13:47:22,792 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001875907, 'w': 0.004011264113773689}
2026-01-21 13:47:22,792 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:22,792 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:22,793 - INFO - integration_test - Step 70 completed in 2.810s
2026-01-21 13:47:22,874 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-21 13:47:22,884 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.43174708  6.89171345  0.14893813  2.80000001 19.89999934]
2026-01-21 13:47:22,885 - DEBUG - integration_test - Step 71: Using propagated spline 19.9000 (close to path, dist=0.059m, drift=0.368m)
2026-01-21 13:47:22,885 - DEBUG - integration_test -   Set spline state to 19.9000
2026-01-21 13:47:22,891 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:23,314 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.432, 6.892), path_start=(0.000, 0.000), dist=19.678m
2026-01-21 13:47:23,314 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.678m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:23,314 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-21 13:47:23,424 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:23,453 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:23,453 - INFO - integration_test - Warmstart k=0: x0=18.431747081076708 , y0=6.89171344551812 , psi0=0.14893812986143867 , v0=2.800000014689358 , spline0=19.899999342880232 , a0=0.0 , w0=0.0
2026-01-21 13:47:23,453 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:23,455 - INFO - integration_test - Dyn residual k=0: pred=[18.708647259745504, 6.933262114278886, 0.14893812986143867, 2.800000014689358, 20.179999344349167], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.708647259745504, 6.933262114278886, 0.14893812986143867, 2.800000014689358, 20.179999344349167], res_norm=2.852e+01
2026-01-21 13:47:23,456 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:23,458 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:23,476 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:23,676 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:23,698 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:23,747 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:23,773 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:23,821 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:23,844 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:23,891 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:23,912 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:23,958 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:23,978 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:24,026 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:24,048 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:24,096 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:24,119 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:24,172 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:24,196 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:24,257 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:24,281 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:24,328 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:24,347 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:24,395 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:25,428 - INFO - integration_test - Step 71: MPC solve successful
2026-01-21 13:47:25,810 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=19.900)
2026-01-21 13:47:25,810 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:25,810 - INFO - integration_test - === Applying control at step 71 ===
2026-01-21 13:47:25,811 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019944954, 'w': -0.01592049650446856}
2026-01-21 13:47:25,811 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:25,811 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:25,812 - INFO - integration_test - Step 71 completed in 2.928s
2026-01-21 13:47:25,888 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-21 13:47:25,900 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[18.71857108  6.93451506  0.14734608  3.00000002 20.19999934]
2026-01-21 13:47:25,900 - DEBUG - integration_test - Step 72: Using propagated spline 20.2000 (close to path, dist=0.230m, drift=0.180m)
2026-01-21 13:47:25,900 - DEBUG - integration_test -   Set spline state to 20.2000
2026-01-21 13:47:25,905 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:26,018 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(18.719, 6.935), path_start=(0.000, 0.000), dist=19.962m
2026-01-21 13:47:26,018 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=19.962m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:26,018 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-21 13:47:26,120 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:26,147 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:26,147 - INFO - integration_test - Warmstart k=0: x0=18.718571077354195 , y0=6.934515061291373 , psi0=0.14734608021099183 , v0=3.0000000166838534 , spline0=20.19999934454862 , a0=0.0 , w0=0.0
2026-01-21 13:47:26,147 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:26,148 - INFO - integration_test - Dyn residual k=0: pred=[19.01532033666111, 6.978559108583027, 0.14734608021099183, 3.0000000166838534, 20.499999346217006], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.01532033666111, 6.978559108583027, 0.14734608021099183, 3.0000000166838534, 20.499999346217006], res_norm=2.898e+01
2026-01-21 13:47:26,148 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:26,149 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:26,166 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,395 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,416 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,463 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,489 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,534 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,558 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,606 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,627 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,674 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,697 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,744 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,766 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,811 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,835 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,884 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,906 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:26,951 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:26,974 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:27,018 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:27,039 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:27,086 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:28,270 - INFO - integration_test - Step 72: MPC solve successful
2026-01-21 13:47:28,624 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.200)
2026-01-21 13:47:28,624 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:28,624 - INFO - integration_test - === Applying control at step 72 ===
2026-01-21 13:47:28,624 - INFO - integration_test -   Control dict from planner: {'a': 1.2758904735670678e-07, 'w': -0.005139645865618346}
2026-01-21 13:47:28,624 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:28,624 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:28,625 - INFO - integration_test - Step 72 completed in 2.726s
2026-01-21 13:47:28,702 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-21 13:47:28,711 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[19.01533164  6.97848285  0.14683212  3.00000003 20.49999935]
2026-01-21 13:47:28,712 - DEBUG - integration_test - Step 73: Using propagated spline 20.5000 (close to path, dist=0.099m, drift=0.480m)
2026-01-21 13:47:28,712 - DEBUG - integration_test -   Set spline state to 20.5000
2026-01-21 13:47:28,716 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:28,827 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(19.015, 6.978), path_start=(0.000, 0.000), dist=20.255m
2026-01-21 13:47:28,827 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.255m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:28,827 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-21 13:47:28,935 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:28,963 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:28,963 - INFO - integration_test - Warmstart k=0: x0=19.015331642767343 , y0=6.9784828474338525 , psi0=0.14683211562443 , v0=3.000000029442758 , spline0=20.499999347492896 , a0=0.0 , w0=0.0
2026-01-21 13:47:28,963 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:28,964 - INFO - integration_test - Dyn residual k=0: pred=[19.312103501221397, 7.02237437049119, 0.14683211562443, 3.000000029442758, 20.799999350437172], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.312103501221397, 7.02237437049119, 0.14683211562443, 3.000000029442758, 20.799999350437172], res_norm=2.939e+01
2026-01-21 13:47:28,965 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:28,965 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:28,982 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,173 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,198 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,245 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,271 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,318 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,339 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,388 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,409 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,453 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,474 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,523 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,543 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,591 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,611 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,657 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,683 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,732 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:29,754 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,803 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:29,825 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:29,872 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:31,495 - INFO - integration_test - Step 73: MPC solve successful
2026-01-21 13:47:31,917 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.500)
2026-01-21 13:47:31,917 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:31,917 - INFO - integration_test - === Applying control at step 73 ===
2026-01-21 13:47:31,917 - INFO - integration_test -   Control dict from planner: {'a': -1.8275362036259286e-07, 'w': -0.0007635553105622419}
2026-01-21 13:47:31,917 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:31,917 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:31,919 - INFO - integration_test - Step 73 completed in 3.207s
2026-01-21 13:47:32,007 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-21 13:47:32,009 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.31210518  7.02236304  0.14675576  3.00000001 20.79999935]
2026-01-21 13:47:32,009 - DEBUG - integration_test - Step 74: Using propagated spline 20.8000 (close to path, dist=0.150m, drift=0.291m)
2026-01-21 13:47:32,009 - DEBUG - integration_test -   Set spline state to 20.8000
2026-01-21 13:47:32,015 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:32,132 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.312, 7.022), path_start=(0.000, 0.000), dist=20.549m
2026-01-21 13:47:32,132 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=20.549m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:32,132 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-21 13:47:32,250 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:32,278 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:32,278 - INFO - integration_test - Warmstart k=0: x0=19.31210517570936 , y0=7.022363040228476 , psi0=0.14675576009337377 , v0=3.000000011167396 , spline0=20.799999348609635 , a0=0.0 , w0=0.0
2026-01-21 13:47:32,278 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:32,280 - INFO - integration_test - Dyn residual k=0: pred=[19.608880382850955, 7.066231902717793, 0.14675576009337377, 3.000000011167396, 21.099999349726374], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.608880382850955, 7.066231902717793, 0.14675576009337377, 3.000000011167396, 21.099999349726374], res_norm=2.981e+01
2026-01-21 13:47:32,281 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:32,281 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:32,299 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:32,478 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:32,503 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:32,555 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:32,581 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:32,626 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:32,650 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:32,697 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:32,717 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:32,761 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:32,785 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:32,832 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:32,852 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:32,898 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:32,919 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:32,965 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:32,989 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:33,035 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:33,055 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:33,099 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:33,120 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:33,165 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:34,413 - INFO - integration_test - Step 74: MPC solve successful
2026-01-21 13:47:35,048 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=20.800)
2026-01-21 13:47:35,048 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:35,048 - INFO - integration_test - === Applying control at step 74 ===
2026-01-21 13:47:35,048 - INFO - integration_test -   Control dict from planner: {'a': 1.8832063723972556e-07, 'w': -0.014289359481250189}
2026-01-21 13:47:35,048 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:35,048 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:35,049 - INFO - integration_test - Step 74 completed in 3.041s
2026-01-21 13:47:35,124 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-21 13:47:35,133 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[19.60891163  7.06601985  0.14532682  3.00000003 21.09999935]
2026-01-21 13:47:35,134 - DEBUG - integration_test - Step 75: Using propagated spline 21.1000 (close to path, dist=0.173m, drift=0.591m)
2026-01-21 13:47:35,134 - DEBUG - integration_test -   Set spline state to 21.1000
2026-01-21 13:47:35,138 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:35,259 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(19.609, 7.066), path_start=(0.000, 0.000), dist=20.843m
2026-01-21 13:47:35,259 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=20.843m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:35,259 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-21 13:47:35,376 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:35,403 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:35,403 - INFO - integration_test - Warmstart k=0: x0=19.608911625679085 , y0=7.0660198515806805 , psi0=0.14532682414524875 , v0=3.00000002999946 , spline0=21.099999351609583 , a0=0.0 , w0=0.0
2026-01-21 13:47:35,403 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:35,404 - INFO - integration_test - Dyn residual k=0: pred=[19.905749217470962, 7.10946459693805, 0.14532682414524875, 3.00000002999946, 21.39999935460953], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.905749217470962, 7.10946459693805, 0.14532682414524875, 3.00000002999946, 21.39999935460953], res_norm=3.023e+01
2026-01-21 13:47:35,405 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:35,406 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:35,423 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:35,607 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:35,633 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:35,707 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:35,743 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:35,815 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:35,842 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:35,896 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:35,919 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:35,974 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:35,997 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:36,046 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:36,069 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:36,121 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:36,146 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:36,196 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:36,218 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:36,270 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:36,296 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:36,345 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:36,368 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:36,420 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:37,885 - INFO - integration_test - Step 75: MPC solve successful
2026-01-21 13:47:38,237 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.100)
2026-01-21 13:47:38,237 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:47:38,237 - INFO - integration_test - === Applying control at step 75 ===
2026-01-21 13:47:38,237 - INFO - integration_test -   Control dict from planner: {'a': -1.0976807854150008e-07, 'w': 0.0067631598878717175}
2026-01-21 13:47:38,238 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:47:38,238 - INFO - integration_test -   Planner output success: True
2026-01-21 13:47:38,239 - INFO - integration_test - Step 75 completed in 3.106s
2026-01-21 13:47:38,315 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-21 13:47:38,323 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[19.9057345   7.10956497  0.14600314  3.00000002 21.39999935]
2026-01-21 13:47:38,324 - DEBUG - integration_test - Step 76: Using propagated spline 21.4000 (close to path, dist=0.078m, drift=0.403m)
2026-01-21 13:47:38,324 - DEBUG - integration_test -   Set spline state to 21.4000
2026-01-21 13:47:38,328 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:38,458 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(19.906, 7.110), path_start=(0.000, 0.000), dist=21.137m
2026-01-21 13:47:38,459 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.137m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:47:38,459 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-21 13:47:38,567 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:47:38,594 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:47:38,594 - INFO - integration_test - Warmstart k=0: x0=19.905734503111464 , y0=7.109564971547237 , psi0=0.14600314013403592 , v0=3.000000019022652 , spline0=21.39999935351185 , a0=0.0 , w0=0.0
2026-01-21 13:47:38,594 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:47:38,595 - INFO - integration_test - Dyn residual k=0: pred=[20.20254264355642, 7.1532104628031234, 0.14600314013403592, 3.000000019022652, 21.699999355414114], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.20254264355642, 7.1532104628031234, 0.14600314013403592, 3.000000019022652, 21.699999355414114], res_norm=3.065e+01
2026-01-21 13:47:38,596 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:38,597 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:47:38,615 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:38,830 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:38,892 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:38,981 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:39,009 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,073 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:39,099 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,149 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:39,175 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,224 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:39,247 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,303 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:39,330 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,384 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:39,408 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,463 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:39,489 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,540 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:47:39,562 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,623 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:47:39,675 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:47:39,749 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
