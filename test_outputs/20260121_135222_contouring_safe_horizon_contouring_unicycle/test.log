2026-01-21 13:52:22,120 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 13:52:22,120 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 13:52:22,120 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 13:52:22,120 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 13:52:22,120 - INFO - integration_test - Creating objective module: contouring
2026-01-21 13:52:22,127 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 13:52:22,127 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 13:52:22,127 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 13:52:22,136 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 13:52:22,136 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 13:52:22,141 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 13:52:22,141 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 13:52:22,159 - INFO - integration_test - Setting solver on all modules...
2026-01-21 13:52:22,159 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 13:52:22,159 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 13:52:22,159 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 13:52:22,159 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 13:52:22,159 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 13:52:22,159 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 13:52:22,160 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 13:52:22,160 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 13:52:22,160 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 13:52:22,161 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 13:52:22,161 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 13:52:22,161 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 13:52:22,161 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 13:52:22,161 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 13:52:22,161 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 13:52:22,161 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 13:52:22,161 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 13:52:22,161 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 13:52:22,162 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 13:52:22,162 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 13:52:22,165 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:22,180 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 13:52:22,180 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 13:52:22,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:22,342 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:22,342 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 13:52:22,342 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:22,343 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 13:52:22,343 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:22,344 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:22,360 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:22,518 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:22,540 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:22,584 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:22,603 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:22,653 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:22,681 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:22,746 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:22,781 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:22,856 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:22,884 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:22,947 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:22,981 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:23,044 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:23,070 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:23,125 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:23,151 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:23,219 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:23,247 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:23,308 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:23,336 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:23,409 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:24,434 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 13:52:24,670 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 13:52:24,670 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:24,670 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 13:52:24,670 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 13:52:24,670 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196329197, 'w': 0.7999999971703555}
2026-01-21 13:52:24,671 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:24,671 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:24,672 - INFO - integration_test - Step 0 completed in 2.510s
2026-01-21 13:52:24,736 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 13:52:24,737 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 13:52:24,737 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 13:52:24,737 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 13:52:24,740 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:24,842 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 13:52:24,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 13:52:24,931 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:24,954 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:24,954 - INFO - integration_test - Warmstart k=0: x0=0.10987737538006553 , y0=0.004530845042293663 , psi0=0.07999999971703554 , v0=1.200000001963292 , spline0=0.1200000001963292 , a0=0.0 , w0=0.0
2026-01-21 13:52:24,954 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:24,955 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033479467, 0.014120608300436838, 0.07999999971703554, 1.200000001963292, 0.2400000003926584], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033479467, 0.014120608300436838, 0.07999999971703554, 1.200000001963292, 0.2400000003926584], res_norm=1.248e+00
2026-01-21 13:52:24,955 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:24,956 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:24,974 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,115 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,135 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,179 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,198 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,242 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,261 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,308 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,327 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,372 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,392 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,438 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,460 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,504 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,524 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,569 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,588 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,631 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:25,651 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,694 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:25,714 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:25,757 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:26,351 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 13:52:26,455 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 13:52:26,455 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:26,455 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 13:52:26,455 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018377228, 'w': 0.799999936395392}
2026-01-21 13:52:26,455 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:26,455 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:26,456 - INFO - integration_test - Step 1 completed in 1.720s
2026-01-21 13:52:26,511 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 13:52:26,512 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-21 13:52:26,513 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 13:52:26,513 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 13:52:26,516 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:26,612 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 13:52:26,613 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 13:52:26,702 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:26,724 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:26,725 - INFO - integration_test - Warmstart k=0: x0=0.2388921282392169 , y0=0.02022162128676596 , psi0=0.15999999335657475 , v0=1.4000000038010147 , spline0=0.2600000005764307 , a0=0.0 , w0=0.0
2026-01-21 13:52:26,725 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:26,725 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039484352299, 0.042526169355117584, 0.15999999335657475, 1.4000000038010147, 0.4000000009565322], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.3771039484352299, 0.042526169355117584, 0.15999999335657475, 1.4000000038010147, 0.4000000009565322], res_norm=1.513e+00
2026-01-21 13:52:26,726 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:26,727 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:26,745 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:26,886 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:26,906 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:26,951 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:26,972 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,016 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:27,035 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,082 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:27,101 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,146 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:27,166 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,209 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:27,227 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,275 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:27,294 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,336 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:27,360 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,442 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:27,480 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,532 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:27,552 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:27,595 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:28,197 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 13:52:28,247 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 13:52:28,247 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:28,248 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 13:52:28,248 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199106527, 'w': 0.8000000045152917}
2026-01-21 13:52:28,248 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:28,248 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:28,249 - INFO - integration_test - Step 2 completed in 1.737s
2026-01-21 13:52:28,304 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 13:52:28,304 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999999 1.60000001 0.42      ]
2026-01-21 13:52:28,305 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 13:52:28,305 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 13:52:28,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:28,406 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 13:52:28,406 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 13:52:28,556 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:28,583 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:28,583 - INFO - integration_test - Warmstart k=0: x0=0.3858364359593089 , y0=0.05014471504617117 , psi0=0.2399999938081039 , v0=1.60000000579208 , spline0=0.42000000115563874 , a0=0.0 , w0=0.0
2026-01-21 13:52:28,583 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:28,584 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505127337331, 0.08817713444988415, 0.2399999938081039, 1.60000000579208, 0.5800000017348468], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505127337331, 0.08817713444988415, 0.2399999938081039, 1.60000000579208, 0.5800000017348468], res_norm=1.804e+00
2026-01-21 13:52:28,584 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:28,585 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:28,600 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:28,745 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:28,765 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:28,809 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:28,831 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:28,878 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:28,899 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:28,944 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:28,963 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:29,008 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:29,027 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:29,073 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:29,093 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:29,138 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:29,158 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:29,204 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:29,224 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:29,270 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:29,292 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:29,333 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:29,353 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:29,398 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:30,048 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 13:52:30,109 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 13:52:30,110 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:30,110 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 13:52:30,110 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999531, 'w': 0.8000000099608469}
2026-01-21 13:52:30,110 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:30,110 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:30,111 - INFO - integration_test - Step 3 completed in 1.807s
2026-01-21 13:52:30,172 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 13:52:30,172 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-21 13:52:30,173 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 13:52:30,173 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 13:52:30,176 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:30,283 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 13:52:30,283 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 13:52:30,386 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:30,410 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:30,410 - INFO - integration_test - Warmstart k=0: x0=0.5491354617585504 , y0=0.09724075466705936 , psi0=0.3199999948041886 , v0=1.800000007792033 , spline0=0.600000001934842 , a0=0.0 , w0=0.0
2026-01-21 13:52:30,410 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:30,411 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978380472343, 0.1538627349353032, 0.3199999948041886, 1.800000007792033, 0.7800000027140453], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978380472343, 0.1538627349353032, 0.3199999948041886, 1.800000007792033, 0.7800000027140453], res_norm=2.120e+00
2026-01-21 13:52:30,412 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:30,412 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:30,430 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:30,578 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:30,597 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:30,644 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:30,668 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:30,713 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:30,732 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:30,778 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:30,797 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:30,841 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:30,863 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:30,917 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:30,944 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:30,995 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:31,015 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:31,062 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:31,083 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:31,128 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:31,148 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:31,194 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:31,213 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:31,256 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:31,895 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 13:52:32,017 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 13:52:32,017 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:32,017 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 13:52:32,017 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019995739, 'w': 0.8000000094251002}
2026-01-21 13:52:32,017 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:32,017 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:32,018 - INFO - integration_test - Step 4 completed in 1.846s
2026-01-21 13:52:32,078 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 13:52:32,079 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 13:52:32,079 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 13:52:32,079 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 13:52:32,082 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:32,190 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 13:52:32,191 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 13:52:32,295 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:32,319 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:32,320 - INFO - integration_test - Warmstart k=0: x0=0.7268614895708527 , y0=0.16427976524959237 , psi0=0.39999999574669864 , v0=2.000000009791607 , spline0=0.8000000029140028 , a0=0.0 , w0=0.0
2026-01-21 13:52:32,320 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:32,320 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736896045593, 0.2421634333091156, 0.39999999574669864, 2.000000009791607, 1.0000000038931636], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736896045593, 0.2421634333091156, 0.39999999574669864, 2.000000009791607, 1.0000000038931636], res_norm=2.459e+00
2026-01-21 13:52:32,321 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:32,322 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:32,338 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:32,512 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:32,536 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:32,583 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:32,605 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:32,650 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:32,671 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:32,718 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:32,740 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:32,788 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:32,810 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:32,856 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:32,879 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:32,927 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:32,948 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:32,998 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:33,019 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:33,068 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:33,091 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:33,134 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:33,153 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:33,203 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:33,967 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 13:52:34,024 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 13:52:34,025 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:34,025 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 13:52:34,025 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019822087, 'w': 0.7999999466755366}
2026-01-21 13:52:34,025 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:34,025 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:34,026 - INFO - integration_test - Step 5 completed in 1.948s
2026-01-21 13:52:34,084 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 13:52:34,086 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-21 13:52:34,087 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 13:52:34,087 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 13:52:34,090 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:34,208 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 13:52:34,208 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 13:52:34,301 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:34,328 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:34,328 - INFO - integration_test - Warmstart k=0: x0=0.9167519043285328 , y0=0.2538238040138525 , psi0=0.4799999904142523 , v0=2.200000011773816 , spline0=1.0200000040913844 , a0=0.0 , w0=0.0
2026-01-21 13:52:34,328 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:34,329 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907893581365, 0.3554152213061169, 0.4799999904142523, 2.200000011773816, 1.240000005268766], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907893581365, 0.3554152213061169, 0.4799999904142523, 2.200000011773816, 1.240000005268766], res_norm=2.823e+00
2026-01-21 13:52:34,330 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:34,331 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:34,346 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:34,566 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:34,586 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:34,630 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:34,657 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:34,708 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:34,728 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:34,779 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:34,799 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:34,845 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:34,869 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:34,916 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:34,937 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:34,988 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:35,008 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:35,054 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:35,075 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:35,124 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:35,145 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:35,193 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:35,215 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:35,266 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:35,957 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 13:52:36,018 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 13:52:36,018 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:36,018 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 13:52:36,018 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019359599, 'w': 0.7999977654168695}
2026-01-21 13:52:36,018 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:36,018 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:36,020 - INFO - integration_test - Step 6 completed in 1.934s
2026-01-21 13:52:36,083 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 13:52:36,084 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.36819142 0.55999977 2.40000001 1.26000001]
2026-01-21 13:52:36,084 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 13:52:36,085 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 13:52:36,088 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:36,195 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 13:52:36,195 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 13:52:36,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:36,326 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:36,326 - INFO - integration_test - Warmstart k=0: x0=1.1162308789497073 , y0=0.368191419118135 , psi0=0.5599997669559392 , v0=2.400000013709776 , spline0=1.260000005462362 , a0=0.0 , w0=0.0
2026-01-21 13:52:36,326 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:36,327 - INFO - integration_test - Dyn residual k=0: pred=[1.319572136464039, 0.4956760599599225, 0.5599997669559392, 2.400000013709776, 1.5000000068333394], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.319572136464039, 0.4956760599599225, 0.5599997669559392, 2.400000013709776, 1.5000000068333394], res_norm=3.211e+00
2026-01-21 13:52:36,329 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:36,330 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:36,349 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:36,499 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:36,518 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:36,563 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:36,583 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:36,625 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:36,647 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:36,693 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:36,713 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:36,760 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:36,780 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:36,823 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:36,843 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:36,892 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:36,912 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:36,959 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:36,980 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:37,024 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:37,045 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:37,090 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:37,109 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:37,153 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:37,893 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 13:52:38,034 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 13:52:38,034 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:38,034 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 13:52:38,034 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019634149, 'w': -0.18186035348389779}
2026-01-21 13:52:38,035 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:38,035 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:38,036 - INFO - integration_test - Step 7 completed in 1.952s
2026-01-21 13:52:38,093 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 13:52:38,094 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32925637 0.4990288  0.54181373 2.60000002 1.52000001]
2026-01-21 13:52:38,094 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 13:52:38,094 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 13:52:38,098 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:38,209 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 13:52:38,209 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 13:52:38,310 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:38,335 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:38,335 - INFO - integration_test - Warmstart k=0: x0=1.3292563670355555 , y0=0.4990288011649652 , psi0=0.5418137316075494 , v0=2.600000015673191 , spline0=1.520000007029681 , a0=0.0 , w0=0.0
2026-01-21 13:52:38,335 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:38,336 - INFO - integration_test - Dyn residual k=0: pred=[1.5520178076444786, 0.6331084095804255, 0.5418137316075494, 2.600000015673191, 1.7800000085970002], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5520178076444786, 0.6331084095804255, 0.5418137316075494, 2.600000015673191, 1.7800000085970002], res_norm=3.610e+00
2026-01-21 13:52:38,337 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:38,337 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:38,355 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:38,504 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:38,526 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:38,573 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:38,593 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:38,637 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:38,658 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:38,705 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:38,725 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:38,796 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:38,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:38,897 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:38,919 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:38,968 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:38,988 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:39,035 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:39,060 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:39,110 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:39,133 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:39,180 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:39,200 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:39,242 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:39,861 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 13:52:39,918 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 13:52:39,919 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:39,919 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 13:52:39,919 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000077177713, 'w': -0.02983913226289194}
2026-01-21 13:52:39,919 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:39,919 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:39,920 - INFO - integration_test - Step 8 completed in 1.826s
2026-01-21 13:52:39,977 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 13:52:39,979 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56079551 0.63791571 0.53882982 2.80000002 1.80000001]
2026-01-21 13:52:39,979 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 13:52:39,979 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 13:52:39,982 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:40,090 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 13:52:40,090 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 13:52:40,184 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:40,210 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:40,210 - INFO - integration_test - Warmstart k=0: x0=1.5607955050134743 , y0=0.6379157133855752 , psi0=0.5388298183812602 , v0=2.800000016444968 , spline0=1.8000000086741779 , a0=0.0 , w0=0.0
2026-01-21 13:52:40,210 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:40,211 - INFO - integration_test - Dyn residual k=0: pred=[1.801122229837282, 0.7815926644124535, 0.5388298183812602, 2.800000016444968, 2.080000010318675], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.801122229837282, 0.7815926644124535, 0.5388298183812602, 2.800000016444968, 2.080000010318675], res_norm=4.039e+00
2026-01-21 13:52:40,212 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:40,213 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:40,229 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:40,457 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:40,480 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:40,529 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:40,554 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:40,606 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:40,628 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:40,683 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:40,707 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:40,764 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:40,789 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:40,840 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:40,862 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:40,908 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:40,927 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:40,973 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:40,996 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:41,043 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:41,066 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:41,111 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:41,131 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:41,175 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:41,835 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 13:52:41,897 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 13:52:41,898 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:41,898 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 13:52:41,898 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199688954, 'w': -0.07010035530282138}
2026-01-21 13:52:41,898 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:41,898 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:41,899 - INFO - integration_test - Step 9 completed in 1.921s
2026-01-21 13:52:41,950 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 13:52:41,952 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81023082 0.78584029 0.53181978 3.00000002 2.10000001]
2026-01-21 13:52:41,953 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 13:52:41,953 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 13:52:41,956 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:42,059 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 13:52:42,059 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 13:52:42,150 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:42,176 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:42,176 - INFO - integration_test - Warmstart k=0: x0=1.8102308220183596 , y0=0.7858402866852826 , psi0=0.5318197828509781 , v0=3.0000000184418574 , spline0=2.1000000105183636 , a0=0.0 , w0=0.0
2026-01-21 13:52:42,176 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:42,177 - INFO - integration_test - Dyn residual k=0: pred=[2.0687965280512044, 0.9379710750558419, 0.5318197828509781, 3.0000000184418574, 2.4000000123625496], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.0687965280512044, 0.9379710750558419, 0.5318197828509781, 3.0000000184418574, 2.4000000123625496], res_norm=4.495e+00
2026-01-21 13:52:42,178 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:42,179 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:42,194 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,338 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,359 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,404 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,424 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,478 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,501 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,550 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,573 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,616 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,636 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,688 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,710 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,759 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,782 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,830 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,854 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,902 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:42,924 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:42,971 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:42,993 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:43,038 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:43,681 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 13:52:43,745 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 13:52:43,746 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:43,746 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 13:52:43,746 - INFO - integration_test -   Control dict from planner: {'a': 1.1556439361605314e-07, 'w': -0.07084010257031428}
2026-01-21 13:52:43,746 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:43,746 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:43,747 - INFO - integration_test - Step 10 completed in 1.795s
2026-01-21 13:52:43,805 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 13:52:43,806 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06933321 0.93705397 0.52473577 3.00000003 2.40000001]
2026-01-21 13:52:43,807 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 13:52:43,807 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 13:52:43,810 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:43,997 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 13:52:43,997 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 13:52:44,104 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:44,137 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:44,138 - INFO - integration_test - Warmstart k=0: x0=2.0693332117262955 , y0=0.9370539657213162 , psi0=0.5247357725939467 , v0=3.0000000299982967 , spline0=2.400000013518193 , a0=0.0 , w0=0.0
2026-01-21 13:52:44,138 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:44,139 - INFO - integration_test - Dyn residual k=0: pred=[2.3289701180105347, 1.0873492706880619, 0.5247357725939467, 3.0000000299982967, 2.7000000165180227], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3289701180105347, 1.0873492706880619, 0.5247357725939467, 3.0000000299982967, 2.7000000165180227], res_norm=4.814e+00
2026-01-21 13:52:44,140 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:44,141 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:44,162 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,373 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,394 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,439 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,462 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,514 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,534 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,580 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,602 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,645 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,678 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,732 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,753 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,804 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,825 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,874 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,895 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:44,943 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:44,964 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:45,010 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:45,030 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:45,076 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:46,198 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 13:52:46,271 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 13:52:46,272 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:46,272 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 13:52:46,272 - INFO - integration_test -   Control dict from planner: {'a': -2.3299717790244623e-07, 'w': -0.03958866139011449}
2026-01-21 13:52:46,272 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:46,272 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:46,273 - INFO - integration_test - Step 11 completed in 2.467s
2026-01-21 13:52:46,329 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 13:52:46,329 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32926694 1.08683494 0.52077691 3.00000001 2.70000001]
2026-01-21 13:52:46,330 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 13:52:46,330 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 13:52:46,334 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:46,441 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 13:52:46,441 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 13:52:46,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:46,569 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:46,569 - INFO - integration_test - Warmstart k=0: x0=2.329266937911124 , y0=1.0868349443133718 , psi0=0.5207769064549352 , v0=3.000000006698579 , spline0=2.700000014188051 , a0=0.0 , w0=0.0
2026-01-21 13:52:46,569 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:46,570 - INFO - integration_test - Dyn residual k=0: pred=[2.589496805020985, 1.2361012052898526, 0.5207769064549352, 3.000000006698579, 3.0000000148579087], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.589496805020985, 1.2361012052898526, 0.5207769064549352, 3.000000006698579, 3.0000000148579087], res_norm=5.148e+00
2026-01-21 13:52:46,571 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:46,572 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:46,587 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:46,737 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:46,759 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:46,805 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:46,826 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:46,875 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:46,898 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:46,946 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:46,972 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:47,018 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:47,042 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:47,092 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:47,115 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:47,164 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:47,188 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:47,234 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:47,256 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:47,304 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:47,325 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:47,370 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:47,391 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:47,439 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:48,302 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 13:52:48,473 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 13:52:48,474 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:48,474 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 13:52:48,474 - INFO - integration_test -   Control dict from planner: {'a': 2.3301301488862014e-07, 'w': -0.0851825164571671}
2026-01-21 13:52:48,474 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:48,474 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:48,475 - INFO - integration_test - Step 12 completed in 2.146s
2026-01-21 13:52:48,538 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 13:52:48,538 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.5901294  1.23499106 0.51225865 3.00000003 3.00000002]
2026-01-21 13:52:48,539 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.172m, drift=0.558m)
2026-01-21 13:52:48,539 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 13:52:48,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:48,643 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.869m
2026-01-21 13:52:48,643 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 13:52:48,740 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:48,766 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:48,766 - INFO - integration_test - Warmstart k=0: x0=2.590129398916191 , y0=1.234991055683741 , psi0=0.5122586548092185 , v0=3.0000000299998804 , spline0=3.000000017188039 , a0=0.0 , w0=0.0
2026-01-21 13:52:48,767 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:48,768 - INFO - integration_test - Dyn residual k=0: pred=[2.851621299091698, 1.382035225723207, 0.5122586548092185, 3.0000000299998804, 3.300000020188027], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.851621299091698, 1.382035225723207, 0.5122586548092185, 3.0000000299998804, 3.300000020188027], res_norm=5.495e+00
2026-01-21 13:52:48,769 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:48,769 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:48,786 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:48,940 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:48,960 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,006 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:49,028 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,074 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:49,095 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,139 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:49,158 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,207 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:49,228 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,274 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:49,294 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,337 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:49,359 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,408 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:49,427 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,481 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:49,505 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,551 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:49,572 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:49,618 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:50,240 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 13:52:50,358 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 13:52:50,358 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:50,358 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 13:52:50,358 - INFO - integration_test -   Control dict from planner: {'a': -1.0406576591575887e-07, 'w': -0.059961957747954577}
2026-01-21 13:52:50,358 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:50,358 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:50,359 - INFO - integration_test - Step 13 completed in 1.822s
2026-01-21 13:52:50,418 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 13:52:50,419 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85206058 1.38125037 0.50626246 3.00000002 3.30000002]
2026-01-21 13:52:50,420 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.146m, drift=0.370m)
2026-01-21 13:52:50,420 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 13:52:50,423 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:50,532 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 13:52:50,532 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 13:52:50,717 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:50,741 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:50,741 - INFO - integration_test - Warmstart k=0: x0=2.852060583172263 , y0=1.3812503683605004 , psi0=0.506262459034423 , v0=3.000000019593304 , spline0=3.3000000191473693 , a0=0.0 , w0=0.0
2026-01-21 13:52:50,742 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:50,742 - INFO - integration_test - Dyn residual k=0: pred=[3.1144294819118645, 1.5267239472322909, 0.506262459034423, 3.000000019593304, 3.6000000211066996], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.1144294819118645, 1.5267239472322909, 0.506262459034423, 3.000000019593304, 3.6000000211066996], res_norm=5.852e+00
2026-01-21 13:52:50,743 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:50,744 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:50,759 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:50,911 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:50,933 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:50,983 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:51,004 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,050 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:51,071 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,118 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:51,137 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,184 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:51,210 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,257 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:51,278 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,324 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:51,346 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,396 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:51,418 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,471 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:51,494 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,538 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:51,559 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:51,602 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:52,187 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 13:52:52,259 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 13:52:52,259 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:52,259 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 13:52:52,260 - INFO - integration_test -   Control dict from planner: {'a': 1.0050072148962992e-07, 'w': -0.05177370099459668}
2026-01-21 13:52:52,260 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:52,260 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:52,261 - INFO - integration_test - Step 14 completed in 1.842s
2026-01-21 13:52:52,320 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 13:52:52,321 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11480489 1.52604411 0.50108509 3.00000003 3.60000002]
2026-01-21 13:52:52,321 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 13:52:52,321 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 13:52:52,324 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:52,428 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 13:52:52,428 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 13:52:52,547 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:52,573 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:52,573 - INFO - integration_test - Warmstart k=0: x0=3.1148048946512628 , y0=1.526044108639697 , psi0=0.5010850889349634 , v0=3.000000029643376 , spline0=3.6000000221117068 , a0=0.0 , w0=0.0
2026-01-21 13:52:52,573 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:52,574 - INFO - integration_test - Dyn residual k=0: pred=[3.3779234450525744, 1.670157363454496, 0.5010850889349634, 3.000000029643376, 3.9000000250760443], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3779234450525744, 1.670157363454496, 0.5010850889349634, 3.000000029643376, 3.9000000250760443], res_norm=6.218e+00
2026-01-21 13:52:52,574 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:52,575 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:52,590 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:52,744 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:52,766 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:52,811 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:52,833 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:52,884 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:52,906 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:52,955 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:52,978 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:53,024 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:53,046 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:53,097 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:53,118 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:53,165 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:53,187 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:53,232 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:53,253 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:53,309 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:53,330 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:53,376 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:53,397 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:53,439 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:54,083 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 13:52:54,257 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 13:52:54,257 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:54,257 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 13:52:54,257 - INFO - integration_test -   Control dict from planner: {'a': 3.5276871751184636e-09, 'w': -0.057246886125142324}
2026-01-21 13:52:54,257 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:54,258 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:54,259 - INFO - integration_test - Step 15 completed in 1.938s
2026-01-21 13:52:54,317 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 13:52:54,319 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37833451 1.66940344 0.4953604  3.00000003 3.90000003]
2026-01-21 13:52:54,319 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.147m, drift=0.482m)
2026-01-21 13:52:54,319 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 13:52:54,322 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:54,428 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.669), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 13:52:54,428 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 13:52:54,527 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:54,552 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:54,552 - INFO - integration_test - Warmstart k=0: x0=3.378334508542221 , y0=1.669403442488425 , psi0=0.49536040032244916 , v0=3.000000029996145 , spline0=3.9000000251113214 , a0=0.0 , w0=0.0
2026-01-21 13:52:54,552 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:54,555 - INFO - integration_test - Dyn residual k=0: pred=[3.6422737465205017, 1.8120080723403802, 0.49536040032244916, 3.000000029996145, 4.200000028110936], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.6422737465205017, 1.8120080723403802, 0.49536040032244916, 3.000000029996145, 4.200000028110936], res_norm=6.591e+00
2026-01-21 13:52:54,556 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:54,557 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:54,574 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:54,735 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:54,755 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:54,801 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:54,824 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:54,871 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:54,891 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:54,938 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:54,959 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:55,006 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:55,027 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:55,072 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:55,092 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:55,141 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:55,163 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:55,209 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:55,228 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:55,280 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:55,304 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:55,354 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:55,377 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:55,420 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:56,121 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 13:52:56,202 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 13:52:56,202 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:56,202 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 13:52:56,202 - INFO - integration_test -   Control dict from planner: {'a': 5.120714662710549e-13, 'w': -0.06311270007581525}
2026-01-21 13:52:56,202 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:56,202 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:56,204 - INFO - integration_test - Step 16 completed in 1.885s
2026-01-21 13:52:56,262 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 13:52:56,263 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.642722   1.81117423 0.48904913 3.00000003 4.20000003]
2026-01-21 13:52:56,263 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.143m, drift=0.294m)
2026-01-21 13:52:56,264 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 13:52:56,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:56,419 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 13:52:56,419 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 13:52:56,623 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:56,646 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:56,646 - INFO - integration_test - Warmstart k=0: x0=3.6427220009817725 , y0=1.8111742325011 , psi0=0.48904913031486763 , v0=3.000000029996196 , spline0=4.200000028110941 , a0=0.0 , w0=0.0
2026-01-21 13:52:56,646 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:56,647 - INFO - integration_test - Dyn residual k=0: pred=[3.9075559926950154, 1.9521102415016451, 0.48904913031486763, 3.000000029996196, 4.500000031110561], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9075559926950154, 1.9521102415016451, 0.48904913031486763, 3.000000029996196, 4.500000031110561], res_norm=6.969e+00
2026-01-21 13:52:56,648 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:56,648 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:56,667 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:56,827 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:56,850 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:56,897 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:56,919 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:56,967 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:56,989 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:57,037 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:57,060 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:57,107 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:57,131 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:57,179 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:57,199 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:57,245 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:57,266 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:57,310 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:57,333 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:57,382 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:57,403 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:57,450 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:57,473 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:57,524 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:52:58,900 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 13:52:58,982 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 13:52:58,983 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:52:58,983 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 13:52:58,983 - INFO - integration_test -   Control dict from planner: {'a': -1.2012239009119457e-07, 'w': -0.055046608897793954}
2026-01-21 13:52:58,983 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:52:58,983 - INFO - integration_test -   Planner output success: True
2026-01-21 13:52:58,984 - INFO - integration_test - Step 17 completed in 2.722s
2026-01-21 13:52:59,042 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 13:52:59,043 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90794256 1.95138062 0.48354447 3.00000002 4.50000003]
2026-01-21 13:52:59,044 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 13:52:59,044 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 13:52:59,047 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:59,157 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.951), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 13:52:59,158 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 13:52:59,256 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:52:59,283 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:52:59,283 - INFO - integration_test - Warmstart k=0: x0=3.9079425561860814 , y0=1.9513806206477162 , psi0=0.4835444694250882 , v0=3.000000017983957 , spline0=4.500000029909337 , a0=0.0 , w0=0.0
2026-01-21 13:52:59,283 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:52:59,284 - INFO - integration_test - Dyn residual k=0: pred=[4.173548335458688, 2.090856679869465, 0.4835444694250882, 3.000000017983957, 4.800000031707733], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.173548335458688, 2.090856679869465, 0.4835444694250882, 3.000000017983957, 4.800000031707733], res_norm=7.353e+00
2026-01-21 13:52:59,285 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:59,285 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:52:59,302 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,449 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:59,475 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,523 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:59,544 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,591 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:59,611 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,656 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:59,678 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,723 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:59,742 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,788 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:59,807 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,855 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:59,879 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,930 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:52:59,950 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:52:59,998 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:00,019 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:00,066 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:00,086 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:00,133 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:00,803 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 13:53:00,997 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 13:53:00,997 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:00,997 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 13:53:00,997 - INFO - integration_test -   Control dict from planner: {'a': 1.1984493929625805e-07, 'w': -0.05858146646538936}
2026-01-21 13:53:00,997 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:00,997 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:00,998 - INFO - integration_test - Step 18 completed in 1.955s
2026-01-21 13:53:01,059 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 13:53:01,060 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17395535 2.09007791 0.47768632 3.00000003 4.80000003]
2026-01-21 13:53:01,060 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.127m, drift=0.405m)
2026-01-21 13:53:01,060 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 13:53:01,063 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:01,173 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 13:53:01,173 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 13:53:01,270 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:01,294 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:01,294 - INFO - integration_test - Warmstart k=0: x0=4.17395535125767 , y0=2.0900779058158876 , psi0=0.4776863227785493 , v0=3.000000029968451 , spline0=4.8000000329061825 , a0=0.0 , w0=0.0
2026-01-21 13:53:01,294 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:01,295 - INFO - integration_test - Dyn residual k=0: pred=[4.440373640628945, 2.2279956236283245, 0.4776863227785493, 3.000000029968451, 5.100000035903028], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440373640628945, 2.2279956236283245, 0.4776863227785493, 3.000000029968451, 5.100000035903028], res_norm=7.741e+00
2026-01-21 13:53:01,295 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:01,296 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:01,313 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:01,461 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:01,484 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:01,532 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:01,555 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:01,599 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:01,622 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:01,672 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:01,693 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:01,741 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:01,761 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:01,807 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:01,826 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:01,871 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:01,891 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:01,937 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:01,957 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:02,003 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:02,025 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:02,069 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:02,090 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:02,135 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:02,923 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 13:53:03,000 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 13:53:03,000 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:03,000 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 13:53:03,000 - INFO - integration_test -   Control dict from planner: {'a': -8.530293380717793e-08, 'w': -0.060149819215584745}
2026-01-21 13:53:03,000 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:03,000 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:03,002 - INFO - integration_test - Step 19 completed in 1.942s
2026-01-21 13:53:03,061 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 13:53:03,062 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44078682 2.22719354 0.47167134 3.00000002 5.10000004]
2026-01-21 13:53:03,063 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.153m, drift=0.217m)
2026-01-21 13:53:03,063 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 13:53:03,066 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:03,169 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 13:53:03,169 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 13:53:03,260 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:03,287 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:03,287 - INFO - integration_test - Warmstart k=0: x0=4.440786818788872 , y0=2.227193543610019 , psi0=0.4716713408569908 , v0=3.0000000214381575 , spline0=5.100000035049998 , a0=0.0 , w0=0.0
2026-01-21 13:53:03,287 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:03,288 - INFO - integration_test - Dyn residual k=0: pred=[4.708029855483924, 2.363506274579275, 0.4716713408569908, 3.0000000214381575, 5.400000037193814], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.708029855483924, 2.363506274579275, 0.4716713408569908, 3.0000000214381575, 5.400000037193814], res_norm=8.132e+00
2026-01-21 13:53:03,289 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:03,290 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:03,307 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:03,470 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:03,492 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:03,538 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:03,558 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:03,606 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:03,626 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:03,688 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:03,715 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:03,770 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:03,794 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:03,844 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:03,867 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:03,921 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:03,946 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:03,999 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:04,021 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:04,071 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:04,094 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:04,142 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:04,165 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:04,216 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:04,925 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 13:53:05,119 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 13:53:05,119 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:05,119 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 13:53:05,119 - INFO - integration_test -   Control dict from planner: {'a': 7.666149212650708e-08, 'w': -0.05969730063698848}
2026-01-21 13:53:05,119 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:05,119 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:05,121 - INFO - integration_test - Step 20 completed in 2.059s
2026-01-21 13:53:05,182 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 13:53:05,183 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70843514 2.36270778 0.46570161 3.00000003 5.40000004]
2026-01-21 13:53:05,183 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 13:53:05,183 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 13:53:05,187 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:05,292 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.708, 2.363), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 13:53:05,292 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 13:53:05,387 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:05,410 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:05,410 - INFO - integration_test - Warmstart k=0: x0=4.70843514240457 , y0=2.3627077830824645 , psi0=0.465701610793292 , v0=3.0000000291043065 , spline0=5.400000037960429 , a0=0.0 , w0=0.0
2026-01-21 13:53:05,410 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:05,411 - INFO - integration_test - Dyn residual k=0: pred=[4.976487163213003, 2.4974227261540247, 0.465701610793292, 3.0000000291043065, 5.70000004087086], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.976487163213003, 2.4974227261540247, 0.465701610793292, 3.0000000291043065, 5.70000004087086], res_norm=8.527e+00
2026-01-21 13:53:05,414 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:05,415 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:05,430 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:05,600 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:05,621 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:05,669 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:05,691 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:05,739 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:05,762 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:05,811 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:05,832 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:05,881 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:05,903 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:05,953 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:05,976 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:06,030 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:06,051 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:06,103 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:06,124 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:06,176 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:06,200 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:06,245 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:06,266 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:06,314 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:06,965 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 13:53:07,045 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 13:53:07,046 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:07,046 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 13:53:07,046 - INFO - integration_test -   Control dict from planner: {'a': -1.3544199164700986e-06, 'w': -0.05798373187043525}
2026-01-21 13:53:07,046 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:07,046 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:07,047 - INFO - integration_test - Step 21 completed in 1.865s
2026-01-21 13:53:07,107 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 13:53:07,108 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97687622 2.49664484 0.45990324 2.99999989 5.70000003]
2026-01-21 13:53:07,108 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 13:53:07,108 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 13:53:07,111 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:07,215 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 13:53:07,215 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 13:53:07,427 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:07,451 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:07,451 - INFO - integration_test - Warmstart k=0: x0=4.976876217780268 , y0=2.496644837611857 , psi0=0.45990323760624846 , v0=2.9999998936623147 , spline0=5.70000002732666 , a0=0.0 , w0=0.0
2026-01-21 13:53:07,451 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:07,452 - INFO - integration_test - Dyn residual k=0: pred=[5.245704843495038, 2.6298032531027578, 0.45990323760624846, 2.9999998936623147, 6.0000000166928915], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.245704843495038, 2.6298032531027578, 0.45990323760624846, 2.9999998936623147, 6.0000000166928915], res_norm=8.924e+00
2026-01-21 13:53:07,455 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:07,456 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:07,474 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:07,652 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:07,676 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:07,726 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:07,747 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:07,794 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:07,816 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:07,862 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:07,882 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:07,929 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:07,949 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:07,998 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:08,018 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:08,066 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:08,086 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:08,135 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:08,157 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:08,202 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:08,224 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:08,267 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:08,287 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:08,331 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:09,092 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 13:53:09,177 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 13:53:09,177 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:09,178 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 13:53:09,178 - INFO - integration_test -   Control dict from planner: {'a': 1.3633754394000826e-06, 'w': -0.09097170057829576}
2026-01-21 13:53:09,178 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:09,178 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:09,179 - INFO - integration_test - Step 22 completed in 2.071s
2026-01-21 13:53:09,237 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 13:53:09,239 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24630682 2.62857864 0.45080607 3.00000003 6.00000003]
2026-01-21 13:53:09,239 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.175m, drift=0.140m)
2026-01-21 13:53:09,239 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 13:53:09,242 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:09,344 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 13:53:09,344 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 13:53:09,435 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:09,461 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:09,461 - INFO - integration_test - Warmstart k=0: x0=5.246306819860118 , y0=2.6285786380048495 , psi0=0.4508060675484189 , v0=3.0000000299998586 , spline0=6.000000030326646 , a0=0.0 , w0=0.0
2026-01-21 13:53:09,461 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:09,462 - INFO - integration_test - Dyn residual k=0: pred=[5.516335682037938, 2.7592860034856956, 0.4508060675484189, 3.0000000299998586, 6.300000033326632], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.516335682037938, 2.7592860034856956, 0.4508060675484189, 3.0000000299998586, 6.300000033326632], res_norm=9.324e+00
2026-01-21 13:53:09,463 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:09,464 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:09,483 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:09,646 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:09,671 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:09,717 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:09,737 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:09,786 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:09,806 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:09,850 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:09,873 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:09,918 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:09,937 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:09,986 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:10,007 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:10,052 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:10,075 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:10,121 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:10,141 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:10,189 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:10,209 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:10,250 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:10,272 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:10,316 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:11,238 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 13:53:11,473 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 13:53:11,474 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:11,474 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 13:53:11,474 - INFO - integration_test -   Control dict from planner: {'a': -5.665673232083743e-08, 'w': -0.009718053752483519}
2026-01-21 13:53:11,474 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:11,474 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:11,475 - INFO - integration_test - Step 23 completed in 2.237s
2026-01-21 13:53:11,539 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 13:53:11,540 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51639915 2.75915478 0.44983426 3.00000002 6.30000003]
2026-01-21 13:53:11,540 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 13:53:11,540 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 13:53:11,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:11,641 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.759), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 13:53:11,641 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 13:53:11,737 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:11,761 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:11,761 - INFO - integration_test - Warmstart k=0: x0=5.51639915033526 , y0=2.7591547750494323 , psi0=0.4498342621731706 , v0=3.0000000243341853 , spline0=6.300000032760065 , a0=0.0 , w0=0.0
2026-01-21 13:53:11,761 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:11,762 - INFO - integration_test - Dyn residual k=0: pred=[5.786554906594853, 2.8895996631051086, 0.4498342621731706, 3.0000000243341853, 6.600000035193483], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.786554906594853, 2.8895996631051086, 0.4498342621731706, 3.0000000243341853, 6.600000035193483], res_norm=9.726e+00
2026-01-21 13:53:11,763 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:11,763 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:11,781 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:11,954 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:11,977 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,030 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:12,055 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,110 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:12,133 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,183 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:12,206 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,252 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:12,276 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,324 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:12,345 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,391 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:12,411 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,457 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:12,480 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,539 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:12,564 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,626 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:12,661 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:12,731 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:13,831 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 13:53:13,981 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 13:53:13,981 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:13,981 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 13:53:13,981 - INFO - integration_test -   Control dict from planner: {'a': 5.6656681719238396e-08, 'w': -0.08052457969046802}
2026-01-21 13:53:13,981 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:13,981 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:13,983 - INFO - integration_test - Step 24 completed in 2.443s
2026-01-21 13:53:14,037 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 13:53:14,038 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78707719 2.88851055 0.4417818  3.00000003 6.60000004]
2026-01-21 13:53:14,038 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.113m, drift=0.252m)
2026-01-21 13:53:14,038 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 13:53:14,041 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:14,147 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.889), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 13:53:14,147 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 13:53:14,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:14,264 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:14,264 - INFO - integration_test - Warmstart k=0: x0=5.787077185434895 , y0=2.888510550453284 , psi0=0.4417818042041238 , v0=3.0000000299998537 , spline0=6.600000035760051 , a0=0.0 , w0=0.0
2026-01-21 13:53:14,264 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:14,265 - INFO - integration_test - Dyn residual k=0: pred=[6.058274574150171, 3.0167758152524753, 0.4417818042041238, 3.0000000299998537, 6.9000000387600355], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.058274574150171, 3.0167758152524753, 0.4417818042041238, 3.0000000299998537, 6.9000000387600355], res_norm=1.013e+01
2026-01-21 13:53:14,266 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:14,267 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:14,283 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,456 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:14,480 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,529 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:14,552 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,598 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:14,618 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,660 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:14,684 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,729 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:14,748 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,795 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:14,816 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,861 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:14,881 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,927 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:14,947 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:14,995 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:15,016 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:15,060 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:15,080 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:15,124 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:15,731 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 13:53:15,968 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 13:53:15,968 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:15,968 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 13:53:15,968 - INFO - integration_test -   Control dict from planner: {'a': -1.1367961178430943e-06, 'w': -0.05778080805936798}
2026-01-21 13:53:15,968 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:15,968 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:15,969 - INFO - integration_test - Step 25 completed in 1.932s
2026-01-21 13:53:16,026 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 13:53:16,027 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05864362 3.0159916  0.43600372 2.99999992 6.90000003]
2026-01-21 13:53:16,027 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.205m, drift=0.064m)
2026-01-21 13:53:16,027 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 13:53:16,030 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:16,136 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.059, 3.016), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 13:53:16,136 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 13:53:16,230 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:16,254 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:16,254 - INFO - integration_test - Warmstart k=0: x0=6.058643622464021 , y0=3.015991601094656 , psi0=0.436003723398187 , v0=2.9999999163202418 , spline0=6.900000027392075 , a0=0.0 , w0=0.0
2026-01-21 13:53:16,254 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:16,255 - INFO - integration_test - Dyn residual k=0: pred=[6.330577596700605, 3.1426877282458476, 0.436003723398187, 2.9999999163202418, 7.200000019024099], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.330577596700605, 3.1426877282458476, 0.436003723398187, 2.9999999163202418, 7.200000019024099], res_norm=1.053e+01
2026-01-21 13:53:16,256 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:16,257 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:16,273 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,436 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:16,456 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,507 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:16,528 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,574 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:16,596 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,640 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:16,660 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,706 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:16,728 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,782 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:16,806 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,854 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:16,874 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,920 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:16,940 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:16,992 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:17,012 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:17,054 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:17,074 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:17,117 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:17,992 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 13:53:18,103 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 13:53:18,103 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:18,104 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 13:53:18,104 - INFO - integration_test -   Control dict from planner: {'a': 1.0534923326844379e-06, 'w': -0.046432571514719696}
2026-01-21 13:53:18,104 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:18,104 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:18,105 - INFO - integration_test - Step 26 completed in 2.078s
2026-01-21 13:53:18,202 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 13:53:18,204 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33087077 3.14205595 0.43136047 3.00000002 7.20000003]
2026-01-21 13:53:18,205 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.175m, drift=0.364m)
2026-01-21 13:53:18,205 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 13:53:18,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:18,328 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.331, 3.142), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 13:53:18,328 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 13:53:18,553 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:18,578 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:18,578 - INFO - integration_test - Warmstart k=0: x0=6.33087076516197 , y0=3.1420559466471274 , psi0=0.43136046624671504 , v0=3.000000021669475 , spline0=7.200000029559022 , a0=0.0 , w0=0.0
2026-01-21 13:53:18,578 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:18,580 - INFO - integration_test - Dyn residual k=0: pred=[6.603390098132228, 3.2674880575980896, 0.43136046624671504, 3.000000021669475, 7.500000031725969], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.603390098132228, 3.2674880575980896, 0.43136046624671504, 3.000000021669475, 7.500000031725969], res_norm=1.094e+01
2026-01-21 13:53:18,581 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:18,581 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:18,597 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:18,766 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:18,789 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:18,834 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:18,853 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:18,899 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:18,918 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:18,965 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:18,986 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:19,031 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:19,051 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:19,095 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:19,116 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:19,161 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:19,185 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:19,232 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:19,252 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:19,298 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:19,318 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:19,361 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:19,382 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:19,425 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:20,358 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 13:53:20,463 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 13:53:20,463 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:20,463 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 13:53:20,463 - INFO - integration_test -   Control dict from planner: {'a': 8.326216331186704e-08, 'w': -0.07466276620348063}
2026-01-21 13:53:20,463 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:20,464 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:20,465 - INFO - integration_test - Step 27 completed in 2.261s
2026-01-21 13:53:20,527 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 13:53:20,528 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60385582 3.26646954 0.42389419 3.00000003 7.50000003]
2026-01-21 13:53:20,529 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.125m, drift=0.175m)
2026-01-21 13:53:20,529 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 13:53:20,532 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:20,637 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.604, 3.266), path_start=(0.000, 0.000), dist=7.368m
2026-01-21 13:53:20,637 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 13:53:20,734 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:20,757 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:20,757 - INFO - integration_test - Warmstart k=0: x0=6.603855819817365 , y0=3.266469544762688 , psi0=0.423894189626367 , v0=3.0000000299956913 , spline0=7.500000032558591 , a0=0.0 , w0=0.0
2026-01-21 13:53:20,757 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:20,758 - INFO - integration_test - Dyn residual k=0: pred=[6.877304059884129, 3.3898634741276727, 0.423894189626367, 3.0000000299956913, 7.800000035558161], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.877304059884129, 3.3898634741276727, 0.423894189626367, 3.0000000299956913, 7.800000035558161], res_norm=1.135e+01
2026-01-21 13:53:20,761 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:20,761 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:20,777 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:20,941 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:20,962 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,008 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:21,029 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,075 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:21,096 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,142 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:21,163 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,210 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:21,230 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,274 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:21,295 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,340 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:21,360 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,407 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:21,429 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,475 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:21,497 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,544 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:21,564 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:21,607 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:23,185 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 13:53:23,438 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 13:53:23,438 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:23,438 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 13:53:23,438 - INFO - integration_test -   Control dict from planner: {'a': -2.349937559564897e-06, 'w': -0.05279173697525295}
2026-01-21 13:53:23,438 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:23,438 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:23,439 - INFO - integration_test - Step 28 completed in 2.911s
2026-01-21 13:53:23,508 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 13:53:23,509 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.87762849 3.38914111 0.41861502 2.9999998  7.80000001]
2026-01-21 13:53:23,510 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.243m, drift=0.013m)
2026-01-21 13:53:23,510 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 13:53:23,513 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:23,618 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.878, 3.389), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 13:53:23,618 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 13:53:23,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:23,738 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:23,738 - INFO - integration_test - Warmstart k=0: x0=6.877628487243727 , y0=3.3891411074733533 , psi0=0.4186150159288417 , v0=2.9999997950019353 , spline0=7.800000012058785 , a0=0.0 , w0=0.0
2026-01-21 13:53:23,738 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:23,739 - INFO - integration_test - Dyn residual k=0: pred=[7.151724310352831, 3.5110897337643423, 0.4186150159288417, 2.9999997950019353, 8.099999991558978], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.151724310352831, 3.5110897337643423, 0.4186150159288417, 2.9999997950019353, 8.099999991558978], res_norm=1.176e+01
2026-01-21 13:53:23,740 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:23,741 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:23,756 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:23,915 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:23,935 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:23,990 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:24,027 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,096 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:24,119 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,167 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:24,187 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,232 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:24,253 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,297 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:24,318 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,363 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:24,384 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,429 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:24,448 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,496 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:24,518 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,561 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:24,584 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:24,626 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:25,680 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 13:53:25,795 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 13:53:25,795 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:25,795 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 13:53:25,796 - INFO - integration_test -   Control dict from planner: {'a': 2.349809993857399e-06, 'w': -0.06581775100313574}
2026-01-21 13:53:25,796 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:25,796 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:25,797 - INFO - integration_test - Step 29 completed in 2.288s
2026-01-21 13:53:25,852 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 13:53:25,853 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.15212366 3.51018684 0.41203324 3.00000003 8.10000002]
2026-01-21 13:53:25,854 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.152m, drift=0.287m)
2026-01-21 13:53:25,854 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 13:53:25,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:25,958 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.152, 3.510), path_start=(0.000, 0.000), dist=7.967m
2026-01-21 13:53:25,958 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 13:53:26,066 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:26,093 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:26,093 - INFO - integration_test - Warmstart k=0: x0=7.152123659918918 , y0=3.5101868427552807 , psi0=0.41203324082852816 , v0=3.000000029982935 , spline0=8.100000015057079 , a0=0.0 , w0=0.0
2026-01-21 13:53:26,093 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:26,094 - INFO - integration_test - Dyn residual k=0: pred=[7.427016200334883, 3.6303288130347506, 0.41203324082852816, 3.000000029982935, 8.400000018055373], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.427016200334883, 3.6303288130347506, 0.41203324082852816, 3.000000029982935, 8.400000018055373], res_norm=1.217e+01
2026-01-21 13:53:26,095 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:26,096 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:26,112 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,277 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,298 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,347 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,369 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,415 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,435 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,481 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,503 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,554 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,575 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,618 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,637 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,685 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,705 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,750 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,772 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,817 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:26,836 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,880 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:26,900 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:26,943 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:27,906 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 13:53:28,159 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 13:53:28,159 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:28,159 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 13:53:28,159 - INFO - integration_test -   Control dict from planner: {'a': -1.1806713253700319e-07, 'w': -0.6035117320726209}
2026-01-21 13:53:28,159 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:28,159 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:28,161 - INFO - integration_test - Step 30 completed in 2.308s
2026-01-21 13:53:28,224 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 13:53:28,225 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.43047361 3.62196337 0.35168207 3.00000002 8.40000002]
2026-01-21 13:53:28,226 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.158m, drift=0.099m)
2026-01-21 13:53:28,226 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 13:53:28,229 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:28,342 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.430, 3.622), path_start=(0.000, 0.000), dist=8.266m
2026-01-21 13:53:28,342 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 13:53:28,435 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:28,462 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:28,462 - INFO - integration_test - Warmstart k=0: x0=7.430473613769568 , y0=3.6219633689141575 , psi0=0.3516820676212661 , v0=3.0000000181762214 , spline0=8.400000016874701 , a0=0.0 , w0=0.0
2026-01-21 13:53:28,462 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:28,464 - INFO - integration_test - Dyn residual k=0: pred=[7.7121119975497106, 3.725306592554037, 0.3516820676212661, 3.0000000181762214, 8.700000018692323], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.7121119975497106, 3.725306592554037, 0.3516820676212661, 3.0000000181762214, 8.700000018692323], res_norm=1.258e+01
2026-01-21 13:53:28,465 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:28,465 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:28,482 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:28,647 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:28,670 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:28,716 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:28,738 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:28,785 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:28,804 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:28,849 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:28,868 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:28,913 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:28,935 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:28,981 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:29,001 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:29,046 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:29,067 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:29,112 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:29,133 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:29,179 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:29,200 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:29,244 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:29,263 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:29,304 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:30,704 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 13:53:30,822 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 13:53:30,822 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:30,822 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 13:53:30,822 - INFO - integration_test -   Control dict from planner: {'a': -1.3244789656648368, 'w': -0.8000000099999547}
2026-01-21 13:53:30,822 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:30,822 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:30,823 - INFO - integration_test - Step 31 completed in 2.598s
2026-01-21 13:53:30,881 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 13:53:30,885 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.7096145  3.71199061 0.27168207 2.86755212 8.68675523]
2026-01-21 13:53:30,886 - DEBUG - integration_test - Step 32: Using propagated spline 8.6868 (close to path, dist=0.265m, drift=0.386m)
2026-01-21 13:53:30,886 - DEBUG - integration_test -   Set spline state to 8.6868
2026-01-21 13:53:30,889 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:30,995 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.710, 3.712), path_start=(0.000, 0.000), dist=8.557m
2026-01-21 13:53:30,995 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 13:53:31,088 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:31,113 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:31,113 - INFO - integration_test - Warmstart k=0: x0=7.7096144966380855 , y0=3.7119906070174484 , psi0=0.2716820666212706 , v0=2.8675521216097377 , spline0=8.686755229035676 , a0=0.0 , w0=0.0
2026-01-21 13:53:31,113 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:31,114 - INFO - integration_test - Dyn residual k=0: pred=[7.985851777985722, 3.7889419948876584, 0.2716820666212706, 2.8675521216097377, 8.97351044119665], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.985851777985722, 3.7889419948876584, 0.2716820666212706, 2.8675521216097377, 8.97351044119665], res_norm=1.292e+01
2026-01-21 13:53:31,115 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:31,116 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:31,132 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,295 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,315 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,363 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,386 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,429 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,448 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,495 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,517 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,565 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,587 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,629 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,650 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,694 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,716 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,765 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,789 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,836 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:31,859 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,901 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:31,922 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:31,967 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:33,045 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 13:53:33,312 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.687)
2026-01-21 13:53:33,312 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:33,312 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 13:53:33,312 - INFO - integration_test -   Control dict from planner: {'a': 1.324479068033504, 'w': 0.799999192304183}
2026-01-21 13:53:33,312 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:33,313 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:33,314 - INFO - integration_test - Step 32 completed in 2.429s
2026-01-21 13:53:33,376 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 13:53:33,377 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.98875538 3.80201783 0.35168199 3.00000003 8.98675523]
2026-01-21 13:53:33,378 - DEBUG - integration_test - Step 33: Using propagated spline 8.9868 (close to path, dist=0.193m, drift=0.197m)
2026-01-21 13:53:33,378 - DEBUG - integration_test -   Set spline state to 8.9868
2026-01-21 13:53:33,381 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:33,487 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.989, 3.802), path_start=(0.000, 0.000), dist=8.847m
2026-01-21 13:53:33,487 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 13:53:33,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:33,612 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:33,612 - INFO - integration_test - Warmstart k=0: x0=7.988755383852146 , y0=3.8020178338347335 , psi0=0.3516819858516889 , v0=3.000000028413088 , spline0=8.986755231876984 , a0=0.0 , w0=0.0
2026-01-21 13:53:33,612 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:33,613 - INFO - integration_test - Dyn residual k=0: pred=[8.270393777043651, 3.905361034797798, 0.3516819858516889, 3.000000028413088, 9.286755234718292], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.270393777043651, 3.905361034797798, 0.3516819858516889, 3.000000028413088, 9.286755234718292], res_norm=1.338e+01
2026-01-21 13:53:33,614 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:33,615 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:33,631 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:33,803 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:33,825 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:33,872 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:33,894 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:33,939 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:33,959 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:34,006 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:34,027 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:34,071 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:34,094 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:34,139 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:34,160 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:34,204 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:34,226 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:34,270 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:34,290 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:34,335 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:34,355 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:34,400 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:34,419 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:34,462 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:35,292 - INFO - integration_test - Step 33: MPC solve successful
2026-01-21 13:53:35,440 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=8.987)
2026-01-21 13:53:35,440 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:35,440 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 13:53:35,441 - INFO - integration_test -   Control dict from planner: {'a': 1.5720389530480866e-08, 'w': 0.7051443248435842}
2026-01-21 13:53:35,441 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:35,441 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:35,442 - INFO - integration_test - Step 33 completed in 2.065s
2026-01-21 13:53:35,521 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 13:53:35,522 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.26651836 3.91520109 0.42219642 3.00000003 9.28675523]
2026-01-21 13:53:35,523 - DEBUG - integration_test - Step 34: Using propagated spline 9.2868 (close to path, dist=0.247m, drift=0.009m)
2026-01-21 13:53:35,523 - DEBUG - integration_test -   Set spline state to 9.2868
2026-01-21 13:53:35,526 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:35,647 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.267, 3.915), path_start=(0.000, 0.000), dist=9.147m
2026-01-21 13:53:35,648 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 13:53:35,794 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:35,822 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:35,823 - INFO - integration_test - Warmstart k=0: x0=8.266518355700027 , y0=3.915201087046993 , psi0=0.4221964183360474 , v0=3.000000029985127 , spline0=9.286755234875496 , a0=0.0 , w0=0.0
2026-01-21 13:53:35,823 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:35,824 - INFO - integration_test - Dyn residual k=0: pred=[8.540175696238613, 4.038130586226224, 0.4221964183360474, 3.000000029985127, 9.586755237874009], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.540175696238613, 4.038130586226224, 0.4221964183360474, 3.000000029985127, 9.586755237874009], res_norm=1.380e+01
2026-01-21 13:53:35,824 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:35,825 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:35,842 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,179 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,201 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,247 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,272 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,323 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,344 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,394 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,414 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,463 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,483 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,532 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,553 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,600 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,623 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,671 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,692 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,737 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:36,759 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,803 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:36,823 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:36,868 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:37,699 - INFO - integration_test - Step 34: MPC solve successful
2026-01-21 13:53:37,835 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.287)
2026-01-21 13:53:37,835 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:37,835 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 13:53:37,835 - INFO - integration_test -   Control dict from planner: {'a': -1.574950875669398e-08, 'w': -0.31050790481250984}
2026-01-21 13:53:37,835 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:37,835 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:37,837 - INFO - integration_test - Step 34 completed in 2.315s
2026-01-21 13:53:37,905 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 13:53:37,906 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.5420401  4.03386254 0.39114563 3.00000003 9.58675524]
2026-01-21 13:53:37,907 - DEBUG - integration_test - Step 35: Using propagated spline 9.5868 (close to path, dist=0.243m, drift=0.309m)
2026-01-21 13:53:37,907 - DEBUG - integration_test -   Set spline state to 9.5868
2026-01-21 13:53:37,910 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:38,019 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.542, 4.034), path_start=(0.000, 0.000), dist=9.447m
2026-01-21 13:53:38,020 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 13:53:38,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:38,142 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:38,143 - INFO - integration_test - Warmstart k=0: x0=8.542040099572082 , y0=4.033862536384963 , psi0=0.3911456278547964 , v0=3.000000028410176 , spline0=9.586755237716513 , a0=0.0 , w0=0.0
2026-01-21 13:53:38,143 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:38,144 - INFO - integration_test - Dyn residual k=0: pred=[8.819381971766429, 4.148236867562661, 0.3911456278547964, 3.000000028410176, 9.88675524055753], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.819381971766429, 4.148236867562661, 0.3911456278547964, 3.000000028410176, 9.88675524055753], res_norm=1.421e+01
2026-01-21 13:53:38,144 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:38,145 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:38,160 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,328 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,352 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,403 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,425 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,475 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,496 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,546 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,571 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,615 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,635 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,679 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,699 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,742 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,764 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,809 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,831 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,877 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:38,898 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:38,945 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:38,966 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:39,011 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:39,832 - INFO - integration_test - Step 35: MPC solve successful
2026-01-21 13:53:39,963 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.587)
2026-01-21 13:53:39,963 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:39,963 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 13:53:39,963 - INFO - integration_test -   Control dict from planner: {'a': -2.79019678975476e-07, 'w': 0.028195958254785394}
2026-01-21 13:53:39,963 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:39,964 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:39,965 - INFO - integration_test - Step 35 completed in 2.058s
2026-01-21 13:53:40,024 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 13:53:40,025 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.81922036 4.14862771 0.39396522 3.         9.88675524]
2026-01-21 13:53:40,025 - DEBUG - integration_test - Step 36: Using propagated spline 9.8868 (close to path, dist=0.193m, drift=0.121m)
2026-01-21 13:53:40,025 - DEBUG - integration_test -   Set spline state to 9.8868
2026-01-21 13:53:40,028 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:40,292 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.819, 4.149), path_start=(0.000, 0.000), dist=9.746m
2026-01-21 13:53:40,292 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 13:53:40,391 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:40,415 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:40,415 - INFO - integration_test - Warmstart k=0: x0=8.819220358407756 , y0=4.14862771121363 , psi0=0.3939652236802749 , v0=3.000000000508208 , spline0=9.886755237767334 , a0=0.0 , w0=0.0
2026-01-21 13:53:40,416 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:40,416 - INFO - integration_test - Dyn residual k=0: pred=[9.096238636616286, 4.263783577624653, 0.3939652236802749, 3.000000000508208, 10.186755237818154], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.096238636616286, 4.263783577624653, 0.3939652236802749, 3.000000000508208, 10.186755237818154], res_norm=1.462e+01
2026-01-21 13:53:40,417 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:40,418 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:40,433 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:40,603 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:40,624 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:40,671 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:40,695 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:40,748 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:40,775 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:40,823 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:40,843 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:40,892 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:40,911 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:40,953 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:40,976 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:41,022 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:41,042 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:41,090 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:41,110 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:41,159 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:41,196 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:41,269 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:41,296 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:41,343 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:42,748 - INFO - integration_test - Step 36: MPC solve successful
2026-01-21 13:53:42,889 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.887)
2026-01-21 13:53:42,889 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:42,889 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 13:53:42,889 - INFO - integration_test -   Control dict from planner: {'a': 2.9487768918901915e-07, 'w': -0.1563630107204409}
2026-01-21 13:53:42,889 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:42,889 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:42,890 - INFO - integration_test - Step 36 completed in 2.866s
2026-01-21 13:53:42,962 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 13:53:42,962 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.09712764  4.26161316  0.37832892  3.00000003 10.18675524]
2026-01-21 13:53:42,963 - DEBUG - integration_test - Step 37: Using propagated spline 10.1868 (close to path, dist=0.283m, drift=0.068m)
2026-01-21 13:53:42,963 - DEBUG - integration_test -   Set spline state to 10.1868
2026-01-21 13:53:42,966 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:43,078 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.097, 4.262), path_start=(0.000, 0.000), dist=10.046m
2026-01-21 13:53:43,078 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.046m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:53:43,078 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 13:53:43,180 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:43,205 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:43,206 - INFO - integration_test - Warmstart k=0: x0=9.09712763746917 , y0=4.261613159277242 , psi0=0.3783289226082308 , v0=3.0000000299959773 , spline0=10.186755240766932 , a0=0.0 , w0=0.0
2026-01-21 13:53:43,206 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:43,207 - INFO - integration_test - Dyn residual k=0: pred=[9.375912592891968, 4.372423584913402, 0.3783289226082308, 3.0000000299959773, 10.48675524376653], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.375912592891968, 4.372423584913402, 0.3783289226082308, 3.0000000299959773, 10.48675524376653], res_norm=1.504e+01
2026-01-21 13:53:43,207 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:43,208 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:43,224 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,394 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,416 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,463 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,485 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,534 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,559 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,606 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,627 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,674 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,695 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,742 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,762 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,808 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,828 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,876 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,896 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:43,941 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:43,963 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:44,007 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:44,029 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:44,074 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:44,745 - INFO - integration_test - Step 37: MPC solve successful
2026-01-21 13:53:44,890 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.187)
2026-01-21 13:53:44,890 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:44,890 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 13:53:44,890 - INFO - integration_test -   Control dict from planner: {'a': -2.5586331442111436e-07, 'w': -0.8000000071906391}
2026-01-21 13:53:44,890 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:44,890 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:44,891 - INFO - integration_test - Step 37 completed in 1.929s
2026-01-21 13:53:44,950 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 13:53:44,960 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.38004537  4.36115997  0.29832892  3.         10.48675524]
2026-01-21 13:53:44,961 - DEBUG - integration_test - Step 38: Using propagated spline 10.4868 (close to path, dist=0.220m, drift=0.232m)
2026-01-21 13:53:44,961 - DEBUG - integration_test -   Set spline state to 10.4868
2026-01-21 13:53:44,964 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:45,241 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.380, 4.361), path_start=(0.000, 0.000), dist=10.344m
2026-01-21 13:53:45,241 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.344m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:53:45,241 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 13:53:45,351 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:45,380 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:45,380 - INFO - integration_test - Warmstart k=0: x0=9.38004537383769 , y0=4.361159973775851 , psi0=0.2983289218891669 , v0=3.000000004409646 , spline0=10.486755241207897 , a0=0.0 , w0=0.0
2026-01-21 13:53:45,380 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:45,381 - INFO - integration_test - Dyn residual k=0: pred=[9.666794071965732, 4.44933697977204, 0.2983289218891669, 3.000000004409646, 10.786755241648862], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.666794071965732, 4.44933697977204, 0.2983289218891669, 3.000000004409646, 10.786755241648862], res_norm=1.545e+01
2026-01-21 13:53:45,382 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:45,382 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:45,399 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:45,585 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:45,607 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:45,658 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:45,680 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:45,728 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:45,749 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:45,800 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:45,822 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:45,872 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:45,895 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:45,945 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:45,967 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:46,018 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:46,039 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:46,089 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:46,111 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:46,162 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:46,186 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:46,235 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:46,256 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:46,306 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:47,054 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 13:53:47,191 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.487)
2026-01-21 13:53:47,191 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:47,192 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 13:53:47,192 - INFO - integration_test -   Control dict from planner: {'a': 2.5568728781888624e-07, 'w': 0.7999999311112971}
2026-01-21 13:53:47,192 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:47,192 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:47,193 - INFO - integration_test - Step 38 completed in 2.233s
2026-01-21 13:53:47,250 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 13:53:47,251 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.66296311  4.46070679  0.37832892  3.00000003 10.78675524]
2026-01-21 13:53:47,252 - DEBUG - integration_test - Step 39: Using propagated spline 10.7868 (close to path, dist=0.228m, drift=0.044m)
2026-01-21 13:53:47,252 - DEBUG - integration_test -   Set spline state to 10.7868
2026-01-21 13:53:47,255 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:47,364 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.663, 4.461), path_start=(0.000, 0.000), dist=10.643m
2026-01-21 13:53:47,364 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.643m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:53:47,364 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 13:53:47,460 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:47,486 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:47,486 - INFO - integration_test - Warmstart k=0: x0=9.662963110598406 , y0=4.460706787202996 , psi0=0.3783289150002966 , v0=3.000000029978375 , spline0=10.786755244205734 , a0=0.0 , w0=0.0
2026-01-21 13:53:47,486 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:47,488 - INFO - integration_test - Dyn residual k=0: pred=[9.941748066862607, 4.571517210717529, 0.3783289150002966, 3.000000029978375, 11.086755247203572], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.941748066862607, 4.571517210717529, 0.3783289150002966, 3.000000029978375, 11.086755247203572], res_norm=1.587e+01
2026-01-21 13:53:47,489 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:47,490 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:47,507 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:47,678 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:47,700 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:47,746 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:47,767 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:47,812 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:47,833 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:47,879 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:47,899 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:47,944 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:47,964 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:48,011 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:48,032 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:48,077 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:48,099 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:48,143 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:48,163 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:48,217 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:48,239 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:48,283 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:48,302 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:48,345 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:51,767 - WARNING - integration_test - Step 39: MPC solve failed
2026-01-21 13:53:51,767 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:53:52,150 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.787)
2026-01-21 13:53:52,151 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:52,151 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 13:53:52,151 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:53:52,151 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:52,151 - INFO - integration_test -   Planner output success: False
2026-01-21 13:53:52,151 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:53:52,153 - INFO - integration_test - Step 39 completed in 4.902s
2026-01-21 13:53:52,221 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 13:53:52,221 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.94174807  4.57151721  0.37832892  3.00000003 11.08675525]
2026-01-21 13:53:52,222 - DEBUG - integration_test - Step 40: Using propagated spline 11.0868 (close to path, dist=0.291m, drift=0.344m)
2026-01-21 13:53:52,222 - DEBUG - integration_test -   Set spline state to 11.0868
2026-01-21 13:53:52,225 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:52,331 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.942, 4.572), path_start=(0.000, 0.000), dist=10.942m
2026-01-21 13:53:52,331 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.942m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:53:52,331 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 13:53:52,429 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:52,454 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:52,454 - INFO - integration_test - Warmstart k=0: x0=9.941748066862607 , y0=4.571517210717529 , psi0=0.3783289150002966 , v0=3.000000029978375 , spline0=11.086755247203572 , a0=0.0 , w0=0.0
2026-01-21 13:53:52,455 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:52,456 - INFO - integration_test - Dyn residual k=0: pred=[10.220533023126807, 4.682327634232061, 0.3783289150002966, 3.000000029978375, 11.386755250201409], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.220533023126807, 4.682327634232061, 0.3783289150002966, 3.000000029978375, 11.386755250201409], res_norm=1.628e+01
2026-01-21 13:53:52,456 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:52,457 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:52,473 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:52,643 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:52,665 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:52,711 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:52,732 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:52,780 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:52,801 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:52,844 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:52,865 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:52,910 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:52,930 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:52,976 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:52,997 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:53,042 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:53,062 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:53,110 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:53,132 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:53,183 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:53,206 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:53,253 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:53,278 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:53,328 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:54,133 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 13:53:54,295 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.087)
2026-01-21 13:53:54,295 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:54,295 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 13:53:54,295 - INFO - integration_test -   Control dict from planner: {'a': -9.411584721009306e-06, 'w': 0.5755057133606096}
2026-01-21 13:53:54,295 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:54,295 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:54,297 - INFO - integration_test - Step 40 completed in 2.076s
2026-01-21 13:53:54,368 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 13:53:54,374 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.21719139  4.69028636  0.43587949  2.99999909 11.38675516]
2026-01-21 13:53:54,375 - DEBUG - integration_test - Step 41: Using propagated spline 11.3868 (close to path, dist=0.189m, drift=0.156m)
2026-01-21 13:53:54,376 - DEBUG - integration_test -   Set spline state to 11.3868
2026-01-21 13:53:54,379 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:54,488 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.217, 4.690), path_start=(0.000, 0.000), dist=11.242m
2026-01-21 13:53:54,488 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.242m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:53:54,488 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 13:53:54,589 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:54,615 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:54,615 - INFO - integration_test - Warmstart k=0: x0=10.217191392547733 , y0=4.690286360005475 , psi0=0.43587948633635754 , v0=2.999999088819903 , spline0=11.386755156085561 , a0=0.0 , w0=0.0
2026-01-21 13:53:54,615 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:54,616 - INFO - integration_test - Dyn residual k=0: pred=[10.489141030027401, 4.816948666963303, 0.43587948633635754, 2.999999088819903, 11.686755064967551], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.489141030027401, 4.816948666963303, 0.43587948633635754, 2.999999088819903, 11.686755064967551], res_norm=1.670e+01
2026-01-21 13:53:54,617 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:54,617 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:54,635 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:54,819 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:54,843 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:54,890 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:54,911 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:54,957 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:54,983 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:55,074 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:55,106 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:55,159 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:55,181 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:55,228 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:55,251 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:55,299 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:55,321 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:55,371 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:55,392 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:55,441 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:55,465 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:55,513 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:55,535 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:55,582 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:56,300 - INFO - integration_test - Step 41: MPC solve successful
2026-01-21 13:53:56,566 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.387)
2026-01-21 13:53:56,566 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:56,567 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 13:53:56,567 - INFO - integration_test -   Control dict from planner: {'a': 9.369054931805259e-06, 'w': 0.7999978403525881}
2026-01-21 13:53:56,567 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:56,567 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:56,568 - INFO - integration_test - Step 41 completed in 2.194s
2026-01-21 13:53:56,638 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 13:53:56,639 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.48378731  4.82768578  0.51587927  3.00000003 11.68675516]
2026-01-21 13:53:56,640 - DEBUG - integration_test - Step 42: Using propagated spline 11.6868 (close to path, dist=0.224m, drift=0.033m)
2026-01-21 13:53:56,640 - DEBUG - integration_test -   Set spline state to 11.6868
2026-01-21 13:53:56,643 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:56,750 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.484, 4.828), path_start=(0.000, 0.000), dist=11.542m
2026-01-21 13:53:56,750 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.542m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:53:56,750 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 13:53:57,041 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:57,069 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:57,069 - INFO - integration_test - Warmstart k=0: x0=10.483787312855931 , y0=4.82768578424925 , psi0=0.5158792703716164 , v0=3.000000025725396 , spline0=11.686755158658102 , a0=0.0 , w0=0.0
2026-01-21 13:53:57,069 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:57,070 - INFO - integration_test - Dyn residual k=0: pred=[10.744745109484287, 4.9756757498631305, 0.5158792703716164, 3.000000025725396, 11.986755161230642], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.744745109484287, 4.9756757498631305, 0.5158792703716164, 3.000000025725396, 11.986755161230642], res_norm=1.712e+01
2026-01-21 13:53:57,071 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:57,072 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:57,089 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,257 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,280 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,327 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,348 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,395 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,415 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,461 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,482 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,533 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,556 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,604 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,625 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,671 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,693 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,736 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,755 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,801 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:57,823 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,866 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:57,886 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:57,930 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:58,606 - INFO - integration_test - Step 42: MPC solve successful
2026-01-21 13:53:58,752 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.687)
2026-01-21 13:53:58,752 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:53:58,752 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 13:53:58,752 - INFO - integration_test -   Control dict from planner: {'a': 4.05598950757162e-08, 'w': 0.39542586388591894}
2026-01-21 13:53:58,752 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:53:58,753 - INFO - integration_test -   Planner output success: True
2026-01-21 13:53:58,754 - INFO - integration_test - Step 42 completed in 2.115s
2026-01-21 13:53:58,819 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 13:53:58,825 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.74175154  4.98079599  0.55542186  3.00000003 11.98675516]
2026-01-21 13:53:58,826 - DEBUG - integration_test - Step 43: Using propagated spline 11.9868 (close to path, dist=0.157m, drift=0.267m)
2026-01-21 13:53:58,826 - DEBUG - integration_test -   Set spline state to 11.9868
2026-01-21 13:53:58,829 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:58,936 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.742, 4.981), path_start=(0.000, 0.000), dist=11.840m
2026-01-21 13:53:58,936 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.840m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:53:58,936 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 13:53:59,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:53:59,061 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:53:59,061 - INFO - integration_test - Warmstart k=0: x0=10.74175153712565 , y0=4.980795987386961 , psi0=0.5554218567602083 , v0=3.0000000297813854 , spline0=11.98675516163624 , a0=0.0 , w0=0.0
2026-01-21 13:53:59,061 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:53:59,062 - INFO - integration_test - Dyn residual k=0: pred=[10.996654960673364, 5.138986525822538, 0.5554218567602083, 3.0000000297813854, 12.28675516461438], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.996654960673364, 5.138986525822538, 0.5554218567602083, 3.0000000297813854, 12.28675516461438], res_norm=1.754e+01
2026-01-21 13:53:59,063 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:59,064 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:53:59,082 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,250 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,276 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,324 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,346 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,396 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,416 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,459 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,483 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,531 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,552 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,599 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,618 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,664 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,686 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,730 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,752 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,798 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:53:59,819 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,861 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:53:59,883 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:53:59,929 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:00,745 - INFO - integration_test - Step 43: MPC solve successful
2026-01-21 13:54:00,930 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=11.987)
2026-01-21 13:54:00,930 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:00,931 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 13:54:00,931 - INFO - integration_test -   Control dict from planner: {'a': -9.156409087480774e-07, 'w': 0.7999953259886644}
2026-01-21 13:54:00,931 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:00,931 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:00,933 - INFO - integration_test - Step 43 completed in 2.108s
2026-01-21 13:54:01,032 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 13:54:01,041 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[10.99005894  5.14900849  0.63542139  2.99999994 12.28675516]
2026-01-21 13:54:01,041 - DEBUG - integration_test - Step 44: Using propagated spline 12.2868 (close to path, dist=0.074m, drift=0.079m)
2026-01-21 13:54:01,041 - DEBUG - integration_test -   Set spline state to 12.2868
2026-01-21 13:54:01,045 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:01,155 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(10.990, 5.149), path_start=(0.000, 0.000), dist=12.136m
2026-01-21 13:54:01,155 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.136m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:01,155 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 13:54:01,249 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:01,277 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:01,277 - INFO - integration_test - Warmstart k=0: x0=10.99005894301836 , y0=5.1490084856676726 , psi0=0.6354213893590748 , v0=2.9999999382172944 , spline0=12.28675515545797 , a0=0.0 , w0=0.0
2026-01-21 13:54:01,277 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:01,278 - INFO - integration_test - Dyn residual k=0: pred=[11.231505437939068, 5.327063495098864, 0.6354213893590748, 2.9999999382172944, 12.586755149279698], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.231505437939068, 5.327063495098864, 0.6354213893590748, 2.9999999382172944, 12.586755149279698], res_norm=1.795e+01
2026-01-21 13:54:01,279 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:01,280 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:01,296 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:01,509 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:01,530 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:01,579 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:01,602 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:01,674 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:01,708 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:01,795 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:01,834 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:01,898 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:01,923 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:01,971 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:01,997 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:02,050 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:02,073 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:02,123 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:02,144 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:02,193 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:02,215 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:02,258 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:02,280 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:02,322 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:05,371 - WARNING - integration_test - Step 44: MPC solve failed
2026-01-21 13:54:05,371 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:54:05,518 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.287)
2026-01-21 13:54:05,518 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:05,518 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 13:54:05,518 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:05,518 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:05,518 - INFO - integration_test -   Planner output success: False
2026-01-21 13:54:05,518 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:05,520 - INFO - integration_test - Step 44 completed in 4.479s
2026-01-21 13:54:05,592 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 13:54:05,594 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.23150544  5.3270635   0.63542139  2.99999994 12.58675515]
2026-01-21 13:54:05,595 - DEBUG - integration_test - Step 45: Using propagated spline 12.5868 (close to path, dist=0.227m, drift=0.379m)
2026-01-21 13:54:05,595 - DEBUG - integration_test -   Set spline state to 12.5868
2026-01-21 13:54:05,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:05,699 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.232, 5.327), path_start=(0.000, 0.000), dist=12.431m
2026-01-21 13:54:05,699 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.431m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:05,699 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 13:54:05,794 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:05,820 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:05,820 - INFO - integration_test - Warmstart k=0: x0=11.231505437939068 , y0=5.327063495098864 , psi0=0.6354213893590748 , v0=2.9999999382172944 , spline0=12.586755149279698 , a0=0.0 , w0=0.0
2026-01-21 13:54:05,820 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:05,821 - INFO - integration_test - Dyn residual k=0: pred=[11.472951932859777, 5.5051185045300555, 0.6354213893590748, 2.9999999382172944, 12.886755143101427], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.472951932859777, 5.5051185045300555, 0.6354213893590748, 2.9999999382172944, 12.886755143101427], res_norm=1.837e+01
2026-01-21 13:54:05,822 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:05,823 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:05,837 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:05,997 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,019 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,064 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,086 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,132 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,155 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,202 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,224 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,272 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,292 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,340 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,364 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,408 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,434 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,483 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,502 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,547 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:06,571 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,614 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:06,634 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:06,681 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:09,307 - WARNING - integration_test - Step 45: MPC solve failed
2026-01-21 13:54:09,307 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 13:54:09,463 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.587)
2026-01-21 13:54:09,463 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:09,463 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 13:54:09,463 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:09,463 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:09,464 - INFO - integration_test -   Planner output success: False
2026-01-21 13:54:09,464 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:09,465 - INFO - integration_test - Step 45 completed in 3.871s
2026-01-21 13:54:09,541 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 13:54:09,542 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.47295193  5.5051185   0.63542139  2.99999994 12.88675514]
2026-01-21 13:54:09,543 - DEBUG - integration_test - Step 46: Using propagated spline 12.8868 (close to path, dist=0.173m, drift=0.191m)
2026-01-21 13:54:09,543 - DEBUG - integration_test -   Set spline state to 12.8868
2026-01-21 13:54:09,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:09,845 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.473, 5.505), path_start=(0.000, 0.000), dist=12.725m
2026-01-21 13:54:09,845 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.725m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:09,845 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 13:54:09,940 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:09,967 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:09,967 - INFO - integration_test - Warmstart k=0: x0=11.472951932859777 , y0=5.5051185045300555 , psi0=0.6354213893590748 , v0=2.9999999382172944 , spline0=12.886755143101427 , a0=0.0 , w0=0.0
2026-01-21 13:54:09,967 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:09,968 - INFO - integration_test - Dyn residual k=0: pred=[11.714398427780486, 5.683173513961247, 0.6354213893590748, 2.9999999382172944, 13.186755136923155], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.714398427780486, 5.683173513961247, 0.6354213893590748, 2.9999999382172944, 13.186755136923155], res_norm=1.878e+01
2026-01-21 13:54:09,969 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:09,969 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:09,985 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,150 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,173 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,218 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,240 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,287 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,308 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,352 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,375 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,424 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,443 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,487 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,507 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,551 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,577 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,622 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,642 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,688 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:10,707 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,750 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:10,771 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:10,813 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:13,679 - WARNING - integration_test - Step 46: MPC solve failed
2026-01-21 13:54:13,679 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 13:54:13,845 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.887)
2026-01-21 13:54:13,845 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:13,845 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 13:54:13,845 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:13,845 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:13,845 - INFO - integration_test -   Planner output success: False
2026-01-21 13:54:13,845 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:13,847 - INFO - integration_test - Step 46 completed in 4.305s
2026-01-21 13:54:13,918 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 13:54:13,919 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.71439843  5.68317351  0.63542139  2.99999994 13.18675514]
2026-01-21 13:54:13,920 - DEBUG - integration_test - Step 47: Using propagated spline 13.1868 (close to path, dist=0.340m, drift=0.003m)
2026-01-21 13:54:13,920 - DEBUG - integration_test -   Set spline state to 13.1868
2026-01-21 13:54:13,923 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:14,026 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.714, 5.683), path_start=(0.000, 0.000), dist=13.020m
2026-01-21 13:54:14,026 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=13.020m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:14,026 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 13:54:14,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:14,141 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:14,141 - INFO - integration_test - Warmstart k=0: x0=11.714398427780486 , y0=5.683173513961247 , psi0=0.6354213893590748 , v0=2.9999999382172944 , spline0=13.186755136923155 , a0=0.0 , w0=0.0
2026-01-21 13:54:14,141 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:14,142 - INFO - integration_test - Dyn residual k=0: pred=[11.955844922701194, 5.861228523392438, 0.6354213893590748, 2.9999999382172944, 13.486755130744884], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.955844922701194, 5.861228523392438, 0.6354213893590748, 2.9999999382172944, 13.486755130744884], res_norm=1.920e+01
2026-01-21 13:54:14,143 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:14,143 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:14,161 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,321 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,340 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,387 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,409 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,452 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,475 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,518 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,538 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,589 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,610 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,652 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,676 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,718 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,737 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,783 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,803 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,848 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:14,869 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,911 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:14,930 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:14,974 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:17,566 - WARNING - integration_test - Step 47: MPC solve failed
2026-01-21 13:54:17,566 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 13:54:17,919 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.187)
2026-01-21 13:54:17,919 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:17,919 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 13:54:17,919 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:17,919 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:17,919 - INFO - integration_test -   Planner output success: False
2026-01-21 13:54:17,919 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:17,921 - INFO - integration_test - Step 47 completed in 4.002s
2026-01-21 13:54:17,984 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 13:54:17,993 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[11.95584492  5.86122852  0.63542139  2.99999994 13.48675513]
2026-01-21 13:54:17,993 - DEBUG - integration_test - Step 48: Using propagated spline 13.4868 (close to path, dist=0.373m, drift=0.303m)
2026-01-21 13:54:17,993 - DEBUG - integration_test -   Set spline state to 13.4868
2026-01-21 13:54:17,996 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:18,099 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(11.956, 5.861), path_start=(0.000, 0.000), dist=13.315m
2026-01-21 13:54:18,099 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.315m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:18,100 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 13:54:18,195 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:18,220 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:18,220 - INFO - integration_test - Warmstart k=0: x0=11.955844922701194 , y0=5.861228523392438 , psi0=0.6354213893590748 , v0=2.9999999382172944 , spline0=13.486755130744884 , a0=0.0 , w0=0.0
2026-01-21 13:54:18,220 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:18,221 - INFO - integration_test - Dyn residual k=0: pred=[12.197291417621903, 6.03928353282363, 0.6354213893590748, 2.9999999382172944, 13.786755124566612], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.197291417621903, 6.03928353282363, 0.6354213893590748, 2.9999999382172944, 13.786755124566612], res_norm=1.961e+01
2026-01-21 13:54:18,222 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:18,223 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:18,239 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,403 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,425 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,471 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,491 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,533 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,555 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,607 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,628 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,673 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,693 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,735 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,759 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,805 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,826 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,870 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,890 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,934 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:18,954 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:18,996 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:19,015 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:19,059 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:22,033 - WARNING - integration_test - Step 48: MPC solve failed
2026-01-21 13:54:22,033 - WARNING - integration_test -   Consecutive MPC failures: 5/15
2026-01-21 13:54:22,211 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.487)
2026-01-21 13:54:22,211 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:22,211 - INFO - integration_test - === Applying control at step 48 ===
2026-01-21 13:54:22,211 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:22,212 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:22,212 - INFO - integration_test -   Planner output success: False
2026-01-21 13:54:22,212 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:22,213 - INFO - integration_test - Step 48 completed in 4.221s
2026-01-21 13:54:22,287 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-21 13:54:22,291 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.19729142  6.03928353  0.63542139  2.99999994 13.78675512]
2026-01-21 13:54:22,292 - DEBUG - integration_test - Step 49: Using propagated spline 13.7868 (close to path, dist=0.488m, drift=0.114m)
2026-01-21 13:54:22,292 - DEBUG - integration_test -   Set spline state to 13.7868
2026-01-21 13:54:22,295 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:22,401 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.197, 6.039), path_start=(0.000, 0.000), dist=13.611m
2026-01-21 13:54:22,401 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.611m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:22,401 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-21 13:54:22,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:22,524 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:22,524 - INFO - integration_test - Warmstart k=0: x0=12.197291417621903 , y0=6.03928353282363 , psi0=0.6354213893590748 , v0=2.9999999382172944 , spline0=13.786755124566612 , a0=0.0 , w0=0.0
2026-01-21 13:54:22,524 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:22,525 - INFO - integration_test - Dyn residual k=0: pred=[12.438737912542612, 6.217338542254821, 0.6354213893590748, 2.9999999382172944, 14.086755118388341], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.438737912542612, 6.217338542254821, 0.6354213893590748, 2.9999999382172944, 14.086755118388341], res_norm=2.003e+01
2026-01-21 13:54:22,526 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:22,527 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:22,543 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:22,714 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:22,736 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:22,782 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:22,803 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:22,845 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:22,868 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:22,911 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:22,932 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:22,977 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:22,999 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:23,042 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:23,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:23,108 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:23,130 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:23,176 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:23,197 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:23,240 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:23,260 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:23,309 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:23,328 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:23,373 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:26,107 - WARNING - integration_test - Step 49: MPC solve failed
2026-01-21 13:54:26,107 - WARNING - integration_test -   Consecutive MPC failures: 6/15
2026-01-21 13:54:26,525 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.787)
2026-01-21 13:54:26,525 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:26,526 - INFO - integration_test - === Applying control at step 49 ===
2026-01-21 13:54:26,526 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:26,526 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:26,526 - INFO - integration_test -   Planner output success: False
2026-01-21 13:54:26,526 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:54:26,527 - INFO - integration_test - Step 49 completed in 4.236s
2026-01-21 13:54:26,596 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-21 13:54:26,604 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.43873791  6.21733854  0.63542139  2.99999994 14.08675512]
2026-01-21 13:54:26,605 - DEBUG - integration_test - Step 50: Using propagated spline 14.0868 (close to path, dist=0.583m, drift=0.414m)
2026-01-21 13:54:26,605 - DEBUG - integration_test -   Set spline state to 14.0868
2026-01-21 13:54:26,608 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:26,713 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.439, 6.217), path_start=(0.000, 0.000), dist=13.906m
2026-01-21 13:54:26,713 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.906m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:26,713 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-21 13:54:26,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:26,832 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:26,832 - INFO - integration_test - Warmstart k=0: x0=12.438737912542612 , y0=6.217338542254821 , psi0=0.6354213893590748 , v0=2.9999999382172944 , spline0=14.086755118388341 , a0=0.0 , w0=0.0
2026-01-21 13:54:26,832 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:26,833 - INFO - integration_test - Dyn residual k=0: pred=[12.68018440746332, 6.395393551686013, 0.6354213893590748, 2.9999999382172944, 14.38675511221007], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.68018440746332, 6.395393551686013, 0.6354213893590748, 2.9999999382172944, 14.38675511221007], res_norm=2.045e+01
2026-01-21 13:54:26,834 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:26,834 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:26,849 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,018 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,038 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,084 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,105 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,147 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,170 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,214 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,234 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,281 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,302 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,346 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,369 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,415 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,435 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,481 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,501 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,548 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:27,573 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,620 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:27,639 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:27,683 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:28,760 - INFO - integration_test - Step 50: MPC solve successful
2026-01-21 13:54:28,946 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.087)
2026-01-21 13:54:28,946 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:28,946 - INFO - integration_test - === Applying control at step 50 ===
2026-01-21 13:54:28,946 - INFO - integration_test -   Control dict from planner: {'a': 9.17229172783561e-07, 'w': -0.800000009639672}
2026-01-21 13:54:28,947 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:28,947 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:28,948 - INFO - integration_test - Step 50 completed in 2.344s
2026-01-21 13:54:29,010 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-21 13:54:29,016 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[12.68704536  6.38555098  0.55542139  3.00000003 14.38675512]
2026-01-21 13:54:29,016 - DEBUG - integration_test - Step 51: Using propagated spline 14.3868 (close to path, dist=0.665m, drift=0.226m)
2026-01-21 13:54:29,016 - DEBUG - integration_test -   Set spline state to 14.3868
2026-01-21 13:54:29,019 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:29,126 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(12.687, 6.386), path_start=(0.000, 0.000), dist=14.203m
2026-01-21 13:54:29,126 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.203m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:29,126 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-21 13:54:29,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:29,245 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:29,245 - INFO - integration_test - Warmstart k=0: x0=12.687045357059057 , y0=6.385550981865401 , psi0=0.5554213883951076 , v0=3.0000000299402116 , spline0=14.386755121382363 , a0=0.0 , w0=0.0
2026-01-21 13:54:29,245 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:29,246 - INFO - integration_test - Dyn residual k=0: pred=[12.941948854711166, 6.5437414009214665, 0.5554213883951076, 3.0000000299402116, 14.686755124376385], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.941948854711166, 6.5437414009214665, 0.5554213883951076, 3.0000000299402116, 14.686755124376385], res_norm=2.086e+01
2026-01-21 13:54:29,246 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:29,247 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:29,263 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,425 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,451 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,501 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,521 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,567 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,591 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,637 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,657 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,703 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,723 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,766 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,788 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,830 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,850 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,895 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,916 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:29,959 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:29,983 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:30,026 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:30,045 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:30,088 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:30,982 - INFO - integration_test - Step 51: MPC solve successful
2026-01-21 13:54:31,157 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.387)
2026-01-21 13:54:31,157 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:31,157 - INFO - integration_test - === Applying control at step 51 ===
2026-01-21 13:54:31,157 - INFO - integration_test -   Control dict from planner: {'a': -9.596176315681111e-10, 'w': -0.8000000091905906}
2026-01-21 13:54:31,157 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:31,157 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:31,158 - INFO - integration_test - Step 51 completed in 2.143s
2026-01-21 13:54:31,224 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-21 13:54:31,236 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[12.94800129  6.53338202  0.47542139  3.00000003 14.68675512]
2026-01-21 13:54:31,236 - DEBUG - integration_test - Step 52: Using propagated spline 14.6868 (close to path, dist=0.759m, drift=0.526m)
2026-01-21 13:54:31,236 - DEBUG - integration_test -   Set spline state to 14.6868
2026-01-21 13:54:31,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:31,344 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(12.948, 6.533), path_start=(0.000, 0.000), dist=14.503m
2026-01-21 13:54:31,344 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.503m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:31,344 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-21 13:54:31,438 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:31,463 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:31,463 - INFO - integration_test - Warmstart k=0: x0=12.948001291168179 , y0=6.533382017316902 , psi0=0.4754213874760485 , v0=3.0000000298442497 , spline0=14.686755124366787 , a0=0.0 , w0=0.0
2026-01-21 13:54:31,463 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:31,464 - INFO - integration_test - Dyn residual k=0: pred=[13.214731271615696, 6.670695961696643, 0.4754213874760485, 3.0000000298442497, 14.986755127351213], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.214731271615696, 6.670695961696643, 0.4754213874760485, 3.0000000298442497, 14.986755127351213], res_norm=2.128e+01
2026-01-21 13:54:31,467 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:31,467 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:31,484 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:31,645 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:31,669 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:31,713 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:31,733 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:31,777 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:31,798 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:31,841 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:31,863 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:31,907 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:31,926 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:31,972 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:31,993 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:32,035 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:32,056 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:32,100 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:32,119 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:32,165 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:32,185 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:32,226 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:32,247 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:32,290 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:33,599 - INFO - integration_test - Step 52: MPC solve successful
2026-01-21 13:54:34,012 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.687)
2026-01-21 13:54:34,012 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:34,012 - INFO - integration_test - === Applying control at step 52 ===
2026-01-21 13:54:34,012 - INFO - integration_test -   Control dict from planner: {'a': -1.147617663601245e-07, 'w': -0.7999998943450106}
2026-01-21 13:54:34,012 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:34,013 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:34,014 - INFO - integration_test - Step 52 completed in 2.778s
2026-01-21 13:54:34,078 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-21 13:54:34,085 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.21993648  6.65988603  0.3954214   3.00000002 14.98675513]
2026-01-21 13:54:34,086 - DEBUG - integration_test - Step 53: Using propagated spline 14.9868 (close to path, dist=0.781m, drift=0.338m)
2026-01-21 13:54:34,086 - DEBUG - integration_test -   Set spline state to 14.9868
2026-01-21 13:54:34,090 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:34,193 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.220, 6.660), path_start=(0.000, 0.000), dist=14.803m
2026-01-21 13:54:34,193 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.803m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:34,193 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-21 13:54:34,289 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:34,312 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:34,312 - INFO - integration_test - Warmstart k=0: x0=13.219936482398184 , y0=6.65988603316985 , psi0=0.3954213980415474 , v0=3.0000000183680733 , spline0=14.986755126203594 , a0=0.0 , w0=0.0
2026-01-21 13:54:34,312 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:34,313 - INFO - integration_test - Dyn residual k=0: pred=[13.496786781593139, 6.775445164949854, 0.3954213980415474, 3.0000000183680733, 15.2867551280404], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.496786781593139, 6.775445164949854, 0.3954213980415474, 3.0000000183680733, 15.2867551280404], res_norm=2.170e+01
2026-01-21 13:54:34,314 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:34,314 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:34,331 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:34,492 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:34,512 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:34,555 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:34,578 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:34,625 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:34,644 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:34,691 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:34,711 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:34,754 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:34,778 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:34,821 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:34,841 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:34,887 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:34,906 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:34,950 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:34,971 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:35,015 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:35,035 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:35,078 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:35,099 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:35,141 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:36,100 - INFO - integration_test - Step 53: MPC solve successful
2026-01-21 13:54:36,281 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=14.987)
2026-01-21 13:54:36,282 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:36,282 - INFO - integration_test - === Applying control at step 53 ===
2026-01-21 13:54:36,282 - INFO - integration_test -   Control dict from planner: {'a': 1.0852687066925053e-07, 'w': -0.8000000003438242}
2026-01-21 13:54:36,282 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:36,282 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:36,283 - INFO - integration_test - Step 53 completed in 2.198s
2026-01-21 13:54:36,346 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-21 13:54:36,352 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.50111147  6.76425384  0.3154214   3.00000003 15.28675513]
2026-01-21 13:54:36,353 - DEBUG - integration_test - Step 54: Using propagated spline 15.2868 (close to path, dist=0.839m, drift=0.149m)
2026-01-21 13:54:36,353 - DEBUG - integration_test -   Set spline state to 15.2868
2026-01-21 13:54:36,356 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:36,458 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.501, 6.764), path_start=(0.000, 0.000), dist=15.101m
2026-01-21 13:54:36,458 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.101m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:36,458 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-21 13:54:36,551 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:36,580 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:36,580 - INFO - integration_test - Warmstart k=0: x0=13.501111474139279 , y0=6.7642538358879785 , psi0=0.315421398007165 , v0=3.0000000292207605 , spline0=15.28675512912567 , a0=0.0 , w0=0.0
2026-01-21 13:54:36,580 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:36,581 - INFO - integration_test - Dyn residual k=0: pred=[13.78631119845367, 6.85731896901656, 0.315421398007165, 3.0000000292207605, 15.586755132047745], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.78631119845367, 6.85731896901656, 0.315421398007165, 3.0000000292207605, 15.586755132047745], res_norm=2.212e+01
2026-01-21 13:54:36,582 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:36,583 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:36,599 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:36,763 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:36,785 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:36,829 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:36,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:36,896 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:36,917 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:36,959 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:36,981 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:37,024 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:37,045 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:37,089 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:37,109 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:37,152 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:37,172 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:37,220 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:37,241 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:37,288 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:37,309 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:37,353 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:37,373 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:37,416 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:39,713 - INFO - integration_test - Step 54: MPC solve successful
2026-01-21 13:54:39,905 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.287)
2026-01-21 13:54:39,905 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:39,905 - INFO - integration_test - === Applying control at step 54 ===
2026-01-21 13:54:39,905 - INFO - integration_test -   Control dict from planner: {'a': -3.0855646975232918e-06, 'w': -0.7999903142193145}
2026-01-21 13:54:39,906 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:39,906 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:39,907 - INFO - integration_test - Step 54 completed in 3.555s
2026-01-21 13:54:39,974 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-21 13:54:39,982 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[13.78972765  6.84581796  0.23542237  2.99999972 15.5867551 ]
2026-01-21 13:54:39,983 - DEBUG - integration_test - Step 55: Using propagated spline 15.5868 (close to path, dist=0.819m, drift=0.449m)
2026-01-21 13:54:39,983 - DEBUG - integration_test -   Set spline state to 15.5868
2026-01-21 13:54:39,986 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:40,305 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(13.790, 6.846), path_start=(0.000, 0.000), dist=15.396m
2026-01-21 13:54:40,305 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.396m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:40,305 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-21 13:54:40,402 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:40,427 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:40,427 - INFO - integration_test - Warmstart k=0: x0=13.789727654677158 , y0=6.845817962756951 , psi0=0.23542236658523358 , v0=2.9999997206642908 , spline0=15.586755101192098 , a0=0.0 , w0=0.0
2026-01-21 13:54:40,427 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:40,428 - INFO - integration_test - Dyn residual k=0: pred=[14.081452400362233, 6.915794072929182, 0.23542236658523358, 2.9999997206642908, 15.886755073258527], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.081452400362233, 6.915794072929182, 0.23542236658523358, 2.9999997206642908, 15.886755073258527], res_norm=2.253e+01
2026-01-21 13:54:40,429 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:40,429 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:40,446 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:40,610 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:40,631 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:40,678 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:40,700 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:40,742 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:40,764 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:40,808 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:40,827 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:40,872 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:40,892 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:40,935 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:40,956 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:40,999 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:41,019 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:41,063 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:41,083 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:41,126 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:41,145 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:41,188 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:41,209 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:41,254 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:42,175 - INFO - integration_test - Step 55: MPC solve successful
2026-01-21 13:54:42,365 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.587)
2026-01-21 13:54:42,365 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:42,366 - INFO - integration_test - === Applying control at step 55 ===
2026-01-21 13:54:42,366 - INFO - integration_test -   Control dict from planner: {'a': 3.0930447401187065e-06, 'w': -0.8000000088813342}
2026-01-21 13:54:42,366 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:42,366 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:42,367 - INFO - integration_test - Step 55 completed in 2.385s
2026-01-21 13:54:42,431 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-21 13:54:42,443 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.0839389   6.90405669  0.15542237  3.00000003 15.8867551 ]
2026-01-21 13:54:42,443 - DEBUG - integration_test - Step 56: Using propagated spline 15.8868 (close to path, dist=0.812m, drift=0.261m)
2026-01-21 13:54:42,443 - DEBUG - integration_test -   Set spline state to 15.8868
2026-01-21 13:54:42,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:42,557 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.084, 6.904), path_start=(0.000, 0.000), dist=15.685m
2026-01-21 13:54:42,557 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.685m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:42,557 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-21 13:54:42,663 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:42,688 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:42,688 - INFO - integration_test - Warmstart k=0: x0=14.08393889817811 , y0=6.90405669143033 , psi0=0.15542236569710016 , v0=3.000000029968765 , spline0=15.886755104188975 , a0=0.0 , w0=0.0
2026-01-21 13:54:42,688 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:42,689 - INFO - integration_test - Dyn residual k=0: pred=[14.38032277247612, 6.950495908200496, 0.15542236569710016, 3.000000029968765, 16.186755107185853], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.38032277247612, 6.950495908200496, 0.15542236569710016, 3.000000029968765, 16.186755107185853], res_norm=2.294e+01
2026-01-21 13:54:42,690 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:42,691 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:42,709 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:42,869 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:42,890 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:42,932 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:42,952 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,001 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:43,022 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,068 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:43,089 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,134 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:43,155 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,200 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:43,223 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,271 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:43,291 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,336 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:43,360 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,406 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:43,435 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,513 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:43,535 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:43,584 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:45,156 - INFO - integration_test - Step 56: MPC solve successful
2026-01-21 13:54:45,338 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.887)
2026-01-21 13:54:45,338 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:45,338 - INFO - integration_test - === Applying control at step 56 ===
2026-01-21 13:54:45,338 - INFO - integration_test -   Control dict from planner: {'a': -2.2522404253972727e-09, 'w': -0.7999999868991277}
2026-01-21 13:54:45,338 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:45,338 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:45,339 - INFO - integration_test - Step 56 completed in 2.897s
2026-01-21 13:54:45,408 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-21 13:54:45,417 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.38186331  6.93859736  0.07542237  3.00000003 16.18675511]
2026-01-21 13:54:45,417 - DEBUG - integration_test - Step 57: Using propagated spline 16.1868 (close to path, dist=0.780m, drift=0.561m)
2026-01-21 13:54:45,417 - DEBUG - integration_test -   Set spline state to 16.1868
2026-01-21 13:54:45,420 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:45,524 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.382, 6.939), path_start=(0.000, 0.000), dist=15.968m
2026-01-21 13:54:45,524 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.968m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:45,524 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-21 13:54:45,623 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:45,647 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:45,647 - INFO - integration_test - Warmstart k=0: x0=14.381863313212722 , y0=6.938597356105768 , psi0=0.0754223670071874 , v0=3.000000029743541 , spline0=16.18675510716333 , a0=0.0 , w0=0.0
2026-01-21 13:54:45,647 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:45,648 - INFO - integration_test - Dyn residual k=0: pred=[14.681010440577843, 6.9612026203999156, 0.0754223670071874, 3.000000029743541, 16.486755110137683], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.681010440577843, 6.9612026203999156, 0.0754223670071874, 3.000000029743541, 16.486755110137683], res_norm=2.334e+01
2026-01-21 13:54:45,649 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:45,650 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:45,667 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:45,833 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:45,854 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:45,898 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:45,920 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:45,968 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:45,993 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:46,037 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:46,060 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:46,104 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:46,126 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:46,171 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:46,191 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:46,236 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:46,256 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:46,300 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:46,323 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:46,368 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:46,390 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:46,433 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:46,452 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:46,496 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:53,711 - INFO - integration_test - Step 57: MPC solve successful
2026-01-21 13:54:54,135 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.187)
2026-01-21 13:54:54,136 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:54,136 - INFO - integration_test - === Applying control at step 57 ===
2026-01-21 13:54:54,136 - INFO - integration_test -   Control dict from planner: {'a': -3.15013791340236e-05, 'w': -0.7983959914810654}
2026-01-21 13:54:54,136 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:54,136 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:54,137 - INFO - integration_test - Step 57 completed in 8.720s
2026-01-21 13:54:54,202 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-21 13:54:54,214 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[ 1.46815945e+01  6.94924306e+00 -4.41723214e-03  2.99999688e+00
  1.64867548e+01]
2026-01-21 13:54:54,215 - DEBUG - integration_test - Step 58: Using propagated spline 16.4868 (close to path, dist=0.708m, drift=0.373m)
2026-01-21 13:54:54,215 - DEBUG - integration_test -   Set spline state to 16.4868
2026-01-21 13:54:54,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:54,322 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(14.682, 6.949), path_start=(0.000, 0.000), dist=16.243m
2026-01-21 13:54:54,322 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.243m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:54,322 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-21 13:54:54,418 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:54,442 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:54,443 - INFO - integration_test - Warmstart k=0: x0=14.681594495022123 , y0=6.949243057800154 , psi0=-0.0044172321409191445 , v0=2.9999968796056278 , spline0=16.48675479512389 , a0=0.0 , w0=0.0
2026-01-21 13:54:54,443 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:54,444 - INFO - integration_test - Dyn residual k=0: pred=[14.981591256199522, 6.947917893845658, -0.0044172321409191445, 2.9999968796056278, 16.78675448308445], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.981591256199522, 6.947917893845658, -0.0044172321409191445, 2.9999968796056278, 16.78675448308445], res_norm=2.374e+01
2026-01-21 13:54:54,444 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:54,445 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:54,462 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:54,627 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:54,649 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:54,696 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:54,716 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:54,762 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:54,782 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:54,826 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:54,848 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:54,893 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:54,913 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:54,957 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:54,978 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:55,024 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:55,043 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:55,089 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:55,109 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:55,153 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:55,175 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:55,217 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:55,235 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:55,279 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:56,471 - INFO - integration_test - Step 58: MPC solve successful
2026-01-21 13:54:56,717 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.487)
2026-01-21 13:54:56,717 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:54:56,717 - INFO - integration_test - === Applying control at step 58 ===
2026-01-21 13:54:56,717 - INFO - integration_test -   Control dict from planner: {'a': 3.149805752343496e-05, 'w': -0.03107558341001367}
2026-01-21 13:54:56,717 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:54:56,717 - INFO - integration_test -   Planner output success: True
2026-01-21 13:54:56,718 - INFO - integration_test - Step 58 completed in 2.504s
2026-01-21 13:54:56,785 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-21 13:54:56,793 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[ 1.49815889e+01  6.94745177e+00 -7.52479048e-03  3.00000003e+00
  1.67867548e+01]
2026-01-21 13:54:56,794 - DEBUG - integration_test - Step 59: Using propagated spline 16.7868 (close to path, dist=0.676m, drift=0.673m)
2026-01-21 13:54:56,794 - DEBUG - integration_test -   Set spline state to 16.7868
2026-01-21 13:54:56,797 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:56,899 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(14.982, 6.947), path_start=(0.000, 0.000), dist=16.514m
2026-01-21 13:54:56,899 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.514m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:54:56,899 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-21 13:54:56,993 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:54:57,019 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:54:57,019 - INFO - integration_test - Warmstart k=0: x0=14.981588871835472 , y0=6.947451766612932 , psi0=-0.007524790481920512 , v0=3.00000002941138 , spline0=16.78675479806503 , a0=0.0 , w0=0.0
2026-01-21 13:54:57,019 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:54:57,020 - INFO - integration_test - Dyn residual k=0: pred=[15.281580381445833, 6.945194350749777, -0.007524790481920512, 3.00000002941138, 17.08675480100617], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.281580381445833, 6.945194350749777, -0.007524790481920512, 3.00000002941138, 17.08675480100617], res_norm=2.414e+01
2026-01-21 13:54:57,021 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:57,022 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:54:57,038 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,198 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,220 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,264 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,286 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,330 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,350 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,395 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,415 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,460 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,482 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,526 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,551 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,597 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,624 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,678 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,698 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,741 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:54:57,764 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,807 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:54:57,825 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:54:57,869 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:01,535 - INFO - integration_test - Step 59: MPC solve successful
2026-01-21 13:55:01,762 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.787)
2026-01-21 13:55:01,762 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:01,762 - INFO - integration_test - === Applying control at step 59 ===
2026-01-21 13:55:01,762 - INFO - integration_test -   Control dict from planner: {'a': -1.2913331119574325e-05, 'w': 0.0873551806650995}
2026-01-21 13:55:01,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:01,762 - INFO - integration_test -   Planner output success: True
2026-01-21 13:55:01,764 - INFO - integration_test - Step 59 completed in 4.971s
2026-01-21 13:55:01,827 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-21 13:55:01,832 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[1.52815864e+01 6.94650466e+00 1.21072758e-03 2.99999874e+00
 1.70867547e+01]
2026-01-21 13:55:01,832 - DEBUG - integration_test - Step 60: Using propagated spline 17.0868 (close to path, dist=0.570m, drift=0.484m)
2026-01-21 13:55:01,832 - DEBUG - integration_test -   Set spline state to 17.0868
2026-01-21 13:55:01,835 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:01,940 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.282, 6.947), path_start=(0.000, 0.000), dist=16.786m
2026-01-21 13:55:01,940 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.786m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:01,940 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-21 13:55:02,036 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:02,060 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:02,060 - INFO - integration_test - Warmstart k=0: x0=15.281586361324589 , y0=6.946504661863539 , psi0=0.0012107275845894359 , v0=2.999998738078268 , spline0=17.086754671872857 , a0=0.0 , w0=0.0
2026-01-21 13:55:02,060 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:02,062 - INFO - integration_test - Dyn residual k=0: pred=[15.581586015253343, 6.946867879897393, 0.0012107275845894359, 2.999998738078268, 17.386754545680684], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.581586015253343, 6.946867879897393, 0.0012107275845894359, 2.999998738078268, 17.386754545680684], res_norm=2.454e+01
2026-01-21 13:55:02,062 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:02,063 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:02,079 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,237 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,257 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,304 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,326 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,370 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,391 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,451 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,491 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,552 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,575 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,622 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,643 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,689 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,709 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,751 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,774 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,820 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:02,839 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,884 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:02,903 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:02,947 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:12,928 - WARNING - integration_test - Step 60: MPC solve failed
2026-01-21 13:55:12,928 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:55:13,410 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.087)
2026-01-21 13:55:13,410 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:13,410 - INFO - integration_test - === Applying control at step 60 ===
2026-01-21 13:55:13,410 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:55:13,410 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:13,410 - INFO - integration_test -   Planner output success: False
2026-01-21 13:55:13,410 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:55:13,412 - INFO - integration_test - Step 60 completed in 11.580s
2026-01-21 13:55:13,485 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-21 13:55:13,486 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[1.55815860e+01 6.94686788e+00 1.21072758e-03 2.99999874e+00
 1.73867545e+01]
2026-01-21 13:55:13,488 - DEBUG - integration_test - Step 61: Using propagated spline 17.3868 (close to path, dist=0.551m, drift=0.296m)
2026-01-21 13:55:13,488 - DEBUG - integration_test -   Set spline state to 17.3868
2026-01-21 13:55:13,491 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:13,595 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.582, 6.947), path_start=(0.000, 0.000), dist=17.060m
2026-01-21 13:55:13,595 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.060m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:13,595 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-21 13:55:13,694 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:13,720 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:13,720 - INFO - integration_test - Warmstart k=0: x0=15.581586015253343 , y0=6.946867879897393 , psi0=0.0012107275845894359 , v0=2.999998738078268 , spline0=17.386754545680684 , a0=0.0 , w0=0.0
2026-01-21 13:55:13,720 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:13,721 - INFO - integration_test - Dyn residual k=0: pred=[15.881585669182098, 6.9472310979312475, 0.0012107275845894359, 2.999998738078268, 17.686754419488512], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.881585669182098, 6.9472310979312475, 0.0012107275845894359, 2.999998738078268, 17.686754419488512], res_norm=2.495e+01
2026-01-21 13:55:13,721 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:13,722 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:13,737 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:13,899 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:13,918 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:13,964 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:13,985 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,028 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:14,051 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,095 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:14,114 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,160 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:14,179 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,222 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:14,244 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,288 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:14,307 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,354 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:14,374 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,416 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:14,436 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,481 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:14,500 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:14,543 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:27,491 - WARNING - integration_test - Step 61: MPC solve failed
2026-01-21 13:55:27,491 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 13:55:27,747 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.387)
2026-01-21 13:55:27,747 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:27,747 - INFO - integration_test - === Applying control at step 61 ===
2026-01-21 13:55:27,747 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:55:27,747 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:27,747 - INFO - integration_test -   Planner output success: False
2026-01-21 13:55:27,747 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:55:27,748 - INFO - integration_test - Step 61 completed in 14.262s
2026-01-21 13:55:27,828 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-21 13:55:27,829 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[1.58815857e+01 6.94723110e+00 1.21072758e-03 2.99999874e+00
 1.76867544e+01]
2026-01-21 13:55:27,830 - DEBUG - integration_test - Step 62: Using propagated spline 17.6868 (close to path, dist=0.454m, drift=0.596m)
2026-01-21 13:55:27,831 - DEBUG - integration_test -   Set spline state to 17.6868
2026-01-21 13:55:27,834 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:27,934 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(15.882, 6.947), path_start=(0.000, 0.000), dist=17.335m
2026-01-21 13:55:27,934 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.335m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:27,934 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-21 13:55:28,026 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:28,053 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:28,053 - INFO - integration_test - Warmstart k=0: x0=15.881585669182098 , y0=6.9472310979312475 , psi0=0.0012107275845894359 , v0=2.999998738078268 , spline0=17.686754419488512 , a0=0.0 , w0=0.0
2026-01-21 13:55:28,053 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:28,054 - INFO - integration_test - Dyn residual k=0: pred=[16.181585323110852, 6.947594315965102, 0.0012107275845894359, 2.999998738078268, 17.98675429329634], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.181585323110852, 6.947594315965102, 0.0012107275845894359, 2.999998738078268, 17.98675429329634], res_norm=2.535e+01
2026-01-21 13:55:28,055 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:28,056 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:28,073 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,233 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,254 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,298 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,319 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,363 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,384 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,427 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,451 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,497 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,516 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,562 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,583 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,624 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,646 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,695 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,718 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,762 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:28,782 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,824 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:28,846 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:28,891 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:30,165 - INFO - integration_test - Step 62: MPC solve successful
2026-01-21 13:55:30,636 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.687)
2026-01-21 13:55:30,636 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:30,636 - INFO - integration_test - === Applying control at step 62 ===
2026-01-21 13:55:30,636 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019209929, 'w': 0.2810153911004195}
2026-01-21 13:55:30,637 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:30,637 - INFO - integration_test -   Planner output success: True
2026-01-21 13:55:30,638 - INFO - integration_test - Step 62 completed in 2.809s
2026-01-21 13:55:30,712 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-21 13:55:30,719 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.17154294  6.95160978  0.02931227  2.79999874 17.96675429]
2026-01-21 13:55:30,719 - DEBUG - integration_test - Step 63: Using propagated spline 17.9668 (close to path, dist=0.422m, drift=0.388m)
2026-01-21 13:55:30,720 - DEBUG - integration_test -   Set spline state to 17.9668
2026-01-21 13:55:30,723 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:30,825 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.172, 6.952), path_start=(0.000, 0.000), dist=17.602m
2026-01-21 13:55:30,825 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.602m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:30,825 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-21 13:55:30,922 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:30,946 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:30,946 - INFO - integration_test - Warmstart k=0: x0=16.17154294497729 , y0=6.951609783847073 , psi0=0.02931226669463139 , v0=2.799998736157275 , spline0=17.96675429310424 , a0=0.0 , w0=0.0
2026-01-21 13:55:30,946 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:30,947 - INFO - integration_test - Dyn residual k=0: pred=[16.451422538002834, 6.959816039551054, 0.02931226669463139, 2.799998736157275, 18.24675416671997], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.451422538002834, 6.959816039551054, 0.02931226669463139, 2.799998736157275, 18.24675416671997], res_norm=2.569e+01
2026-01-21 13:55:30,947 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:30,948 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:30,963 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,124 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,143 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,188 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,208 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,253 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,274 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,319 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,339 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,383 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,403 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,446 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,468 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,512 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,531 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,576 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,595 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,637 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:31,661 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,706 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:31,726 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:31,770 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:32,769 - INFO - integration_test - Step 63: MPC solve successful
2026-01-21 13:55:33,013 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=17.967)
2026-01-21 13:55:33,014 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:33,014 - INFO - integration_test - === Applying control at step 63 ===
2026-01-21 13:55:33,014 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019997653, 'w': -0.01859964856640537}
2026-01-21 13:55:33,014 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:33,014 - INFO - integration_test -   Planner output success: True
2026-01-21 13:55:33,015 - INFO - integration_test - Step 63 completed in 2.296s
2026-01-21 13:55:33,081 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-21 13:55:33,090 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.44143395  6.95927507  0.0274523   2.59999873 18.22675417]
2026-01-21 13:55:33,091 - DEBUG - integration_test - Step 64: Using propagated spline 18.2268 (close to path, dist=0.367m, drift=0.648m)
2026-01-21 13:55:33,092 - DEBUG - integration_test -   Set spline state to 18.2268
2026-01-21 13:55:33,095 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:33,204 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.441, 6.959), path_start=(0.000, 0.000), dist=17.854m
2026-01-21 13:55:33,204 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=17.854m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:33,204 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-21 13:55:33,298 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:33,325 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:33,325 - INFO - integration_test - Warmstart k=0: x0=16.441433949171042 , y0=6.95927506578314 , psi0=0.027452301837990856 , v0=2.5999987341575097 , spline0=18.226754166519992 , a0=0.0 , w0=0.0
2026-01-21 13:55:33,325 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:33,326 - INFO - integration_test - Dyn residual k=0: pred=[16.70133585703329, 6.966411764303486, 0.027452301837990856, 2.5999987341575097, 18.486754039935743], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.70133585703329, 6.966411764303486, 0.027452301837990856, 2.5999987341575097, 18.486754039935743], res_norm=2.600e+01
2026-01-21 13:55:33,327 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:33,327 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:33,342 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:33,503 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:33,522 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:33,565 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:33,588 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:33,631 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:33,653 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:33,699 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:33,721 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:33,766 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:33,786 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:33,829 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:33,849 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:33,893 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:33,912 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:33,960 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:33,981 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:34,025 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:34,044 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:34,089 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:34,108 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:34,151 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:35,137 - INFO - integration_test - Step 64: MPC solve successful
2026-01-21 13:55:35,409 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.227)
2026-01-21 13:55:35,410 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:35,410 - INFO - integration_test - === Applying control at step 64 ===
2026-01-21 13:55:35,410 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199981747, 'w': 0.0709966499076358}
2026-01-21 13:55:35,410 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:35,410 - INFO - integration_test -   Planner output success: True
2026-01-21 13:55:35,411 - INFO - integration_test - Step 64 completed in 2.321s
2026-01-21 13:55:35,480 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-21 13:55:35,489 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[16.69131353  6.96701251  0.03455197  2.39999873 18.46675404]
2026-01-21 13:55:35,489 - DEBUG - integration_test - Step 65: Using propagated spline 18.4668 (close to path, dist=0.346m, drift=0.400m)
2026-01-21 13:55:35,489 - DEBUG - integration_test -   Set spline state to 18.4668
2026-01-21 13:55:35,495 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:35,599 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(16.691, 6.967), path_start=(0.000, 0.000), dist=18.087m
2026-01-21 13:55:35,599 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.087m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:35,599 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-21 13:55:35,703 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:35,729 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:35,730 - INFO - integration_test - Warmstart k=0: x0=16.691313532608635 , y0=6.967012510611754 , psi0=0.03455196682875444 , v0=2.3999987321576923 , spline0=18.46675403973576 , a0=0.0 , w0=0.0
2026-01-21 13:55:35,730 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:35,731 - INFO - integration_test - Dyn residual k=0: pred=[16.931170159542603, 6.975303328390762, 0.03455196682875444, 2.3999987321576923, 18.70675391295153], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.931170159542603, 6.975303328390762, 0.03455196682875444, 2.3999987321576923, 18.70675391295153], res_norm=2.629e+01
2026-01-21 13:55:35,732 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:35,732 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:35,747 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:35,913 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:35,933 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:35,979 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:36,000 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,045 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:36,066 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,112 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:36,134 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,186 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:36,206 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,252 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:36,274 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,320 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:36,339 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,384 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:36,403 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,445 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:36,468 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,511 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:36,529 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:36,572 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:49,999 - INFO - integration_test - Step 65: MPC solve successful
2026-01-21 13:55:50,538 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.467)
2026-01-21 13:55:50,538 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:50,538 - INFO - integration_test - === Applying control at step 65 ===
2026-01-21 13:55:50,538 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000194910466, 'w': 0.3942089261137271}
2026-01-21 13:55:50,538 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:50,538 - INFO - integration_test -   Planner output success: True
2026-01-21 13:55:50,539 - INFO - integration_test - Step 65 completed in 15.051s
2026-01-21 13:55:50,605 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-21 13:55:50,611 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[16.94092572  6.98063617  0.07397286  2.59999873 18.72675391]
2026-01-21 13:55:50,611 - DEBUG - integration_test - Step 66: Using propagated spline 18.7268 (close to path, dist=0.293m, drift=0.660m)
2026-01-21 13:55:50,612 - DEBUG - integration_test -   Set spline state to 18.7268
2026-01-21 13:55:50,615 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:50,723 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(16.941, 6.981), path_start=(0.000, 0.000), dist=18.323m
2026-01-21 13:55:50,723 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.323m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:50,723 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-21 13:55:50,819 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:50,842 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:50,842 - INFO - integration_test - Warmstart k=0: x0=16.940925718867533 , y0=6.980636173510634 , psi0=0.07397285944012714 , v0=2.599998734106797 , spline0=18.726753913146442 , a0=0.0 , w0=0.0
2026-01-21 13:55:50,842 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:50,843 - INFO - integration_test - Dyn residual k=0: pred=[17.20021455903211, 6.999851572014912, 0.07397285944012714, 2.599998734106797, 18.986753786557124], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.20021455903211, 6.999851572014912, 0.07397285944012714, 2.599998734106797, 18.986753786557124], res_norm=2.669e+01
2026-01-21 13:55:50,844 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:50,845 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:50,862 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,033 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,057 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,104 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,126 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,173 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,193 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,235 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,259 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,305 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,325 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,378 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,400 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,449 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,471 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,518 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,541 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,584 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:51,603 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,646 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:51,667 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:51,714 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:52,914 - INFO - integration_test - Step 66: MPC solve successful
2026-01-21 13:55:53,202 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.727)
2026-01-21 13:55:53,202 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:53,202 - INFO - integration_test - === Applying control at step 66 ===
2026-01-21 13:55:53,202 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199845602, 'w': -0.01087091998533818}
2026-01-21 13:55:53,202 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:53,202 - INFO - integration_test -   Planner output success: True
2026-01-21 13:55:53,204 - INFO - integration_test - Step 66 completed in 2.593s
2026-01-21 13:55:53,271 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-21 13:55:53,280 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.21019814  7.00044246  0.07288577  2.79999874 19.00675379]
2026-01-21 13:55:53,280 - DEBUG - integration_test - Step 67: Using propagated spline 19.0068 (close to path, dist=0.293m, drift=0.451m)
2026-01-21 13:55:53,281 - DEBUG - integration_test -   Set spline state to 19.0068
2026-01-21 13:55:53,285 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:53,391 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.210, 7.000), path_start=(0.000, 0.000), dist=18.579m
2026-01-21 13:55:53,391 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.579m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:53,391 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-21 13:55:53,490 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:53,519 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:53,519 - INFO - integration_test - Warmstart k=0: x0=17.210198137734768 , y0=7.000442459310155 , psi0=0.07288576744159332 , v0=2.7999987361052527 , spline0=19.006753786756967 , a0=0.0 , w0=0.0
2026-01-21 13:55:53,519 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:53,520 - INFO - integration_test - Dyn residual k=0: pred=[17.489454613953065, 7.020832400753177, 0.07288576744159332, 2.7999987361052527, 19.28675366036749], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.489454613953065, 7.020832400753177, 0.07288576744159332, 2.7999987361052527, 19.28675366036749], res_norm=2.711e+01
2026-01-21 13:55:53,521 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:53,522 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:53,537 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:53,709 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:53,731 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:53,776 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:53,796 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:53,841 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:53,864 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:53,908 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:53,928 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:53,973 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:53,994 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:54,038 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:54,058 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:54,102 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:54,125 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:54,168 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:54,187 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:54,231 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:54,250 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:54,294 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:54,312 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:54,354 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:55,541 - INFO - integration_test - Step 67: MPC solve successful
2026-01-21 13:55:55,835 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.007)
2026-01-21 13:55:55,835 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:55,835 - INFO - integration_test - === Applying control at step 67 ===
2026-01-21 13:55:55,835 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019977257, 'w': 0.07296743434894558}
2026-01-21 13:55:55,835 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:55,835 - INFO - integration_test -   Planner output success: True
2026-01-21 13:55:55,836 - INFO - integration_test - Step 67 completed in 2.557s
2026-01-21 13:55:55,907 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-21 13:55:55,916 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.49934752  7.02262777  0.08018251  2.99999874 19.30675366]
2026-01-21 13:55:55,917 - DEBUG - integration_test - Step 68: Using propagated spline 19.3068 (close to path, dist=0.260m, drift=0.751m)
2026-01-21 13:55:55,917 - DEBUG - integration_test -   Set spline state to 19.3068
2026-01-21 13:55:55,921 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:56,026 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.499, 7.023), path_start=(0.000, 0.000), dist=18.856m
2026-01-21 13:55:56,026 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=18.856m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:56,026 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-21 13:55:56,121 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:56,145 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:56,145 - INFO - integration_test - Warmstart k=0: x0=17.499347521215224 , y0=7.02262776510102 , psi0=0.08018251087648788 , v0=2.9999987381029785 , spline0=19.306753660567264 , a0=0.0 , w0=0.0
2026-01-21 13:55:56,145 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:56,146 - INFO - integration_test - Dyn residual k=0: pred=[17.79838352675096, 7.046656740930734, 0.08018251087648788, 2.9999987381029785, 19.60675353437756], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.79838352675096, 7.046656740930734, 0.08018251087648788, 2.9999987381029785, 19.60675353437756], res_norm=2.757e+01
2026-01-21 13:55:56,147 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:56,147 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:56,163 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,344 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,365 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,410 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,430 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,476 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,496 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,539 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,561 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,606 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,627 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,674 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,696 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,740 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,761 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,830 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,867 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,915 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:56,936 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:56,980 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:56,998 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:57,040 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:55:58,714 - INFO - integration_test - Step 68: MPC solve successful
2026-01-21 13:55:59,299 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.307)
2026-01-21 13:55:59,300 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:55:59,300 - INFO - integration_test - === Applying control at step 68 ===
2026-01-21 13:55:59,300 - INFO - integration_test -   Control dict from planner: {'a': 1.2918959400721488e-05, 'w': 0.04428319597373921}
2026-01-21 13:55:59,300 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:55:59,300 - INFO - integration_test -   Planner output success: True
2026-01-21 13:55:59,301 - INFO - integration_test - Step 68 completed in 3.385s
2026-01-21 13:55:59,369 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-21 13:55:59,380 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[17.79832941  7.04731878  0.08461083  3.00000003 19.60675366]
2026-01-21 13:55:59,381 - DEBUG - integration_test - Step 69: Using propagated spline 19.6068 (close to path, dist=0.213m, drift=0.563m)
2026-01-21 13:55:59,381 - DEBUG - integration_test -   Set spline state to 19.6068
2026-01-21 13:55:59,386 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:59,494 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(17.798, 7.047), path_start=(0.000, 0.000), dist=19.143m
2026-01-21 13:55:59,494 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.143m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:55:59,494 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-21 13:55:59,589 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:55:59,613 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:55:59,613 - INFO - integration_test - Warmstart k=0: x0=17.798329409868224 , y0=7.047318780179752 , psi0=0.08461083047386181 , v0=3.0000000299989185 , spline0=19.606753663567154 , a0=0.0 , w0=0.0
2026-01-21 13:55:59,613 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:55:59,614 - INFO - integration_test - Dyn residual k=0: pred=[18.0972562044492, 7.072671753998991, 0.08461083047386181, 3.0000000299989185, 19.906753666567045], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.0972562044492, 7.072671753998991, 0.08461083047386181, 3.0000000299989185, 19.906753666567045], res_norm=2.798e+01
2026-01-21 13:55:59,615 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:59,616 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:55:59,633 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:59,805 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:59,825 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:59,871 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:59,892 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:55:59,936 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:55:59,956 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:00,000 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:00,020 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:00,066 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:00,087 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:00,130 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:00,152 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:00,199 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:00,218 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:00,260 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:00,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:00,327 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:00,347 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:00,390 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:00,410 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:00,450 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:02,105 - INFO - integration_test - Step 69: MPC solve successful
2026-01-21 13:56:02,437 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.607)
2026-01-21 13:56:02,437 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:02,437 - INFO - integration_test - === Applying control at step 69 ===
2026-01-21 13:56:02,437 - INFO - integration_test -   Control dict from planner: {'a': -1.296946502673419e-09, 'w': 0.03812219859397298}
2026-01-21 13:56:02,437 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:02,437 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:02,438 - INFO - integration_test - Step 69 completed in 3.058s
2026-01-21 13:56:02,513 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-21 13:56:02,514 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.09720715  7.07324148  0.08842305  3.00000003 19.90675367]
2026-01-21 13:56:02,514 - DEBUG - integration_test - Step 70: Using propagated spline 19.9068 (close to path, dist=0.278m, drift=0.863m)
2026-01-21 13:56:02,514 - DEBUG - integration_test -   Set spline state to 19.9068
2026-01-21 13:56:02,518 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:02,624 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.097, 7.073), path_start=(0.000, 0.000), dist=19.430m
2026-01-21 13:56:02,624 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.430m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:02,624 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-21 13:56:02,723 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:02,747 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:02,747 - INFO - integration_test - Warmstart k=0: x0=18.09720715489514 , y0=7.073241479230602 , psi0=0.0884230503332591 , v0=3.000000029869224 , spline0=19.906753666554078 , a0=0.0 , w0=0.0
2026-01-21 13:56:02,747 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:02,748 - INFO - integration_test - Dyn residual k=0: pred=[18.396035126435063, 7.099733840723844, 0.0884230503332591, 3.000000029869224, 20.206753669541], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.396035126435063, 7.099733840723844, 0.0884230503332591, 3.000000029869224, 20.206753669541], res_norm=2.839e+01
2026-01-21 13:56:02,749 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:02,750 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:02,767 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:02,933 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:02,954 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:02,999 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:03,021 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,067 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:03,089 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,135 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:03,156 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,200 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:03,223 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,267 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:03,288 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,333 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:03,354 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,397 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:03,417 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,461 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:03,482 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,524 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:03,543 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:03,586 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:04,689 - INFO - integration_test - Step 70: MPC solve successful
2026-01-21 13:56:05,057 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.907)
2026-01-21 13:56:05,058 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:05,058 - INFO - integration_test - === Applying control at step 70 ===
2026-01-21 13:56:05,058 - INFO - integration_test -   Control dict from planner: {'a': -2.898190140066003e-06, 'w': 0.022589535160499993}
2026-01-21 13:56:05,058 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:05,058 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:05,059 - INFO - integration_test - Step 70 completed in 2.546s
2026-01-21 13:56:05,127 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-21 13:56:05,132 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.39600494  7.10007134  0.090682    2.99999974 20.20675364]
2026-01-21 13:56:05,132 - DEBUG - integration_test - Step 71: Using propagated spline 20.2068 (close to path, dist=0.153m, drift=0.675m)
2026-01-21 13:56:05,133 - DEBUG - integration_test -   Set spline state to 20.2068
2026-01-21 13:56:05,136 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:05,241 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.396, 7.100), path_start=(0.000, 0.000), dist=19.719m
2026-01-21 13:56:05,241 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.719m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:05,241 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-21 13:56:05,336 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:05,363 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:05,363 - INFO - integration_test - Warmstart k=0: x0=18.39600493536213 , y0=7.10007133599624 , psi0=0.0906820038493091 , v0=2.99999974005021 , spline0=20.2067536405591 , a0=0.0 , w0=0.0
2026-01-21 13:56:05,363 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:05,364 - INFO - integration_test - Dyn residual k=0: pred=[18.694772270637014, 7.127238665194322, 0.0906820038493091, 2.99999974005021, 20.506753614564122], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.694772270637014, 7.127238665194322, 0.0906820038493091, 2.99999974005021, 20.506753614564122], res_norm=2.881e+01
2026-01-21 13:56:05,365 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:05,365 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:05,381 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:05,544 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:05,566 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:05,611 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:05,631 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:05,675 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:05,700 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:05,749 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:05,770 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:05,814 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:05,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:05,879 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:05,898 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:05,944 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:05,964 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:06,009 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:06,029 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:06,074 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:06,094 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:06,138 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:06,156 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:06,198 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:07,872 - INFO - integration_test - Step 71: MPC solve successful
2026-01-21 13:56:08,451 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=20.207)
2026-01-21 13:56:08,451 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:08,451 - INFO - integration_test - === Applying control at step 71 ===
2026-01-21 13:56:08,451 - INFO - integration_test -   Control dict from planner: {'a': 2.8993466353206704e-06, 'w': 0.039973091592964485}
2026-01-21 13:56:08,452 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:08,452 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:08,453 - INFO - integration_test - Step 71 completed in 3.321s
2026-01-21 13:56:08,524 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-21 13:56:08,527 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[18.69471719  7.12783573  0.09467931  3.00000003 20.50675364]
2026-01-21 13:56:08,528 - DEBUG - integration_test - Step 72: Using propagated spline 20.5068 (close to path, dist=0.255m, drift=0.486m)
2026-01-21 13:56:08,528 - DEBUG - integration_test -   Set spline state to 20.5068
2026-01-21 13:56:08,533 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:08,636 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(18.695, 7.128), path_start=(0.000, 0.000), dist=20.007m
2026-01-21 13:56:08,636 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=20.007m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:08,636 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-21 13:56:08,737 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:08,760 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:08,761 - INFO - integration_test - Warmstart k=0: x0=18.69471719139533 , y0=7.127835726104659 , psi0=0.09467931300860555 , v0=3.0000000299848733 , spline0=20.506753643557587 , a0=0.0 , w0=0.0
2026-01-21 13:56:08,761 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:08,762 - INFO - integration_test - Dyn residual k=0: pred=[18.99337357268835, 7.156197103223063, 0.09467931300860555, 3.0000000299848733, 20.806753646556075], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.99337357268835, 7.156197103223063, 0.09467931300860555, 3.0000000299848733, 20.806753646556075], res_norm=2.922e+01
2026-01-21 13:56:08,762 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:08,763 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:08,781 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:08,942 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:08,965 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,013 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:09,039 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,113 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:09,143 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,191 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:09,211 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,253 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:09,277 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,323 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:09,342 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,386 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:09,407 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,449 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:09,470 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,514 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:09,534 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,577 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:09,595 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:09,637 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:12,204 - INFO - integration_test - Step 72: MPC solve successful
2026-01-21 13:56:12,487 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.507)
2026-01-21 13:56:12,487 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:12,487 - INFO - integration_test - === Applying control at step 72 ===
2026-01-21 13:56:12,488 - INFO - integration_test -   Control dict from planner: {'a': -2.4448757174349065e-07, 'w': 0.014773186956999527}
2026-01-21 13:56:12,488 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:12,488 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:12,489 - INFO - integration_test - Step 72 completed in 3.962s
2026-01-21 13:56:12,563 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-21 13:56:12,571 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[18.99335251  7.1564177   0.09615663  3.00000001 20.80675364]
2026-01-21 13:56:12,571 - DEBUG - integration_test - Step 73: Using propagated spline 20.8068 (close to path, dist=0.144m, drift=0.786m)
2026-01-21 13:56:12,571 - DEBUG - integration_test -   Set spline state to 20.8068
2026-01-21 13:56:12,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:12,680 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(18.993, 7.156), path_start=(0.000, 0.000), dist=20.297m
2026-01-21 13:56:12,680 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.297m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:12,680 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-21 13:56:12,780 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:12,804 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:12,804 - INFO - integration_test - Warmstart k=0: x0=18.993352513444204 , y0=7.156417698077702 , psi0=0.0961566317043055 , v0=3.000000005536116 , spline0=20.8067536441112 , a0=0.0 , w0=0.0
2026-01-21 13:56:12,804 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:12,805 - INFO - integration_test - Dyn residual k=0: pred=[19.29196666762191, 7.185220254507633, 0.0961566317043055, 3.000000005536116, 21.106753644664813], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.29196666762191, 7.185220254507633, 0.0961566317043055, 3.000000005536116, 21.106753644664813], res_norm=2.964e+01
2026-01-21 13:56:12,805 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:12,806 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:12,823 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:12,984 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,005 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,047 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,070 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,115 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,134 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,181 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,201 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,251 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,272 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,318 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,337 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,383 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,402 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,446 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,467 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,513 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:13,532 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,577 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:13,596 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:13,641 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:14,926 - INFO - integration_test - Step 73: MPC solve successful
2026-01-21 13:56:15,234 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.807)
2026-01-21 13:56:15,234 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:15,234 - INFO - integration_test - === Applying control at step 73 ===
2026-01-21 13:56:15,234 - INFO - integration_test -   Control dict from planner: {'a': 2.4374298935167863e-07, 'w': 0.012302909086757017}
2026-01-21 13:56:15,234 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:15,234 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:15,235 - INFO - integration_test - Step 73 completed in 2.665s
2026-01-21 13:56:15,303 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-21 13:56:15,312 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.29194888  7.18540394  0.09738692  3.00000003 21.10675365]
2026-01-21 13:56:15,313 - DEBUG - integration_test - Step 74: Using propagated spline 21.1068 (close to path, dist=0.170m, drift=0.598m)
2026-01-21 13:56:15,313 - DEBUG - integration_test -   Set spline state to 21.1068
2026-01-21 13:56:15,318 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:15,422 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.292, 7.185), path_start=(0.000, 0.000), dist=20.587m
2026-01-21 13:56:15,423 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=20.587m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:15,423 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-21 13:56:15,519 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:15,542 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:15,542 - INFO - integration_test - Warmstart k=0: x0=19.2919488757443 , y0=7.185403938476009 , psi0=0.0973869226129812 , v0=3.000000029910415 , spline0=21.10675364710224 , a0=0.0 , w0=0.0
2026-01-21 13:56:15,542 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:15,543 - INFO - integration_test - Dyn residual k=0: pred=[19.590527370839993, 7.214573855531348, 0.0973869226129812, 3.000000029910415, 21.406753650093282], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.590527370839993, 7.214573855531348, 0.0973869226129812, 3.000000029910415, 21.406753650093282], res_norm=3.005e+01
2026-01-21 13:56:15,544 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:15,545 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:15,563 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:15,730 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:15,752 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:15,798 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:15,818 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:15,863 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:15,886 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:15,930 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:15,954 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:15,999 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:16,019 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:16,064 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:16,083 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:16,127 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:16,148 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:16,195 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:16,215 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:16,260 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:16,282 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:16,328 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:16,351 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:16,398 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:18,539 - INFO - integration_test - Step 74: MPC solve successful
2026-01-21 13:56:18,907 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=21.107)
2026-01-21 13:56:18,907 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:18,907 - INFO - integration_test - === Applying control at step 74 ===
2026-01-21 13:56:18,907 - INFO - integration_test -   Control dict from planner: {'a': -3.032835121087363e-06, 'w': 0.015955404935799323}
2026-01-21 13:56:18,907 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:18,907 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:18,909 - INFO - integration_test - Step 74 completed in 3.597s
2026-01-21 13:56:18,975 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-21 13:56:18,982 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[19.59050396  7.21481204  0.09898246  2.99999973 21.40675362]
2026-01-21 13:56:18,983 - DEBUG - integration_test - Step 75: Using propagated spline 21.4068 (close to path, dist=0.188m, drift=0.898m)
2026-01-21 13:56:18,983 - DEBUG - integration_test -   Set spline state to 21.4068
2026-01-21 13:56:18,988 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:19,092 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(19.591, 7.215), path_start=(0.000, 0.000), dist=20.877m
2026-01-21 13:56:19,092 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=20.877m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:19,092 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-21 13:56:19,187 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:19,211 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:19,211 - INFO - integration_test - Warmstart k=0: x0=19.590503958177933 , y0=7.2148120386534735 , psi0=0.09898246310656113 , v0=2.999999726626903 , spline0=21.40675361976493 , a0=0.0 , w0=0.0
2026-01-21 13:56:19,212 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:19,213 - INFO - integration_test - Dyn residual k=0: pred=[19.889035501276677, 7.244458309459402, 0.09898246310656113, 2.999999726626903, 21.70675359242762], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.889035501276677, 7.244458309459402, 0.09898246310656113, 2.999999726626903, 21.70675359242762], res_norm=3.047e+01
2026-01-21 13:56:19,213 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:19,214 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:19,230 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,391 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,412 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,456 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,476 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,520 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,539 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,584 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,606 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,647 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,670 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,720 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,741 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,787 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,809 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,854 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,875 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,923 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:19,942 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:19,986 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:20,005 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:20,048 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:21,620 - INFO - integration_test - Step 75: MPC solve successful
2026-01-21 13:56:22,218 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.407)
2026-01-21 13:56:22,218 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:22,218 - INFO - integration_test - === Applying control at step 75 ===
2026-01-21 13:56:22,218 - INFO - integration_test -   Control dict from planner: {'a': 2.3853467374767282e-06, 'w': 0.006585607964847504}
2026-01-21 13:56:22,218 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:22,218 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:22,220 - INFO - integration_test - Step 75 completed in 3.237s
2026-01-21 13:56:22,293 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-21 13:56:22,302 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[19.88902573  7.24455661  0.09964102  2.99999997 21.70675362]
2026-01-21 13:56:22,303 - DEBUG - integration_test - Step 76: Using propagated spline 21.7068 (close to path, dist=0.095m, drift=0.710m)
2026-01-21 13:56:22,303 - DEBUG - integration_test -   Set spline state to 21.7068
2026-01-21 13:56:22,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:22,414 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(19.889, 7.245), path_start=(0.000, 0.000), dist=21.167m
2026-01-21 13:56:22,414 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.167m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:22,414 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-21 13:56:22,507 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:22,535 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:22,535 - INFO - integration_test - Warmstart k=0: x0=19.88902572963004 , y0=7.244556609082127 , psi0=0.09964102390304588 , v0=2.9999999651615767 , spline0=21.706753616281087 , a0=0.0 , w0=0.0
2026-01-21 13:56:22,535 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:22,536 - INFO - integration_test - Dyn residual k=0: pred=[20.18753770785672, 7.274399476988669, 0.09964102390304588, 2.9999999651615767, 22.006753612797244], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.18753770785672, 7.274399476988669, 0.09964102390304588, 2.9999999651615767, 22.006753612797244], res_norm=3.088e+01
2026-01-21 13:56:22,537 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:22,537 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:22,553 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:22,718 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:22,739 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:22,787 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:22,808 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:22,851 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:22,873 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:22,917 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:22,936 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:22,984 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:23,004 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:23,049 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:23,070 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:23,114 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:23,133 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:23,180 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:23,199 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:23,244 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:23,266 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:23,308 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:23,327 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:23,371 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:40,138 - INFO - integration_test - Step 76: MPC solve successful
2026-01-21 13:56:40,462 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.707)
2026-01-21 13:56:40,462 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:40,462 - INFO - integration_test - === Applying control at step 76 ===
2026-01-21 13:56:40,462 - INFO - integration_test -   Control dict from planner: {'a': 6.477539873632688e-07, 'w': -0.02540258269742305}
2026-01-21 13:56:40,463 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:40,463 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:40,464 - INFO - integration_test - Step 76 completed in 18.162s
2026-01-21 13:56:40,531 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-21 13:56:40,540 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[20.18757529  7.2740203   0.09710077  3.00000003 22.00675362]
2026-01-21 13:56:40,541 - DEBUG - integration_test - Step 77: Using propagated spline 22.0068 (close to path, dist=0.257m, drift=1.010m)
2026-01-21 13:56:40,541 - DEBUG - integration_test -   Set spline state to 22.0068
2026-01-21 13:56:40,545 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:40,698 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(20.188, 7.274), path_start=(0.000, 0.000), dist=21.458m
2026-01-21 13:56:40,698 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=21.458m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:40,699 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-21 13:56:40,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:40,826 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:40,826 - INFO - integration_test - Warmstart k=0: x0=20.18757529431043 , y0=7.274020296653065 , psi0=0.09710076563330358 , v0=3.0000000299369756 , spline0=22.006753619274786 , a0=0.0 , w0=0.0
2026-01-21 13:56:40,826 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:40,827 - INFO - integration_test - Dyn residual k=0: pred=[20.486162124359346, 7.303104772195173, 0.09710076563330358, 3.0000000299369756, 22.306753622268484], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.486162124359346, 7.303104772195173, 0.09710076563330358, 3.0000000299369756, 22.306753622268484], res_norm=3.130e+01
2026-01-21 13:56:40,828 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:40,828 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:40,843 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,006 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,027 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,073 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,094 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,140 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,162 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,206 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,229 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,273 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,293 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,337 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,361 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,407 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,428 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,472 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,492 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,536 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:41,557 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,599 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:41,620 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:41,662 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:44,568 - WARNING - integration_test - Step 77: MPC solve failed
2026-01-21 13:56:44,568 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:56:44,952 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=22.007)
2026-01-21 13:56:44,953 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:44,953 - INFO - integration_test - === Applying control at step 77 ===
2026-01-21 13:56:44,953 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:56:44,953 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:44,953 - INFO - integration_test -   Planner output success: False
2026-01-21 13:56:44,953 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:56:44,954 - INFO - integration_test - Step 77 completed in 4.415s
2026-01-21 13:56:45,030 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-21 13:56:45,031 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[20.48616212  7.30310477  0.09710077  3.00000003 22.30675362]
2026-01-21 13:56:45,032 - DEBUG - integration_test - Step 78: Using propagated spline 22.3068 (close to path, dist=0.065m, drift=0.821m)
2026-01-21 13:56:45,032 - DEBUG - integration_test -   Set spline state to 22.3068
2026-01-21 13:56:45,036 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:45,142 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(20.486, 7.303), path_start=(0.000, 0.000), dist=21.749m
2026-01-21 13:56:45,142 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=21.749m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:45,142 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-21 13:56:45,238 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:45,264 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:45,264 - INFO - integration_test - Warmstart k=0: x0=20.486162124359346 , y0=7.303104772195173 , psi0=0.09710076563330358 , v0=3.0000000299369756 , spline0=22.306753622268484 , a0=0.0 , w0=0.0
2026-01-21 13:56:45,264 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:45,265 - INFO - integration_test - Dyn residual k=0: pred=[20.78474895440826, 7.332189247737281, 0.09710076563330358, 3.0000000299369756, 22.606753625262183], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.78474895440826, 7.332189247737281, 0.09710076563330358, 3.0000000299369756, 22.606753625262183], res_norm=3.172e+01
2026-01-21 13:56:45,266 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:45,267 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:45,282 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:45,448 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:45,471 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:45,517 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:45,537 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:45,583 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:45,603 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:45,649 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:45,669 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:45,716 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:45,759 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:45,834 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:45,857 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:45,902 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:45,922 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:45,967 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:45,987 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:46,033 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:46,053 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:46,096 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:46,115 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:46,159 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:49,702 - WARNING - integration_test - Step 78: MPC solve failed
2026-01-21 13:56:49,702 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 13:56:50,397 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=22.307)
2026-01-21 13:56:50,398 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:50,398 - INFO - integration_test - === Applying control at step 78 ===
2026-01-21 13:56:50,398 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:56:50,398 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:50,398 - INFO - integration_test -   Planner output success: False
2026-01-21 13:56:50,398 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:56:50,400 - INFO - integration_test - Step 78 completed in 5.369s
2026-01-21 13:56:50,477 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-21 13:56:50,478 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[20.78474895  7.33218925  0.09710077  3.00000003 22.60675363]
2026-01-21 13:56:50,479 - DEBUG - integration_test - Step 79: Using propagated spline 22.6068 (close to path, dist=0.194m, drift=0.633m)
2026-01-21 13:56:50,479 - DEBUG - integration_test -   Set spline state to 22.6068
2026-01-21 13:56:50,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:50,591 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(20.785, 7.332), path_start=(0.000, 0.000), dist=22.040m
2026-01-21 13:56:50,591 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=22.040m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:50,591 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-21 13:56:50,685 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:50,708 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:50,709 - INFO - integration_test - Warmstart k=0: x0=20.78474895440826 , y0=7.332189247737281 , psi0=0.09710076563330358 , v0=3.0000000299369756 , spline0=22.606753625262183 , a0=0.0 , w0=0.0
2026-01-21 13:56:50,709 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:50,710 - INFO - integration_test - Dyn residual k=0: pred=[21.083335784457176, 7.361273723279389, 0.09710076563330358, 3.0000000299369756, 22.90675362825588], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.083335784457176, 7.361273723279389, 0.09710076563330358, 3.0000000299369756, 22.90675362825588], res_norm=3.213e+01
2026-01-21 13:56:50,710 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:50,711 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:50,727 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:50,895 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:50,918 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:50,963 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:50,983 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,028 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:51,048 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,094 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:51,113 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,160 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:51,188 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,260 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:51,288 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,333 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:51,353 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,398 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:51,419 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,462 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:51,485 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,529 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:51,549 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:51,593 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:54,603 - INFO - integration_test - Step 79: MPC solve successful
2026-01-21 13:56:55,000 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.607)
2026-01-21 13:56:55,000 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:55,000 - INFO - integration_test - === Applying control at step 79 ===
2026-01-21 13:56:55,000 - INFO - integration_test -   Control dict from planner: {'a': -0.3881598562473961, 'w': 0.2451890404906155}
2026-01-21 13:56:55,000 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:55,000 - INFO - integration_test -   Planner output success: True
2026-01-21 13:56:55,001 - INFO - integration_test - Step 79 completed in 4.523s
2026-01-21 13:56:55,073 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-21 13:56:55,081 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[21.08102104  7.36471144  0.12161967  2.96118404 22.90287203]
2026-01-21 13:56:55,082 - DEBUG - integration_test - Step 80: Using propagated spline 22.9029 (close to path, dist=0.118m, drift=0.929m)
2026-01-21 13:56:55,082 - DEBUG - integration_test -   Set spline state to 22.9029
2026-01-21 13:56:55,088 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:55,193 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(21.081, 7.365), path_start=(0.000, 0.000), dist=22.330m
2026-01-21 13:56:55,193 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=22.330m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:55,193 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-21 13:56:55,292 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:55,315 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:55,315 - INFO - integration_test - Warmstart k=0: x0=21.08102103500447 , y0=7.364711435174963 , psi0=0.12161966968236512 , v0=2.961184044312236 , spline0=22.902872029693405 , a0=0.0 , w0=0.0
2026-01-21 13:56:55,315 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:55,316 - INFO - integration_test - Dyn residual k=0: pred=[21.374952142918467, 7.400636541206033, 0.12161966968236512, 2.961184044312236, 23.198990434124628], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.374952142918467, 7.400636541206033, 0.12161966968236512, 2.961184044312236, 23.198990434124628], res_norm=3.254e+01
2026-01-21 13:56:55,317 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:55,318 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:55,333 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:55,500 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:55,520 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:55,564 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:55,587 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:55,629 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:55,651 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:55,696 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:55,717 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:55,762 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:55,786 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:55,831 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:55,852 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:55,897 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:55,916 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:55,961 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:55,983 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:56,028 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:56:56,048 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:56,091 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:56,110 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:56:56,151 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:56:59,107 - WARNING - integration_test - Step 80: MPC solve failed
2026-01-21 13:56:59,107 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 13:56:59,507 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.903)
2026-01-21 13:56:59,508 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:56:59,508 - INFO - integration_test - === Applying control at step 80 ===
2026-01-21 13:56:59,508 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:56:59,508 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:56:59,508 - INFO - integration_test -   Planner output success: False
2026-01-21 13:56:59,508 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:56:59,509 - INFO - integration_test - Step 80 completed in 4.428s
2026-01-21 13:56:59,580 - INFO - integration_test - Step 81 (contouring until path end)
2026-01-21 13:56:59,590 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[21.37495214  7.40063654  0.12161967  2.96118404 23.19899043]
2026-01-21 13:56:59,590 - DEBUG - integration_test - Step 81: Using propagated spline 23.1990 (close to path, dist=0.119m, drift=0.737m)
2026-01-21 13:56:59,590 - DEBUG - integration_test -   Set spline state to 23.1990
2026-01-21 13:56:59,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:59,699 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(21.375, 7.401), path_start=(0.000, 0.000), dist=22.620m
2026-01-21 13:56:59,699 - WARNING - integration_test - Step 81: Vehicle is far from path start (dist=22.620m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 13:56:59,699 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2026-01-21 13:56:59,801 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 13:56:59,827 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 13:56:59,827 - INFO - integration_test - Warmstart k=0: x0=21.374952142918467 , y0=7.400636541206033 , psi0=0.12161966968236512 , v0=2.961184044312236 , spline0=23.198990434124628 , a0=0.0 , w0=0.0
2026-01-21 13:56:59,827 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 13:56:59,828 - INFO - integration_test - Dyn residual k=0: pred=[21.668883250832465, 7.436561647237103, 0.12161966968236512, 2.961184044312236, 23.49510883855585], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.668883250832465, 7.436561647237103, 0.12161966968236512, 2.961184044312236, 23.49510883855585], res_norm=3.295e+01
2026-01-21 13:56:59,828 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:59,829 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 13:56:59,844 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,007 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,028 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,077 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,097 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,142 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,165 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,208 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,230 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,275 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,296 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,342 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,366 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,410 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,430 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,477 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,496 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,541 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 13:57:00,562 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,603 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:57:00,622 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 13:57:00,665 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 13:57:04,078 - WARNING - integration_test - Step 81: MPC solve failed
2026-01-21 13:57:04,078 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 13:57:04,820 - INFO - integration_test - Step 81: Computed 6 numeric contouring constraints for visualization (s=23.199)
2026-01-21 13:57:04,820 - DEBUG - integration_test - Step 81: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 13:57:04,820 - INFO - integration_test - === Applying control at step 81 ===
2026-01-21 13:57:04,820 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 13:57:04,820 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 13:57:04,820 - INFO - integration_test -   Planner output success: False
2026-01-21 13:57:04,820 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 13:57:04,822 - INFO - integration_test - Goal reached at step 81!
2026-01-21 13:57:04,822 - INFO - integration_test - Step 81 completed in 5.232s
2026-01-21 13:57:04,900 - INFO - integration_test - Goal reached at step 81, added 3 extra frames for visualization
2026-01-21 13:57:04,907 - INFO - integration_test - Saving test results...
2026-01-21 13:57:04,909 - INFO - integration_test - Saved 86 vehicle states to test_outputs/20260121_135222_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-21 13:57:04,910 - INFO - integration_test - Saved obstacle summary to test_outputs/20260121_135222_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-21 13:57:04,910 - INFO - integration_test - Saved 93 states for obstacle 0 to test_outputs/20260121_135222_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-21 13:57:04,910 - INFO - integration_test - Saved 93 states for obstacle 1 to test_outputs/20260121_135222_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-21 13:57:04,911 - INFO - integration_test - Saved 93 states for obstacle 2 to test_outputs/20260121_135222_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-21 13:57:04,911 - INFO - integration_test - Saved 93 states for obstacle 3 to test_outputs/20260121_135222_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-21 13:57:04,911 - INFO - integration_test - Saved state history: 86 vehicle states, 4 obstacles
2026-01-21 13:57:04,911 - INFO - integration_test - Creating animation...
2026-01-21 13:57:04,959 - DEBUG - integration_test - Creating animation with 86 frames (range: 0 to 85)
2026-01-21 13:57:04,960 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 13:57:05,110 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 13:57:05,110 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 13:57:05,110 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 13:57:05,167 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 13:57:05,168 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 13:57:05,277 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 13:57:05,277 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 13:57:05,278 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 13:57:05,318 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 13:57:05,422 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-21 13:57:05,530 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-21 13:57:05,530 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-21 13:57:05,530 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 13:57:05,573 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-21 13:57:05,633 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-21 13:57:05,733 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-21 13:57:05,733 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-21 13:57:05,733 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 13:57:06,104 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-21 13:57:33,246 - INFO - integration_test - Saved animation with 86 frames at 10.00 fps to test_outputs/20260121_135222_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 8.60s, size: 1369113 bytes)
2026-01-21 13:57:33,286 - INFO - integration_test - Animation created successfully
2026-01-21 13:57:33,287 - INFO - integration_test - Test completed successfully
