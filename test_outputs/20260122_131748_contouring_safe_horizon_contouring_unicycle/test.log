2026-01-22 13:17:48,478 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-22 13:17:48,478 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-22 13:17:48,478 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-22 13:17:48,478 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-22 13:17:48,478 - INFO - integration_test - Creating objective module: contouring
2026-01-22 13:17:48,484 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-22 13:17:48,484 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-22 13:17:48,484 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-22 13:17:48,492 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-22 13:17:48,492 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-22 13:17:48,498 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-22 13:17:48,498 - INFO - integration_test - Created 2 constraint module(s)
2026-01-22 13:17:48,514 - INFO - integration_test - Setting solver on all modules...
2026-01-22 13:17:48,514 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-22 13:17:48,514 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-22 13:17:48,514 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-22 13:17:48,514 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-22 13:17:48,514 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-22 13:17:48,514 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-22 13:17:48,515 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-22 13:17:48,515 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-22 13:17:48,515 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-22 13:17:48,515 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-22 13:17:48,516 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-22 13:17:48,516 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-22 13:17:48,516 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-22 13:17:48,516 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-22 13:17:48,516 - INFO - integration_test - Added spline variable: 0.0000
2026-01-22 13:17:48,516 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-22 13:17:48,516 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-22 13:17:48,516 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-22 13:17:48,517 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-22 13:17:48,517 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-22 13:17:48,520 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:48,660 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-22 13:17:48,660 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-22 13:17:48,743 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:48,767 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:17:48,767 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-22 13:17:48,767 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:17:48,768 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-22 13:17:48,769 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:48,770 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:48,784 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:48,930 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:48,949 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:48,998 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:49,025 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,085 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:49,110 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,173 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:49,204 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,258 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:49,282 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,328 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:49,351 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,399 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:49,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,469 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:49,490 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,539 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:49,564 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,614 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:49,637 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:49,682 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:50,554 - INFO - integration_test - Step 0: MPC solve successful
2026-01-22 13:17:50,832 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-22 13:17:50,832 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:17:50,832 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-22 13:17:50,832 - INFO - integration_test - === Applying control at step 0 ===
2026-01-22 13:17:50,832 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019657321, 'w': 0.799999998097919}
2026-01-22 13:17:50,832 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:17:50,832 - INFO - integration_test -   Planner output success: True
2026-01-22 13:17:50,833 - INFO - integration_test - Step 0 completed in 2.317s
2026-01-22 13:17:50,888 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-22 13:17:50,889 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-22 13:17:50,889 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-22 13:17:50,889 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-22 13:17:50,892 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:50,980 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-22 13:17:50,980 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-22 13:17:51,059 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:51,080 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:17:51,080 - INFO - integration_test - Warmstart k=0: x0=0.10987737537990311 , y0=0.004530845047547705 , psi0=0.07999999980979189 , v0=1.2000000019657322 , spline0=0.12000000019657323 , a0=0.0 , w0=0.0
2026-01-22 13:17:51,080 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:17:51,081 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033398604, 0.014120608316805543, 0.07999999980979189, 1.2000000019657322, 0.24000000039314645], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033398604, 0.014120608316805543, 0.07999999980979189, 1.2000000019657322, 0.24000000039314645], res_norm=1.248e+00
2026-01-22 13:17:51,082 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:51,083 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:51,096 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,222 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,240 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,280 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,298 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,338 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,357 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,399 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,417 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,459 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,478 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,518 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,536 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,578 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,596 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,639 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,658 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,704 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:51,723 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,768 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:51,787 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:51,834 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:52,398 - INFO - integration_test - Step 1: MPC solve successful
2026-01-22 13:17:52,510 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-22 13:17:52,511 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:17:52,511 - INFO - integration_test - === Applying control at step 1 ===
2026-01-22 13:17:52,511 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018377249, 'w': 0.7999999363968169}
2026-01-22 13:17:52,511 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:17:52,511 - INFO - integration_test -   Planner output success: True
2026-01-22 13:17:52,512 - INFO - integration_test - Step 1 completed in 1.624s
2026-01-22 13:17:52,575 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-22 13:17:52,575 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-22 13:17:52,576 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-22 13:17:52,576 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-22 13:17:52,579 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:52,675 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-22 13:17:52,675 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-22 13:17:52,761 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:52,787 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:17:52,787 - INFO - integration_test - Warmstart k=0: x0=0.23889212823784012 , y0=0.020221621304025567 , psi0=0.15999999344947358 , v0=1.400000003803457 , spline0=0.26000000057691897 , a0=0.0 , w0=0.0
2026-01-22 13:17:52,788 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:17:52,789 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394843202205, 0.042526169385255816, 0.15999999344947358, 1.400000003803457, 0.4000000009572647], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394843202205, 0.042526169385255816, 0.15999999344947358, 1.400000003803457, 0.4000000009572647], res_norm=1.513e+00
2026-01-22 13:17:52,790 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:52,790 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:52,807 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:52,955 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:52,974 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,015 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:53,033 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,073 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:53,091 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,130 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:53,148 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,189 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:53,207 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,246 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:53,264 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,303 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:53,321 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,361 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:53,380 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,420 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:53,439 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,478 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:53,495 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:53,534 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:54,093 - INFO - integration_test - Step 2: MPC solve successful
2026-01-22 13:17:54,144 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-22 13:17:54,144 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:17:54,144 - INFO - integration_test - === Applying control at step 2 ===
2026-01-22 13:17:54,144 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199204018, 'w': 0.8000000051098991}
2026-01-22 13:17:54,144 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:17:54,144 - INFO - integration_test -   Planner output success: True
2026-01-22 13:17:54,146 - INFO - integration_test - Step 2 completed in 1.570s
2026-01-22 13:17:54,199 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-22 13:17:54,200 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999999 1.60000001 0.42      ]
2026-01-22 13:17:54,201 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-22 13:17:54,201 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-22 13:17:54,204 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:54,348 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-22 13:17:54,348 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-22 13:17:54,431 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:54,454 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:17:54,455 - INFO - integration_test - Warmstart k=0: x0=0.38583643595447165 , y0=0.0501447150815945 , psi0=0.2399999939604635 , v0=1.600000005795497 , spline0=0.4200000011564687 , a0=0.0 , w0=0.0
2026-01-22 13:17:54,455 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:17:54,456 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505127234333, 0.08817713450906753, 0.2399999939604635, 1.600000005795497, 0.5800000017360184], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505127234333, 0.08817713450906753, 0.2399999939604635, 1.600000005795497, 0.5800000017360184], res_norm=1.804e+00
2026-01-22 13:17:54,456 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:54,457 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:54,471 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:54,606 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:54,626 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:54,669 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:54,689 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:54,730 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:54,749 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:54,792 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:54,812 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:54,857 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:54,877 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:54,919 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:54,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:54,983 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:55,003 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:55,047 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:55,066 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:55,115 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:55,135 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:55,179 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:55,198 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:55,241 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:55,850 - INFO - integration_test - Step 3: MPC solve successful
2026-01-22 13:17:55,918 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-22 13:17:55,918 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:17:55,918 - INFO - integration_test - === Applying control at step 3 ===
2026-01-22 13:17:55,918 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999559, 'w': 0.8000000099631144}
2026-01-22 13:17:55,918 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:17:55,918 - INFO - integration_test -   Planner output success: True
2026-01-22 13:17:55,919 - INFO - integration_test - Step 3 completed in 1.719s
2026-01-22 13:17:55,976 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-22 13:17:55,977 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-22 13:17:55,978 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-22 13:17:55,978 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-22 13:17:55,981 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:56,076 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-22 13:17:56,076 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-22 13:17:56,171 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:56,199 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:17:56,199 - INFO - integration_test - Warmstart k=0: x0=0.5491354617468603 , y0=0.09724075472747612 , psi0=0.31999999495677495 , v0=1.800000007795453 , spline0=0.600000001936014 , a0=0.0 , w0=0.0
2026-01-22 13:17:56,199 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:17:56,200 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978380272292, 0.1538627350218988, 0.31999999495677495, 1.800000007795453, 0.7800000027155594], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978380272292, 0.1538627350218988, 0.31999999495677495, 1.800000007795453, 0.7800000027155594], res_norm=2.120e+00
2026-01-22 13:17:56,201 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:56,202 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:56,219 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,363 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,385 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,428 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,448 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,493 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,515 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,558 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,578 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,620 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,640 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,684 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,706 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,750 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,772 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,815 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,836 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,880 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:56,901 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:56,944 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:56,964 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:57,008 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:57,566 - INFO - integration_test - Step 4: MPC solve successful
2026-01-22 13:17:57,687 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-22 13:17:57,687 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:17:57,687 - INFO - integration_test - === Applying control at step 4 ===
2026-01-22 13:17:57,687 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199956967, 'w': 0.8000000094193637}
2026-01-22 13:17:57,687 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:17:57,687 - INFO - integration_test -   Planner output success: True
2026-01-22 13:17:57,689 - INFO - integration_test - Step 4 completed in 1.712s
2026-01-22 13:17:57,743 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-22 13:17:57,744 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-22 13:17:57,744 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-22 13:17:57,744 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-22 13:17:57,747 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:57,841 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-22 13:17:57,841 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-22 13:17:57,926 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:57,948 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:17:57,948 - INFO - integration_test - Warmstart k=0: x0=0.7268614895492733 , y0=0.16427976533719646 , psi0=0.3999999958987113 , v0=2.0000000097950226 , spline0=0.8000000029155163 , a0=0.0 , w0=0.0
2026-01-22 13:17:57,948 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:17:57,949 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736895714551, 0.2421634334248553, 0.3999999958987113, 2.0000000097950226, 1.0000000038950185], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736895714551, 0.2421634334248553, 0.3999999958987113, 2.0000000097950226, 1.0000000038950185], res_norm=2.459e+00
2026-01-22 13:17:57,950 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:57,950 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:57,965 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,109 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,130 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,176 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,197 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,241 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,261 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,305 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,326 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,372 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,393 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,438 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,457 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,501 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,521 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,565 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,586 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,629 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:17:58,649 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,692 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:58,711 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:17:58,757 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:17:59,403 - INFO - integration_test - Step 5: MPC solve successful
2026-01-22 13:17:59,504 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-22 13:17:59,504 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:17:59,504 - INFO - integration_test - === Applying control at step 5 ===
2026-01-22 13:17:59,504 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019309306, 'w': 0.7999997708852415}
2026-01-22 13:17:59,504 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:17:59,505 - INFO - integration_test -   Planner output success: True
2026-01-22 13:17:59,506 - INFO - integration_test - Step 5 completed in 1.762s
2026-01-22 13:17:59,567 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-22 13:17:59,568 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.2538238  0.47999997 2.20000001 1.02      ]
2026-01-22 13:17:59,568 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-22 13:17:59,568 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-22 13:17:59,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:59,675 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-22 13:17:59,675 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-22 13:17:59,833 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:17:59,856 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:17:59,856 - INFO - integration_test - Warmstart k=0: x0=0.9167519051131245 , y0=0.2538238024442938 , psi0=0.4799999729872355 , v0=2.2000000117259533 , spline0=1.0200000040881116 , a0=0.0 , w0=0.0
2026-01-22 13:17:59,856 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:17:59,857 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907919089183, 0.3554152163336594, 0.4799999729872355, 2.2000000117259533, 1.240000005260707], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907919089183, 0.3554152163336594, 0.4799999729872355, 2.2000000117259533, 1.240000005260707], res_norm=2.823e+00
2026-01-22 13:17:59,858 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:59,858 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:17:59,873 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,012 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,034 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,081 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,102 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,147 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,166 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,210 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,230 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,272 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,291 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,336 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,358 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,415 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,438 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,484 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,505 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,548 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:00,568 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,611 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:00,630 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:00,673 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:01,301 - INFO - integration_test - Step 6: MPC solve successful
2026-01-22 13:18:01,359 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-22 13:18:01,360 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:01,360 - INFO - integration_test - === Applying control at step 6 ===
2026-01-22 13:18:01,360 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000191352876, 'w': 0.7999982257999768}
2026-01-22 13:18:01,360 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:01,360 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:01,361 - INFO - integration_test - Step 6 completed in 1.794s
2026-01-22 13:18:01,418 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-22 13:18:01,418 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.36819142 0.5599998  2.40000001 1.26000001]
2026-01-22 13:18:01,419 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-22 13:18:01,419 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-22 13:18:01,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:01,516 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-22 13:18:01,516 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-22 13:18:01,603 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:01,626 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:01,626 - INFO - integration_test - Warmstart k=0: x0=1.1162308789902813 , y0=0.36819141869261135 , psi0=0.5599997955672332 , v0=2.400000013639482 , spline0=1.26000000545206 , a0=0.0 , w0=0.0
2026-01-22 13:18:01,626 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:01,627 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721328511565, 0.4956760653485214, 0.5599997955672332, 2.400000013639482, 1.5000000068160082], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721328511565, 0.4956760653485214, 0.5599997955672332, 2.400000013639482, 1.5000000068160082], res_norm=3.211e+00
2026-01-22 13:18:01,627 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:01,628 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:01,642 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:01,782 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:01,803 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:01,845 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:01,865 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:01,912 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:01,933 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:01,977 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:01,998 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:02,042 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:02,060 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:02,101 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:02,120 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:02,163 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:02,184 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:02,228 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:02,249 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:02,291 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:02,311 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:02,355 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:02,375 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:02,418 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:03,116 - INFO - integration_test - Step 7: MPC solve successful
2026-01-22 13:18:03,247 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-22 13:18:03,248 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:03,248 - INFO - integration_test - === Applying control at step 7 ===
2026-01-22 13:18:03,248 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000195995016, 'w': -0.181920178333949}
2026-01-22 13:18:03,248 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:03,248 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:03,249 - INFO - integration_test - Step 7 completed in 1.831s
2026-01-22 13:18:03,301 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-22 13:18:03,301 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32925676 0.49902816 0.54180778 2.60000002 1.52000001]
2026-01-22 13:18:03,302 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-22 13:18:03,302 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-22 13:18:03,305 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:03,404 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-22 13:18:03,404 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-22 13:18:03,494 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:03,516 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:03,516 - INFO - integration_test - Warmstart k=0: x0=1.32925675797948 , y0=0.49902815993718735 , psi0=0.5418077777338384 , v0=2.600000015599432 , spline0=1.5200000070120032 , a0=0.0 , w0=0.0
2026-01-22 13:18:03,516 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:03,517 - INFO - integration_test - Dyn residual k=0: pred=[1.552018996871191, 0.6331064420529824, 0.5418077777338384, 2.600000015599432, 1.7800000085719465], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.552018996871191, 0.6331064420529824, 0.5418077777338384, 2.600000015599432, 1.7800000085719465], res_norm=3.610e+00
2026-01-22 13:18:03,518 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:03,519 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:03,533 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:03,668 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:03,690 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:03,731 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:03,751 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:03,794 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:03,814 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:03,858 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:03,878 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:03,920 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:03,941 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:03,986 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:04,006 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:04,048 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:04,067 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:04,109 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:04,129 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:04,174 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:04,195 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:04,240 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:04,258 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:04,299 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:04,857 - INFO - integration_test - Step 8: MPC solve successful
2026-01-22 13:18:04,923 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-22 13:18:04,923 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:04,923 - INFO - integration_test - === Applying control at step 8 ===
2026-01-22 13:18:04,923 - INFO - integration_test -   Control dict from planner: {'a': 2.000000000052506, 'w': -0.02805059393364012}
2026-01-22 13:18:04,923 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:04,923 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:04,924 - INFO - integration_test - Step 8 completed in 1.623s
2026-01-22 13:18:04,981 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-22 13:18:04,982 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56078416 0.63793466 0.53900272 2.80000002 1.80000001]
2026-01-22 13:18:04,982 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-22 13:18:04,982 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-22 13:18:04,985 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:05,082 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-22 13:18:05,082 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-22 13:18:05,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:05,274 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:05,274 - INFO - integration_test - Warmstart k=0: x0=1.5607841584244857 , y0=0.6379346605312368 , psi0=0.5390027183404743 , v0=2.8000000156046827 , spline0=1.8000000085724714 , a0=0.0 , w0=0.0
2026-01-22 13:18:05,275 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:05,275 - INFO - integration_test - Dyn residual k=0: pred=[1.8010860378451186, 0.7816531618481302, 0.5390027183404743, 2.8000000156046827, 2.08000001013294], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.8010860378451186, 0.7816531618481302, 0.5390027183404743, 2.8000000156046827, 2.08000001013294], res_norm=4.039e+00
2026-01-22 13:18:05,276 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:05,277 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:05,293 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,447 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:05,468 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,510 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:05,530 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,574 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:05,594 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,638 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:05,658 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,703 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:05,727 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,779 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:05,801 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,848 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:05,869 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,917 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:05,939 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:05,992 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:06,018 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:06,063 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:06,083 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:06,128 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:06,871 - INFO - integration_test - Step 9: MPC solve successful
2026-01-22 13:18:06,943 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-22 13:18:06,944 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:06,944 - INFO - integration_test - === Applying control at step 9 ===
2026-01-22 13:18:06,944 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199988586, 'w': -0.0809198715893812}
2026-01-22 13:18:06,944 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:06,944 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:06,945 - INFO - integration_test - Step 9 completed in 1.964s
2026-01-22 13:18:07,025 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-22 13:18:07,027 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81027466 0.78576576 0.53091073 3.00000002 2.10000001]
2026-01-22 13:18:07,027 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-22 13:18:07,027 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-22 13:18:07,031 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:07,175 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-22 13:18:07,175 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-22 13:18:07,290 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:07,317 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:07,317 - INFO - integration_test - Warmstart k=0: x0=1.8102746553683462 , y0=0.7857657606876218 , psi0=0.5309107311815362 , v0=3.0000000176045685 , spline0=2.1000000103329284 , a0=0.0 , w0=0.0
2026-01-22 13:18:07,317 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:07,318 - INFO - integration_test - Dyn residual k=0: pred=[2.0689785492209802, 0.9376614366029001, 0.5309107311815362, 3.0000000176045685, 2.4000000120933853], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.0689785492209802, 0.9376614366029001, 0.5309107311815362, 3.0000000176045685, 2.4000000120933853], res_norm=4.495e+00
2026-01-22 13:18:07,319 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:07,320 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:07,336 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:07,497 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:07,519 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:07,567 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:07,591 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:07,641 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:07,662 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:07,715 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:07,740 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:07,794 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:07,817 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:07,870 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:07,895 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:07,943 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:07,965 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:08,011 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:08,032 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:08,080 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:08,104 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:08,159 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:08,185 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:08,238 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:08,783 - INFO - integration_test - Step 10: MPC solve successful
2026-01-22 13:18:08,934 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-22 13:18:08,935 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:08,935 - INFO - integration_test - === Applying control at step 10 ===
2026-01-22 13:18:08,935 - INFO - integration_test -   Control dict from planner: {'a': -8.623830428997222e-05, 'w': 0.007125614993961499}
2026-01-22 13:18:08,935 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:08,935 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:08,936 - INFO - integration_test - Step 10 completed in 1.910s
2026-01-22 13:18:08,993 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-22 13:18:08,994 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06892404 0.93775338 0.53162329 2.99999139 2.39999915]
2026-01-22 13:18:08,994 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.163m, drift=0.447m)
2026-01-22 13:18:08,994 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-22 13:18:08,997 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:09,096 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.938), path_start=(0.000, 0.000), dist=2.272m
2026-01-22 13:18:09,096 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-22 13:18:09,188 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:09,213 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:09,213 - INFO - integration_test - Warmstart k=0: x0=2.0689240380927676 , y0=0.9377533764652013 , psi0=0.5316232926809323 , v0=2.9999913937741396 , spline0=2.399999149710342 , a0=0.0 , w0=0.0
2026-01-22 13:18:09,213 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:09,214 - INFO - integration_test - Dyn residual k=0: pred=[2.32751888790481, 1.0898329190666842, 0.5316232926809323, 2.9999913937741396, 2.6999982890877563], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.32751888790481, 1.0898329190666842, 0.5316232926809323, 2.9999913937741396, 2.6999982890877563], res_norm=4.814e+00
2026-01-22 13:18:09,215 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:09,215 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:09,231 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,377 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,398 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,443 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,465 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,510 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,531 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,576 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,597 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,641 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,662 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,706 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,726 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,779 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,803 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,855 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,879 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:09,932 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:09,959 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:10,004 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:10,024 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:10,069 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:10,730 - INFO - integration_test - Step 11: MPC solve successful
2026-01-22 13:18:10,802 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-22 13:18:10,802 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:10,802 - INFO - integration_test - === Applying control at step 11 ===
2026-01-22 13:18:10,802 - INFO - integration_test -   Control dict from planner: {'a': 8.636225303396933e-05, 'w': -0.09371245330350222}
2026-01-22 13:18:10,802 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:10,802 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:10,803 - INFO - integration_test - Step 11 completed in 1.810s
2026-01-22 13:18:10,860 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-22 13:18:10,861 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32822806 1.08861924 0.52225205 3.00000003 2.69999915]
2026-01-22 13:18:10,862 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.249m, drift=0.258m)
2026-01-22 13:18:10,862 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-22 13:18:10,867 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:10,965 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.328, 1.089), path_start=(0.000, 0.000), dist=2.570m
2026-01-22 13:18:10,965 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-22 13:18:11,055 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:11,078 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:11,078 - INFO - integration_test - Warmstart k=0: x0=2.3282280586563306 , y0=1.0886192406806126 , psi0=0.5222520473505821 , v0=3.000000029999443 , spline0=2.6999991527102862 , a0=0.0 , w0=0.0
2026-01-22 13:18:11,078 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:11,079 - INFO - integration_test - Dyn residual k=0: pred=[2.588237455964288, 1.2382692159947417, 0.5222520473505821, 3.000000029999443, 2.9999991557102303], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.588237455964288, 1.2382692159947417, 0.5222520473505821, 3.000000029999443, 2.9999991557102303], res_norm=5.148e+00
2026-01-22 13:18:11,080 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:11,080 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:11,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,317 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,336 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,377 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,397 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,442 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,462 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,508 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,528 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,571 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,592 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,638 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,660 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,708 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,728 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,772 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,793 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,846 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:11,871 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,915 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:11,935 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:11,978 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:12,520 - INFO - integration_test - Step 12: MPC solve successful
2026-01-22 13:18:12,592 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-22 13:18:12,593 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:12,593 - INFO - integration_test - === Applying control at step 12 ===
2026-01-22 13:18:12,593 - INFO - integration_test -   Control dict from planner: {'a': -3.5628787321281346e-08, 'w': -0.09212527135114464}
2026-01-22 13:18:12,593 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:12,593 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:12,594 - INFO - integration_test - Step 12 completed in 1.733s
2026-01-22 13:18:12,654 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-22 13:18:12,655 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.5889231  1.23706944 0.51303952 3.00000003 2.99999916]
2026-01-22 13:18:12,656 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.170m, drift=0.558m)
2026-01-22 13:18:12,656 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-22 13:18:12,658 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:12,757 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.589, 1.237), path_start=(0.000, 0.000), dist=2.869m
2026-01-22 13:18:12,757 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-22 13:18:12,849 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:12,873 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:12,873 - INFO - integration_test - Warmstart k=0: x0=2.58892310031813 , y0=1.237069435757447 , psi0=0.5130395202154676 , v0=3.000000026436564 , spline0=2.999999155353943 , a0=0.0 , w0=0.0
2026-01-22 13:18:12,873 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:12,874 - INFO - integration_test - Dyn residual k=0: pred=[2.850300098766834, 1.3843177507499798, 0.5130395202154676, 3.000000026436564, 3.2999991579975996], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.850300098766834, 1.3843177507499798, 0.5130395202154676, 3.000000026436564, 3.2999991579975996], res_norm=5.495e+00
2026-01-22 13:18:12,875 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:12,875 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:12,890 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,031 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,052 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,095 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,116 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,157 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,176 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,218 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,238 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,281 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,302 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,347 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,366 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,409 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,428 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,473 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,492 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,534 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:13,554 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,594 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:13,612 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:13,655 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:14,237 - INFO - integration_test - Step 13: MPC solve successful
2026-01-22 13:18:14,419 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-22 13:18:14,420 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:14,420 - INFO - integration_test - === Applying control at step 13 ===
2026-01-22 13:18:14,420 - INFO - integration_test -   Control dict from planner: {'a': -2.6876462180122897e-08, 'w': -0.07407015578561241}
2026-01-22 13:18:14,420 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:14,420 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:14,421 - INFO - integration_test - Step 13 completed in 1.766s
2026-01-22 13:18:14,482 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-22 13:18:14,483 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85084304 1.3833484  0.5056325  3.00000002 3.29999916]
2026-01-22 13:18:14,483 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.144m, drift=0.370m)
2026-01-22 13:18:14,484 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-22 13:18:14,486 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:14,584 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.851, 1.383), path_start=(0.000, 0.000), dist=3.169m
2026-01-22 13:18:14,584 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-22 13:18:14,675 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:14,697 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:14,697 - INFO - integration_test - Warmstart k=0: x0=2.850843041418492 , y0=1.383348396928843 , psi0=0.5056325046369063 , v0=3.000000023748918 , spline0=3.2999991577288346 , a0=0.0 , w0=0.0
2026-01-22 13:18:14,697 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:14,698 - INFO - integration_test - Dyn residual k=0: pred=[3.1133035301767578, 1.5286566667062627, 0.5056325046369063, 3.000000023748918, 3.5999991601037262], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.1133035301767578, 1.5286566667062627, 0.5056325046369063, 3.000000023748918, 3.5999991601037262], res_norm=5.852e+00
2026-01-22 13:18:14,698 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:14,699 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:14,715 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:14,853 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:14,872 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:14,916 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:14,935 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:14,981 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:15,001 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:15,046 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:15,066 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:15,110 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:15,129 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:15,172 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:15,192 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:15,235 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:15,256 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:15,298 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:15,317 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:15,362 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:15,382 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:15,426 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:15,447 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:15,489 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:16,382 - INFO - integration_test - Step 14: MPC solve successful
2026-01-22 13:18:16,462 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-22 13:18:16,463 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:16,463 - INFO - integration_test - === Applying control at step 14 ===
2026-01-22 13:18:16,463 - INFO - integration_test -   Control dict from planner: {'a': 6.239256399381092e-08, 'w': -0.05052782145620159}
2026-01-22 13:18:16,463 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:16,463 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:16,464 - INFO - integration_test - Step 14 completed in 1.981s
2026-01-22 13:18:16,517 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-22 13:18:16,518 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11366952 1.52799297 0.50057972 3.00000003 3.59999916]
2026-01-22 13:18:16,519 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.253m, drift=0.182m)
2026-01-22 13:18:16,519 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-22 13:18:16,522 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:16,620 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.114, 1.528), path_start=(0.000, 0.000), dist=3.468m
2026-01-22 13:18:16,620 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-22 13:18:16,709 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:16,733 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:16,733 - INFO - integration_test - Warmstart k=0: x0=3.113669518390263 , y0=1.527992972130835 , psi0=0.5005797224912862 , v0=3.000000029988174 , spline0=3.599999160727652 , a0=0.0 , w0=0.0
2026-01-22 13:18:16,733 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:16,734 - INFO - integration_test - Dyn residual k=0: pred=[3.376860865222184, 1.6719732372788407, 0.5005797224912862, 3.000000029988174, 3.8999991637264695], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.376860865222184, 1.6719732372788407, 0.5005797224912862, 3.000000029988174, 3.8999991637264695], res_norm=6.218e+00
2026-01-22 13:18:16,735 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:16,736 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:16,751 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:16,889 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:16,909 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:16,951 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:16,971 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,013 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:17,032 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,076 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:17,095 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,138 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:17,157 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,199 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:17,219 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,268 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:17,288 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,333 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:17,353 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,397 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:17,417 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,463 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:17,482 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:17,523 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:18,070 - INFO - integration_test - Step 15: MPC solve successful
2026-01-22 13:18:18,290 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-22 13:18:18,291 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:18,291 - INFO - integration_test - === Applying control at step 15 ===
2026-01-22 13:18:18,291 - INFO - integration_test -   Control dict from planner: {'a': -4.184239132696859e-07, 'w': -0.054863030074307206}
2026-01-22 13:18:18,291 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:18,291 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:18,292 - INFO - integration_test - Step 15 completed in 1.774s
2026-01-22 13:18:18,356 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-22 13:18:18,357 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.3772545  1.67125054 0.49509342 2.99999999 3.89999916]
2026-01-22 13:18:18,358 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.145m, drift=0.482m)
2026-01-22 13:18:18,358 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-22 13:18:18,362 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:18,470 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.377, 1.671), path_start=(0.000, 0.000), dist=3.768m
2026-01-22 13:18:18,470 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-22 13:18:18,568 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:18,595 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:18,595 - INFO - integration_test - Warmstart k=0: x0=3.37725450175311 , y0=1.671250542065212 , psi0=0.49509341948385555 , v0=2.999999988145783 , spline0=3.8999991595422303 , a0=0.0 , w0=0.0
2026-01-22 13:18:18,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:18,596 - INFO - integration_test - Dyn residual k=0: pred=[3.641231799345457, 1.813784698128201, 0.49509341948385555, 2.999999988145783, 4.199999158356809], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.641231799345457, 1.813784698128201, 0.49509341948385555, 2.999999988145783, 4.199999158356809], res_norm=6.590e+00
2026-01-22 13:18:18,597 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:18,598 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:18,614 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:18,762 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:18,782 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:18,827 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:18,848 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:18,892 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:18,912 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:18,953 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:18,972 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:19,016 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:19,038 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:19,081 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:19,101 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:19,144 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:19,164 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:19,206 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:19,226 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:19,272 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:19,293 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:19,334 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:19,353 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:19,393 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:20,052 - INFO - integration_test - Step 16: MPC solve successful
2026-01-22 13:18:20,134 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-22 13:18:20,135 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:20,135 - INFO - integration_test - === Applying control at step 16 ===
2026-01-22 13:18:20,135 - INFO - integration_test -   Control dict from planner: {'a': 4.183107074832864e-07, 'w': -0.11519316351670952}
2026-01-22 13:18:20,135 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:20,135 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:20,136 - INFO - integration_test - Step 16 completed in 1.779s
2026-01-22 13:18:20,189 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-22 13:18:20,190 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.6420469  1.81226114 0.4835741  3.00000003 4.19999916]
2026-01-22 13:18:20,190 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.142m, drift=0.294m)
2026-01-22 13:18:20,190 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-22 13:18:20,193 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:20,396 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.642, 1.812), path_start=(0.000, 0.000), dist=4.068m
2026-01-22 13:18:20,396 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-22 13:18:20,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:20,511 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:20,511 - INFO - integration_test - Warmstart k=0: x0=3.642046902110698 , y0=1.812261144688466 , psi0=0.4835741031321846 , v0=3.0000000299768534 , spline0=4.199999162539916 , a0=0.0 , w0=0.0
2026-01-22 13:18:20,511 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:20,512 - INFO - integration_test - Dyn residual k=0: pred=[3.9076485491357746, 1.9517450752904446, 0.4835741031321846, 3.0000000299768534, 4.499999165537601], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9076485491357746, 1.9517450752904446, 0.4835741031321846, 3.0000000299768534, 4.499999165537601], res_norm=6.969e+00
2026-01-22 13:18:20,513 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:20,514 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:20,528 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:20,669 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:20,689 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:20,732 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:20,753 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:20,796 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:20,815 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:20,859 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:20,878 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:20,922 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:20,941 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:20,984 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:21,002 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:21,046 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:21,065 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:21,109 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:21,127 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:21,170 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:21,189 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:21,229 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:21,247 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:21,288 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:22,070 - INFO - integration_test - Step 17: MPC solve successful
2026-01-22 13:18:22,175 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-22 13:18:22,175 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:22,175 - INFO - integration_test - === Applying control at step 17 ===
2026-01-22 13:18:22,175 - INFO - integration_test -   Control dict from planner: {'a': -9.805207972878744e-08, 'w': 0.015277646673431117}
2026-01-22 13:18:22,175 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:22,175 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:22,176 - INFO - integration_test - Step 17 completed in 1.987s
2026-01-22 13:18:22,237 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-22 13:18:22,239 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.9075419  1.95194791 0.48510187 3.00000002 4.49999916]
2026-01-22 13:18:22,239 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-22 13:18:22,239 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-22 13:18:22,243 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:22,347 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.952), path_start=(0.000, 0.000), dist=4.368m
2026-01-22 13:18:22,347 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-22 13:18:22,441 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:22,465 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:22,465 - INFO - integration_test - Warmstart k=0: x0=3.907541896090367 , y0=1.951947909167801 , psi0=0.4851018677995277 , v0=3.0000000201716457 , spline0=4.499999164557081 , a0=0.0 , w0=0.0
2026-01-22 13:18:22,465 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:22,466 - INFO - integration_test - Dyn residual k=0: pred=[4.1729301337444324, 2.0918374531843855, 0.4851018677995277, 3.0000000201716457, 4.799999166574246], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.1729301337444324, 2.0918374531843855, 0.4851018677995277, 3.0000000201716457, 4.799999166574246], res_norm=7.353e+00
2026-01-22 13:18:22,467 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:22,468 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:22,483 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:22,624 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:22,648 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:22,693 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:22,712 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:22,756 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:22,775 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:22,817 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:22,837 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:22,880 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:22,899 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:22,941 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:22,961 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:23,003 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:23,023 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:23,068 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:23,089 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:23,132 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:23,152 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:23,192 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:23,211 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:23,256 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:23,829 - INFO - integration_test - Step 18: MPC solve successful
2026-01-22 13:18:24,018 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-22 13:18:24,018 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:24,018 - INFO - integration_test - === Applying control at step 18 ===
2026-01-22 13:18:24,018 - INFO - integration_test -   Control dict from planner: {'a': 9.6390247004635e-08, 'w': -0.08048499407524308}
2026-01-22 13:18:24,018 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:24,019 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:24,020 - INFO - integration_test - Step 18 completed in 1.781s
2026-01-22 13:18:24,071 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-22 13:18:24,073 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17349022 2.09076796 0.47705337 3.00000003 4.79999917]
2026-01-22 13:18:24,074 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.126m, drift=0.405m)
2026-01-22 13:18:24,074 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-22 13:18:24,076 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:24,171 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.173, 2.091), path_start=(0.000, 0.000), dist=4.668m
2026-01-22 13:18:24,171 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-22 13:18:24,258 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:24,280 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:24,280 - INFO - integration_test - Warmstart k=0: x0=4.17349021636377 , y0=2.090767960338221 , psi0=0.4770533683920034 , v0=3.0000000298106704 , spline0=4.7999991675381475 , a0=0.0 , w0=0.0
2026-01-22 13:18:24,280 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:24,281 - INFO - integration_test - Dyn residual k=0: pred=[4.439995747971925, 2.2285170199026862, 0.4770533683920034, 3.0000000298106704, 5.099999170519214], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.439995747971925, 2.2285170199026862, 0.4770533683920034, 3.0000000298106704, 5.099999170519214], res_norm=7.741e+00
2026-01-22 13:18:24,282 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:24,283 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:24,298 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,433 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,452 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,494 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,512 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,554 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,573 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,616 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,635 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,678 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,697 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,740 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,759 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,803 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,824 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,869 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,889 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,934 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:24,954 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:24,996 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:25,015 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:25,057 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:25,707 - INFO - integration_test - Step 19: MPC solve successful
2026-01-22 13:18:25,803 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-22 13:18:25,804 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:25,804 - INFO - integration_test - === Applying control at step 19 ===
2026-01-22 13:18:25,804 - INFO - integration_test -   Control dict from planner: {'a': -1.006126988511681e-06, 'w': -0.057848897701775974}
2026-01-22 13:18:25,804 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:25,804 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:25,805 - INFO - integration_test - Step 19 completed in 1.733s
2026-01-22 13:18:25,860 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-22 13:18:25,861 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44039269 2.2277454  0.47126848 2.99999993 5.09999916]
2026-01-22 13:18:25,862 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.153m, drift=0.217m)
2026-01-22 13:18:25,862 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-22 13:18:25,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:25,962 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.440, 2.228), path_start=(0.000, 0.000), dist=4.968m
2026-01-22 13:18:25,962 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-22 13:18:26,162 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:26,186 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:26,186 - INFO - integration_test - Warmstart k=0: x0=4.440392687515946 , y0=2.227745398905133 , psi0=0.4712684786218258 , v0=2.9999999291979713 , spline0=5.099999160457944 , a0=0.0 , w0=0.0
2026-01-22 13:18:26,186 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:26,187 - INFO - integration_test - Dyn residual k=0: pred=[4.707690609555953, 2.3639504525007053, 0.4712684786218258, 2.9999999291979713, 5.399999153377741], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.707690609555953, 2.3639504525007053, 0.4712684786218258, 2.9999999291979713, 5.399999153377741], res_norm=8.132e+00
2026-01-22 13:18:26,188 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:26,188 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:26,203 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,360 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,380 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,424 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,445 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,489 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,509 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,552 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,571 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,615 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,635 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,677 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,697 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,741 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,761 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,804 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,823 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,865 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:26,884 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,925 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:26,943 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:26,983 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:27,576 - INFO - integration_test - Step 20: MPC solve successful
2026-01-22 13:18:27,674 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-22 13:18:27,675 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:27,675 - INFO - integration_test - === Applying control at step 20 ===
2026-01-22 13:18:27,675 - INFO - integration_test -   Control dict from planner: {'a': 1.007995564489233e-06, 'w': -0.056312730055526734}
2026-01-22 13:18:27,675 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:27,675 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:27,676 - INFO - integration_test - Step 20 completed in 1.815s
2026-01-22 13:18:27,731 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-22 13:18:27,732 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.7080727  2.36319712 0.46563721 3.00000003 5.39999916]
2026-01-22 13:18:27,733 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.223m, drift=0.517m)
2026-01-22 13:18:27,733 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-22 13:18:27,736 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:27,832 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.708, 2.363), path_start=(0.000, 0.000), dist=5.268m
2026-01-22 13:18:27,832 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-22 13:18:27,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:27,943 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:27,943 - INFO - integration_test - Warmstart k=0: x0=4.708072704240179 , y0=2.363197123103939 , psi0=0.46563720561627314 , v0=3.0000000299975276 , spline0=5.399999163457697 , a0=0.0 , w0=0.0
2026-01-22 13:18:27,943 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:27,945 - INFO - integration_test - Dyn residual k=0: pred=[4.97613340091223, 2.497894801998365, 0.46563720561627314, 3.0000000299975276, 5.6999991664574505], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.97613340091223, 2.497894801998365, 0.46563720561627314, 3.0000000299975276, 5.6999991664574505], res_norm=8.527e+00
2026-01-22 13:18:27,946 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:27,946 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:27,961 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,118 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,138 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,181 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,203 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,245 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,265 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,309 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,330 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,371 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,391 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,433 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,452 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,494 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,513 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,556 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,575 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,617 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:28,639 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,680 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:28,698 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:28,738 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:29,609 - INFO - integration_test - Step 21: MPC solve successful
2026-01-22 13:18:29,819 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-22 13:18:29,819 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:29,819 - INFO - integration_test - === Applying control at step 21 ===
2026-01-22 13:18:29,819 - INFO - integration_test -   Control dict from planner: {'a': -6.289841433364176e-10, 'w': -0.05660968994092221}
2026-01-22 13:18:29,819 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:29,820 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:29,821 - INFO - integration_test - Step 21 completed in 2.089s
2026-01-22 13:18:29,872 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-22 13:18:29,874 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97651323 2.49713534 0.45997624 3.00000003 5.69999917]
2026-01-22 13:18:29,875 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-22 13:18:29,875 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-22 13:18:29,878 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:29,973 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-22 13:18:29,973 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-22 13:18:30,064 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:30,087 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:30,087 - INFO - integration_test - Warmstart k=0: x0=4.976513227847888 , y0=2.4971353429451217 , psi0=0.4599762366221809 , v0=3.000000029934629 , spline0=5.6999991664511604 , a0=0.0 , w0=0.0
2026-01-22 13:18:30,087 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:30,088 - INFO - integration_test - Dyn residual k=0: pred=[5.245332144623956, 2.6303133883558387, 0.4599762366221809, 3.000000029934629, 5.9999991694446235], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.245332144623956, 2.6303133883558387, 0.4599762366221809, 3.000000029934629, 5.9999991694446235], res_norm=8.924e+00
2026-01-22 13:18:30,088 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:30,089 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:30,104 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,260 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,280 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,321 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,340 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,380 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,399 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,440 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,459 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,500 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,519 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,568 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,587 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,628 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,646 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,694 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,715 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,759 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:30,778 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,819 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:30,838 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:30,880 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:31,846 - INFO - integration_test - Step 22: MPC solve successful
2026-01-22 13:18:31,946 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-22 13:18:31,946 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:31,946 - INFO - integration_test - === Applying control at step 22 ===
2026-01-22 13:18:31,947 - INFO - integration_test -   Control dict from planner: {'a': -1.4143606401128522e-07, 'w': -0.05221293393082056}
2026-01-22 13:18:31,947 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:31,947 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:31,948 - INFO - integration_test - Step 22 completed in 2.073s
2026-01-22 13:18:32,002 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-22 13:18:32,003 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.2456786  2.62961099 0.45475494 3.00000002 5.99999917]
2026-01-22 13:18:32,003 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-22 13:18:32,003 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-22 13:18:32,006 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:32,100 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.630), path_start=(0.000, 0.000), dist=5.868m
2026-01-22 13:18:32,100 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-22 13:18:32,303 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:32,325 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:32,326 - INFO - integration_test - Warmstart k=0: x0=5.245678602606076 , y0=2.6296109933077356 , psi0=0.4547549432290988 , v0=3.0000000157910227 , spline0=5.9999991680302625 , a0=0.0 , w0=0.0
2026-01-22 13:18:32,326 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:32,327 - INFO - integration_test - Dyn residual k=0: pred=[5.515189212351137, 2.7613836467010207, 0.4547549432290988, 3.0000000157910227, 6.2999991696093645], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.515189212351137, 2.7613836467010207, 0.4547549432290988, 3.0000000157910227, 6.2999991696093645], res_norm=9.324e+00
2026-01-22 13:18:32,327 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:32,328 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:32,342 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,495 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:32,515 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,556 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:32,576 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,618 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:32,638 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,680 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:32,699 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,740 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:32,759 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,800 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:32,820 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,862 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:32,880 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,922 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:32,941 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:32,983 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:33,002 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:33,041 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:33,059 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:33,098 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:34,365 - INFO - integration_test - Step 23: MPC solve successful
2026-01-22 13:18:34,467 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-22 13:18:34,467 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:34,467 - INFO - integration_test - === Applying control at step 23 ===
2026-01-22 13:18:34,467 - INFO - integration_test -   Control dict from planner: {'a': 1.4199828547918681e-07, 'w': -0.06977012910617525}
2026-01-22 13:18:34,468 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:34,468 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:34,469 - INFO - integration_test - Step 23 completed in 2.466s
2026-01-22 13:18:34,524 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-22 13:18:34,525 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51564671 2.76044239 0.44777793 3.00000003 6.29999917]
2026-01-22 13:18:34,525 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-22 13:18:34,525 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-22 13:18:34,528 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:34,626 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-22 13:18:34,626 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-22 13:18:34,712 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:34,735 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:34,735 - INFO - integration_test - Warmstart k=0: x0=5.515646714311767 , y0=2.7604423922375645 , psi0=0.4477779303184813 , v0=3.000000029990851 , spline0=6.299999171029348 , a0=0.0 , w0=0.0
2026-01-22 13:18:34,735 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:34,736 - INFO - integration_test - Dyn residual k=0: pred=[5.786070137694109, 2.8903314752492864, 0.4477779303184813, 3.000000029990851, 6.599999174028433], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.786070137694109, 2.8903314752492864, 0.4477779303184813, 3.000000029990851, 6.599999174028433], res_norm=9.726e+00
2026-01-22 13:18:34,736 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:34,737 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:34,751 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:34,903 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:34,923 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:34,964 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:34,983 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,024 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:35,042 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,085 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:35,108 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,184 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:35,208 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,258 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:35,279 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,325 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:35,346 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,392 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:35,411 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,453 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:35,472 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,511 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:35,529 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:35,568 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:36,041 - INFO - integration_test - Step 24: MPC solve successful
2026-01-22 13:18:36,264 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-22 13:18:36,264 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:36,264 - INFO - integration_test - === Applying control at step 24 ===
2026-01-22 13:18:36,264 - INFO - integration_test -   Control dict from planner: {'a': -8.544239244732015e-07, 'w': -0.048134360644204136}
2026-01-22 13:18:36,264 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:36,264 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:36,266 - INFO - integration_test - Step 24 completed in 1.741s
2026-01-22 13:18:36,319 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-22 13:18:36,320 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.7863817  2.88968014 0.44296449 2.99999994 6.59999917]
2026-01-22 13:18:36,320 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.111m, drift=0.252m)
2026-01-22 13:18:36,320 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-22 13:18:36,323 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:36,417 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.786, 2.890), path_start=(0.000, 0.000), dist=6.468m
2026-01-22 13:18:36,417 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-22 13:18:36,505 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:36,527 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:36,527 - INFO - integration_test - Warmstart k=0: x0=5.786381695385656 , y0=2.889680140169501 , psi0=0.44296449425406087 , v0=2.999999944548459 , spline0=6.599999165484194 , a0=0.0 , w0=0.0
2026-01-22 13:18:36,527 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:36,528 - INFO - integration_test - Dyn residual k=0: pred=[6.057427188694029, 3.018266053978628, 0.44296449425406087, 2.999999944548459, 6.89999915993904], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.057427188694029, 3.018266053978628, 0.44296449425406087, 2.999999944548459, 6.89999915993904], res_norm=1.013e+01
2026-01-22 13:18:36,529 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:36,529 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:36,544 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:36,692 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:36,712 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:36,753 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:36,773 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:36,815 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:36,835 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:36,878 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:36,897 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:36,940 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:36,959 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:37,001 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:37,020 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:37,062 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:37,082 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:37,127 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:37,146 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:37,190 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:37,209 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:37,250 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:37,269 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:37,308 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:37,843 - INFO - integration_test - Step 25: MPC solve successful
2026-01-22 13:18:37,945 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-22 13:18:37,946 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:37,946 - INFO - integration_test - === Applying control at step 25 ===
2026-01-22 13:18:37,946 - INFO - integration_test -   Control dict from planner: {'a': 8.544982725073681e-07, 'w': -0.07479921137098919}
2026-01-22 13:18:37,946 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:37,946 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:37,947 - INFO - integration_test - Step 25 completed in 1.627s
2026-01-22 13:18:38,005 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-22 13:18:38,006 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05790557 3.01725116 0.43548457 3.00000003 6.89999917]
2026-01-22 13:18:38,007 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.204m, drift=0.064m)
2026-01-22 13:18:38,007 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-22 13:18:38,009 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:38,111 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.017), path_start=(0.000, 0.000), dist=6.768m
2026-01-22 13:18:38,111 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-22 13:18:38,207 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:38,230 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:38,230 - INFO - integration_test - Warmstart k=0: x0=6.057905569111733 , y0=3.0172511620162283 , psi0=0.4354845731169619 , v0=3.000000029998286 , spline0=6.8999991684840225 , a0=0.0 , w0=0.0
2026-01-22 13:18:38,230 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:38,231 - INFO - integration_test - Dyn residual k=0: pred=[6.329905291336787, 3.143806102296687, 0.4354845731169619, 3.000000029998286, 7.199999171483851], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.329905291336787, 3.143806102296687, 0.4354845731169619, 3.000000029998286, 7.199999171483851], res_norm=1.053e+01
2026-01-22 13:18:38,231 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:38,232 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:38,246 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,404 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,424 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,468 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,489 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,531 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,550 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,592 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,612 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,658 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,677 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,719 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,739 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,780 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,800 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,843 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,862 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,905 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:38,925 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:38,967 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:38,987 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:39,027 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:40,729 - INFO - integration_test - Step 26: MPC solve successful
2026-01-22 13:18:40,970 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-22 13:18:40,970 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:40,970 - INFO - integration_test - === Applying control at step 26 ===
2026-01-22 13:18:40,970 - INFO - integration_test -   Control dict from planner: {'a': -6.31131675744589e-08, 'w': -0.04956293791830362}
2026-01-22 13:18:40,971 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:40,971 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:40,972 - INFO - integration_test - Step 26 completed in 2.966s
2026-01-22 13:18:41,028 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-22 13:18:41,028 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.3302178  3.14313153 0.43052828 3.00000002 7.19999917]
2026-01-22 13:18:41,029 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.174m, drift=0.364m)
2026-01-22 13:18:41,029 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-22 13:18:41,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:41,127 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.330, 3.143), path_start=(0.000, 0.000), dist=7.068m
2026-01-22 13:18:41,127 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-22 13:18:41,215 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:41,237 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:41,237 - INFO - integration_test - Warmstart k=0: x0=6.330217798536762 , y0=3.143131530143876 , psi0=0.43052827932513155 , v0=3.0000000236869693 , spline0=7.19999917085272 , a0=0.0 , w0=0.0
2026-01-22 13:18:41,238 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:41,238 - INFO - integration_test - Dyn residual k=0: pred=[6.602841420275998, 3.268336810747373, 0.43052827932513155, 3.0000000236869693, 7.499999173221417], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.602841420275998, 3.268336810747373, 0.43052827932513155, 3.0000000236869693, 7.499999173221417], res_norm=1.094e+01
2026-01-22 13:18:41,239 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:41,240 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:41,254 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,404 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,423 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,465 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,485 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,526 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,545 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,586 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,605 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,647 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,666 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,707 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,726 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,767 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,786 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,827 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,846 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,887 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:41,906 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:41,945 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:41,963 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:42,003 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:42,544 - INFO - integration_test - Step 27: MPC solve successful
2026-01-22 13:18:42,657 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-22 13:18:42,657 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:42,657 - INFO - integration_test - === Applying control at step 27 ===
2026-01-22 13:18:42,657 - INFO - integration_test -   Control dict from planner: {'a': 6.311073629972369e-08, 'w': -0.07238639780080591}
2026-01-22 13:18:42,657 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:42,657 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:42,658 - INFO - integration_test - Step 27 completed in 1.630s
2026-01-22 13:18:42,713 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-22 13:18:42,714 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.6032922  3.26734901 0.42328964 3.00000003 7.49999917]
2026-01-22 13:18:42,715 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.124m, drift=0.175m)
2026-01-22 13:18:42,715 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-22 13:18:42,717 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:42,812 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.603, 3.267), path_start=(0.000, 0.000), dist=7.367m
2026-01-22 13:18:42,812 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-22 13:18:42,897 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:42,920 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:42,920 - INFO - integration_test - Warmstart k=0: x0=6.603292195735793 , y0=3.2673490096767233 , psi0=0.42328963954505094 , v0=3.0000000299980427 , spline0=7.499999173852524 , a0=0.0 , w0=0.0
2026-01-22 13:18:42,920 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:42,921 - INFO - integration_test - Dyn residual k=0: pred=[6.876814983638219, 3.390577603347051, 0.42328963954505094, 3.0000000299980427, 7.799999176852329], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.876814983638219, 3.390577603347051, 0.42328963954505094, 3.0000000299980427, 7.799999176852329], res_norm=1.135e+01
2026-01-22 13:18:42,921 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:42,922 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:42,936 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,221 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,240 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,288 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,315 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,371 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,392 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,434 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,453 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,495 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,514 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,555 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,574 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,616 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,634 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,675 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,695 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,737 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:43,756 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,796 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:43,815 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:43,855 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:44,469 - INFO - integration_test - Step 28: MPC solve successful
2026-01-22 13:18:44,583 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-22 13:18:44,583 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:44,583 - INFO - integration_test - === Applying control at step 28 ===
2026-01-22 13:18:44,583 - INFO - integration_test -   Control dict from planner: {'a': -1.22958751924476e-10, 'w': -0.06022487599873766}
2026-01-22 13:18:44,583 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:44,583 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:44,584 - INFO - integration_test - Step 28 completed in 1.870s
2026-01-22 13:18:44,640 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-22 13:18:44,641 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.8771844  3.38975322 0.41726715 3.00000003 7.79999918]
2026-01-22 13:18:44,642 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.243m, drift=0.013m)
2026-01-22 13:18:44,642 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-22 13:18:44,644 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:44,742 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.877, 3.390), path_start=(0.000, 0.000), dist=7.667m
2026-01-22 13:18:44,742 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-22 13:18:44,830 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:44,853 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:44,853 - INFO - integration_test - Warmstart k=0: x0=6.8771844003963505 , y0=3.389753217114301 , psi0=0.41726715194517716 , v0=3.0000000299857468 , spline0=7.799999176851099 , a0=0.0 , w0=0.0
2026-01-22 13:18:44,853 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:44,854 - INFO - integration_test - Dyn residual k=0: pred=[7.15144436611912, 3.5113322983778574, 0.41726715194517716, 3.0000000299857468, 8.099999179849673], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.15144436611912, 3.5113322983778574, 0.41726715194517716, 3.0000000299857468, 8.099999179849673], res_norm=1.176e+01
2026-01-22 13:18:44,855 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:44,856 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:44,870 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,022 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,042 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,086 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,106 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,147 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,166 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,208 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,228 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,270 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,289 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,334 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,353 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,396 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,415 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,457 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,476 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,518 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:45,537 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,577 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:45,595 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:45,635 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:46,168 - INFO - integration_test - Step 29: MPC solve successful
2026-01-22 13:18:46,435 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-22 13:18:46,435 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:46,435 - INFO - integration_test - === Applying control at step 29 ===
2026-01-22 13:18:46,435 - INFO - integration_test -   Control dict from planner: {'a': -1.7314811794496418e-06, 'w': -0.09022417984260443}
2026-01-22 13:18:46,436 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:46,436 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:46,437 - INFO - integration_test - Step 29 completed in 1.796s
2026-01-22 13:18:46,493 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-22 13:18:46,494 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.1519891  3.51009341 0.40824473 2.99999986 8.09999916]
2026-01-22 13:18:46,495 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.152m, drift=0.287m)
2026-01-22 13:18:46,495 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-22 13:18:46,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:46,592 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.152, 3.510), path_start=(0.000, 0.000), dist=7.967m
2026-01-22 13:18:46,592 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-22 13:18:46,681 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:46,704 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:46,704 - INFO - integration_test - Warmstart k=0: x0=7.15198910214581 , y0=3.51009340978902 , psi0=0.4082447339609167 , v0=2.9999998568376287 , spline0=8.099999162534862 , a0=0.0 , w0=0.0
2026-01-22 13:18:46,704 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:46,705 - INFO - integration_test - Dyn residual k=0: pred=[7.427334811526555, 3.629193081223799, 0.4082447339609167, 2.9999998568376287, 8.399999148218626], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.427334811526555, 3.629193081223799, 0.4082447339609167, 2.9999998568376287, 8.399999148218626], res_norm=1.217e+01
2026-01-22 13:18:46,706 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:46,706 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:46,721 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:46,873 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:46,892 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:46,934 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:46,953 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:46,995 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:47,014 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:47,056 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:47,075 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:47,117 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:47,136 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:47,178 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:47,197 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:47,241 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:47,260 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:47,302 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:47,323 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:47,365 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:47,384 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:47,426 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:47,446 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:47,487 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:48,067 - INFO - integration_test - Step 30: MPC solve successful
2026-01-22 13:18:48,191 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-22 13:18:48,191 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:48,191 - INFO - integration_test - === Applying control at step 30 ===
2026-01-22 13:18:48,191 - INFO - integration_test -   Control dict from planner: {'a': 1.7316109661828846e-06, 'w': -0.01515711499744944}
2026-01-22 13:18:48,191 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:48,191 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:48,192 - INFO - integration_test - Step 30 completed in 1.698s
2026-01-22 13:18:48,249 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-22 13:18:48,251 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.42742497 3.62898437 0.40672902 3.00000003 8.39999917]
2026-01-22 13:18:48,252 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.152m, drift=0.099m)
2026-01-22 13:18:48,252 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-22 13:18:48,255 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:48,357 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.427, 3.629), path_start=(0.000, 0.000), dist=8.267m
2026-01-22 13:18:48,357 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-22 13:18:48,451 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:48,474 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:48,474 - INFO - integration_test - Warmstart k=0: x0=7.427424974401073 , y0=3.62898436676101 , psi0=0.40672902246117176 , v0=3.0000000299987253 , spline0=8.399999165534735 , a0=0.0 , w0=0.0
2026-01-22 13:18:48,474 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:48,475 - INFO - integration_test - Dyn residual k=0: pred=[7.702950904070775, 3.747666563739199, 0.40672902246117176, 3.0000000299987253, 8.699999168534609], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.702950904070775, 3.747666563739199, 0.40672902246117176, 3.0000000299987253, 8.699999168534609], res_norm=1.258e+01
2026-01-22 13:18:48,476 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:48,476 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:48,492 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:48,647 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:48,666 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:48,712 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:48,735 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:48,781 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:48,803 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:48,849 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:48,873 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:48,918 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:48,938 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:48,980 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:49,000 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:49,044 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:49,064 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:49,113 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:49,133 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:49,175 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:49,195 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:49,240 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:49,261 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:49,311 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:51,376 - INFO - integration_test - Step 31: MPC solve successful
2026-01-22 13:18:51,652 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-22 13:18:51,652 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:51,652 - INFO - integration_test - === Applying control at step 31 ===
2026-01-22 13:18:51,652 - INFO - integration_test -   Control dict from planner: {'a': -1.191919265814765e-06, 'w': -0.07835811368319556}
2026-01-22 13:18:51,652 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:51,652 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:51,653 - INFO - integration_test - Step 31 completed in 3.403s
2026-01-22 13:18:51,721 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-22 13:18:51,722 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.70341306 3.74658587 0.39889321 2.99999991 8.69999916]
2026-01-22 13:18:51,723 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.252m, drift=0.399m)
2026-01-22 13:18:51,723 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-22 13:18:51,726 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:51,821 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.703, 3.747), path_start=(0.000, 0.000), dist=8.566m
2026-01-22 13:18:51,821 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-22 13:18:51,921 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:51,945 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:51,945 - INFO - integration_test - Warmstart k=0: x0=7.7034130623232135 , y0=3.7465858678181183 , psi0=0.3988932110928522 , v0=2.9999999108067987 , spline0=8.699999156615416 , a0=0.0 , w0=0.0
2026-01-22 13:18:51,945 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:51,946 - INFO - integration_test - Dyn residual k=0: pred=[7.979860484206646, 3.8631054695270657, 0.3988932110928522, 2.9999999108067987, 8.999999147696096], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.979860484206646, 3.8631054695270657, 0.3988932110928522, 2.9999999108067987, 8.999999147696096], res_norm=1.299e+01
2026-01-22 13:18:51,947 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:51,949 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:51,965 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,135 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,157 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,205 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,229 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,274 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,295 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,341 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,360 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,401 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,421 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,462 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,481 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,524 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,543 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,584 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,603 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,649 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:52,671 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,714 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:52,737 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:52,782 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:53,436 - INFO - integration_test - Step 32: MPC solve successful
2026-01-22 13:18:53,558 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-22 13:18:53,558 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:53,558 - INFO - integration_test - === Applying control at step 32 ===
2026-01-22 13:18:53,558 - INFO - integration_test -   Control dict from planner: {'a': 1.1895149898481731e-06, 'w': 0.45233683171616057}
2026-01-22 13:18:53,558 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:53,558 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:53,559 - INFO - integration_test - Step 32 completed in 1.837s
2026-01-22 13:18:53,614 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-22 13:18:53,615 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.97713137 3.86931704 0.44412689 3.00000003 8.99999916]
2026-01-22 13:18:53,615 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.131m, drift=0.211m)
2026-01-22 13:18:53,615 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-22 13:18:53,618 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:53,720 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.977, 3.869), path_start=(0.000, 0.000), dist=8.866m
2026-01-22 13:18:53,720 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-22 13:18:53,827 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:53,851 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:53,851 - INFO - integration_test - Warmstart k=0: x0=7.977131371053526 , y0=3.869317042935035 , psi0=0.4441268942644683 , v0=3.0000000297582976 , spline0=8.999999159591246 , a0=0.0 , w0=0.0
2026-01-22 13:18:53,851 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:53,852 - INFO - integration_test - Dyn residual k=0: pred=[8.248027220707577, 3.9982179367477135, 0.4441268942644683, 3.0000000297582976, 9.299999162567076], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.248027220707577, 3.9982179367477135, 0.4441268942644683, 3.0000000297582976, 9.299999162567076], res_norm=1.341e+01
2026-01-22 13:18:53,853 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:53,854 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:53,869 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,044 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,065 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,109 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,130 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,173 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,195 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,246 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,272 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,322 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,345 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,393 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,417 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,466 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,487 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,535 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,556 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,605 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:54,633 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,681 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:54,704 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:54,751 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:55,743 - INFO - integration_test - Step 33: MPC solve successful
2026-01-22 13:18:55,918 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-22 13:18:55,918 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:55,918 - INFO - integration_test - === Applying control at step 33 ===
2026-01-22 13:18:55,918 - INFO - integration_test -   Control dict from planner: {'a': -7.35466571767574e-07, 'w': -0.7803259362241498}
2026-01-22 13:18:55,918 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:55,919 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:55,920 - INFO - integration_test - Step 33 completed in 2.305s
2026-01-22 13:18:55,990 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-22 13:18:55,991 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.25277907 3.98752317 0.3660943  2.99999996 9.29999916]
2026-01-22 13:18:55,992 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.184m, drift=0.022m)
2026-01-22 13:18:55,992 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-22 13:18:55,995 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:56,289 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.253, 3.988), path_start=(0.000, 0.000), dist=9.166m
2026-01-22 13:18:56,289 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-22 13:18:56,403 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:56,433 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:56,433 - INFO - integration_test - Warmstart k=0: x0=8.252779070637441 , y0=3.987523171099733 , psi0=0.3660943006420533 , v0=2.9999999562116404 , spline0=9.29999915521241 , a0=0.0 , w0=0.0
2026-01-22 13:18:56,433 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:56,434 - INFO - integration_test - Dyn residual k=0: pred=[8.532898844177822, 4.0949145573669, 0.3660943006420533, 2.9999999562116404, 9.599999150833574], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.532898844177822, 4.0949145573669, 0.3660943006420533, 2.9999999562116404, 9.599999150833574], res_norm=1.382e+01
2026-01-22 13:18:56,435 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:56,435 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:56,453 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:56,638 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:56,662 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:56,714 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:56,739 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:56,792 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:56,816 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:56,868 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:56,893 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:56,947 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:56,970 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:57,019 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:57,042 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:57,090 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:57,111 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:57,160 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:57,181 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:57,225 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:57,247 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:57,293 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:57,314 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:57,358 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:58,270 - INFO - integration_test - Step 34: MPC solve successful
2026-01-22 13:18:58,422 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-22 13:18:58,422 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:18:58,422 - INFO - integration_test - === Applying control at step 34 ===
2026-01-22 13:18:58,422 - INFO - integration_test -   Control dict from planner: {'a': 7.124316200013613e-07, 'w': 0.7999961502508277}
2026-01-22 13:18:58,422 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:18:58,422 - INFO - integration_test -   Planner output success: True
2026-01-22 13:18:58,423 - INFO - integration_test - Step 34 completed in 2.433s
2026-01-22 13:18:58,486 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-22 13:18:58,489 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.52830681 4.10599881 0.44609392 3.00000003 9.59999916]
2026-01-22 13:18:58,489 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.203m, drift=0.322m)
2026-01-22 13:18:58,489 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-22 13:18:58,492 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:58,596 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.528, 4.106), path_start=(0.000, 0.000), dist=9.465m
2026-01-22 13:18:58,596 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-22 13:18:58,685 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:18:58,708 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:18:58,708 - INFO - integration_test - Warmstart k=0: x0=8.528306811113623 , y0=4.105998809937508 , psi0=0.4460939156671361 , v0=3.0000000274548024 , spline0=9.59999915795789 , a0=0.0 , w0=0.0
2026-01-22 13:18:58,708 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:18:58,709 - INFO - integration_test - Dyn residual k=0: pred=[8.798948585835108, 4.235432311871485, 0.4460939156671361, 3.0000000274548024, 9.899999160703372], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.798948585835108, 4.235432311871485, 0.4460939156671361, 3.0000000274548024, 9.899999160703372], res_norm=1.423e+01
2026-01-22 13:18:58,710 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:58,710 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:18:58,725 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:58,879 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:58,899 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:58,942 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:58,965 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,009 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:59,028 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,071 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:59,091 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,139 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:59,160 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,204 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:59,223 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,270 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:59,291 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,335 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:59,357 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,404 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:18:59,426 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,470 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:18:59,492 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:18:59,537 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:00,460 - INFO - integration_test - Step 35: MPC solve successful
2026-01-22 13:19:00,624 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-22 13:19:00,624 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:00,624 - INFO - integration_test - === Applying control at step 35 ===
2026-01-22 13:19:00,624 - INFO - integration_test -   Control dict from planner: {'a': -3.7751657141632544e-08, 'w': -0.8000000083642388}
2026-01-22 13:19:00,624 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:00,624 - INFO - integration_test -   Planner output success: True
2026-01-22 13:19:00,625 - INFO - integration_test - Step 35 completed in 2.137s
2026-01-22 13:19:00,682 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-22 13:19:00,683 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.80383458 4.2244744  0.36609391 3.00000002 9.89999916]
2026-01-22 13:19:00,684 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.116m, drift=0.134m)
2026-01-22 13:19:00,684 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-22 13:19:00,687 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:00,954 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.804, 4.224), path_start=(0.000, 0.000), dist=9.765m
2026-01-22 13:19:00,954 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-22 13:19:01,044 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:01,068 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:01,068 - INFO - integration_test - Warmstart k=0: x0=8.803834576851726 , y0=4.224474396610598 , psi0=0.3660939148307122 , v0=3.000000023679637 , spline0=9.899999160325855 , a0=0.0 , w0=0.0
2026-01-22 13:19:01,068 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:01,069 - INFO - integration_test - Dyn residual k=0: pred=[9.08395439812461, 4.331865677219531, 0.3660939148307122, 3.000000023679637, 10.19999916269382], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.08395439812461, 4.331865677219531, 0.3660939148307122, 3.000000023679637, 10.19999916269382], res_norm=1.464e+01
2026-01-22 13:19:01,070 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:01,070 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:01,084 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,239 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,259 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,301 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,321 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,363 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,384 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,431 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,450 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,493 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,512 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,554 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,573 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,615 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,634 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,675 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,695 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,737 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:01,756 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,796 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:01,814 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:01,854 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:02,726 - INFO - integration_test - Step 36: MPC solve successful
2026-01-22 13:19:02,896 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-22 13:19:02,896 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:02,896 - INFO - integration_test - === Applying control at step 36 ===
2026-01-22 13:19:02,896 - INFO - integration_test -   Control dict from planner: {'a': -1.0591315893345398e-06, 'w': -0.8000000027237526}
2026-01-22 13:19:02,897 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:02,897 - INFO - integration_test -   Planner output success: True
2026-01-22 13:19:02,898 - INFO - integration_test - Step 36 completed in 2.215s
2026-01-22 13:19:02,960 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-22 13:19:02,966 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.08794906  4.32055234  0.28609391  2.99999992 10.19999915]
2026-01-22 13:19:02,966 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.237m, drift=0.054m)
2026-01-22 13:19:02,966 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-22 13:19:02,969 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:03,081 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.088, 4.321), path_start=(0.000, 0.000), dist=10.063m
2026-01-22 13:19:03,081 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.063m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:03,081 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-22 13:19:03,176 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:03,200 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:03,200 - INFO - integration_test - Warmstart k=0: x0=9.087949058963533 , y0=4.320552344633466 , psi0=0.28609391455833694 , v0=2.999999917766478 , spline0=10.199999152102503 , a0=0.0 , w0=0.0
2026-01-22 13:19:03,200 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:03,201 - INFO - integration_test - Dyn residual k=0: pred=[9.375755105964592, 4.4052144635274155, 0.28609391455833694, 2.999999917766478, 10.499999143879151], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.375755105964592, 4.4052144635274155, 0.28609391455833694, 2.999999917766478, 10.499999143879151], res_norm=1.505e+01
2026-01-22 13:19:03,202 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:03,203 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:03,217 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,379 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,400 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,443 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,463 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,505 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,527 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,572 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,593 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,642 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,663 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,714 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,735 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,791 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,814 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,865 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,887 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:03,956 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:03,985 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:04,035 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:04,055 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:04,101 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:05,020 - INFO - integration_test - Step 37: MPC solve successful
2026-01-22 13:19:05,212 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-22 13:19:05,212 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:05,212 - INFO - integration_test - === Applying control at step 37 ===
2026-01-22 13:19:05,213 - INFO - integration_test -   Control dict from planner: {'a': 9.700575826007335e-07, 'w': -0.7999798450227847}
2026-01-22 13:19:05,213 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:05,213 - INFO - integration_test -   Planner output success: True
2026-01-22 13:19:05,214 - INFO - integration_test - Step 37 completed in 2.248s
2026-01-22 13:19:05,283 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-22 13:19:05,285 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.37883283  4.39361838  0.20609593  3.00000001 10.49999915]
2026-01-22 13:19:05,285 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.197m, drift=0.246m)
2026-01-22 13:19:05,285 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-22 13:19:05,288 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:05,407 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.379, 4.394), path_start=(0.000, 0.000), dist=10.357m
2026-01-22 13:19:05,407 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.357m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:05,407 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-22 13:19:05,704 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:05,736 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:05,736 - INFO - integration_test - Warmstart k=0: x0=9.37883282921928 , y0=4.393618379110991 , psi0=0.20609593005605847 , v0=3.000000014772236 , spline0=10.499999153579727 , a0=0.0 , w0=0.0
2026-01-22 13:19:05,736 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:05,737 - INFO - integration_test - Dyn residual k=0: pred=[9.672484021036777, 4.455010385353647, 0.20609593005605847, 3.000000014772236, 10.799999155056952], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.672484021036777, 4.455010385353647, 0.20609593005605847, 3.000000014772236, 10.799999155056952], res_norm=1.546e+01
2026-01-22 13:19:05,739 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:05,740 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:05,757 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:05,932 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:05,953 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:05,998 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:06,022 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,071 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:06,094 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,143 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:06,170 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,219 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:06,241 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,292 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:06,314 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,381 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:06,413 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,467 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:06,488 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,535 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:06,557 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,602 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:06,625 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:06,673 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:09,775 - WARNING - integration_test - Step 38: MPC solve failed
2026-01-22 13:19:09,775 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-22 13:19:09,989 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-22 13:19:09,990 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:09,990 - INFO - integration_test - === Applying control at step 38 ===
2026-01-22 13:19:09,990 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:09,990 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:09,990 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:09,990 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:09,991 - INFO - integration_test - Step 38 completed in 4.707s
2026-01-22 13:19:10,062 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-22 13:19:10,062 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.67248402  4.45501039  0.20609593  3.00000001 10.79999916]
2026-01-22 13:19:10,063 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.234m, drift=0.057m)
2026-01-22 13:19:10,063 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-22 13:19:10,066 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:10,198 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.672, 4.455), path_start=(0.000, 0.000), dist=10.649m
2026-01-22 13:19:10,198 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.649m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:10,199 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-22 13:19:10,318 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:10,345 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:10,345 - INFO - integration_test - Warmstart k=0: x0=9.672484021036777 , y0=4.455010385353647 , psi0=0.20609593005605847 , v0=3.000000014772236 , spline0=10.799999155056952 , a0=0.0 , w0=0.0
2026-01-22 13:19:10,345 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:10,346 - INFO - integration_test - Dyn residual k=0: pred=[9.966135212854272, 4.516402391596304, 0.20609593005605847, 3.000000014772236, 11.099999156534176], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.966135212854272, 4.516402391596304, 0.20609593005605847, 3.000000014772236, 11.099999156534176], res_norm=1.587e+01
2026-01-22 13:19:10,347 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:10,348 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:10,365 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:10,545 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:10,568 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:10,615 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:10,637 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:10,680 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:10,700 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:10,747 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:10,767 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:10,814 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:10,836 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:10,879 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:10,899 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:10,945 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:10,964 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:11,011 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:11,031 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:11,074 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:11,094 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:11,139 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:11,160 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:11,204 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:12,108 - INFO - integration_test - Step 39: MPC solve successful
2026-01-22 13:19:12,247 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-22 13:19:12,248 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:12,248 - INFO - integration_test - === Applying control at step 39 ===
2026-01-22 13:19:12,248 - INFO - integration_test -   Control dict from planner: {'a': -1.9999947872209802, 'w': -0.7999999271026573}
2026-01-22 13:19:12,248 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:12,248 - INFO - integration_test -   Planner output success: True
2026-01-22 13:19:12,249 - INFO - integration_test - Step 39 completed in 2.187s
2026-01-22 13:19:12,310 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-22 13:19:12,313 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.9583947   4.50307572  0.12609594  2.80000054 11.07999921]
2026-01-22 13:19:12,314 - DEBUG - integration_test - Step 40: Using propagated spline 11.0800 (close to path, dist=0.339m, drift=0.337m)
2026-01-22 13:19:12,314 - DEBUG - integration_test -   Set spline state to 11.0800
2026-01-22 13:19:12,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:12,594 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.958, 4.503), path_start=(0.000, 0.000), dist=10.929m
2026-01-22 13:19:12,595 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.929m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:12,595 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-22 13:19:12,690 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:12,716 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:12,716 - INFO - integration_test - Warmstart k=0: x0=9.958394699289384 , y0=4.503075720351766 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=11.079999208661965 , a0=0.0 , w0=0.0
2026-01-22 13:19:12,716 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:12,717 - INFO - integration_test - Dyn residual k=0: pred=[10.236171674466652, 4.538289099629796, 0.12609593734579275, 2.800000536050138, 11.359999262266978], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.236171674466652, 4.538289099629796, 0.12609593734579275, 2.800000536050138, 11.359999262266978], res_norm=1.620e+01
2026-01-22 13:19:12,718 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:12,719 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:12,735 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:12,896 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:12,917 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:12,960 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:12,981 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,025 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:13,045 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,088 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:13,108 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,151 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:13,171 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,215 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:13,235 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,278 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:13,297 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,341 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:13,363 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,407 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:13,428 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,471 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:13,491 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:13,534 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:16,323 - WARNING - integration_test - Step 40: MPC solve failed
2026-01-22 13:19:16,323 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-22 13:19:16,465 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.080)
2026-01-22 13:19:16,466 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:16,466 - INFO - integration_test - === Applying control at step 40 ===
2026-01-22 13:19:16,466 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:16,466 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:16,466 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:16,466 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:16,467 - INFO - integration_test - Step 40 completed in 4.154s
2026-01-22 13:19:16,529 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-22 13:19:16,530 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.23617167  4.5382891   0.12609594  2.80000054 11.35999926]
2026-01-22 13:19:16,531 - DEBUG - integration_test - Step 41: Using propagated spline 11.3600 (close to path, dist=0.337m, drift=0.129m)
2026-01-22 13:19:16,531 - DEBUG - integration_test -   Set spline state to 11.3600
2026-01-22 13:19:16,534 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:16,634 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.236, 4.538), path_start=(0.000, 0.000), dist=11.197m
2026-01-22 13:19:16,634 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.197m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:16,634 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-22 13:19:16,727 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:16,750 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:16,750 - INFO - integration_test - Warmstart k=0: x0=10.236171674466652 , y0=4.538289099629796 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=11.359999262266978 , a0=0.0 , w0=0.0
2026-01-22 13:19:16,750 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:16,751 - INFO - integration_test - Dyn residual k=0: pred=[10.51394864964392, 4.573502478907826, 0.12609593734579275, 2.800000536050138, 11.639999315871991], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.51394864964392, 4.573502478907826, 0.12609593734579275, 2.800000536050138, 11.639999315871991], res_norm=1.658e+01
2026-01-22 13:19:16,751 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:16,752 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:16,768 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:16,927 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:16,948 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:16,992 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:17,012 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,055 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:17,075 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,117 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:17,136 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,178 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:17,198 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,240 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:17,261 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,304 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:17,324 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,366 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:17,386 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,428 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:17,448 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,489 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:17,507 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:17,548 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:19,825 - WARNING - integration_test - Step 41: MPC solve failed
2026-01-22 13:19:19,826 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-22 13:19:20,173 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.360)
2026-01-22 13:19:20,173 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:20,173 - INFO - integration_test - === Applying control at step 41 ===
2026-01-22 13:19:20,173 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:20,173 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:20,173 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:20,173 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:20,175 - INFO - integration_test - Step 41 completed in 3.645s
2026-01-22 13:19:20,235 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-22 13:19:20,240 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.51394865  4.57350248  0.12609594  2.80000054 11.63999932]
2026-01-22 13:19:20,241 - DEBUG - integration_test - Step 42: Using propagated spline 11.6400 (close to path, dist=0.457m, drift=0.079m)
2026-01-22 13:19:20,241 - DEBUG - integration_test -   Set spline state to 11.6400
2026-01-22 13:19:20,244 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:20,341 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.514, 4.574), path_start=(0.000, 0.000), dist=11.466m
2026-01-22 13:19:20,341 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.466m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:20,341 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-22 13:19:20,434 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:20,458 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:20,459 - INFO - integration_test - Warmstart k=0: x0=10.51394864964392 , y0=4.573502478907826 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=11.639999315871991 , a0=0.0 , w0=0.0
2026-01-22 13:19:20,459 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:20,459 - INFO - integration_test - Dyn residual k=0: pred=[10.791725624821188, 4.608715858185856, 0.12609593734579275, 2.800000536050138, 11.919999369477004], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.791725624821188, 4.608715858185856, 0.12609593734579275, 2.800000536050138, 11.919999369477004], res_norm=1.696e+01
2026-01-22 13:19:20,460 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:20,461 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:20,477 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:20,645 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:20,666 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:20,712 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:20,732 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:20,776 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:20,796 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:20,840 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:20,859 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:20,901 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:20,921 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:20,964 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:20,985 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:21,031 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:21,051 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:21,098 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:21,118 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:21,165 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:21,189 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:21,236 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:21,257 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:21,302 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:24,170 - WARNING - integration_test - Step 42: MPC solve failed
2026-01-22 13:19:24,170 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-22 13:19:24,408 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.640)
2026-01-22 13:19:24,409 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:24,409 - INFO - integration_test - === Applying control at step 42 ===
2026-01-22 13:19:24,409 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:24,409 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:24,409 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:24,409 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:24,410 - INFO - integration_test - Step 42 completed in 4.170s
2026-01-22 13:19:24,471 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-22 13:19:24,477 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.79172562  4.60871586  0.12609594  2.80000054 11.91999937]
2026-01-22 13:19:24,478 - DEBUG - integration_test - Step 43: Using propagated spline 11.9200 (close to path, dist=0.461m, drift=0.201m)
2026-01-22 13:19:24,478 - DEBUG - integration_test -   Set spline state to 11.9200
2026-01-22 13:19:24,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:24,592 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.792, 4.609), path_start=(0.000, 0.000), dist=11.735m
2026-01-22 13:19:24,592 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.735m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:24,592 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-22 13:19:24,697 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:24,722 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:24,723 - INFO - integration_test - Warmstart k=0: x0=10.791725624821188 , y0=4.608715858185856 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=11.919999369477004 , a0=0.0 , w0=0.0
2026-01-22 13:19:24,723 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:24,724 - INFO - integration_test - Dyn residual k=0: pred=[11.069502599998456, 4.643929237463886, 0.12609593734579275, 2.800000536050138, 12.199999423082017], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.069502599998456, 4.643929237463886, 0.12609593734579275, 2.800000536050138, 12.199999423082017], res_norm=1.734e+01
2026-01-22 13:19:24,724 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:24,726 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:24,742 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:24,905 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:24,926 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:24,971 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:24,992 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,039 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:25,060 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,106 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:25,128 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,179 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:25,208 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,273 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:25,302 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,363 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:25,389 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,440 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:25,462 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,508 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:25,531 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,577 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:25,598 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:25,643 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:28,226 - WARNING - integration_test - Step 43: MPC solve failed
2026-01-22 13:19:28,226 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-22 13:19:28,589 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=11.920)
2026-01-22 13:19:28,589 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:28,589 - INFO - integration_test - === Applying control at step 43 ===
2026-01-22 13:19:28,589 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:28,589 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:28,589 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:28,589 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:28,591 - INFO - integration_test - Step 43 completed in 4.114s
2026-01-22 13:19:28,651 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-22 13:19:28,657 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[11.0695026   4.64392924  0.12609594  2.80000054 12.19999942]
2026-01-22 13:19:28,657 - DEBUG - integration_test - Step 44: Using propagated spline 12.2000 (close to path, dist=0.541m, drift=0.008m)
2026-01-22 13:19:28,657 - DEBUG - integration_test -   Set spline state to 12.2000
2026-01-22 13:19:28,660 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:28,761 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(11.070, 4.644), path_start=(0.000, 0.000), dist=12.004m
2026-01-22 13:19:28,761 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.004m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:28,761 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-22 13:19:28,871 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:28,898 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:28,898 - INFO - integration_test - Warmstart k=0: x0=11.069502599998456 , y0=4.643929237463886 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=12.199999423082017 , a0=0.0 , w0=0.0
2026-01-22 13:19:28,898 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:28,899 - INFO - integration_test - Dyn residual k=0: pred=[11.347279575175724, 4.679142616741916, 0.12609593734579275, 2.800000536050138, 12.47999947668703], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.347279575175724, 4.679142616741916, 0.12609593734579275, 2.800000536050138, 12.47999947668703], res_norm=1.773e+01
2026-01-22 13:19:28,900 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:28,901 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:28,925 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,099 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,119 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,162 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,181 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,224 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,244 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,286 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,307 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,355 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,377 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,421 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,440 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,485 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,504 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,546 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,565 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,607 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:29,627 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,667 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:29,686 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:29,726 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:32,393 - WARNING - integration_test - Step 44: MPC solve failed
2026-01-22 13:19:32,393 - WARNING - integration_test -   Consecutive MPC failures: 5/15
2026-01-22 13:19:32,561 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.200)
2026-01-22 13:19:32,561 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:32,561 - INFO - integration_test - === Applying control at step 44 ===
2026-01-22 13:19:32,561 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:32,561 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:32,562 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:32,562 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:32,563 - INFO - integration_test - Step 44 completed in 3.906s
2026-01-22 13:19:32,629 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-22 13:19:32,642 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.34727958  4.67914262  0.12609594  2.80000054 12.47999948]
2026-01-22 13:19:32,643 - DEBUG - integration_test - Step 45: Using propagated spline 12.4800 (close to path, dist=0.584m, drift=0.272m)
2026-01-22 13:19:32,643 - DEBUG - integration_test -   Set spline state to 12.4800
2026-01-22 13:19:32,647 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:32,751 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.347, 4.679), path_start=(0.000, 0.000), dist=12.274m
2026-01-22 13:19:32,751 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.274m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:32,751 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-22 13:19:32,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:32,869 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:32,869 - INFO - integration_test - Warmstart k=0: x0=11.347279575175724 , y0=4.679142616741916 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=12.47999947668703 , a0=0.0 , w0=0.0
2026-01-22 13:19:32,869 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:32,870 - INFO - integration_test - Dyn residual k=0: pred=[11.625056550352992, 4.714355996019946, 0.12609593734579275, 2.800000536050138, 12.759999530292044], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.625056550352992, 4.714355996019946, 0.12609593734579275, 2.800000536050138, 12.759999530292044], res_norm=1.811e+01
2026-01-22 13:19:32,871 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:32,871 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:32,888 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,045 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,067 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,113 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,134 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,178 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,198 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,241 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,260 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,305 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,324 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,367 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,388 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,432 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,451 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,497 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,516 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,558 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:33,580 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,626 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:33,647 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:33,695 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:36,283 - WARNING - integration_test - Step 45: MPC solve failed
2026-01-22 13:19:36,283 - WARNING - integration_test -   Consecutive MPC failures: 6/15
2026-01-22 13:19:36,661 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.480)
2026-01-22 13:19:36,661 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:36,661 - INFO - integration_test - === Applying control at step 45 ===
2026-01-22 13:19:36,661 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:36,661 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:36,661 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:36,661 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:36,662 - INFO - integration_test - Step 45 completed in 4.020s
2026-01-22 13:19:36,727 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-22 13:19:36,732 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.62505655  4.714356    0.12609594  2.80000054 12.75999953]
2026-01-22 13:19:36,733 - DEBUG - integration_test - Step 46: Using propagated spline 12.7600 (close to path, dist=0.634m, drift=0.064m)
2026-01-22 13:19:36,733 - DEBUG - integration_test -   Set spline state to 12.7600
2026-01-22 13:19:36,736 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:36,838 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.625, 4.714), path_start=(0.000, 0.000), dist=12.545m
2026-01-22 13:19:36,838 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.545m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:36,838 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-22 13:19:36,942 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:36,967 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:36,967 - INFO - integration_test - Warmstart k=0: x0=11.625056550352992 , y0=4.714355996019946 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=12.759999530292044 , a0=0.0 , w0=0.0
2026-01-22 13:19:36,967 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:36,968 - INFO - integration_test - Dyn residual k=0: pred=[11.90283352553026, 4.749569375297976, 0.12609593734579275, 2.800000536050138, 13.039999583897057], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.90283352553026, 4.749569375297976, 0.12609593734579275, 2.800000536050138, 13.039999583897057], res_norm=1.850e+01
2026-01-22 13:19:36,969 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:36,970 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:36,986 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,184 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,205 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,248 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,270 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,314 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,334 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,379 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,399 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,441 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,460 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,504 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,524 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,566 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,589 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,639 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,659 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,703 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:37,723 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,763 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:37,783 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:37,825 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:40,527 - WARNING - integration_test - Step 46: MPC solve failed
2026-01-22 13:19:40,527 - WARNING - integration_test -   Consecutive MPC failures: 7/15
2026-01-22 13:19:40,719 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.760)
2026-01-22 13:19:40,719 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:40,719 - INFO - integration_test - === Applying control at step 46 ===
2026-01-22 13:19:40,719 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:40,719 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:40,719 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:40,719 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:40,721 - INFO - integration_test - Step 46 completed in 3.989s
2026-01-22 13:19:40,785 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-22 13:19:40,792 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.90283353  4.74956938  0.12609594  2.80000054 13.03999958]
2026-01-22 13:19:40,792 - DEBUG - integration_test - Step 47: Using propagated spline 13.0400 (close to path, dist=0.702m, drift=0.344m)
2026-01-22 13:19:40,792 - DEBUG - integration_test -   Set spline state to 13.0400
2026-01-22 13:19:40,796 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:40,893 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.903, 4.750), path_start=(0.000, 0.000), dist=12.815m
2026-01-22 13:19:40,893 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.815m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:40,893 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-22 13:19:40,983 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:41,006 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:41,006 - INFO - integration_test - Warmstart k=0: x0=11.90283352553026 , y0=4.749569375297976 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=13.039999583897057 , a0=0.0 , w0=0.0
2026-01-22 13:19:41,006 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:41,007 - INFO - integration_test - Dyn residual k=0: pred=[12.180610500707528, 4.784782754576006, 0.12609593734579275, 2.800000536050138, 13.31999963750207], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.180610500707528, 4.784782754576006, 0.12609593734579275, 2.800000536050138, 13.31999963750207], res_norm=1.888e+01
2026-01-22 13:19:41,008 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:41,008 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:41,023 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,186 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,206 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,247 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,267 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,314 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,335 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,377 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,397 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,438 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,457 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,498 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,516 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,559 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,578 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,620 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,638 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,681 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:41,700 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,741 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:41,759 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:41,799 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:44,280 - WARNING - integration_test - Step 47: MPC solve failed
2026-01-22 13:19:44,280 - WARNING - integration_test -   Consecutive MPC failures: 8/15
2026-01-22 13:19:44,626 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.040)
2026-01-22 13:19:44,626 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:44,626 - INFO - integration_test - === Applying control at step 47 ===
2026-01-22 13:19:44,626 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:44,627 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:44,627 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:44,627 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:44,628 - INFO - integration_test - Step 47 completed in 3.836s
2026-01-22 13:19:44,689 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-22 13:19:44,694 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.1806105   4.78478275  0.12609594  2.80000054 13.31999964]
2026-01-22 13:19:44,695 - DEBUG - integration_test - Step 48: Using propagated spline 13.3200 (close to path, dist=0.729m, drift=0.136m)
2026-01-22 13:19:44,695 - DEBUG - integration_test -   Set spline state to 13.3200
2026-01-22 13:19:44,698 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:44,799 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.181, 4.785), path_start=(0.000, 0.000), dist=13.087m
2026-01-22 13:19:44,799 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.087m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:44,799 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-22 13:19:44,906 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:44,932 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:44,932 - INFO - integration_test - Warmstart k=0: x0=12.180610500707528 , y0=4.784782754576006 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=13.31999963750207 , a0=0.0 , w0=0.0
2026-01-22 13:19:44,932 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:44,933 - INFO - integration_test - Dyn residual k=0: pred=[12.458387475884797, 4.819996133854036, 0.12609593734579275, 2.800000536050138, 13.599999691107083], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.458387475884797, 4.819996133854036, 0.12609593734579275, 2.800000536050138, 13.599999691107083], res_norm=1.927e+01
2026-01-22 13:19:44,934 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:44,935 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:44,951 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,115 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,136 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,180 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,202 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,246 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,269 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,314 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,336 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,381 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,403 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,450 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,471 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,517 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,539 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,584 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,606 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,651 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:45,672 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,716 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:45,735 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:45,781 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:48,407 - WARNING - integration_test - Step 48: MPC solve failed
2026-01-22 13:19:48,407 - WARNING - integration_test -   Consecutive MPC failures: 9/15
2026-01-22 13:19:48,574 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.320)
2026-01-22 13:19:48,574 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:48,574 - INFO - integration_test - === Applying control at step 48 ===
2026-01-22 13:19:48,574 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:48,574 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:48,574 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:48,574 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:48,575 - INFO - integration_test - Step 48 completed in 3.881s
2026-01-22 13:19:48,638 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-22 13:19:48,644 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.45838748  4.81999613  0.12609594  2.80000054 13.59999969]
2026-01-22 13:19:48,645 - DEBUG - integration_test - Step 49: Using propagated spline 13.6000 (close to path, dist=0.815m, drift=0.416m)
2026-01-22 13:19:48,645 - DEBUG - integration_test -   Set spline state to 13.6000
2026-01-22 13:19:48,648 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:48,760 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.458, 4.820), path_start=(0.000, 0.000), dist=13.358m
2026-01-22 13:19:48,760 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.358m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:48,760 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-22 13:19:48,859 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:48,883 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:48,883 - INFO - integration_test - Warmstart k=0: x0=12.458387475884797 , y0=4.819996133854036 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=13.599999691107083 , a0=0.0 , w0=0.0
2026-01-22 13:19:48,883 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:48,884 - INFO - integration_test - Dyn residual k=0: pred=[12.736164451062065, 4.855209513132066, 0.12609593734579275, 2.800000536050138, 13.879999744712096], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.736164451062065, 4.855209513132066, 0.12609593734579275, 2.800000536050138, 13.879999744712096], res_norm=1.965e+01
2026-01-22 13:19:48,885 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:48,885 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:48,901 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,069 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,091 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,134 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,155 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,198 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,218 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,264 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,285 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,328 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,349 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,394 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,415 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,465 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,486 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,528 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,551 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,595 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:49,615 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,660 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:49,681 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:49,724 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:52,426 - WARNING - integration_test - Step 49: MPC solve failed
2026-01-22 13:19:52,426 - WARNING - integration_test -   Consecutive MPC failures: 10/15
2026-01-22 13:19:52,898 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.600)
2026-01-22 13:19:52,898 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:52,898 - INFO - integration_test - === Applying control at step 49 ===
2026-01-22 13:19:52,898 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:52,898 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:52,898 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:52,898 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:52,899 - INFO - integration_test - Step 49 completed in 4.255s
2026-01-22 13:19:52,969 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-22 13:19:52,980 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.73616445  4.85520951  0.12609594  2.80000054 13.87999974]
2026-01-22 13:19:52,981 - DEBUG - integration_test - Step 50: Using propagated spline 13.8800 (close to path, dist=0.824m, drift=0.207m)
2026-01-22 13:19:52,981 - DEBUG - integration_test -   Set spline state to 13.8800
2026-01-22 13:19:52,986 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:53,098 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.736, 4.855), path_start=(0.000, 0.000), dist=13.630m
2026-01-22 13:19:53,098 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.630m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:53,098 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-22 13:19:53,202 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:53,228 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:53,229 - INFO - integration_test - Warmstart k=0: x0=12.736164451062065 , y0=4.855209513132066 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=13.879999744712096 , a0=0.0 , w0=0.0
2026-01-22 13:19:53,229 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:53,230 - INFO - integration_test - Dyn residual k=0: pred=[13.013941426239333, 4.890422892410096, 0.12609593734579275, 2.800000536050138, 14.15999979831711], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.013941426239333, 4.890422892410096, 0.12609593734579275, 2.800000536050138, 14.15999979831711], res_norm=2.004e+01
2026-01-22 13:19:53,230 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:53,231 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:53,248 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,424 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,444 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,488 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,509 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,553 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,573 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,617 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,637 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,686 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,708 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,757 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,779 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,826 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,846 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,892 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,912 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:53,958 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:53,978 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:54,022 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:54,042 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:54,085 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:57,041 - WARNING - integration_test - Step 50: MPC solve failed
2026-01-22 13:19:57,041 - WARNING - integration_test -   Consecutive MPC failures: 11/15
2026-01-22 13:19:57,266 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=13.880)
2026-01-22 13:19:57,266 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:19:57,267 - INFO - integration_test - === Applying control at step 50 ===
2026-01-22 13:19:57,267 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:57,267 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:19:57,267 - INFO - integration_test -   Planner output success: False
2026-01-22 13:19:57,267 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:19:57,268 - INFO - integration_test - Step 50 completed in 4.288s
2026-01-22 13:19:57,333 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-22 13:19:57,340 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.01394143  4.89042289  0.12609594  2.80000054 14.1599998 ]
2026-01-22 13:19:57,340 - DEBUG - integration_test - Step 51: Using propagated spline 14.1600 (close to path, dist=0.886m, drift=0.001m)
2026-01-22 13:19:57,341 - DEBUG - integration_test -   Set spline state to 14.1600
2026-01-22 13:19:57,344 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:57,443 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.014, 4.890), path_start=(0.000, 0.000), dist=13.902m
2026-01-22 13:19:57,443 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=13.902m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:19:57,443 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-22 13:19:57,540 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:19:57,565 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:19:57,565 - INFO - integration_test - Warmstart k=0: x0=13.013941426239333 , y0=4.890422892410096 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=14.15999979831711 , a0=0.0 , w0=0.0
2026-01-22 13:19:57,565 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:19:57,566 - INFO - integration_test - Dyn residual k=0: pred=[13.2917184014166, 4.925636271688126, 0.12609593734579275, 2.800000536050138, 14.439999851922122], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.2917184014166, 4.925636271688126, 0.12609593734579275, 2.800000536050138, 14.439999851922122], res_norm=2.043e+01
2026-01-22 13:19:57,567 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:57,568 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:19:57,583 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:57,749 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:57,769 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:57,813 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:57,833 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:57,876 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:57,898 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:57,953 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:57,979 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:58,035 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:58,060 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:58,113 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:58,135 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:58,182 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:58,204 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:58,249 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:58,271 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:58,320 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:19:58,343 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:58,391 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:19:58,415 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:19:58,464 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:01,120 - WARNING - integration_test - Step 51: MPC solve failed
2026-01-22 13:20:01,120 - WARNING - integration_test -   Consecutive MPC failures: 12/15
2026-01-22 13:20:01,545 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.160)
2026-01-22 13:20:01,546 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:01,546 - INFO - integration_test - === Applying control at step 51 ===
2026-01-22 13:20:01,546 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:01,546 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:01,546 - INFO - integration_test -   Planner output success: False
2026-01-22 13:20:01,546 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:01,548 - INFO - integration_test - Step 51 completed in 4.209s
2026-01-22 13:20:01,613 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-22 13:20:01,618 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.2917184   4.92563627  0.12609594  2.80000054 14.43999985]
2026-01-22 13:20:01,619 - DEBUG - integration_test - Step 52: Using propagated spline 14.4400 (close to path, dist=0.915m, drift=0.279m)
2026-01-22 13:20:01,619 - DEBUG - integration_test -   Set spline state to 14.4400
2026-01-22 13:20:01,623 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:01,722 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.292, 4.926), path_start=(0.000, 0.000), dist=14.175m
2026-01-22 13:20:01,722 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.175m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:01,722 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-22 13:20:01,823 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:01,850 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:01,850 - INFO - integration_test - Warmstart k=0: x0=13.2917184014166 , y0=4.925636271688126 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=14.439999851922122 , a0=0.0 , w0=0.0
2026-01-22 13:20:01,850 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:01,851 - INFO - integration_test - Dyn residual k=0: pred=[13.569495376593869, 4.960849650966156, 0.12609593734579275, 2.800000536050138, 14.719999905527136], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.569495376593869, 4.960849650966156, 0.12609593734579275, 2.800000536050138, 14.719999905527136], res_norm=2.082e+01
2026-01-22 13:20:01,852 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:01,852 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:01,867 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,031 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,051 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,097 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,117 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,161 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,182 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,228 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,247 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,293 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,312 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,358 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,379 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,422 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,442 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,487 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,508 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,557 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:02,577 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,618 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:02,637 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:02,677 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:05,185 - WARNING - integration_test - Step 52: MPC solve failed
2026-01-22 13:20:05,185 - WARNING - integration_test -   Consecutive MPC failures: 13/15
2026-01-22 13:20:05,371 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.440)
2026-01-22 13:20:05,371 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:05,371 - INFO - integration_test - === Applying control at step 52 ===
2026-01-22 13:20:05,371 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:05,371 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:05,371 - INFO - integration_test -   Planner output success: False
2026-01-22 13:20:05,371 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:05,372 - INFO - integration_test - Step 52 completed in 3.754s
2026-01-22 13:20:05,435 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-22 13:20:05,441 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.56949538  4.96084965  0.12609594  2.80000054 14.71999991]
2026-01-22 13:20:05,441 - DEBUG - integration_test - Step 53: Using propagated spline 14.7200 (close to path, dist=0.957m, drift=0.071m)
2026-01-22 13:20:05,441 - DEBUG - integration_test -   Set spline state to 14.7200
2026-01-22 13:20:05,445 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:05,546 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.569, 4.961), path_start=(0.000, 0.000), dist=14.448m
2026-01-22 13:20:05,546 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.448m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:05,546 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-22 13:20:05,636 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:05,659 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:05,660 - INFO - integration_test - Warmstart k=0: x0=13.569495376593869 , y0=4.960849650966156 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=14.719999905527136 , a0=0.0 , w0=0.0
2026-01-22 13:20:05,660 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:05,660 - INFO - integration_test - Dyn residual k=0: pred=[13.847272351771137, 4.996063030244186, 0.12609593734579275, 2.800000536050138, 14.999999959132149], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.847272351771137, 4.996063030244186, 0.12609593734579275, 2.800000536050138, 14.999999959132149], res_norm=2.120e+01
2026-01-22 13:20:05,661 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:05,662 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:05,677 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:05,832 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:05,852 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:05,895 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:05,915 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:05,962 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:05,982 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:06,028 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:06,049 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:06,093 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:06,122 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:06,171 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:06,192 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:06,239 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:06,265 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:06,317 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:06,339 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:06,388 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:06,412 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:06,458 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:06,479 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:06,523 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:09,542 - WARNING - integration_test - Step 53: MPC solve failed
2026-01-22 13:20:09,542 - WARNING - integration_test -   Consecutive MPC failures: 14/15
2026-01-22 13:20:09,984 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=14.720)
2026-01-22 13:20:09,984 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:09,984 - INFO - integration_test - === Applying control at step 53 ===
2026-01-22 13:20:09,984 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:09,984 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:09,984 - INFO - integration_test -   Planner output success: False
2026-01-22 13:20:09,985 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:09,986 - INFO - integration_test - Step 53 completed in 4.545s
2026-01-22 13:20:10,050 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-22 13:20:10,056 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.84727235  4.99606303  0.12609594  2.80000054 14.99999996]
2026-01-22 13:20:10,057 - DEBUG - integration_test - Step 54: Using propagated spline 15.0000 (close to path, dist=1.002m, drift=0.351m)
2026-01-22 13:20:10,057 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-22 13:20:10,061 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:10,161 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.847, 4.996), path_start=(0.000, 0.000), dist=14.721m
2026-01-22 13:20:10,161 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=14.721m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:10,161 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-22 13:20:10,258 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:10,285 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:10,285 - INFO - integration_test - Warmstart k=0: x0=13.847272351771137 , y0=4.996063030244186 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=14.999999959132149 , a0=0.0 , w0=0.0
2026-01-22 13:20:10,285 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:10,286 - INFO - integration_test - Dyn residual k=0: pred=[14.125049326948405, 5.031276409522216, 0.12609593734579275, 2.800000536050138, 15.280000012737162], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.125049326948405, 5.031276409522216, 0.12609593734579275, 2.800000536050138, 15.280000012737162], res_norm=2.159e+01
2026-01-22 13:20:10,287 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:10,288 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:10,305 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,474 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,493 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,535 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,555 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,601 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,622 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,668 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,687 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,728 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,747 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,790 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,809 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,851 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,870 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,911 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,931 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:10,973 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:10,992 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:11,033 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:11,052 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:11,092 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:13,720 - WARNING - integration_test - Step 54: MPC solve failed
2026-01-22 13:20:13,720 - WARNING - integration_test -   Consecutive MPC failures: 15/15
2026-01-22 13:20:13,720 - WARNING - integration_test - Step 54: Checking if vehicle should continue despite 15 consecutive failures...
2026-01-22 13:20:13,720 - ERROR - integration_test - Max consecutive MPC failures (15) reached. No successful solve in last 15 attempts. Terminating test early at step 54.
2026-01-22 13:20:13,899 - INFO - integration_test - Step 300: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-22 13:20:13,899 - DEBUG - integration_test - Step 300: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:13,899 - INFO - integration_test - === Applying control at step 300 ===
2026-01-22 13:20:13,899 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:13,899 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:13,899 - INFO - integration_test -   Planner output success: False
2026-01-22 13:20:13,899 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:13,901 - INFO - integration_test - Step 300 completed in 3.845s
2026-01-22 13:20:13,964 - INFO - integration_test - Step 301 (contouring until path end)
2026-01-22 13:20:13,969 - DEBUG - integration_test - Syncing planner state at step 301: vehicle_state=[14.12504933  5.03127641  0.12609594  2.80000054 15.28000001]
2026-01-22 13:20:13,970 - DEBUG - integration_test - Step 301: Using propagated spline 15.2800 (close to path, dist=1.026m, drift=0.143m)
2026-01-22 13:20:13,970 - DEBUG - integration_test -   Set spline state to 15.2800
2026-01-22 13:20:13,974 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:14,071 - DEBUG - integration_test - Step 301: Checking path alignment: vehicle=(14.125, 5.031), path_start=(0.000, 0.000), dist=14.994m
2026-01-22 13:20:14,071 - WARNING - integration_test - Step 301: Vehicle is far from path start (dist=14.994m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:14,071 - INFO - integration_test - === Calling planner.solve_mpc() at step 301 ===
2026-01-22 13:20:14,160 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:14,183 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:14,183 - INFO - integration_test - Warmstart k=0: x0=14.125049326948405 , y0=5.031276409522216 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=15.280000012737162 , a0=0.0 , w0=0.0
2026-01-22 13:20:14,183 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:14,184 - INFO - integration_test - Dyn residual k=0: pred=[14.402826302125673, 5.066489788800246, 0.12609593734579275, 2.800000536050138, 15.560000066342175], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.402826302125673, 5.066489788800246, 0.12609593734579275, 2.800000536050138, 15.560000066342175], res_norm=2.198e+01
2026-01-22 13:20:14,184 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:14,185 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:14,200 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,367 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,388 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,434 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,456 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,500 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,520 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,563 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,583 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,627 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,647 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,690 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,710 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,755 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,779 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,831 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,855 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,905 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:14,928 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:14,976 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:14,997 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:15,040 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:17,666 - WARNING - integration_test - Step 301: MPC solve failed
2026-01-22 13:20:17,666 - WARNING - integration_test -   Consecutive MPC failures: 16/15
2026-01-22 13:20:17,666 - WARNING - integration_test - Step 301: Checking if vehicle should continue despite 16 consecutive failures...
2026-01-22 13:20:17,666 - ERROR - integration_test - Max consecutive MPC failures (15) reached. No successful solve in last 15 attempts. Terminating test early at step 301.
2026-01-22 13:20:17,874 - INFO - integration_test - Step 300: Computed 6 numeric contouring constraints for visualization (s=15.280)
2026-01-22 13:20:17,874 - DEBUG - integration_test - Step 300: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:17,874 - INFO - integration_test - === Applying control at step 300 ===
2026-01-22 13:20:17,874 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:17,874 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:17,874 - INFO - integration_test -   Planner output success: False
2026-01-22 13:20:17,874 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:17,876 - INFO - integration_test - Step 300 completed in 3.907s
2026-01-22 13:20:17,945 - INFO - integration_test - Step 301 (contouring until path end)
2026-01-22 13:20:17,956 - DEBUG - integration_test - Syncing planner state at step 301: vehicle_state=[14.4028263   5.06648979  0.12609594  2.80000054 15.56000007]
2026-01-22 13:20:17,956 - DEBUG - integration_test - Step 301: Using propagated spline 15.5600 (close to path, dist=1.084m, drift=0.423m)
2026-01-22 13:20:17,956 - DEBUG - integration_test -   Set spline state to 15.5600
2026-01-22 13:20:17,962 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:18,067 - DEBUG - integration_test - Step 301: Checking path alignment: vehicle=(14.403, 5.066), path_start=(0.000, 0.000), dist=15.268m
2026-01-22 13:20:18,067 - WARNING - integration_test - Step 301: Vehicle is far from path start (dist=15.268m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:18,067 - INFO - integration_test - === Calling planner.solve_mpc() at step 301 ===
2026-01-22 13:20:18,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:18,471 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:18,471 - INFO - integration_test - Warmstart k=0: x0=14.402826302125673 , y0=5.066489788800246 , psi0=0.12609593734579275 , v0=2.800000536050138 , spline0=15.560000066342175 , a0=0.0 , w0=0.0
2026-01-22 13:20:18,471 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:18,472 - INFO - integration_test - Dyn residual k=0: pred=[14.680603277302941, 5.101703168078276, 0.12609593734579275, 2.800000536050138, 15.840000119947188], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.680603277302941, 5.101703168078276, 0.12609593734579275, 2.800000536050138, 15.840000119947188], res_norm=2.237e+01
2026-01-22 13:20:18,473 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:18,474 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:18,493 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:18,661 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:18,683 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:18,731 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:18,752 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:18,798 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:18,820 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:18,864 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:18,886 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:18,933 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:18,954 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:19,003 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:19,025 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:19,073 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:19,096 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:19,140 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:19,160 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:19,205 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:19,225 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:19,266 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:19,288 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:19,329 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:20,455 - INFO - integration_test - Step 301: MPC solve successful
2026-01-22 13:20:20,659 - INFO - integration_test - Step 301: Computed 6 numeric contouring constraints for visualization (s=15.560)
2026-01-22 13:20:20,659 - DEBUG - integration_test - Step 301: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:20,659 - INFO - integration_test - === Applying control at step 301 ===
2026-01-22 13:20:20,659 - INFO - integration_test -   Control dict from planner: {'a': 1.99999493287612, 'w': 0.7999999911010585}
2026-01-22 13:20:20,659 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:20,659 - INFO - integration_test -   Planner output success: True
2026-01-22 13:20:20,661 - INFO - integration_test - Step 301 completed in 2.705s
2026-01-22 13:20:20,729 - INFO - integration_test - Step 302 (contouring until path end)
2026-01-22 13:20:20,738 - DEBUG - integration_test - Syncing planner state at step 302: vehicle_state=[14.68873698  5.11455512  0.20609594  3.00000003 15.86000007]
2026-01-22 13:20:20,739 - DEBUG - integration_test - Step 302: Using propagated spline 15.8600 (close to path, dist=1.082m, drift=0.234m)
2026-01-22 13:20:20,739 - DEBUG - integration_test -   Set spline state to 15.8600
2026-01-22 13:20:20,744 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:20,845 - DEBUG - integration_test - Step 302: Checking path alignment: vehicle=(14.689, 5.115), path_start=(0.000, 0.000), dist=15.554m
2026-01-22 13:20:20,845 - WARNING - integration_test - Step 302: Vehicle is far from path start (dist=15.554m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:20,845 - INFO - integration_test - === Calling planner.solve_mpc() at step 302 ===
2026-01-22 13:20:20,946 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:20,977 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:20,977 - INFO - integration_test - Warmstart k=0: x0=14.688736980926969 , y0=5.114555124851672 , psi0=0.20609593645589858 , v0=3.00000002933775 , spline0=15.86000006927595 , a0=0.0 , w0=0.0
2026-01-22 13:20:20,977 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:20,978 - INFO - integration_test - Dyn residual k=0: pred=[14.982388173777291, 5.175947133271719, 0.20609593645589858, 3.00000002933775, 16.160000072209726], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.982388173777291, 5.175947133271719, 0.20609593645589858, 3.00000002933775, 16.160000072209726], res_norm=2.284e+01
2026-01-22 13:20:20,979 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:20,979 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:20,996 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,181 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,203 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,252 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,274 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,322 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,344 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,394 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,415 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,459 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,483 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,527 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,548 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,594 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,615 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,658 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,681 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,725 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:21,747 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,791 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:21,810 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:21,852 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:24,564 - WARNING - integration_test - Step 302: MPC solve failed
2026-01-22 13:20:24,564 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-22 13:20:24,810 - INFO - integration_test - Step 302: Computed 6 numeric contouring constraints for visualization (s=15.860)
2026-01-22 13:20:24,810 - DEBUG - integration_test - Step 302: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:24,810 - INFO - integration_test - === Applying control at step 302 ===
2026-01-22 13:20:24,811 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:24,811 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:24,811 - INFO - integration_test -   Planner output success: False
2026-01-22 13:20:24,811 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:24,812 - INFO - integration_test - Step 302 completed in 4.074s
2026-01-22 13:20:24,892 - INFO - integration_test - Step 303 (contouring until path end)
2026-01-22 13:20:24,893 - DEBUG - integration_test - Syncing planner state at step 303: vehicle_state=[14.98238817  5.17594713  0.20609594  3.00000003 16.16000007]
2026-01-22 13:20:24,894 - DEBUG - integration_test - Step 303: Using propagated spline 16.1600 (close to path, dist=1.103m, drift=0.046m)
2026-01-22 13:20:24,894 - DEBUG - integration_test -   Set spline state to 16.1600
2026-01-22 13:20:24,900 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:25,006 - DEBUG - integration_test - Step 303: Checking path alignment: vehicle=(14.982, 5.176), path_start=(0.000, 0.000), dist=15.851m
2026-01-22 13:20:25,006 - WARNING - integration_test - Step 303: Vehicle is far from path start (dist=15.851m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:25,006 - INFO - integration_test - === Calling planner.solve_mpc() at step 303 ===
2026-01-22 13:20:25,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:25,133 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:25,133 - INFO - integration_test - Warmstart k=0: x0=14.982388173777291 , y0=5.175947133271719 , psi0=0.20609593645589858 , v0=3.00000002933775 , spline0=16.160000072209726 , a0=0.0 , w0=0.0
2026-01-22 13:20:25,133 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:25,134 - INFO - integration_test - Dyn residual k=0: pred=[15.276039366627614, 5.237339141691765, 0.20609593645589858, 3.00000002933775, 16.4600000751435], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.276039366627614, 5.237339141691765, 0.20609593645589858, 3.00000002933775, 16.4600000751435], res_norm=2.325e+01
2026-01-22 13:20:25,134 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:25,135 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:25,150 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,321 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,343 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,395 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,417 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,461 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,483 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,531 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,554 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,601 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,625 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,673 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,695 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,739 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,759 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,804 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,824 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,875 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:25,897 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:25,946 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:25,968 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:26,012 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:28,770 - WARNING - integration_test - Step 303: MPC solve failed
2026-01-22 13:20:28,770 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-22 13:20:29,238 - INFO - integration_test - Step 303: Computed 6 numeric contouring constraints for visualization (s=16.160)
2026-01-22 13:20:29,238 - DEBUG - integration_test - Step 303: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:29,238 - INFO - integration_test - === Applying control at step 303 ===
2026-01-22 13:20:29,238 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:29,238 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:29,238 - INFO - integration_test -   Planner output success: False
2026-01-22 13:20:29,238 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:29,240 - INFO - integration_test - Step 303 completed in 4.346s
2026-01-22 13:20:29,314 - INFO - integration_test - Step 304 (contouring until path end)
2026-01-22 13:20:29,325 - DEBUG - integration_test - Syncing planner state at step 304: vehicle_state=[15.27603937  5.23733914  0.20609594  3.00000003 16.46000008]
2026-01-22 13:20:29,325 - DEBUG - integration_test - Step 304: Using propagated spline 16.4600 (close to path, dist=1.104m, drift=0.346m)
2026-01-22 13:20:29,325 - DEBUG - integration_test -   Set spline state to 16.4600
2026-01-22 13:20:29,332 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:29,476 - DEBUG - integration_test - Step 304: Checking path alignment: vehicle=(15.276, 5.237), path_start=(0.000, 0.000), dist=16.149m
2026-01-22 13:20:29,477 - WARNING - integration_test - Step 304: Vehicle is far from path start (dist=16.149m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:29,477 - INFO - integration_test - === Calling planner.solve_mpc() at step 304 ===
2026-01-22 13:20:29,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:29,614 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:29,614 - INFO - integration_test - Warmstart k=0: x0=15.276039366627614 , y0=5.237339141691765 , psi0=0.20609593645589858 , v0=3.00000002933775 , spline0=16.4600000751435 , a0=0.0 , w0=0.0
2026-01-22 13:20:29,615 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:29,616 - INFO - integration_test - Dyn residual k=0: pred=[15.569690559477937, 5.298731150111812, 0.20609593645589858, 3.00000002933775, 16.760000078077276], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.569690559477937, 5.298731150111812, 0.20609593645589858, 3.00000002933775, 16.760000078077276], res_norm=2.367e+01
2026-01-22 13:20:29,616 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:29,617 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:29,634 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:29,809 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:29,830 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:29,874 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:29,896 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:29,943 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:29,965 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:30,013 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:30,035 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:30,086 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:30,110 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:30,157 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:30,178 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:30,223 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:30,245 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:30,293 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:30,317 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:30,365 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:30,387 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:30,431 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:30,451 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:30,494 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:32,998 - WARNING - integration_test - Step 304: MPC solve failed
2026-01-22 13:20:32,998 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-22 13:20:33,257 - INFO - integration_test - Step 304: Computed 6 numeric contouring constraints for visualization (s=16.460)
2026-01-22 13:20:33,257 - DEBUG - integration_test - Step 304: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:33,257 - INFO - integration_test - === Applying control at step 304 ===
2026-01-22 13:20:33,257 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:33,257 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:33,257 - INFO - integration_test -   Planner output success: False
2026-01-22 13:20:33,257 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:20:33,258 - INFO - integration_test - Step 304 completed in 3.934s
2026-01-22 13:20:33,331 - INFO - integration_test - Step 305 (contouring until path end)
2026-01-22 13:20:33,341 - DEBUG - integration_test - Syncing planner state at step 305: vehicle_state=[15.56969056  5.29873115  0.20609594  3.00000003 16.76000008]
2026-01-22 13:20:33,342 - DEBUG - integration_test - Step 305: Using propagated spline 16.7600 (close to path, dist=1.103m, drift=0.158m)
2026-01-22 13:20:33,342 - DEBUG - integration_test -   Set spline state to 16.7600
2026-01-22 13:20:33,348 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:33,455 - DEBUG - integration_test - Step 305: Checking path alignment: vehicle=(15.570, 5.299), path_start=(0.000, 0.000), dist=16.447m
2026-01-22 13:20:33,456 - WARNING - integration_test - Step 305: Vehicle is far from path start (dist=16.447m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:33,456 - INFO - integration_test - === Calling planner.solve_mpc() at step 305 ===
2026-01-22 13:20:33,550 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:33,574 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:33,574 - INFO - integration_test - Warmstart k=0: x0=15.569690559477937 , y0=5.298731150111812 , psi0=0.20609593645589858 , v0=3.00000002933775 , spline0=16.760000078077276 , a0=0.0 , w0=0.0
2026-01-22 13:20:33,574 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:33,575 - INFO - integration_test - Dyn residual k=0: pred=[15.86334175232826, 5.3601231585318585, 0.20609593645589858, 3.00000002933775, 17.06000008101105], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.86334175232826, 5.3601231585318585, 0.20609593645589858, 3.00000002933775, 17.06000008101105], res_norm=2.409e+01
2026-01-22 13:20:33,576 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:33,576 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:33,592 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:33,771 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:33,792 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:33,841 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:33,863 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:33,911 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:33,932 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:33,978 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:33,999 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:34,047 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:34,069 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:34,115 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:34,137 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:34,181 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:34,202 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:34,248 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:34,269 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:34,315 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:34,337 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:34,380 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:34,400 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:34,442 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:38,497 - INFO - integration_test - Step 305: MPC solve successful
2026-01-22 13:20:38,785 - INFO - integration_test - Step 305: Computed 6 numeric contouring constraints for visualization (s=16.760)
2026-01-22 13:20:38,785 - DEBUG - integration_test - Step 305: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:20:38,785 - INFO - integration_test - === Applying control at step 305 ===
2026-01-22 13:20:38,785 - INFO - integration_test -   Control dict from planner: {'a': -6.384019892449003e-07, 'w': 0.7999989290287841}
2026-01-22 13:20:38,785 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:20:38,786 - INFO - integration_test -   Planner output success: True
2026-01-22 13:20:38,787 - INFO - integration_test - Step 305 completed in 5.446s
2026-01-22 13:20:38,852 - INFO - integration_test - Step 306 (contouring until path end)
2026-01-22 13:20:38,860 - DEBUG - integration_test - Syncing planner state at step 306: vehicle_state=[15.86057426  5.37179746  0.28609583  2.99999997 17.06000007]
2026-01-22 13:20:38,861 - DEBUG - integration_test - Step 306: Using propagated spline 17.0600 (close to path, dist=1.117m, drift=0.458m)
2026-01-22 13:20:38,861 - DEBUG - integration_test -   Set spline state to 17.0600
2026-01-22 13:20:38,866 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:39,206 - DEBUG - integration_test - Step 306: Checking path alignment: vehicle=(15.861, 5.372), path_start=(0.000, 0.000), dist=16.746m
2026-01-22 13:20:39,206 - WARNING - integration_test - Step 306: Vehicle is far from path start (dist=16.746m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:20:39,206 - INFO - integration_test - === Calling planner.solve_mpc() at step 306 ===
2026-01-22 13:20:39,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:20:39,324 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:20:39,325 - INFO - integration_test - Warmstart k=0: x0=15.860574258860332 , y0=5.371797463862775 , psi0=0.286095829358777 , v0=2.999999965497551 , spline0=17.06000007462703 , a0=0.0 , w0=0.0
2026-01-22 13:20:39,325 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:20:39,325 - INFO - integration_test - Dyn residual k=0: pred=[16.148380148328894, 5.456460135194728, 0.286095829358777, 2.999999965497551, 17.360000071176785], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.148380148328894, 5.456460135194728, 0.286095829358777, 2.999999965497551, 17.360000071176785], res_norm=2.452e+01
2026-01-22 13:20:39,326 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:39,327 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:20:39,342 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:39,521 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:39,542 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:39,589 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:39,611 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:39,656 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:39,678 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:39,725 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:39,750 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:39,794 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:39,815 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:39,857 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:39,879 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:39,921 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:39,942 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:39,984 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:40,003 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:40,060 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:20:40,082 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:40,150 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:20:40,177 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:20:40,233 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:04,899 - WARNING - integration_test - Step 306: MPC solve failed
2026-01-22 13:21:04,899 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-22 13:21:05,233 - INFO - integration_test - Step 306: Computed 6 numeric contouring constraints for visualization (s=17.060)
2026-01-22 13:21:05,233 - DEBUG - integration_test - Step 306: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:05,234 - INFO - integration_test - === Applying control at step 306 ===
2026-01-22 13:21:05,234 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:21:05,234 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:05,234 - INFO - integration_test -   Planner output success: False
2026-01-22 13:21:05,234 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:21:05,235 - INFO - integration_test - Step 306 completed in 26.375s
2026-01-22 13:21:05,309 - INFO - integration_test - Step 307 (contouring until path end)
2026-01-22 13:21:05,320 - DEBUG - integration_test - Syncing planner state at step 307: vehicle_state=[16.14838015  5.45646014  0.28609583  2.99999997 17.36000007]
2026-01-22 13:21:05,320 - DEBUG - integration_test - Step 307: Using propagated spline 17.3600 (close to path, dist=1.068m, drift=0.269m)
2026-01-22 13:21:05,321 - DEBUG - integration_test -   Set spline state to 17.3600
2026-01-22 13:21:05,327 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:05,433 - DEBUG - integration_test - Step 307: Checking path alignment: vehicle=(16.148, 5.456), path_start=(0.000, 0.000), dist=17.045m
2026-01-22 13:21:05,433 - WARNING - integration_test - Step 307: Vehicle is far from path start (dist=17.045m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:05,433 - INFO - integration_test - === Calling planner.solve_mpc() at step 307 ===
2026-01-22 13:21:05,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:05,561 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:05,561 - INFO - integration_test - Warmstart k=0: x0=16.148380148328894 , y0=5.456460135194728 , psi0=0.286095829358777 , v0=2.999999965497551 , spline0=17.360000071176785 , a0=0.0 , w0=0.0
2026-01-22 13:21:05,561 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:05,562 - INFO - integration_test - Dyn residual k=0: pred=[16.436186037797455, 5.5411228065266815, 0.286095829358777, 2.999999965497551, 17.66000006772654], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.436186037797455, 5.5411228065266815, 0.286095829358777, 2.999999965497551, 17.66000006772654], res_norm=2.494e+01
2026-01-22 13:21:05,563 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:05,564 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:05,579 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:05,750 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:05,771 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:05,818 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:05,839 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:05,886 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:05,916 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:05,983 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:06,007 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:06,054 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:06,073 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:06,116 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:06,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:06,180 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:06,200 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:06,245 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:06,264 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:06,306 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:06,328 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:06,369 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:06,388 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:06,428 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:27,724 - WARNING - integration_test - Step 307: MPC solve failed
2026-01-22 13:21:27,724 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-22 13:21:27,946 - INFO - integration_test - Step 307: Computed 6 numeric contouring constraints for visualization (s=17.360)
2026-01-22 13:21:27,946 - DEBUG - integration_test - Step 307: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:27,946 - INFO - integration_test - === Applying control at step 307 ===
2026-01-22 13:21:27,946 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:21:27,946 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:27,946 - INFO - integration_test -   Planner output success: False
2026-01-22 13:21:27,946 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:21:27,948 - INFO - integration_test - Step 307 completed in 22.628s
2026-01-22 13:21:28,015 - INFO - integration_test - Step 308 (contouring until path end)
2026-01-22 13:21:28,023 - DEBUG - integration_test - Syncing planner state at step 308: vehicle_state=[16.43618604  5.54112281  0.28609583  2.99999997 17.66000007]
2026-01-22 13:21:28,024 - DEBUG - integration_test - Step 308: Using propagated spline 17.6600 (close to path, dist=1.054m, drift=0.081m)
2026-01-22 13:21:28,024 - DEBUG - integration_test -   Set spline state to 17.6600
2026-01-22 13:21:28,029 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:28,127 - DEBUG - integration_test - Step 308: Checking path alignment: vehicle=(16.436, 5.541), path_start=(0.000, 0.000), dist=17.345m
2026-01-22 13:21:28,127 - WARNING - integration_test - Step 308: Vehicle is far from path start (dist=17.345m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:28,127 - INFO - integration_test - === Calling planner.solve_mpc() at step 308 ===
2026-01-22 13:21:28,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:28,241 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:28,241 - INFO - integration_test - Warmstart k=0: x0=16.436186037797455 , y0=5.5411228065266815 , psi0=0.286095829358777 , v0=2.999999965497551 , spline0=17.66000006772654 , a0=0.0 , w0=0.0
2026-01-22 13:21:28,241 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:28,242 - INFO - integration_test - Dyn residual k=0: pred=[16.723991927266017, 5.625785477858635, 0.286095829358777, 2.999999965497551, 17.960000064276294], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.723991927266017, 5.625785477858635, 0.286095829358777, 2.999999965497551, 17.960000064276294], res_norm=2.536e+01
2026-01-22 13:21:28,243 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:28,244 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:28,258 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,418 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,438 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,480 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,500 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,543 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,562 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,606 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,626 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,668 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,688 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,729 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,749 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,791 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,811 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,853 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,873 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,915 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:28,935 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:28,976 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:28,995 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:29,035 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:30,608 - INFO - integration_test - Step 308: MPC solve successful
2026-01-22 13:21:31,175 - INFO - integration_test - Step 308: Computed 6 numeric contouring constraints for visualization (s=17.660)
2026-01-22 13:21:31,176 - DEBUG - integration_test - Step 308: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:31,176 - INFO - integration_test - === Applying control at step 308 ===
2026-01-22 13:21:31,176 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019932834, 'w': 0.8000000095387005}
2026-01-22 13:21:31,176 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:31,176 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:31,177 - INFO - integration_test - Step 308 completed in 3.154s
2026-01-22 13:21:31,243 - INFO - integration_test - Step 309 (contouring until path end)
2026-01-22 13:21:31,249 - DEBUG - integration_test - Syncing planner state at step 309: vehicle_state=[16.71087256  5.63387241  0.36609583  2.79999996 17.94000006]
2026-01-22 13:21:31,249 - DEBUG - integration_test - Step 309: Using propagated spline 17.9400 (close to path, dist=1.011m, drift=0.361m)
2026-01-22 13:21:31,249 - DEBUG - integration_test -   Set spline state to 17.9400
2026-01-22 13:21:31,255 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:31,351 - DEBUG - integration_test - Step 309: Checking path alignment: vehicle=(16.711, 5.634), path_start=(0.000, 0.000), dist=17.635m
2026-01-22 13:21:31,351 - WARNING - integration_test - Step 309: Vehicle is far from path start (dist=17.635m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:31,352 - INFO - integration_test - === Calling planner.solve_mpc() at step 309 ===
2026-01-22 13:21:31,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:31,468 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:31,468 - INFO - integration_test - Warmstart k=0: x0=16.71087256019399 , y0=5.6338724089448045 , psi0=0.36609583031264703 , v0=2.7999999635042676 , spline0=17.940000064076965 , a0=0.0 , w0=0.0
2026-01-22 13:21:31,469 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:31,469 - INFO - integration_test - Dyn residual k=0: pred=[16.972317529251185, 5.7341047695421805, 0.36609583031264703, 2.7999999635042676, 18.22000006042739], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.972317529251185, 5.7341047695421805, 0.36609583031264703, 2.7999999635042676, 18.22000006042739], res_norm=2.571e+01
2026-01-22 13:21:31,470 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:31,471 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:31,485 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:31,640 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:31,660 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:31,703 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:31,722 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:31,764 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:31,784 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:31,825 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:31,845 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:31,887 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:31,908 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:31,950 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:31,970 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:32,011 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:32,030 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:32,072 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:32,091 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:32,133 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:32,153 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:32,197 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:32,216 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:32,257 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:33,415 - INFO - integration_test - Step 309: MPC solve successful
2026-01-22 13:21:33,646 - INFO - integration_test - Step 309: Computed 6 numeric contouring constraints for visualization (s=17.940)
2026-01-22 13:21:33,646 - DEBUG - integration_test - Step 309: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:33,646 - INFO - integration_test - === Applying control at step 309 ===
2026-01-22 13:21:33,646 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019569515, 'w': 0.7999999833234425}
2026-01-22 13:21:33,646 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:33,646 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:33,647 - INFO - integration_test - Step 309 completed in 2.399s
2026-01-22 13:21:33,717 - INFO - integration_test - Step 310 (contouring until path end)
2026-01-22 13:21:33,726 - DEBUG - integration_test - Syncing planner state at step 310: vehicle_state=[16.9589      5.74037845  0.44609583  2.59999996 18.20000006]
2026-01-22 13:21:33,727 - DEBUG - integration_test - Step 310: Using propagated spline 18.2000 (close to path, dist=0.952m, drift=0.133m)
2026-01-22 13:21:33,727 - DEBUG - integration_test -   Set spline state to 18.2000
2026-01-22 13:21:33,733 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:33,840 - DEBUG - integration_test - Step 310: Checking path alignment: vehicle=(16.959, 5.740), path_start=(0.000, 0.000), dist=17.904m
2026-01-22 13:21:33,840 - WARNING - integration_test - Step 310: Vehicle is far from path start (dist=17.904m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:33,840 - INFO - integration_test - === Calling planner.solve_mpc() at step 310 ===
2026-01-22 13:21:33,939 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:33,964 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:33,964 - INFO - integration_test - Warmstart k=0: x0=16.958899995746165 , y0=5.740378452562725 , psi0=0.4460958286449913 , v0=2.599999961547316 , spline0=18.200000060231698 , a0=0.0 , w0=0.0
2026-01-22 13:21:33,964 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:33,965 - INFO - integration_test - Dyn residual k=0: pred=[17.193455980299195, 5.852554600253839, 0.4460958286449913, 2.599999961547316, 18.46000005638643], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.193455980299195, 5.852554600253839, 0.4460958286449913, 2.599999961547316, 18.46000005638643], res_norm=2.603e+01
2026-01-22 13:21:33,966 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:33,967 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:33,983 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,147 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,167 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,209 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,229 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,271 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,291 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,336 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,356 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,399 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,420 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,465 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,486 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,532 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,553 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,596 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,615 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,658 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:34,678 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,719 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:34,737 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:34,778 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:35,992 - INFO - integration_test - Step 310: MPC solve successful
2026-01-22 13:21:36,224 - INFO - integration_test - Step 310: Computed 6 numeric contouring constraints for visualization (s=18.200)
2026-01-22 13:21:36,224 - DEBUG - integration_test - Step 310: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:36,224 - INFO - integration_test - === Applying control at step 310 ===
2026-01-22 13:21:36,225 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000198007273, 'w': 0.6068082967781374}
2026-01-22 13:21:36,225 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:36,225 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:36,226 - INFO - integration_test - Step 310 completed in 2.500s
2026-01-22 13:21:36,289 - INFO - integration_test - Step 311 (contouring until path end)
2026-01-22 13:21:36,297 - DEBUG - integration_test - Syncing planner state at step 311: vehicle_state=[17.18107102  5.85492481  0.50677666  2.39999996 18.44000006]
2026-01-22 13:21:36,297 - DEBUG - integration_test - Step 311: Using propagated spline 18.4400 (close to path, dist=0.881m, drift=0.373m)
2026-01-22 13:21:36,297 - DEBUG - integration_test -   Set spline state to 18.4400
2026-01-22 13:21:36,302 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:36,400 - DEBUG - integration_test - Step 311: Checking path alignment: vehicle=(17.181, 5.855), path_start=(0.000, 0.000), dist=18.151m
2026-01-22 13:21:36,400 - WARNING - integration_test - Step 311: Vehicle is far from path start (dist=18.151m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:36,400 - INFO - integration_test - === Calling planner.solve_mpc() at step 311 ===
2026-01-22 13:21:36,489 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:36,513 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:36,513 - INFO - integration_test - Warmstart k=0: x0=17.18107102411532 , y0=5.854924807442599 , psi0=0.506776658322805 , v0=2.399999959567243 , spline0=18.440000056188424 , a0=0.0 , w0=0.0
2026-01-22 13:21:36,513 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:36,514 - INFO - integration_test - Dyn residual k=0: pred=[17.390906268527274, 5.971411580347519, 0.506776658322805, 2.399999959567243, 18.68000005214515], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.390906268527274, 5.971411580347519, 0.506776658322805, 2.399999959567243, 18.68000005214515], res_norm=2.633e+01
2026-01-22 13:21:36,514 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:36,515 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:36,529 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:36,684 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:36,704 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:36,746 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:36,766 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:36,807 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:36,827 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:36,869 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:36,888 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:36,930 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:36,950 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:36,992 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:37,011 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:37,053 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:37,072 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:37,113 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:37,132 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:37,174 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:37,193 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:37,233 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:37,252 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:37,292 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:38,500 - INFO - integration_test - Step 311: MPC solve successful
2026-01-22 13:21:38,978 - INFO - integration_test - Step 311: Computed 6 numeric contouring constraints for visualization (s=18.440)
2026-01-22 13:21:38,978 - DEBUG - integration_test - Step 311: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:38,978 - INFO - integration_test - === Applying control at step 311 ===
2026-01-22 13:21:38,978 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000190592817, 'w': -0.32317949369827914}
2026-01-22 13:21:38,978 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:38,978 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:38,980 - INFO - integration_test - Step 311 completed in 2.683s
2026-01-22 13:21:39,045 - INFO - integration_test - Step 312 (contouring until path end)
2026-01-22 13:21:39,056 - DEBUG - integration_test - Syncing planner state at step 312: vehicle_state=[17.38390647  5.96333688  0.47445871  2.19999996 18.66000005]
2026-01-22 13:21:39,056 - DEBUG - integration_test - Step 312: Using propagated spline 18.6600 (close to path, dist=0.818m, drift=0.104m)
2026-01-22 13:21:39,057 - DEBUG - integration_test -   Set spline state to 18.6600
2026-01-22 13:21:39,063 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:39,161 - DEBUG - integration_test - Step 312: Checking path alignment: vehicle=(17.384, 5.963), path_start=(0.000, 0.000), dist=18.378m
2026-01-22 13:21:39,161 - WARNING - integration_test - Step 312: Vehicle is far from path start (dist=18.378m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:39,161 - INFO - integration_test - === Calling planner.solve_mpc() at step 312 ===
2026-01-22 13:21:39,255 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:39,278 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:39,278 - INFO - integration_test - Warmstart k=0: x0=17.38390647259017 , y0=5.963336881293708 , psi0=0.47445870895297715 , v0=2.199999957661315 , spline0=18.660000051954555 , a0=0.0 , w0=0.0
2026-01-22 13:21:39,278 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:39,279 - INFO - integration_test - Dyn residual k=0: pred=[17.579605300622422, 6.063845422442713, 0.47445870895297715, 2.199999957661315, 18.880000047720685], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.579605300622422, 6.063845422442713, 0.47445870895297715, 2.199999957661315, 18.880000047720685], res_norm=2.660e+01
2026-01-22 13:21:39,280 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:39,281 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:39,295 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,452 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,472 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,513 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,533 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,574 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,594 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,635 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,655 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,697 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,716 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,758 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,777 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,819 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,838 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,880 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,899 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:39,940 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:39,959 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:40,002 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:40,020 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:40,061 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:41,294 - INFO - integration_test - Step 312: MPC solve successful
2026-01-22 13:21:41,549 - INFO - integration_test - Step 312: Computed 6 numeric contouring constraints for visualization (s=18.660)
2026-01-22 13:21:41,550 - DEBUG - integration_test - Step 312: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:41,550 - INFO - integration_test - === Applying control at step 312 ===
2026-01-22 13:21:41,550 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000195876213, 'w': -0.7999999681823006}
2026-01-22 13:21:41,550 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:41,550 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:41,551 - INFO - integration_test - Step 312 completed in 2.495s
2026-01-22 13:21:41,616 - INFO - integration_test - Step 313 (contouring until path end)
2026-01-22 13:21:41,624 - DEBUG - integration_test - Syncing planner state at step 313: vehicle_state=[17.59253949  6.06000163  0.39445871  2.39999996 18.90000005]
2026-01-22 13:21:41,633 - DEBUG - integration_test - Step 313: Using propagated spline 18.9000 (close to path, dist=0.745m, drift=0.344m)
2026-01-22 13:21:41,633 - DEBUG - integration_test -   Set spline state to 18.9000
2026-01-22 13:21:41,640 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:41,741 - DEBUG - integration_test - Step 313: Checking path alignment: vehicle=(17.593, 6.060), path_start=(0.000, 0.000), dist=18.607m
2026-01-22 13:21:41,741 - WARNING - integration_test - Step 313: Vehicle is far from path start (dist=18.607m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:41,741 - INFO - integration_test - === Calling planner.solve_mpc() at step 313 ===
2026-01-22 13:21:41,834 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:41,857 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:41,857 - INFO - integration_test - Warmstart k=0: x0=17.592539491866383 , y0=6.06000162836179 , psi0=0.3944587121347471 , v0=2.3999999596200774 , spline0=18.900000047916564 , a0=0.0 , w0=0.0
2026-01-22 13:21:41,857 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:41,858 - INFO - integration_test - Dyn residual k=0: pred=[17.814108621212196, 6.152235672958687, 0.3944587121347471, 2.3999999596200774, 19.140000043878572], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.814108621212196, 6.152235672958687, 0.3944587121347471, 2.3999999596200774, 19.140000043878572], res_norm=2.697e+01
2026-01-22 13:21:41,858 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:41,859 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:41,874 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,032 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,052 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,094 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,114 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,156 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,175 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,217 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,237 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,279 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,298 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,340 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,359 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,400 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,420 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,461 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,480 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,522 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:42,541 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,580 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:42,599 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:42,639 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:43,965 - INFO - integration_test - Step 313: MPC solve successful
2026-01-22 13:21:44,205 - INFO - integration_test - Step 313: Computed 6 numeric contouring constraints for visualization (s=18.900)
2026-01-22 13:21:44,206 - DEBUG - integration_test - Step 313: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:44,206 - INFO - integration_test - === Applying control at step 313 ===
2026-01-22 13:21:44,206 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000190093443, 'w': -0.6350531398619821}
2026-01-22 13:21:44,206 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:44,206 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:44,207 - INFO - integration_test - Step 313 completed in 2.583s
2026-01-22 13:21:44,271 - INFO - integration_test - Step 314 (contouring until path end)
2026-01-22 13:21:44,280 - DEBUG - integration_test - Syncing planner state at step 314: vehicle_state=[17.82627279  6.14858917  0.3309534   2.59999996 19.16000004]
2026-01-22 13:21:44,281 - DEBUG - integration_test - Step 314: Using propagated spline 19.1600 (close to path, dist=0.723m, drift=0.116m)
2026-01-22 13:21:44,281 - DEBUG - integration_test -   Set spline state to 19.1600
2026-01-22 13:21:44,287 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:44,387 - DEBUG - integration_test - Step 314: Checking path alignment: vehicle=(17.826, 6.149), path_start=(0.000, 0.000), dist=18.857m
2026-01-22 13:21:44,387 - WARNING - integration_test - Step 314: Vehicle is far from path start (dist=18.857m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:44,387 - INFO - integration_test - === Calling planner.solve_mpc() at step 314 ===
2026-01-22 13:21:44,479 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:44,503 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:44,503 - INFO - integration_test - Warmstart k=0: x0=17.826272793242374 , y0=6.148589165678995 , psi0=0.33095339814854885 , v0=2.5999999615210116 , spline0=19.160000044068664 , a0=0.0 , w0=0.0
2026-01-22 13:21:44,503 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:44,504 - INFO - integration_test - Dyn residual k=0: pred=[18.07216336221689, 6.233074821789844, 0.33095339814854885, 2.5999999615210116, 19.420000040220764], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.07216336221689, 6.233074821789844, 0.33095339814854885, 2.5999999615210116, 19.420000040220764], res_norm=2.738e+01
2026-01-22 13:21:44,505 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:44,505 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:44,519 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:44,674 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:44,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:44,736 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:44,756 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:44,799 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:44,818 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:44,887 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:44,915 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:44,960 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:44,979 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:45,021 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:45,041 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:45,083 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:45,103 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:45,146 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:45,166 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:45,208 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:45,228 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:45,269 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:45,288 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:45,329 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:46,256 - INFO - integration_test - Step 314: MPC solve successful
2026-01-22 13:21:46,771 - INFO - integration_test - Step 314: Computed 6 numeric contouring constraints for visualization (s=19.160)
2026-01-22 13:21:46,771 - DEBUG - integration_test - Step 314: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:46,771 - INFO - integration_test - === Applying control at step 314 ===
2026-01-22 13:21:46,771 - INFO - integration_test -   Control dict from planner: {'a': 2.000000017181351, 'w': -0.0779038381185513}
2026-01-22 13:21:46,772 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:46,772 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:46,773 - INFO - integration_test - Step 314 completed in 2.493s
2026-01-22 13:21:46,838 - INFO - integration_test - Step 315 (contouring until path end)
2026-01-22 13:21:46,843 - DEBUG - integration_test - Syncing planner state at step 315: vehicle_state=[18.08196402  6.23531646  0.32316301  2.79999996 19.44000004]
2026-01-22 13:21:46,844 - DEBUG - integration_test - Step 315: Using propagated spline 19.4400 (close to path, dist=0.654m, drift=0.396m)
2026-01-22 13:21:46,844 - DEBUG - integration_test -   Set spline state to 19.4400
2026-01-22 13:21:46,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:46,946 - DEBUG - integration_test - Step 315: Checking path alignment: vehicle=(18.082, 6.235), path_start=(0.000, 0.000), dist=19.127m
2026-01-22 13:21:46,946 - WARNING - integration_test - Step 315: Vehicle is far from path start (dist=19.127m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:46,946 - INFO - integration_test - === Calling planner.solve_mpc() at step 315 ===
2026-01-22 13:21:47,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:47,060 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:47,060 - INFO - integration_test - Warmstart k=0: x0=18.081964023717422 , y0=6.23531646301939 , psi0=0.3231630143366937 , v0=2.799999963239147 , spline0=19.44000004039258 , a0=0.0 , w0=0.0
2026-01-22 13:21:47,061 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:47,062 - INFO - integration_test - Dyn residual k=0: pred=[18.347470014220033, 6.324235341490839, 0.3231630143366937, 2.799999963239147, 19.720000036716495], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.347470014220033, 6.324235341490839, 0.3231630143366937, 2.799999963239147, 19.720000036716495], res_norm=2.781e+01
2026-01-22 13:21:47,062 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:47,063 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:47,078 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,234 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,255 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,297 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,317 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,360 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,380 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,423 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,443 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,486 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,506 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,548 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,568 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,609 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,629 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,670 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,690 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,733 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:47,753 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,795 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:47,815 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:47,862 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:48,805 - INFO - integration_test - Step 315: MPC solve successful
2026-01-22 13:21:49,061 - INFO - integration_test - Step 315: Computed 6 numeric contouring constraints for visualization (s=19.440)
2026-01-22 13:21:49,062 - DEBUG - integration_test - Step 315: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:49,062 - INFO - integration_test - === Applying control at step 315 ===
2026-01-22 13:21:49,062 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000194196663, 'w': -0.19602800929787165}
2026-01-22 13:21:49,062 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:49,062 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:49,063 - INFO - integration_test - Step 315 completed in 2.220s
2026-01-22 13:21:49,127 - INFO - integration_test - Step 316 (contouring until path end)
2026-01-22 13:21:49,136 - DEBUG - integration_test - Syncing planner state at step 316: vehicle_state=[18.35784746  6.32467885  0.30356021  2.99999997 19.74000004]
2026-01-22 13:21:49,137 - DEBUG - integration_test - Step 316: Using propagated spline 19.7400 (close to path, dist=0.627m, drift=0.208m)
2026-01-22 13:21:49,137 - DEBUG - integration_test -   Set spline state to 19.7400
2026-01-22 13:21:49,143 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:49,247 - DEBUG - integration_test - Step 316: Checking path alignment: vehicle=(18.358, 6.325), path_start=(0.000, 0.000), dist=19.417m
2026-01-22 13:21:49,248 - WARNING - integration_test - Step 316: Vehicle is far from path start (dist=19.417m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:49,248 - INFO - integration_test - === Calling planner.solve_mpc() at step 316 ===
2026-01-22 13:21:49,342 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:49,365 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:49,365 - INFO - integration_test - Warmstart k=0: x0=18.357847457709006 , y0=6.324678853278875 , psi0=0.30356021340690653 , v0=2.9999999651811136 , spline0=19.74000003691069 , a0=0.0 , w0=0.0
2026-01-22 13:21:49,365 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:49,366 - INFO - integration_test - Dyn residual k=0: pred=[18.644130950941545, 6.414354710751453, 0.30356021340690653, 2.9999999651811136, 20.0400000334288], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.644130950941545, 6.414354710751453, 0.30356021340690653, 2.9999999651811136, 20.0400000334288], res_norm=2.827e+01
2026-01-22 13:21:49,367 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:49,367 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:49,383 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:49,542 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:49,562 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:49,604 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:49,625 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:49,668 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:49,687 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:49,730 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:49,749 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:49,792 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:49,811 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:49,854 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:49,873 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:49,916 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:49,935 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:49,977 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:49,997 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:50,040 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:50,059 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:50,100 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:50,119 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:50,161 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:51,156 - INFO - integration_test - Step 316: MPC solve successful
2026-01-22 13:21:51,396 - INFO - integration_test - Step 316: Computed 6 numeric contouring constraints for visualization (s=19.740)
2026-01-22 13:21:51,397 - DEBUG - integration_test - Step 316: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:51,397 - INFO - integration_test - === Applying control at step 316 ===
2026-01-22 13:21:51,397 - INFO - integration_test -   Control dict from planner: {'a': 6.47926141989752e-07, 'w': -0.11915250898178632}
2026-01-22 13:21:51,397 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:51,397 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:51,398 - INFO - integration_test - Step 316 completed in 2.262s
2026-01-22 13:21:51,463 - INFO - integration_test - Step 317 (contouring until path end)
2026-01-22 13:21:51,472 - DEBUG - integration_test - Syncing planner state at step 317: vehicle_state=[18.64465843  6.41264704  0.29164496  3.00000003 20.04000004]
2026-01-22 13:21:51,472 - DEBUG - integration_test - Step 317: Using propagated spline 20.0400 (close to path, dist=0.582m, drift=0.508m)
2026-01-22 13:21:51,473 - DEBUG - integration_test -   Set spline state to 20.0400
2026-01-22 13:21:51,479 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:51,580 - DEBUG - integration_test - Step 317: Checking path alignment: vehicle=(18.645, 6.413), path_start=(0.000, 0.000), dist=19.717m
2026-01-22 13:21:51,580 - WARNING - integration_test - Step 317: Vehicle is far from path start (dist=19.717m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:51,580 - INFO - integration_test - === Calling planner.solve_mpc() at step 317 ===
2026-01-22 13:21:51,674 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:51,697 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:51,697 - INFO - integration_test - Warmstart k=0: x0=18.64465842884312 , y0=6.41264704013653 , psi0=0.2916449625087279 , v0=3.000000029973728 , spline0=20.040000039908062 , a0=0.0 , w0=0.0
2026-01-22 13:21:51,697 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:51,698 - INFO - integration_test - Dyn residual k=0: pred=[18.931990091287528, 6.498905474827615, 0.2916449625087279, 3.000000029973728, 20.340000042905434], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.931990091287528, 6.498905474827615, 0.2916449625087279, 3.000000029973728, 20.340000042905434], res_norm=2.870e+01
2026-01-22 13:21:51,699 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:51,700 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:51,715 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:51,877 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:51,897 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:51,939 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:51,960 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,001 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:52,021 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,063 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:52,082 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,124 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:52,144 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,187 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:52,206 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,249 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:52,268 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,310 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:52,329 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,371 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:52,390 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,430 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:52,449 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:52,489 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:53,558 - INFO - integration_test - Step 317: MPC solve successful
2026-01-22 13:21:53,806 - INFO - integration_test - Step 317: Computed 6 numeric contouring constraints for visualization (s=20.040)
2026-01-22 13:21:53,807 - DEBUG - integration_test - Step 317: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:53,807 - INFO - integration_test - === Applying control at step 317 ===
2026-01-22 13:21:53,807 - INFO - integration_test -   Control dict from planner: {'a': -6.6972409743465896e-06, 'w': -0.10246553303087184}
2026-01-22 13:21:53,807 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:53,807 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:53,808 - INFO - integration_test - Step 317 completed in 2.336s
2026-01-22 13:21:53,871 - INFO - integration_test - Step 318 (contouring until path end)
2026-01-22 13:21:53,880 - DEBUG - integration_test - Syncing planner state at step 318: vehicle_state=[18.93242695  6.49743189  0.28139841  2.99999936 20.33999998]
2026-01-22 13:21:53,881 - DEBUG - integration_test - Step 318: Using propagated spline 20.3400 (close to path, dist=0.530m, drift=0.320m)
2026-01-22 13:21:53,881 - DEBUG - integration_test -   Set spline state to 20.3400
2026-01-22 13:21:53,887 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:53,989 - DEBUG - integration_test - Step 318: Checking path alignment: vehicle=(18.932, 6.497), path_start=(0.000, 0.000), dist=20.016m
2026-01-22 13:21:53,989 - WARNING - integration_test - Step 318: Vehicle is far from path start (dist=20.016m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:53,989 - INFO - integration_test - === Calling planner.solve_mpc() at step 318 ===
2026-01-22 13:21:54,087 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:54,110 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:54,110 - INFO - integration_test - Warmstart k=0: x0=18.93242695322183 , y0=6.49743188930367 , psi0=0.28139840920564074 , v0=2.9999993602496304 , spline0=20.339999975933026 , a0=0.0 , w0=0.0
2026-01-22 13:21:54,110 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:54,111 - INFO - integration_test - Dyn residual k=0: pred=[19.220627303900677, 6.580741669543282, 0.28139840920564074, 2.9999993602496304, 20.63999991195799], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.220627303900677, 6.580741669543282, 0.28139840920564074, 2.9999993602496304, 20.63999991195799], res_norm=2.912e+01
2026-01-22 13:21:54,112 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:54,113 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:54,127 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,285 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,305 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,347 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,367 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,408 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,428 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,470 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,490 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,532 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,551 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,593 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,612 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,654 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,673 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,715 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,734 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,776 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:54,796 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,836 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:54,855 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:54,895 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:55,756 - INFO - integration_test - Step 318: MPC solve successful
2026-01-22 13:21:56,271 - INFO - integration_test - Step 318: Computed 6 numeric contouring constraints for visualization (s=20.340)
2026-01-22 13:21:56,272 - DEBUG - integration_test - Step 318: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:56,272 - INFO - integration_test - === Applying control at step 318 ===
2026-01-22 13:21:56,272 - INFO - integration_test -   Control dict from planner: {'a': 6.695497025647957e-06, 'w': -0.08121035056422002}
2026-01-22 13:21:56,272 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:56,272 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:56,273 - INFO - integration_test - Step 318 completed in 2.393s
2026-01-22 13:21:56,340 - INFO - integration_test - Step 319 (contouring until path end)
2026-01-22 13:21:56,347 - DEBUG - integration_test - Syncing planner state at step 319: vehicle_state=[19.22096245  6.57957053  0.27327737  3.00000003 20.63999998]
2026-01-22 13:21:56,347 - DEBUG - integration_test - Step 319: Using propagated spline 20.6400 (close to path, dist=0.534m, drift=0.620m)
2026-01-22 13:21:56,347 - DEBUG - integration_test -   Set spline state to 20.6400
2026-01-22 13:21:56,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:56,452 - DEBUG - integration_test - Step 319: Checking path alignment: vehicle=(19.221, 6.580), path_start=(0.000, 0.000), dist=20.316m
2026-01-22 13:21:56,452 - WARNING - integration_test - Step 319: Vehicle is far from path start (dist=20.316m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:56,452 - INFO - integration_test - === Calling planner.solve_mpc() at step 319 ===
2026-01-22 13:21:56,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:56,567 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:56,567 - INFO - integration_test - Warmstart k=0: x0=19.220962447225553 , y0=6.579570526794683 , psi0=0.27327737414921877 , v0=3.000000029799333 , spline0=20.639999978912957 , a0=0.0 , w0=0.0
2026-01-22 13:21:56,567 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:56,568 - INFO - integration_test - Dyn residual k=0: pred=[19.50982991305524, 6.66053711850444, 0.27327737414921877, 3.000000029799333, 20.93999998189289], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.50982991305524, 6.66053711850444, 0.27327737414921877, 3.000000029799333, 20.93999998189289], res_norm=2.954e+01
2026-01-22 13:21:56,569 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:56,570 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:56,584 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:56,740 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:56,760 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:56,803 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:56,824 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:56,866 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:56,886 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:56,928 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:56,949 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:56,993 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:57,013 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:57,055 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:57,075 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:57,117 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:57,136 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:57,178 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:57,198 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:57,240 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:57,259 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:57,299 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:57,318 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:57,358 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:58,376 - INFO - integration_test - Step 319: MPC solve successful
2026-01-22 13:21:58,632 - INFO - integration_test - Step 319: Computed 6 numeric contouring constraints for visualization (s=20.640)
2026-01-22 13:21:58,632 - DEBUG - integration_test - Step 319: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:21:58,632 - INFO - integration_test - === Applying control at step 319 ===
2026-01-22 13:21:58,632 - INFO - integration_test -   Control dict from planner: {'a': -4.4752900475416354e-07, 'w': -0.06869812283878865}
2026-01-22 13:21:58,632 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:21:58,632 - INFO - integration_test -   Planner output success: True
2026-01-22 13:21:58,633 - INFO - integration_test - Step 319 completed in 2.287s
2026-01-22 13:21:58,696 - INFO - integration_test - Step 320 (contouring until path end)
2026-01-22 13:21:58,705 - DEBUG - integration_test - Syncing planner state at step 320: vehicle_state=[19.51010575  6.65954425  0.26640756  2.99999999 20.93999998]
2026-01-22 13:21:58,706 - DEBUG - integration_test - Step 320: Using propagated spline 20.9400 (close to path, dist=0.448m, drift=0.431m)
2026-01-22 13:21:58,706 - DEBUG - integration_test -   Set spline state to 20.9400
2026-01-22 13:21:58,712 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:58,813 - DEBUG - integration_test - Step 320: Checking path alignment: vehicle=(19.510, 6.660), path_start=(0.000, 0.000), dist=20.615m
2026-01-22 13:21:58,813 - WARNING - integration_test - Step 320: Vehicle is far from path start (dist=20.615m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:21:58,813 - INFO - integration_test - === Calling planner.solve_mpc() at step 320 ===
2026-01-22 13:21:58,905 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:21:58,928 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:21:58,928 - INFO - integration_test - Warmstart k=0: x0=19.510105750302213 , y0=6.659544252321135 , psi0=0.2664075618653399 , v0=2.9999999850464323 , spline0=20.9399999774176 , a0=0.0 , w0=0.0
2026-01-22 13:21:58,928 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:21:58,929 - INFO - integration_test - Dyn residual k=0: pred=[19.799522616300575, 6.738524482622598, 0.2664075618653399, 2.9999999850464323, 21.23999997592224], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.799522616300575, 6.738524482622598, 0.2664075618653399, 2.9999999850464323, 21.23999997592224], res_norm=2.996e+01
2026-01-22 13:21:58,930 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:58,931 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:21:58,945 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,102 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,122 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,164 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,184 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,226 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,245 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,288 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,307 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,349 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,368 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,410 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,430 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,472 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,491 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,533 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,552 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,594 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:21:59,613 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,653 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:21:59,672 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:21:59,711 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:00,641 - INFO - integration_test - Step 320: MPC solve successful
2026-01-22 13:22:00,891 - INFO - integration_test - Step 320: Computed 6 numeric contouring constraints for visualization (s=20.940)
2026-01-22 13:22:00,892 - DEBUG - integration_test - Step 320: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:22:00,892 - INFO - integration_test - === Applying control at step 320 ===
2026-01-22 13:22:00,892 - INFO - integration_test -   Control dict from planner: {'a': 4.48497401627359e-07, 'w': -0.03448371421126492}
2026-01-22 13:22:00,892 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:22:00,892 - INFO - integration_test -   Planner output success: True
2026-01-22 13:22:00,893 - INFO - integration_test - Step 320 completed in 2.188s
2026-01-22 13:22:00,956 - INFO - integration_test - Step 321 (contouring until path end)
2026-01-22 13:22:00,966 - DEBUG - integration_test - Syncing planner state at step 321: vehicle_state=[19.79965822  6.73802532  0.26295919  3.00000003 21.23999998]
2026-01-22 13:22:00,967 - DEBUG - integration_test - Step 321: Using propagated spline 21.2400 (close to path, dist=0.461m, drift=0.243m)
2026-01-22 13:22:00,967 - DEBUG - integration_test -   Set spline state to 21.2400
2026-01-22 13:22:00,973 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:01,073 - DEBUG - integration_test - Step 321: Checking path alignment: vehicle=(19.800, 6.738), path_start=(0.000, 0.000), dist=20.915m
2026-01-22 13:22:01,073 - WARNING - integration_test - Step 321: Vehicle is far from path start (dist=20.915m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:22:01,073 - INFO - integration_test - === Calling planner.solve_mpc() at step 321 ===
2026-01-22 13:22:01,171 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:01,194 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:22:01,194 - INFO - integration_test - Warmstart k=0: x0=19.79965822132642 , y0=6.738025318748682 , psi0=0.26295919044421345 , v0=3.0000000298961726 , spline0=21.239999980407216 , a0=0.0 , w0=0.0
2026-01-22 13:22:01,194 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:22:01,195 - INFO - integration_test - Dyn residual k=0: pred=[20.089345723520136, 6.816007065757433, 0.26295919044421345, 3.0000000298961726, 21.539999983396832], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.089345723520136, 6.816007065757433, 0.26295919044421345, 3.0000000298961726, 21.539999983396832], res_norm=3.038e+01
2026-01-22 13:22:01,195 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:01,196 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:01,211 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,368 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,388 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,430 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,451 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,493 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,512 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,557 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,578 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,623 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,644 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,686 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,706 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,748 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,767 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,809 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,828 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,870 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:01,890 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,931 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:01,950 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:01,992 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:02,958 - INFO - integration_test - Step 321: MPC solve successful
2026-01-22 13:22:03,237 - INFO - integration_test - Step 321: Computed 6 numeric contouring constraints for visualization (s=21.240)
2026-01-22 13:22:03,237 - DEBUG - integration_test - Step 321: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:22:03,238 - INFO - integration_test - === Applying control at step 321 ===
2026-01-22 13:22:03,238 - INFO - integration_test -   Control dict from planner: {'a': -3.126807391069069e-06, 'w': -0.07231100367766027}
2026-01-22 13:22:03,238 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:22:03,238 - INFO - integration_test -   Planner output success: True
2026-01-22 13:22:03,239 - INFO - integration_test - Step 321 completed in 2.273s
2026-01-22 13:22:03,305 - INFO - integration_test - Step 322 (contouring until path end)
2026-01-22 13:22:03,312 - DEBUG - integration_test - Syncing planner state at step 322: vehicle_state=[20.08962513  6.81495901  0.25572809  2.99999972 21.53999995]
2026-01-22 13:22:03,313 - DEBUG - integration_test - Step 322: Using propagated spline 21.5400 (close to path, dist=0.384m, drift=0.543m)
2026-01-22 13:22:03,313 - DEBUG - integration_test -   Set spline state to 21.5400
2026-01-22 13:22:03,318 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:03,698 - DEBUG - integration_test - Step 322: Checking path alignment: vehicle=(20.090, 6.815), path_start=(0.000, 0.000), dist=21.214m
2026-01-22 13:22:03,698 - WARNING - integration_test - Step 322: Vehicle is far from path start (dist=21.214m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:22:03,698 - INFO - integration_test - === Calling planner.solve_mpc() at step 322 ===
2026-01-22 13:22:03,788 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:03,811 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:22:03,811 - INFO - integration_test - Warmstart k=0: x0=20.089625129532937 , y0=6.814959007034743 , psi0=0.2557280900764474 , v0=2.9999997172154336 , spline0=21.53999995212876 , a0=0.0 , w0=0.0
2026-01-22 13:22:03,812 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:22:03,812 - INFO - integration_test - Dyn residual k=0: pred=[20.379868916725954, 6.890843966208363, 0.2557280900764474, 2.9999997172154336, 21.839999923850304], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.379868916725954, 6.890843966208363, 0.2557280900764474, 2.9999997172154336, 21.839999923850304], res_norm=3.080e+01
2026-01-22 13:22:03,813 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:03,814 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:03,829 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:03,983 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,004 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,047 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,066 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,109 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,128 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,172 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,192 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,234 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,254 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,296 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,315 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,357 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,377 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,419 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,440 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,482 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:04,502 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,543 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:04,562 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:04,602 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:06,300 - INFO - integration_test - Step 322: MPC solve successful
2026-01-22 13:22:06,568 - INFO - integration_test - Step 322: Computed 6 numeric contouring constraints for visualization (s=21.540)
2026-01-22 13:22:06,577 - DEBUG - integration_test - Step 322: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:22:06,578 - INFO - integration_test - === Applying control at step 322 ===
2026-01-22 13:22:06,578 - INFO - integration_test -   Control dict from planner: {'a': 3.121010266735988e-06, 'w': 0.006277294519601463}
2026-01-22 13:22:06,578 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:22:06,578 - INFO - integration_test -   Planner output success: True
2026-01-22 13:22:06,579 - INFO - integration_test - Step 322 completed in 3.268s
2026-01-22 13:22:06,644 - INFO - integration_test - Step 323 (contouring until path end)
2026-01-22 13:22:06,650 - DEBUG - integration_test - Syncing planner state at step 323: vehicle_state=[20.3798451   6.89093506  0.25635582  3.00000003 21.83999996]
2026-01-22 13:22:06,651 - DEBUG - integration_test - Step 323: Using propagated spline 21.8400 (close to path, dist=0.361m, drift=0.355m)
2026-01-22 13:22:06,651 - DEBUG - integration_test -   Set spline state to 21.8400
2026-01-22 13:22:06,656 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:06,754 - DEBUG - integration_test - Step 323: Checking path alignment: vehicle=(20.380, 6.891), path_start=(0.000, 0.000), dist=21.513m
2026-01-22 13:22:06,754 - WARNING - integration_test - Step 323: Vehicle is far from path start (dist=21.513m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:22:06,754 - INFO - integration_test - === Calling planner.solve_mpc() at step 323 ===
2026-01-22 13:22:06,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:06,868 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:22:06,868 - INFO - integration_test - Warmstart k=0: x0=20.379845095149246 , y0=6.890935062462049 , psi0=0.2563558195284076 , v0=3.0000000293164604 , spline0=21.839999955060406 , a0=0.0 , w0=0.0
2026-01-22 13:22:06,868 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:22:06,869 - INFO - integration_test - Dyn residual k=0: pred=[20.670041220127278, 6.967002209159702, 0.2563558195284076, 3.0000000293164604, 22.139999957992053], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.670041220127278, 6.967002209159702, 0.2563558195284076, 3.0000000293164604, 22.139999957992053], res_norm=3.123e+01
2026-01-22 13:22:06,870 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:06,871 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:06,885 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,041 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,060 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,102 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,121 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,163 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,182 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,225 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,244 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,287 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,307 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,349 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,368 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,410 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,429 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,471 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,490 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,532 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:07,552 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,592 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:07,611 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:07,651 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:09,999 - WARNING - integration_test - Step 323: MPC solve failed
2026-01-22 13:22:09,999 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-22 13:22:10,243 - INFO - integration_test - Step 323: Computed 6 numeric contouring constraints for visualization (s=21.840)
2026-01-22 13:22:10,243 - DEBUG - integration_test - Step 323: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:22:10,244 - INFO - integration_test - === Applying control at step 323 ===
2026-01-22 13:22:10,244 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-22 13:22:10,244 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:22:10,244 - INFO - integration_test -   Planner output success: False
2026-01-22 13:22:10,244 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-22 13:22:10,245 - INFO - integration_test - Step 323 completed in 3.595s
2026-01-22 13:22:10,321 - INFO - integration_test - Step 324 (contouring until path end)
2026-01-22 13:22:10,322 - DEBUG - integration_test - Syncing planner state at step 324: vehicle_state=[20.67004122  6.96700221  0.25635582  3.00000003 22.13999996]
2026-01-22 13:22:10,322 - DEBUG - integration_test - Step 324: Using propagated spline 22.1400 (close to path, dist=0.344m, drift=0.655m)
2026-01-22 13:22:10,322 - DEBUG - integration_test -   Set spline state to 22.1400
2026-01-22 13:22:10,328 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:10,429 - DEBUG - integration_test - Step 324: Checking path alignment: vehicle=(20.670, 6.967), path_start=(0.000, 0.000), dist=21.813m
2026-01-22 13:22:10,429 - WARNING - integration_test - Step 324: Vehicle is far from path start (dist=21.813m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:22:10,429 - INFO - integration_test - === Calling planner.solve_mpc() at step 324 ===
2026-01-22 13:22:10,523 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:10,547 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:22:10,547 - INFO - integration_test - Warmstart k=0: x0=20.670041220127278 , y0=6.967002209159702 , psi0=0.2563558195284076 , v0=3.0000000293164604 , spline0=22.139999957992053 , a0=0.0 , w0=0.0
2026-01-22 13:22:10,547 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:22:10,548 - INFO - integration_test - Dyn residual k=0: pred=[20.96023734510531, 7.043069355857355, 0.2563558195284076, 3.0000000293164604, 22.4399999609237], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.96023734510531, 7.043069355857355, 0.2563558195284076, 3.0000000293164604, 22.4399999609237], res_norm=3.165e+01
2026-01-22 13:22:10,549 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:10,550 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:10,565 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:10,723 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:10,743 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:10,785 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:10,806 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:10,848 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:10,868 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:10,910 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:10,930 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:10,972 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:10,991 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:11,033 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:11,052 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:11,094 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:11,113 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:11,155 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:11,175 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:11,217 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:11,236 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:11,278 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:11,298 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:11,340 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:12,847 - INFO - integration_test - Step 324: MPC solve successful
2026-01-22 13:22:13,107 - INFO - integration_test - Step 324: Computed 6 numeric contouring constraints for visualization (s=22.140)
2026-01-22 13:22:13,107 - DEBUG - integration_test - Step 324: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:22:13,107 - INFO - integration_test - === Applying control at step 324 ===
2026-01-22 13:22:13,107 - INFO - integration_test -   Control dict from planner: {'a': -1.453925347198134e-06, 'w': -0.20220909548607918}
2026-01-22 13:22:13,107 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:22:13,107 - INFO - integration_test -   Planner output success: True
2026-01-22 13:22:13,108 - INFO - integration_test - Step 324 completed in 2.787s
2026-01-22 13:22:13,177 - INFO - integration_test - Step 325 (contouring until path end)
2026-01-22 13:22:13,184 - DEBUG - integration_test - Syncing planner state at step 325: vehicle_state=[20.96098661  7.04013026  0.23613491  2.99999988 22.43999995]
2026-01-22 13:22:13,184 - DEBUG - integration_test - Step 325: Using propagated spline 22.4400 (close to path, dist=0.269m, drift=0.466m)
2026-01-22 13:22:13,184 - DEBUG - integration_test -   Set spline state to 22.4400
2026-01-22 13:22:13,191 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:13,292 - DEBUG - integration_test - Step 325: Checking path alignment: vehicle=(20.961, 7.040), path_start=(0.000, 0.000), dist=22.112m
2026-01-22 13:22:13,292 - WARNING - integration_test - Step 325: Vehicle is far from path start (dist=22.112m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:22:13,292 - INFO - integration_test - === Calling planner.solve_mpc() at step 325 ===
2026-01-22 13:22:13,385 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:13,408 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:22:13,408 - INFO - integration_test - Warmstart k=0: x0=20.960986609562667 , y0=7.040130255605393 , psi0=0.23613490997979966 , v0=2.9999998839239255 , spline0=22.439999946384447 , a0=0.0 , w0=0.0
2026-01-22 13:22:13,408 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:22:13,409 - INFO - integration_test - Dyn residual k=0: pred=[21.25266143605283, 7.110314218355939, 0.23613490997979966, 2.9999998839239255, 22.73999993477684], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.25266143605283, 7.110314218355939, 0.23613490997979966, 2.9999998839239255, 22.73999993477684], res_norm=3.207e+01
2026-01-22 13:22:13,410 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:13,411 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:13,425 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:13,582 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:13,602 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:13,644 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:13,664 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:13,707 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:13,726 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:13,769 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:13,788 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:13,830 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:13,850 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:13,892 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:13,911 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:13,953 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:13,973 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:14,015 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:14,034 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:14,076 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:14,096 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:14,136 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:14,155 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:14,195 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:15,157 - INFO - integration_test - Step 325: MPC solve successful
2026-01-22 13:22:15,725 - INFO - integration_test - Step 325: Computed 6 numeric contouring constraints for visualization (s=22.440)
2026-01-22 13:22:15,726 - DEBUG - integration_test - Step 325: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:22:15,726 - INFO - integration_test - === Applying control at step 325 ===
2026-01-22 13:22:15,726 - INFO - integration_test -   Control dict from planner: {'a': -1.472688361813709, 'w': -0.055426866495337436}
2026-01-22 13:22:15,726 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:22:15,726 - INFO - integration_test -   Planner output success: True
2026-01-22 13:22:15,727 - INFO - integration_test - Step 325 completed in 2.543s
2026-01-22 13:22:15,793 - INFO - integration_test - Step 326 (contouring until path end)
2026-01-22 13:22:15,801 - DEBUG - integration_test - Syncing planner state at step 326: vehicle_state=[21.24568903  7.10780935  0.23059222  2.85273105 22.72527305]
2026-01-22 13:22:15,801 - DEBUG - integration_test - Step 326: Using propagated spline 22.7253 (close to path, dist=0.335m, drift=0.752m)
2026-01-22 13:22:15,801 - DEBUG - integration_test -   Set spline state to 22.7253
2026-01-22 13:22:15,807 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:15,906 - DEBUG - integration_test - Step 326: Checking path alignment: vehicle=(21.246, 7.108), path_start=(0.000, 0.000), dist=22.403m
2026-01-22 13:22:15,906 - WARNING - integration_test - Step 326: Vehicle is far from path start (dist=22.403m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:22:15,906 - INFO - integration_test - === Calling planner.solve_mpc() at step 326 ===
2026-01-22 13:22:15,997 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:16,020 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:22:16,021 - INFO - integration_test - Warmstart k=0: x0=21.245689033246677 , y0=7.1078093450855295 , psi0=0.2305922233302659 , v0=2.8527310477425547 , spline0=22.7252730511587 , a0=0.0 , w0=0.0
2026-01-22 13:22:16,021 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:22:16,021 - INFO - integration_test - Dyn residual k=0: pred=[21.523411304305952, 7.173009686075607, 0.2305922233302659, 2.8527310477425547, 23.010546155932957], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.523411304305952, 7.173009686075607, 0.2305922233302659, 2.8527310477425547, 23.010546155932957], res_norm=3.244e+01
2026-01-22 13:22:16,022 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:16,023 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:16,037 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,206 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,226 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,269 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,288 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,331 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,350 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,393 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,412 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,454 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,474 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,516 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,536 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,578 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,598 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,640 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,660 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,701 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:16,721 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,761 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:16,781 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:16,821 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:17,731 - INFO - integration_test - Step 326: MPC solve successful
2026-01-22 13:22:17,998 - INFO - integration_test - Step 326: Computed 6 numeric contouring constraints for visualization (s=22.725)
2026-01-22 13:22:17,999 - DEBUG - integration_test - Step 326: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:22:17,999 - INFO - integration_test - === Applying control at step 326 ===
2026-01-22 13:22:17,999 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000197340086, 'w': -0.7999999991301687}
2026-01-22 13:22:17,999 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:22:17,999 - INFO - integration_test -   Planner output success: True
2026-01-22 13:22:18,000 - INFO - integration_test - Step 326 completed in 2.200s
2026-01-22 13:22:18,066 - INFO - integration_test - Step 327 (contouring until path end)
2026-01-22 13:22:18,072 - DEBUG - integration_test - Syncing planner state at step 327: vehicle_state=[21.51588023  7.16007418  0.15059222  2.65273105 22.99054616]
2026-01-22 13:22:18,073 - DEBUG - integration_test - Step 327: Using propagated spline 22.9905 (close to path, dist=0.216m, drift=0.529m)
2026-01-22 13:22:18,073 - DEBUG - integration_test -   Set spline state to 22.9905
2026-01-22 13:22:18,079 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:18,214 - DEBUG - integration_test - Step 327: Checking path alignment: vehicle=(21.516, 7.160), path_start=(0.000, 0.000), dist=22.676m
2026-01-22 13:22:18,214 - WARNING - integration_test - Step 327: Vehicle is far from path start (dist=22.676m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-22 13:22:18,214 - INFO - integration_test - === Calling planner.solve_mpc() at step 327 ===
2026-01-22 13:22:18,316 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-22 13:22:18,342 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-22 13:22:18,342 - INFO - integration_test - Warmstart k=0: x0=21.515880232757056 , y0=7.160074179579215 , psi0=0.15059222341724904 , v0=2.652731045769154 , spline0=22.99054615573562 , a0=0.0 , w0=0.0
2026-01-22 13:22:18,342 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-22 13:22:18,343 - INFO - integration_test - Dyn residual k=0: pred=[21.778151083449565, 7.199871426832042, 0.15059222341724904, 2.652731045769154, 23.255819260312535], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.778151083449565, 7.199871426832042, 0.15059222341724904, 2.652731045769154, 23.255819260312535], res_norm=3.277e+01
2026-01-22 13:22:18,344 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:18,345 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-22 13:22:18,360 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:18,522 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:18,543 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:18,585 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:18,606 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:18,649 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:18,669 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:18,712 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:18,731 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:18,774 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:18,794 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:18,836 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:18,856 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:18,898 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:18,917 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:18,960 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:18,979 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:19,023 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-22 13:22:19,042 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:19,083 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:19,102 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-22 13:22:19,142 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-22 13:22:20,083 - INFO - integration_test - Step 327: MPC solve successful
2026-01-22 13:22:20,344 - INFO - integration_test - Step 327: Computed 6 numeric contouring constraints for visualization (s=22.991)
2026-01-22 13:22:20,344 - DEBUG - integration_test - Step 327: Captured 6 contouring constraint halfspaces for visualization
2026-01-22 13:22:20,344 - INFO - integration_test - === Applying control at step 327 ===
2026-01-22 13:22:20,344 - INFO - integration_test -   Control dict from planner: {'a': -2.000000014266293, 'w': 0.02381213808827187}
2026-01-22 13:22:20,344 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-22 13:22:20,344 - INFO - integration_test -   Planner output success: True
2026-01-22 13:22:20,345 - INFO - integration_test - Goal reached at step 327!
2026-01-22 13:22:20,345 - INFO - integration_test - Step 327 completed in 2.273s
2026-01-22 13:22:20,412 - INFO - integration_test - Goal reached at step 327, added 3 extra frames for visualization
2026-01-22 13:22:20,419 - INFO - integration_test - Saving test results...
2026-01-22 13:22:20,420 - INFO - integration_test - Saved 87 vehicle states to test_outputs/20260122_131748_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-22 13:22:20,421 - INFO - integration_test - Saved obstacle summary to test_outputs/20260122_131748_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-22 13:22:20,421 - INFO - integration_test - Saved 94 states for obstacle 0 to test_outputs/20260122_131748_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-22 13:22:20,421 - INFO - integration_test - Saved 94 states for obstacle 1 to test_outputs/20260122_131748_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-22 13:22:20,422 - INFO - integration_test - Saved 94 states for obstacle 2 to test_outputs/20260122_131748_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-22 13:22:20,422 - INFO - integration_test - Saved 94 states for obstacle 3 to test_outputs/20260122_131748_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-22 13:22:20,422 - INFO - integration_test - Saved state history: 87 vehicle states, 4 obstacles
2026-01-22 13:22:20,422 - INFO - integration_test - Creating animation...
2026-01-22 13:22:20,466 - DEBUG - integration_test - Creating animation with 87 frames (range: 0 to 86)
2026-01-22 13:22:20,466 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-22 13:22:20,567 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-22 13:22:20,568 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-22 13:22:20,568 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-22 13:22:20,606 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-22 13:22:20,606 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-22 13:22:20,702 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-22 13:22:20,702 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-22 13:22:20,702 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-22 13:22:21,045 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-22 13:22:21,263 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-22 13:22:21,363 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-22 13:22:21,363 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-22 13:22:21,363 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-22 13:22:21,398 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-22 13:22:21,454 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-22 13:22:21,551 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-22 13:22:21,551 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-22 13:22:21,551 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-22 13:22:21,589 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-22 13:22:47,324 - INFO - integration_test - Saved animation with 87 frames at 10.00 fps to test_outputs/20260122_131748_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 8.70s, size: 1450004 bytes)
2026-01-22 13:22:47,371 - INFO - integration_test - Animation created successfully
2026-01-22 13:22:47,371 - WARNING - integration_test - Test exited early due to solver failures, but files were saved
