2026-01-24 01:59:04,592 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 01:59:04,593 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 01:59:04,593 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 01:59:04,593 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 01:59:04,593 - INFO - integration_test - Creating objective module: contouring
2026-01-24 01:59:04,599 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 01:59:04,599 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-24 01:59:04,599 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-24 01:59:04,610 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-24 01:59:04,610 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 01:59:04,615 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 01:59:04,615 - INFO - integration_test - Created 2 constraint module(s)
2026-01-24 01:59:04,633 - INFO - integration_test - Setting solver on all modules...
2026-01-24 01:59:04,633 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-24 01:59:04,633 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 01:59:04,633 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 01:59:04,633 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 01:59:04,633 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 01:59:04,633 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 01:59:04,633 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 01:59:04,633 - INFO - integration_test - Obstacle 0: s=8.03, pos=(6.24, 5.59), lateral_offset=0.00m, vel=(0.47, 0.37)
2026-01-24 01:59:04,633 - INFO - integration_test - Obstacle 1: s=17.06, pos=(13.71, 10.71), lateral_offset=0.00m, vel=(-0.69, -0.41)
2026-01-24 01:59:04,634 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 01:59:04,634 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 01:59:04,634 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 01:59:04,634 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 01:59:04,634 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 01:59:04,634 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 01:59:04,634 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 01:59:04,635 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 01:59:04,635 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 01:59:04,635 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 01:59:04,635 - INFO - integration_test - Auto-calculated timeout: 120s for 50 steps
2026-01-24 01:59:04,635 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 01:59:04,635 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 01:59:04,636 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 01:59:04,636 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 01:59:04,636 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:05,965 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 01:59:05,965 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 01:59:07,047 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:07,076 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:07,076 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 01:59:07,076 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:07,077 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 01:59:07,078 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05287739379801753], res=[0.0, 0.0, 0.0, 0.0, 0.09863775771713398], res_norm=9.864e-02
2026-01-24 01:59:07,079 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15287739379801754], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10936754136573291], res=[0.0, 0.0, 0.0, 0.0, 0.043509852432284626], res_norm=4.351e-02
2026-01-24 01:59:07,096 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,155 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:08,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,224 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:08,246 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,292 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:08,314 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,362 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:08,384 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,432 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:08,455 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,502 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:08,524 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,568 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:08,591 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,639 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:08,661 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,707 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:08,728 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,775 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:08,797 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:08,847 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:09,945 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 01:59:10,143 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:10,143 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 01:59:10,208 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 01:59:10,208 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:10,281 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:10,291 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 01:59:10,291 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:10,291 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 01:59:10,291 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 01:59:10,291 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000186823343, 'w': 0.800000000281869}
2026-01-24 01:59:10,291 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:10,291 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:10,293 - INFO - integration_test - Step 0 completed in 5.658s
2026-01-24 01:59:10,350 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 01:59:10,357 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-24 01:59:10,358 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 01:59:10,358 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 01:59:10,359 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:11,292 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 01:59:11,292 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 01:59:12,168 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:12,193 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:12,193 - INFO - integration_test - Warmstart k=0: x0=0.10987737537436668 , y0=0.004530845059643223 , psi0=0.08000000002818691 , v0=1.2000000018682333 , spline0=0.12000000018682333 , a0=0.0 , w0=0.0
2026-01-24 01:59:12,193 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:12,194 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358031663653, 0.014120608354245487, 0.08000000002818691, 1.2000000018682333, 0.24000000037364666], ws=[0.22949358031663653, 0.014120608354245489, 0.08000000002818686, 1.2000000018682333, 0.05346723351598585], res=[0.0, -1.734723475976807e-18, 5.551115123125783e-17, 0.0, 0.18653276685766082], res_norm=1.865e-01
2026-01-24 01:59:12,195 - INFO - integration_test - Dyn residual k=1: pred=[0.34910978525890635, 0.023710371648847747, 0.08000000002818686, 1.2000000018682333, 0.17346723370280917], ws=[0.34910978525890635, 0.023710371648847747, 0.08000000002818686, 1.2000000018682333, 0.11155800791661744], res=[0.0, 0.0, 0.0, 0.0, 0.061909225786191735], res_norm=6.191e-02
2026-01-24 01:59:12,196 - INFO - integration_test - Dyn residual k=2: pred=[0.46872599020117617, 0.03330013494345001, 0.08000000002818686, 1.2000000018682333, 0.23155800810344077], ws=[0.46872599020117617, 0.03330013494345001, 0.08000000002818686, 1.2000000018682333, 0.17284493962291497], res=[0.0, 0.0, 0.0, 0.0, 0.05871306848052579], res_norm=5.871e-02
2026-01-24 01:59:12,211 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,206 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:13,230 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,284 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:13,309 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,360 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:13,385 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,435 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:13,457 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,506 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:13,528 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,574 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:13,596 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,644 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:13,668 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,717 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:13,739 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,785 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:13,809 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,863 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:13,886 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:13,935 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:14,612 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 01:59:14,614 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:14,614 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 01:59:14,689 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 01:59:14,690 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:14,770 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:14,784 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 01:59:14,784 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:14,784 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 01:59:14,784 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000117340857, 'w': 0.7999999514339523}
2026-01-24 01:59:14,784 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:14,784 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:14,786 - INFO - integration_test - Step 1 completed in 4.429s
2026-01-24 01:59:14,849 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 01:59:14,850 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-24 01:59:14,851 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 01:59:14,851 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 01:59:14,852 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:15,795 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 01:59:15,795 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 01:59:16,777 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:16,808 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:16,808 - INFO - integration_test - Warmstart k=0: x0=0.23889212817289404 , y0=0.020221621438046365 , psi0=0.15999999517158214 , v0=1.400000003041642 , spline0=0.26000000049098754 , a0=0.0 , w0=0.0
2026-01-24 01:59:16,809 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:16,810 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039482534567, 0.04252616974515527, 0.15999999517158214, 1.400000003041642, 0.40000000079515174], ws=[0.3771039482534567, 0.04252616974515527, 0.15999999517158203, 1.400000003041642, 0.11137577822830509], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.28862422256684667], res_norm=2.886e-01
2026-01-24 01:59:16,811 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157683340194, 0.06483071805226416, 0.15999999517158203, 1.400000003041642, 0.2513757785324693], ws=[0.5153157683340194, 0.06483071805226417, 0.15999999517158203, 1.400000003041642, 0.17352919915385895], res=[0.0, -1.3877787807814457e-17, 0.0, 0.0, 0.07784657937861034], res_norm=7.785e-02
2026-01-24 01:59:16,812 - INFO - integration_test - Dyn residual k=2: pred=[0.653527588414582, 0.08713526635937306, 0.15999999517158203, 1.400000003041642, 0.31352919945802316], ws=[0.653527588414582, 0.08713526635937308, 0.15999999517158203, 1.400000003041642, 0.24265260219665635], res=[0.0, -1.3877787807814457e-17, 0.0, 0.0, 0.0708765972613668], res_norm=7.088e-02
2026-01-24 01:59:16,832 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:17,851 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:17,875 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:17,927 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:17,949 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,004 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:18,038 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,098 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:18,121 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,168 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:18,193 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,242 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:18,263 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,307 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:18,330 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,376 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:18,396 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,444 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:18,465 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,508 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:18,528 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:18,570 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:19,116 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 01:59:19,120 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:19,120 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 01:59:19,195 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 01:59:19,195 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:19,282 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:19,293 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 01:59:19,293 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:19,293 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 01:59:19,293 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000193917655, 'w': 0.8000000054977962}
2026-01-24 01:59:19,293 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:19,293 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:19,294 - INFO - integration_test - Step 2 completed in 4.444s
2026-01-24 01:59:19,351 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 01:59:19,352 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.6        0.42      ]
2026-01-24 01:59:19,352 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 01:59:19,352 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 01:59:19,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:20,299 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 01:59:20,299 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 01:59:21,272 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:21,301 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:21,301 - INFO - integration_test - Warmstart k=0: x0=0.3858364357601377 , y0=0.05014471545588452 , psi0=0.23999999572136177 , v0=1.6000000049808185 , spline0=0.4200000009890694 , a0=0.0 , w0=0.0
2026-01-24 01:59:21,301 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:21,302 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505123829952, 0.0881771351376608, 0.23999999572136177, 1.6000000049808185, 0.5800000014871513], ws=[0.5412505123829953, 0.0881771351376608, 0.23999999572136188, 1.6000000049808185, 0.17006438975348998], res=[-1.1102230246251565e-16, 0.0, -1.1102230246251565e-16, 0.0, 0.4099356117336613], res_norm=4.099e-01
2026-01-24 01:59:21,303 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645890058527, 0.1262095548194371, 0.23999999572136188, 1.6000000049808185, 0.33006439025157186], ws=[0.6966645890058528, 0.12620955481943713, 0.23999999572136188, 1.6000000049808185, 0.23692924595879694], res=[-1.1102230246251565e-16, -2.7755575615628914e-17, 0.0, 0.0, 0.09313514429277492], res_norm=9.314e-02
2026-01-24 01:59:21,304 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786656287103, 0.16424197450121344, 0.23999999572136188, 1.6000000049808185, 0.39692924645687877], ws=[0.8520786656287104, 0.16424197450121344, 0.23999999572136188, 1.6000000049808185, 0.3067791801763521], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, 0.09015006628052669], res_norm=9.015e-02
2026-01-24 01:59:21,321 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:22,505 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:22,527 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:22,575 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:22,597 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:22,646 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:22,669 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:22,714 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:22,737 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:22,784 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:22,806 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:22,857 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:22,883 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:22,935 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:22,958 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:23,006 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:23,029 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:23,077 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:23,098 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:23,144 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:23,165 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:23,212 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:23,766 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 01:59:23,770 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:23,770 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 01:59:23,781 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 01:59:23,782 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:23,883 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:23,895 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 01:59:23,895 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:23,896 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 01:59:23,896 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001868052, 'w': 0.7999999997919319}
2026-01-24 01:59:23,896 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:23,896 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:23,897 - INFO - integration_test - Step 3 completed in 4.545s
2026-01-24 01:59:23,950 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 01:59:23,951 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-24 01:59:23,952 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 01:59:23,952 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 01:59:23,953 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:24,886 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 01:59:24,886 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 01:59:26,023 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:26,051 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:26,051 - INFO - integration_test - Warmstart k=0: x0=0.5491354614105353 , y0=0.09724075528054779 , psi0=0.31999999570055493 , v0=1.8000000068488704 , spline0=0.6000000016739565 , a0=0.0 , w0=0.0
2026-01-24 01:59:26,051 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:26,052 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978375589368, 0.15386273567227815, 0.31999999570055493, 1.8000000068488704, 0.7800000023588436], ws=[0.7199978375589368, 0.15386273567227815, 0.31999999570055504, 1.8000000068488704, 0.23775617418222555], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.542243828176618], res_norm=5.422e-01
2026-01-24 01:59:26,053 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602137073383, 0.21048471606400854, 0.31999999570055504, 1.8000000068488704, 0.4177561748671126], ws=[0.8908602137073383, 0.21048471606400854, 0.31999999570055504, 1.8000000068488704, 0.5578705521085545], res=[0.0, 0.0, 0.0, 0.0, -0.14011437724144193], res_norm=1.401e-01
2026-01-24 01:59:26,054 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225898557399, 0.2671066964557389, 0.31999999570055504, 1.8000000068488704, 0.7378705527934416], ws=[1.0617225898557399, 0.2671066964557389, 0.31999999570055504, 1.8000000068488704, 0.3917457023344211], res=[0.0, 0.0, 0.0, 0.0, 0.3461248504590205], res_norm=3.461e-01
2026-01-24 01:59:26,071 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,081 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:27,105 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,153 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:27,176 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,225 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:27,246 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,294 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:27,316 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,365 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:27,388 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,437 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:27,462 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,512 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:27,534 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,583 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:27,608 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,662 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:27,688 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,737 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:27,759 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:27,806 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:28,460 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 01:59:28,463 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:28,463 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 01:59:28,476 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 01:59:28,477 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:28,583 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:28,595 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 01:59:28,596 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:28,596 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 01:59:28,596 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018149725, 'w': 0.7999999914097233}
2026-01-24 01:59:28,596 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:28,596 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:28,597 - INFO - integration_test - Step 4 completed in 4.646s
2026-01-24 01:59:28,661 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 01:59:28,662 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.39999999 2.00000001 0.8       ]
2026-01-24 01:59:28,662 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 01:59:28,662 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 01:59:28,663 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:29,711 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 01:59:29,711 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 01:59:30,652 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:30,678 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:30,679 - INFO - integration_test - Warmstart k=0: x0=0.7268614891294851 , y0=0.16427976582371207 , psi0=0.39999999484152726 , v0=2.000000008663843 , spline0=0.8000000025403409 , a0=0.0 , w0=0.0
2026-01-24 01:59:30,679 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:30,680 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736891298157, 0.24216343367257448, 0.39999999484152726, 2.000000008663843, 1.0000000034067251], ws=[0.9110736891298157, 0.24216343367257448, 0.39999999484152715, 2.000000008663843, 0.5620805879617243], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.4379194154450008], res_norm=4.379e-01
2026-01-24 01:59:30,680 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858891301462, 0.3200471015214369, 0.39999999484152715, 2.000000008663843, 0.7620805888281086], ws=[1.0952858891301462, 0.3200471015214369, 0.39999999484152715, 2.000000008663843, 0.39758948596448473], res=[0.0, 0.0, 0.0, 0.0, 0.36449110286362385], res_norm=3.645e-01
2026-01-24 01:59:30,681 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980891304768, 0.3979307693702993, 0.39999999484152715, 2.000000008663843, 0.5975894868308691], ws=[1.2794980891304768, 0.3979307693702993, 0.39999999484152715, 2.000000008663843, 0.9800064543645939], res=[0.0, 0.0, 0.0, 0.0, -0.3824169675337248], res_norm=3.824e-01
2026-01-24 01:59:30,698 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:31,662 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:31,683 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:31,728 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:31,750 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:31,796 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:31,818 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:31,897 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:31,926 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:31,977 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:31,997 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:32,044 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:32,066 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:32,113 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:32,135 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:32,182 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:32,202 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:32,247 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:32,268 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:32,313 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:32,334 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:32,386 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:32,927 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 01:59:32,931 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:32,931 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 01:59:32,942 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 01:59:32,942 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:33,145 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:33,155 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 01:59:33,156 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:33,156 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 01:59:33,156 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000186778193, 'w': 0.7999999962945356}
2026-01-24 01:59:33,156 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:33,156 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:33,157 - INFO - integration_test - Step 5 completed in 4.496s
2026-01-24 01:59:33,213 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 01:59:33,215 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-24 01:59:33,215 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 01:59:33,215 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 01:59:33,216 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:34,135 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 01:59:34,135 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 01:59:35,153 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:35,181 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:35,182 - INFO - integration_test - Warmstart k=0: x0=0.9167519036291107 , y0=0.25382380484118716 , psi0=0.47999999447098085 , v0=2.200000010531625 , spline0=1.0200000035935033 , a0=0.0 , w0=0.0
2026-01-24 01:59:35,182 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:35,183 - INFO - integration_test - Dyn residual k=0: pred=[1.111890788136404, 0.35541522286771526, 0.47999999447098085, 2.200000010531625, 1.240000004646666], ws=[1.111890788136404, 0.35541522286771526, 0.47999999447098096, 2.200000010531625, 0.8993704490120619], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.34062955563460406], res_norm=3.406e-01
2026-01-24 01:59:35,183 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296726436972, 0.4570066408942434, 0.47999999447098096, 2.200000010531625, 1.1193704500652244], ws=[1.3070296726436972, 0.4570066408942434, 0.47999999447098096, 2.200000010531625, 0.7423514251862996], res=[0.0, 0.0, 0.0, 0.0, 0.3770190248789248], res_norm=3.770e-01
2026-01-24 01:59:35,184 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685571509904, 0.5585980589207715, 0.47999999447098096, 2.200000010531625, 0.9623514262394621], ws=[1.5021685571509904, 0.5585980589207715, 0.47999999447098096, 2.200000010531625, 1.3392548071365658], res=[0.0, 0.0, 0.0, 0.0, -0.3769033808971036], res_norm=3.769e-01
2026-01-24 01:59:35,203 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,236 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:36,259 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,308 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:36,332 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,381 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:36,402 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,451 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:36,473 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,521 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:36,543 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,588 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:36,610 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,659 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:36,679 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,727 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:36,748 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,794 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:36,817 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,866 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:36,888 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:36,938 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:37,548 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 01:59:37,553 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:37,553 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 01:59:37,668 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 01:59:37,669 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:37,804 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:37,818 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 01:59:37,818 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:37,818 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 01:59:37,818 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019207703, 'w': 0.7999999969922827}
2026-01-24 01:59:37,818 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:37,818 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:37,820 - INFO - integration_test - Step 6 completed in 4.605s
2026-01-24 01:59:37,885 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 01:59:37,888 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623086 0.36819144 0.55999999 2.40000001 1.26      ]
2026-01-24 01:59:37,889 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 01:59:37,889 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 01:59:37,890 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:38,862 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 01:59:38,862 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 01:59:39,811 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:39,836 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:39,837 - INFO - integration_test - Warmstart k=0: x0=1.11623086443538 , y0=0.36819144310276297 , psi0=0.5599999941702092 , v0=2.4000000124523955 , spline0=1.260000004838743 , a0=0.0 , w0=0.0
2026-01-24 01:59:39,837 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:39,838 - INFO - integration_test - Dyn residual k=0: pred=[1.3195720928768444, 0.4956761300797922, 0.5599999941702092, 2.4000000124523955, 1.5000000060839827], ws=[1.3195720928768444, 0.4956761300797923, 0.5599999941702092, 2.4000000124523955, 1.2595927556525768], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, 0.24040725043140587], res_norm=2.404e-01
2026-01-24 01:59:39,838 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133213183088, 0.6231608170568215, 0.5599999941702092, 2.4000000124523955, 1.4995927568978162], ws=[1.5229133213183088, 0.6231608170568216, 0.5599999941702092, 2.4000000124523955, 1.3345406025009063], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, 0.1650521543969099], res_norm=1.651e-01
2026-01-24 01:59:39,839 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545497597732, 0.7506455040338509, 0.5599999941702092, 2.4000000124523955, 1.5745406037461458], ws=[1.7262545497597732, 0.7506455040338509, 0.5599999941702092, 2.4000000124523955, 1.7049896018030892], res=[0.0, 0.0, 0.0, 0.0, -0.13044899805694343], res_norm=1.304e-01
2026-01-24 01:59:39,856 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:40,823 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:40,844 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:40,890 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:40,912 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:40,958 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:40,978 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:41,024 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:41,044 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:41,089 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:41,113 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:41,192 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:41,218 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:41,268 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:41,290 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:41,338 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:41,361 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:41,410 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:41,433 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:41,484 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:41,506 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:41,553 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:42,225 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 01:59:42,231 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:42,231 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 01:59:42,359 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 01:59:42,360 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:42,512 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:42,526 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 01:59:42,526 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:42,526 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 01:59:42,526 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019714535, 'w': 0.7999999986705234}
2026-01-24 01:59:42,526 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:42,526 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:42,528 - INFO - integration_test - Step 7 completed in 4.640s
2026-01-24 01:59:42,589 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 01:59:42,593 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243449 0.50942444 0.63999999 2.60000001 1.52000001]
2026-01-24 01:59:42,594 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 01:59:42,594 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 01:59:42,595 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:43,657 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 01:59:43,657 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 01:59:44,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:44,660 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:44,660 - INFO - integration_test - Warmstart k=0: x0=1.3224344894769624 , y0=0.5094244385882414 , psi0=0.6399999940372615 , v0=2.600000014423849 , spline0=1.5200000062811279 , a0=0.0 , w0=0.0
2026-01-24 01:59:44,660 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:44,661 - INFO - integration_test - Dyn residual k=0: pred=[1.5309793886096486, 0.6646952529603503, 0.6399999940372615, 2.600000014423849, 1.7800000077235127], ws=[1.5309793886096486, 0.6646952529603503, 0.6399999940372614, 2.600000014423849, 1.1214729386621844], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.6585270690613283], res_norm=6.585e-01
2026-01-24 01:59:44,662 - INFO - integration_test - Dyn residual k=1: pred=[1.7395242877423347, 0.8199660673324591, 0.6399999940372614, 2.600000014423849, 1.3814729401045693], ws=[1.7395242877423347, 0.8199660673324591, 0.6399999940372614, 2.600000014423849, 1.710057625042026], res=[0.0, 0.0, 0.0, 0.0, -0.32858468493745674], res_norm=3.286e-01
2026-01-24 01:59:44,663 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691868750208, 0.975236881704568, 0.6399999940372614, 2.600000014423849, 1.970057626484411], ws=[1.9480691868750208, 0.975236881704568, 0.6399999940372614, 2.600000014423849, 1.5727892659647946], res=[0.0, 0.0, 0.0, 0.0, 0.39726836051961634], res_norm=3.973e-01
2026-01-24 01:59:44,680 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:45,748 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:45,769 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:45,815 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:45,840 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:45,887 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:45,910 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:45,959 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:45,980 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:46,025 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:46,047 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:46,098 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:46,133 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:46,201 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:46,225 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:46,275 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:46,297 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:46,346 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:46,367 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:46,414 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:46,436 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:46,483 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:47,109 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 01:59:47,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:47,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 01:59:47,235 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 01:59:47,235 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:47,422 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:47,435 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 01:59:47,436 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:47,436 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 01:59:47,436 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199991956, 'w': 0.8000000099842084}
2026-01-24 01:59:47,436 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:47,436 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:47,437 - INFO - integration_test - Step 8 completed in 4.844s
2026-01-24 01:59:47,494 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 01:59:47,495 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223933 0.67925694 0.72       2.80000002 1.80000001]
2026-01-24 01:59:47,496 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 01:59:47,496 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 01:59:47,497 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:48,421 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 01:59:48,422 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 01:59:49,441 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:49,469 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:49,469 - INFO - integration_test - Warmstart k=0: x0=1.532239331177288 , y0=0.6792569365537761 , psi0=0.7199999950356823 , v0=2.8000000164237684 , spline0=1.8000000079235048 , a0=0.0 , w0=0.0
2026-01-24 01:59:49,469 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:49,470 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449374880375, 0.86388464474373, 0.7199999950356823, 2.8000000164237684, 2.0800000095658815], ws=[1.7427449374880375, 0.86388464474373, 0.7199999950356823, 2.8000000164237684, 1.7442447731631854], res=[0.0, 0.0, 0.0, 0.0, 0.3357552364026961], res_norm=3.358e-01
2026-01-24 01:59:49,471 - INFO - integration_test - Dyn residual k=1: pred=[1.953250543798787, 1.0485123529336837, 0.7199999950356823, 2.8000000164237684, 2.0242447748055623], ws=[1.953250543798787, 1.0485123529336837, 0.7199999950356823, 2.8000000164237684, 1.8388527231903207], res=[0.0, 0.0, 0.0, 0.0, 0.18539205161524164], res_norm=1.854e-01
2026-01-24 01:59:49,472 - INFO - integration_test - Dyn residual k=2: pred=[2.1637561501095366, 1.2331400611236376, 0.7199999950356823, 2.8000000164237684, 2.1188527248326974], ws=[2.1637561501095366, 1.2331400611236376, 0.7199999950356823, 2.8000000164237684, 1.9319955705181115], res=[0.0, 0.0, 0.0, 0.0, 0.18685715431458583], res_norm=1.869e-01
2026-01-24 01:59:49,490 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:50,692 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:50,715 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:50,767 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:50,790 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:50,841 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:50,864 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:50,914 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:50,938 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:50,987 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:51,009 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:51,060 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:51,084 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:51,135 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:51,157 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:51,206 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:51,230 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:51,281 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:51,304 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:51,354 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:51,375 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:51,423 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:52,053 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 01:59:52,059 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:52,059 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 01:59:52,072 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 01:59:52,073 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:52,231 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:52,246 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 01:59:52,246 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:52,246 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 01:59:52,246 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019733128, 'w': 0.800000003663841}
2026-01-24 01:59:52,246 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:52,246 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:52,248 - INFO - integration_test - Step 9 completed in 4.753s
2026-01-24 01:59:52,308 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 01:59:52,309 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.7422939  0.87908751 0.8        3.00000002 2.10000001]
2026-01-24 01:59:52,309 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 01:59:52,309 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 01:59:52,310 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:53,202 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 01:59:53,202 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 01:59:54,336 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:54,363 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:54,363 - INFO - integration_test - Warmstart k=0: x0=1.7422938982963387 , y0=0.8790875053745264 , psi0=0.7999999954020665 , v0=3.000000018397081 , spline0=2.100000009763213 , a0=0.0 , w0=0.0
2026-01-24 01:59:54,363 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:54,364 - INFO - integration_test - Dyn residual k=0: pred=[1.951305913371732, 1.0942943330030857, 0.7999999954020665, 3.000000018397081, 2.400000011602921], ws=[1.9513059120899952, 1.09429433168336, 0.7999999954020662, 3.0, 2.114929246144337], res=[1.2817369388073985e-09, 1.3197256620856024e-09, 2.220446049250313e-16, 1.8397081191778852e-08, 0.28507076545858423], res_norm=2.851e-01
2026-01-24 01:59:54,365 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179258836516, 1.3095011579921934, 0.7999999954020662, 3.0, 2.414929246144337], ws=[2.1603179258836516, 1.3095011579921936, 0.7999999954020662, 3.0, 2.219051377649052], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, 0.19587786849528488], res_norm=1.959e-01
2026-01-24 01:59:54,365 - INFO - integration_test - Dyn residual k=2: pred=[2.369329939677308, 1.524707984301027, 0.7999999954020662, 3.0, 2.5190513776490517], ws=[2.369329939677308, 1.5247079843010272, 0.7999999954020662, 3.0, 2.3529042724354063], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, 0.1661471052136454], res_norm=1.661e-01
2026-01-24 01:59:54,383 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:55,476 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:55,499 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:55,549 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:55,573 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:55,625 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:55,648 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:55,697 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:55,723 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:55,772 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:55,793 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:55,844 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:55,867 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:55,916 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:55,941 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:55,989 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:56,012 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:56,063 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 01:59:56,085 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:56,132 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:56,153 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 01:59:56,202 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 01:59:56,919 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 01:59:56,927 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 01:59:56,927 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 01:59:56,941 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 01:59:56,942 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 01:59:57,151 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 01:59:57,168 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 01:59:57,169 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 01:59:57,169 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 01:59:57,169 - INFO - integration_test -   Control dict from planner: {'a': 1.1596903652954819e-07, 'w': 0.8000000027523122}
2026-01-24 01:59:57,169 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 01:59:57,169 - INFO - integration_test -   Planner output success: True
2026-01-24 01:59:57,171 - INFO - integration_test - Step 10 completed in 4.863s
2026-01-24 01:59:57,238 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 01:59:57,240 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247936 1.10242088 0.88       3.00000003 2.40000001]
2026-01-24 01:59:57,241 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 01:59:57,241 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 01:59:57,242 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:58,385 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 01:59:58,385 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 01:59:59,358 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 01:59:59,384 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 01:59:59,384 - INFO - integration_test - Warmstart k=0: x0=1.942479358746434 , y0=1.1024208787717047 , psi0=0.8799999956772977 , v0=3.0000000299939846 , spline0=2.4000000127626113 , a0=0.0 , w0=0.0
2026-01-24 01:59:59,384 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 01:59:59,385 - INFO - integration_test - Dyn residual k=0: pred=[2.1336247049165804, 1.3336425439268842, 0.8799999956772977, 3.0000000299939846, 2.7000000157620097], ws=[2.1336247030055104, 1.3336425416151312, 0.8799999956772977, 3.0, 2.4689439098911743], res=[1.9110699689406374e-09, 2.311753011241535e-09, 0.0, 2.999398462932845e-08, 0.23105610587083536], res_norm=2.311e-01
2026-01-24 01:59:59,386 - INFO - integration_test - Dyn residual k=1: pred=[2.324770047264587, 1.5648642044585575, 0.8799999956772977, 3.0, 2.768943909891174], ws=[2.324770047264587, 1.5648642044585577, 0.8799999956772977, 3.0, 2.3399738006292092], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, 0.4289701092619649], res_norm=4.290e-01
2026-01-24 01:59:59,387 - INFO - integration_test - Dyn residual k=2: pred=[2.5159153915236634, 1.796085867301984, 0.8799999956772977, 3.0, 2.6399738006292095], ws=[2.5159153915236634, 1.7960858673019842, 0.8799999956772977, 3.0, 2.710616063575349], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, -0.0706422629461394], res_norm=7.064e-02
2026-01-24 01:59:59,404 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,437 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:00,458 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,504 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:00,525 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,569 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:00,589 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,634 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:00,655 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,701 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:00,722 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,768 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:00,789 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,835 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:00,855 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,901 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:00,923 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:00,968 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:00,990 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:01,034 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:01,055 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:01,098 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:01,723 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 02:00:01,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:01,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:00:01,742 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:00:01,742 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:01,903 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:01,918 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 02:00:01,918 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:01,918 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 02:00:01,918 - INFO - integration_test -   Control dict from planner: {'a': 5.4566873750437946e-11, 'w': 0.06273622999330089}
2026-01-24 02:00:01,918 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:01,918 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:01,921 - INFO - integration_test - Step 11 completed in 4.681s
2026-01-24 02:00:01,977 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 02:00:01,978 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13289815 1.33424061 0.88627362 3.00000003 2.70000002]
2026-01-24 02:00:01,979 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-24 02:00:01,979 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 02:00:01,980 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:03,059 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 02:00:03,059 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 02:00:04,084 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:04,110 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:04,111 - INFO - integration_test - Warmstart k=0: x0=2.1328981546592063 , y0=1.3342406121332533 , psi0=0.8862736186766278 , v0=3.000000029999441 , spline0=2.7000000157625554 , a0=0.0 , w0=0.0
2026-01-24 02:00:04,111 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:04,112 - INFO - integration_test - Dyn residual k=0: pred=[2.3225891512187844, 1.5666568930263969, 0.8862736186766278, 3.000000029999441, 3.0000000187624996], ws=[2.3225891493219097, 1.5666568907022773, 0.8862736186766274, 3.0, 2.550642668734578], res=[1.89687465734778e-09, 2.32411956346823e-09, 4.440892098500626e-16, 2.999944115344988e-08, 0.44935735002792176], res_norm=4.494e-01
2026-01-24 02:00:04,112 - INFO - integration_test - Dyn residual k=1: pred=[2.512280143984613, 1.7990731692713013, 0.8862736186766274, 3.0, 2.8506426687345776], ws=[2.5122801439846136, 1.7990731692713013, 0.8862736186766274, 3.0, 2.9540327901477834], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.1033901214132058], res_norm=1.034e-01
2026-01-24 02:00:04,113 - INFO - integration_test - Dyn residual k=2: pred=[2.701971138647317, 2.0314894478403254, 0.8862736186766274, 3.0, 3.2540327901477832], ws=[2.7019711386473175, 2.0314894478403254, 0.8862736186766274, 3.0, 3.2984741106252735], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.044441320477490276], res_norm=4.444e-02
2026-01-24 02:00:04,131 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,204 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:05,226 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,274 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:05,298 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,345 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:05,367 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,415 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:05,438 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,485 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:05,509 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,555 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:05,579 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,626 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:05,648 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,696 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:05,718 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,767 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:05,789 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,837 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:05,859 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:05,909 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:06,588 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 02:00:06,595 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:06,595 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1873 scenarios available
2026-01-24 02:00:06,609 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1873 trajectory groups with 18730 total points
2026-01-24 02:00:06,611 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:07,008 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:07,025 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 02:00:07,025 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:07,025 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 02:00:07,025 - INFO - integration_test -   Control dict from planner: {'a': -4.908600021547878e-11, 'w': -0.23485908313996456}
2026-01-24 02:00:07,025 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:07,025 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:07,027 - INFO - integration_test - Step 12 completed in 5.049s
2026-01-24 02:00:07,101 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 02:00:07,103 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32530084 1.5644081  0.86278771 3.00000003 3.00000002]
2026-01-24 02:00:07,104 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-24 02:00:07,104 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 02:00:07,105 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:08,084 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-24 02:00:08,084 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 02:00:08,974 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:09,001 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:09,001 - INFO - integration_test - Warmstart k=0: x0=2.325300841459387 , y0=1.5644080970170107 , psi0=0.8627877103626314 , v0=3.0000000299945326 , spline0=3.000000018762009 , a0=0.0 , w0=0.0
2026-01-24 02:00:09,001 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:09,002 - INFO - integration_test - Dyn residual k=0: pred=[2.520397530464922, 1.7923056260486994, 0.8627877103626314, 3.0000000299945326, 3.3000000217614622], ws=[2.520397528514311, 1.7923056237701394, 0.8627877103626318, 3.0, 2.717242010927525], res=[1.950611228096477e-09, 2.278560007340502e-09, -4.440892098500626e-16, 2.999453263541341e-08, 0.5827580108339374], res_norm=5.828e-01
2026-01-24 02:00:09,003 - INFO - integration_test - Dyn residual k=1: pred=[2.715494215569235, 2.020203150523268, 0.8627877103626318, 3.0, 3.017242010927525], ws=[2.715494215569235, 2.020203150523268, 0.8627877103626318, 3.0, 3.293336622698376], res=[0.0, 0.0, 0.0, 0.0, -0.27609461177085093], res_norm=2.761e-01
2026-01-24 02:00:09,003 - INFO - integration_test - Dyn residual k=2: pred=[2.910590902624159, 2.2481006772763967, 0.8627877103626318, 3.0, 3.5933366226983763], ws=[2.910590902624159, 2.2481006772763967, 0.8627877103626318, 3.0, 3.44445983457648], res=[0.0, 0.0, 0.0, 0.0, 0.1488767881218962], res_norm=1.489e-01
2026-01-24 02:00:09,020 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:09,966 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:09,990 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,038 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:10,061 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,109 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:10,132 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,181 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:10,204 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,253 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:10,275 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,326 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:10,349 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,397 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:10,418 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,469 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:10,493 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,547 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:10,571 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,622 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:10,646 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:10,703 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:11,488 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 02:00:11,495 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:11,495 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1840 scenarios available
2026-01-24 02:00:11,510 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1840 trajectory groups with 18400 total points
2026-01-24 02:00:11,511 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:11,749 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:11,768 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 02:00:11,769 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:11,769 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 02:00:11,769 - INFO - integration_test -   Control dict from planner: {'a': -9.511793939879995e-09, 'w': -0.13449199967184108}
2026-01-24 02:00:11,769 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:11,769 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:11,770 - INFO - integration_test - Step 13 completed in 4.668s
2026-01-24 02:00:11,835 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 02:00:11,838 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52192415 1.79098683 0.84933851 3.00000003 3.30000002]
2026-01-24 02:00:11,839 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-24 02:00:11,839 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 02:00:11,839 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:12,965 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 02:00:12,965 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 02:00:13,992 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:14,034 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:14,034 - INFO - integration_test - Warmstart k=0: x0=2.5219241455622092 , y0=1.7909868282732233 , psi0=0.8493385103954473 , v0=3.000000029043353 , spline0=3.300000021666344 , a0=0.0 , w0=0.0
2026-01-24 02:00:14,034 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:14,036 - INFO - integration_test - Dyn residual k=0: pred=[2.7200681371703443, 2.0162399310980157, 0.8493385103954473, 3.000000029043353, 3.6000000245706794], ws=[2.720068135252089, 2.016239928917314, 0.8493385103954472, 3.0, 3.0641625372621664], res=[1.9182553323560114e-09, 2.180701841325572e-09, 1.1102230246251565e-16, 2.9043353055868693e-08, 0.535837487308513], res_norm=5.358e-01
2026-01-24 02:00:14,038 - INFO - integration_test - Dyn residual k=1: pred=[2.918212124941969, 2.2414930295614046, 0.8493385103954472, 3.0, 3.3641625372621666], ws=[2.918212124941969, 2.2414930295614046, 0.8493385103954472, 3.0, 3.6926997960882435], res=[0.0, 0.0, 0.0, 0.0, -0.3285372588260769], res_norm=3.285e-01
2026-01-24 02:00:14,039 - INFO - integration_test - Dyn residual k=2: pred=[3.1163561146318486, 2.4667461302054954, 0.8493385103954472, 3.0, 3.9926997960882433], ws=[3.1163561146318486, 2.4667461302054954, 0.8493385103954472, 3.0, 3.555039509293603], res=[0.0, 0.0, 0.0, 0.0, 0.4376602867946402], res_norm=4.377e-01
2026-01-24 02:00:14,065 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,129 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:15,151 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,198 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:15,220 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,267 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:15,290 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,339 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:15,361 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,408 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:15,428 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,473 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:15,494 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,540 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:15,559 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,603 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:15,623 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,667 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:15,687 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,730 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:15,749 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:15,792 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:16,452 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 02:00:16,460 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:16,460 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:00:16,472 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:00:16,473 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:16,668 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:16,685 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 02:00:16,685 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:16,685 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 02:00:16,685 - INFO - integration_test -   Control dict from planner: {'a': 9.558412641645028e-09, 'w': -0.1504761798503491}
2026-01-24 02:00:16,685 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:16,685 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:16,687 - INFO - integration_test - Step 14 completed in 4.849s
2026-01-24 02:00:16,744 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 02:00:16,745 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72175539 2.01474066 0.83429089 3.00000003 3.60000002]
2026-01-24 02:00:16,745 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-24 02:00:16,745 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 02:00:16,746 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:17,871 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 02:00:17,871 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 02:00:18,934 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:18,966 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:18,966 - INFO - integration_test - Warmstart k=0: x0=2.7217553889818484 , y0=2.0147406611109497 , psi0=0.8342908924104123 , v0=3.0000000299991942 , spline0=3.6000000246662633 , a0=0.0 , w0=0.0
2026-01-24 02:00:18,966 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:18,967 - INFO - integration_test - Dyn residual k=0: pred=[2.923266342852822, 2.2369867797946332, 0.8342908924104123, 3.0000000299991942, 3.9000000276661826], ws=[2.923266340837767, 2.236986777572232, 0.8342908924104124, 3.0, 3.208147722253853], res=[2.015055233783869e-09, 2.222401374041283e-09, -1.1102230246251565e-16, 2.99991942398492e-08, 0.6918523054123296], res_norm=6.919e-01
2026-01-24 02:00:18,968 - INFO - integration_test - Dyn residual k=1: pred=[3.1247772926936848, 2.459232894033514, 0.8342908924104124, 3.0, 3.5081477222538533], ws=[3.124777292693685, 2.459232894033514, 0.8342908924104124, 3.0, 3.5756329096801065], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.0674851874262532], res_norm=6.749e-02
2026-01-24 02:00:18,969 - INFO - integration_test - Dyn residual k=2: pred=[3.326288244549603, 2.681479010494796, 0.8342908924104124, 3.0, 3.8756329096801068], ws=[3.3262882445496036, 2.681479010494796, 0.8342908924104124, 3.0, 3.9260980077964316], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.050465098116324825], res_norm=5.047e-02
2026-01-24 02:00:18,986 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,044 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:20,097 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,168 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:20,193 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,242 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:20,266 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,314 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:20,336 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,385 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:20,406 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,455 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:20,478 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,525 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:20,548 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,596 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:20,619 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,668 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:20,691 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,739 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:20,762 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:20,808 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:21,893 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 02:00:21,901 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:21,901 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:00:21,915 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:00:21,916 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:22,196 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:22,213 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 02:00:22,213 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:22,213 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 02:00:22,213 - INFO - integration_test -   Control dict from planner: {'a': -3.076870048982001e-07, 'w': -0.10910466116646378}
2026-01-24 02:00:22,213 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:22,214 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:22,215 - INFO - integration_test - Step 15 completed in 5.470s
2026-01-24 02:00:22,282 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 02:00:22,284 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92447474 2.23588309 0.82338043 3.         3.90000002]
2026-01-24 02:00:22,285 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.417m, drift=0.213m)
2026-01-24 02:00:22,285 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 02:00:22,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:23,583 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.924, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 02:00:23,583 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 02:00:24,797 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:24,848 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:24,849 - INFO - integration_test - Warmstart k=0: x0=2.92447473626363 , y0=2.235883091078441 , psi0=0.823380426293766 , v0=2.9999999992304938 , spline0=3.9000000245893127 , a0=0.0 , w0=0.0
2026-01-24 02:00:24,849 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:24,851 - INFO - integration_test - Dyn residual k=0: pred=[3.128398455044568, 2.455917444924341, 0.823380426293766, 2.9999999992304938, 4.200000024512362], ws=[3.128398455044568, 2.455917444924341, 0.8233804262937658, 2.9999999992304938, 3.583166578151342], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.6168334463610199], res_norm=6.168e-01
2026-01-24 02:00:24,853 - INFO - integration_test - Dyn residual k=1: pred=[3.332322173825506, 2.6759517987702406, 0.8233804262937658, 2.9999999992304938, 3.8831665780743916], ws=[3.332322173825506, 2.6759517987702406, 0.8233804262937658, 2.9999999992304938, 4.147906819894633], res=[0.0, 0.0, 0.0, 0.0, -0.26474024182024136], res_norm=2.647e-01
2026-01-24 02:00:24,855 - INFO - integration_test - Dyn residual k=2: pred=[3.536245892606444, 2.8959861526161403, 0.8233804262937658, 2.9999999992304938, 4.447906819817682], ws=[3.536245892606444, 2.8959861526161403, 0.8233804262937658, 2.9999999992304938, 4.26897950546577], res=[0.0, 0.0, 0.0, 0.0, 0.17892731435191145], res_norm=1.789e-01
2026-01-24 02:00:24,882 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,081 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:26,110 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,173 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:26,200 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,253 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:26,276 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,329 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:26,355 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,402 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:26,425 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,499 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:26,536 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,590 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:26,615 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,668 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:26,695 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,747 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:26,771 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,821 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:26,846 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:26,908 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:27,810 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 02:00:27,823 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:27,824 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:00:27,841 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:00:27,842 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:28,236 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:28,263 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 02:00:28,263 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:28,263 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 02:00:28,263 - INFO - integration_test -   Control dict from planner: {'a': 3.0769390552393255e-07, 'w': -0.15390841241253958}
2026-01-24 02:00:28,263 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:28,263 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:28,265 - INFO - integration_test - Step 16 completed in 5.981s
2026-01-24 02:00:28,336 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 02:00:28,338 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.13008363 2.45433951 0.80798959 3.00000003 4.20000003]
2026-01-24 02:00:28,339 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.414m, drift=0.103m)
2026-01-24 02:00:28,339 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 02:00:28,340 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:29,385 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.130, 2.454), path_start=(0.000, 0.000), dist=3.978m
2026-01-24 02:00:29,385 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 02:00:30,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:30,447 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:30,447 - INFO - integration_test - Warmstart k=0: x0=3.130083628840455 , y0=2.454339511452859 , psi0=0.807989585052512 , v0=3.0000000299998844 , spline0=4.200000027589301 , a0=0.0 , w0=0.0
2026-01-24 02:00:30,447 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:30,448 - INFO - integration_test - Dyn residual k=0: pred=[3.337369577814263, 2.6712093737159703, 0.807989585052512, 3.0000000299998844, 4.500000030589289], ws=[3.3373695757414117, 2.67120937154728, 0.8079895850525118, 3.0, 4.167805603329285], res=[2.0728512239998054e-09, 2.1686901163775474e-09, 1.1102230246251565e-16, 2.999988435448131e-08, 0.3321944272600046], res_norm=3.322e-01
2026-01-24 02:00:30,449 - INFO - integration_test - Dyn residual k=1: pred=[3.544655522642368, 2.8880792316417017, 0.8079895850525118, 3.0, 4.467805603329285], ws=[3.544655522642368, 2.8880792316417017, 0.8079895850525118, 3.0, 4.539549221491929], res=[0.0, 0.0, 0.0, 0.0, -0.0717436181626443], res_norm=7.174e-02
2026-01-24 02:00:30,450 - INFO - integration_test - Dyn residual k=2: pred=[3.7519414695433246, 3.104949091736123, 0.8079895850525118, 3.0, 4.839549221491929], ws=[3.7519414695433246, 3.104949091736123, 0.8079895850525118, 3.0, 4.413430423697947], res=[0.0, 0.0, 0.0, 0.0, 0.42611879779398176], res_norm=4.261e-01
2026-01-24 02:00:30,466 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:31,617 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:31,639 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:31,689 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:31,712 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:31,763 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:31,786 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:31,836 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:31,860 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:31,911 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:31,935 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:31,987 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:32,010 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:32,061 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:32,086 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:32,138 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:32,161 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:32,210 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:32,235 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:32,284 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:32,306 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:32,354 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:33,035 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 02:00:33,048 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:33,049 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:00:33,248 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:00:33,250 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:33,536 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:33,554 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 02:00:33,555 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:33,555 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 02:00:33,555 - INFO - integration_test -   Control dict from planner: {'a': -1.1983571732904107e-10, 'w': -0.10297443853018742}
2026-01-24 02:00:33,555 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:33,555 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:33,556 - INFO - integration_test - Step 17 completed in 5.218s
2026-01-24 02:00:33,621 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 02:00:33,623 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.33848251 2.67013829 0.79769214 3.00000003 4.50000003]
2026-01-24 02:00:33,623 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.407m, drift=0.403m)
2026-01-24 02:00:33,623 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 02:00:33,624 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:34,569 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.338, 2.670), path_start=(0.000, 0.000), dist=4.275m
2026-01-24 02:00:34,569 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 02:00:35,625 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:35,653 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:35,653 - INFO - integration_test - Warmstart k=0: x0=3.3384825072402347 , y0=2.670138292739318 , psi0=0.7976921411994932 , v0=3.0000000299879006 , spline0=4.500000030588091 , a0=0.0 , w0=0.0
2026-01-24 02:00:35,653 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:35,654 - INFO - integration_test - Dyn residual k=0: pred=[3.5479906320470485, 2.884862179252222, 0.7976921411994932, 3.0000000299879006, 4.8000000335868815], ws=[3.547990629952812, 2.884862177105849, 0.797692141199493, 3.0, 4.043298118813871], res=[2.094236339900135e-09, 2.1463728572257423e-09, 1.1102230246251565e-16, 2.9987900607153506e-08, 0.7567019147730107], res_norm=7.567e-01
2026-01-24 02:00:35,655 - INFO - integration_test - Dyn residual k=1: pred=[3.7574987526653896, 3.0995860614723805, 0.797692141199493, 3.0, 4.343298118813871], ws=[3.7574987526653896, 3.0995860614723805, 0.797692141199493, 3.0, 4.657118292914891], res=[0.0, 0.0, 0.0, 0.0, -0.3138201741010205], res_norm=3.138e-01
2026-01-24 02:00:35,656 - INFO - integration_test - Dyn residual k=2: pred=[3.967006875377967, 3.314309945838912, 0.797692141199493, 3.0, 4.957118292914891], ws=[3.967006875377967, 3.314309945838912, 0.797692141199493, 3.0, 4.7663604629266985], res=[0.0, 0.0, 0.0, 0.0, 0.19075782998819246], res_norm=1.908e-01
2026-01-24 02:00:35,673 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:36,652 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:36,672 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:36,717 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:36,738 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:36,784 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:36,806 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:36,850 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:36,871 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:36,916 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:36,937 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:36,983 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:37,004 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:37,050 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:37,071 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:37,118 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:37,138 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:37,182 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:37,203 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:37,247 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:37,266 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:37,311 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:37,915 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 02:00:37,926 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:37,926 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:00:38,125 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:00:38,126 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:38,373 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:38,388 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 02:00:38,388 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:38,388 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 02:00:38,388 - INFO - integration_test -   Control dict from planner: {'a': -2.553898067385016e-09, 'w': 0.38225505491368783}
2026-01-24 02:00:38,388 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:38,389 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:38,390 - INFO - integration_test - Step 18 completed in 4.767s
2026-01-24 02:00:38,474 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 02:00:38,476 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54383615 2.88881368 0.83591765 3.00000003 4.80000003]
2026-01-24 02:00:38,477 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.349m, drift=0.293m)
2026-01-24 02:00:38,477 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-24 02:00:38,478 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:39,473 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.544, 2.889), path_start=(0.000, 0.000), dist=4.572m
2026-01-24 02:00:39,473 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 02:00:40,509 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:40,539 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:40,539 - INFO - integration_test - Warmstart k=0: x0=3.5438361492273445 , y0=2.888813680612953 , psi0=0.835917646690862 , v0=3.0000000297325107 , spline0=4.800000033561342 , a0=0.0 , w0=0.0
2026-01-24 02:00:40,539 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:40,540 - INFO - integration_test - Dyn residual k=0: pred=[3.744985296782883, 3.1113873138708725, 0.835917646690862, 3.0000000297325107, 5.100000036534593], ws=[3.7449852947893265, 3.1113873116649815, 0.835917646690862, 3.0, 4.404956109636185], res=[1.9935564310458176e-09, 2.2058910253974773e-09, 0.0, 2.9732510675728463e-08, 0.6950439268984079], res_norm=6.950e-01
2026-01-24 02:00:40,541 - INFO - integration_test - Dyn residual k=1: pred=[3.9461344403513086, 3.33396094271701, 0.835917646690862, 3.0, 4.704956109636185], ws=[3.9461344403513086, 3.33396094271701, 0.835917646690862, 3.0, 4.782883434840087], res=[0.0, 0.0, 0.0, 0.0, -0.07792732520390189], res_norm=7.793e-02
2026-01-24 02:00:40,542 - INFO - integration_test - Dyn residual k=2: pred=[4.147283585913291, 3.5565345737690386, 0.835917646690862, 3.0, 5.082883434840086], ws=[4.147283585913291, 3.5565345737690386, 0.835917646690862, 3.0, 5.366213491260342], res=[0.0, 0.0, 0.0, 0.0, -0.28333005642025544], res_norm=2.833e-01
2026-01-24 02:00:40,560 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:41,571 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:41,595 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:41,646 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:41,670 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:41,722 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:41,745 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:41,795 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:41,818 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:41,866 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:41,887 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:41,934 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:41,956 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:42,006 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:42,030 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:42,081 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:42,111 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:42,183 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:42,208 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:42,257 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:42,279 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:42,325 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:43,005 - INFO - integration_test - Step 19: MPC solve successful
2026-01-24 02:00:43,015 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:43,015 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1845 scenarios available
2026-01-24 02:00:43,033 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1845 trajectory groups with 18450 total points
2026-01-24 02:00:43,034 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:43,403 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:43,428 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-24 02:00:43,428 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:43,428 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 02:00:43,428 - INFO - integration_test -   Control dict from planner: {'a': -0.8686836685593742, 'w': -0.7999999987447549}
2026-01-24 02:00:43,429 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:43,429 - INFO - integration_test -   Planner output success: True
2026-01-24 02:00:43,430 - INFO - integration_test - Step 19 completed in 4.954s
2026-01-24 02:00:43,495 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 02:00:43,497 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.75058967 3.10004624 0.75591765 2.91313166 5.0913132 ]
2026-01-24 02:00:43,497 - DEBUG - integration_test - Step 20: Using propagated spline 5.0913 (close to path, dist=0.327m, drift=0.175m)
2026-01-24 02:00:43,497 - DEBUG - integration_test -   Set spline state to 5.0913
2026-01-24 02:00:43,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:44,614 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.751, 3.100), path_start=(0.000, 0.000), dist=4.866m
2026-01-24 02:00:44,614 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 02:00:45,557 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:45,583 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:45,583 - INFO - integration_test - Warmstart k=0: x0=3.7505896668893235 , y0=3.1000462410373166 , psi0=0.7559176468163865 , v0=2.913131662876573 , spline0=5.091313199848999 , a0=0.0 , w0=0.0
2026-01-24 02:00:45,583 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:45,584 - INFO - integration_test - Dyn residual k=0: pred=[3.962561473603074, 3.2998744522865007, 0.7559176468163865, 2.913131662876573, 5.382626366136656], ws=[3.962561473603074, 3.2998744522865007, 0.7559176468163864, 2.913131662876573, 4.744950095926377], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.637676270210279], res_norm=6.377e-01
2026-01-24 02:00:45,584 - INFO - integration_test - Dyn residual k=1: pred=[4.174533280316825, 3.4997026635356847, 0.7559176468163864, 2.913131662876573, 5.036263262214034], ws=[4.174533280316825, 3.4997026635356847, 0.7559176468163864, 2.913131662876573, 5.358234666589509], res=[0.0, 0.0, 0.0, 0.0, -0.3219714043754749], res_norm=3.220e-01
2026-01-24 02:00:45,585 - INFO - integration_test - Dyn residual k=2: pred=[4.386505087030576, 3.6995308747848688, 0.7559176468163864, 2.913131662876573, 5.649547832877166], ws=[4.386505087030576, 3.6995308747848688, 0.7559176468163864, 2.913131662876573, 5.264631910125297], res=[0.0, 0.0, 0.0, 0.0, 0.38491592275186903], res_norm=3.849e-01
2026-01-24 02:00:45,603 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:46,634 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:46,658 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:46,712 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:46,738 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:46,790 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:46,816 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:46,870 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:46,896 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:46,950 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:46,975 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:47,026 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:47,052 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:47,104 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:47,128 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:47,183 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:47,207 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:47,259 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:00:47,282 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:47,333 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:47,356 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:00:47,405 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:00:56,861 - WARNING - integration_test - Step 20: MPC solve failed
2026-01-24 02:00:56,861 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:00:56,873 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:00:56,873 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:00:56,891 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:00:56,892 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:00:57,309 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:00:57,335 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.091)
2026-01-24 02:00:57,336 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:00:57,336 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 02:00:57,336 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:00:57,336 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:00:57,336 - INFO - integration_test -   Planner output success: False
2026-01-24 02:00:57,336 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:00:57,338 - INFO - integration_test - Step 20 completed in 13.841s
2026-01-24 02:00:57,406 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 02:00:57,413 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.94744739 3.30089931 0.83591765 2.71313166 5.36262637]
2026-01-24 02:00:57,414 - DEBUG - integration_test - Step 21: Using propagated spline 5.3626 (close to path, dist=0.352m, drift=0.037m)
2026-01-24 02:00:57,414 - DEBUG - integration_test -   Set spline state to 5.3626
2026-01-24 02:00:57,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:58,366 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.947, 3.301), path_start=(0.000, 0.000), dist=5.146m
2026-01-24 02:00:58,366 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 02:00:59,490 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:00:59,515 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:00:59,516 - INFO - integration_test - Warmstart k=0: x0=3.9474473927421476 , y0=3.3008993113857152 , psi0=0.8359176468163865 , v0=2.713131662876573 , spline0=5.362626366136657 , a0=0.0 , w0=0.0
2026-01-24 02:00:59,516 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:00:59,517 - INFO - integration_test - Dyn residual k=0: pred=[4.129362097978475, 3.5021898333181056, 0.8359176468163865, 2.713131662876573, 5.633939532424314], ws=[4.129362097978475, 3.5021898333181056, 0.8359176468163865, 2.713131662876573, 5.348107590432686], res=[0.0, 0.0, 0.0, 0.0, 0.28583194199162865], res_norm=2.858e-01
2026-01-24 02:00:59,518 - INFO - integration_test - Dyn residual k=1: pred=[4.311276803214802, 3.703480355250496, 0.8359176468163865, 2.713131662876573, 5.619420756720343], ws=[4.311276803214802, 3.703480355250496, 0.8359176468163865, 2.713131662876573, 5.481457424144996], res=[0.0, 0.0, 0.0, 0.0, 0.13796333257534688], res_norm=1.380e-01
2026-01-24 02:00:59,519 - INFO - integration_test - Dyn residual k=2: pred=[4.493191508451129, 3.9047708771828864, 0.8359176468163865, 2.713131662876573, 5.752770590432654], ws=[4.493191508451129, 3.9047708771828864, 0.8359176468163865, 2.713131662876573, 5.8246722618001865], res=[0.0, 0.0, 0.0, 0.0, -0.07190167136753267], res_norm=7.190e-02
2026-01-24 02:00:59,535 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:00,516 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:00,556 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:00,621 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:00,648 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:00,698 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:00,723 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:00,773 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:00,795 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:00,846 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:00,870 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:00,922 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:00,947 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:00,996 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:01,019 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:01,072 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:01,095 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:01,144 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:01,167 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:01,214 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:01,238 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:01,286 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:05,252 - WARNING - integration_test - Step 21: MPC solve failed
2026-01-24 02:01:05,252 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 02:01:05,270 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:05,271 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:01:05,293 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:01:05,294 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:05,642 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:01:05,659 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.363)
2026-01-24 02:01:05,659 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:01:05,659 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 02:01:05,659 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:01:05,659 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:01:05,659 - INFO - integration_test -   Planner output success: False
2026-01-24 02:01:05,659 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:01:05,661 - INFO - integration_test - Step 21 completed in 8.248s
2026-01-24 02:01:05,721 - WARNING - integration_test - Test timeout reached (120.0s) at step 22. Terminating test early.
2026-01-24 02:01:05,727 - INFO - integration_test - Saving test results...
2026-01-24 02:01:05,727 - INFO - integration_test - Saved 23 vehicle states to test_outputs/20260124_015904_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-24 02:01:05,727 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_015904_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-24 02:01:05,727 - INFO - integration_test - Saved 33 states for obstacle 0 to test_outputs/20260124_015904_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-24 02:01:05,727 - INFO - integration_test - Saved 33 states for obstacle 1 to test_outputs/20260124_015904_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-24 02:01:05,727 - INFO - integration_test - Saved state history: 23 vehicle states, 2 obstacles
2026-01-24 02:01:05,727 - INFO - integration_test - Creating animation...
2026-01-24 02:01:05,774 - DEBUG - integration_test - Creating animation with 23 frames (range: 0 to 22)
2026-01-24 02:01:05,775 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:01:06,709 - INFO - integration_test - Frame 0: Safe Horizon module has 1860 scenarios after update
2026-01-24 02:01:06,709 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:01:06,709 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:01:06,711 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:06,711 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:01:06,932 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:01:06,933 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:06,981 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:01:06,987 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:01:06,987 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:01:07,942 - INFO - integration_test - Frame 0: Safe Horizon module has 1863 scenarios after update
2026-01-24 02:01:07,942 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:01:07,942 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:01:07,944 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:07,944 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:01:07,960 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:01:07,961 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:08,019 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:01:08,027 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:01:08,182 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 02:01:09,182 - INFO - integration_test - Frame 1: Safe Horizon module has 1857 scenarios after update
2026-01-24 02:01:09,182 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-24 02:01:09,182 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:01:09,183 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:09,184 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:01:09,465 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:01:09,466 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:09,513 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:09,522 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-24 02:01:09,625 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 02:01:10,582 - INFO - integration_test - Frame 2: Safe Horizon module has 1866 scenarios after update
2026-01-24 02:01:10,582 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-24 02:01:10,582 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:01:10,583 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:10,583 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:01:10,599 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:01:10,600 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:10,650 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:10,656 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-24 02:01:11,818 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:11,818 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:01:12,060 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:01:12,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:12,110 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:13,198 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:13,198 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:01:13,212 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:01:13,213 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:13,482 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:14,545 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:14,545 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:01:14,561 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:01:14,562 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:14,612 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:15,745 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:15,745 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:01:15,764 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:01:15,766 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:16,086 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:17,216 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:17,216 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:01:17,237 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:01:17,238 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:17,293 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:18,391 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:18,391 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:01:18,409 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:01:18,410 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:18,679 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:19,773 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:19,773 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:01:19,793 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:01:19,795 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:19,852 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:21,020 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:21,020 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:01:21,040 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:01:21,041 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:21,356 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:22,513 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:22,513 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:01:22,530 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:01:22,531 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:22,583 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:23,692 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:23,692 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:01:23,709 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:01:23,710 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:24,005 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:25,109 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:25,109 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1878 scenarios available
2026-01-24 02:01:25,129 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1878 trajectory groups with 18780 total points
2026-01-24 02:01:25,130 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:25,184 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:26,257 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:26,257 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:01:26,283 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:01:26,285 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:26,584 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:27,618 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:27,618 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:01:27,634 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:01:27,635 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:27,685 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:28,727 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:28,727 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:01:28,746 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:01:28,747 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:29,039 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:30,231 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:30,231 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:01:30,254 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:01:30,255 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:30,313 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:31,390 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:31,390 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1871 scenarios available
2026-01-24 02:01:31,407 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1871 trajectory groups with 18710 total points
2026-01-24 02:01:31,408 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:31,694 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:32,806 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:32,806 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:01:32,826 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:01:32,828 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:32,886 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:34,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:34,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:01:34,025 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:01:34,026 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:34,305 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:35,301 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:35,301 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:01:35,317 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:01:35,318 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:35,369 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:36,430 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:36,431 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:01:36,463 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:01:36,466 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:36,805 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:01:38,450 - INFO - integration_test - Saved animation with 23 frames at 10.00 fps to test_outputs/20260124_015904_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 2.30s, size: 381943 bytes)
2026-01-24 02:01:38,471 - INFO - integration_test - Animation created successfully
2026-01-24 02:01:38,472 - INFO - integration_test - Test completed successfully
