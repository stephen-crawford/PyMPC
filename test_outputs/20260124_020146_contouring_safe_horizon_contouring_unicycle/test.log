2026-01-24 02:01:46,958 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 02:01:46,958 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 02:01:46,958 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 02:01:46,958 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 02:01:46,958 - INFO - integration_test - Creating objective module: contouring
2026-01-24 02:01:46,965 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 02:01:46,965 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-24 02:01:46,965 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-24 02:01:46,974 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-24 02:01:46,974 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 02:01:46,979 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 02:01:46,979 - INFO - integration_test - Created 2 constraint module(s)
2026-01-24 02:01:47,000 - INFO - integration_test - Setting solver on all modules...
2026-01-24 02:01:47,000 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-24 02:01:47,000 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 02:01:47,000 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 02:01:47,000 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 02:01:47,000 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 02:01:47,000 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 02:01:47,000 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 02:01:47,000 - INFO - integration_test - Obstacle 0: s=8.03, pos=(6.24, 5.59), lateral_offset=0.00m, vel=(0.47, 0.37)
2026-01-24 02:01:47,000 - INFO - integration_test - Obstacle 1: s=17.06, pos=(13.71, 10.71), lateral_offset=0.00m, vel=(-0.69, -0.41)
2026-01-24 02:01:47,001 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 02:01:47,001 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 02:01:47,001 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 02:01:47,001 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 02:01:47,001 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 02:01:47,001 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 02:01:47,001 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 02:01:47,002 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 02:01:47,002 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 02:01:47,002 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 02:01:47,002 - INFO - integration_test - Auto-calculated timeout: 180s for 100 steps
2026-01-24 02:01:47,002 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 02:01:47,002 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 02:01:47,003 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 02:01:47,003 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 02:01:47,003 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:01:48,195 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 02:01:48,195 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 02:01:49,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:01:49,445 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:01:49,445 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 02:01:49,445 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:01:49,446 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 02:01:49,447 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05287739379801753], res=[0.0, 0.0, 0.0, 0.0, 0.09863775771713398], res_norm=9.864e-02
2026-01-24 02:01:49,448 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15287739379801754], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10936754136573291], res=[0.0, 0.0, 0.0, 0.0, 0.043509852432284626], res_norm=4.351e-02
2026-01-24 02:01:49,466 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:50,482 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:50,503 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:50,550 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:50,571 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:50,616 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:50,639 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:50,685 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:50,707 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:50,754 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:50,777 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:50,823 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:50,845 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:50,892 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:50,913 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:50,961 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:50,983 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:51,030 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:51,052 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:51,098 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:51,119 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:51,166 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:52,280 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 02:01:52,492 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:52,492 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:01:52,562 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:01:52,563 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:52,633 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:01:52,645 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 02:01:52,645 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:01:52,645 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 02:01:52,645 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 02:01:52,645 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018682317, 'w': 0.8000000002785166}
2026-01-24 02:01:52,646 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:01:52,646 - INFO - integration_test -   Planner output success: True
2026-01-24 02:01:52,647 - INFO - integration_test - Step 0 completed in 5.645s
2026-01-24 02:01:52,714 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 02:01:52,715 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-24 02:01:52,715 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 02:01:52,716 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 02:01:52,716 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:01:53,669 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 02:01:53,669 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 02:01:54,607 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:01:54,635 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:01:54,635 - INFO - integration_test - Warmstart k=0: x0=0.1098773753743676 , y0=0.004530845059624252 , psi0=0.08000000002785165 , v0=1.2000000018682317 , spline0=0.12000000018682318 , a0=0.0 , w0=0.0
2026-01-24 02:01:54,635 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:01:54,636 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358031664052, 0.0141206083541864, 0.08000000002785165, 1.2000000018682317, 0.24000000037364635], ws=[0.22949358031664052, 0.0141206083541864, 0.08000000002785157, 1.2000000018682317, 0.05346723351598589], res=[0.0, 0.0, 8.326672684688674e-17, 0.0, 0.18653276685766046], res_norm=1.865e-01
2026-01-24 02:01:54,637 - INFO - integration_test - Dyn residual k=1: pred=[0.34910978525891345, 0.02371037164874854, 0.08000000002785157, 1.2000000018682317, 0.17346723370280906], ws=[0.34910978525891345, 0.023710371648748542, 0.08000000002785157, 1.2000000018682317, 0.11155800791661769], res=[0.0, -3.469446951953614e-18, 0.0, 0.0, 0.061909225786191374], res_norm=6.191e-02
2026-01-24 02:01:54,638 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259902011863, 0.03330013494331068, 0.08000000002785157, 1.2000000018682317, 0.23155800810344085], ws=[0.4687259902011863, 0.03330013494331068, 0.08000000002785157, 1.2000000018682317, 0.1728449396229158], res=[0.0, 0.0, 0.0, 0.0, 0.058713068480525044], res_norm=5.871e-02
2026-01-24 02:01:54,654 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:55,654 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:55,675 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:55,718 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:55,740 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:55,781 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:55,803 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:55,846 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:55,865 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:55,907 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:55,927 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:55,971 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:55,990 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:56,033 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:56,054 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:56,097 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:56,116 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:56,166 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:01:56,186 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:56,228 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:56,248 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:01:56,290 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:01:56,830 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 02:01:56,832 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:01:56,832 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:01:56,903 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:01:56,904 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:01:56,987 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:01:56,996 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 02:01:56,997 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:01:56,997 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 02:01:56,997 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000119198056, 'w': 0.7999999530992759}
2026-01-24 02:01:56,997 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:01:56,997 - INFO - integration_test -   Planner output success: True
2026-01-24 02:01:56,998 - INFO - integration_test - Step 1 completed in 4.284s
2026-01-24 02:01:57,060 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 02:01:57,060 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-24 02:01:57,061 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 02:01:57,061 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 02:01:57,062 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:01:58,062 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 02:01:58,062 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 02:01:59,104 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:01:59,132 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:01:59,133 - INFO - integration_test - Warmstart k=0: x0=0.2388921281723373 , y0=0.020221621449108173 , psi0=0.15999999533777925 , v0=1.4000000030602122 , spline0=0.2600000004928444 , a0=0.0 , w0=0.0
2026-01-24 02:01:59,133 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:01:59,134 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394825102633, 0.04252616977948334, 0.15999999533777925, 1.4000000030602122, 0.4000000007988656], ws=[0.37710394825102633, 0.04252616977948334, 0.1599999953377793, 1.4000000030602122, 0.11137577822836556], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.2886242225705], res_norm=2.886e-01
2026-01-24 02:01:59,135 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157683297154, 0.06483071810985852, 0.1599999953377793, 1.4000000030602122, 0.25137577853438675], ws=[0.5153157683297154, 0.06483071810985852, 0.1599999953377793, 1.4000000030602122, 0.17352919915391374], res=[0.0, 0.0, 0.0, 0.0, 0.07784657938047301], res_norm=7.785e-02
2026-01-24 02:01:59,136 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275884084044, 0.0871352664402337, 0.1599999953377793, 1.4000000030602122, 0.31352919945993496], ws=[0.6535275884084044, 0.0871352664402337, 0.1599999953377793, 1.4000000030602122, 0.24265260219657794], res=[0.0, 0.0, 0.0, 0.0, 0.07087659726335702], res_norm=7.088e-02
2026-01-24 02:01:59,155 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,137 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:00,161 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,209 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:00,230 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,277 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:00,298 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,345 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:00,367 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,414 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:00,437 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,483 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:00,505 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,555 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:00,577 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,625 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:00,649 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,698 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:00,720 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,770 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:00,792 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:00,838 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:01,436 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 02:02:01,439 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:01,439 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:02:01,525 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:02:01,526 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:01,619 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:01,632 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 02:02:01,632 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:01,632 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 02:02:01,633 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000195459706, 'w': 0.8000000066405666}
2026-01-24 02:02:01,633 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:01,633 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:01,634 - INFO - integration_test - Step 2 completed in 4.574s
2026-01-24 02:02:01,698 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 02:02:01,699 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-24 02:02:01,699 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 02:02:01,699 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 02:02:01,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:02,685 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 02:02:02,685 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 02:02:03,583 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:03,608 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:03,608 - INFO - integration_test - Warmstart k=0: x0=0.3858364357553212 , y0=0.05014471550046009 , psi0=0.2399999960018359 , v0=1.6000000050148093 , spline0=0.42000000099432533 , a0=0.0 , w0=0.0
2026-01-24 02:02:03,608 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:03,609 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505123708133, 0.08817713522663398, 0.2399999960018359, 1.6000000050148093, 0.5800000014958062], ws=[0.5412505123708133, 0.08817713522663398, 0.23999999600183575, 1.6000000050148093, 0.17006438975363564], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, 0.4099356117421706], res_norm=4.099e-01
2026-01-24 02:02:03,610 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645889863055, 0.12620955495280783, 0.23999999600183575, 1.6000000050148093, 0.3300643902551166], ws=[0.6966645889863055, 0.12620955495280783, 0.23999999600183575, 1.6000000050148093, 0.23692924595878734], res=[0.0, 0.0, 0.0, 0.0, 0.09313514429632924], res_norm=9.314e-02
2026-01-24 02:02:03,611 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786656017976, 0.1642419746789817, 0.23999999600183575, 1.6000000050148093, 0.3969292464602683], ws=[0.8520786656017976, 0.1642419746789817, 0.23999999600183575, 1.6000000050148093, 0.30677918017582007], res=[0.0, 0.0, 0.0, 0.0, 0.09015006628444822], res_norm=9.015e-02
2026-01-24 02:02:03,627 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:04,676 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:04,697 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:04,742 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:04,763 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:04,810 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:04,832 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:04,878 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:04,900 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:04,947 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:04,969 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:05,019 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:05,042 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:05,088 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:05,110 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:05,161 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:05,184 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:05,234 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:05,259 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:05,327 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:05,353 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:05,413 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:06,065 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 02:02:06,070 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:06,070 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:02:06,085 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:02:06,086 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:06,198 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:06,209 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 02:02:06,210 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:06,210 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 02:02:06,210 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000186667637, 'w': 0.7999999997079122}
2026-01-24 02:02:06,210 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:06,210 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:06,212 - INFO - integration_test - Step 3 completed in 4.513s
2026-01-24 02:02:06,279 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 02:02:06,280 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-24 02:02:06,280 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 02:02:06,280 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 02:02:06,281 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:07,252 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 02:02:07,252 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 02:02:08,341 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:08,368 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:08,368 - INFO - integration_test - Warmstart k=0: x0=0.5491354613959204 , y0=0.0972407553711469 , psi0=0.3199999959726271 , v0=1.8000000068814856 , spline0=0.6000000016824739 , a0=0.0 , w0=0.0
2026-01-24 02:02:08,368 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:08,369 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978375320125, 0.15386273581039012, 0.3199999959726271, 1.8000000068814856, 0.7800000023706225], ws=[0.7199978375320126, 0.15386273581039012, 0.3199999959726272, 1.8000000068814856, 0.2377561741823719], res=[-1.1102230246251565e-16, 0.0, -5.551115123125783e-17, 0.0, 0.5422438281882506], res_norm=5.422e-01
2026-01-24 02:02:08,370 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602136681048, 0.21048471624963336, 0.3199999959726272, 1.8000000068814856, 0.4177561748705205], ws=[0.8908602136681048, 0.21048471624963336, 0.3199999959726272, 1.8000000068814856, 0.5578705521079248], res=[0.0, 0.0, 0.0, 0.0, -0.14011437723740428], res_norm=1.401e-01
2026-01-24 02:02:08,371 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225898041969, 0.2671066966888766, 0.3199999959726272, 1.8000000068814856, 0.7378705527960734], ws=[1.0617225898041969, 0.2671066966888766, 0.3199999959726272, 1.8000000068814856, 0.3917457023329807], res=[0.0, 0.0, 0.0, 0.0, 0.34612485046309266], res_norm=3.461e-01
2026-01-24 02:02:08,387 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:09,483 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:09,503 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:09,547 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:09,568 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:09,615 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:09,637 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:09,681 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:09,703 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:09,750 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:09,772 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:09,818 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:09,839 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:09,885 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:09,907 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:09,953 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:09,976 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:10,022 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:10,043 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:10,089 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:10,111 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:10,158 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:10,732 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 02:02:10,735 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:10,735 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:02:10,746 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:02:10,746 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:10,848 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:10,858 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 02:02:10,858 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:10,858 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 02:02:10,858 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018191758, 'w': 0.799999991643382}
2026-01-24 02:02:10,858 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:10,859 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:10,860 - INFO - integration_test - Step 4 completed in 4.580s
2026-01-24 02:02:10,914 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 02:02:10,915 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-24 02:02:10,916 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 02:02:10,916 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 02:02:10,916 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:11,907 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 02:02:11,907 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 02:02:12,941 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:12,975 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:12,975 - INFO - integration_test - Warmstart k=0: x0=0.7268614890990535 , y0=0.1642797659659931 , psi0=0.3999999951369653 , v0=2.0000000087006615 , spline0=0.8000000025525401 , a0=0.0 , w0=0.0
2026-01-24 02:02:12,975 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:12,976 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736890797655, 0.2421634338707126, 0.3999999951369653, 2.0000000087006615, 1.0000000034226062], ws=[0.9110736890797655, 0.24216343387071262, 0.3999999951369655, 2.0000000087006615, 0.5620805879620743], res=[0.0, -2.7755575615628914e-17, -1.6653345369377348e-16, 0.0, 0.4379194154605319], res_norm=4.379e-01
2026-01-24 02:02:12,977 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858890604775, 0.32004710177543216, 0.3999999951369655, 2.0000000087006615, 0.7620805888321405], ws=[1.0952858890604775, 0.32004710177543216, 0.3999999951369655, 2.0000000087006615, 0.3975894859638235], res=[0.0, 0.0, 0.0, 0.0, 0.364491102868317], res_norm=3.645e-01
2026-01-24 02:02:12,978 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980890411896, 0.3979307696801517, 0.3999999951369655, 2.0000000087006615, 0.5975894868338897], ws=[1.2794980890411896, 0.39793076968015173, 0.3999999951369655, 2.0000000087006615, 0.9800064543599167], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, -0.38241696752602705], res_norm=3.824e-01
2026-01-24 02:02:12,995 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,119 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:14,142 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,196 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:14,220 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,268 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:14,290 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,340 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:14,362 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,411 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:14,434 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,483 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:14,506 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,554 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:14,575 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,622 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:14,644 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,693 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:14,715 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,768 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:14,791 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:14,841 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:15,451 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 02:02:15,455 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:15,455 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:02:15,467 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:02:15,468 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:15,687 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:15,698 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 02:02:15,699 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:15,699 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 02:02:15,699 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000186819, 'w': 0.799999996397631}
2026-01-24 02:02:15,699 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:15,699 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:15,700 - INFO - integration_test - Step 5 completed in 4.785s
2026-01-24 02:02:15,763 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 02:02:15,764 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.25382381 0.47999999 2.20000001 1.02      ]
2026-01-24 02:02:15,765 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 02:02:15,765 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 02:02:15,766 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:16,667 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 02:02:16,667 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 02:02:17,669 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:17,695 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:17,695 - INFO - integration_test - Warmstart k=0: x0=0.9167519035750911 , y0=0.2538238050421341 , psi0=0.47999999477672844 , v0=2.2000000105688517 , spline0=1.0200000036094252 , a0=0.0 , w0=0.0
2026-01-24 02:02:17,695 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:17,696 - INFO - integration_test - Dyn residual k=0: pred=[1.111890788054625, 0.3554152231300445, 0.47999999477672844, 2.2000000105688517, 1.2400000046663104], ws=[1.111890788054625, 0.3554152231300445, 0.4799999947767284, 2.2000000105688517, 0.8993704490126062], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, 0.34062955565370423], res_norm=3.406e-01
2026-01-24 02:02:17,697 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296725341588, 0.45700664121795487, 0.4799999947767284, 2.2000000105688517, 1.1193704500694914], ws=[1.3070296725341588, 0.45700664121795487, 0.4799999947767284, 2.2000000105688517, 0.7423514251845933], res=[0.0, 0.0, 0.0, 0.0, 0.37701902488489814], res_norm=3.770e-01
2026-01-24 02:02:17,698 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685570136927, 0.5585980593058653, 0.4799999947767284, 2.2000000105688517, 0.9623514262414785], ws=[1.5021685570136927, 0.5585980593058653, 0.4799999947767284, 2.2000000105688517, 1.3392548071283394], res=[0.0, 0.0, 0.0, 0.0, -0.37690338088686093], res_norm=3.769e-01
2026-01-24 02:02:17,715 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:18,791 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:18,814 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:18,863 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:18,888 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:18,936 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:18,960 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:19,012 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:19,035 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:19,083 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:19,105 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:19,155 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:19,180 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:19,228 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:19,249 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:19,296 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:19,317 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:19,364 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:19,387 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:19,433 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:19,454 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:19,502 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:20,122 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 02:02:20,127 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:20,128 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1875 scenarios available
2026-01-24 02:02:20,250 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1875 trajectory groups with 18750 total points
2026-01-24 02:02:20,250 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:20,388 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:20,401 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 02:02:20,401 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:20,401 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 02:02:20,401 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000193671537, 'w': 0.799999998815565}
2026-01-24 02:02:20,401 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:20,401 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:20,403 - INFO - integration_test - Step 6 completed in 4.639s
2026-01-24 02:02:20,466 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 02:02:20,467 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623086 0.36819144 0.55999999 2.40000001 1.26      ]
2026-01-24 02:02:20,467 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 02:02:20,467 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 02:02:20,468 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:21,490 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 02:02:21,490 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 02:02:22,459 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:22,486 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:22,487 - INFO - integration_test - Warmstart k=0: x0=1.1162308643394891 , y0=0.36819144338526455 , psi0=0.559999994658285 , v0=2.400000012505567 , spline0=1.260000004859982 , a0=0.0 , w0=0.0
2026-01-24 02:02:22,487 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:22,488 - INFO - integration_test - Dyn residual k=0: pred=[1.3195720927232364, 0.49567613046436415, 0.559999994658285, 2.400000012505567, 1.5000000061105387], ws=[1.3195720927232364, 0.4956761304643642, 0.559999994658285, 2.400000012505567, 1.2595927556539597], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, 0.24040725045657907], res_norm=2.404e-01
2026-01-24 02:02:22,489 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133211069836, 0.6231608175434638, 0.559999994658285, 2.400000012505567, 1.4995927569045164], ws=[1.5229133211069836, 0.6231608175434639, 0.559999994658285, 2.400000012505567, 1.3345406024980415], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, 0.16505215440647492], res_norm=1.651e-01
2026-01-24 02:02:22,490 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545494907309, 0.7506455046225635, 0.559999994658285, 2.400000012505567, 1.5745406037485983], ws=[1.7262545494907309, 0.7506455046225635, 0.559999994658285, 2.400000012505567, 1.7049896017923105], res=[0.0, 0.0, 0.0, 0.0, -0.13044899804371224], res_norm=1.304e-01
2026-01-24 02:02:22,507 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:23,515 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:23,538 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:23,584 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:23,606 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:23,652 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:23,673 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:23,719 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:23,740 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:23,786 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:23,806 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:23,851 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:23,872 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:23,915 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:23,936 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:23,985 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:24,006 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:24,053 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:24,074 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:24,119 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:24,140 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:24,189 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:24,828 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 02:02:24,832 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:24,832 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:02:24,946 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:02:24,947 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:25,069 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:25,080 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 02:02:25,081 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:25,081 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 02:02:25,081 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019611801, 'w': 0.7999999941253876}
2026-01-24 02:02:25,081 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:25,081 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:25,082 - INFO - integration_test - Step 7 completed in 4.616s
2026-01-24 02:02:25,135 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 02:02:25,140 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243449 0.50942444 0.63999999 2.60000001 1.52000001]
2026-01-24 02:02:25,141 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 02:02:25,141 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 02:02:25,141 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:26,031 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 02:02:26,031 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 02:02:26,989 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:27,015 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:27,015 - INFO - integration_test - Warmstart k=0: x0=1.3224344893492552 , y0=0.5094244389270335 , psi0=0.6399999940708238 , v0=2.6000000144667474 , spline0=1.5200000063066568 , a0=0.0 , w0=0.0
2026-01-24 02:02:27,015 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:27,016 - INFO - integration_test - Dyn residual k=0: pred=[1.530979388480171, 0.6646952533087035, 0.6399999940708238, 2.6000000144667474, 1.7800000077533316], ws=[1.530979388480171, 0.6646952533087035, 0.6399999940708239, 2.6000000144667474, 1.1214729386637534], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.6585270690895781], res_norm=6.585e-01
2026-01-24 02:02:27,018 - INFO - integration_test - Dyn residual k=1: pred=[1.7395242876110868, 0.8199660676903735, 0.6399999940708239, 2.6000000144667474, 1.3814729401104282], ws=[1.7395242876110868, 0.8199660676903735, 0.6399999940708239, 2.6000000144667474, 1.7100576250396144], res=[0.0, 0.0, 0.0, 0.0, -0.32858468492918624], res_norm=3.286e-01
2026-01-24 02:02:27,019 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691867420026, 0.9752368820720435, 0.6399999940708239, 2.6000000144667474, 1.9700576264862892], ws=[1.9480691867420026, 0.9752368820720436, 0.6399999940708239, 2.6000000144667474, 1.5727892659575433], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, 0.3972683605287459], res_norm=3.973e-01
2026-01-24 02:02:27,037 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,128 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:28,151 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,202 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:28,227 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,279 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:28,301 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,348 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:28,371 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,419 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:28,441 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,492 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:28,513 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,563 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:28,585 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,631 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:28,655 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,707 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:28,732 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,783 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:28,806 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:28,854 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:29,540 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 02:02:29,545 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:29,546 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:02:29,675 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:02:29,676 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:29,823 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:29,838 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 02:02:29,838 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:29,838 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 02:02:29,838 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199994146, 'w': 0.8000000099881621}
2026-01-24 02:02:29,838 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:29,838 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:29,839 - INFO - integration_test - Step 8 completed in 4.699s
2026-01-24 02:02:29,903 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 02:02:29,905 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223933 0.67925694 0.72       2.80000002 1.80000001]
2026-01-24 02:02:29,905 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 02:02:29,905 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 02:02:29,906 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:30,864 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 02:02:30,864 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 02:02:31,811 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:31,837 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:31,837 - INFO - integration_test - Warmstart k=0: x0=1.532239331047182 , y0=0.6792569369023487 , psi0=0.71999999506964 , v0=2.8000000164666887 , spline0=1.8000000079533256 , a0=0.0 , w0=0.0
2026-01-24 02:02:31,837 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:31,838 - INFO - integration_test - Dyn residual k=0: pred=[1.742744937354889, 0.863884645102281, 0.71999999506964, 2.8000000164666887, 2.0800000095999946], ws=[1.742744937354889, 0.863884645102281, 0.7199999950696401, 2.8000000164666887, 1.744244773166932], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.3357552364330627], res_norm=3.358e-01
2026-01-24 02:02:31,839 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505436625955, 1.0485123533022134, 0.7199999950696401, 2.8000000164666887, 2.0242447748136008], ws=[1.9532505436625955, 1.0485123533022134, 0.7199999950696401, 2.8000000164666887, 1.8388527231896696], res=[0.0, 0.0, 0.0, 0.0, 0.18539205162393113], res_norm=1.854e-01
2026-01-24 02:02:31,840 - INFO - integration_test - Dyn residual k=2: pred=[2.163756149970302, 1.2331400615021457, 0.7199999950696401, 2.8000000164666887, 2.1188527248363385], ws=[2.163756149970302, 1.2331400615021457, 0.7199999950696401, 2.8000000164666887, 1.931995570511884], res=[0.0, 0.0, 0.0, 0.0, 0.18685715432445438], res_norm=1.869e-01
2026-01-24 02:02:31,855 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:32,924 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:32,945 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:32,990 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:33,009 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,055 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:33,075 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,118 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:33,139 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,184 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:33,205 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,252 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:33,272 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,316 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:33,336 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,384 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:33,405 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,452 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:33,474 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,519 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:33,540 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:33,586 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:34,259 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 02:02:34,265 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:34,265 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:02:34,280 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:02:34,281 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:34,521 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:34,534 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 02:02:34,535 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:34,535 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 02:02:34,535 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199972154, 'w': 0.8000000099129634}
2026-01-24 02:02:34,535 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:34,535 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:34,537 - INFO - integration_test - Step 9 completed in 4.632s
2026-01-24 02:02:34,599 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 02:02:34,601 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.7422939  0.87908751 0.8        3.00000002 2.10000001]
2026-01-24 02:02:34,602 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 02:02:34,602 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 02:02:34,602 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:35,625 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 02:02:35,625 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 02:02:36,712 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:36,740 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:36,740 - INFO - integration_test - Warmstart k=0: x0=1.7422938980994713 , y0=0.8790875057996652 , psi0=0.7999999960609363 , v0=3.00000001846641 , spline0=2.1000000097999667 , a0=0.0 , w0=0.0
2026-01-24 02:02:36,740 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:36,741 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059130379016, 1.0942943335709097, 0.7999999960609363, 3.00000001846641, 2.4000000116466076], ws=[1.9513059117513343, 1.0942943322462104, 0.7999999960609365, 3.0, 2.1149292461503784], res=[1.2865672971429376e-09, 1.3246992391913182e-09, -2.220446049250313e-16, 1.8466410178774595e-08, 0.28507076549622923], res_norm=2.851e-01
2026-01-24 02:02:36,742 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179254031972, 1.3095011586927556, 0.7999999960609365, 3.0, 2.414929246150378], ws=[2.1603179254031972, 1.3095011586927556, 0.7999999960609365, 3.0, 2.219051377650122], res=[0.0, 0.0, 0.0, 0.0, 0.195877868500256], res_norm=1.959e-01
2026-01-24 02:02:36,743 - INFO - integration_test - Dyn residual k=2: pred=[2.3693299390550604, 1.5247079851393008, 0.7999999960609365, 3.0, 2.519051377650122], ws=[2.3693299390550604, 1.5247079851393008, 0.7999999960609365, 3.0, 2.352904272431255], res=[0.0, 0.0, 0.0, 0.0, 0.166147105218867], res_norm=1.661e-01
2026-01-24 02:02:36,760 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:37,836 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:37,871 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:37,960 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:37,988 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,037 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:38,059 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,105 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:38,128 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,173 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:38,195 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,245 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:38,266 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,312 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:38,333 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,380 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:38,404 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,451 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:38,474 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,518 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:38,540 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:38,586 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:39,215 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 02:02:39,222 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:39,222 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:02:39,236 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:02:39,237 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:39,400 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:39,424 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 02:02:39,424 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:39,424 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 02:02:39,424 - INFO - integration_test -   Control dict from planner: {'a': 1.1528013923985276e-07, 'w': 0.8000000031392197}
2026-01-24 02:02:39,425 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:39,425 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:39,427 - INFO - integration_test - Step 10 completed in 4.826s
2026-01-24 02:02:39,498 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 02:02:39,499 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247936 1.10242088 0.88       3.00000003 2.40000001]
2026-01-24 02:02:39,499 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 02:02:39,499 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 02:02:39,500 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:40,530 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 02:02:40,530 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 02:02:41,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:41,571 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:41,571 - INFO - integration_test - Warmstart k=0: x0=1.9424793584004088 , y0=1.102420879335121 , psi0=0.8799999963748583 , v0=3.0000000299944243 , spline0=2.400000012799409 , a0=0.0 , w0=0.0
2026-01-24 02:02:41,571 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:41,572 - INFO - integration_test - Dyn residual k=0: pred=[2.1336247044092924, 1.3336425446236695, 0.8799999963748583, 3.0000000299944243, 2.7000000157988513], ws=[2.133624702498194, 1.3336425423118827, 0.8799999963748579, 3.0, 2.4689439098994397], res=[1.911098390650068e-09, 2.311786762021484e-09, 3.3306690738754696e-16, 2.9994424277646203e-08, 0.2310561058994116], res_norm=2.311e-01
2026-01-24 02:02:41,573 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700465959795, 1.5648642052886443, 0.8799999963748579, 3.0, 2.7689439098994395], ws=[2.3247700465959795, 1.5648642052886446, 0.8799999963748579, 3.0, 2.3399738006344366], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, 0.4289701092650029], res_norm=4.290e-01
2026-01-24 02:02:41,574 - INFO - integration_test - Dyn residual k=2: pred=[2.515915390693765, 1.7960858682654064, 0.8799999963748579, 3.0, 2.6399738006344364], ws=[2.515915390693765, 1.7960858682654064, 0.8799999963748579, 3.0, 2.710616063579885], res=[0.0, 0.0, 0.0, 0.0, -0.0706422629454484], res_norm=7.064e-02
2026-01-24 02:02:41,591 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:42,633 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:42,658 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:42,706 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:42,729 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:42,780 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:42,803 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:42,855 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:42,880 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:42,932 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:42,956 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:43,006 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:43,030 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:43,081 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:43,103 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:43,152 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:43,175 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:43,225 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:43,249 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:43,298 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:43,321 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:43,371 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:44,224 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 02:02:44,230 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:44,230 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:02:44,246 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:02:44,247 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:44,441 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:44,455 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 02:02:44,456 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:44,456 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 02:02:44,456 - INFO - integration_test -   Control dict from planner: {'a': 1.0582453722005106e-11, 'w': 0.10707555193704825}
2026-01-24 02:02:44,456 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:44,456 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:44,458 - INFO - integration_test - Step 11 completed in 4.959s
2026-01-24 02:02:44,518 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 02:02:44,522 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13238315 1.33466147 0.89070755 3.00000003 2.70000002]
2026-01-24 02:02:44,522 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.539m, drift=0.242m)
2026-01-24 02:02:44,522 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 02:02:44,523 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:45,554 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.132, 1.335), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 02:02:45,554 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 02:02:46,593 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:46,620 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:46,620 - INFO - integration_test - Warmstart k=0: x0=2.132383154362566 , y0=1.3346614662162997 , psi0=0.8907075515685631 , v0=3.0000000299954825 , spline0=2.7000000157989574 , a0=0.0 , w0=0.0
2026-01-24 02:02:46,620 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:46,621 - INFO - integration_test - Dyn residual k=0: pred=[2.3210417714692793, 1.5679165368816799, 0.8907075515685631, 3.0000000299954825, 3.000000018798506], ws=[2.3210417695829775, 1.5679165345494805, 0.8907075515685632, 3.0, 2.550649831866928], res=[1.88630178143967e-09, 2.332199322552242e-09, -1.1102230246251565e-16, 2.9995482542233276e-08, 0.4493501869315777], res_norm=4.494e-01
2026-01-24 02:02:46,622 - INFO - integration_test - Dyn residual k=1: pred=[2.5097003848033888, 1.8011716028826614, 0.8907075515685632, 3.0, 2.850649831866928], ws=[2.5097003848033888, 1.8011716028826614, 0.8907075515685632, 3.0, 2.954064580486306], res=[0.0, 0.0, 0.0, 0.0, -0.10341474861937794], res_norm=1.034e-01
2026-01-24 02:02:46,623 - INFO - integration_test - Dyn residual k=2: pred=[2.6983590000238, 2.0344266712158423, 0.8907075515685632, 3.0, 3.2540645804863058], ws=[2.6983590000238, 2.0344266712158423, 0.8907075515685632, 3.0, 3.298555888405244], res=[0.0, 0.0, 0.0, 0.0, -0.04449130791893818], res_norm=4.449e-02
2026-01-24 02:02:46,641 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:47,686 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:47,712 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:47,784 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:47,814 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:47,868 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:47,892 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:47,944 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:47,967 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:48,014 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:48,036 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:48,083 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:48,106 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:48,155 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:48,177 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:48,226 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:48,249 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:48,295 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:48,317 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:48,363 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:48,384 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:48,431 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:49,095 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 02:02:49,102 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:49,102 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:02:49,117 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:02:49,118 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:49,324 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:49,343 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 02:02:49,343 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:49,343 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 02:02:49,343 - INFO - integration_test -   Control dict from planner: {'a': -3.0893703463210935e-07, 'w': -0.3107056366328074}
2026-01-24 02:02:49,343 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:49,344 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:49,345 - INFO - integration_test - Step 12 completed in 4.823s
2026-01-24 02:02:49,418 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 02:02:49,420 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32463481 1.56494838 0.85963699 3.         3.00000002]
2026-01-24 02:02:49,421 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.514m, drift=0.132m)
2026-01-24 02:02:49,421 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 02:02:49,421 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:50,531 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.565), path_start=(0.000, 0.000), dist=2.802m
2026-01-24 02:02:50,531 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 02:02:51,545 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:51,575 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:51,576 - INFO - integration_test - Warmstart k=0: x0=2.3246348092118634 , y0=1.5649483786154559 , psi0=0.8596369879052823 , v0=2.999999999101779 , spline0=3.0000000157091353 , a0=0.0 , w0=0.0
2026-01-24 02:02:51,576 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:51,577 - INFO - integration_test - Dyn residual k=0: pred=[2.520448568508991, 1.792230079629931, 0.8596369879052823, 2.999999999101779, 3.300000015619313], ws=[2.520448568508991, 1.792230079629931, 0.8596369879052821, 2.999999999101779, 2.71725193799752], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.582748077621793], res_norm=5.827e-01
2026-01-24 02:02:51,577 - INFO - integration_test - Dyn residual k=1: pred=[2.7162623278061186, 2.019511780644406, 0.8596369879052821, 2.999999999101779, 3.017251937907698], ws=[2.7162623278061186, 2.019511780644406, 0.8596369879052821, 2.999999999101779, 3.2933546529987168], res=[0.0, 0.0, 0.0, 0.0, -0.2761027150910187], res_norm=2.761e-01
2026-01-24 02:02:51,578 - INFO - integration_test - Dyn residual k=2: pred=[2.9120760871032463, 2.246793481658881, 0.8596369879052821, 2.999999999101779, 3.5933546529088947], ws=[2.9120760871032463, 2.246793481658881, 0.8596369879052821, 2.999999999101779, 3.444477199682254], res=[0.0, 0.0, 0.0, 0.0, 0.1488774532266408], res_norm=1.489e-01
2026-01-24 02:02:51,595 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:52,580 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:52,601 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:52,649 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:52,671 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:52,715 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:52,737 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:52,781 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:52,803 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:52,850 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:52,873 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:52,923 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:52,944 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:52,990 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:53,011 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:53,058 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:53,080 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:53,126 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:53,146 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:53,189 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:53,208 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:53,256 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:53,852 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 02:02:53,858 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:53,858 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:02:53,871 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:02:53,872 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:54,209 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:54,224 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 02:02:54,225 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:54,225 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 02:02:54,225 - INFO - integration_test -   Control dict from planner: {'a': 3.0823182331002983e-07, 'w': -0.09641364742594008}
2026-01-24 02:02:54,225 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:54,225 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:54,226 - INFO - integration_test - Step 13 completed in 4.806s
2026-01-24 02:02:54,290 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 02:02:54,291 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52154118 1.79128261 0.84999562 3.00000003 3.30000002]
2026-01-24 02:02:54,291 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.509m, drift=0.432m)
2026-01-24 02:02:54,291 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 02:02:54,292 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:55,265 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 02:02:55,265 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 02:02:56,280 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:02:56,308 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:02:56,308 - INFO - integration_test - Warmstart k=0: x0=2.521541180264739 , y0=1.7912826109863615 , psi0=0.8499956231626883 , v0=3.000000029924961 , spline0=3.3000000187016316 , a0=0.0 , w0=0.0
2026-01-24 02:02:56,308 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:02:56,309 - INFO - integration_test - Dyn residual k=0: pred=[2.7195371124729766, 2.016665868182828, 0.8499956231626883, 3.000000029924961, 3.600000021694128], ws=[2.7195371104979698, 2.016665865934633, 0.8499956231626884, 3.0, 3.064169761698842], res=[1.9750068247503805e-09, 2.2481949635277942e-09, -1.1102230246251565e-16, 2.9924961175709086e-08, 0.535830259995286], res_norm=5.358e-01
2026-01-24 02:02:56,310 - INFO - integration_test - Dyn residual k=1: pred=[2.9175330407312003, 2.2420491208829048, 0.8499956231626884, 3.0, 3.364169761698842], ws=[2.9175330407312003, 2.2420491208829048, 0.8499956231626884, 3.0, 3.692721085250412], res=[0.0, 0.0, 0.0, 0.0, -0.32855132355157], res_norm=3.286e-01
2026-01-24 02:02:56,311 - INFO - integration_test - Dyn residual k=2: pred=[3.115528970964431, 2.4674323758311765, 0.8499956231626884, 3.0, 3.9927210852504125], ws=[3.115528970964431, 2.4674323758311765, 0.8499956231626884, 3.0, 3.555076366446857], res=[0.0, 0.0, 0.0, 0.0, 0.4376447188035555], res_norm=4.376e-01
2026-01-24 02:02:56,329 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:57,437 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:57,462 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:57,515 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:57,539 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:57,592 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:57,615 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:57,668 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:57,694 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:57,744 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:57,769 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:57,819 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:57,841 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:57,892 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:57,918 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:57,971 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:57,994 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:58,041 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:02:58,064 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:58,138 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:58,168 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:02:58,217 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:02:58,857 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 02:02:58,864 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:02:58,864 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:02:58,878 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:02:58,879 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:02:59,125 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:02:59,143 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 02:02:59,143 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:02:59,143 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 02:02:59,143 - INFO - integration_test -   Control dict from planner: {'a': -6.599766579902241e-08, 'w': -0.15921130854662988}
2026-01-24 02:02:59,143 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:02:59,143 - INFO - integration_test -   Planner output success: True
2026-01-24 02:02:59,145 - INFO - integration_test - Step 14 completed in 4.854s
2026-01-24 02:02:59,209 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 02:02:59,211 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72132289 2.01508022 0.83407449 3.00000002 3.60000002]
2026-01-24 02:02:59,211 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.450m, drift=0.322m)
2026-01-24 02:02:59,211 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 02:02:59,212 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:00,174 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.721, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 02:03:00,174 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 02:03:01,228 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:01,255 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:01,255 - INFO - integration_test - Warmstart k=0: x0=2.7213228878815166 , y0=2.0150802200022238 , psi0=0.8340744923080253 , v0=3.0000000233251947 , spline0=3.600000021034151 , a0=0.0 , w0=0.0
2026-01-24 02:03:01,255 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:01,256 - INFO - integration_test - Dyn residual k=0: pred=[2.9228819306682725, 2.237282725997089, 0.8340744923080253, 3.0000000233251947, 3.9000000233666703], ws=[2.922881929101138, 2.23728272426945, 0.8340744923080252, 3.0, 3.208156077733786], res=[1.56713442223122e-09, 1.727638920812069e-09, 1.1102230246251565e-16, 2.332519466463623e-08, 0.6918439456328844], res_norm=6.918e-01
2026-01-24 02:03:01,257 - INFO - integration_test - Dyn residual k=1: pred=[3.1244409703207596, 2.4594852285366766, 0.8340744923080252, 3.0, 3.508156077733786], ws=[3.1244409703207596, 2.4594852285366766, 0.8340744923080252, 3.0, 3.575652906076625], res=[0.0, 0.0, 0.0, 0.0, -0.06749682834283899], res_norm=6.750e-02
2026-01-24 02:03:01,258 - INFO - integration_test - Dyn residual k=2: pred=[3.326000011540381, 2.681687732803903, 0.8340744923080252, 3.0, 3.875652906076625], ws=[3.326000011540381, 2.681687732803903, 0.8340744923080252, 3.0, 3.926133598638081], res=[0.0, 0.0, 0.0, 0.0, -0.05048069256145604], res_norm=5.048e-02
2026-01-24 02:03:01,274 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,362 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:02,383 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,432 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:02,456 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,503 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:02,527 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,574 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:02,596 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,643 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:02,667 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,716 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:02,740 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,792 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:02,817 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,873 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:02,899 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:02,956 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:02,980 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:03,032 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:03,059 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:03,109 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:03,981 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 02:03:03,991 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:03,991 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:03:04,005 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:03:04,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:04,344 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:04,364 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 02:03:04,364 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:04,364 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 02:03:04,364 - INFO - integration_test -   Control dict from planner: {'a': 6.674689406681225e-08, 'w': -0.13025288580886157}
2026-01-24 02:03:04,364 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:04,364 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:04,366 - INFO - integration_test - Step 15 completed in 5.155s
2026-01-24 02:03:04,432 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 02:03:04,434 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92432334 2.23596378 0.8210492  3.00000003 3.90000002]
2026-01-24 02:03:04,435 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.417m, drift=0.213m)
2026-01-24 02:03:04,435 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 02:03:04,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:05,439 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.924, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 02:03:05,439 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 02:03:06,441 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:06,471 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:06,472 - INFO - integration_test - Warmstart k=0: x0=2.9243233370119195 , y0=2.235963779430058 , psi0=0.8210492037271392 , v0=3.000000029999884 , spline0=3.9000000240341395 , a0=0.0 , w0=0.0
2026-01-24 02:03:06,472 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:06,473 - INFO - integration_test - Dyn residual k=0: pred=[3.1287594523546227, 2.4555221464844204, 0.8210492037271392, 3.000000029999884, 4.200000027034128], ws=[3.1287594503102696, 2.455522144288845, 0.8210492037271391, 3.0, 3.5831722365686542], res=[2.044353131225307e-09, 2.19557527714187e-09, 1.1102230246251565e-16, 2.99998839103921e-08, 0.6168277904654738], res_norm=6.168e-01
2026-01-24 02:03:06,474 - INFO - integration_test - Dyn residual k=1: pred=[3.3331955636086197, 2.675080509147632, 0.8210492037271391, 3.0, 3.8831722365686545], ws=[3.3331955636086197, 2.675080509147632, 0.8210492037271391, 3.0, 4.147915342177954], res=[0.0, 0.0, 0.0, 0.0, -0.26474310560929926], res_norm=2.647e-01
2026-01-24 02:03:06,475 - INFO - integration_test - Dyn residual k=2: pred=[3.53763167690697, 2.894638874006419, 0.8210492037271391, 3.0, 4.447915342177954], ws=[3.53763167690697, 2.894638874006419, 0.8210492037271391, 3.0, 4.268991106939927], res=[0.0, 0.0, 0.0, 0.0, 0.1789242352380267], res_norm=1.789e-01
2026-01-24 02:03:06,493 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:07,724 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:07,745 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:07,787 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:07,808 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:07,852 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:07,875 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:07,924 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:07,946 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:07,989 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:08,008 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:08,056 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:08,076 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:08,121 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:08,142 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:08,185 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:08,207 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:08,252 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:08,281 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:08,361 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:08,385 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:08,432 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:08,991 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 02:03:08,999 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:08,999 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:03:09,014 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:03:09,015 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:09,243 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:09,259 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 02:03:09,260 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:09,260 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 02:03:09,260 - INFO - integration_test -   Control dict from planner: {'a': -5.714163153146636e-08, 'w': -0.131313502527529}
2026-01-24 02:03:09,260 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:09,260 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:09,261 - INFO - integration_test - Step 16 completed in 4.828s
2026-01-24 02:03:09,317 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 02:03:09,325 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.13019511 2.45417359 0.80791785 3.00000002 4.20000003]
2026-01-24 02:03:09,326 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.415m, drift=0.103m)
2026-01-24 02:03:09,326 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 02:03:09,326 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:10,340 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.130, 2.454), path_start=(0.000, 0.000), dist=3.978m
2026-01-24 02:03:10,341 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 02:03:11,335 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:11,364 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:11,364 - INFO - integration_test - Warmstart k=0: x0=3.1301951051725974 , y0=2.454173594675698 , psi0=0.8079178534743863 , v0=3.0000000242857205 , spline0=4.200000026462711 , a0=0.0 , w0=0.0
2026-01-24 02:03:11,364 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:11,365 - INFO - integration_test - Dyn residual k=0: pred=[3.3374966096357217, 2.671028587019588, 0.8079178534743863, 3.0000000242857205, 4.500000028891283], ws=[3.3374966079575663, 2.6710285852640943, 0.807917853474386, 3.0, 4.167808556520829], res=[1.6781553924261061e-09, 1.7554935283214945e-09, 2.220446049250313e-16, 2.4285720545691447e-08, 0.33219147237045377], res_norm=3.322e-01
2026-01-24 02:03:11,366 - INFO - integration_test - Dyn residual k=1: pred=[3.5447981107425353, 2.8878835758524906, 0.807917853474386, 3.0, 4.467808556520829], ws=[3.5447981107425353, 2.8878835758524906, 0.807917853474386, 3.0, 4.539556017049079], res=[0.0, 0.0, 0.0, 0.0, -0.07174746052824954], res_norm=7.175e-02
2026-01-24 02:03:11,367 - INFO - integration_test - Dyn residual k=2: pred=[3.752099613527504, 3.104738566440887, 0.807917853474386, 3.0, 4.839556017049079], ws=[3.752099613527504, 3.104738566440887, 0.807917853474386, 3.0, 4.413455327742024], res=[0.0, 0.0, 0.0, 0.0, 0.4261006893070549], res_norm=4.261e-01
2026-01-24 02:03:11,384 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:12,473 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:12,495 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:12,540 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:12,564 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:12,609 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:12,632 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:12,681 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:12,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:12,752 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:12,775 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:12,819 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:12,842 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:12,894 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:12,919 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:12,969 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:12,991 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:13,037 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:13,059 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:13,106 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:13,128 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:13,176 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:13,848 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 02:03:13,857 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:13,857 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:03:14,042 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:03:14,043 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:14,254 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:14,273 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 02:03:14,273 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:14,273 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 02:03:14,273 - INFO - integration_test -   Control dict from planner: {'a': 5.714166796378559e-08, 'w': -0.10693590225536835}
2026-01-24 02:03:14,273 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:14,273 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:14,275 - INFO - integration_test - Step 17 completed in 4.950s
2026-01-24 02:03:14,332 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 02:03:14,334 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.33865213 2.66991607 0.79722426 3.00000003 4.50000003]
2026-01-24 02:03:14,334 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.407m, drift=0.403m)
2026-01-24 02:03:14,334 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 02:03:14,335 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:15,413 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.339, 2.670), path_start=(0.000, 0.000), dist=4.275m
2026-01-24 02:03:15,413 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 02:03:16,394 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:16,422 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:16,422 - INFO - integration_test - Warmstart k=0: x0=3.3386521271018905 , y0=2.6699160661421897 , psi0=0.7972242632488494 , v0=3.0000000299998875 , spline0=4.5000000294627 , a0=0.0 , w0=0.0
2026-01-24 02:03:16,422 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:16,423 - INFO - integration_test - Dyn residual k=0: pred=[3.5482606935461645, 2.8845419049248715, 0.7972242632488494, 3.0000000299998875, 4.800000032462688], ws=[3.5482606914500865, 2.884541902778621, 0.7972242632488493, 3.0, 4.043302672522381], res=[2.0960779778533833e-09, 2.1462502886038237e-09, 1.1102230246251565e-16, 2.999988746310578e-08, 0.7566973599403077], res_norm=7.567e-01
2026-01-24 02:03:16,424 - INFO - integration_test - Dyn residual k=1: pred=[3.7578692557982825, 3.0991677394150527, 0.7972242632488493, 3.0, 4.3433026725223804], ws=[3.7578692557982825, 3.0991677394150527, 0.7972242632488493, 3.0, 4.657126391554877], res=[0.0, 0.0, 0.0, 0.0, -0.31382371903249684], res_norm=3.138e-01
2026-01-24 02:03:16,424 - INFO - integration_test - Dyn residual k=2: pred=[3.9674778201464784, 3.3137935760514843, 0.7972242632488493, 3.0, 4.957126391554877], ws=[3.9674778201464784, 3.3137935760514843, 0.7972242632488493, 3.0, 4.766370349117305], res=[0.0, 0.0, 0.0, 0.0, 0.19075604243757205], res_norm=1.908e-01
2026-01-24 02:03:16,442 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:17,450 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:17,474 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:17,523 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:17,546 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:17,590 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:17,612 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:17,675 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:17,698 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:17,749 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:17,771 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:17,820 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:17,843 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:17,895 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:17,920 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:17,969 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:17,991 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:18,038 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:18,059 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:18,106 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:18,128 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:18,174 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:19,003 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 02:03:19,022 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:19,022 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:03:19,240 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:03:19,241 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:19,556 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:19,571 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 02:03:19,571 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:19,571 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 02:03:19,571 - INFO - integration_test -   Control dict from planner: {'a': -2.723988550463253e-07, 'w': -0.11115841791671587}
2026-01-24 02:03:19,572 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:19,572 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:19,573 - INFO - integration_test - Step 18 completed in 5.240s
2026-01-24 02:03:19,639 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 02:03:19,641 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54944924 2.88337251 0.78610842 3.         4.80000003]
2026-01-24 02:03:19,642 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.357m, drift=0.293m)
2026-01-24 02:03:19,642 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-24 02:03:19,643 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:20,595 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.549, 2.883), path_start=(0.000, 0.000), dist=4.573m
2026-01-24 02:03:20,595 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 02:03:21,526 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:21,552 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:21,552 - INFO - integration_test - Warmstart k=0: x0=3.5494492371597266 , y0=2.8833725082194475 , psi0=0.7861084214571779 , v0=3.000000002760002 , spline0=4.8000000297387 , a0=0.0 , w0=0.0
2026-01-24 02:03:21,552 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:21,553 - INFO - integration_test - Dyn residual k=0: pred=[3.761430549729502, 3.095655157738421, 0.7861084214571779, 3.000000002760002, 5.100000030014701], ws=[3.761430549534479, 3.0956551575431206, 0.7861084214571781, 3.0, 4.404788431456921], res=[1.9502310877328455e-10, 1.95300220440231e-10, -2.220446049250313e-16, 2.7600020047202634e-09, 0.6952115985577798], res_norm=6.952e-01
2026-01-24 02:03:21,553 - INFO - integration_test - Dyn residual k=1: pred=[3.9734118619092316, 3.3079378068667937, 0.7861084214571781, 3.0, 4.704788431456921], ws=[3.9734118619092316, 3.3079378068667937, 0.7861084214571781, 3.0, 4.7821772986570705], res=[0.0, 0.0, 0.0, 0.0, -0.07738886720014992], res_norm=7.739e-02
2026-01-24 02:03:21,554 - INFO - integration_test - Dyn residual k=2: pred=[4.185393174283984, 3.520220456190467, 0.7861084214571781, 3.0, 5.08217729865707], ws=[4.185393174283984, 3.520220456190467, 0.7861084214571781, 3.0, 5.36451979594686], res=[0.0, 0.0, 0.0, 0.0, -0.28234249728978966], res_norm=2.823e-01
2026-01-24 02:03:21,569 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:22,557 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:22,576 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:22,619 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:22,641 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:22,684 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:22,705 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:22,749 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:22,770 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:22,812 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:22,835 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:22,885 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:22,906 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:22,954 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:22,973 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:23,014 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:23,036 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:23,081 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:23,102 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:23,145 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:23,164 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:23,208 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:23,893 - INFO - integration_test - Step 19: MPC solve successful
2026-01-24 02:03:23,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:23,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:03:23,921 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:03:23,922 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:24,347 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:24,369 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-24 02:03:24,369 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:24,369 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 02:03:24,370 - INFO - integration_test -   Control dict from planner: {'a': 2.723987801628396e-07, 'w': -0.10355026695792958}
2026-01-24 02:03:24,370 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:24,370 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:24,371 - INFO - integration_test - Step 19 completed in 4.730s
2026-01-24 02:03:24,442 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 02:03:24,443 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.76252585 3.09455384 0.77575339 3.00000003 5.10000003]
2026-01-24 02:03:24,444 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.338m, drift=0.184m)
2026-01-24 02:03:24,444 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-24 02:03:24,445 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:25,615 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.763, 3.095), path_start=(0.000, 0.000), dist=4.872m
2026-01-24 02:03:25,615 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 02:03:26,599 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:26,626 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:26,626 - INFO - integration_test - Warmstart k=0: x0=3.762525848811647 , y0=3.0945538387247344 , psi0=0.7757533947613849 , v0=3.00000002999988 , spline0=5.100000032738688 , a0=0.0 , w0=0.0
2026-01-24 02:03:26,626 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:26,627 - INFO - integration_test - Dyn residual k=0: pred=[3.9766939516311757, 3.30463007615933, 0.7757533947613849, 3.00000002999988, 5.4000000357386755], ws=[3.9766939494895035, 3.3046300740585757, 0.7757533947613848, 3.0, 4.7662379023978705], res=[2.1416721729394794e-09, 2.1007542372331045e-09, 1.1102230246251565e-16, 2.999987991358921e-08, 0.633762133340805], res_norm=6.338e-01
2026-01-24 02:03:26,628 - INFO - integration_test - Dyn residual k=1: pred=[4.19086205016736, 3.514706309392417, 0.7757533947613848, 3.0, 5.06623790239787], ws=[4.19086205016736, 3.514706309392417, 0.7757533947613848, 3.0, 4.890729480293214], res=[0.0, 0.0, 0.0, 0.0, 0.1755084221046559], res_norm=1.755e-01
2026-01-24 02:03:26,629 - INFO - integration_test - Dyn residual k=2: pred=[4.405030150845216, 3.724782544726258, 0.7757533947613848, 3.0, 5.190729480293214], ws=[4.405030150845217, 3.724782544726258, 0.7757533947613848, 3.0, 5.52518698293652], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, -0.3344575026433061], res_norm=3.345e-01
2026-01-24 02:03:26,645 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:27,662 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:27,685 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:27,734 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:27,758 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:27,808 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:27,831 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:27,886 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:27,911 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:27,962 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:27,983 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:28,032 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:28,056 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:28,107 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:28,131 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:28,179 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:28,200 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:28,247 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:28,268 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:28,315 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:28,339 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:28,389 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:29,491 - INFO - integration_test - Step 20: MPC solve successful
2026-01-24 02:03:29,503 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:29,503 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:03:29,516 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:03:29,517 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:29,769 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:29,787 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-24 02:03:29,787 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:29,787 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 02:03:29,787 - INFO - integration_test -   Control dict from planner: {'a': -4.936183677340628e-08, 'w': 0.7999999131449808}
2026-01-24 02:03:29,787 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:29,787 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:29,789 - INFO - integration_test - Step 20 completed in 5.346s
2026-01-24 02:03:29,844 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 02:03:29,847 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.96806701 3.31296822 0.85575339 3.00000003 5.40000004]
2026-01-24 02:03:29,847 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.344m, drift=0.074m)
2026-01-24 02:03:29,847 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-24 02:03:29,848 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:30,755 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.968, 3.313), path_start=(0.000, 0.000), dist=5.169m
2026-01-24 02:03:30,755 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 02:03:31,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:31,823 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:31,823 - INFO - integration_test - Warmstart k=0: x0=3.9680670136369804 , y0=3.312968224747361 , psi0=0.855753386075883 , v0=3.0000000250636965 , spline0=5.400000035245058 , a0=0.0 , w0=0.0
2026-01-24 02:03:31,823 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:31,824 - INFO - integration_test - Dyn residual k=0: pred=[4.164761967382096, 3.5394877529894724, 0.855753386075883, 3.0000000250636965, 5.700000037751428], ws=[4.164761965738795, 3.539487751097, 0.8557533860758832, 3.0, 5.127954797806655], res=[1.6433006067018141e-09, 1.8924724010105365e-09, -2.220446049250313e-16, 2.506369645161044e-08, 0.5720452399447726], res_norm=5.720e-01
2026-01-24 02:03:31,825 - INFO - integration_test - Dyn residual k=1: pred=[4.361456917840609, 3.766007277446639, 0.8557533860758832, 3.0, 5.427954797806655], ws=[4.361456917840609, 3.766007277446639, 0.8557533860758832, 3.0, 5.505522167376115], res=[0.0, 0.0, 0.0, 0.0, -0.07756736956945964], res_norm=7.757e-02
2026-01-24 02:03:31,826 - INFO - integration_test - Dyn residual k=2: pred=[4.5581518699424235, 3.9925268037962782, 0.8557533860758832, 3.0, 5.805522167376115], ws=[4.5581518699424235, 3.9925268037962782, 0.8557533860758832, 3.0, 5.874263638348482], res=[0.0, 0.0, 0.0, 0.0, -0.06874147097236705], res_norm=6.874e-02
2026-01-24 02:03:31,844 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:32,964 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:32,988 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,034 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:33,059 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,108 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:33,130 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,177 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:33,200 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,247 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:33,269 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,320 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:33,344 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,408 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:33,450 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,511 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:33,536 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,585 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:33,606 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,658 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:33,680 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:33,735 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:34,764 - INFO - integration_test - Step 21: MPC solve successful
2026-01-24 02:03:34,780 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:34,780 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1884 scenarios available
2026-01-24 02:03:35,020 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1884 trajectory groups with 18840 total points
2026-01-24 02:03:35,022 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:35,428 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:35,454 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-24 02:03:35,455 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:35,455 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 02:03:35,455 - INFO - integration_test -   Control dict from planner: {'a': 4.029952360342132e-08, 'w': 0.7999999968671909}
2026-01-24 02:03:35,455 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:35,455 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:35,456 - INFO - integration_test - Step 21 completed in 5.610s
2026-01-24 02:03:35,520 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-24 02:03:35,521 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.15549628 3.54710982 0.93575339 3.00000003 5.70000004]
2026-01-24 02:03:35,522 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.286m, drift=0.374m)
2026-01-24 02:03:35,522 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-24 02:03:35,523 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:36,508 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.155, 3.547), path_start=(0.000, 0.000), dist=5.464m
2026-01-24 02:03:36,508 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-24 02:03:37,404 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:37,430 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:37,430 - INFO - integration_test - Warmstart k=0: x0=4.155496279642897 , y0=3.5471098158128216 , psi0=0.9357533857626021 , v0=3.000000029093649 , spline0=5.700000038154423 , a0=0.0 , w0=0.0
2026-01-24 02:03:37,430 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:37,431 - INFO - integration_test - Dyn residual k=0: pred=[4.333459906694356, 3.7886236853779214, 0.9357533857626021, 3.000000029093649, 6.000000041063788], ws=[4.333459904968485, 3.7886236830357483, 0.9357533857626024, 3.0, 5.738559104297774], res=[1.725871001667656e-09, 2.3421731221162645e-09, -2.220446049250313e-16, 2.909364882341947e-08, 0.26144093676601354], res_norm=2.614e-01
2026-01-24 02:03:37,432 - INFO - integration_test - Dyn residual k=1: pred=[4.511423530294074, 4.030137550258675, 0.9357533857626024, 3.0, 6.038559104297774], ws=[4.511423530294074, 4.030137550258675, 0.9357533857626024, 3.0, 5.634178000185716], res=[0.0, 0.0, 0.0, 0.0, 0.4043811041120584], res_norm=4.044e-01
2026-01-24 02:03:37,433 - INFO - integration_test - Dyn residual k=2: pred=[4.689387155619663, 4.271651417481602, 0.9357533857626024, 3.0, 5.934178000185716], ws=[4.689387155619663, 4.271651417481602, 0.9357533857626024, 3.0, 6.235606440609769], res=[0.0, 0.0, 0.0, 0.0, -0.30142844042405326], res_norm=3.014e-01
2026-01-24 02:03:37,449 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:38,463 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:38,490 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:38,540 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:38,564 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:38,609 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:38,634 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:38,684 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:38,707 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:38,759 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:38,784 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:38,832 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:38,857 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:38,906 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:38,932 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:38,988 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:39,009 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:39,060 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:39,082 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:39,131 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:39,153 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:39,200 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:39,911 - INFO - integration_test - Step 22: MPC solve successful
2026-01-24 02:03:39,921 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:39,921 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:03:40,171 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:03:40,172 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:40,690 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:40,713 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-24 02:03:40,714 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:40,714 - INFO - integration_test - === Applying control at step 22 ===
2026-01-24 02:03:40,714 - INFO - integration_test -   Control dict from planner: {'a': -0.28833700944761276, 'w': 0.8000000090911366}
2026-01-24 02:03:40,714 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:40,714 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:40,716 - INFO - integration_test - Step 22 completed in 5.195s
2026-01-24 02:03:40,789 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-24 02:03:40,790 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.32282274 3.79427656 1.01575339 2.97116633 5.99711667]
2026-01-24 02:03:40,791 - DEBUG - integration_test - Step 23: Using propagated spline 5.9971 (close to path, dist=0.173m, drift=0.261m)
2026-01-24 02:03:40,791 - DEBUG - integration_test -   Set spline state to 5.9971
2026-01-24 02:03:40,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:41,784 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.323, 3.794), path_start=(0.000, 0.000), dist=5.752m
2026-01-24 02:03:41,784 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-24 02:03:42,722 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:42,749 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:42,749 - INFO - integration_test - Warmstart k=0: x0=4.322822739717987 , y0=3.794276557500799 , psi0=1.0157533866717159 , v0=2.9711663281488874 , spline0=5.997116670969311 , a0=0.0 , w0=0.0
2026-01-24 02:03:42,749 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:42,751 - INFO - integration_test - Dyn residual k=0: pred=[4.479397201835298, 4.046789391447772, 1.0157533866717159, 2.9711663281488874, 6.2942333037842], ws=[4.479397201835298, 4.046789391447772, 1.015753386671716, 2.9711663281488874, 5.5905326718183765], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.7037006319658232], res_norm=7.037e-01
2026-01-24 02:03:42,752 - INFO - integration_test - Dyn residual k=1: pred=[4.63597166395261, 4.299302225394746, 1.015753386671716, 2.9711663281488874, 5.887649304633265], ws=[4.63597166395261, 4.299302225394746, 1.015753386671716, 2.9711663281488874, 5.95646120036916], res=[0.0, 0.0, 0.0, 0.0, -0.06881189573589541], res_norm=6.881e-02
2026-01-24 02:03:42,753 - INFO - integration_test - Dyn residual k=2: pred=[4.792546126069921, 4.55181505934172, 1.015753386671716, 2.9711663281488874, 6.253577833184049], ws=[4.792546126069921, 4.55181505934172, 1.015753386671716, 2.9711663281488874, 6.3415330583825815], res=[0.0, 0.0, 0.0, 0.0, -0.08795522519853272], res_norm=8.796e-02
2026-01-24 02:03:42,770 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:43,903 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:43,927 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:43,986 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:44,009 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,061 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:44,086 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,137 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:44,160 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,210 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:44,234 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,285 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:44,310 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,360 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:44,384 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,435 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:44,458 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,507 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:44,530 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,577 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:44,603 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:44,651 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:45,874 - INFO - integration_test - Step 23: MPC solve successful
2026-01-24 02:03:45,889 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:45,889 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:03:45,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:03:45,906 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:46,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:46,386 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=5.997)
2026-01-24 02:03:46,387 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:46,387 - INFO - integration_test - === Applying control at step 23 ===
2026-01-24 02:03:46,387 - INFO - integration_test -   Control dict from planner: {'a': -1.465266091370079, 'w': 0.7999998819558329}
2026-01-24 02:03:46,387 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:46,387 - INFO - integration_test -   Planner output success: True
2026-01-24 02:03:46,388 - INFO - integration_test - Step 23 completed in 5.598s
2026-01-24 02:03:46,462 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-24 02:03:46,464 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.46561232 4.04635747 1.09575337 2.82463972 6.27958064]
2026-01-24 02:03:46,464 - DEBUG - integration_test - Step 24: Using propagated spline 6.2796 (close to path, dist=0.141m, drift=0.134m)
2026-01-24 02:03:46,464 - DEBUG - integration_test -   Set spline state to 6.2796
2026-01-24 02:03:46,465 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:47,428 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.466, 4.046), path_start=(0.000, 0.000), dist=6.026m
2026-01-24 02:03:47,428 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-24 02:03:48,410 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:48,439 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:48,439 - INFO - integration_test - Warmstart k=0: x0=4.465612323160062 , y0=4.046357471500523 , psi0=1.0957533748672992 , v0=2.8246397190118797 , spline0=6.279580642870499 , a0=0.0 , w0=0.0
2026-01-24 02:03:48,439 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:48,440 - INFO - integration_test - Dyn residual k=0: pred=[4.594804746564365, 4.29754507700111, 1.0957533748672992, 2.8246397190118797, 6.562044614771687], ws=[4.594804746564365, 4.29754507700111, 1.0957533748672992, 2.8246397190118797, 5.714191628360227], res=[0.0, 0.0, 0.0, 0.0, 0.8478529864114597], res_norm=8.479e-01
2026-01-24 02:03:48,441 - INFO - integration_test - Dyn residual k=1: pred=[4.723997169968667, 4.548732682501697, 1.0957533748672992, 2.8246397190118797, 5.996655600261415], ws=[4.723997169968667, 4.548732682501697, 1.0957533748672992, 2.8246397190118797, 6.31035164422567], res=[0.0, 0.0, 0.0, 0.0, -0.31369604396425466], res_norm=3.137e-01
2026-01-24 02:03:48,442 - INFO - integration_test - Dyn residual k=2: pred=[4.85318959337297, 4.799920288002284, 1.0957533748672992, 2.8246397190118797, 6.592815616126858], ws=[4.85318959337297, 4.799920288002284, 1.0957533748672992, 2.8246397190118797, 6.400930566777692], res=[0.0, 0.0, 0.0, 0.0, 0.19188504934916573], res_norm=1.919e-01
2026-01-24 02:03:48,459 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:49,515 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:49,538 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:49,585 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:49,607 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:49,654 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:49,676 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:49,738 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:49,773 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:49,826 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:49,848 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:49,894 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:49,914 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:49,959 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:49,979 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:50,022 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:50,043 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:50,088 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:03:50,109 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:50,155 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:50,176 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:50,220 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:03:56,390 - WARNING - integration_test - Step 24: MPC solve failed
2026-01-24 02:03:56,390 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:03:56,402 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:03:56,402 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:03:56,418 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:03:56,420 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:03:56,959 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:03:56,986 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.280)
2026-01-24 02:03:56,986 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:03:56,986 - INFO - integration_test - === Applying control at step 24 ===
2026-01-24 02:03:56,986 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.4676505273522782}
2026-01-24 02:03:56,986 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:03:56,986 - INFO - integration_test -   Planner output success: False
2026-01-24 02:03:56,986 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.4676505273522782}
2026-01-24 02:03:56,988 - INFO - integration_test - Step 24 completed in 10.524s
2026-01-24 02:03:57,057 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-24 02:03:57,062 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.59578154 4.28568793 1.04898832 2.62463972 6.54204461]
2026-01-24 02:03:57,063 - DEBUG - integration_test - Step 25: Using propagated spline 6.5420 (close to path, dist=0.136m, drift=0.397m)
2026-01-24 02:03:57,063 - DEBUG - integration_test -   Set spline state to 6.5420
2026-01-24 02:03:57,064 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:58,058 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.596, 4.286), path_start=(0.000, 0.000), dist=6.284m
2026-01-24 02:03:58,058 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-24 02:03:58,954 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:03:58,980 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:03:58,980 - INFO - integration_test - Warmstart k=0: x0=4.595781543448619 , y0=4.28568792911424 , psi0=1.0489883221320713 , v0=2.6246397190118795 , spline0=6.5420446147716875 , a0=0.0 , w0=0.0
2026-01-24 02:03:58,980 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:03:58,981 - INFO - integration_test - Dyn residual k=0: pred=[4.726606276125124, 4.51322303819912, 1.0489883221320713, 2.6246397190118795, 6.804508586672876], ws=[4.726606276125124, 4.51322303819912, 1.0489883221320717, 2.6246397190118795, 6.0534074337801185], res=[0.0, 0.0, -4.440892098500626e-16, 0.0, 0.7511011528927574], res_norm=7.511e-01
2026-01-24 02:03:58,981 - INFO - integration_test - Dyn residual k=1: pred=[4.857431008801629, 4.740758147284001, 1.0489883221320717, 2.6246397190118795, 6.315871405681307], ws=[4.857431008801629, 4.740758147284001, 1.0489883221320717, 2.6246397190118795, 6.62930732392784], res=[0.0, 0.0, 0.0, 0.0, -0.31343591824653316], res_norm=3.134e-01
2026-01-24 02:03:58,982 - INFO - integration_test - Dyn residual k=2: pred=[4.988255741478134, 4.968293256368881, 1.0489883221320717, 2.6246397190118795, 6.891771295829028], ws=[4.988255741478134, 4.968293256368881, 1.0489883221320717, 2.6246397190118795, 6.995766449902641], res=[0.0, 0.0, 0.0, 0.0, -0.10399515407361282], res_norm=1.040e-01
2026-01-24 02:03:58,997 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:03:59,982 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:00,005 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,054 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:00,077 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,127 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:00,152 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,205 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:00,228 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,280 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:00,304 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,357 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:00,383 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,435 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:00,468 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,554 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:00,581 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,629 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:00,652 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,700 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:00,724 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:00,805 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:06,813 - WARNING - integration_test - Step 25: MPC solve failed
2026-01-24 02:04:06,813 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 02:04:06,831 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:06,831 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:04:06,848 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:04:06,849 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:07,419 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:04:07,457 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.542)
2026-01-24 02:04:07,457 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:04:07,458 - INFO - integration_test - === Applying control at step 25 ===
2026-01-24 02:04:07,458 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.773466360313539}
2026-01-24 02:04:07,458 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:04:07,458 - INFO - integration_test -   Planner output success: False
2026-01-24 02:04:07,458 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.773466360313539}
2026-01-24 02:04:07,460 - INFO - integration_test - Step 25 completed in 10.398s
2026-01-24 02:04:07,567 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-24 02:04:07,570 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[4.72984725 4.49953996 0.97164169 2.42463972 6.78450859]
2026-01-24 02:04:07,571 - DEBUG - integration_test - Step 26: Using propagated spline 6.7845 (close to path, dist=0.109m, drift=0.229m)
2026-01-24 02:04:07,571 - DEBUG - integration_test -   Set spline state to 6.7845
2026-01-24 02:04:07,572 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:04:08,583 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(4.730, 4.500), path_start=(0.000, 0.000), dist=6.528m
2026-01-24 02:04:08,584 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-24 02:04:09,616 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:04:09,646 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:04:09,646 - INFO - integration_test - Warmstart k=0: x0=4.72984725041771 , y0=4.499539961519936 , psi0=0.9716416861007173 , v0=2.4246397190118794 , spline0=6.784508586672875 , a0=0.0 , w0=0.0
2026-01-24 02:04:09,646 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:04:09,647 - INFO - integration_test - Dyn residual k=0: pred=[4.866583489962735, 4.699769775646568, 0.9716416861007173, 2.4246397190118794, 7.026972558574063], ws=[4.866583489962735, 4.699769775646568, 0.9716416861007175, 2.4246397190118794, 6.620423423179752], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.4065491353943109], res_norm=4.065e-01
2026-01-24 02:04:09,648 - INFO - integration_test - Dyn residual k=1: pred=[5.003319729507759, 4.8999995897732, 0.9716416861007175, 2.4246397190118794, 6.86288739508094], ws=[5.003319729507759, 4.8999995897732, 0.9716416861007175, 2.4246397190118794, 6.5036256537736845], res=[0.0, 0.0, 0.0, 0.0, 0.35926174130725563], res_norm=3.593e-01
2026-01-24 02:04:09,649 - INFO - integration_test - Dyn residual k=2: pred=[5.140055969052784, 5.100229403899832, 0.9716416861007175, 2.4246397190118794, 6.746089625674872], ws=[4.989316036255754, 4.914873616575742, 0.9716416861007175, 2.4246397190118794, 6.483395945984844], res=[0.15073993279703046, 0.18535578732409075, 0.0, 0.0, 0.2626936796900283], res_norm=3.551e-01
2026-01-24 02:04:09,667 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:10,699 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:10,719 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:10,763 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:10,783 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:10,827 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:10,847 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:10,891 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:10,913 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:10,958 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:10,979 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:11,023 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:11,043 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:11,099 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:11,139 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:11,195 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:11,215 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:11,260 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:11,281 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:11,325 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:11,346 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:11,391 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:16,995 - WARNING - integration_test - Step 26: MPC solve failed
2026-01-24 02:04:16,995 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-24 02:04:17,007 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:17,007 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:04:17,274 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:04:17,275 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:17,801 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:04:17,828 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.785)
2026-01-24 02:04:17,828 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:04:17,828 - INFO - integration_test - === Applying control at step 26 ===
2026-01-24 02:04:17,828 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-24 02:04:17,828 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:04:17,828 - INFO - integration_test -   Planner output success: False
2026-01-24 02:04:17,828 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-24 02:04:17,830 - INFO - integration_test - Step 26 completed in 10.260s
2026-01-24 02:04:17,920 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-24 02:04:17,924 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[4.86837204 4.68614539 0.89164169 2.22463972 7.00697256]
2026-01-24 02:04:17,926 - DEBUG - integration_test - Step 27: Using propagated spline 7.0070 (close to path, dist=0.247m, drift=0.452m)
2026-01-24 02:04:17,927 - DEBUG - integration_test -   Set spline state to 7.0070
2026-01-24 02:04:17,929 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:04:18,890 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(4.868, 4.686), path_start=(0.000, 0.000), dist=6.757m
2026-01-24 02:04:18,890 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-24 02:04:19,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:04:19,823 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:04:19,823 - INFO - integration_test - Warmstart k=0: x0=4.868372042573232 , y0=4.686145386353482 , psi0=0.8916416861007174 , v0=2.224639719011879 , spline0=7.006972558574064 , a0=0.0 , w0=0.0
2026-01-24 02:04:19,823 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:04:19,824 - INFO - integration_test - Dyn residual k=0: pred=[5.008109554362848, 4.859245492052177, 0.8916416861007174, 2.224639719011879, 7.229436530475252], ws=[5.008109554362848, 4.859245492052177, 0.8916416861007175, 2.224639719011879, 6.451611880154554], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.7778246503206976], res_norm=7.778e-01
2026-01-24 02:04:19,825 - INFO - integration_test - Dyn residual k=1: pred=[5.1478470661524645, 5.032345597750872, 0.8916416861007175, 2.224639719011879, 6.674075852055743], ws=[5.1478470661524645, 5.032345597750872, 0.8916416861007175, 2.224639719011879, 7.045464379760882], res=[0.0, 0.0, 0.0, 0.0, -0.37138852770513964], res_norm=3.714e-01
2026-01-24 02:04:19,826 - INFO - integration_test - Dyn residual k=2: pred=[5.287584577942081, 5.205445703449567, 0.8916416861007175, 2.224639719011879, 7.2679283516620705], ws=[5.17715881660296, 4.983369261862458, 0.8916416861007175, 2.224639719011879, 6.826984673975627], res=[0.11042576133912085, 0.22207644158710949, 0.0, 0.0, 0.4409436776864437], res_norm=5.059e-01
2026-01-24 02:04:19,841 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:20,787 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:20,809 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:20,855 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:20,875 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:20,925 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:20,946 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:20,994 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:21,017 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:21,065 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:21,088 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:21,136 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:21,160 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:21,210 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:21,233 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:21,282 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:21,306 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:21,359 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:21,407 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:21,492 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:21,531 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:21,591 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:26,999 - WARNING - integration_test - Step 27: MPC solve failed
2026-01-24 02:04:26,999 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-24 02:04:27,011 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:27,011 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:04:27,028 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:04:27,029 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:27,720 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:04:27,741 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.007)
2026-01-24 02:04:27,742 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:04:27,742 - INFO - integration_test - === Applying control at step 27 ===
2026-01-24 02:04:27,742 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-24 02:04:27,742 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:04:27,742 - INFO - integration_test -   Planner output success: False
2026-01-24 02:04:27,742 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-24 02:04:27,743 - INFO - integration_test - Step 27 completed in 9.819s
2026-01-24 02:04:27,807 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-24 02:04:27,808 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.00819484 4.84604058 0.81164169 2.02463972 7.20943653]
2026-01-24 02:04:27,809 - DEBUG - integration_test - Step 28: Using propagated spline 7.2094 (close to path, dist=0.193m, drift=0.245m)
2026-01-24 02:04:27,809 - DEBUG - integration_test -   Set spline state to 7.2094
2026-01-24 02:04:27,810 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:04:28,841 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.008, 4.846), path_start=(0.000, 0.000), dist=6.969m
2026-01-24 02:04:28,841 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-24 02:04:29,867 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:04:29,894 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:04:29,895 - INFO - integration_test - Warmstart k=0: x0=5.0081948422272475 , y0=4.846040580379448 , psi0=0.8116416861007174 , v0=2.024639719011879 , spline0=7.2094365304752515 , a0=0.0 , w0=0.0
2026-01-24 02:04:29,895 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:04:29,896 - INFO - integration_test - Dyn residual k=0: pred=[5.147552505343484, 4.99291161785378, 0.8116416861007174, 2.024639719011879, 7.411900502376439], ws=[5.147552505343484, 4.99291161785378, 0.8116416861007174, 2.024639719011879, 6.8064849412284785], res=[0.0, 0.0, 0.0, 0.0, 0.6054155611479608], res_norm=6.054e-01
2026-01-24 02:04:29,897 - INFO - integration_test - Dyn residual k=1: pred=[5.28691016845972, 5.139782655328112, 0.8116416861007174, 2.024639719011879, 7.008948913129666], ws=[5.28691016845972, 5.139782655328112, 0.8116416861007174, 2.024639719011879, 7.145672201097343], res=[0.0, 0.0, 0.0, 0.0, -0.1367232879676763], res_norm=1.367e-01
2026-01-24 02:04:29,897 - INFO - integration_test - Dyn residual k=2: pred=[5.426267831575956, 5.286653692802444, 0.8116416861007174, 2.024639719011879, 7.34813617299853], ws=[5.426267831575956, 5.286653692802444, 0.8116416861007174, 2.024639719011879, 6.959802032605557], res=[0.0, 0.0, 0.0, 0.0, 0.3883341403929732], res_norm=3.883e-01
2026-01-24 02:04:29,915 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,015 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:31,037 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,085 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:31,109 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,156 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:31,179 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,228 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:31,250 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,296 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:31,320 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,367 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:31,392 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,442 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:31,464 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,514 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:31,537 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,583 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:31,605 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,650 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:31,672 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:31,720 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:37,282 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-24 02:04:37,282 - WARNING - integration_test -   Consecutive MPC failures: 5/20
2026-01-24 02:04:37,304 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:37,304 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:04:37,320 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:04:37,321 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:38,110 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:04:38,148 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.209)
2026-01-24 02:04:38,149 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:04:38,149 - INFO - integration_test - === Applying control at step 28 ===
2026-01-24 02:04:38,149 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-24 02:04:38,149 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:04:38,149 - INFO - integration_test -   Planner output success: False
2026-01-24 02:04:38,149 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-24 02:04:38,150 - INFO - integration_test - Step 28 completed in 10.342s
2026-01-24 02:04:38,236 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-24 02:04:38,239 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.14601691 4.98030795 0.73164169 1.82463972 7.3919005 ]
2026-01-24 02:04:38,239 - DEBUG - integration_test - Step 29: Using propagated spline 7.3919 (close to path, dist=0.276m, drift=0.427m)
2026-01-24 02:04:38,240 - DEBUG - integration_test -   Set spline state to 7.3919
2026-01-24 02:04:38,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:04:39,337 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.146, 4.980), path_start=(0.000, 0.000), dist=7.161m
2026-01-24 02:04:39,337 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-24 02:04:40,223 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:04:40,248 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:04:40,249 - INFO - integration_test - Warmstart k=0: x0=5.146016907904126 , y0=4.980307947196515 , psi0=0.7316416861007174 , v0=1.824639719011879 , spline0=7.39190050237644 , a0=0.0 , w0=0.0
2026-01-24 02:04:40,249 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:04:40,250 - INFO - integration_test - Dyn residual k=0: pred=[5.281784446136353, 5.10221068139193, 0.7316416861007174, 1.824639719011879, 7.574364474277628], ws=[5.281784446136353, 5.10221068139193, 0.7316416861007173, 1.824639719011879, 6.884693421858434], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.689671052419194], res_norm=6.897e-01
2026-01-24 02:04:40,251 - INFO - integration_test - Dyn residual k=1: pred=[5.417551984368581, 5.224113415587345, 0.7316416861007173, 1.824639719011879, 7.067157393759622], ws=[5.417551984368581, 5.224113415587345, 0.7316416861007173, 1.824639719011879, 7.207522984172331], res=[0.0, 0.0, 0.0, 0.0, -0.14036559041270902], res_norm=1.404e-01
2026-01-24 02:04:40,252 - INFO - integration_test - Dyn residual k=2: pred=[5.553319522600809, 5.34601614978276, 0.7316416861007173, 1.824639719011879, 7.389986956073519], ws=[5.38024341936377, 5.315629168541023, 0.7316416861007173, 1.824639719011879, 7.202345181893479], res=[0.17307610323703937, 0.030386981241736777, 0.0, 0.0, 0.18764177418004024], res_norm=2.571e-01
2026-01-24 02:04:40,268 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,304 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:41,328 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,376 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:41,399 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,453 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:41,477 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,527 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:41,551 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,597 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:41,619 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,666 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:41,689 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,737 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:41,760 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,807 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:41,831 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,878 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:04:41,900 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:41,949 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:41,970 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:04:42,017 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:04:49,346 - WARNING - integration_test - Step 29: MPC solve failed
2026-01-24 02:04:49,346 - WARNING - integration_test -   Consecutive MPC failures: 6/20
2026-01-24 02:04:49,361 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:49,361 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:04:49,375 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:04:49,376 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:49,923 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:04:49,955 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.392)
2026-01-24 02:04:49,956 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:04:49,956 - INFO - integration_test - === Applying control at step 29 ===
2026-01-24 02:04:49,956 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-24 02:04:49,956 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:04:49,956 - INFO - integration_test -   Planner output success: False
2026-01-24 02:04:49,956 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-24 02:04:49,957 - INFO - integration_test - Step 29 completed in 11.719s
2026-01-24 02:04:50,033 - WARNING - integration_test - Test timeout reached (180.0s) at step 30. Terminating test early.
2026-01-24 02:04:50,040 - INFO - integration_test - Saving test results...
2026-01-24 02:04:50,040 - INFO - integration_test - Saved 31 vehicle states to test_outputs/20260124_020146_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-24 02:04:50,040 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_020146_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-24 02:04:50,040 - INFO - integration_test - Saved 41 states for obstacle 0 to test_outputs/20260124_020146_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-24 02:04:50,040 - INFO - integration_test - Saved 41 states for obstacle 1 to test_outputs/20260124_020146_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-24 02:04:50,041 - INFO - integration_test - Saved state history: 31 vehicle states, 2 obstacles
2026-01-24 02:04:50,041 - INFO - integration_test - Creating animation...
2026-01-24 02:04:50,087 - DEBUG - integration_test - Creating animation with 31 frames (range: 0 to 30)
2026-01-24 02:04:50,087 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:04:51,075 - INFO - integration_test - Frame 0: Safe Horizon module has 1872 scenarios after update
2026-01-24 02:04:51,075 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:04:51,075 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:04:51,077 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:51,077 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:04:51,093 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:04:51,094 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:51,150 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:04:51,156 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:04:51,156 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:04:52,469 - INFO - integration_test - Frame 0: Safe Horizon module has 1841 scenarios after update
2026-01-24 02:04:52,469 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:04:52,469 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:04:52,471 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:52,471 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1841 scenarios available
2026-01-24 02:04:52,486 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1841 trajectory groups with 18410 total points
2026-01-24 02:04:52,487 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:52,539 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:04:52,545 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:04:52,677 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 02:04:53,701 - INFO - integration_test - Frame 1: Safe Horizon module has 1860 scenarios after update
2026-01-24 02:04:53,701 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-24 02:04:53,701 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:04:53,703 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:53,703 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:04:53,721 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:04:53,722 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:53,777 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:04:53,785 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-24 02:04:53,888 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 02:04:54,879 - INFO - integration_test - Frame 2: Safe Horizon module has 1853 scenarios after update
2026-01-24 02:04:54,879 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-24 02:04:54,880 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:04:54,881 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:54,881 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:04:55,171 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:04:55,172 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:55,223 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:04:55,228 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-24 02:04:56,248 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:56,248 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:04:56,264 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:04:56,265 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:56,314 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:04:57,438 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:57,438 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:04:57,754 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:04:57,755 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:57,825 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:04:59,067 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:04:59,067 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:04:59,085 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:04:59,087 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:04:59,140 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:00,222 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:00,222 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1876 scenarios available
2026-01-24 02:05:00,538 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1876 trajectory groups with 18760 total points
2026-01-24 02:05:00,539 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:00,588 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:01,779 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:01,779 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:05:01,799 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:05:01,800 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:01,852 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:02,930 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:02,930 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:05:02,948 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:05:02,949 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:02,994 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:04,038 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:04,039 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1873 scenarios available
2026-01-24 02:05:04,337 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1873 trajectory groups with 18730 total points
2026-01-24 02:05:04,338 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:04,393 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:05,581 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:05,581 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:05:05,600 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:05:05,602 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:05,656 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:06,788 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:06,788 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1847 scenarios available
2026-01-24 02:05:07,121 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1847 trajectory groups with 18470 total points
2026-01-24 02:05:07,122 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:07,182 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:08,282 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:08,282 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:05:08,298 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:05:08,298 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:08,347 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:09,439 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:09,439 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:05:09,461 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:05:09,463 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:09,864 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:10,966 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:10,966 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1873 scenarios available
2026-01-24 02:05:10,985 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1873 trajectory groups with 18730 total points
2026-01-24 02:05:10,986 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:11,040 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:12,135 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:12,135 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:05:12,155 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:05:12,156 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:12,208 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:13,333 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:13,333 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:05:13,635 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:05:13,636 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:13,690 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:14,803 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:14,803 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:05:14,824 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:05:14,825 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:14,878 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:15,978 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:15,978 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:05:15,995 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:05:15,996 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:16,323 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:17,339 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:17,339 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1845 scenarios available
2026-01-24 02:05:17,355 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1845 trajectory groups with 18450 total points
2026-01-24 02:05:17,356 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:17,404 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:18,434 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:18,434 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:05:18,454 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:05:18,455 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:18,508 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:19,725 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:19,725 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:05:20,035 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:05:20,036 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:20,086 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:21,183 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:21,183 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:05:21,203 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:05:21,204 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:21,257 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:22,414 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:22,414 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1869 scenarios available
2026-01-24 02:05:22,732 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1869 trajectory groups with 18690 total points
2026-01-24 02:05:22,733 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:22,791 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:23,866 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:23,866 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1843 scenarios available
2026-01-24 02:05:23,882 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1843 trajectory groups with 18430 total points
2026-01-24 02:05:23,882 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:23,933 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:24,996 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:24,996 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1869 scenarios available
2026-01-24 02:05:25,013 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1869 trajectory groups with 18690 total points
2026-01-24 02:05:25,014 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:25,062 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:26,413 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:26,413 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1847 scenarios available
2026-01-24 02:05:26,435 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1847 trajectory groups with 18470 total points
2026-01-24 02:05:26,436 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:26,493 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:27,599 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:27,599 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:05:27,620 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:05:27,621 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:27,677 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:28,864 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:28,864 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:05:29,173 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:05:29,174 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:29,233 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:30,391 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:30,391 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:05:30,408 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:05:30,409 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:30,461 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:31,501 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:05:31,501 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:05:31,797 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:05:31,798 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:05:31,850 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:05:34,006 - INFO - integration_test - Saved animation with 31 frames at 10.00 fps to test_outputs/20260124_020146_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 3.10s, size: 510622 bytes)
2026-01-24 02:05:34,031 - INFO - integration_test - Animation created successfully
2026-01-24 02:05:34,032 - INFO - integration_test - Test completed successfully
