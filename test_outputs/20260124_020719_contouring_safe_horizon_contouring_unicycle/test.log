2026-01-24 02:07:19,989 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 02:07:19,989 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 02:07:19,989 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 02:07:19,989 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 02:07:19,989 - INFO - integration_test - Creating objective module: contouring
2026-01-24 02:07:19,996 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 02:07:19,996 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-24 02:07:19,996 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-24 02:07:20,005 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-24 02:07:20,005 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 02:07:20,011 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 02:07:20,011 - INFO - integration_test - Created 2 constraint module(s)
2026-01-24 02:07:20,029 - INFO - integration_test - Setting solver on all modules...
2026-01-24 02:07:20,029 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-24 02:07:20,029 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 02:07:20,029 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 02:07:20,029 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 02:07:20,029 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 02:07:20,029 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 02:07:20,029 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 02:07:20,030 - INFO - integration_test - Obstacle 0: s=8.03, pos=(6.24, 5.59), lateral_offset=0.00m, vel=(0.47, 0.37)
2026-01-24 02:07:20,030 - INFO - integration_test - Obstacle 1: s=17.06, pos=(13.71, 10.71), lateral_offset=0.00m, vel=(-0.69, -0.41)
2026-01-24 02:07:20,030 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 02:07:20,031 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 02:07:20,031 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 02:07:20,031 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 02:07:20,031 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 02:07:20,031 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 02:07:20,031 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 02:07:20,031 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 02:07:20,031 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 02:07:20,032 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 02:07:20,032 - INFO - integration_test - Auto-calculated timeout: 180s for 100 steps
2026-01-24 02:07:20,032 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 02:07:20,032 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 02:07:20,032 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 02:07:20,032 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 02:07:20,033 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:21,349 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 02:07:21,349 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 02:07:22,419 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:22,449 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:07:22,449 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 02:07:22,449 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:07:22,450 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 02:07:22,451 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-24 02:07:22,452 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-24 02:07:22,469 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:23,555 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:23,577 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:23,625 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:23,648 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:23,697 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:23,719 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:23,769 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:23,791 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:23,840 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:23,863 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:23,910 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:23,934 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:23,987 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:24,011 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:24,059 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:24,082 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:24,130 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:24,156 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:24,204 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:24,228 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:24,277 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:25,398 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 02:07:25,586 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:07:25,586 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:07:25,656 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:07:25,657 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:07:25,733 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:07:25,743 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 02:07:25,743 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:07:25,743 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 02:07:25,743 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 02:07:25,743 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018793411, 'w': 0.8000000026012456}
2026-01-24 02:07:25,743 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:07:25,743 - INFO - integration_test -   Planner output success: True
2026-01-24 02:07:25,745 - INFO - integration_test - Step 0 completed in 5.713s
2026-01-24 02:07:25,810 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 02:07:25,811 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-24 02:07:25,811 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 02:07:25,811 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 02:07:25,812 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:26,777 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 02:07:26,777 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 02:07:27,688 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:27,716 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:07:27,716 - INFO - integration_test - Warmstart k=0: x0=0.10987737537421037 , y0=0.004530845072794319 , psi0=0.08000000026012455 , v0=1.200000001879341 , spline0=0.12000000018793411 , a0=0.0 , w0=0.0
2026-01-24 02:07:27,716 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:07:27,717 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803153632, 0.01412060839522885, 0.08000000026012455, 1.200000001879341, 0.24000000037586822], ws=[0.2294935803153632, 0.01412060839522885, 0.08000000026012444, 1.200000001879341, 0.05292929293308958], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.18707070744277865], res_norm=1.871e-01
2026-01-24 02:07:27,718 - INFO - integration_test - Dyn residual k=1: pred=[0.34910978525651604, 0.023710371717663367, 0.08000000026012444, 1.200000001879341, 0.17292929312102368], ws=[0.34910978525651604, 0.023710371717663367, 0.08000000026012444, 1.200000001879341, 0.10828282829421823], res=[0.0, 0.0, 0.0, 0.0, 0.06464646482680544], res_norm=6.465e-02
2026-01-24 02:07:27,719 - INFO - integration_test - Dyn residual k=2: pred=[0.46872599019766886, 0.033300135040097885, 0.08000000026012444, 1.200000001879341, 0.22828282848215234], ws=[0.46872599019766886, 0.033300135040097885, 0.08000000026012444, 1.200000001879341, 0.16606060608338596], res=[0.0, 0.0, 0.0, 0.0, 0.062222222398766375], res_norm=6.222e-02
2026-01-24 02:07:27,736 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:28,804 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:28,828 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:28,878 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:28,901 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:28,951 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:28,980 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:29,034 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:29,059 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:29,110 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:29,134 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:29,191 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:29,217 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:29,277 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:29,301 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:29,351 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:29,376 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:29,424 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:29,448 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:29,496 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:29,518 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:29,567 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:30,233 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 02:07:30,235 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:07:30,235 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:07:30,318 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:07:30,318 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:07:30,414 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:07:30,425 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 02:07:30,426 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:07:30,426 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 02:07:30,426 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000026707565, 'w': 0.7999998790508542}
2026-01-24 02:07:30,426 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:07:30,426 - INFO - integration_test -   Planner output success: True
2026-01-24 02:07:30,428 - INFO - integration_test - Step 1 completed in 4.617s
2026-01-24 02:07:30,501 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 02:07:30,502 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-24 02:07:30,502 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 02:07:30,502 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 02:07:30,503 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:31,482 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 02:07:31,482 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 02:07:32,389 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:32,415 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:07:32,415 - INFO - integration_test - Warmstart k=0: x0=0.2388921281897513 , y0=0.020221620997089438 , psi0=0.15999998816521 , v0=1.4000000021464167 , spline0=0.26000000040257576 , a0=0.0 , w0=0.0
2026-01-24 02:07:32,415 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:07:32,417 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039483382088, 0.042526168321572334, 0.15999998816521, 1.4000000021464167, 0.4000000006172174], ws=[0.3771039483382088, 0.04252616832157233, 0.1599999881652101, 1.4000000021464167, 0.10909090910337814], res=[0.0, 6.938893903907228e-18, -1.1102230246251565e-16, 0.0, 0.29090909151383926], res_norm=2.909e-01
2026-01-24 02:07:32,417 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157684866664, 0.06483071564605523, 0.1599999881652101, 1.4000000021464167, 0.2490909093180198], ws=[0.5153157684866664, 0.06483071564605523, 0.1599999881652101, 1.4000000021464167, 0.16787878790399574], res=[0.0, 0.0, 0.0, 0.0, 0.08121212141402406], res_norm=8.121e-02
2026-01-24 02:07:32,418 - INFO - integration_test - Dyn residual k=2: pred=[0.653527588635124, 0.08713526297053814, 0.1599999881652101, 1.4000000021464167, 0.30787878811863745], ws=[0.653527588635124, 0.08713526297053814, 0.1599999881652101, 1.4000000021464167, 0.4589898990744647], res=[0.0, 0.0, 0.0, 0.0, -0.15111111095582724], res_norm=1.511e-01
2026-01-24 02:07:32,434 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:33,529 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:33,553 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:33,602 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:33,626 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:33,679 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:33,703 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:33,752 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:33,786 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:33,872 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:33,895 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:33,945 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:33,969 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:34,019 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:34,042 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:34,091 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:34,113 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:34,161 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:34,185 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:34,233 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:34,257 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:34,306 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:34,912 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 02:07:34,915 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:07:34,915 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:07:34,998 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:07:35,000 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:07:35,091 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:07:35,102 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 02:07:35,102 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:07:35,102 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 02:07:35,102 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999937718071, 'w': 0.7999998161644072}
2026-01-24 02:07:35,102 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:07:35,102 - INFO - integration_test -   Planner output success: True
2026-01-24 02:07:35,104 - INFO - integration_test - Step 2 completed in 4.602s
2026-01-24 02:07:35,166 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 02:07:35,167 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999997 1.6        0.42      ]
2026-01-24 02:07:35,167 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 02:07:35,167 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 02:07:35,168 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:36,133 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 02:07:36,133 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 02:07:37,102 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:37,129 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:07:37,129 - INFO - integration_test - Warmstart k=0: x0=0.38583643608184615 , y0=0.050144712522269694 , psi0=0.23999996978165072 , v0=1.6000000015235973 , spline0=0.42000000055493547 , a0=0.0 , w0=0.0
2026-01-24 02:07:37,129 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:07:37,130 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505133554406, 0.08817712809047068, 0.23999996978165072, 1.6000000015235973, 0.5800000007072952], ws=[0.5412505133554406, 0.08817712809047068, 0.2399999697816506, 1.6000000015235973, 0.16909090911234229], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.4109090915949529], res_norm=4.109e-01
2026-01-24 02:07:37,131 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645906290351, 0.12620954365867165, 0.2399999697816506, 1.6000000015235973, 0.329090909264702], ws=[0.6966645906290351, 0.12620954365867165, 0.2399999697816506, 1.6000000015235973, 0.23191919195392544], res=[0.0, 0.0, 0.0, 0.0, 0.09717171731077659], res_norm=9.717e-02
2026-01-24 02:07:37,131 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786679026295, 0.16424195922687262, 0.2399999697816506, 1.6000000015235973, 0.3919191921062852], ws=[0.8520786679026295, 0.16424195922687262, 0.2399999697816506, 1.6000000015235973, 0.29797979803090985], res=[0.0, 0.0, 0.0, 0.0, 0.09393939407537533], res_norm=9.394e-02
2026-01-24 02:07:37,147 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,332 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:38,354 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,405 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:38,429 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,479 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:38,501 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,549 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:38,574 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,621 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:38,645 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,693 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:38,716 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,764 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:38,787 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,838 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:38,862 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,908 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:38,931 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:38,982 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:39,004 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:39,053 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:39,625 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 02:07:39,627 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:07:39,627 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1842 scenarios available
2026-01-24 02:07:39,639 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1842 trajectory groups with 18420 total points
2026-01-24 02:07:39,639 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:07:39,741 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:07:39,753 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 02:07:39,753 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:07:39,753 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 02:07:39,753 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018255978, 'w': 0.7999999965278736}
2026-01-24 02:07:39,753 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:07:39,753 - INFO - integration_test -   Planner output success: True
2026-01-24 02:07:39,755 - INFO - integration_test - Step 3 completed in 4.588s
2026-01-24 02:07:39,810 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 02:07:39,812 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999997 1.8        0.6       ]
2026-01-24 02:07:39,812 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 02:07:39,812 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 02:07:39,813 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:40,737 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 02:07:40,737 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 02:07:41,751 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:41,777 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:07:41,777 - INFO - integration_test - Warmstart k=0: x0=0.5491354626278919 , y0=0.0972407479878019 , psi0=0.3199999694344381 , v0=1.8000000033491952 , spline0=0.600000000889855 , a0=0.0 , w0=0.0
2026-01-24 02:07:41,777 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:07:41,778 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978399313314, 0.15386272378155302, 0.3199999694344381, 1.8000000033491952, 0.7800000012247745], ws=[0.7199978399313314, 0.15386272378155302, 0.3199999694344382, 1.8000000033491952, 0.23353535358483937], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5464646476399352], res_norm=5.465e-01
2026-01-24 02:07:41,779 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602172347707, 0.21048469957530416, 0.3199999694344382, 1.8000000033491952, 0.41353535391975893], ws=[0.8908602172347708, 0.21048469957530416, 0.3199999694344382, 1.8000000033491952, 0.3010101010888734], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, 0.11252525283088555], res_norm=1.125e-01
2026-01-24 02:07:41,779 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225945382103, 0.2671066753690553, 0.3199999694344382, 1.8000000033491952, 0.4810101014237929], ws=[1.0617225945382103, 0.2671066753690553, 0.3199999694344382, 1.8000000033491952, 0.3721212122360372], res=[0.0, 0.0, 0.0, 0.0, 0.10888888918775569], res_norm=1.089e-01
2026-01-24 02:07:41,795 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:42,883 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:42,908 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:42,964 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:42,988 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,039 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:43,062 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,109 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:43,133 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,185 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:43,209 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,260 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:43,285 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,335 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:43,357 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,409 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:43,430 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,479 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:43,502 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,551 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:43,575 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:43,622 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:44,262 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 02:07:44,268 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:07:44,268 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:07:44,283 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:07:44,284 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:07:44,417 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:07:44,430 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 02:07:44,431 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:07:44,431 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 02:07:44,431 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000183103173, 'w': 0.799999999101052}
2026-01-24 02:07:44,431 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:07:44,431 - INFO - integration_test -   Planner output success: True
2026-01-24 02:07:44,433 - INFO - integration_test - Step 4 completed in 4.621s
2026-01-24 02:07:44,500 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 02:07:44,501 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427975 0.39999997 2.00000001 0.8       ]
2026-01-24 02:07:44,502 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 02:07:44,502 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 02:07:44,502 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:45,628 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 02:07:45,628 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 02:07:46,592 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:46,618 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:07:46,618 - INFO - integration_test - Warmstart k=0: x0=0.7268614917538538 , y0=0.16427975380903778 , psi0=0.3999999693445433 , v0=2.000000005180227 , spline0=0.8000000014078776 , a0=0.0 , w0=0.0
2026-01-24 02:07:46,618 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:07:46,620 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736934191207, 0.24216341682538628, 0.3999999693445433, 2.000000005180227, 1.0000000019259003], ws=[0.9110736934191207, 0.24216341682538628, 0.3999999693445435, 2.000000005180227, 0.36363636375308483], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.6363636381728155], res_norm=6.364e-01
2026-01-24 02:07:46,620 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858950843876, 0.3200470798417348, 0.3999999693445435, 2.000000005180227, 0.5636363642711075], ws=[1.0952858950843876, 0.3200470798417348, 0.3999999693445435, 2.000000005180227, 0.8767676771132822], res=[0.0, 0.0, 0.0, 0.0, -0.31313131284217466], res_norm=3.131e-01
2026-01-24 02:07:46,621 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980967496543, 0.39793074285808333, 0.3999999693445435, 2.000000005180227, 1.0767676776313049], ws=[1.2794980967496543, 0.39793074285808333, 0.3999999693445435, 2.000000005180227, 0.9696969701457493], res=[0.0, 0.0, 0.0, 0.0, 0.10707070748555558], res_norm=1.071e-01
2026-01-24 02:07:46,637 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:47,688 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:47,710 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:47,755 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:47,775 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:47,822 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:47,843 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:47,889 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:47,913 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:47,961 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:47,982 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:48,029 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:48,050 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:48,093 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:48,112 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:48,157 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:48,180 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:48,226 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:48,248 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:48,295 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:48,316 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:48,362 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:48,919 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 02:07:48,923 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:07:48,923 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:07:48,934 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:07:48,935 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:07:49,180 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:07:49,202 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 02:07:49,202 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:07:49,202 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 02:07:49,202 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019232469, 'w': 0.8000000018832063}
2026-01-24 02:07:49,202 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:07:49,203 - INFO - integration_test -   Planner output success: True
2026-01-24 02:07:49,205 - INFO - integration_test - Step 5 completed in 4.704s
2026-01-24 02:07:49,271 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 02:07:49,272 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.25382379 0.47999997 2.20000001 1.02      ]
2026-01-24 02:07:49,273 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 02:07:49,273 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 02:07:49,274 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:50,292 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 02:07:50,292 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 02:07:51,335 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:51,367 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:07:51,367 - INFO - integration_test - Warmstart k=0: x0=0.9167519081978526 , y0=0.25382378789132365 , psi0=0.47999996953286395 , v0=2.200000007103474 , spline0=1.0200000021182252 , a0=0.0 , w0=0.0
2026-01-24 02:07:51,367 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:07:51,368 - INFO - integration_test - Dyn residual k=0: pred=[1.111890794934569, 0.35541520089315054, 0.47999996953286395, 2.200000007103474, 1.2400000028285727], ws=[1.111890794934569, 0.35541520089315054, 0.47999996953286406, 2.200000007103474, 0.6933333336476192], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5466666691809535], res_norm=5.467e-01
2026-01-24 02:07:51,369 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296816712856, 0.4570066138949775, 0.47999996953286406, 2.200000007103474, 0.9133333343579666], ws=[1.3070296816712856, 0.4570066138949775, 0.47999996953286406, 2.200000007103474, 1.2397979804771666], res=[0.0, 0.0, 0.0, 0.0, -0.3264646461192], res_norm=3.265e-01
2026-01-24 02:07:51,370 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685684080022, 0.5585980268968044, 0.47999996953286406, 2.200000007103474, 1.459797981187514], ws=[1.5021685684080022, 0.5585980268968044, 0.47999996953286406, 2.200000007103474, 1.0795959602827099], res=[0.0, 0.0, 0.0, 0.0, 0.38020202090480404], res_norm=3.802e-01
2026-01-24 02:07:51,387 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:52,431 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:52,456 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:52,504 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:52,526 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:52,575 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:52,598 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:52,648 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:52,672 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:52,722 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:52,744 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:52,795 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:52,818 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:52,869 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:52,894 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:52,951 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:52,979 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:53,069 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:53,100 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:53,156 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:53,179 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:53,232 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:53,910 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 02:07:53,915 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:07:53,915 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1874 scenarios available
2026-01-24 02:07:54,032 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1874 trajectory groups with 18740 total points
2026-01-24 02:07:54,033 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:07:54,161 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:07:54,176 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 02:07:54,176 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:07:54,176 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 02:07:54,176 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000187786795, 'w': 0.7999999939643282}
2026-01-24 02:07:54,176 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:07:54,176 - INFO - integration_test -   Planner output success: True
2026-01-24 02:07:54,178 - INFO - integration_test - Step 6 completed in 4.906s
2026-01-24 02:07:54,239 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 02:07:54,240 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819142 0.55999997 2.40000001 1.26      ]
2026-01-24 02:07:54,240 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 02:07:54,240 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 02:07:54,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:55,206 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 02:07:55,206 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 02:07:56,162 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:07:56,190 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:07:56,190 - INFO - integration_test - Warmstart k=0: x0=1.1162308715749345 , y0=0.36819142097647917 , psi0=0.5599999689292967 , v0=2.400000008981342 , spline0=1.2600000030163594 , a0=0.0 , w0=0.0
2026-01-24 02:07:56,190 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:07:56,191 - INFO - integration_test - Dyn residual k=0: pred=[1.319572102940142, 0.49567610263661266, 0.5599999689292967, 2.400000008981342, 1.5000000039144936], ws=[1.319572102940142, 0.49567610263661266, 0.5599999689292967, 2.400000008981342, 1.2474747482260138], res=[0.0, 0.0, 0.0, 0.0, 0.25252525568847983], res_norm=2.525e-01
2026-01-24 02:07:56,192 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133343053494, 0.6231607842967462, 0.5599999689292967, 2.400000008981342, 1.487474749124148], ws=[1.5229133343053494, 0.6231607842967462, 0.5599999689292967, 2.400000008981342, 1.3616161625884096], res=[0.0, 0.0, 0.0, 0.0, 0.12585858653573845], res_norm=1.259e-01
2026-01-24 02:07:56,192 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545656705568, 0.7506454659568796, 0.5599999689292967, 2.400000008981342, 1.6016161634865438], ws=[1.7262545656705568, 0.7506454659568796, 0.5599999689292967, 2.400000008981342, 1.1985858595664944], res=[0.0, 0.0, 0.0, 0.0, 0.40303030392004935], res_norm=4.030e-01
2026-01-24 02:07:56,208 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,265 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:57,295 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,359 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:57,386 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,445 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:57,471 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,526 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:57,552 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,606 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:57,634 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,690 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:57,717 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,772 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:57,799 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,856 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:57,884 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:57,950 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:07:57,976 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:58,033 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:58,058 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:07:58,112 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:07:58,846 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 02:07:58,851 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:07:58,851 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:07:58,997 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:07:58,999 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:07:59,218 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:07:59,232 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 02:07:59,233 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:07:59,233 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 02:07:59,233 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198998773, 'w': 0.8000000057407608}
2026-01-24 02:07:59,233 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:07:59,233 - INFO - integration_test -   Planner output success: True
2026-01-24 02:07:59,235 - INFO - integration_test - Step 7 completed in 4.995s
2026-01-24 02:07:59,305 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 02:07:59,306 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.3224345  0.50942441 0.63999997 2.60000001 1.52      ]
2026-01-24 02:07:59,307 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 02:07:59,307 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 02:07:59,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:00,294 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 02:08:00,294 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 02:08:01,199 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:01,225 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:01,225 - INFO - integration_test - Warmstart k=0: x0=1.3224344998441575 , y0=0.509424411134987 , psi0=0.6399999695033728 , v0=2.6000000109713297 , spline0=1.5200000041134925 , a0=0.0 , w0=0.0
2026-01-24 02:08:01,225 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:01,226 - INFO - integration_test - Dyn residual k=0: pred=[1.5309794025093153, 0.6646952201844957, 0.6399999695033728, 2.6000000109713297, 1.7800000052106255], ws=[1.5309794025093153, 0.6646952201844958, 0.6399999695033727, 2.6000000109713297, 1.3696969707496214], res=[0.0, -1.1102230246251565e-16, 1.1102230246251565e-16, 0.0, 0.41030303446100413], res_norm=4.103e-01
2026-01-24 02:08:01,227 - INFO - integration_test - Dyn residual k=1: pred=[1.739524305174473, 0.8199660292340044, 0.6399999695033727, 2.6000000109713297, 1.6296969718467544], ws=[1.739524305174473, 0.8199660292340044, 0.6399999695033727, 2.6000000109713297, 1.7066666681958205], res=[0.0, 0.0, 0.0, 0.0, -0.07696969634906603], res_norm=7.697e-02
2026-01-24 02:08:01,227 - INFO - integration_test - Dyn residual k=2: pred=[1.9480692078396311, 0.975236838283513, 0.6399999695033727, 2.6000000109713297, 1.9666666692929535], ws=[1.9480692078396311, 0.975236838283513, 0.6399999695033727, 2.6000000109713297, 2.0646464667407773], res=[0.0, 0.0, 0.0, 0.0, -0.09797979744782381], res_norm=9.798e-02
2026-01-24 02:08:01,245 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,310 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:02,336 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,387 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:02,412 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,464 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:02,488 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,540 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:02,561 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,608 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:02,633 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,682 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:02,703 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,755 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:02,777 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,827 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:02,863 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:02,944 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:02,971 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:03,024 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:03,047 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:03,097 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:03,809 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 02:08:03,814 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:03,814 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:08:03,943 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:08:03,944 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:04,100 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:04,114 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 02:08:04,114 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:04,114 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 02:08:04,114 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019997609, 'w': 0.8000000099526683}
2026-01-24 02:08:04,114 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:04,114 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:04,116 - INFO - integration_test - Step 8 completed in 4.810s
2026-01-24 02:08:04,184 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 02:08:04,186 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223935 0.6792569  0.71999997 2.80000001 1.80000001]
2026-01-24 02:08:04,186 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 02:08:04,186 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 02:08:04,187 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:05,214 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 02:08:05,214 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 02:08:06,179 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:06,207 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:06,207 - INFO - integration_test - Warmstart k=0: x0=1.5322393454430172 , y0=0.6792569037358226 , psi0=0.7199999704986396 , v0=2.8000000129710907 , spline0=1.8000000054106016 , a0=0.0 , w0=0.0
2026-01-24 02:08:06,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:06,209 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449560244104, 0.8638846065329271, 0.7199999704986396, 2.8000000129710907, 2.0800000067077105], ws=[1.7427449560244104, 0.8638846065329271, 0.7199999704986397, 2.8000000129710907, 1.716363637989748], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.36363636871796245], res_norm=3.636e-01
2026-01-24 02:08:06,210 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505666058035, 1.0485123093300317, 0.7199999704986397, 2.8000000129710907, 1.9963636392868571], ws=[1.9532505666058035, 1.0485123093300317, 0.7199999704986397, 2.8000000129710907, 2.0816161638801507], res=[0.0, 0.0, 0.0, 0.0, -0.08525252459329358], res_norm=8.525e-02
2026-01-24 02:08:06,210 - INFO - integration_test - Dyn residual k=2: pred=[2.1637561771871967, 1.2331400121271363, 0.7199999704986397, 2.8000000129710907, 2.3616161651772596], ws=[2.1637561771871967, 1.2331400121271363, 0.7199999704986397, 2.8000000129710907, 1.9292929316419012], res=[0.0, 0.0, 0.0, 0.0, 0.4323232335353584], res_norm=4.323e-01
2026-01-24 02:08:06,228 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,410 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:07,433 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,482 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:07,505 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,555 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:07,577 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,628 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:07,651 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,697 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:07,719 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,766 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:07,788 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,834 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:07,856 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,907 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:07,931 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:07,980 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:08,006 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:08,060 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:08,082 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:08,130 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:08,778 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 02:08:08,785 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:08,785 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:08:08,801 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:08:08,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:08,959 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:08,974 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 02:08:08,975 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:08,975 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 02:08:08,975 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019997553, 'w': 0.8000000099405137}
2026-01-24 02:08:08,975 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:08,975 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:08,976 - INFO - integration_test - Step 9 completed in 4.791s
2026-01-24 02:08:09,034 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 02:08:09,035 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229392 0.87908747 0.79999997 3.00000001 2.10000001]
2026-01-24 02:08:09,036 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 02:08:09,036 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 02:08:09,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:09,940 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 02:08:09,940 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 02:08:11,044 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:11,072 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:11,073 - INFO - integration_test - Warmstart k=0: x0=1.7422939171517564 , y0=0.8790874672314234 , psi0=0.799999971492691 , v0=3.000000014970846 , spline0=2.100000006907686 , a0=0.0 , w0=0.0
2026-01-24 02:08:11,073 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:11,074 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059371339025, 1.0942942896168528, 0.799999971492691, 3.000000014970846, 2.4000000084047706], ws=[1.9513059360908735, 1.09429428854291, 0.7999999714926909, 3.0, 2.092929294882982], res=[1.0430289965057682e-09, 1.0739427125372458e-09, 1.1102230246251565e-16, 1.497084589630049e-08, 0.3070707135217887], res_norm=3.071e-01
2026-01-24 02:08:11,075 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179550299907, 1.3095011098543967, 0.7999999714926909, 3.0, 2.3929292948829817], ws=[2.1603179550299907, 1.3095011098543967, 0.7999999714926909, 3.0, 2.488888891121676], res=[0.0, 0.0, 0.0, 0.0, -0.09595959623869454], res_norm=9.596e-02
2026-01-24 02:08:11,075 - INFO - integration_test - Dyn residual k=2: pred=[2.3693299739691076, 1.5247079311658833, 0.7999999714926909, 3.0, 2.788888891121676], ws=[2.3693299739691076, 1.5247079311658833, 0.7999999714926909, 3.0, 2.343434345457807], res=[0.0, 0.0, 0.0, 0.0, 0.445454545663869], res_norm=4.455e-01
2026-01-24 02:08:11,092 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,154 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:12,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,228 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:12,251 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,299 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:12,322 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,372 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:12,395 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,447 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:12,469 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,517 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:12,539 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,587 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:12,609 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,658 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:12,680 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,727 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:12,750 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,798 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:12,820 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:12,870 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:13,604 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 02:08:13,610 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:13,610 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:08:13,624 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:08:13,625 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:13,809 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:13,826 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 02:08:13,826 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:13,826 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 02:08:13,826 - INFO - integration_test -   Control dict from planner: {'a': 1.502900127134567e-07, 'w': 0.8000000098494318}
2026-01-24 02:08:13,826 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:13,826 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:13,828 - INFO - integration_test - Step 10 completed in 4.793s
2026-01-24 02:08:13,895 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 02:08:13,898 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247938 1.10242084 0.87999997 3.00000003 2.40000001]
2026-01-24 02:08:13,898 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 02:08:13,898 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 02:08:13,899 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:15,086 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 02:08:15,086 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 02:08:16,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:16,055 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:16,056 - INFO - integration_test - Warmstart k=0: x0=1.9424793827455933 , y0=1.1024208357864853 , psi0=0.8799999724776342 , v0=3.000000029999847 , spline0=2.4000000099076706 , a0=0.0 , w0=0.0
2026-01-24 02:08:16,056 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:16,057 - INFO - integration_test - Dyn residual k=0: pred=[2.133624734280378, 1.3336424965076088, 0.8799999724776342, 3.000000029999847, 2.7000000129076556], ws=[2.1336247323689346, 1.333642494195404, 0.8799999724776342, 3.0, 2.488888892091368], res=[1.9114434479661213e-09, 2.3122048720125576e-09, 0.0, 2.999984705098768e-08, 0.21111112081628747], res_norm=2.111e-01
2026-01-24 02:08:16,057 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700819922756, 1.5648641526043225, 0.8799999724776342, 3.0, 2.788888892091368], ws=[2.3247700819922756, 1.5648641526043225, 0.8799999724776342, 3.0, 2.34343434633659], res=[0.0, 0.0, 0.0, 0.0, 0.44545454575477805], res_norm=4.455e-01
2026-01-24 02:08:16,058 - INFO - integration_test - Dyn residual k=2: pred=[2.5159154316156167, 1.7960858110132412, 0.8799999724776342, 3.0, 2.6434343463365897], ws=[2.5159154316156167, 1.7960858110132412, 0.8799999724776342, 3.0, 2.9343434378461457], res=[0.0, 0.0, 0.0, 0.0, -0.290909091509556], res_norm=2.909e-01
2026-01-24 02:08:16,075 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,025 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:17,049 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,095 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:17,117 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,163 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:17,184 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,233 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:17,253 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,301 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:17,322 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,370 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:17,390 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,440 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:17,460 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,504 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:17,527 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,569 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:17,588 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,634 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:17,656 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:17,700 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:18,323 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 02:08:18,331 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:18,331 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:08:18,348 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:08:18,349 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:18,548 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:18,739 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 02:08:18,739 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:18,739 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 02:08:18,739 - INFO - integration_test -   Control dict from planner: {'a': -3.8893295247896634e-10, 'w': 0.06512916534111225}
2026-01-24 02:08:18,739 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:18,739 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:18,741 - INFO - integration_test - Step 11 completed in 4.843s
2026-01-24 02:08:18,808 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 02:08:18,809 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13287042 1.33426332 0.88651289 3.00000003 2.70000001]
2026-01-24 02:08:18,810 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-24 02:08:18,810 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 02:08:18,811 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:19,870 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 02:08:19,870 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 02:08:20,862 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:20,891 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:20,891 - INFO - integration_test - Warmstart k=0: x0=2.13287042191863 , y0=1.3342633165064297 , psi0=0.8865128890117454 , v0=3.0000000299609537 , spline0=2.7000000129037662 , a0=0.0 , w0=0.0
2026-01-24 02:08:20,891 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:20,892 - INFO - integration_test - Dyn residual k=0: pred=[2.322505802724957, 1.5667249781715233, 0.8865128890117454, 3.0000000299609537, 3.000000015899862], ws=[2.3225058008310717, 1.5667249758499324, 0.8865128890117457, 3.0, 2.3434343472142345], res=[1.8938854928762794e-09, 2.3215909195073436e-09, -3.3306690738754696e-16, 2.9960953717989014e-08, 0.6565656686856274], res_norm=6.566e-01
2026-01-24 02:08:20,893 - INFO - integration_test - Dyn residual k=1: pred=[2.512141179743513, 1.7991866351934351, 0.8865128890117457, 3.0, 2.6434343472142343], ws=[2.512141179743513, 1.7991866351934351, 0.8865128890117457, 3.0, 2.9343434389053717], res=[0.0, 0.0, 0.0, 0.0, -0.29090909169113743], res_norm=2.909e-01
2026-01-24 02:08:20,894 - INFO - integration_test - Dyn residual k=2: pred=[2.7017765586559546, 2.031648294536938, 0.8865128890117457, 3.0, 3.2343434389053716], ws=[2.701776558655955, 2.0316482945369376, 0.8865128890117457, 3.0, 3.301010105963062], res=[-4.440892098500626e-16, 4.440892098500626e-16, 0.0, 0.0, -0.06666666705769053], res_norm=6.667e-02
2026-01-24 02:08:20,911 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:21,967 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:21,993 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,048 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:22,074 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,129 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:22,154 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,210 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:22,235 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,290 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:22,315 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,371 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:22,395 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,507 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:22,550 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,600 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:22,624 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,672 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:22,694 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,741 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:22,762 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:22,809 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:23,738 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 02:08:23,744 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:23,744 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:08:23,757 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:08:23,758 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:23,937 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:23,952 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 02:08:23,952 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:23,953 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 02:08:23,953 - INFO - integration_test -   Control dict from planner: {'a': -5.182953210228524e-07, 'w': -0.2571343067344315}
2026-01-24 02:08:23,953 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:23,953 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:23,954 - INFO - integration_test - Step 12 completed in 5.145s
2026-01-24 02:08:24,013 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 02:08:24,016 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32547343 1.56426141 0.86079946 2.99999998 3.00000001]
2026-01-24 02:08:24,016 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-24 02:08:24,017 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 02:08:24,017 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:25,093 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-24 02:08:25,093 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 02:08:26,101 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:26,131 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:26,131 - INFO - integration_test - Warmstart k=0: x0=2.325473433311772 , y0=1.5642614067762919 , psi0=0.8607994583383023 , v0=2.9999999781314215 , spline0=3.0000000107169082 , a0=0.0 , w0=0.0
2026-01-24 02:08:26,131 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:26,132 - INFO - integration_test - Dyn residual k=0: pred=[2.5210228507388717, 1.791770580287619, 0.8607994583383023, 2.9999999781314215, 3.3000000085300503], ws=[2.521022850738872, 1.791770580287619, 0.8607994583383025, 2.9999999781314215, 2.9343434373591086], res=[-4.440892098500626e-16, 0.0, -2.220446049250313e-16, 0.0, 0.36565657117094164], res_norm=3.657e-01
2026-01-24 02:08:26,133 - INFO - integration_test - Dyn residual k=1: pred=[2.716572268165972, 2.019279753798946, 0.8607994583383025, 2.9999999781314215, 3.2343434351722506], ws=[2.716572268165972, 2.019279753798946, 0.8607994583383025, 2.9999999781314215, 3.301010103444862], res=[0.0, 0.0, 0.0, 0.0, -0.06666666827261114], res_norm=6.667e-02
2026-01-24 02:08:26,134 - INFO - integration_test - Dyn residual k=2: pred=[2.9121216855930716, 2.246788927310273, 0.8607994583383025, 2.9999999781314215, 3.601010101258004], ws=[2.9121216855930716, 2.246788927310273, 0.8607994583383025, 2.9999999781314215, 3.685858587579896], res=[0.0, 0.0, 0.0, 0.0, -0.08484848632189212], res_norm=8.485e-02
2026-01-24 02:08:26,152 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,268 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:27,292 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,343 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:27,368 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,419 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:27,443 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,494 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:27,518 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,571 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:27,595 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,648 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:27,673 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,728 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:27,755 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,807 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:27,832 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,885 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:27,911 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:27,967 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:27,991 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:28,048 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:28,708 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 02:08:28,717 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:28,717 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:08:28,732 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:08:28,734 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:28,955 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:28,975 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 02:08:28,975 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:28,975 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 02:08:28,975 - INFO - integration_test -   Control dict from planner: {'a': 5.029829096308426e-07, 'w': -0.10646873751864697}
2026-01-24 02:08:28,975 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:28,975 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:28,976 - INFO - integration_test - Step 13 completed in 4.961s
2026-01-24 02:08:29,042 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 02:08:29,044 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52223028 1.7907253  0.85015258 3.00000003 3.30000001]
2026-01-24 02:08:29,045 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-24 02:08:29,045 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 02:08:29,046 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:30,161 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 02:08:30,161 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 02:08:31,247 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:31,274 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:31,275 - INFO - integration_test - Warmstart k=0: x0=2.5222302772492946 , y0=1.7907252988102933 , psi0=0.8501525845864376 , v0=3.0000000284297124 , spline0=3.3000000135598793 , a0=0.0 , w0=0.0
2026-01-24 02:08:31,275 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:31,276 - INFO - integration_test - Dyn residual k=0: pred=[2.72019083044307, 2.016139630841327, 0.8501525845864376, 3.0000000284297124, 3.6000000164028503], ws=[2.720190828567083, 2.0161396287051723, 0.8501525845864375, 3.0, 3.301010106214903], res=[1.8759869213624825e-09, 2.1361548085963022e-09, 1.1102230246251565e-16, 2.8429712362054715e-08, 0.2989899101879474], res_norm=2.990e-01
2026-01-24 02:08:31,277 - INFO - integration_test - Dyn residual k=1: pred=[2.9181513798848715, 2.241553958600051, 0.8501525845864375, 3.0, 3.601010106214903], ws=[2.9181513798848715, 2.241553958600051, 0.8501525845864375, 3.0, 3.685858591474293], res=[0.0, 0.0, 0.0, 0.0, -0.08484848525939004], res_norm=8.485e-02
2026-01-24 02:08:31,277 - INFO - integration_test - Dyn residual k=2: pred=[3.11611193120266, 2.4669682884949298, 0.8501525845864375, 3.0, 3.985858591474293], ws=[3.11611193120266, 2.4669682884949298, 0.8501525845864375, 3.0, 3.8101010157167177], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757534], res_norm=1.758e-01
2026-01-24 02:08:31,294 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,343 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:32,370 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,425 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:32,449 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,496 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:32,517 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,569 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:32,591 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,637 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:32,660 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,708 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:32,731 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,779 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:32,800 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,849 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:32,872 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:32,925 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:32,950 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:33,000 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:33,023 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:33,074 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:33,938 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 02:08:33,949 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:33,949 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:08:33,965 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:08:33,966 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:34,208 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:34,227 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 02:08:34,227 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:34,227 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 02:08:34,227 - INFO - integration_test -   Control dict from planner: {'a': 4.868185735044124e-09, 'w': -0.1606670325610917}
2026-01-24 02:08:34,228 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:34,228 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:34,229 - INFO - integration_test - Step 14 completed in 5.185s
2026-01-24 02:08:34,290 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 02:08:34,292 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72199311 2.01453968 0.83408588 3.00000003 3.60000002]
2026-01-24 02:08:34,293 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-24 02:08:34,293 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 02:08:34,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:35,446 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 02:08:35,446 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 02:08:36,419 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:36,448 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:36,448 - INFO - integration_test - Warmstart k=0: x0=2.7219931073232093 , y0=2.0145396804301585 , psi0=0.8340858813303285 , v0=3.000000028916531 , spline0=3.6000000164515322 , a0=0.0 , w0=0.0
2026-01-24 02:08:36,448 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:36,449 - INFO - integration_test - Dyn residual k=0: pred=[2.9235496198032536, 2.236744482385187, 0.8340858813303285, 3.000000028916531, 3.900000019343185], ws=[2.923549617860482, 2.2367444802433902, 0.8340858813303287, 3.0, 3.685858592671847], res=[1.942771721274994e-09, 2.1417969620074473e-09, -2.220446049250313e-16, 2.891653094749813e-08, 0.2141414266713384], res_norm=2.141e-01
2026-01-24 02:08:36,450 - INFO - integration_test - Dyn residual k=1: pred=[3.1251061283977544, 2.458949280056622, 0.8340858813303287, 3.0, 3.985858592671847], ws=[3.1251061283977544, 2.458949280056622, 0.8340858813303287, 3.0, 3.8101010169142713], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:08:36,451 - INFO - integration_test - Dyn residual k=2: pred=[3.326662638935027, 2.6811540798698537, 0.8340858813303287, 3.0, 4.110101016914271], ws=[3.326662638935027, 2.6811540798698537, 0.8340858813303287, 3.0, 3.9343434411566953], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:08:36,468 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:37,509 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:37,530 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:37,576 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:37,598 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:37,646 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:37,668 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:37,709 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:37,733 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:37,777 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:37,796 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:37,843 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:37,867 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:37,917 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:37,940 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:37,986 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:38,006 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:38,053 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:38,075 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:38,119 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:38,139 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:38,183 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:38,781 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 02:08:38,791 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:38,791 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:08:38,807 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:08:38,808 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:39,014 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:39,030 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 02:08:39,030 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:39,030 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 02:08:39,030 - INFO - integration_test -   Control dict from planner: {'a': -9.213782987688645e-08, 'w': -0.06484687890074246}
2026-01-24 02:08:39,030 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:39,030 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:39,031 - INFO - integration_test - Step 15 completed in 4.740s
2026-01-24 02:08:39,089 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 02:08:39,090 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92426867 2.23608941 0.82760119 3.00000002 3.90000002]
2026-01-24 02:08:39,091 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.417m, drift=0.213m)
2026-01-24 02:08:39,091 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 02:08:39,092 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:40,118 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.924, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 02:08:40,118 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 02:08:41,385 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:41,417 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:41,417 - INFO - integration_test - Warmstart k=0: x0=2.9242686687500776 , y0=2.23608941147207 , psi0=0.8276011934402542 , v0=3.000000019702748 , spline0=3.900000018421807 , a0=0.0 , w0=0.0
2026-01-24 02:08:41,417 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:41,418 - INFO - integration_test - Dyn residual k=0: pred=[3.127261861466817, 2.4569825188630197, 0.8276011934402542, 3.000000019702748, 4.200000020392082], ws=[3.1272618601336424, 2.456982517412286, 0.8276011934402541, 3.0, 3.8101010177302435], res=[1.3331744597167017e-09, 1.4507337553482103e-09, 1.1102230246251565e-16, 1.970274787765902e-08, 0.3898990026618385], res_norm=3.899e-01
2026-01-24 02:08:41,419 - INFO - integration_test - Dyn residual k=1: pred=[3.3302550515172067, 2.677875623352502, 0.8276011934402541, 3.0, 4.110101017730243], ws=[3.3302550515172067, 2.677875623352502, 0.8276011934402541, 3.0, 3.934343441972668], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757534], res_norm=1.758e-01
2026-01-24 02:08:41,421 - INFO - integration_test - Dyn residual k=2: pred=[3.533248242900771, 2.898768729292718, 0.8276011934402541, 3.0, 4.234343441972668], ws=[3.533248242900771, 2.898768729292718, 0.8276011934402541, 3.0, 4.0585858662150915], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-24 02:08:41,441 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:42,522 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:42,546 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:42,595 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:42,618 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:42,671 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:42,694 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:42,745 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:42,768 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:42,817 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:42,841 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:42,892 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:42,918 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:42,970 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:42,993 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:43,044 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:43,068 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:43,117 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:43,141 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:43,189 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:43,211 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:43,265 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:44,021 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 02:08:44,029 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:44,029 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1842 scenarios available
2026-01-24 02:08:44,046 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1842 trajectory groups with 18420 total points
2026-01-24 02:08:44,048 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:44,298 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:44,316 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 02:08:44,316 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:44,316 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 02:08:44,316 - INFO - integration_test -   Control dict from planner: {'a': 1.0297138892018077e-07, 'w': -0.21435324798482208}
2026-01-24 02:08:44,316 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:44,316 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:44,318 - INFO - integration_test - Step 16 completed in 5.228s
2026-01-24 02:08:44,378 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 02:08:44,387 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.12961368 2.45479007 0.80616587 3.00000003 4.20000002]
2026-01-24 02:08:44,387 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.414m, drift=0.103m)
2026-01-24 02:08:44,388 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 02:08:44,388 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:45,377 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.130, 2.455), path_start=(0.000, 0.000), dist=3.977m
2026-01-24 02:08:45,377 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 02:08:46,290 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:46,317 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:46,317 - INFO - integration_test - Warmstart k=0: x0=3.12961368430994 , y0=2.454790074692591 , psi0=0.806165868641772 , v0=3.0000000299998866 , spline0=4.200000021421796 , a0=0.0 , w0=0.0
2026-01-24 02:08:46,317 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:46,318 - INFO - integration_test - Dyn residual k=0: pred=[3.337294797480933, 2.671281545730252, 0.806165868641772, 3.0000000299998866, 4.500000024421785], ws=[3.337294795404129, 2.6712815435653456, 0.8061658686417719, 3.0, 3.9343434432150874], res=[2.076803617967471e-09, 2.164906476309625e-09, 1.1102230246251565e-16, 2.999988657492736e-08, 0.5656565812066972], res_norm=5.657e-01
2026-01-24 02:08:46,319 - INFO - integration_test - Dyn residual k=1: pred=[3.5449759064983186, 2.8877730124381005, 0.8061658686417719, 3.0, 4.234343443215088], ws=[3.5449759064983186, 2.8877730124381005, 0.8061658686417719, 3.0, 4.058585867457511], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-24 02:08:46,320 - INFO - integration_test - Dyn residual k=2: pred=[3.752657017592508, 3.104264481310855, 0.8061658686417719, 3.0, 4.358585867457511], ws=[3.752657017592508, 3.1042644813108553, 0.8061658686417719, 3.0, 4.6454545668763405], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, -0.28686869941882964], res_norm=2.869e-01
2026-01-24 02:08:46,336 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:47,383 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:47,410 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:47,470 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:47,498 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:47,556 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:47,580 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:47,635 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:47,663 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:47,713 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:47,740 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:47,788 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:47,812 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:47,864 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:47,888 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:47,978 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:48,010 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:48,066 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:48,089 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:48,142 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:48,165 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:48,215 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:48,913 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 02:08:48,921 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:48,921 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:08:49,123 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:08:49,124 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:49,432 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:49,452 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 02:08:49,452 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:49,452 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 02:08:49,452 - INFO - integration_test -   Control dict from planner: {'a': -2.7082594779682275e-08, 'w': -0.5701421466235709}
2026-01-24 02:08:49,452 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:49,452 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:49,454 - INFO - integration_test - Step 17 completed in 5.067s
2026-01-24 02:08:49,521 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 02:08:49,530 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.34335218 2.66524549 0.74915165 3.00000003 4.50000002]
2026-01-24 02:08:49,531 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.414m, drift=0.403m)
2026-01-24 02:08:49,531 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 02:08:49,532 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:50,690 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.343, 2.665), path_start=(0.000, 0.000), dist=4.276m
2026-01-24 02:08:50,690 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 02:08:51,711 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:51,738 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:51,738 - INFO - integration_test - Warmstart k=0: x0=3.343352175036469 , y0=2.665245492648383 , psi0=0.7491516539794149 , v0=3.000000027291627 , spline0=4.500000024150959 , a0=0.0 , w0=0.0
2026-01-24 02:08:51,738 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:51,739 - INFO - integration_test - Dyn residual k=0: pred=[3.563032238346669, 2.869550831348879, 0.7491516539794149, 3.000000027291627, 4.800000026880121], ws=[3.563032236348193, 2.8695508294902705, 0.749151653979415, 3.0, 4.0585858685877705], res=[1.9984756072233267e-09, 1.85860837831342e-09, -1.1102230246251565e-16, 2.7291627180403566e-08, 0.7414141582923506], res_norm=7.414e-01
2026-01-24 02:08:51,740 - INFO - integration_test - Dyn residual k=1: pred=[3.7827122976599172, 3.073856166332158, 0.749151653979415, 3.0, 4.35858586858777], ws=[3.7827122976599172, 3.073856166332158, 0.749151653979415, 3.0, 4.645454569605503], res=[0.0, 0.0, 0.0, 0.0, -0.2868687010177329], res_norm=2.869e-01
2026-01-24 02:08:51,741 - INFO - integration_test - Dyn residual k=2: pred=[4.002392358971641, 3.2781615031740454, 0.749151653979415, 3.0, 4.945454569605503], ws=[4.002392358971641, 3.2781615031740454, 0.749151653979415, 3.0, 5.046464670615604], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:08:51,757 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:52,770 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:52,792 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:52,838 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:52,860 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:52,911 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:52,934 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:52,981 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:53,002 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:53,046 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:53,066 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:53,114 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:53,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:53,198 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:53,238 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:53,293 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:53,314 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:53,357 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:53,381 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:53,427 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:53,450 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:53,495 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:54,080 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 02:08:54,092 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:54,092 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:08:54,299 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:08:54,300 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:54,684 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:54,703 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 02:08:54,703 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:54,703 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 02:08:54,703 - INFO - integration_test -   Control dict from planner: {'a': 2.6631167277693057e-08, 'w': 0.7999999124729991}
2026-01-24 02:08:54,703 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:54,703 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:54,705 - INFO - integration_test - Step 18 completed in 5.175s
2026-01-24 02:08:54,773 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 02:08:54,778 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.55463014 2.87811549 0.82915165 3.00000003 4.80000003]
2026-01-24 02:08:54,779 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.364m, drift=0.293m)
2026-01-24 02:08:54,779 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-24 02:08:54,779 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:55,826 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.555, 2.878), path_start=(0.000, 0.000), dist=4.574m
2026-01-24 02:08:55,826 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 02:08:56,865 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:08:56,891 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:08:56,891 - INFO - integration_test - Warmstart k=0: x0=3.5546301359965233 , y0=2.878115494615516 , psi0=0.8291516452267148 , v0=3.000000029954744 , spline0=4.800000027146433 , a0=0.0 , w0=0.0
2026-01-24 02:08:56,891 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:08:56,892 - INFO - integration_test - Dyn residual k=0: pred=[3.757280601442337, 3.099323068292096, 0.8291516452267148, 3.000000029954744, 5.100000030141908], ws=[3.7572805994188894, 3.0993230660833575, 0.8291516452267147, 3.0, 4.645454572600978], res=[2.0234476316716155e-09, 2.208738525411036e-09, 1.1102230246251565e-16, 2.995474401856768e-08, 0.45454545754093], res_norm=4.545e-01
2026-01-24 02:08:56,893 - INFO - integration_test - Dyn residual k=1: pred=[3.9599310628412554, 3.320530637551199, 0.8291516452267147, 3.0, 4.945454572600978], ws=[3.9599310628412554, 3.320530637551199, 0.8291516452267147, 3.0, 5.046464673611079], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:08:56,894 - INFO - integration_test - Dyn residual k=2: pred=[4.162581526263621, 3.541738209019041, 0.8291516452267147, 3.0, 5.346464673611079], ws=[4.162581526263621, 3.541738209019041, 0.8291516452267147, 3.0, 5.1444444715908775], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:08:56,911 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,011 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:58,034 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,084 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:58,108 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,158 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:58,180 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,227 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:58,251 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,301 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:58,325 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,370 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:58,392 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,437 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:58,459 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,504 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:58,525 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,568 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:08:58,588 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,630 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:58,649 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:08:58,694 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:08:59,312 - INFO - integration_test - Step 19: MPC solve successful
2026-01-24 02:08:59,324 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:08:59,324 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:08:59,342 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:08:59,343 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:08:59,921 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:08:59,943 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-24 02:08:59,943 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:08:59,943 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 02:08:59,943 - INFO - integration_test -   Control dict from planner: {'a': -5.473620877506959e-08, 'w': -0.800000001884193}
2026-01-24 02:08:59,943 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:08:59,943 - INFO - integration_test -   Planner output success: True
2026-01-24 02:08:59,945 - INFO - integration_test - Step 19 completed in 5.167s
2026-01-24 02:09:00,017 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 02:09:00,018 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.7659081  3.0909855  0.74915165 3.00000002 5.10000003]
2026-01-24 02:09:00,019 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.343m, drift=0.184m)
2026-01-24 02:09:00,019 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-24 02:09:00,019 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:01,106 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.766, 3.091), path_start=(0.000, 0.000), dist=4.872m
2026-01-24 02:09:01,106 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 02:09:02,069 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:02,095 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:09:02,095 - INFO - integration_test - Warmstart k=0: x0=3.765908097795336 , y0=3.090985495527037 , psi0=0.7491516450382956 , v0=3.0000000244811234 , spline0=5.100000029594546 , a0=0.0 , w0=0.0
2026-01-24 02:09:02,095 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:09:02,096 - INFO - integration_test - Dyn residual k=0: pred=[3.98558816272645, 3.295290832071947, 0.7491516450382956, 3.0000000244811234, 5.400000032042659], ws=[3.9855881609337787, 3.295290830404739, 0.7491516450382956, 3.0, 5.046464676059192], res=[1.7926713447025122e-09, 1.6672081493140922e-09, 0.0, 2.4481123350739153e-08, 0.35353535598346664], res_norm=3.535e-01
2026-01-24 02:09:02,097 - INFO - integration_test - Dyn residual k=1: pred=[4.2052682240722215, 3.4995961652824406, 0.7491516450382956, 3.0, 5.346464676059192], ws=[4.2052682240722215, 3.4995961652824406, 0.7491516450382956, 3.0, 5.14444447403899], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:09:02,098 - INFO - integration_test - Dyn residual k=2: pred=[4.424948287210664, 3.7039015001601423, 0.7491516450382956, 3.0, 5.44444447403899], ws=[4.424948287210664, 3.7039015001601423, 0.7491516450382956, 3.0, 5.747474777069293], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:09:02,114 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,160 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:03,182 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,230 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:03,255 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,303 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:03,326 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,375 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:03,396 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,449 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:03,474 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,523 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:03,547 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,595 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:03,618 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,670 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:03,694 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,745 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:03,769 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,817 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:03,843 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:03,894 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:07,955 - WARNING - integration_test - Step 20: MPC solve failed
2026-01-24 02:09:07,955 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:09:07,964 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:09:07,964 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:09:07,978 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:09:07,979 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:09:08,373 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:09:08,392 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-24 02:09:08,392 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:09:08,392 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 02:09:08,392 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:09:08,392 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:09:08,392 - INFO - integration_test -   Planner output success: False
2026-01-24 02:09:08,392 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:09:08,394 - INFO - integration_test - Step 20 completed in 8.376s
2026-01-24 02:09:08,467 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 02:09:08,469 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.97023807 3.29666593 0.82915165 2.80000002 5.38000003]
2026-01-24 02:09:08,469 - DEBUG - integration_test - Step 21: Using propagated spline 5.3800 (close to path, dist=0.361m, drift=0.054m)
2026-01-24 02:09:08,469 - DEBUG - integration_test -   Set spline state to 5.3800
2026-01-24 02:09:08,470 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:09,461 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.970, 3.297), path_start=(0.000, 0.000), dist=5.161m
2026-01-24 02:09:09,461 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 02:09:10,682 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:10,709 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:09:10,709 - INFO - integration_test - Warmstart k=0: x0=3.970238069647899 , y0=3.296665928276045 , psi0=0.8291516450382955 , v0=2.800000024481123 , spline0=5.380000032042658 , a0=0.0 , w0=0.0
2026-01-24 02:09:10,709 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:09:10,710 - INFO - integration_test - Dyn residual k=0: pred=[4.159378503868045, 3.5031263300821958, 0.8291516450382955, 2.800000024481123, 5.66000003449077], ws=[4.159378503868045, 3.5031263300821958, 0.8291516450382956, 2.800000024481123, 4.902424276915013], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.7575757575757578], res_norm=7.576e-01
2026-01-24 02:09:10,711 - INFO - integration_test - Dyn residual k=1: pred=[4.3485189380881915, 3.7095867318883466, 0.8291516450382956, 2.800000024481123, 5.182424279363125], ws=[4.3485189380881915, 3.7095867318883466, 0.8291516450382956, 2.800000024481123, 5.4854545823934275], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:09:10,712 - INFO - integration_test - Dyn residual k=2: pred=[4.537659372308338, 3.9160471336944975, 0.8291516450382956, 2.800000024481123, 5.76545458484154], ws=[4.537659372308338, 3.9160471336944975, 0.8291516450382956, 2.800000024481123, 5.866464685851641], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:09:10,729 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:11,750 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:11,772 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:11,820 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:11,843 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:11,891 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:11,914 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:11,964 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:11,987 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:12,036 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:12,058 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:12,109 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:12,131 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:12,180 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:12,205 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:12,256 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:12,278 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:12,326 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:12,350 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:12,397 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:12,420 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:12,470 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:17,487 - WARNING - integration_test - Step 21: MPC solve failed
2026-01-24 02:09:17,487 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 02:09:17,499 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:09:17,500 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:09:17,515 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:09:17,516 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:09:17,894 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:09:17,924 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.380)
2026-01-24 02:09:17,925 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:09:17,925 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 02:09:17,925 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:09:17,925 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:09:17,925 - INFO - integration_test -   Planner output success: False
2026-01-24 02:09:17,925 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:09:17,927 - INFO - integration_test - Step 21 completed in 9.458s
2026-01-24 02:09:17,997 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-24 02:09:17,999 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.14457159 3.50274594 0.90915165 2.60000002 5.64000003]
2026-01-24 02:09:18,000 - DEBUG - integration_test - Step 22: Using propagated spline 5.6400 (close to path, dist=0.295m, drift=0.314m)
2026-01-24 02:09:18,000 - DEBUG - integration_test -   Set spline state to 5.6400
2026-01-24 02:09:18,000 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:18,995 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.145, 3.503), path_start=(0.000, 0.000), dist=5.426m
2026-01-24 02:09:18,995 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-24 02:09:20,086 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:20,112 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:09:20,112 - INFO - integration_test - Warmstart k=0: x0=4.144571592726359 , y0=3.5027459423166296 , psi0=0.9091516450382955 , v0=2.600000024481123 , spline0=5.640000034490771 , a0=0.0 , w0=0.0
2026-01-24 02:09:20,112 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:09:20,113 - INFO - integration_test - Dyn residual k=0: pred=[4.304319574301427, 3.7078814674109193, 0.9091516450382955, 2.600000024481123, 5.900000036938883], ws=[4.304319574301427, 3.7078814674109193, 0.9091516450382953, 2.600000024481123, 5.243434380373227], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.6565656565656566], res_norm=6.566e-01
2026-01-24 02:09:20,114 - INFO - integration_test - Dyn residual k=1: pred=[4.464067555876496, 3.913016992505209, 0.9091516450382953, 2.600000024481123, 5.5034343828213395], ws=[4.464067555876496, 3.913016992505209, 0.9091516450382953, 2.600000024481123, 5.806464685851642], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:09:20,115 - INFO - integration_test - Dyn residual k=2: pred=[4.623815537451565, 4.118152517599499, 0.9091516450382953, 2.600000024481123, 6.066464688299755], ws=[4.623815537451565, 4.118152517599499, 0.9091516450382953, 2.600000024481123, 6.167474789309856], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:09:20,131 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,163 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:21,186 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,232 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:21,254 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,300 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:21,321 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,365 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:21,386 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,430 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:21,451 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,497 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:21,519 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,566 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:21,587 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,631 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:21,652 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,699 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:21,721 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,765 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:21,785 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:21,833 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:27,602 - WARNING - integration_test - Step 22: MPC solve failed
2026-01-24 02:09:27,602 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-24 02:09:27,614 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:09:27,614 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1844 scenarios available
2026-01-24 02:09:27,629 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1844 trajectory groups with 18440 total points
2026-01-24 02:09:27,630 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:09:28,285 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:09:28,307 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.640)
2026-01-24 02:09:28,308 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:09:28,308 - INFO - integration_test - === Applying control at step 22 ===
2026-01-24 02:09:28,308 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.3867879708805386}
2026-01-24 02:09:28,308 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:09:28,308 - INFO - integration_test -   Planner output success: False
2026-01-24 02:09:28,308 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.3867879708805386}
2026-01-24 02:09:28,310 - INFO - integration_test - Step 22 completed in 10.311s
2026-01-24 02:09:28,385 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-24 02:09:28,395 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.2943746  3.70287408 0.94783044 2.40000002 5.88000004]
2026-01-24 02:09:28,396 - DEBUG - integration_test - Step 23: Using propagated spline 5.8800 (close to path, dist=0.233m, drift=0.144m)
2026-01-24 02:09:28,397 - DEBUG - integration_test -   Set spline state to 5.8800
2026-01-24 02:09:28,398 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:29,426 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.294, 3.703), path_start=(0.000, 0.000), dist=5.670m
2026-01-24 02:09:29,426 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-24 02:09:30,410 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:30,438 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:09:30,438 - INFO - integration_test - Warmstart k=0: x0=4.2943746015095385 , y0=3.70287408251838 , psi0=0.9478304421263494 , v0=2.400000024481123 , spline0=5.880000036938883 , a0=0.0 , w0=0.0
2026-01-24 02:09:30,438 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:09:30,439 - INFO - integration_test - Dyn residual k=0: pred=[4.434401756003612, 3.897790467615649, 0.9478304421263494, 2.400000024481123, 6.120000039386995], ws=[4.434401756003612, 3.897790467615649, 0.9478304421263495, 2.400000024481123, 5.56444448383144], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-24 02:09:30,440 - INFO - integration_test - Dyn residual k=1: pred=[4.574428910497685, 4.092706852712918, 0.9478304421263495, 2.400000024481123, 5.804444486279552], ws=[4.574428910497685, 4.092706852712918, 0.9478304421263495, 2.400000024481123, 5.905454587289652], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-24 02:09:30,441 - INFO - integration_test - Dyn residual k=2: pred=[4.714456064991759, 4.287623237810187, 0.9478304421263495, 2.400000024481123, 6.145454589737764], ws=[4.714456064991759, 4.287623237810187, 0.9478304421263495, 2.400000024481123, 6.246464690747866], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:09:30,457 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:31,488 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:31,511 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:31,559 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:31,582 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:31,628 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:31,649 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:31,697 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:31,719 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:31,769 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:31,792 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:31,839 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:31,860 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:31,907 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:31,929 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:31,977 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:31,999 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:32,047 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:32,070 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:32,122 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:32,145 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:32,192 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:38,236 - WARNING - integration_test - Step 23: MPC solve failed
2026-01-24 02:09:38,236 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-24 02:09:38,247 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:09:38,248 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:09:38,262 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:09:38,263 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:09:38,722 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:09:38,748 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=5.880)
2026-01-24 02:09:38,749 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:09:38,749 - INFO - integration_test - === Applying control at step 23 ===
2026-01-24 02:09:38,749 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.5009661349456911}
2026-01-24 02:09:38,749 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:09:38,749 - INFO - integration_test -   Planner output success: False
2026-01-24 02:09:38,749 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.5009661349456911}
2026-01-24 02:09:38,751 - INFO - integration_test - Step 23 completed in 10.356s
2026-01-24 02:09:38,818 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-24 02:09:38,820 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.42390225 3.89290443 0.99792706 2.20000002 6.10000004]
2026-01-24 02:09:38,821 - DEBUG - integration_test - Step 24: Using propagated spline 6.1000 (close to path, dist=0.227m, drift=0.364m)
2026-01-24 02:09:38,821 - DEBUG - integration_test -   Set spline state to 6.1000
2026-01-24 02:09:38,822 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:39,797 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.424, 3.893), path_start=(0.000, 0.000), dist=5.893m
2026-01-24 02:09:39,797 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-24 02:09:40,803 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:40,831 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:09:40,831 - INFO - integration_test - Warmstart k=0: x0=4.423902253661151 , y0=3.8929044303992804 , psi0=0.9979270556209184 , v0=2.2000000244811226 , spline0=6.1000000393869955 , a0=0.0 , w0=0.0
2026-01-24 02:09:40,831 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:09:40,832 - INFO - integration_test - Dyn residual k=0: pred=[4.543152257574432, 4.077781247885551, 0.9979270556209184, 2.2000000244811226, 6.320000041835108], ws=[4.543152257574432, 4.077781247885551, 0.9979270556209183, 2.2000000244811226, 5.6634343852694515], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.6565656565656566], res_norm=6.566e-01
2026-01-24 02:09:40,833 - INFO - integration_test - Dyn residual k=1: pred=[4.662402261487713, 4.262658065371822, 0.9979270556209183, 2.2000000244811226, 5.883434387717564], ws=[4.662402261487713, 4.262658065371822, 0.9979270556209183, 2.2000000244811226, 5.984444488727665], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:09:40,833 - INFO - integration_test - Dyn residual k=2: pred=[4.781652265400995, 4.4475348828580925, 0.9979270556209183, 2.2000000244811226, 6.204444491175778], ws=[4.405117906781597, 4.433933949071322, 0.9979270556209183, 2.2000000244811226, 5.699393986125273], res=[0.37653435861939766, 0.013600933786770852, 0.0, 0.0, 0.5050505050505052], res_norm=6.301e-01
2026-01-24 02:09:40,851 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:41,853 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:41,874 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:41,922 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:41,955 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,023 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:42,046 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,092 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:42,114 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,162 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:42,183 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,229 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:42,250 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,296 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:42,317 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,361 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:42,383 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,425 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:42,446 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,501 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:42,524 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:42,572 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:48,497 - WARNING - integration_test - Step 24: MPC solve failed
2026-01-24 02:09:48,497 - WARNING - integration_test -   Consecutive MPC failures: 5/20
2026-01-24 02:09:48,513 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:09:48,513 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:09:48,761 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:09:48,762 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:09:49,193 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:09:49,217 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.100)
2026-01-24 02:09:49,217 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:09:49,217 - INFO - integration_test - === Applying control at step 24 ===
2026-01-24 02:09:49,217 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.15692183830129824}
2026-01-24 02:09:49,217 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:09:49,217 - INFO - integration_test -   Planner output success: False
2026-01-24 02:09:49,217 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.15692183830129824}
2026-01-24 02:09:49,219 - INFO - integration_test - Step 24 completed in 10.398s
2026-01-24 02:09:49,286 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-24 02:09:49,287 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.53908986 4.06849176 0.98223487 2.00000002 6.30000004]
2026-01-24 02:09:49,288 - DEBUG - integration_test - Step 25: Using propagated spline 6.3000 (close to path, dist=0.115m, drift=0.155m)
2026-01-24 02:09:49,288 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-24 02:09:49,289 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:50,212 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.539, 4.068), path_start=(0.000, 0.000), dist=6.096m
2026-01-24 02:09:50,212 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-24 02:09:51,169 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:09:51,197 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:09:51,197 - INFO - integration_test - Warmstart k=0: x0=4.539089862781649 , y0=4.068491763306713 , psi0=0.9822348717907886 , v0=2.0000000244811225 , spline0=6.300000041835108 , a0=0.0 , w0=0.0
2026-01-24 02:09:51,197 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:09:51,198 - INFO - integration_test - Dyn residual k=0: pred=[4.650122884560626, 4.234839799225007, 0.9822348717907886, 2.0000000244811225, 6.50000004428322], ws=[4.425585491378444, 4.0678413730158365, 0.9822348717907889, 2.0000000244811225, 5.843434387717563], res=[0.22453739318218258, 0.1669984262091706, -3.3306690738754696e-16, 0.0, 0.6565656565656566], res_norm=7.137e-01
2026-01-24 02:09:51,199 - INFO - integration_test - Dyn residual k=1: pred=[4.53661851315742, 4.234189408934131, 0.9822348717907889, 2.0000000244811225, 6.043434390165675], ws=[4.609305230559483, 4.389655661546104, 0.9822348717907889, 2.0000000244811225, 6.245454592185877], res=[-0.07268671740206223, -0.15546625261197367, 0.0, 0.0, -0.20202020202020154], res_norm=2.651e-01
2026-01-24 02:09:51,200 - INFO - integration_test - Dyn residual k=2: pred=[4.720338252338459, 4.556003697464399, 0.9822348717907889, 2.0000000244811225, 6.445454594633989], ws=[4.551011174067247, 4.464053809357041, 0.9822348717907889, 2.0000000244811225, 6.243434392613787], res=[0.16932707827121263, 0.09194988810735794, 0.0, 0.0, 0.20202020202020154], res_norm=2.792e-01
2026-01-24 02:09:51,218 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,331 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:52,354 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,403 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:52,427 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,475 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:52,499 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,550 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:52,575 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,624 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:52,648 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,697 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:52,720 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,770 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:52,793 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,842 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:52,865 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,919 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:09:52,948 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:52,999 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:53,022 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:09:53,070 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:09:58,776 - WARNING - integration_test - Step 25: MPC solve failed
2026-01-24 02:09:58,776 - WARNING - integration_test -   Consecutive MPC failures: 6/20
2026-01-24 02:09:58,792 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:09:58,792 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1871 scenarios available
2026-01-24 02:09:59,047 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1871 trajectory groups with 18710 total points
2026-01-24 02:09:59,048 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:09:59,586 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:09:59,618 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-24 02:09:59,619 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:09:59,619 - INFO - integration_test - === Applying control at step 25 ===
2026-01-24 02:09:59,619 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.08943942086433765}
2026-01-24 02:09:59,619 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:09:59,619 - INFO - integration_test -   Planner output success: False
2026-01-24 02:09:59,619 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.08943942086433765}
2026-01-24 02:09:59,621 - INFO - integration_test - Step 25 completed in 10.334s
2026-01-24 02:09:59,694 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-24 02:09:59,698 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[4.64526417 4.22605692 0.97329093 1.80000002 6.48000004]
2026-01-24 02:09:59,699 - DEBUG - integration_test - Step 26: Using propagated spline 6.4800 (close to path, dist=0.143m, drift=0.335m)
2026-01-24 02:09:59,699 - DEBUG - integration_test -   Set spline state to 6.4800
2026-01-24 02:09:59,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:10:00,707 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(4.645, 4.226), path_start=(0.000, 0.000), dist=6.280m
2026-01-24 02:10:00,707 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-24 02:10:01,665 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:10:01,691 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:10:01,691 - INFO - integration_test - Warmstart k=0: x0=4.645264169720254 , y0=4.226056915070902 , psi0=0.9732909297043548 , v0=1.8000000244811225 , spline0=6.48000004428322 , a0=0.0 , w0=0.0
2026-01-24 02:10:01,691 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:10:01,692 - INFO - integration_test - Dyn residual k=0: pred=[4.746528901218912, 4.374870405843161, 0.9732909297043548, 1.8000000244811225, 6.660000046731333], ws=[4.746528901218912, 4.374870405843161, 0.9732909297043548, 1.8000000244811225, 6.003434390165676], res=[0.0, 0.0, 0.0, 0.0, 0.6565656565656566], res_norm=6.566e-01
2026-01-24 02:10:01,693 - INFO - integration_test - Dyn residual k=1: pred=[4.847793632717569, 4.52368389661542, 0.9732909297043548, 1.8000000244811225, 6.183434392613789], ws=[4.847793632717569, 4.52368389661542, 0.9732909297043548, 1.8000000244811225, 6.587474796654193], res=[0.0, 0.0, 0.0, 0.0, -0.404040404040404], res_norm=4.040e-01
2026-01-24 02:10:01,694 - INFO - integration_test - Dyn residual k=2: pred=[4.949058364216227, 4.672497387387679, 0.9732909297043548, 1.8000000244811225, 6.767474799102305], ws=[4.696359264019745, 4.351323982498732, 0.9732909297043548, 1.8000000244811225, 6.2624242940518], res=[0.252699100196482, 0.3211734048889472, 0.0, 0.0, 0.5050505050505052], res_norm=6.497e-01
2026-01-24 02:10:01,711 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:02,719 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:02,742 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:02,789 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:02,812 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:02,859 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:02,881 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:02,932 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:02,954 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:03,001 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:03,023 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:03,067 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:03,088 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:03,134 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:03,155 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:03,200 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:03,221 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:03,267 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:03,288 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:03,334 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:03,354 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:03,398 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:08,742 - WARNING - integration_test - Step 26: MPC solve failed
2026-01-24 02:10:08,742 - WARNING - integration_test -   Consecutive MPC failures: 7/20
2026-01-24 02:10:08,757 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:08,757 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:10:08,774 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:10:08,775 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:09,283 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:10:09,308 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.480)
2026-01-24 02:10:09,308 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:10:09,308 - INFO - integration_test - === Applying control at step 26 ===
2026-01-24 02:10:09,309 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.40675695084968133}
2026-01-24 02:10:09,309 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:10:09,309 - INFO - integration_test -   Planner output success: False
2026-01-24 02:10:09,309 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.40675695084968133}
2026-01-24 02:10:09,310 - INFO - integration_test - Step 26 completed in 9.612s
2026-01-24 02:10:09,385 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-24 02:10:09,390 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[4.74367947 4.36465868 0.93261523 1.60000002 6.64000005]
2026-01-24 02:10:09,391 - DEBUG - integration_test - Step 27: Using propagated spline 6.6400 (close to path, dist=0.112m, drift=0.085m)
2026-01-24 02:10:09,391 - DEBUG - integration_test -   Set spline state to 6.6400
2026-01-24 02:10:09,392 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:10:10,610 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(4.744, 4.365), path_start=(0.000, 0.000), dist=6.446m
2026-01-24 02:10:10,611 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-24 02:10:11,555 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:10:11,580 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:10:11,580 - INFO - integration_test - Warmstart k=0: x0=4.743679466949899 , y0=4.364658684022625 , psi0=0.9326152346193867 , v0=1.6000000244811226 , spline0=6.640000046731332 , a0=0.0 , w0=0.0
2026-01-24 02:10:11,580 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:10:11,581 - INFO - integration_test - Dyn residual k=0: pred=[4.838997150972928, 4.493167593814444, 0.9326152346193867, 1.6000000244811226, 6.800000049179444], ws=[4.382177500962172, 4.121503264277089, 0.9326152346193863, 1.6000000244811226, 5.840404089583485], res=[0.45681965001075664, 0.3716643295373556, 3.3306690738754696e-16, 0.0, 0.9595959595959593], res_norm=1.126e+00
2026-01-24 02:10:11,582 - INFO - integration_test - Dyn residual k=1: pred=[4.477495184985201, 4.2500121740689085, 0.9326152346193863, 1.6000000244811226, 6.000404092031597], ws=[4.780284559439871, 4.418125347429567, 0.9326152346193863, 1.6000000244811226, 6.3034343950619], res=[-0.3027893744546706, -0.16811317336065823, 0.0, 0.0, -0.30303030303030276], res_norm=4.602e-01
2026-01-24 02:10:11,583 - INFO - integration_test - Dyn residual k=2: pred=[4.8756022434629, 4.5466342572213865, 0.9326152346193863, 1.6000000244811226, 6.463434397510012], ws=[4.6473533792740565, 4.363913236134298, 0.9326152346193863, 1.6000000244811226, 6.2614141954898095], res=[0.22824886418884383, 0.18272102108708843, 0.0, 0.0, 0.20202020202020243], res_norm=3.554e-01
2026-01-24 02:10:11,599 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:12,626 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:12,647 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:12,695 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:12,719 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:12,773 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:12,794 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:12,842 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:12,866 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:12,920 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:12,946 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:12,996 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:13,019 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:13,067 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:13,088 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:13,140 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:13,163 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:13,213 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:13,238 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:13,286 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:13,309 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:13,361 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:18,987 - WARNING - integration_test - Step 27: MPC solve failed
2026-01-24 02:10:18,988 - WARNING - integration_test -   Consecutive MPC failures: 8/20
2026-01-24 02:10:19,000 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:19,000 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:10:19,015 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:10:19,016 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:19,524 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:10:19,559 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=6.640)
2026-01-24 02:10:19,559 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:10:19,559 - INFO - integration_test - === Applying control at step 27 ===
2026-01-24 02:10:19,559 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.420746445889022}
2026-01-24 02:10:19,559 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:10:19,559 - INFO - integration_test -   Planner output success: False
2026-01-24 02:10:19,560 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.420746445889022}
2026-01-24 02:10:19,561 - INFO - integration_test - Step 27 completed in 10.171s
2026-01-24 02:10:19,629 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-24 02:10:19,635 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[4.83549215 4.48326357 0.89054059 1.40000002 6.78000005]
2026-01-24 02:10:19,636 - DEBUG - integration_test - Step 28: Using propagated spline 6.7800 (close to path, dist=0.042m, drift=0.225m)
2026-01-24 02:10:19,636 - DEBUG - integration_test -   Set spline state to 6.7800
2026-01-24 02:10:19,637 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:10:20,667 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(4.835, 4.483), path_start=(0.000, 0.000), dist=6.594m
2026-01-24 02:10:20,667 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-24 02:10:21,679 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:10:21,708 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:10:21,708 - INFO - integration_test - Warmstart k=0: x0=4.835492147376034 , y0=4.483263567319453 , psi0=0.8905405900304845 , v0=1.4000000244811226 , spline0=6.780000049179445 , a0=0.0 , w0=0.0
2026-01-24 02:10:21,708 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:10:21,709 - INFO - integration_test - Dyn residual k=0: pred=[4.923551008949854, 4.592101233519139, 0.8905405900304845, 1.4000000244811226, 6.920000051627557], ws=[4.76375338391172, 4.776692150564487, 0.8905405900304846, 1.4000000244811226, 6.364444496072002], res=[0.15979762503813433, -0.18459091704534814, -1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=6.068e-01
2026-01-24 02:10:21,710 - INFO - integration_test - Dyn residual k=1: pred=[4.851812245485539, 4.885529816764173, 0.8905405900304846, 1.4000000244811226, 6.504444498520114], ws=[4.527116511657723, 4.715003227598933, 0.8905405900304846, 1.4000000244811226, 6.302424296499912], res=[0.32469573382781647, 0.17052658916523988, 0.0, 0.0, 0.20202020202020243], res_norm=4.187e-01
2026-01-24 02:10:21,711 - INFO - integration_test - Dyn residual k=2: pred=[4.615175373231542, 4.823840893798619, 0.8905405900304846, 1.4000000244811226, 6.4424242989480245], ws=[4.341421953101751, 4.896557181523103, 0.8905405900304846, 1.4000000244811226, 6.0383838949076205], res=[0.27375342012979154, -0.07271628772448402, 0.0, 0.0, 0.404040404040404], res_norm=4.934e-01
2026-01-24 02:10:21,729 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,000 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:23,033 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,100 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:23,138 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,215 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:23,275 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,369 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:23,397 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,452 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:23,478 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,537 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:23,563 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,616 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:23,643 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,697 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:23,726 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,779 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:10:23,801 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,849 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:23,872 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:10:23,920 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:10:30,274 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-24 02:10:30,274 - WARNING - integration_test -   Consecutive MPC failures: 9/20
2026-01-24 02:10:30,296 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:30,296 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:10:30,315 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:10:30,317 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:30,994 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:10:31,016 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=6.780)
2026-01-24 02:10:31,017 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:10:31,017 - INFO - integration_test - === Applying control at step 28 ===
2026-01-24 02:10:31,017 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.4902287382057917}
2026-01-24 02:10:31,017 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:10:31,017 - INFO - integration_test -   Planner output success: False
2026-01-24 02:10:31,017 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.4902287382057917}
2026-01-24 02:10:31,019 - INFO - integration_test - Step 28 completed in 11.383s
2026-01-24 02:10:31,090 - WARNING - integration_test - Test timeout reached (180.0s) at step 29. Terminating test early.
2026-01-24 02:10:31,095 - INFO - integration_test - Saving test results...
2026-01-24 02:10:31,096 - INFO - integration_test - Saved 30 vehicle states to test_outputs/20260124_020719_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-24 02:10:31,097 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_020719_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-24 02:10:31,097 - INFO - integration_test - Saved 40 states for obstacle 0 to test_outputs/20260124_020719_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-24 02:10:31,097 - INFO - integration_test - Saved 40 states for obstacle 1 to test_outputs/20260124_020719_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-24 02:10:31,097 - INFO - integration_test - Saved state history: 30 vehicle states, 2 obstacles
2026-01-24 02:10:31,097 - INFO - integration_test - Creating animation...
2026-01-24 02:10:31,144 - DEBUG - integration_test - Creating animation with 30 frames (range: 0 to 29)
2026-01-24 02:10:31,144 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:10:32,397 - INFO - integration_test - Frame 0: Safe Horizon module has 1860 scenarios after update
2026-01-24 02:10:32,397 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:10:32,397 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:10:32,399 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:32,399 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:10:32,414 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:10:32,416 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:32,722 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:10:32,727 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:10:32,728 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:10:33,629 - INFO - integration_test - Frame 0: Safe Horizon module has 1859 scenarios after update
2026-01-24 02:10:33,629 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:10:33,629 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:10:33,631 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:33,631 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:10:33,646 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:10:33,647 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:33,694 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:10:33,700 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:10:33,835 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 02:10:34,803 - INFO - integration_test - Frame 1: Safe Horizon module has 1844 scenarios after update
2026-01-24 02:10:34,803 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-24 02:10:34,803 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:10:34,805 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:34,805 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1844 scenarios available
2026-01-24 02:10:34,822 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1844 trajectory groups with 18440 total points
2026-01-24 02:10:34,824 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:34,879 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:34,885 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-24 02:10:34,994 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 02:10:36,254 - INFO - integration_test - Frame 2: Safe Horizon module has 1863 scenarios after update
2026-01-24 02:10:36,254 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-24 02:10:36,254 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:10:36,256 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:36,256 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:10:36,272 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:10:36,273 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:36,322 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:36,330 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-24 02:10:37,410 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:37,410 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:10:37,428 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:10:37,430 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:37,480 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:38,611 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:38,611 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:10:38,900 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:10:38,901 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:38,952 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:40,018 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:40,018 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1878 scenarios available
2026-01-24 02:10:40,035 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1878 trajectory groups with 18780 total points
2026-01-24 02:10:40,037 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:40,082 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:41,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:41,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:10:41,393 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:10:41,394 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:41,441 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:42,558 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:42,558 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:10:42,578 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:10:42,579 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:42,630 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:43,806 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:43,807 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1841 scenarios available
2026-01-24 02:10:43,826 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1841 trajectory groups with 18410 total points
2026-01-24 02:10:43,827 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:44,160 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:45,259 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:45,259 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:10:45,277 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:10:45,278 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:45,332 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:46,493 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:46,493 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:10:46,512 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:10:46,513 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:46,563 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:47,595 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:47,595 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:10:47,875 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:10:47,876 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:47,931 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:48,988 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:48,988 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:10:49,008 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:10:49,009 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:49,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:50,187 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:50,187 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:10:50,497 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:10:50,499 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:50,551 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:51,706 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:51,706 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:10:51,727 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:10:51,728 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:51,779 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:52,854 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:52,854 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:10:52,872 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:10:52,873 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:52,927 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:54,272 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:54,272 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:10:54,291 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:10:54,292 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:54,348 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:55,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:55,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:10:55,516 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:10:55,518 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:55,570 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:56,702 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:56,702 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:10:56,995 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:10:56,997 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:57,047 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:58,257 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:58,257 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1843 scenarios available
2026-01-24 02:10:58,277 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1843 trajectory groups with 18430 total points
2026-01-24 02:10:58,278 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:58,336 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:10:59,452 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:10:59,452 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:10:59,748 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:10:59,749 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:10:59,799 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:00,896 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:00,896 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1841 scenarios available
2026-01-24 02:11:00,913 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1841 trajectory groups with 18410 total points
2026-01-24 02:11:00,914 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:00,965 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:01,980 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:01,980 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1847 scenarios available
2026-01-24 02:11:01,997 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1847 trajectory groups with 18470 total points
2026-01-24 02:11:01,998 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:02,045 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:03,346 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:03,346 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:11:03,376 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:11:03,377 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:03,472 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:04,612 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:04,612 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:11:04,633 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:11:04,634 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:04,685 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:05,781 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:05,781 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:11:06,072 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:11:06,073 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:06,124 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:07,254 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:07,254 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:11:07,273 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:11:07,274 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:07,328 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:08,474 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:08,474 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1836 scenarios available
2026-01-24 02:11:08,747 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1836 trajectory groups with 18360 total points
2026-01-24 02:11:08,748 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:08,793 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:09,810 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:09,810 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:11:09,829 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:11:09,830 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:09,877 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:10,963 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:11:10,963 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:11:11,265 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:11:11,266 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:11:11,318 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:11:13,391 - INFO - integration_test - Saved animation with 30 frames at 10.00 fps to test_outputs/20260124_020719_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 3.00s, size: 492332 bytes)
2026-01-24 02:11:13,414 - INFO - integration_test - Animation created successfully
2026-01-24 02:11:13,415 - INFO - integration_test - Test completed successfully
