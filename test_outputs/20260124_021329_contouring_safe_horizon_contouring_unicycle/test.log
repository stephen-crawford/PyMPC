2026-01-24 02:13:29,671 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 02:13:29,671 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 02:13:29,671 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 02:13:29,671 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 02:13:29,671 - INFO - integration_test - Creating objective module: contouring
2026-01-24 02:13:29,678 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 02:13:29,678 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-24 02:13:29,678 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-24 02:13:29,708 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-24 02:13:29,708 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 02:13:29,715 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 02:13:29,715 - INFO - integration_test - Created 2 constraint module(s)
2026-01-24 02:13:29,736 - INFO - integration_test - Setting solver on all modules...
2026-01-24 02:13:29,736 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-24 02:13:29,736 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 02:13:29,736 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 02:13:29,736 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 02:13:29,736 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 02:13:29,736 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 02:13:29,736 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 02:13:29,736 - INFO - integration_test - Obstacle 0: s=8.03, pos=(6.24, 5.59), lateral_offset=0.00m, vel=(0.47, 0.37)
2026-01-24 02:13:29,736 - INFO - integration_test - Obstacle 1: s=17.06, pos=(13.71, 10.71), lateral_offset=0.00m, vel=(-0.69, -0.41)
2026-01-24 02:13:29,737 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 02:13:29,737 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 02:13:29,737 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 02:13:29,737 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 02:13:29,737 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 02:13:29,737 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 02:13:29,737 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 02:13:29,738 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 02:13:29,738 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 02:13:29,738 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 02:13:29,738 - INFO - integration_test - Auto-calculated timeout: 180s for 100 steps
2026-01-24 02:13:29,738 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 02:13:29,738 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 02:13:29,739 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 02:13:29,739 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 02:13:29,739 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:30,975 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 02:13:30,975 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 02:13:31,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:31,948 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:13:31,949 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 02:13:31,949 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:13:31,950 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 02:13:31,950 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-24 02:13:31,951 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-24 02:13:31,969 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:32,951 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:32,972 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,020 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:33,041 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,097 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:33,124 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,171 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:33,192 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,239 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:33,261 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,307 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:33,328 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,375 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:33,397 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,443 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:33,463 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,508 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:33,529 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,577 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:33,598 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:33,644 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:34,781 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 02:13:34,975 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:13:34,975 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:13:35,046 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:13:35,047 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:13:35,126 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:13:35,137 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 02:13:35,137 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:13:35,137 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 02:13:35,137 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 02:13:35,137 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000187880405, 'w': 0.8000000025588876}
2026-01-24 02:13:35,137 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:13:35,137 - INFO - integration_test -   Planner output success: True
2026-01-24 02:13:35,139 - INFO - integration_test - Step 0 completed in 5.401s
2026-01-24 02:13:35,204 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 02:13:35,213 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-24 02:13:35,213 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 02:13:35,213 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 02:13:35,214 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:36,262 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 02:13:36,262 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 02:13:37,208 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:37,236 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:13:37,236 - INFO - integration_test - Warmstart k=0: x0=0.10987737537419652 , y0=0.004530845072553254 , psi0=0.08000000025588874 , v0=1.200000001878804 , spline0=0.1200000001878804 , a0=0.0 , w0=0.0
2026-01-24 02:13:37,236 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:13:37,237 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803153364, 0.01412060839447682, 0.08000000025588874, 1.200000001878804, 0.2400000003757608], ws=[0.22949358031533645, 0.01412060839447682, 0.08000000025588871, 1.200000001878804, 0.05292929293308849], res=[-5.551115123125783e-17, 0.0, 2.7755575615628914e-17, 0.0, 0.18707070744267232], res_norm=1.871e-01
2026-01-24 02:13:37,238 - INFO - integration_test - Dyn residual k=1: pred=[0.34910978525647635, 0.023710371716400384, 0.08000000025588871, 1.200000001878804, 0.17292929312096889], ws=[0.3491097852564764, 0.023710371716400384, 0.08000000025588871, 1.200000001878804, 0.10828282829421497], res=[-5.551115123125783e-17, 0.0, 0.0, 0.0, 0.06464646482675392], res_norm=6.465e-02
2026-01-24 02:13:37,239 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259901976163, 0.03330013503832395, 0.08000000025588871, 1.200000001878804, 0.22828282848209536], ws=[0.4687259901976163, 0.03330013503832395, 0.08000000025588871, 1.200000001878804, 0.16606060608337947], res=[0.0, 0.0, 0.0, 0.0, 0.06222222239871589], res_norm=6.222e-02
2026-01-24 02:13:37,256 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,310 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:38,343 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,420 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:38,445 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,494 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:38,516 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,564 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:38,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,637 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:38,658 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,705 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:38,728 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,776 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:38,799 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,848 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:38,870 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,921 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:38,942 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:38,994 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:39,017 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:39,064 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:39,629 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 02:13:39,631 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:13:39,632 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:13:39,699 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:13:39,700 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:13:39,776 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:13:39,785 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 02:13:39,786 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:13:39,786 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 02:13:39,786 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000026652502, 'w': 0.7999998790150569}
2026-01-24 02:13:39,786 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:13:39,786 - INFO - integration_test -   Planner output success: True
2026-01-24 02:13:39,787 - INFO - integration_test - Step 1 completed in 4.575s
2026-01-24 02:13:39,841 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 02:13:39,842 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-24 02:13:39,843 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 02:13:39,843 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 02:13:39,843 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:40,766 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 02:13:40,766 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 02:13:41,773 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:41,802 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:13:41,802 - INFO - integration_test - Warmstart k=0: x0=0.2388921281897552 , y0=0.020221620996055338 , psi0=0.1599999881573944 , v0=1.400000002145329 , spline0=0.26000000040241333 , a0=0.0 , w0=0.0
2026-01-24 02:13:41,803 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:13:41,804 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394833827965, 0.0425261683194407, 0.1599999881573944, 1.400000002145329, 0.40000000061694624], ws=[0.37710394833827965, 0.0425261683194407, 0.15999998815739458, 1.400000002145329, 0.10909090910337264], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.2909090915135736], res_norm=2.909e-01
2026-01-24 02:13:41,805 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157684868042, 0.06483071564282608, 0.15999998815739458, 1.400000002145329, 0.24909090931790556], ws=[0.5153157684868042, 0.06483071564282608, 0.15999998815739458, 1.400000002145329, 0.1678787879039842], res=[0.0, 0.0, 0.0, 0.0, 0.08121212141392137], res_norm=8.121e-02
2026-01-24 02:13:41,805 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275886353287, 0.08713526296621146, 0.15999998815739458, 1.400000002145329, 0.3078787881185171], ws=[0.6535275886353287, 0.08713526296621146, 0.15999998815739458, 1.400000002145329, 0.4589898990744252], res=[0.0, 0.0, 0.0, 0.0, -0.15111111095590812], res_norm=1.511e-01
2026-01-24 02:13:41,825 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:42,912 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:42,939 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:42,993 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:43,018 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,077 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:43,102 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,153 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:43,179 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,237 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:43,262 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,315 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:43,340 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,396 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:43,420 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,470 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:43,493 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,544 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:43,568 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,617 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:43,640 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:43,690 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:44,294 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 02:13:44,297 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:13:44,297 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:13:44,379 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:13:44,380 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:13:44,472 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:13:44,484 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 02:13:44,484 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:13:44,484 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 02:13:44,484 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999914389455, 'w': 0.7999997989586191}
2026-01-24 02:13:44,484 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:13:44,484 - INFO - integration_test -   Planner output success: True
2026-01-24 02:13:44,486 - INFO - integration_test - Step 2 completed in 4.644s
2026-01-24 02:13:44,543 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 02:13:44,545 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999997 1.6        0.42      ]
2026-01-24 02:13:44,545 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 02:13:44,545 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 02:13:44,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:45,460 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 02:13:45,460 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 02:13:46,518 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:46,552 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:13:46,552 - INFO - integration_test - Warmstart k=0: x0=0.3858364360985771 , y0=0.05014471238871531 , psi0=0.23999996805325632 , v0=1.6000000012892235 , spline0=0.4200000005313357 , a0=0.0 , w0=0.0
2026-01-24 02:13:46,553 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:13:46,554 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505134151409, 0.08817712768272834, 0.23999996805325632, 1.6000000012892235, 0.580000000660258], ws=[0.541250513415141, 0.08817712768272835, 0.2399999680532563, 1.6000000012892235, 0.1690909091109169], res=[-1.1102230246251565e-16, -1.3877787807814457e-17, 2.7755575615628914e-17, 0.0, 0.41090909154934113], res_norm=4.109e-01
2026-01-24 02:13:46,555 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645907317048, 0.1262095429767414, 0.2399999680532563, 1.6000000012892235, 0.32909090923983925], ws=[0.6966645907317048, 0.1262095429767414, 0.2399999680532563, 1.6000000012892235, 0.231919191951078], res=[0.0, 0.0, 0.0, 0.0, 0.09717171728876126], res_norm=9.717e-02
2026-01-24 02:13:46,555 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786680482686, 0.16424195827075444, 0.2399999680532563, 1.6000000012892235, 0.39191919208000037], ws=[0.8520786680482687, 0.16424195827075444, 0.2399999680532563, 1.6000000012892235, 0.2979797980261668], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, 0.09393939405383356], res_norm=9.394e-02
2026-01-24 02:13:46,576 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:47,716 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:47,739 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:47,791 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:47,815 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:47,866 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:47,891 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:47,948 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:47,973 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:48,026 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:48,049 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:48,099 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:48,123 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:48,173 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:48,197 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:48,246 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:48,268 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:48,316 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:48,339 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:48,386 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:48,407 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:48,453 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:49,041 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 02:13:49,044 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:13:49,044 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:13:49,057 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:13:49,058 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:13:49,165 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:13:49,177 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 02:13:49,178 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:13:49,178 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 02:13:49,178 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000182619333, 'w': 0.7999999965617081}
2026-01-24 02:13:49,178 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:13:49,178 - INFO - integration_test -   Planner output success: True
2026-01-24 02:13:49,179 - INFO - integration_test - Step 3 completed in 4.635s
2026-01-24 02:13:49,281 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 02:13:49,282 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999997 1.8        0.6       ]
2026-01-24 02:13:49,283 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 02:13:49,283 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 02:13:49,285 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:50,248 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 02:13:50,248 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 02:13:51,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:51,314 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:13:51,314 - INFO - integration_test - Warmstart k=0: x0=0.5491354627034484 , y0=0.09724074756581629 , psi0=0.3199999677094271 , v0=1.8000000031154169 , spline0=0.6000000008428774 , a0=0.0 , w0=0.0
2026-01-24 02:13:51,314 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:13:51,315 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978400823702, 0.15386272305747406, 0.3199999677094271, 1.8000000031154169, 0.7800000011544191], ws=[0.7199978400823702, 0.15386272305747406, 0.31999996770942696, 1.8000000031154169, 0.23353535358199673], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, 0.5464646475724224], res_norm=5.465e-01
2026-01-24 02:13:51,316 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602174612921, 0.2104846985491318, 0.31999996770942696, 1.8000000031154169, 0.41353535389353846], ws=[0.8908602174612921, 0.2104846985491318, 0.31999996770942696, 1.8000000031154169, 0.3010101010841394], res=[0.0, 0.0, 0.0, 0.0, 0.11252525280939907], res_norm=1.125e-01
2026-01-24 02:13:51,316 - INFO - integration_test - Dyn residual k=2: pred=[1.061722594840214, 0.2671066740407895, 0.31999996770942696, 1.8000000031154169, 0.4810101013956811], ws=[1.061722594840214, 0.2671066740407895, 0.31999996770942696, 1.8000000031154169, 0.3721212122289395], res=[0.0, 0.0, 0.0, 0.0, 0.10888888916674161], res_norm=1.089e-01
2026-01-24 02:13:51,334 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,351 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:52,374 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,426 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:52,449 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,496 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:52,518 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,566 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:52,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,634 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:52,657 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,705 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:52,729 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,781 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:52,803 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,870 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:52,905 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:52,968 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:52,990 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:53,037 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:53,059 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:53,104 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:53,684 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 02:13:53,687 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:13:53,687 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:13:53,698 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:13:53,699 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:13:53,804 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:13:53,815 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 02:13:53,815 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:13:53,815 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 02:13:53,815 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018409688, 'w': 0.7999999993059856}
2026-01-24 02:13:53,815 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:13:53,815 - INFO - integration_test -   Planner output success: True
2026-01-24 02:13:53,817 - INFO - integration_test - Step 4 completed in 4.535s
2026-01-24 02:13:53,871 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 02:13:53,872 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427975 0.39999997 2.         0.8       ]
2026-01-24 02:13:53,872 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 02:13:53,872 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 02:13:53,873 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:54,867 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 02:13:54,867 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 02:13:55,863 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:55,892 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:13:55,892 - INFO - integration_test - Warmstart k=0: x0=0.7268614919229193 , y0=0.16427975307426468 , psi0=0.39999996764002566 , v0=2.0000000049563855 , spline0=0.800000001338516 , a0=0.0 , w0=0.0
2026-01-24 02:13:55,892 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:13:55,893 - INFO - integration_test - Dyn residual k=0: pred=[0.911073693700323, 0.24216341576790346, 0.39999996764002566, 2.0000000049563855, 1.0000000018341546], ws=[0.911073693700323, 0.24216341576790346, 0.39999996764002566, 2.0000000049563855, 0.3636363637475245], res=[0.0, 0.0, 0.0, 0.0, 0.6363636380866301], res_norm=6.364e-01
2026-01-24 02:13:55,894 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858954777267, 0.32004707846154223, 0.39999996764002566, 2.0000000049563855, 0.5636363642431631], ws=[1.0952858954777267, 0.32004707846154223, 0.39999996764002566, 2.0000000049563855, 0.8767676770971427], res=[0.0, 0.0, 0.0, 0.0, -0.31313131285397955], res_norm=3.131e-01
2026-01-24 02:13:55,895 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980972551304, 0.397930741155181, 0.39999996764002566, 2.0000000049563855, 1.0767676775927812], ws=[1.2794980972551304, 0.397930741155181, 0.39999996764002566, 2.0000000049563855, 0.9696969701250654], res=[0.0, 0.0, 0.0, 0.0, 0.10707070746771585], res_norm=1.071e-01
2026-01-24 02:13:55,914 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:56,985 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:57,008 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,057 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:57,080 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,128 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:57,150 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,200 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:57,224 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,274 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:57,295 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,344 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:57,366 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,417 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:57,445 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,504 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:57,532 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,589 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:13:57,616 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,683 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:57,716 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:13:57,773 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:13:58,461 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 02:13:58,465 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:13:58,465 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:13:58,478 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:13:58,479 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:13:58,711 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:13:58,724 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 02:13:58,724 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:13:58,724 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 02:13:58,724 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019207872, 'w': 0.8000000015208482}
2026-01-24 02:13:58,724 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:13:58,724 - INFO - integration_test -   Planner output success: True
2026-01-24 02:13:58,726 - INFO - integration_test - Step 5 completed in 4.854s
2026-01-24 02:13:58,788 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 02:13:58,789 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.25382379 0.47999997 2.20000001 1.02      ]
2026-01-24 02:13:58,790 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 02:13:58,790 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 02:13:58,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:13:59,802 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 02:13:59,802 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 02:14:00,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:00,798 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:00,798 - INFO - integration_test - Warmstart k=0: x0=0.9167519085008841 , y0=0.25382378681982 , psi0=0.47999996779211046 , v0=2.200000006877173 , spline0=1.0200000020262334 , a0=0.0 , w0=0.0
2026-01-24 02:14:00,798 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:00,799 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907953943733, 0.35541519947150807, 0.47999996779211046, 2.200000006877173, 1.2400000027139506], ws=[1.1118907953943733, 0.35541519947150807, 0.4799999677921103, 2.200000006877173, 0.6933333336348835], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, 0.5466666690790671], res_norm=5.467e-01
2026-01-24 02:14:00,800 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296822878626, 0.45700661212319615, 0.4799999677921103, 2.200000006877173, 0.9133333343226008], ws=[1.3070296822878626, 0.45700661212319615, 0.4799999677921103, 2.200000006877173, 1.2397979804508252], res=[0.0, 0.0, 0.0, 0.0, -0.32646464612822446], res_norm=3.265e-01
2026-01-24 02:14:00,801 - INFO - integration_test - Dyn residual k=2: pred=[1.502168569181352, 0.5585980247748842, 0.4799999677921103, 2.200000006877173, 1.4597979811385424], ws=[1.502168569181352, 0.5585980247748842, 0.4799999677921103, 2.200000006877173, 1.0795959602568703], res=[0.0, 0.0, 0.0, 0.0, 0.3802020208816721], res_norm=3.802e-01
2026-01-24 02:14:00,817 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:01,779 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:01,800 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:01,847 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:01,866 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:01,910 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:01,932 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:01,980 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:02,000 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:02,046 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:02,066 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:02,111 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:02,132 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:02,175 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:02,197 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:02,242 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:02,262 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:02,308 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:02,328 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:02,376 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:02,397 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:02,447 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:03,096 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 02:14:03,102 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:03,102 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:14:03,237 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:14:03,238 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:03,432 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:03,444 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 02:14:03,445 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:03,445 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 02:14:03,445 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000170572285, 'w': 0.7999999699235338}
2026-01-24 02:14:03,445 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:03,445 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:03,446 - INFO - integration_test - Step 6 completed in 4.657s
2026-01-24 02:14:03,506 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 02:14:03,508 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819142 0.55999996 2.40000001 1.26      ]
2026-01-24 02:14:03,508 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 02:14:03,508 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 02:14:03,509 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:04,606 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 02:14:04,606 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 02:14:05,561 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:05,588 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:05,588 - INFO - integration_test - Warmstart k=0: x0=1.1162308721926697 , y0=0.3681914193006902 , psi0=0.5599999647844638 , v0=2.4000000085828956 , spline0=1.260000002884523 , a0=0.0 , w0=0.0
2026-01-24 02:14:05,588 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:05,589 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721040525212, 0.4956761000968434, 0.5599999647844638, 2.4000000085828956, 1.5000000037428127], ws=[1.3195721040525212, 0.4956761000968434, 0.5599999647844638, 2.4000000085828956, 1.2474747481930648], res=[0.0, 0.0, 0.0, 0.0, 0.2525252555497479], res_norm=2.525e-01
2026-01-24 02:14:05,590 - INFO - integration_test - Dyn residual k=1: pred=[1.522913335912373, 0.6231607808929965, 0.5599999647844638, 2.4000000085828956, 1.4874747490513545], ws=[1.522913335912373, 0.6231607808929965, 0.5599999647844638, 2.4000000085828956, 1.361616162545677], res=[0.0, 0.0, 0.0, 0.0, 0.12585858650567738], res_norm=1.259e-01
2026-01-24 02:14:05,591 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545677722247, 0.7506454616891497, 0.5599999647844638, 2.4000000085828956, 1.6016161634039667], ws=[1.7262545677722247, 0.7506454616891497, 0.5599999647844638, 2.4000000085828956, 1.1985858595233299], res=[0.0, 0.0, 0.0, 0.0, 0.4030303038806369], res_norm=4.030e-01
2026-01-24 02:14:05,608 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:06,654 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:06,679 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:06,732 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:06,757 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:06,811 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:06,835 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:06,890 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:06,913 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:06,963 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:06,987 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:07,036 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:07,059 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:07,107 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:07,129 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:07,178 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:07,201 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:07,250 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:07,273 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:07,320 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:07,341 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:07,390 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:08,078 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 02:14:08,082 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:08,083 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:14:08,197 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:14:08,198 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:08,327 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:08,339 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 02:14:08,339 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:08,339 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 02:14:08,339 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199086756, 'w': 0.8000000061308923}
2026-01-24 02:14:08,339 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:08,339 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:08,341 - INFO - integration_test - Step 7 completed in 4.834s
2026-01-24 02:14:08,399 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 02:14:08,400 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.3224345  0.50942441 0.63999997 2.60000001 1.52      ]
2026-01-24 02:14:08,401 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 02:14:08,401 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 02:14:08,401 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:09,318 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 02:14:09,318 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 02:14:10,327 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:10,355 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:10,355 - INFO - integration_test - Warmstart k=0: x0=1.322434501011594 , y0=0.5094244085860911 , psi0=0.639999965397553 , v0=2.6000000105737633 , spline0=1.5200000039418995 , a0=0.0 , w0=0.0
2026-01-24 02:14:10,355 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:10,356 - INFO - integration_test - Dyn residual k=0: pred=[1.5309794042823772, 0.6646952167556095, 0.639999965397553, 2.6000000105737633, 1.780000004999276], ws=[1.5309794042823772, 0.6646952167556095, 0.639999965397553, 2.6000000105737633, 1.3696969707069244], res=[0.0, 0.0, 0.0, 0.0, 0.4103030342923515], res_norm=4.103e-01
2026-01-24 02:14:10,357 - INFO - integration_test - Dyn residual k=1: pred=[1.7395243075531603, 0.8199660249251279, 0.639999965397553, 2.6000000105737633, 1.6296969717643008], ws=[1.7395243075531603, 0.8199660249251279, 0.639999965397553, 2.6000000105737633, 1.7066666681349458], res=[0.0, 0.0, 0.0, 0.0, -0.07696969637064499], res_norm=7.697e-02
2026-01-24 02:14:10,358 - INFO - integration_test - Dyn residual k=2: pred=[1.9480692108239435, 0.9752368330946464, 0.639999965397553, 2.6000000105737633, 1.9666666691923222], ws=[1.9480692108239435, 0.9752368330946464, 0.639999965397553, 2.6000000105737633, 2.064646466658513], res=[0.0, 0.0, 0.0, 0.0, -0.09797979746619068], res_norm=9.798e-02
2026-01-24 02:14:10,376 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:11,437 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:11,460 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:11,515 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:11,541 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:11,597 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:11,621 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:11,672 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:11,695 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:11,747 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:11,783 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:11,857 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:11,882 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:11,935 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:11,958 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:12,013 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:12,037 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:12,091 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:12,117 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:12,169 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:12,194 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:12,245 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:12,976 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 02:14:12,983 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:12,983 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1878 scenarios available
2026-01-24 02:14:13,109 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1878 trajectory groups with 18780 total points
2026-01-24 02:14:13,109 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:13,266 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:13,279 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 02:14:13,279 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:13,279 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 02:14:13,279 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019997709, 'w': 0.8000000099540497}
2026-01-24 02:14:13,279 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:13,279 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:13,281 - INFO - integration_test - Step 8 completed in 4.881s
2026-01-24 02:14:13,344 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 02:14:13,345 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223935 0.6792569  0.71999997 2.80000001 1.80000001]
2026-01-24 02:14:13,346 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 02:14:13,346 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 02:14:13,347 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:14,261 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 02:14:14,261 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 02:14:15,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:15,319 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:15,319 - INFO - integration_test - Warmstart k=0: x0=1.5322393472768383 , y0=0.6792569003005284 , psi0=0.7199999663929579 , v0=2.800000012573534 , spline0=1.8000000051992529 , a0=0.0 , w0=0.0
2026-01-24 02:14:15,319 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:15,321 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449585863655, 0.8638846022071496, 0.7199999663929579, 2.800000012573534, 2.0800000064566064], ws=[1.7427449585863655, 0.8638846022071497, 0.7199999663929582, 2.800000012573534, 1.716363637928874], res=[0.0, -1.1102230246251565e-16, -2.220446049250313e-16, 0.0, 0.3636363685277324], res_norm=3.636e-01
2026-01-24 02:14:15,322 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505698958926, 1.048512304113771, 0.7199999663929582, 2.800000012573534, 1.9963636391862274], ws=[1.9532505698958926, 1.048512304113771, 0.7199999663929582, 2.800000012573534, 2.0816161637978876], res=[0.0, 0.0, 0.0, 0.0, -0.08525252461166022], res_norm=8.525e-02
2026-01-24 02:14:15,323 - INFO - integration_test - Dyn residual k=2: pred=[2.16375618120542, 1.2331400060203923, 0.7199999663929582, 2.800000012573534, 2.361616165055241], ws=[2.16375618120542, 1.2331400060203923, 0.7199999663929582, 2.800000012573534, 1.9292929315584124], res=[0.0, 0.0, 0.0, 0.0, 0.4323232334968288], res_norm=4.323e-01
2026-01-24 02:14:15,341 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:16,526 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:16,548 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:16,599 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:16,625 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:16,674 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:16,697 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:16,745 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:16,767 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:16,820 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:16,843 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:16,894 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:16,916 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:16,965 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:16,990 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:17,040 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:17,063 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:17,112 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:17,135 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:17,181 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:17,204 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:17,252 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:17,931 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 02:14:17,937 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:17,937 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:14:17,952 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:14:17,953 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:18,133 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:18,147 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 02:14:18,147 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:18,148 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 02:14:18,148 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199981205, 'w': 0.8000000099522356}
2026-01-24 02:14:18,148 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:18,148 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:18,149 - INFO - integration_test - Step 9 completed in 4.804s
2026-01-24 02:14:18,215 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 02:14:18,216 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229392 0.87908746 0.79999997 3.00000001 2.10000001]
2026-01-24 02:14:18,217 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 02:14:18,217 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 02:14:18,217 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:19,191 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 02:14:19,191 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 02:14:20,340 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:20,367 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:20,367 - INFO - integration_test - Warmstart k=0: x0=1.7422939197770915 , y0=0.8790874629064558 , psi0=0.7999999673881815 , v0=3.000000014573346 , spline0=2.1000000066565874 , a0=0.0 , w0=0.0
2026-01-24 02:14:20,368 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:20,369 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059406148618, 1.0942942844054784, 0.7999999673881815, 3.000000014573346, 2.400000008113922], ws=[1.951305939599527, 1.0942942833600506, 0.7999999673881817, 3.0, 2.092929294811964], res=[1.0153349272457035e-09, 1.0454277443727733e-09, -2.220446049250313e-16, 1.4573346085455796e-08, 0.3070707133019579], res_norm=3.071e-01
2026-01-24 02:14:20,370 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179594219624, 1.3095011038136455, 0.7999999673881817, 3.0, 2.392929294811964], ws=[2.1603179594219624, 1.3095011038136455, 0.7999999673881817, 3.0, 2.488888891040513], res=[0.0, 0.0, 0.0, 0.0, -0.09595959622854933], res_norm=9.596e-02
2026-01-24 02:14:20,370 - INFO - integration_test - Dyn residual k=2: pred=[2.369329979244398, 1.5247079242672403, 0.7999999673881817, 3.0, 2.7888888910405134], ws=[2.369329979244398, 1.5247079242672403, 0.7999999673881817, 3.0, 2.343434345384253], res=[0.0, 0.0, 0.0, 0.0, 0.4454545456562604], res_norm=4.455e-01
2026-01-24 02:14:20,388 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,410 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:21,433 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,478 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:21,499 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,546 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:21,567 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,615 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:21,638 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,684 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:21,706 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,752 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:21,772 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,821 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:21,844 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,889 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:21,911 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:21,958 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:21,980 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:22,030 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:22,051 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:22,097 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:22,717 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 02:14:22,724 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:22,724 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:14:22,737 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:14:22,738 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:22,898 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:22,914 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 02:14:22,915 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:22,915 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 02:14:22,915 - INFO - integration_test -   Control dict from planner: {'a': 1.5426499086083657e-07, 'w': 0.8000000098510223}
2026-01-24 02:14:22,915 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:22,915 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:22,916 - INFO - integration_test - Step 10 completed in 4.701s
2026-01-24 02:14:22,986 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 02:14:22,987 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247939 1.10242083 0.87999997 3.00000003 2.40000001]
2026-01-24 02:14:22,988 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 02:14:22,988 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 02:14:22,989 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:24,056 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 02:14:24,056 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 02:14:25,080 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:25,106 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:25,106 - INFO - integration_test - Warmstart k=0: x0=1.9424793862741245 , y0=1.1024208306252512 , psi0=0.8799999683732838 , v0=3.0000000299998453 , spline0=2.400000009656572 , a0=0.0 , w0=0.0
2026-01-24 02:14:25,106 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:25,108 - INFO - integration_test - Dyn residual k=0: pred=[2.133624738757924, 1.333642490561847, 0.8799999683732838, 3.0000000299998453, 2.7000000126565564], ws=[2.1336247368464805, 1.3336424882496423, 0.8799999683732835, 3.0, 2.488888892010205], res=[1.9114434479661213e-09, 2.3122046499679527e-09, 2.220446049250313e-16, 2.999984527463084e-08, 0.2111111206463514], res_norm=2.111e-01
2026-01-24 02:14:25,109 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700874188366, 1.5648641458740333, 0.8799999683732835, 3.0, 2.7888888920102053], ws=[2.3247700874188366, 1.5648641458740333, 0.8799999683732835, 3.0, 2.343434346263036], res=[0.0, 0.0, 0.0, 0.0, 0.4454545457471695], res_norm=4.455e-01
2026-01-24 02:14:25,110 - INFO - integration_test - Dyn residual k=2: pred=[2.5159154379911928, 1.7960858034984244, 0.8799999683732835, 3.0, 2.643434346263036], ws=[2.5159154379911928, 1.7960858034984244, 0.8799999683732835, 3.0, 2.9343434377573736], res=[0.0, 0.0, 0.0, 0.0, -0.2909090914943375], res_norm=2.909e-01
2026-01-24 02:14:25,128 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,152 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:26,174 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,225 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:26,246 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,294 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:26,317 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,366 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:26,389 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,440 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:26,462 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,509 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:26,542 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,614 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:26,637 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,686 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:26,709 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,757 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:26,778 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,829 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:26,850 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:26,898 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:27,706 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 02:14:27,714 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:27,714 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1879 scenarios available
2026-01-24 02:14:27,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1879 trajectory groups with 18790 total points
2026-01-24 02:14:27,730 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:28,098 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:28,115 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 02:14:28,115 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:28,115 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 02:14:28,115 - INFO - integration_test -   Control dict from planner: {'a': -2.7003538868677855e-08, 'w': 0.09624840830070991}
2026-01-24 02:14:28,115 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:28,115 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:28,117 - INFO - integration_test - Step 11 completed in 5.130s
2026-01-24 02:14:28,183 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 02:14:28,184 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13250906 1.33455879 0.88962481 3.00000003 2.70000001]
2026-01-24 02:14:28,185 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.539m, drift=0.242m)
2026-01-24 02:14:28,185 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 02:14:28,185 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:29,130 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.335), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 02:14:29,130 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 02:14:30,040 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:30,065 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:30,066 - INFO - integration_test - Warmstart k=0: x0=2.1325090602336516 , y0=1.3345587852013543 , psi0=0.8896248092033547 , v0=3.0000000272994916 , spline0=2.7000000123865213 , a0=0.0 , w0=0.0
2026-01-24 02:14:30,066 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:30,067 - INFO - integration_test - Dyn residual k=0: pred=[2.3214201216829955, 1.5676094502938438, 0.8896248092033547, 3.0000000272994916, 3.0000000151164707], ws=[2.321420119963937, 1.5676094481731222, 0.8896248092033545, 3.0, 2.3434343470627184], res=[1.719058673188556e-09, 2.120721598330988e-09, 2.220446049250313e-16, 2.72994915562208e-08, 0.6565656680537524], res_norm=6.566e-01
2026-01-24 02:14:30,067 - INFO - integration_test - Dyn residual k=1: pred=[2.510331179694222, 1.80066011114489, 0.8896248092033545, 3.0, 2.643434347062718], ws=[2.510331179694222, 1.80066011114489, 0.8896248092033545, 3.0, 2.9343434387225074], res=[0.0, 0.0, 0.0, 0.0, -0.2909090916597892], res_norm=2.909e-01
2026-01-24 02:14:30,068 - INFO - integration_test - Dyn residual k=2: pred=[2.6992422394245073, 2.033710774116658, 0.8896248092033545, 3.0, 3.234343438722507], ws=[2.6992422394245073, 2.033710774116658, 0.8896248092033545, 3.0, 3.301010105764523], res=[0.0, 0.0, 0.0, 0.0, -0.06666666704201596], res_norm=6.667e-02
2026-01-24 02:14:30,089 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,087 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:31,112 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,159 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:31,182 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,232 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:31,255 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,304 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:31,330 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,381 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:31,405 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,454 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:31,477 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,528 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:31,552 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,602 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:31,638 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,715 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:31,742 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,793 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:31,818 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:31,871 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:32,639 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 02:14:32,646 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:32,646 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:14:32,660 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:14:32,661 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:33,044 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:33,060 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 02:14:33,060 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:33,060 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 02:14:33,060 - INFO - integration_test -   Control dict from planner: {'a': 2.700339950332097e-08, 'w': -0.2802676434226362}
2026-01-24 02:14:33,060 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:33,060 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:33,062 - INFO - integration_test - Step 12 completed in 4.878s
2026-01-24 02:14:33,128 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 02:14:33,130 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32466101 1.56493183 0.86159804 3.00000003 3.00000002]
2026-01-24 02:14:33,130 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.514m, drift=0.132m)
2026-01-24 02:14:33,130 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 02:14:33,131 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:34,201 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.565), path_start=(0.000, 0.000), dist=2.802m
2026-01-24 02:14:34,201 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 02:14:35,195 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:35,227 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:35,227 - INFO - integration_test - Warmstart k=0: x0=2.324661005456354 , y0=1.5649318318288066 , psi0=0.8615980448610912 , v0=3.0000000299998315 , spline0=3.0000000153865045 , a0=0.0 , w0=0.0
2026-01-24 02:14:35,228 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:35,229 - INFO - integration_test - Dyn residual k=0: pred=[2.52002867816591, 1.7925970998431475, 0.8615980448610912, 3.0000000299998315, 3.3000000183864877], ws=[2.5200286762122444, 1.7925970975665078, 0.8615980448610916, 3.0, 2.934343439783108], res=[1.953665673681826e-09, 2.2766397655971105e-09, -4.440892098500626e-16, 2.999983150786534e-08, 0.36565657860337986], res_norm=3.657e-01
2026-01-24 02:14:35,230 - INFO - integration_test - Dyn residual k=1: pred=[2.7153963469681344, 2.0202623633042087, 0.8615980448610916, 3.0, 3.2343434397831077], ws=[2.7153963469681344, 2.0202623633042087, 0.8615980448610916, 3.0, 3.3010101069160322], res=[0.0, 0.0, 0.0, 0.0, -0.06666666713292457], res_norm=6.667e-02
2026-01-24 02:14:35,231 - INFO - integration_test - Dyn residual k=2: pred=[2.9107640177240244, 2.24792762904191, 0.8615980448610916, 3.0, 3.601010106916032], ws=[2.9107640177240244, 2.24792762904191, 0.8615980448610916, 3.0, 3.6858585922307743], res=[0.0, 0.0, 0.0, 0.0, -0.0848484853147422], res_norm=8.485e-02
2026-01-24 02:14:35,251 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,295 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:36,318 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,367 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:36,389 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,438 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:36,461 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,509 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:36,531 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,577 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:36,598 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,647 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:36,668 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,712 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:36,733 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,776 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:36,796 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,843 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:36,864 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,908 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:36,930 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:36,975 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:37,701 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 02:14:37,712 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:37,712 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:14:37,726 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:14:37,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:37,985 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:37,999 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 02:14:37,999 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:37,999 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 02:14:38,000 - INFO - integration_test -   Control dict from planner: {'a': -1.665241663053893e-10, 'w': -0.11375785222359343}
2026-01-24 02:14:38,000 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:38,000 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:38,001 - INFO - integration_test - Step 13 completed in 4.872s
2026-01-24 02:14:38,067 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 02:14:38,068 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52131939 1.79148097 0.85022226 3.00000003 3.30000002]
2026-01-24 02:14:38,069 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.509m, drift=0.432m)
2026-01-24 02:14:38,069 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 02:14:38,069 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:39,105 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.521, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 02:14:39,105 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 02:14:40,288 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:40,318 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:40,318 - INFO - integration_test - Warmstart k=0: x0=2.5213193861190524 , y0=1.791480971213971 , psi0=0.8502222596387318 , v0=3.000000029983179 , spline0=3.3000000183848224 , a0=0.0 , w0=0.0
2026-01-24 02:14:40,318 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:40,319 - INFO - integration_test - Dyn residual k=0: pred=[2.719264233179458, 2.0169090957264717, 0.8502222596387318, 3.000000029983179, 3.6000000213831402], ws=[2.719264231201119, 2.0169090934734544, 0.8502222596387319, 3.0, 3.3010101080669014], res=[1.9783388260918855e-09, 2.253017328257556e-09, -1.1102230246251565e-16, 2.998317905067438e-08, 0.2989899133162388], res_norm=2.990e-01
2026-01-24 02:14:40,320 - INFO - integration_test - Dyn residual k=1: pred=[2.9172090762831857, 2.2423372157329378, 0.8502222596387319, 3.0, 3.6010101080669017], ws=[2.9172090762831857, 2.2423372157329378, 0.8502222596387319, 3.0, 3.6858585934725023], res=[0.0, 0.0, 0.0, 0.0, -0.08484848540560064], res_norm=8.485e-02
2026-01-24 02:14:40,321 - INFO - integration_test - Dyn residual k=2: pred=[3.1151539213652524, 2.467765337992421, 0.8502222596387319, 3.0, 3.9858585934725026], ws=[3.1151539213652524, 2.467765337992421, 0.8502222596387319, 3.0, 3.8101010177149264], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757622], res_norm=1.758e-01
2026-01-24 02:14:40,338 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,388 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:41,411 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,460 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:41,489 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,568 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:41,592 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,641 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:41,662 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,709 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:41,731 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,776 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:41,797 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,847 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:41,871 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,920 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:41,942 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:41,987 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:42,010 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:42,062 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:42,084 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:42,133 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:42,758 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 02:14:42,766 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:42,766 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:14:42,779 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:14:42,779 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:42,989 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:43,003 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 02:14:43,003 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:43,003 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 02:14:43,003 - INFO - integration_test -   Control dict from planner: {'a': -4.302375169232516e-09, 'w': -0.15726635541099634}
2026-01-24 02:14:43,003 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:43,003 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:43,005 - INFO - integration_test - Step 14 completed in 4.937s
2026-01-24 02:14:43,068 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 02:14:43,069 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72102865 2.01534333 0.83449562 3.00000003 3.60000002]
2026-01-24 02:14:43,070 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.450m, drift=0.322m)
2026-01-24 02:14:43,070 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 02:14:43,070 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:44,117 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.721, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 02:14:44,117 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 02:14:45,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:45,313 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:45,314 - INFO - integration_test - Warmstart k=0: x0=2.7210286501937144 , y0=2.015343332264078 , psi0=0.8344956240976321 , v0=3.0000000295529414 , spline0=3.6000000213401164 , a0=0.0 , w0=0.0
2026-01-24 02:14:45,314 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:45,315 - INFO - integration_test - Dyn residual k=0: pred=[2.9224940989890094, 2.237630701934257, 0.8344956240976321, 3.0000000295529414, 3.9000000242954105], ws=[2.9224940970043773, 2.237630699744509, 0.8344956240976322, 3.0, 3.6858585946964113], res=[1.9846320142846707e-09, 2.1897483826194275e-09, -1.1102230246251565e-16, 2.955294142736875e-08, 0.21414142959899918], res_norm=2.141e-01
2026-01-24 02:14:45,316 - INFO - integration_test - Dyn residual k=1: pred=[3.12395954381504, 2.4599180672249394, 0.8344956240976322, 3.0, 3.9858585946964116], ws=[3.1239595438150403, 2.4599180672249394, 0.8344956240976322, 3.0, 3.810101018938836], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:14:45,316 - INFO - integration_test - Dyn residual k=2: pred=[3.3254249906257027, 2.68220543470537, 0.8344956240976322, 3.0, 4.110101018938836], ws=[3.325424990625703, 2.68220543470537, 0.8344956240976322, 3.0, 3.9343434431812607], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, 0.1757575757575749], res_norm=1.758e-01
2026-01-24 02:14:45,333 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,352 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:46,374 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,423 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:46,447 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,495 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:46,518 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,566 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:46,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,636 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:46,660 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,709 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:46,732 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,780 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:46,802 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,853 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:46,877 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,926 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:46,949 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:46,997 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:47,019 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:47,070 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:47,726 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 02:14:47,735 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:47,735 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:14:47,751 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:14:47,752 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:48,033 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:48,054 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 02:14:48,054 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:48,054 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 02:14:48,054 - INFO - integration_test -   Control dict from planner: {'a': 4.45115872783641e-09, 'w': -0.1378818315599507}
2026-01-24 02:14:48,054 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:48,054 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:48,055 - INFO - integration_test - Step 15 completed in 4.986s
2026-01-24 02:14:48,123 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 02:14:48,125 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92402016 2.23623476 0.82070744 3.00000003 3.90000002]
2026-01-24 02:14:48,125 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.417m, drift=0.213m)
2026-01-24 02:14:48,125 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 02:14:48,126 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:49,157 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.924, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 02:14:49,157 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 02:14:50,101 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:50,131 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:50,131 - INFO - integration_test - Warmstart k=0: x0=2.924020160705089 , y0=2.236234759447539 , psi0=0.8207074409416371 , v0=3.0000000299980574 , spline0=3.9000000243399224 , a0=0.0 , w0=0.0
2026-01-24 02:14:50,131 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:50,132 - INFO - integration_test - Dyn residual k=0: pred=[3.1285313009860585, 2.4557232450244846, 0.8207074409416371, 3.0000000299980574, 4.200000027339728], ws=[3.1285312989410796, 2.455723242829742, 0.8207074409416371, 3.0, 3.81010102018118], res=[2.044978852921986e-09, 2.1947426098734013e-09, 0.0, 2.999805737147199e-08, 0.3898990071585482], res_norm=3.899e-01
2026-01-24 02:14:50,133 - INFO - integration_test - Dyn residual k=1: pred=[3.3330424371770704, 2.675211726211945, 0.8207074409416371, 3.0, 4.11010102018118], ws=[3.3330424371770704, 2.675211726211945, 0.8207074409416371, 3.0, 3.9343434444236043], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757534], res_norm=1.758e-01
2026-01-24 02:14:50,133 - INFO - integration_test - Dyn residual k=2: pred=[3.537553575413061, 2.8947002095941476, 0.8207074409416371, 3.0, 4.2343434444236046], ws=[3.537553575413061, 2.8947002095941476, 0.8207074409416371, 3.0, 4.058585868666029], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:14:50,149 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,289 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:51,311 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,358 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:51,379 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,425 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:51,447 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,495 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:51,517 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,563 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:51,583 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,629 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:51,650 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,697 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:51,718 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,762 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:51,782 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,827 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:51,849 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,893 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:51,914 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:51,959 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:53,013 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 02:14:53,023 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:53,024 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:14:53,041 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:14:53,042 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:53,436 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:53,455 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 02:14:53,456 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:53,456 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 02:14:53,456 - INFO - integration_test -   Control dict from planner: {'a': -9.063223894595784e-07, 'w': -0.1159900274226804}
2026-01-24 02:14:53,456 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:53,456 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:53,458 - INFO - integration_test - Step 16 completed in 5.333s
2026-01-24 02:14:53,521 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 02:14:53,524 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.12979962 2.45453227 0.80910844 2.99999994 4.20000002]
2026-01-24 02:14:53,525 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.414m, drift=0.103m)
2026-01-24 02:14:53,525 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 02:14:53,526 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:54,519 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.130, 2.455), path_start=(0.000, 0.000), dist=3.977m
2026-01-24 02:14:54,519 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 02:14:55,483 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:55,511 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:14:55,511 - INFO - integration_test - Warmstart k=0: x0=3.1297996216907014 , y0=2.454532270877626 , psi0=0.8091084381993691 , v0=2.9999999393658183 , spline0=4.200000018276504 , a0=0.0 , w0=0.0
2026-01-24 02:14:55,511 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:14:55,512 - INFO - integration_test - Dyn residual k=0: pred=[3.3368427891886117, 2.671633913327381, 0.8091084381993691, 2.9999999393658183, 4.500000012213086], ws=[3.3368427891886117, 2.671633913327381, 0.809108438199369, 2.9999999393658183, 3.934343439401379], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.5656565728117067], res_norm=5.657e-01
2026-01-24 02:14:55,513 - INFO - integration_test - Dyn residual k=1: pred=[3.543885956686522, 2.8887355557771364, 0.809108438199369, 2.9999999393658183, 4.234343433337961], ws=[3.543885956686522, 2.8887355557771364, 0.809108438199369, 2.9999999393658183, 4.0585858611326895], res=[0.0, 0.0, 0.0, 0.0, 0.17575757220527155], res_norm=1.758e-01
2026-01-24 02:14:55,514 - INFO - integration_test - Dyn residual k=2: pred=[3.7509291241844323, 3.1058371982268915, 0.809108438199369, 2.9999999393658183, 4.358585855069271], ws=[3.7509291241844323, 3.1058371982268915, 0.809108438199369, 2.9999999393658183, 4.645454545540794], res=[0.0, 0.0, 0.0, 0.0, -0.28686869047152275], res_norm=2.869e-01
2026-01-24 02:14:55,531 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:56,605 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:56,628 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:56,677 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:56,701 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:56,749 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:56,771 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:56,821 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:56,844 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:56,896 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:56,920 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:56,971 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:56,994 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:57,046 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:57,069 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:57,122 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:57,146 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:57,194 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:14:57,217 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:57,267 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:57,291 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:14:57,338 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:14:58,055 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 02:14:58,065 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:14:58,065 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:14:58,257 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:14:58,258 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:14:58,529 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:14:58,546 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 02:14:58,547 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:14:58,547 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 02:14:58,547 - INFO - integration_test -   Control dict from planner: {'a': 9.063388904810644e-07, 'w': -0.12293642407072576}
2026-01-24 02:14:58,547 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:14:58,547 - INFO - integration_test -   Planner output success: True
2026-01-24 02:14:58,548 - INFO - integration_test - Step 17 completed in 5.024s
2026-01-24 02:14:58,599 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 02:14:58,601 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.33817205 2.67035581 0.7968148  3.00000003 4.50000002]
2026-01-24 02:14:58,602 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.407m, drift=0.403m)
2026-01-24 02:14:58,602 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 02:14:58,603 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:14:59,525 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.338, 2.670), path_start=(0.000, 0.000), dist=4.275m
2026-01-24 02:14:59,525 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 02:15:00,568 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:00,595 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:00,596 - INFO - integration_test - Warmstart k=0: x0=3.3381720453579913 , y0=2.6703558067600857 , psi0=0.7968147957922965 , v0=3.000000029999707 , spline0=4.500000021276475 , a0=0.0 , w0=0.0
2026-01-24 02:15:00,596 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:00,597 - INFO - integration_test - Dyn residual k=0: pred=[3.5478684765242505, 2.884895799666109, 0.7968147957922965, 3.000000029999707, 4.800000024276446], ws=[3.547868474427307, 2.88489579752073, 0.7968147957922964, 3.0, 4.058585867397328], res=[2.096943507723381e-09, 2.145378985574098e-09, 1.1102230246251565e-16, 2.999970716288658e-08, 0.7414141568791175], res_norm=7.414e-01
2026-01-24 02:15:00,598 - INFO - integration_test - Dyn residual k=1: pred=[3.7575649034966228, 3.0994357882813746, 0.7968147957922964, 3.0, 4.358585867397328], ws=[3.7575649034966228, 3.0994357882813746, 0.7968147957922964, 3.0, 4.645454566731019], res=[0.0, 0.0, 0.0, 0.0, -0.2868686993336915], res_norm=2.869e-01
2026-01-24 02:15:00,599 - INFO - integration_test - Dyn residual k=2: pred=[3.9672613325659385, 3.313975779042019, 0.7968147957922964, 3.0, 4.945454566731019], ws=[3.9672613325659385, 3.313975779042019, 0.7968147957922964, 3.0, 5.0464646677411205], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:15:00,618 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:01,665 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:01,688 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:01,739 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:01,761 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:01,811 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:01,834 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:01,883 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:01,906 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:01,962 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:01,997 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:02,065 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:02,091 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:02,144 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:02,167 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:02,214 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:02,237 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:02,288 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:02,312 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:02,361 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:02,384 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:02,431 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:03,538 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 02:15:03,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:15:03,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1845 scenarios available
2026-01-24 02:15:03,761 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1845 trajectory groups with 18450 total points
2026-01-24 02:15:03,763 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:15:04,153 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:15:04,177 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 02:15:04,177 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:15:04,177 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 02:15:04,177 - INFO - integration_test -   Control dict from planner: {'a': -6.974380808602021e-07, 'w': -0.10167462767831895}
2026-01-24 02:15:04,177 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:15:04,177 - INFO - integration_test -   Planner output success: True
2026-01-24 02:15:04,179 - INFO - integration_test - Step 18 completed in 5.578s
2026-01-24 02:15:04,250 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 02:15:04,253 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54895552 2.88382607 0.78664733 2.99999996 4.80000002]
2026-01-24 02:15:04,254 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.356m, drift=0.293m)
2026-01-24 02:15:04,254 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-24 02:15:04,255 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:05,218 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.549, 2.884), path_start=(0.000, 0.000), dist=4.573m
2026-01-24 02:15:05,218 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 02:15:06,124 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:06,150 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:06,150 - INFO - integration_test - Warmstart k=0: x0=3.548955515413499 , y0=2.883826069636735 , psi0=0.7866473330244647 , v0=2.999999960255899 , spline0=4.8000000173020645 , a0=0.0 , w0=0.0
2026-01-24 02:15:06,150 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:06,151 - INFO - integration_test - Dyn residual k=0: pred=[3.760822392629307, 3.0962229244961597, 0.7866473330244647, 2.999999960255899, 5.100000013327654], ws=[3.760822392629307, 3.0962229244961597, 0.7866473330244648, 2.999999960255899, 4.645454558782199], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:15:06,152 - INFO - integration_test - Dyn residual k=1: pred=[3.972689269845115, 3.3086197793555843, 0.7866473330244648, 2.999999960255899, 4.945454554807789], ws=[3.972689269845115, 3.3086197793555843, 0.7866473330244648, 2.999999960255899, 5.04646465581789], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:15:06,153 - INFO - integration_test - Dyn residual k=2: pred=[4.184556147060923, 3.521016634215009, 0.7866473330244648, 2.999999960255899, 5.34646465184348], ws=[4.184556147060923, 3.521016634215009, 0.7866473330244648, 2.999999960255899, 5.144444449823278], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:15:06,171 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,230 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:07,252 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,303 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:07,328 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,377 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:07,400 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,448 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:07,472 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,522 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:07,546 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,594 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:07,616 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,668 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:07,693 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,748 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:07,774 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,826 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:07,851 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,911 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:07,940 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:07,994 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:08,658 - INFO - integration_test - Step 19: MPC solve successful
2026-01-24 02:15:08,672 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:15:08,672 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:15:08,689 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:15:08,690 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:15:09,100 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:15:09,130 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-24 02:15:09,130 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:15:09,130 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 02:15:09,130 - INFO - integration_test -   Control dict from planner: {'a': 6.106450303729171e-07, 'w': -0.7999999949436462}
2026-01-24 02:15:09,130 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:15:09,130 - INFO - integration_test -   Planner output success: True
2026-01-24 02:15:09,132 - INFO - integration_test - Step 19 completed in 4.879s
2026-01-24 02:15:09,208 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 02:15:09,210 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.76908782 3.08752629 0.70664733 3.00000002 5.10000002]
2026-01-24 02:15:09,211 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.348m, drift=0.184m)
2026-01-24 02:15:09,211 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-24 02:15:09,211 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:10,407 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.769, 3.088), path_start=(0.000, 0.000), dist=4.872m
2026-01-24 02:15:10,407 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 02:15:11,388 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:11,415 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:11,415 - INFO - integration_test - Warmstart k=0: x0=3.7690878229764535 , y0=3.0875262891092508 , psi0=0.7066473335301 , v0=3.0000000213204023 , spline0=5.100000019434105 , a0=0.0 , w0=0.0
2026-01-24 02:15:11,415 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:11,416 - INFO - integration_test - Dyn residual k=0: pred=[3.9972507218960116, 3.282312563871739, 0.7066473335301, 3.0000000213204023, 5.400000021566145], ws=[3.9972507202745033, 3.282312562487432, 0.7066473335300998, 3.0, 5.046464665898751], res=[1.6215082609960518e-09, 1.3843073354280477e-09, 2.220446049250313e-16, 2.1320402332491994e-08, 0.35353535566739414], res_norm=3.535e-01
2026-01-24 02:15:11,417 - INFO - integration_test - Dyn residual k=1: pred=[4.225413617572554, 3.477098835865613, 0.7066473335300998, 3.0, 5.3464646658987505], ws=[4.225413617572554, 3.477098835865613, 0.7066473335300998, 3.0, 5.144444463878549], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:15:11,417 - INFO - integration_test - Dyn residual k=2: pred=[4.453576514870604, 3.671885109243794, 0.7066473335300998, 3.0, 5.444444463878549], ws=[4.453576514870604, 3.671885109243794, 0.7066473335300998, 3.0, 5.7474747669088515], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:15:11,435 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:12,423 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:12,447 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:12,499 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:12,526 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:12,579 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:12,610 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:12,689 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:12,723 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:12,779 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:12,802 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:12,852 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:12,876 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:12,932 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:12,958 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:13,010 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:13,033 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:13,081 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:13,105 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:13,157 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:13,181 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:13,234 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:13,893 - INFO - integration_test - Step 20: MPC solve successful
2026-01-24 02:15:13,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:15:13,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:15:13,921 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:15:13,922 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:15:14,356 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:15:14,380 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-24 02:15:14,381 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:15:14,381 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 02:15:14,381 - INFO - integration_test -   Control dict from planner: {'a': -0.03587582892809187, 'w': -0.5285524045231035}
2026-01-24 02:15:14,381 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:15:14,381 - INFO - integration_test -   Planner output success: True
2026-01-24 02:15:14,382 - INFO - integration_test - Step 20 completed in 5.173s
2026-01-24 02:15:14,449 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 02:15:14,451 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.00215061 3.2760819  0.65379209 2.99641244 5.39964126]
2026-01-24 02:15:14,451 - DEBUG - integration_test - Step 21: Using propagated spline 5.3996 (close to path, dist=0.389m, drift=0.074m)
2026-01-24 02:15:14,451 - DEBUG - integration_test -   Set spline state to 5.3996
2026-01-24 02:15:14,452 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:15,421 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.002, 3.276), path_start=(0.000, 0.000), dist=5.172m
2026-01-24 02:15:15,421 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 02:15:16,378 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:16,405 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:16,406 - INFO - integration_test - Warmstart k=0: x0=4.002150608116795 , y0=3.27608190176713 , psi0=0.6537920930777896 , v0=2.996412438427593 , spline0=5.399641263276864 , a0=0.0 , w0=0.0
2026-01-24 02:15:16,406 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:16,407 - INFO - integration_test - Dyn residual k=0: pred=[4.24000078063536, 3.458323967285836, 0.6537920930777896, 2.996412438427593, 5.699282507119624], ws=[4.24000078063536, 3.458323967285836, 0.6537920930777896, 2.996412438427593, 5.1437269515640685], res=[0.0, 0.0, 0.0, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-24 02:15:16,408 - INFO - integration_test - Dyn residual k=1: pred=[4.477850953153926, 3.640566032804542, 0.6537920930777896, 2.996412438427593, 5.443368195406828], ws=[4.477850953153926, 3.640566032804542, 0.6537920930777896, 2.996412438427593, 5.746398498437131], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:15:16,408 - INFO - integration_test - Dyn residual k=2: pred=[4.715701125672491, 3.822808098323248, 0.6537920930777896, 2.996412438427593, 6.04603974227989], ws=[4.715701125672491, 3.822808098323248, 0.6537920930777896, 2.996412438427593, 5.641999338239486], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:15:16,426 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:17,652 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:17,675 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:17,725 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:17,749 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:17,798 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:17,821 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:17,869 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:17,898 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:18,001 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:18,028 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:18,079 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:18,102 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:18,154 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:18,180 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:18,231 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:18,255 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:18,307 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:18,330 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:18,378 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:18,400 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:18,448 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:22,292 - WARNING - integration_test - Step 21: MPC solve failed
2026-01-24 02:15:22,292 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:15:22,304 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:15:22,304 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:15:22,321 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:15:22,322 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:15:22,755 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:15:22,780 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-24 02:15:22,780 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:15:22,780 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 02:15:22,780 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:15:22,780 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:15:22,780 - INFO - integration_test -   Planner output success: False
2026-01-24 02:15:22,780 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:15:22,782 - INFO - integration_test - Step 21 completed in 8.331s
2026-01-24 02:15:22,853 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-24 02:15:22,856 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.22486038 3.46114322 0.73379209 2.79641244 5.67928251]
2026-01-24 02:15:22,857 - DEBUG - integration_test - Step 22: Using propagated spline 5.6793 (close to path, dist=0.385m, drift=0.353m)
2026-01-24 02:15:22,857 - DEBUG - integration_test -   Set spline state to 5.6793
2026-01-24 02:15:22,858 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:23,862 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.225, 3.461), path_start=(0.000, 0.000), dist=5.462m
2026-01-24 02:15:23,862 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-24 02:15:24,882 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:24,909 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:24,910 - INFO - integration_test - Warmstart k=0: x0=4.224860384103688 , y0=3.4611432242675733 , psi0=0.7337920930777896 , v0=2.796412438427593 , spline0=5.679282507119623 , a0=0.0 , w0=0.0
2026-01-24 02:15:24,910 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:24,911 - INFO - integration_test - Dyn residual k=0: pred=[4.432533218642478, 3.648416337801124, 0.7337920930777896, 2.796412438427593, 5.9589237509623825], ws=[4.432533218642478, 3.648416337801124, 0.7337920930777897, 2.796412438427593, 5.504378296416927], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:15:24,911 - INFO - integration_test - Dyn residual k=1: pred=[4.640206053181267, 3.835689451334675, 0.7337920930777897, 2.796412438427593, 5.784019540259687], ws=[4.640206053181267, 3.835689451334675, 0.7337920930777897, 2.796412438427593, 5.581999338239485], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:15:24,912 - INFO - integration_test - Dyn residual k=2: pred=[4.847878887720057, 4.022962564868226, 0.7337920930777897, 2.796412438427593, 5.861640582082244], ws=[4.847878887720057, 4.022962564868226, 0.7337920930777897, 2.796412438427593, 5.962650683092345], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:15:24,930 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:25,969 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:25,991 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,038 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:26,060 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,108 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:26,131 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,181 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:26,204 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,251 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:26,273 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,320 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:26,343 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,392 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:26,413 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,463 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:26,485 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,532 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:26,555 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,599 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:26,619 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:26,667 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:27,315 - INFO - integration_test - Step 22: MPC solve successful
2026-01-24 02:15:27,326 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:15:27,326 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:15:27,540 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:15:27,541 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:15:27,834 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:15:27,850 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.679)
2026-01-24 02:15:27,851 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:15:27,851 - INFO - integration_test - === Applying control at step 22 ===
2026-01-24 02:15:27,851 - INFO - integration_test -   Control dict from planner: {'a': -2.000000013484956, 'w': 0.8000000033011037}
2026-01-24 02:15:27,851 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:15:27,851 - INFO - integration_test -   Planner output success: True
2026-01-24 02:15:27,852 - INFO - integration_test - Step 22 completed in 4.996s
2026-01-24 02:15:27,916 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-24 02:15:27,917 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.41776725 3.64943712 0.81379209 2.59641244 5.93892375]
2026-01-24 02:15:27,918 - DEBUG - integration_test - Step 23: Using propagated spline 5.9389 (close to path, dist=0.344m, drift=0.203m)
2026-01-24 02:15:27,918 - DEBUG - integration_test -   Set spline state to 5.9389
2026-01-24 02:15:27,919 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:28,907 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.418, 3.649), path_start=(0.000, 0.000), dist=5.730m
2026-01-24 02:15:28,907 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-24 02:15:29,972 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:30,000 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:30,000 - INFO - integration_test - Warmstart k=0: x0=4.417767249936511 , y0=3.6494371243790917 , psi0=0.8137920934078999 , v0=2.5964124370790973 , spline0=5.938923750827533 , a0=0.0 , w0=0.0
2026-01-24 02:15:30,000 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:30,001 - INFO - integration_test - Dyn residual k=0: pred=[4.596075073692347, 3.8381694624180405, 0.8137920934078999, 2.5964124370790973, 6.1985649945354435], ws=[4.596075073692347, 3.8381694624180405, 0.8137920934078999, 2.5964124370790973, 5.84502964100009], res=[0.0, 0.0, 0.0, 0.0, 0.3535353535353538], res_norm=3.535e-01
2026-01-24 02:15:30,002 - INFO - integration_test - Dyn residual k=1: pred=[4.7743828974481834, 4.026901800456989, 0.8137920934078999, 2.5964124370790973, 6.104670884708], ws=[4.7743828974481834, 4.026901800456989, 0.8137920934078999, 2.5964124370790973, 5.700630480667596], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:15:30,003 - INFO - integration_test - Dyn residual k=2: pred=[4.95269072120402, 4.215634138495938, 0.8137920934078999, 2.5964124370790973, 5.960271724375506], ws=[4.95269072120402, 4.215634138495938, 0.8137920934078999, 2.5964124370790973, 6.061281825385607], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:15:30,020 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,112 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:31,137 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,195 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:31,220 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,272 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:31,296 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,345 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:31,369 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,416 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:31,439 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,487 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:31,509 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,557 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:31,580 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,628 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:31,650 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,700 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:31,723 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,771 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:31,801 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:31,876 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:37,315 - WARNING - integration_test - Step 23: MPC solve failed
2026-01-24 02:15:37,315 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:15:37,332 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:15:37,332 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1845 scenarios available
2026-01-24 02:15:37,578 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1845 trajectory groups with 18450 total points
2026-01-24 02:15:37,580 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:15:38,099 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:15:38,123 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=5.939)
2026-01-24 02:15:38,123 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:15:38,124 - INFO - integration_test - === Applying control at step 23 ===
2026-01-24 02:15:38,124 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:15:38,124 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:15:38,124 - INFO - integration_test -   Planner output success: False
2026-01-24 02:15:38,124 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:15:38,126 - INFO - integration_test - Step 23 completed in 10.209s
2026-01-24 02:15:38,201 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-24 02:15:38,205 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.58187061 3.83747336 0.89379209 2.39641244 6.17856499]
2026-01-24 02:15:38,205 - DEBUG - integration_test - Step 24: Using propagated spline 6.1786 (close to path, dist=0.350m, drift=0.033m)
2026-01-24 02:15:38,205 - DEBUG - integration_test -   Set spline state to 6.1786
2026-01-24 02:15:38,206 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:39,249 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.582, 3.837), path_start=(0.000, 0.000), dist=5.977m
2026-01-24 02:15:39,249 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-24 02:15:40,180 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:40,207 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:40,207 - INFO - integration_test - Warmstart k=0: x0=4.581870608057727 , y0=3.837473363732084 , psi0=0.8937920934078999 , v0=2.396412437079097 , spline0=6.178564994535443 , a0=0.0 , w0=0.0
2026-01-24 02:15:40,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:40,209 - INFO - integration_test - Dyn residual k=0: pred=[4.731996448397655, 4.02426243661405, 0.8937920934078999, 2.396412437079097, 6.418206238243353], ws=[4.731996448397655, 4.02426243661405, 0.8937920934078996, 2.396412437079097, 6.1656809857181], res=[0.0, 0.0, 3.3306690738754696e-16, 0.0, 0.2525252525252526], res_norm=2.525e-01
2026-01-24 02:15:40,210 - INFO - integration_test - Dyn residual k=1: pred=[4.882122288737582, 4.211051509496016, 0.8937920934078996, 2.396412437079097, 6.40532222942601], ws=[4.882122288737582, 4.211051509496016, 0.8937920934078996, 2.396412437079097, 6.001281825385606], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:15:40,211 - INFO - integration_test - Dyn residual k=2: pred=[5.03224812907751, 4.397840582377983, 0.8937920934078996, 2.396412437079097, 6.240923069093515], ws=[5.03224812907751, 4.397840582377983, 0.8937920934078996, 2.396412437079097, 6.139912968083414], res=[0.0, 0.0, 0.0, 0.0, 0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:15:40,228 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,247 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:41,271 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,326 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:41,353 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,438 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:41,469 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,523 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:41,548 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,602 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:41,625 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,675 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:41,699 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,751 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:41,775 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,825 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:41,848 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,898 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:41,922 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:41,970 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:41,993 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:42,040 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:46,606 - WARNING - integration_test - Step 24: MPC solve failed
2026-01-24 02:15:46,606 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 02:15:46,619 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:15:46,620 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:15:46,870 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:15:46,871 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:15:47,382 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:15:47,418 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.179)
2026-01-24 02:15:47,418 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:15:47,418 - INFO - integration_test - === Applying control at step 24 ===
2026-01-24 02:15:47,418 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:15:47,418 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:15:47,418 - INFO - integration_test -   Planner output success: False
2026-01-24 02:15:47,418 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:15:47,420 - INFO - integration_test - Step 24 completed in 9.216s
2026-01-24 02:15:47,499 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-24 02:15:47,501 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.71852963 4.02194914 0.97379209 2.19641244 6.39820624]
2026-01-24 02:15:47,501 - DEBUG - integration_test - Step 25: Using propagated spline 6.3982 (close to path, dist=0.261m, drift=0.253m)
2026-01-24 02:15:47,502 - DEBUG - integration_test -   Set spline state to 6.3982
2026-01-24 02:15:47,502 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:48,457 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.719, 4.022), path_start=(0.000, 0.000), dist=6.200m
2026-01-24 02:15:48,457 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-24 02:15:49,366 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:49,391 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:49,391 - INFO - integration_test - Warmstart k=0: x0=4.7185296312403295 , y0=4.021949140121817 , psi0=0.9737920934078999 , v0=2.196412437079097 , spline0=6.398206238243353 , a0=0.0 , w0=0.0
2026-01-24 02:15:49,391 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:49,392 - INFO - integration_test - Dyn residual k=0: pred=[4.842004784845328, 4.2035975983585425, 0.9737920934078999, 2.196412437079097, 6.617847481951263], ws=[4.842004784845328, 4.2035975983585425, 0.9737920934078996, 2.196412437079097, 6.264312128415909], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.3535353535353538], res_norm=3.535e-01
2026-01-24 02:15:49,393 - INFO - integration_test - Dyn residual k=1: pred=[4.965479938450326, 4.3852460565952684, 0.9737920934078996, 2.196412437079097, 6.483953372123819], ws=[4.965479938450326, 4.3852460565952684, 0.9737920934078996, 2.196412437079097, 6.584963473133921], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:15:49,394 - INFO - integration_test - Dyn residual k=2: pred=[5.088955092055324, 4.566894514831994, 0.9737920934078996, 2.196412437079097, 6.804604716841831], ws=[5.088955092055324, 4.566894514831994, 0.9737920934078996, 2.196412437079097, 6.400564312801427], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:15:49,409 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:50,450 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:50,474 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:50,529 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:50,554 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:50,606 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:50,630 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:50,681 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:50,708 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:50,785 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:50,818 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:50,878 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:50,903 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:50,953 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:50,978 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:51,027 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:51,049 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:51,097 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:15:51,121 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:51,171 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:51,194 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:15:51,245 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:15:56,814 - WARNING - integration_test - Step 25: MPC solve failed
2026-01-24 02:15:56,814 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-24 02:15:56,826 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:15:56,826 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:15:56,842 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:15:56,843 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:15:57,240 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:15:57,277 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.398)
2026-01-24 02:15:57,277 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:15:57,277 - INFO - integration_test - === Applying control at step 25 ===
2026-01-24 02:15:57,277 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.30263915676294495}
2026-01-24 02:15:57,277 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:15:57,277 - INFO - integration_test -   Planner output success: False
2026-01-24 02:15:57,277 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.30263915676294495}
2026-01-24 02:15:57,279 - INFO - integration_test - Step 25 completed in 9.778s
2026-01-24 02:15:57,352 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-24 02:15:57,353 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[4.83378391 4.1970564  1.00405601 1.99641244 6.59784748]
2026-01-24 02:15:57,354 - DEBUG - integration_test - Step 26: Using propagated spline 6.5978 (close to path, dist=0.246m, drift=0.043m)
2026-01-24 02:15:57,354 - DEBUG - integration_test -   Set spline state to 6.5978
2026-01-24 02:15:57,355 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:58,564 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(4.834, 4.197), path_start=(0.000, 0.000), dist=6.402m
2026-01-24 02:15:58,564 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-24 02:15:59,586 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:15:59,615 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:15:59,615 - INFO - integration_test - Warmstart k=0: x0=4.833783906861816 , y0=4.197056396475436 , psi0=1.0040560090841943 , v0=1.996412437079097 , spline0=6.597847481951263 , a0=0.0 , w0=0.0
2026-01-24 02:15:59,615 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:15:59,617 - INFO - integration_test - Dyn residual k=0: pred=[4.940968267433359, 4.365484835398649, 1.0040560090841943, 1.996412437079097, 6.797488725659172], ws=[4.940968267433359, 4.365484835398649, 1.0040560090841941, 1.996412437079097, 6.342943271113717], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:15:59,617 - INFO - integration_test - Dyn residual k=1: pred=[5.048152628004901, 4.533913274321862, 1.0040560090841941, 1.996412437079097, 6.542584514821627], ws=[5.048152628004901, 4.533913274321862, 1.0040560090841941, 1.996412437079097, 6.643594615831728], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:15:59,618 - INFO - integration_test - Dyn residual k=2: pred=[5.155336988576444, 4.702341713245075, 1.0040560090841941, 1.996412437079097, 6.843235859539638], ws=[5.155336988576444, 4.702341713245075, 1.0040560090841941, 1.996412437079097, 6.742225758529536], res=[0.0, 0.0, 0.0, 0.0, 0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:15:59,636 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:00,936 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:00,959 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,008 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:01,032 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,080 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:01,105 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,163 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:01,189 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,245 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:01,272 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,355 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:01,389 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,448 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:01,475 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,533 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:01,559 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,614 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:01,639 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,692 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:01,717 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:01,770 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:07,724 - WARNING - integration_test - Step 26: MPC solve failed
2026-01-24 02:16:07,724 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-24 02:16:07,739 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:07,739 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1843 scenarios available
2026-01-24 02:16:07,753 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1843 trajectory groups with 18430 total points
2026-01-24 02:16:07,754 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:08,429 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:16:08,447 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.598)
2026-01-24 02:16:08,447 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:16:08,447 - INFO - integration_test - === Applying control at step 26 ===
2026-01-24 02:16:08,447 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.6936076960890176}
2026-01-24 02:16:08,447 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:16:08,447 - INFO - integration_test -   Planner output success: False
2026-01-24 02:16:08,447 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.6936076960890176}
2026-01-24 02:16:08,449 - INFO - integration_test - Step 26 completed in 11.095s
2026-01-24 02:16:08,519 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-24 02:16:08,528 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[4.93007105 4.36039098 1.07341678 1.79641244 6.77748873]
2026-01-24 02:16:08,530 - DEBUG - integration_test - Step 27: Using propagated spline 6.7775 (close to path, dist=0.135m, drift=0.222m)
2026-01-24 02:16:08,530 - DEBUG - integration_test -   Set spline state to 6.7775
2026-01-24 02:16:08,531 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:16:09,471 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(4.930, 4.360), path_start=(0.000, 0.000), dist=6.582m
2026-01-24 02:16:09,471 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-24 02:16:10,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:16:10,583 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:16:10,583 - INFO - integration_test - Warmstart k=0: x0=4.930071046693868 , y0=4.360390979554235 , psi0=1.0734167786930962 , v0=1.796412437079097 , spline0=6.777488725659173 , a0=0.0 , w0=0.0
2026-01-24 02:16:10,583 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:16:10,584 - INFO - integration_test - Dyn residual k=0: pred=[5.015782237186501, 4.518266146269143, 1.0734167786930962, 1.796412437079097, 6.957129969367083], ws=[5.015782237186501, 4.518266146269143, 1.0734167786930957, 1.796412437079097, 6.401574413811527], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-24 02:16:10,585 - INFO - integration_test - Dyn residual k=1: pred=[5.101493427679134, 4.6761413129840514, 1.0734167786930957, 1.796412437079097, 6.581215657519437], ws=[5.101493427679134, 4.6761413129840514, 1.0734167786930957, 1.796412437079097, 6.480205556509336], res=[0.0, 0.0, 0.0, 0.0, 0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:16:10,586 - INFO - integration_test - Dyn residual k=2: pred=[5.1872046181717675, 4.83401647969896, 1.0734167786930957, 1.796412437079097, 6.659846800217246], ws=[5.014646393501291, 4.936314532253086, 1.0734167786930957, 1.796412437079097, 6.760856901227347], res=[0.17255822467047643, -0.1022980525541266, 0.0, 0.0, -0.10101010101010122], res_norm=2.246e-01
2026-01-24 02:16:10,603 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:11,630 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:11,654 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:11,705 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:11,730 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:11,781 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:11,806 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:11,855 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:11,878 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:11,926 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:11,950 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:11,999 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:12,023 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:12,070 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:12,093 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:12,142 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:12,165 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:12,213 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:12,237 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:12,285 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:12,318 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:12,398 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:18,079 - WARNING - integration_test - Step 27: MPC solve failed
2026-01-24 02:16:18,079 - WARNING - integration_test -   Consecutive MPC failures: 5/20
2026-01-24 02:16:18,091 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:18,091 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:16:18,107 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:16:18,108 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:18,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:16:18,550 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=6.777)
2026-01-24 02:16:18,551 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:16:18,551 - INFO - integration_test - === Applying control at step 27 ===
2026-01-24 02:16:18,551 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.26260818170230493}
2026-01-24 02:16:18,551 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:16:18,551 - INFO - integration_test -   Planner output success: False
2026-01-24 02:16:18,551 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.26260818170230493}
2026-01-24 02:16:18,552 - INFO - integration_test - Step 27 completed in 10.024s
2026-01-24 02:16:18,611 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-24 02:16:18,617 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.01292096 4.50841932 1.04715596 1.59641244 6.93712997]
2026-01-24 02:16:18,617 - DEBUG - integration_test - Step 28: Using propagated spline 6.9371 (close to path, dist=0.200m, drift=0.382m)
2026-01-24 02:16:18,617 - DEBUG - integration_test -   Set spline state to 6.9371
2026-01-24 02:16:18,618 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:16:19,617 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.013, 4.508), path_start=(0.000, 0.000), dist=6.742m
2026-01-24 02:16:19,617 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-24 02:16:20,665 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:16:20,692 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:16:20,692 - INFO - integration_test - Warmstart k=0: x0=5.0129209640602355 , y0=4.508419324354976 , psi0=1.0471559605228657 , v0=1.596412437079097 , spline0=6.937129969367082 , a0=0.0 , w0=0.0
2026-01-24 02:16:20,692 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:16:20,693 - INFO - integration_test - Dyn residual k=0: pred=[5.092747335896062, 4.646669376984755, 1.0471559605228657, 1.596412437079097, 7.096771213074992], ws=[5.092747335896062, 4.646669376984755, 1.0471559605228657, 1.596412437079097, 6.440205556509335], res=[0.0, 0.0, 0.0, 0.0, 0.6565656565656566], res_norm=6.566e-01
2026-01-24 02:16:20,694 - INFO - integration_test - Dyn residual k=1: pred=[5.172573707731889, 4.784919429614534, 1.0471559605228657, 1.596412437079097, 6.599846800217245], ws=[5.099907693757834, 4.650236153581504, 1.0471559605228657, 1.596412437079097, 6.700856901227346], res=[0.0726660139740547, 0.1346832760330292, 0.0, 0.0, -0.10101010101010122], res_norm=1.834e-01
2026-01-24 02:16:20,695 - INFO - integration_test - Dyn residual k=2: pred=[5.179734065593661, 4.788486206211283, 1.0471559605228657, 1.596412437079097, 6.860498144935256], ws=[5.252400079567716, 4.923169482244313, 1.0471559605228657, 1.596412437079097, 7.062518346955457], res=[-0.0726660139740547, -0.1346832760330292, 0.0, 0.0, -0.20202020202020154], res_norm=2.534e-01
2026-01-24 02:16:20,713 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:21,742 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:21,766 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:21,814 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:21,838 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:21,887 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:21,910 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:21,963 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:21,985 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:22,033 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:22,058 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:22,105 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:22,129 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:22,179 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:22,202 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:22,251 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:22,273 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:22,323 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:22,349 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:22,399 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:22,421 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:22,468 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:28,338 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-24 02:16:28,338 - WARNING - integration_test -   Consecutive MPC failures: 6/20
2026-01-24 02:16:28,360 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:28,360 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:16:28,637 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:16:28,638 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:29,219 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:16:29,251 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=6.937)
2026-01-24 02:16:29,251 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:16:29,251 - INFO - integration_test - === Applying control at step 28 ===
2026-01-24 02:16:29,251 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.5309473020699604}
2026-01-24 02:16:29,251 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:16:29,251 - INFO - integration_test -   Planner output success: False
2026-01-24 02:16:29,251 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.5309473020699604}
2026-01-24 02:16:29,253 - INFO - integration_test - Step 28 completed in 10.637s
2026-01-24 02:16:29,329 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-24 02:16:29,332 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.09107587 4.63600875 0.99406123 1.39641244 7.07677121]
2026-01-24 02:16:29,333 - DEBUG - integration_test - Step 29: Using propagated spline 7.0768 (close to path, dist=0.083m, drift=0.112m)
2026-01-24 02:16:29,333 - DEBUG - integration_test -   Set spline state to 7.0768
2026-01-24 02:16:29,334 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:16:30,380 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.091, 4.636), path_start=(0.000, 0.000), dist=6.886m
2026-01-24 02:16:30,380 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-24 02:16:31,451 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:16:31,476 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:16:31,476 - INFO - integration_test - Warmstart k=0: x0=5.091075866216527 , y0=4.636008748165144 , psi0=0.9940612303158697 , v0=1.3964124370790971 , spline0=7.076771213074992 , a0=0.0 , w0=0.0
2026-01-24 02:16:31,476 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:16:31,477 - INFO - integration_test - Dyn residual k=0: pred=[5.167220847111174, 4.753062662362175, 0.9940612303158697, 1.3964124370790971, 7.216412456782902], ws=[5.167220847111174, 4.753062662362175, 0.9940612303158698, 1.3964124370790971, 6.761867002237447], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:16:31,478 - INFO - integration_test - Dyn residual k=1: pred=[5.24336582800582, 4.870116576559205, 0.9940612303158698, 1.3964124370790971, 6.901508245945357], ws=[5.24336582800582, 4.870116576559205, 0.9940612303158698, 1.3964124370790971, 6.800498144935257], res=[0.0, 0.0, 0.0, 0.0, 0.10101010101010033], res_norm=1.010e-01
2026-01-24 02:16:31,479 - INFO - integration_test - Dyn residual k=2: pred=[5.319510808900467, 4.9871704907562355, 0.9940612303158698, 1.3964124370790971, 6.940139388643167], ws=[5.319510808900467, 4.9871704907562355, 0.9940612303158698, 1.3964124370790971, 6.839129287633066], res=[0.0, 0.0, 0.0, 0.0, 0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:16:31,496 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:32,476 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:32,501 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:32,548 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:32,569 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:32,617 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:32,639 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:32,682 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:32,704 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:32,753 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:32,773 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:32,822 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:32,844 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:32,893 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:32,918 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:32,972 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:32,994 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:33,043 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:16:33,065 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:33,111 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:33,135 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:16:33,184 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:16:39,068 - WARNING - integration_test - Step 29: MPC solve failed
2026-01-24 02:16:39,068 - WARNING - integration_test -   Consecutive MPC failures: 7/20
2026-01-24 02:16:39,090 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:39,091 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:16:39,107 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:16:39,108 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:39,762 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:16:39,791 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.077)
2026-01-24 02:16:39,791 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:16:39,792 - INFO - integration_test - === Applying control at step 29 ===
2026-01-24 02:16:39,792 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.4867765982853882}
2026-01-24 02:16:39,792 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:16:39,792 - INFO - integration_test -   Planner output success: False
2026-01-24 02:16:39,792 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.4867765982853882}
2026-01-24 02:16:39,793 - INFO - integration_test - Step 29 completed in 10.461s
2026-01-24 02:16:39,869 - WARNING - integration_test - Test timeout reached (180.0s) at step 30. Terminating test early.
2026-01-24 02:16:39,873 - INFO - integration_test - Saving test results...
2026-01-24 02:16:39,873 - INFO - integration_test - Saved 31 vehicle states to test_outputs/20260124_021329_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-24 02:16:39,873 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_021329_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-24 02:16:39,874 - INFO - integration_test - Saved 41 states for obstacle 0 to test_outputs/20260124_021329_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-24 02:16:39,874 - INFO - integration_test - Saved 41 states for obstacle 1 to test_outputs/20260124_021329_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-24 02:16:39,874 - INFO - integration_test - Saved state history: 31 vehicle states, 2 obstacles
2026-01-24 02:16:39,874 - INFO - integration_test - Creating animation...
2026-01-24 02:16:40,190 - DEBUG - integration_test - Creating animation with 31 frames (range: 0 to 30)
2026-01-24 02:16:40,191 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:16:41,184 - INFO - integration_test - Frame 0: Safe Horizon module has 1862 scenarios after update
2026-01-24 02:16:41,184 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:16:41,184 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:16:41,186 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:41,186 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:16:41,201 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:16:41,202 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:41,255 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:16:41,262 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:16:41,263 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:16:42,298 - INFO - integration_test - Frame 0: Safe Horizon module has 1853 scenarios after update
2026-01-24 02:16:42,298 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:16:42,298 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:16:42,299 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:42,299 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:16:42,316 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:16:42,316 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:42,371 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:16:42,379 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:16:42,514 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 02:16:43,782 - INFO - integration_test - Frame 1: Safe Horizon module has 1862 scenarios after update
2026-01-24 02:16:43,782 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-24 02:16:43,782 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:16:43,784 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:43,784 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:16:43,801 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:16:43,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:43,854 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:43,861 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-24 02:16:43,971 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 02:16:44,917 - INFO - integration_test - Frame 2: Safe Horizon module has 1853 scenarios after update
2026-01-24 02:16:44,917 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-24 02:16:44,917 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:16:44,919 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:44,919 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:16:44,937 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:16:44,938 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:44,988 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:44,994 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-24 02:16:46,090 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:46,090 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:16:46,368 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:16:46,369 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:46,418 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:47,448 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:47,448 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:16:47,466 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:16:47,467 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:47,518 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:48,691 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:48,691 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1845 scenarios available
2026-01-24 02:16:49,012 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1845 trajectory groups with 18450 total points
2026-01-24 02:16:49,013 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:49,065 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:50,178 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:50,179 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:16:50,197 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:16:50,198 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:50,251 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:51,377 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:51,377 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:16:51,399 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:16:51,401 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:51,758 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:52,893 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:52,893 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:16:52,912 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:16:52,914 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:52,966 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:53,997 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:53,997 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:16:54,016 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:16:54,017 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:54,065 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:55,184 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:55,184 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:16:55,492 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:16:55,493 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:55,551 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:56,788 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:56,788 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:16:56,809 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:16:56,810 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:56,862 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:58,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:58,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:16:58,027 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:16:58,028 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:58,382 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:16:59,573 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:16:59,573 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:16:59,594 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:16:59,596 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:16:59,647 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:00,739 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:00,739 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1840 scenarios available
2026-01-24 02:17:00,755 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1840 trajectory groups with 18400 total points
2026-01-24 02:17:00,756 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:00,808 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:01,903 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:01,903 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:17:02,208 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:17:02,209 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:02,265 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:03,418 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:03,418 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1842 scenarios available
2026-01-24 02:17:03,440 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1842 trajectory groups with 18420 total points
2026-01-24 02:17:03,442 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:03,503 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:04,732 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:04,732 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:17:05,044 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:17:05,045 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:05,098 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:06,153 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:06,153 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1844 scenarios available
2026-01-24 02:17:06,171 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1844 trajectory groups with 18440 total points
2026-01-24 02:17:06,172 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:06,219 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:07,281 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:07,281 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:17:07,303 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:17:07,304 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:07,358 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:08,848 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:08,848 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1847 scenarios available
2026-01-24 02:17:08,870 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1847 trajectory groups with 18470 total points
2026-01-24 02:17:08,871 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:08,925 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:10,042 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:10,042 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:17:10,063 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:17:10,064 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:10,112 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:11,251 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:11,251 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:17:11,557 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:17:11,558 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:11,611 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:12,695 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:12,695 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:17:12,713 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:17:12,714 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:12,765 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:13,850 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:13,850 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1838 scenarios available
2026-01-24 02:17:14,147 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1838 trajectory groups with 18380 total points
2026-01-24 02:17:14,148 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:14,198 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:15,250 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:15,250 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:17:15,267 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:17:15,268 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:15,317 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:16,374 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:16,375 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:17:16,396 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:17:16,397 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:16,745 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:17,874 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:17,874 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:17:17,897 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:17:17,898 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:17,962 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:19,169 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:19,169 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:17:19,189 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:17:19,190 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:19,244 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:20,357 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:20,357 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:17:20,657 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:17:20,658 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:20,709 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:21,753 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:17:21,753 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:17:21,768 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:17:21,769 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:17:21,818 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:17:23,862 - INFO - integration_test - Saved animation with 31 frames at 10.00 fps to test_outputs/20260124_021329_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 3.10s, size: 516255 bytes)
2026-01-24 02:17:23,886 - INFO - integration_test - Animation created successfully
2026-01-24 02:17:23,887 - INFO - integration_test - Test completed successfully
