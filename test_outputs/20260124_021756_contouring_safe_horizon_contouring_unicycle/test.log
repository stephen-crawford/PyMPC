2026-01-24 02:17:56,725 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 02:17:56,725 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 02:17:56,725 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 02:17:56,725 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 02:17:56,725 - INFO - integration_test - Creating objective module: contouring
2026-01-24 02:17:56,736 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 02:17:56,736 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-24 02:17:56,736 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-24 02:17:56,768 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-24 02:17:56,768 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 02:17:56,777 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 02:17:56,777 - INFO - integration_test - Created 2 constraint module(s)
2026-01-24 02:17:56,804 - INFO - integration_test - Setting solver on all modules...
2026-01-24 02:17:56,804 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-24 02:17:56,804 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 02:17:56,804 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 02:17:56,804 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 02:17:56,804 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 02:17:56,804 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 02:17:56,804 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 02:17:56,804 - INFO - integration_test - Obstacle 0: s=8.03, pos=(6.24, 5.59), lateral_offset=0.00m, vel=(0.47, 0.37)
2026-01-24 02:17:56,804 - INFO - integration_test - Obstacle 1: s=17.06, pos=(13.71, 10.71), lateral_offset=0.00m, vel=(-0.69, -0.41)
2026-01-24 02:17:56,805 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 02:17:56,805 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 02:17:56,805 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 02:17:56,805 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 02:17:56,805 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 02:17:56,805 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 02:17:56,805 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 02:17:56,806 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 02:17:56,806 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 02:17:56,806 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 02:17:56,806 - INFO - integration_test - Auto-calculated timeout: 180s for 100 steps
2026-01-24 02:17:56,806 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 02:17:56,806 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 02:17:56,807 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 02:17:56,807 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 02:17:56,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:17:57,999 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 02:17:57,999 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 02:17:58,971 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:17:59,002 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:17:59,002 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 02:17:59,002 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:17:59,003 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 02:17:59,004 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-24 02:17:59,005 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-24 02:17:59,021 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,028 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:00,056 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,150 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:00,177 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,230 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:00,254 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,307 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:00,331 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,381 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:00,403 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,456 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:00,481 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,531 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:00,554 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,602 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:00,626 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,678 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:00,702 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,754 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:00,777 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:00,828 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:01,889 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 02:18:02,087 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:02,087 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:18:02,163 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:18:02,164 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:02,249 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:02,261 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 02:18:02,261 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:02,261 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 02:18:02,261 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 02:18:02,261 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000187928277, 'w': 0.8000000025976104}
2026-01-24 02:18:02,261 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:02,261 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:02,263 - INFO - integration_test - Step 0 completed in 5.457s
2026-01-24 02:18:02,332 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 02:18:02,335 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-24 02:18:02,336 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 02:18:02,336 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 02:18:02,336 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:03,277 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 02:18:03,277 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 02:18:04,190 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:04,216 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:04,216 - INFO - integration_test - Warmstart k=0: x0=0.10987737537420857 , y0=0.004530845072773597 , psi0=0.08000000025976102 , v0=1.2000000018792827 , spline0=0.12000000018792828 , a0=0.0 , w0=0.0
2026-01-24 02:18:04,216 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:04,217 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358031535905, 0.014120608395164179, 0.08000000025976102, 1.2000000018792827, 0.24000000037585656], ws=[0.22949358031535907, 0.014120608395164179, 0.08000000025976117, 1.2000000018792827, 0.05292929293308946], res=[-2.7755575615628914e-17, 0.0, -1.5265566588595902e-16, 0.0, 0.1870707074427671], res_norm=1.871e-01
2026-01-24 02:18:04,218 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097852565096, 0.023710371717554777, 0.08000000025976117, 1.2000000018792827, 0.17292929312101774], ws=[0.3491097852565096, 0.02371037171755478, 0.08000000025976117, 1.2000000018792827, 0.10828282829421787], res=[0.0, -3.469446951953614e-18, 0.0, 0.0, 0.06464646482679987], res_norm=6.465e-02
2026-01-24 02:18:04,219 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259901976601, 0.033300135039945375, 0.08000000025976117, 1.2000000018792827, 0.22828282848214615], ws=[0.4687259901976601, 0.03330013503994538, 0.08000000025976117, 1.2000000018792827, 0.16606060608338524], res=[0.0, -6.938893903907228e-18, 0.0, 0.0, 0.06222222239876091], res_norm=6.222e-02
2026-01-24 02:18:04,236 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,305 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:05,330 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,381 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:05,404 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,455 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:05,477 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,525 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:05,547 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,596 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:05,619 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,670 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:05,692 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,741 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:05,764 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,812 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:05,837 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,888 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:05,912 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:05,960 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:05,982 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:06,031 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:06,664 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 02:18:06,667 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:06,667 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1845 scenarios available
2026-01-24 02:18:06,743 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1845 trajectory groups with 18450 total points
2026-01-24 02:18:06,744 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:06,833 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:06,845 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 02:18:06,846 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:06,846 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 02:18:06,846 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001905383, 'w': 0.8000000026651446}
2026-01-24 02:18:06,846 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:06,846 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:06,848 - INFO - integration_test - Step 1 completed in 4.513s
2026-01-24 02:18:06,913 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 02:18:06,914 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-24 02:18:06,914 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 02:18:06,914 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 02:18:06,915 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:07,923 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 02:18:07,923 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 02:18:08,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:08,890 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:08,891 - INFO - integration_test - Warmstart k=0: x0=0.23889212816084537 , y0=0.02022162182446789 , psi0=0.16000000052627547 , v0=1.4000000037846658 , spline0=0.26000000056639483 , a0=0.0 , w0=0.0
2026-01-24 02:18:08,891 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:08,892 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394819532733, 0.04252617088349643, 0.16000000052627547, 1.4000000037846658, 0.40000000094486143], ws=[0.37710394819532733, 0.04252617088349643, 0.1600000005262756, 1.4000000037846658, 0.1090909091099972], res=[0.0, 0.0, -1.3877787807814457e-16, 0.0, 0.29090909183486424], res_norm=2.909e-01
2026-01-24 02:18:08,893 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157682298093, 0.06483071994252498, 0.1600000005262756, 1.4000000037846658, 0.2490909094884638], ws=[0.5153157682298093, 0.064830719942525, 0.1600000005262756, 1.4000000037846658, 0.16787878791888874], res=[0.0, -1.3877787807814457e-17, 0.0, 0.0, 0.08121212156957505], res_norm=8.121e-02
2026-01-24 02:18:08,893 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275882642912, 0.08713526900155355, 0.1600000005262756, 1.4000000037846658, 0.3078787882973553], ws=[0.6535275882642912, 0.08713526900155356, 0.1600000005262756, 1.4000000037846658, 0.4589898991274178], res=[0.0, -1.3877787807814457e-17, 0.0, 0.0, -0.15111111083006246], res_norm=1.511e-01
2026-01-24 02:18:08,911 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:09,913 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:09,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:09,984 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:10,006 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,056 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:10,080 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,129 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:10,152 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,202 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:10,225 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,274 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:10,296 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,348 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:10,371 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,421 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:10,444 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,493 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:10,515 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,562 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:10,584 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:10,632 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:11,245 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 02:18:11,249 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:11,249 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:18:11,327 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:18:11,328 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:11,414 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:11,426 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 02:18:11,426 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:11,426 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 02:18:11,426 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999912347108, 'w': 0.7999997974915725}
2026-01-24 02:18:11,426 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:11,426 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:11,428 - INFO - integration_test - Step 2 completed in 4.515s
2026-01-24 02:18:11,490 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 02:18:11,491 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999998 1.6        0.42      ]
2026-01-24 02:18:11,491 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 02:18:11,492 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 02:18:11,492 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:12,378 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 02:18:12,378 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 02:18:13,266 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:13,292 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:13,292 - INFO - integration_test - Warmstart k=0: x0=0.3858364358615646 , y0=0.050144715056019265 , psi0=0.23999998027543273 , v0=1.600000002908137 , spline0=0.42000000085720857 , a0=0.0 , w0=0.0
2026-01-24 02:18:13,292 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:13,293 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505128705407, 0.08817713228801256, 0.23999998027543273, 1.600000002908137, 0.5800000011480223], ws=[0.5412505128705407, 0.08817713228801258, 0.2399999802754329, 1.600000002908137, 0.16909090912569763], res=[0.0, -1.3877787807814457e-17, -1.6653345369377348e-16, 0.0, 0.4109090920223247], res_norm=4.109e-01
2026-01-24 02:18:13,293 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645898795168, 0.1262095495200059, 0.2399999802754329, 1.600000002908137, 0.3290909094165113], ws=[0.6966645898795168, 0.1262095495200059, 0.2399999802754329, 1.600000002908137, 0.23191919197732672], res=[0.0, 0.0, 0.0, 0.0, 0.0971717174391846], res_norm=9.717e-02
2026-01-24 02:18:13,294 - INFO - integration_test - Dyn residual k=2: pred=[0.852078666888493, 0.16424196675199923, 0.2399999802754329, 1.600000002908137, 0.3919191922681404], ws=[0.852078666888493, 0.16424196675199923, 0.2399999802754329, 1.600000002908137, 0.297979798067154], res=[0.0, 0.0, 0.0, 0.0, 0.0939393942009864], res_norm=9.394e-02
2026-01-24 02:18:13,309 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:14,456 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:14,493 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:14,564 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:14,588 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:14,636 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:14,659 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:14,708 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:14,732 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:14,780 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:14,803 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:14,854 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:14,877 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:14,928 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:14,951 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:15,001 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:15,025 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:15,077 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:15,101 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:15,151 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:15,175 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:15,222 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:15,820 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 02:18:15,824 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:15,824 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1873 scenarios available
2026-01-24 02:18:15,838 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1873 trajectory groups with 18730 total points
2026-01-24 02:18:15,839 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:15,955 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:15,966 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 02:18:15,966 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:15,966 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 02:18:15,966 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018481304, 'w': 0.799999998225976}
2026-01-24 02:18:15,966 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:15,966 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:15,968 - INFO - integration_test - Step 3 completed in 4.478s
2026-01-24 02:18:16,029 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 02:18:16,030 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999998 1.8        0.6       ]
2026-01-24 02:18:16,031 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 02:18:16,031 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 02:18:16,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:16,979 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 02:18:16,979 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 02:18:18,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:18,056 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:18,056 - INFO - integration_test - Warmstart k=0: x0=0.5491354620432378 , y0=0.0972407522878374 , psi0=0.3199999800980303 , v0=1.8000000047562672 , spline0=0.6000000013328353 , a0=0.0 , w0=0.0
2026-01-24 02:18:18,056 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:18,057 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978388764479, 0.15386272994785705, 0.3199999800980303, 1.8000000047562672, 0.780000001808462], ws=[0.7199978388764479, 0.15386272994785705, 0.31999998009803043, 1.8000000047562672, 0.2335353536084227], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5464646482000393], res_norm=5.465e-01
2026-01-24 02:18:18,058 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602157096579, 0.2104847076078767, 0.31999998009803043, 1.8000000047562672, 0.4135353540840494], ws=[0.8908602157096579, 0.2104847076078767, 0.31999998009803043, 1.8000000047562672, 0.301010101125459], res=[0.0, 0.0, 0.0, 0.0, 0.1125252529585904], res_norm=1.125e-01
2026-01-24 02:18:18,059 - INFO - integration_test - Dyn residual k=2: pred=[1.061722592542868, 0.2671066852678963, 0.31999998009803043, 1.8000000047562672, 0.4810101016010857], ws=[1.061722592542868, 0.2671066852678963, 0.31999998009803043, 1.8000000047562672, 0.3721212122884676], res=[0.0, 0.0, 0.0, 0.0, 0.10888888931261809], res_norm=1.089e-01
2026-01-24 02:18:18,077 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,130 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:19,152 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,197 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:19,217 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,262 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:19,283 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,328 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:19,348 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,393 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:19,413 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,457 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:19,478 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,523 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:19,544 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,588 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:19,607 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,652 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:19,673 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,718 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:19,738 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:19,782 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:20,349 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 02:18:20,353 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:20,353 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:18:20,365 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:18:20,365 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:20,478 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:20,490 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 02:18:20,490 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:20,490 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 02:18:20,490 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000184264652, 'w': 0.7999999998613109}
2026-01-24 02:18:20,490 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:20,490 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:20,492 - INFO - integration_test - Step 4 completed in 4.462s
2026-01-24 02:18:20,550 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 02:18:20,551 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427976 0.39999998 2.00000001 0.8       ]
2026-01-24 02:18:20,551 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 02:18:20,551 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 02:18:20,552 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:21,615 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 02:18:21,615 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 02:18:22,637 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:22,667 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:22,667 - INFO - integration_test - Warmstart k=0: x0=0.726861490583833 , y0=0.16427976006087774 , psi0=0.39999998008416143 , v0=2.000000006598914 , spline0=0.8000000019927267 , a0=0.0 , w0=0.0
2026-01-24 02:18:22,667 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:22,668 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736915433287, 0.2421634251108412, 0.39999998008416143, 2.000000006598914, 1.0000000026526181], ws=[0.9110736915433287, 0.2421634251108412, 0.3999999800841616, 2.000000006598914, 0.3636363637971283], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.6363636388554899], res_norm=6.364e-01
2026-01-24 02:18:22,669 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858925028246, 0.3200470901608047, 0.3999999800841616, 2.000000006598914, 0.5636363644570197], ws=[1.0952858925028246, 0.32004709016080474, 0.3999999800841616, 2.000000006598914, 0.8767676772361125], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, -0.3131313127790928], res_norm=3.131e-01
2026-01-24 02:18:22,670 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980934623204, 0.39793075521076826, 0.3999999800841616, 2.000000006598914, 1.0767676778960038], ws=[1.2794980934623204, 0.39793075521076826, 0.3999999800841616, 2.000000006598914, 0.9696969702988487], res=[0.0, 0.0, 0.0, 0.0, 0.10707070759715509], res_norm=1.071e-01
2026-01-24 02:18:22,689 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:23,779 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:23,802 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:23,851 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:23,877 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:23,926 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:23,949 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:24,000 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:24,023 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:24,078 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:24,111 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:24,172 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:24,195 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:24,242 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:24,265 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:24,316 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:24,340 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:24,392 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:24,414 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:24,463 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:24,487 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:24,534 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:25,191 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 02:18:25,195 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:25,195 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1847 scenarios available
2026-01-24 02:18:25,208 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1847 trajectory groups with 18470 total points
2026-01-24 02:18:25,209 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:25,458 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:25,469 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 02:18:25,470 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:25,470 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 02:18:25,470 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000192396943, 'w': 0.8000000020525123}
2026-01-24 02:18:25,470 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:25,470 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:25,472 - INFO - integration_test - Step 5 completed in 4.921s
2026-01-24 02:18:25,534 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 02:18:25,535 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.2538238  0.47999998 2.20000001 1.02      ]
2026-01-24 02:18:25,536 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 02:18:25,536 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 02:18:25,537 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:26,450 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 02:18:26,450 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 02:18:27,380 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:27,406 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:27,406 - INFO - integration_test - Warmstart k=0: x0=0.9167519061937257 , y0=0.25382379624456425 , psi0=0.47999998028941265 , v0=2.2000000085228835 , spline0=1.0200000028450151 , a0=0.0 , w0=0.0
2026-01-24 02:18:27,406 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:27,407 - INFO - integration_test - Dyn residual k=0: pred=[1.11189079196357, 0.35541521141095744, 0.47999998028941265, 2.2000000085228835, 1.2400000036973036], ws=[1.11189079196357, 0.35541521141095744, 0.4799999802894126, 2.2000000085228835, 0.6933333337441449], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, 0.5466666699531587], res_norm=5.467e-01
2026-01-24 02:18:27,408 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296777334145, 0.45700662657735064, 0.4799999802894126, 2.2000000085228835, 0.9133333345964332], ws=[1.3070296777334145, 0.45700662657735064, 0.4799999802894126, 2.2000000085228835, 1.239797980671134], res=[0.0, 0.0, 0.0, 0.0, -0.3264646460747007], res_norm=3.265e-01
2026-01-24 02:18:27,409 - INFO - integration_test - Dyn residual k=2: pred=[1.502168563503259, 0.5585980417437438, 0.4799999802894126, 2.2000000085228835, 1.4597979815234223], ws=[1.502168563503259, 0.5585980417437438, 0.4799999802894126, 2.2000000085228835, 1.0795959604689909], res=[0.0, 0.0, 0.0, 0.0, 0.38020202105443146], res_norm=3.802e-01
2026-01-24 02:18:27,425 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:28,404 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:28,427 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:28,478 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:28,503 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:28,554 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:28,578 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:28,628 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:28,652 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:28,706 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:28,731 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:28,784 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:28,810 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:28,862 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:28,889 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:28,941 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:28,967 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:29,018 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:29,067 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:29,142 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:29,168 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:29,219 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:29,876 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 02:18:29,882 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:29,882 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:18:30,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:18:30,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:30,157 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:30,172 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 02:18:30,172 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:30,172 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 02:18:30,172 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000174904846, 'w': 0.7999999746329396}
2026-01-24 02:18:30,172 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:30,172 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:30,174 - INFO - integration_test - Step 6 completed in 4.639s
2026-01-24 02:18:30,242 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 02:18:30,244 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819143 0.55999998 2.40000001 1.26      ]
2026-01-24 02:18:30,244 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 02:18:30,244 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 02:18:30,245 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:31,275 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 02:18:31,275 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 02:18:32,217 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:32,242 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:32,242 - INFO - integration_test - Warmstart k=0: x0=1.116230868572923 , y0=0.36819143134852805 , psi0=0.5599999777527066 , v0=2.400000010271932 , spline0=1.2600000038722083 , a0=0.0 , w0=0.0
2026-01-24 02:18:32,242 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:32,243 - INFO - integration_test - Dyn residual k=0: pred=[1.3195720989226267, 0.49567611487137897, 0.5599999777527066, 2.400000010271932, 1.5000000048994016], ws=[1.3195720989226267, 0.49567611487137897, 0.5599999777527067, 2.400000010271932, 1.2474747484150366], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.25252525648436497], res_norm=2.525e-01
2026-01-24 02:18:32,244 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133292723305, 0.6231607983942299, 0.5599999777527067, 2.400000010271932, 1.4874747494422298], ws=[1.5229133292723305, 0.6231607983942299, 0.5599999777527067, 2.400000010271932, 1.3616161628134535], res=[0.0, 0.0, 0.0, 0.0, 0.12585858662877625], res_norm=1.259e-01
2026-01-24 02:18:32,245 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545596220342, 0.7506454819170808, 0.5599999777527067, 2.400000010271932, 1.6016161638406468], ws=[1.7262545596220342, 0.7506454819170808, 0.5599999777527067, 2.400000010271932, 1.1985858597799435], res=[0.0, 0.0, 0.0, 0.0, 0.4030303040607033], res_norm=4.030e-01
2026-01-24 02:18:32,261 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,268 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:33,292 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,345 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:33,370 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,423 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:33,447 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,499 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:33,525 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,578 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:33,601 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,653 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:33,678 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,729 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:33,752 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,802 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:33,825 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,879 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:33,904 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:33,958 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:33,984 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:34,036 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:34,718 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 02:18:34,723 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:34,723 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:18:34,848 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:18:34,849 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:35,012 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:35,026 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 02:18:35,026 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:35,027 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 02:18:35,027 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198792436, 'w': 0.8000000049079988}
2026-01-24 02:18:35,027 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:35,027 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:35,028 - INFO - integration_test - Step 7 completed in 4.784s
2026-01-24 02:18:35,094 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 02:18:35,097 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.3224345  0.50942442 0.63999998 2.60000001 1.52000001]
2026-01-24 02:18:35,098 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 02:18:35,098 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 02:18:35,098 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:36,116 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 02:18:36,117 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 02:18:37,079 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:37,108 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:37,109 - INFO - integration_test - Warmstart k=0: x0=1.3224344957084673 , y0=0.5094244233906263 , psi0=0.6399999782435065 , v0=2.6000000122598563 , spline0=1.5200000050981939 , a0=0.0 , w0=0.0
2026-01-24 02:18:37,109 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:37,110 - INFO - integration_test - Dyn residual k=0: pred=[1.5309793971198897, 0.6646952343397956, 0.6399999782435065, 2.6000000122598563, 1.7800000063241797], ws=[1.5309793971198897, 0.6646952343397956, 0.6399999782435066, 2.6000000122598563, 1.3696969709745819], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.4103030353495978], res_norm=4.103e-01
2026-01-24 02:18:37,111 - INFO - integration_test - Dyn residual k=1: pred=[1.739524298531312, 0.8199660452889649, 0.6399999782435066, 2.6000000122598563, 1.6296969722005676], ws=[1.7395242985313122, 0.8199660452889649, 0.6399999782435066, 2.6000000122598563, 1.70666666849701], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, -0.07696969629644235], res_norm=7.697e-02
2026-01-24 02:18:37,112 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691999427346, 0.9752368562381342, 0.6399999782435066, 2.6000000122598563, 1.9666666697229958], ws=[1.9480691999427346, 0.9752368562381342, 0.6399999782435066, 2.6000000122598563, 2.0646464671286084], res=[0.0, 0.0, 0.0, 0.0, -0.09797979740561269], res_norm=9.798e-02
2026-01-24 02:18:37,129 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,170 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:38,193 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,244 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:38,268 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,320 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:38,343 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,393 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:38,418 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,467 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:38,490 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,537 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:38,561 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,607 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:38,629 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,678 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:38,701 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,749 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:38,774 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,823 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:38,843 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:38,893 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:39,567 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 02:18:39,572 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:39,572 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1843 scenarios available
2026-01-24 02:18:39,701 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1843 trajectory groups with 18430 total points
2026-01-24 02:18:39,702 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:39,902 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:39,915 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 02:18:39,915 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:39,916 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 02:18:39,916 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199982324, 'w': 0.8000000099600373}
2026-01-24 02:18:39,916 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:39,916 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:39,917 - INFO - integration_test - Step 8 completed in 4.821s
2026-01-24 02:18:39,975 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 02:18:39,979 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223934 0.67925692 0.71999998 2.80000001 1.80000001]
2026-01-24 02:18:39,980 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 02:18:39,980 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 02:18:39,980 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:40,884 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 02:18:40,884 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 02:18:41,765 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:41,792 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:41,792 - INFO - integration_test - Warmstart k=0: x0=1.5322393399230718 , y0=0.6792569179062637 , psi0=0.7199999792395102 , v0=2.8000000142596795 , spline0=1.800000006524162 , a0=0.0 , w0=0.0
2026-01-24 02:18:41,792 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:41,793 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449489875348, 0.8638846226283381, 0.7199999792395102, 2.8000000142596795, 2.08000000795013], ws=[1.7427449489875348, 0.8638846226283381, 0.7199999792395104, 2.8000000142596795, 1.7163636382909404], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.36363636965918955], res_norm=3.636e-01
2026-01-24 02:18:41,794 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505580519979, 1.0485123273504124, 0.7199999792395104, 2.8000000142596795, 1.9963636397169084], ws=[1.9532505580519979, 1.0485123273504124, 0.7199999792395104, 2.8000000142596795, 2.081616164267987], res=[0.0, 0.0, 0.0, 0.0, -0.08525252455107868], res_norm=8.525e-02
2026-01-24 02:18:41,795 - INFO - integration_test - Dyn residual k=2: pred=[2.163756167116461, 1.2331400320724868, 0.7199999792395104, 2.8000000142596795, 2.361616165693955], ws=[2.163756167116461, 1.2331400320724868, 0.7199999792395104, 2.8000000142596795, 1.9292929320207235], res=[0.0, 0.0, 0.0, 0.0, 0.43232323367323167], res_norm=4.323e-01
2026-01-24 02:18:41,811 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:42,920 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:42,952 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,010 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:43,035 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,090 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:43,116 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,169 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:43,192 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,241 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:43,264 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,336 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:43,375 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,429 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:43,452 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,508 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:43,532 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,582 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:43,605 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,653 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:43,677 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:43,725 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:44,424 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 02:18:44,430 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:44,430 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:18:44,445 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:18:44,446 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:44,625 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:44,638 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 02:18:44,639 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:44,639 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 02:18:44,639 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998201, 'w': 0.8000000099530113}
2026-01-24 02:18:44,639 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:44,639 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:44,640 - INFO - integration_test - Step 9 completed in 4.662s
2026-01-24 02:18:44,703 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 02:18:44,704 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229391 0.87908748 0.79999998 3.00000002 2.10000001]
2026-01-24 02:18:44,704 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 02:18:44,704 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 02:18:44,705 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:45,692 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 02:18:45,692 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 02:18:46,821 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:46,859 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:46,859 - INFO - integration_test - Warmstart k=0: x0=1.7422939099783687 , y0=0.8790874833268078 , psi0=0.7999999802348113 , v0=3.0000000162594995 , spline0=2.100000008150112 , a0=0.0 , w0=0.0
2026-01-24 02:18:46,859 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:46,861 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059281689322, 1.0942943076318878, 0.7999999802348113, 3.0000000162594995, 2.4000000097760616], ws=[1.951305927036122, 1.0942943064655026, 0.7999999802348112, 3.0, 2.092929295234375], res=[1.1328102900165504e-09, 1.1663852106380546e-09, 1.1102230246251565e-16, 1.6259499524551302e-08, 0.30707071454168666], res_norm=3.071e-01
2026-01-24 02:18:46,862 - INFO - integration_test - Dyn residual k=1: pred=[2.160317944093875, 1.3095011296041976, 0.7999999802348112, 3.0, 2.3929292952343753], ws=[2.160317944093875, 1.3095011296041976, 0.7999999802348112, 3.0, 2.4888888915232683], res=[0.0, 0.0, 0.0, 0.0, -0.09595959628889306], res_norm=9.596e-02
2026-01-24 02:18:46,862 - INFO - integration_test - Dyn residual k=2: pred=[2.369329961151628, 1.5247079527428926, 0.7999999802348112, 3.0, 2.7888888915232686], ws=[2.369329961151628, 1.5247079527428926, 0.7999999802348112, 3.0, 2.34343434582175], res=[0.0, 0.0, 0.0, 0.0, 0.44545454570151843], res_norm=4.455e-01
2026-01-24 02:18:46,882 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:47,848 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:47,869 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:47,920 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:47,944 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:47,991 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:48,011 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:48,059 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:48,080 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:48,128 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:48,150 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:48,194 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:48,213 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:48,258 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:48,279 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:48,325 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:48,347 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:48,393 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:48,414 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:48,459 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:48,481 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:48,527 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:49,138 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 02:18:49,144 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:49,144 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1871 scenarios available
2026-01-24 02:18:49,156 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1871 trajectory groups with 18710 total points
2026-01-24 02:18:49,157 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:49,313 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:49,329 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 02:18:49,329 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:49,329 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 02:18:49,329 - INFO - integration_test -   Control dict from planner: {'a': 1.3740372021767235e-07, 'w': 0.8000000098744647}
2026-01-24 02:18:49,329 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:49,329 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:49,331 - INFO - integration_test - Step 10 completed in 4.627s
2026-01-24 02:18:49,389 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 02:18:49,390 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247937 1.10242085 0.87999998 3.00000003 2.40000001]
2026-01-24 02:18:49,390 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 02:18:49,390 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 02:18:49,391 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:50,588 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 02:18:50,588 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 02:18:51,583 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:51,611 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:51,611 - INFO - integration_test - Warmstart k=0: x0=1.9424793736631507 , y0=1.1024208536795563 , psi0=0.8799999812222579 , v0=3.0000000299998715 , spline0=2.400000011150099 , a0=0.0 , w0=0.0
2026-01-24 02:18:51,611 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:51,612 - INFO - integration_test - Dyn residual k=0: pred=[2.133624723175991, 1.3336425160721759, 0.8799999812222579, 3.0000000299998715, 2.700000014150086], ws=[2.1336247212645456, 1.333642513759969, 0.8799999812222579, 3.0, 2.488888892492961], res=[1.9114452243229607e-09, 2.312206870414002e-09, 0.0, 2.9999871475894224e-08, 0.2111111216571251], res_norm=2.111e-01
2026-01-24 02:18:51,613 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700688659405, 1.5648641738403817, 0.8799999812222579, 3.0, 2.7888888924929613], ws=[2.3247700688659405, 1.5648641738403817, 0.8799999812222579, 3.0, 2.343434346700534], res=[0.0, 0.0, 0.0, 0.0, 0.4454545457924275], res_norm=4.455e-01
2026-01-24 02:18:51,614 - INFO - integration_test - Dyn residual k=2: pred=[2.5159154164673354, 1.7960858339207944, 0.8799999812222579, 3.0, 2.643434346700534], ws=[2.5159154164673354, 1.7960858339207944, 0.8799999812222579, 3.0, 2.934343438285388], res=[0.0, 0.0, 0.0, 0.0, -0.290909091584854], res_norm=2.909e-01
2026-01-24 02:18:51,632 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:52,646 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:52,667 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:52,718 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:52,741 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:52,792 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:52,814 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:52,863 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:52,888 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:52,948 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:52,975 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:53,026 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:53,048 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:53,100 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:53,125 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:53,177 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:53,201 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:53,249 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:53,273 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:53,322 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:53,344 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:53,398 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:54,121 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 02:18:54,134 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:54,134 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:18:54,158 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:18:54,159 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:54,367 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:54,383 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 02:18:54,383 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:54,383 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 02:18:54,383 - INFO - integration_test -   Control dict from planner: {'a': -5.010483365892321e-10, 'w': 0.06353227837519501}
2026-01-24 02:18:54,383 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:54,383 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:54,384 - INFO - integration_test - Step 11 completed in 4.995s
2026-01-24 02:18:54,448 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 02:18:54,450 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13288894 1.33424815 0.88635321 3.00000003 2.70000001]
2026-01-24 02:18:54,450 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-24 02:18:54,450 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 02:18:54,451 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:55,504 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 02:18:55,504 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 02:18:56,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:18:56,440 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:18:56,440 - INFO - integration_test - Warmstart k=0: x0=2.132888937813938 , y0=1.3342481535228228 , psi0=0.8863532090597773 , v0=3.0000000299497667 , spline0=2.7000000141450755 , a0=0.0 , w0=0.0
2026-01-24 02:18:56,440 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:18:56,441 - INFO - integration_test - Dyn residual k=0: pred=[2.3225614356687374, 1.5666795312550623, 0.8863532090597773, 3.0000000299497667, 3.000000017140052], ws=[2.3225614337751885, 1.5666795289346407, 0.8863532090597772, 3.0, 2.3434343475778507], res=[1.893548873255213e-09, 2.3204216326178084e-09, 1.1102230246251565e-16, 2.994976666670368e-08, 0.6565656695622013], res_norm=6.566e-01
2026-01-24 02:18:56,442 - INFO - integration_test - Dyn residual k=1: pred=[2.512233929736439, 1.7991109043464584, 0.8863532090597772, 3.0, 2.643434347577851], ws=[2.512233929736439, 1.7991109043464584, 0.8863532090597772, 3.0, 2.934343439344218], res=[0.0, 0.0, 0.0, 0.0, -0.29090909176636703], res_norm=2.909e-01
2026-01-24 02:18:56,443 - INFO - integration_test - Dyn residual k=2: pred=[2.7019064256976897, 2.031542279758276, 0.8863532090597772, 3.0, 3.234343439344218], ws=[2.7019064256976897, 2.031542279758276, 0.8863532090597772, 3.0, 3.301010106439523], res=[0.0, 0.0, 0.0, 0.0, -0.06666666709530533], res_norm=6.667e-02
2026-01-24 02:18:56,460 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:57,482 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:57,507 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:57,560 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:57,586 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:57,640 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:57,664 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:57,716 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:57,741 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:57,832 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:57,862 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:57,924 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:57,953 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:58,019 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:58,047 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:58,107 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:58,133 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:58,189 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:18:58,215 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:58,269 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:58,296 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:18:58,353 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:18:59,128 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 02:18:59,137 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:18:59,137 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:18:59,154 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:18:59,156 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:18:59,393 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:18:59,410 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 02:18:59,410 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:18:59,410 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 02:18:59,410 - INFO - integration_test -   Control dict from planner: {'a': -8.042236422074824e-06, 'w': -0.23713060977618394}
2026-01-24 02:18:59,410 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:18:59,410 - INFO - integration_test -   Planner output success: True
2026-01-24 02:18:59,412 - INFO - integration_test - Step 12 completed in 4.963s
2026-01-24 02:18:59,481 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 02:18:59,484 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32529934 1.56440897 0.86264015 2.99999923 2.99999994]
2026-01-24 02:18:59,485 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-24 02:18:59,485 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 02:18:59,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:00,608 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-24 02:19:00,608 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 02:19:01,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:01,574 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:01,574 - INFO - integration_test - Warmstart k=0: x0=2.3252993350938658 , y0=1.5644089657156377 , psi0=0.8626401480821589 , v0=2.9999992257261243 , spline0=2.999999936717688 , a0=0.0 , w0=0.0
2026-01-24 02:19:01,574 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:01,575 - INFO - integration_test - Dyn residual k=0: pred=[2.520429598741916, 1.7922776422646884, 0.8626401480821589, 2.9999992257261243, 3.299999859290301], ws=[2.520429598741916, 1.7922776422646884, 0.8626401480821588, 2.9999992257261243, 2.934343384597581], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.3656564746927198], res_norm=3.657e-01
2026-01-24 02:19:01,576 - INFO - integration_test - Dyn residual k=1: pred=[2.7155598623899664, 2.020146318813739, 0.8626401480821588, 2.9999992257261243, 3.2343433071701932], ws=[2.7155598623899664, 2.020146318813739, 0.8626401480821588, 2.9999992257261243, 3.301010017280714], res=[0.0, 0.0, 0.0, 0.0, -0.06666671011052072], res_norm=6.667e-02
2026-01-24 02:19:01,577 - INFO - integration_test - Dyn residual k=2: pred=[2.9106901260380167, 2.2480149953627895, 0.8626401480821588, 2.9999992257261243, 3.601009939853326], ws=[2.9106901260380167, 2.2480149953627895, 0.8626401480821588, 2.9999992257261243, 3.6858584634530964], res=[0.0, 0.0, 0.0, 0.0, -0.08484852359977024], res_norm=8.485e-02
2026-01-24 02:19:01,591 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:02,679 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:02,703 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:02,754 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:02,780 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:02,831 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:02,854 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:02,908 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:02,935 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:02,990 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:03,014 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:03,064 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:03,087 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:03,139 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:03,163 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:03,210 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:03,235 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:03,285 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:03,310 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:03,362 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:03,386 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:03,437 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:04,105 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 02:19:04,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:04,116 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:19:04,131 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:19:04,132 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:04,350 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:04,365 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 02:19:04,365 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:04,365 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 02:19:04,365 - INFO - integration_test -   Control dict from planner: {'a': 8.040679362248756e-06, 'w': -0.13162432719066056}
2026-01-24 02:19:04,365 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:04,365 - INFO - integration_test -   Planner output success: True
2026-01-24 02:19:04,367 - INFO - integration_test - Step 13 completed in 4.883s
2026-01-24 02:19:04,433 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 02:19:04,434 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52192362 1.79098692 0.84947772 3.00000003 3.29999994]
2026-01-24 02:19:04,435 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-24 02:19:04,435 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 02:19:04,435 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:05,583 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 02:19:05,583 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 02:19:06,538 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:06,565 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:06,565 - INFO - integration_test - Warmstart k=0: x0=2.5219236222456316 , y0=1.7909869169931307 , psi0=0.8494777153630929 , v0=3.0000000297940606 , spline0=3.299999939697094 , a0=0.0 , w0=0.0
2026-01-24 02:19:06,565 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:06,566 - INFO - integration_test - Dyn residual k=0: pred=[2.7200362556327327, 2.0162676003196682, 0.8494777153630929, 3.0000000297940606, 3.5999999426765], ws=[2.720036253665206, 2.0162675980823264, 0.849477715363093, 3.0, 3.301010077863531], res=[1.967526586099666e-09, 2.2373418673282686e-09, -1.1102230246251565e-16, 2.9794060552035262e-08, 0.29898986481296896], res_norm=2.990e-01
2026-01-24 02:19:06,567 - INFO - integration_test - Dyn residual k=1: pred=[2.9181488850847805, 2.2415482791715218, 0.849477715363093, 3.0, 3.6010100778635312], ws=[2.9181488850847805, 2.2415482791715218, 0.849477715363093, 3.0, 3.685858560884655], res=[0.0, 0.0, 0.0, 0.0, -0.08484848302112358], res_norm=8.485e-02
2026-01-24 02:19:06,568 - INFO - integration_test - Dyn residual k=2: pred=[3.116261516504355, 2.466828960260717, 0.849477715363093, 3.0, 3.9858585608846546], ws=[3.116261516504355, 2.466828960260717, 0.849477715363093, 3.0, 3.8101009851270793], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757534], res_norm=1.758e-01
2026-01-24 02:19:06,585 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:07,593 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:07,614 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:07,662 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:07,684 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:07,732 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:07,754 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:07,804 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:07,827 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:07,874 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:07,899 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:07,955 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:07,980 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:08,031 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:08,054 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:08,101 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:08,124 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:08,174 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:08,197 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:08,243 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:08,265 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:08,314 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:09,454 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 02:19:09,460 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:09,460 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:19:09,474 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:19:09,475 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:09,682 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:09,701 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 02:19:09,701 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:09,701 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 02:19:09,702 - INFO - integration_test -   Control dict from planner: {'a': -1.2588328761897743e-05, 'w': -0.13956005213689998}
2026-01-24 02:19:09,702 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:09,702 - INFO - integration_test -   Planner output success: True
2026-01-24 02:19:09,703 - INFO - integration_test - Step 14 completed in 5.269s
2026-01-24 02:19:09,759 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 02:19:09,761 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72160177 2.01487783 0.83552171 2.99999877 3.59999982]
2026-01-24 02:19:09,761 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-24 02:19:09,761 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 02:19:09,762 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:10,806 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 02:19:10,806 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 02:19:11,812 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:11,839 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:11,840 - INFO - integration_test - Warmstart k=0: x0=2.7216017663068546 , y0=2.0148778324938577 , psi0=0.8355217101494029 , v0=2.9999987709611844 , spline0=3.5999998167932126 , a0=0.0 , w0=0.0
2026-01-24 02:19:11,840 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:11,841 - INFO - integration_test - Dyn residual k=0: pred=[2.922838938690786, 2.2373717126537533, 0.8355217101494029, 2.9999987709611844, 3.899999693889331], ws=[2.922838938690786, 2.2373717126537533, 0.8355217101494028, 2.9999987709611844, 3.6858584590854804], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.21414123480385072], res_norm=2.141e-01
2026-01-24 02:19:11,841 - INFO - integration_test - Dyn residual k=1: pred=[3.1240761110747175, 2.459865592813649, 0.8355217101494028, 2.9999987709611844, 3.985858336181599], ws=[3.1240761110747175, 2.459865592813649, 0.8355217101494028, 2.9999987709611844, 3.8101008324283177], res=[0.0, 0.0, 0.0, 0.0, 0.17575750375328125], res_norm=1.758e-01
2026-01-24 02:19:11,842 - INFO - integration_test - Dyn residual k=2: pred=[3.325313283458649, 2.6823594729735447, 0.8355217101494028, 2.9999987709611844, 4.110100709524436], ws=[3.325313283458649, 2.6823594729735447, 0.8355217101494028, 2.9999987709611844, 3.9343432057711545], res=[0.0, 0.0, 0.0, 0.0, 0.17575750375328125], res_norm=1.758e-01
2026-01-24 02:19:11,859 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:12,912 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:12,939 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:12,994 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:13,018 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,067 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:13,091 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,142 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:13,164 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,212 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:13,235 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,282 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:13,305 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,355 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:13,378 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,429 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:13,451 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,499 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:13,523 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,571 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:13,592 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:13,640 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:14,327 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 02:19:14,336 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:14,336 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1841 scenarios available
2026-01-24 02:19:14,352 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1841 trajectory groups with 18410 total points
2026-01-24 02:19:14,353 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:14,606 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:14,627 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 02:19:14,627 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:14,628 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 02:19:14,628 - INFO - integration_test -   Control dict from planner: {'a': 1.2590290716159538e-05, 'w': -0.14374614329149984}
2026-01-24 02:19:14,628 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:14,628 - INFO - integration_test -   Planner output success: True
2026-01-24 02:19:14,629 - INFO - integration_test - Step 15 completed in 4.869s
2026-01-24 02:19:14,693 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 02:19:14,700 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92443116 2.23591777 0.8211471  3.00000003 3.89999982]
2026-01-24 02:19:14,700 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.417m, drift=0.213m)
2026-01-24 02:19:14,700 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 02:19:14,701 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:15,662 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.924, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 02:19:15,662 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 02:19:16,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:16,833 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:16,833 - INFO - integration_test - Warmstart k=0: x0=2.924431155504057 , y0=2.2359177682495264 , psi0=0.8211470958202529 , v0=3.000000029990256 , spline0=3.8999998197922383 , a0=0.0 , w0=0.0
2026-01-24 02:19:16,833 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:16,834 - INFO - integration_test - Dyn residual k=0: pred=[3.128845776838485, 2.455496146930392, 0.8211470958202529, 3.000000029990256, 4.199999822791264], ws=[3.1288457747950034, 2.455496144735321, 0.8211470958202529, 3.0, 3.8101009354695132], res=[2.0434818281955813e-09, 2.1950707917994805e-09, 0.0, 2.999025605632255e-08, 0.3898988873217504], res_norm=3.899e-01
2026-01-24 02:19:16,835 - INFO - integration_test - Dyn residual k=1: pred=[3.3332603940859493, 2.675074521221116, 0.8211470958202529, 3.0, 4.1101009354695135], ws=[3.3332603940859498, 2.675074521221116, 0.8211470958202529, 3.0, 3.9343433597119373], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, 0.17575757575757622], res_norm=1.758e-01
2026-01-24 02:19:16,836 - INFO - integration_test - Dyn residual k=2: pred=[3.5376750133768957, 2.894652897706911, 0.8211470958202529, 3.0, 4.2343433597119375], ws=[3.537675013376896, 2.894652897706911, 0.8211470958202529, 3.0, 4.058585783954361], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-24 02:19:16,852 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:17,790 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:17,810 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:17,856 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:17,878 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:17,930 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:17,955 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:18,007 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:18,029 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:18,073 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:18,094 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:18,143 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:18,164 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:18,212 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:18,235 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:18,282 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:18,304 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:18,353 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:18,375 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:18,425 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:18,447 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:18,494 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:19,194 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 02:19:19,202 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:19,203 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:19:19,219 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:19:19,220 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:19,557 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:19,575 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 02:19:19,575 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:19,575 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 02:19:19,575 - INFO - integration_test -   Control dict from planner: {'a': 9.630718334032653e-11, 'w': -0.1259911215950832}
2026-01-24 02:19:19,575 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:19,575 - INFO - integration_test -   Planner output success: True
2026-01-24 02:19:19,577 - INFO - integration_test - Step 16 completed in 4.877s
2026-01-24 02:19:19,641 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 02:19:19,643 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.1302236  2.45420263 0.80854798 3.00000003 4.19999982]
2026-01-24 02:19:19,644 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.415m, drift=0.103m)
2026-01-24 02:19:19,644 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 02:19:19,645 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:20,648 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.130, 2.454), path_start=(0.000, 0.000), dist=3.978m
2026-01-24 02:19:20,648 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 02:19:21,613 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:21,641 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:21,641 - INFO - integration_test - Warmstart k=0: x0=3.130223596847609 , y0=2.454202633417067 , psi0=0.8085479836607445 , v0=3.0000000299998866 , spline0=4.199999822792227 , a0=0.0 , w0=0.0
2026-01-24 02:19:21,641 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:21,643 - INFO - integration_test - Dyn residual k=0: pred=[3.337388413681643, 2.671188210048589, 0.8085479836607445, 3.0000000299998866, 4.499999825792216], ws=[3.3373884116100028, 2.6711882078787417, 0.8085479836607448, 3.0, 3.9343433609543568], res=[2.0716401927245442e-09, 2.1698474128584166e-09, -2.220446049250313e-16, 2.999988657492736e-08, 0.565656464837859], res_norm=5.657e-01
2026-01-24 02:19:21,643 - INFO - integration_test - Dyn residual k=1: pred=[3.5445532263723964, 2.8881737823404166, 0.8085479836607448, 3.0, 4.234343360954357], ws=[3.5445532263723964, 2.8881737823404166, 0.8085479836607448, 3.0, 4.058585785196781], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:19:21,644 - INFO - integration_test - Dyn residual k=2: pred=[3.75171804113479, 3.1051593568020914, 0.8085479836607448, 3.0, 4.358585785196781], ws=[3.75171804113479, 3.1051593568020914, 0.8085479836607448, 3.0, 4.645454368246772], res=[0.0, 0.0, 0.0, 0.0, -0.28686858304999063], res_norm=2.869e-01
2026-01-24 02:19:21,662 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:22,934 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:22,959 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,010 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:23,044 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,119 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:23,143 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,192 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:23,216 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,264 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:23,286 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,336 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:23,359 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,408 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:23,430 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,476 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:23,499 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,547 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:23,569 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,614 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:23,636 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:23,684 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:24,637 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 02:19:24,647 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:24,647 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:19:24,660 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:19:24,661 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:24,895 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:24,911 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 02:19:24,912 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:24,912 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 02:19:24,912 - INFO - integration_test -   Control dict from planner: {'a': -4.799370288608082e-12, 'w': -0.11543676764659078}
2026-01-24 02:19:24,912 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:24,912 - INFO - integration_test -   Planner output success: True
2026-01-24 02:19:24,913 - INFO - integration_test - Step 17 completed in 5.270s
2026-01-24 02:19:24,970 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 02:19:24,972 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.3386362  2.66998768 0.79700431 3.00000003 4.49999983]
2026-01-24 02:19:24,972 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.407m, drift=0.403m)
2026-01-24 02:19:24,972 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 02:19:24,973 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:25,925 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.339, 2.670), path_start=(0.000, 0.000), dist=4.275m
2026-01-24 02:19:25,925 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 02:19:26,977 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:27,008 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:27,008 - INFO - integration_test - Warmstart k=0: x0=3.3386362044768334 , y0=2.6699876823967066 , psi0=0.7970043068960855 , v0=3.0000000299994065 , spline0=4.499999825792168 , a0=0.0 , w0=0.0
2026-01-24 02:19:27,008 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:27,009 - INFO - integration_test - Dyn residual k=0: pred=[3.5482919741668857, 2.884567411252058, 0.7970043068960855, 3.0000000299994065, 4.799999828792108], ws=[3.54829197207037, 2.884567409106303, 0.7970043068960857, 3.0, 4.05858578643918], res=[2.0965158498142955e-09, 2.145754685045631e-09, -2.220446049250313e-16, 2.999940651449151e-08, 0.7414140423529281], res_norm=7.414e-01
2026-01-24 02:19:27,010 - INFO - integration_test - Dyn residual k=1: pred=[3.757947739663906, 3.0991471358158997, 0.7970043068960857, 3.0, 4.35858578643918], ws=[3.757947739663906, 3.0991471358158997, 0.7970043068960857, 3.0, 4.6454543712467125], res=[0.0, 0.0, 0.0, 0.0, -0.2868685848075323], res_norm=2.869e-01
2026-01-24 02:19:27,011 - INFO - integration_test - Dyn residual k=2: pred=[3.967603507257442, 3.3137268625254963, 0.7970043068960857, 3.0, 4.945454371246712], ws=[3.967603507257442, 3.3137268625254963, 0.7970043068960857, 3.0, 5.0464644722568135], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:19:27,030 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,144 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:28,167 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,219 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:28,243 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,292 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:28,316 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,368 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:28,392 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,444 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:28,467 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,515 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:28,539 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,588 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:28,611 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,660 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:28,681 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,731 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:28,755 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,805 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:28,829 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:28,876 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:29,570 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 02:19:29,581 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:29,581 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:19:29,771 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:19:29,772 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:30,065 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:30,086 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 02:19:30,086 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:30,086 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 02:19:30,086 - INFO - integration_test -   Control dict from planner: {'a': -7.874416593999673e-07, 'w': -0.12312565396211998}
2026-01-24 02:19:30,086 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:30,086 - INFO - integration_test -   Planner output success: True
2026-01-24 02:19:30,088 - INFO - integration_test - Step 18 completed in 5.116s
2026-01-24 02:19:30,146 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 02:19:30,148 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54960767 2.8832713  0.78469174 2.99999995 4.79999982]
2026-01-24 02:19:30,148 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.357m, drift=0.293m)
2026-01-24 02:19:30,149 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-24 02:19:30,149 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:31,121 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.550, 2.883), path_start=(0.000, 0.000), dist=4.573m
2026-01-24 02:19:31,121 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 02:19:32,105 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:32,134 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:32,134 - INFO - integration_test - Warmstart k=0: x0=3.549607670940839 , y0=2.8832713029313264 , psi0=0.7846917414998735 , v0=2.9999999512552407 , spline0=4.799999820917692 , a0=0.0 , w0=0.0
2026-01-24 02:19:32,135 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:32,136 - INFO - integration_test - Dyn residual k=0: pred=[3.7618895036190527, 3.0952534262108453, 0.7846917414998735, 2.9999999512552407, 5.099999816043216], ws=[3.7618895036190527, 3.0952534262108453, 0.7846917414998735, 2.9999999512552407, 4.645454361497761], res=[0.0, 0.0, 0.0, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:19:32,136 - INFO - integration_test - Dyn residual k=1: pred=[3.9741713362972666, 3.3072355494903642, 0.7846917414998735, 2.9999999512552407, 4.9454543566232845], ws=[3.9741713362972666, 3.3072355494903642, 0.7846917414998735, 2.9999999512552407, 5.046464457633386], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:19:32,137 - INFO - integration_test - Dyn residual k=2: pred=[4.186453168975481, 3.519217672769883, 0.7846917414998735, 2.9999999512552407, 5.34646445275891], ws=[4.186453168975481, 3.519217672769883, 0.7846917414998735, 2.9999999512552407, 5.144444250738708], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:19:32,156 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,237 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:33,260 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,308 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:33,332 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,382 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:33,405 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,454 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:33,476 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,526 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:33,550 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,597 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:33,646 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,720 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:33,743 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,790 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:33,811 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,861 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:33,883 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:33,931 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:33,954 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:34,007 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:34,619 - INFO - integration_test - Step 19: MPC solve successful
2026-01-24 02:19:34,627 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:34,628 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:19:34,848 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:19:34,849 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:35,166 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:35,185 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-24 02:19:35,185 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:35,185 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 02:19:35,185 - INFO - integration_test -   Control dict from planner: {'a': 7.860417313665531e-07, 'w': 0.7430778180983305}
2026-01-24 02:19:35,185 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:35,185 - INFO - integration_test -   Planner output success: True
2026-01-24 02:19:35,187 - INFO - integration_test - Step 19 completed in 5.039s
2026-01-24 02:19:35,252 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 02:19:35,254 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.75382187 3.10294187 0.85899952 3.00000003 5.09999982]
2026-01-24 02:19:35,255 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.327m, drift=0.184m)
2026-01-24 02:19:35,255 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-24 02:19:35,256 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:36,248 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.754, 3.103), path_start=(0.000, 0.000), dist=4.870m
2026-01-24 02:19:36,248 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 02:19:37,182 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:37,208 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:37,208 - INFO - integration_test - Warmstart k=0: x0=3.7538218674845845 , y0=3.1029418711505974 , psi0=0.8589995233097065 , v0=3.0000000298594136 , spline0=5.099999823903633 , a0=0.0 , w0=0.0
2026-01-24 02:19:37,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:37,209 - INFO - integration_test - Dyn residual k=0: pred=[3.9497804730330457, 3.330098703984363, 0.8589995233097065, 3.0000000298594136, 5.399999826889574], ws=[3.9497804710826427, 3.33009870172344, 0.8589995233097065, 3.0, 5.046464470368279], res=[1.9504029502570575e-09, 2.260923004371307e-09, 0.0, 2.985941360833522e-08, 0.3535353565212951], res_norm=3.535e-01
2026-01-24 02:19:37,210 - INFO - integration_test - Dyn residual k=1: pred=[4.1457390746807015, 3.557255532296282, 0.8589995233097065, 3.0, 5.346464470368279], ws=[4.1457390746807015, 3.557255532296282, 0.8589995233097065, 3.0, 5.144444268348077], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:19:37,211 - INFO - integration_test - Dyn residual k=2: pred=[4.34169767827876, 3.7844123628691246, 0.8589995233097065, 3.0, 5.444444268348077], ws=[4.34169767827876, 3.7844123628691246, 0.8589995233097065, 3.0, 5.74747457137838], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:19:37,229 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,237 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:38,258 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,302 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:38,327 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,374 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:38,396 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,443 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:38,464 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,509 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:38,532 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,577 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:38,596 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,641 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:38,660 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,705 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:38,727 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,770 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:38,791 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,837 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:38,855 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:38,899 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:44,172 - WARNING - integration_test - Step 20: MPC solve failed
2026-01-24 02:19:44,172 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:19:44,189 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:44,189 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1843 scenarios available
2026-01-24 02:19:44,206 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1843 trajectory groups with 18430 total points
2026-01-24 02:19:44,207 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:44,790 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:44,809 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-24 02:19:44,810 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:44,810 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 02:19:44,810 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:19:44,810 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:44,810 - INFO - integration_test -   Planner output success: False
2026-01-24 02:19:44,810 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:19:44,811 - INFO - integration_test - Step 20 completed in 9.557s
2026-01-24 02:19:44,875 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 02:19:44,883 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.93437215 3.32978273 0.93899952 2.80000003 5.37999983]
2026-01-24 02:19:44,884 - DEBUG - integration_test - Step 21: Using propagated spline 5.3800 (close to path, dist=0.321m, drift=0.054m)
2026-01-24 02:19:44,884 - DEBUG - integration_test -   Set spline state to 5.3800
2026-01-24 02:19:44,884 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:45,779 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.934, 3.330), path_start=(0.000, 0.000), dist=5.154m
2026-01-24 02:19:45,779 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 02:19:46,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:46,685 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:46,685 - INFO - integration_test - Warmstart k=0: x0=3.934372150426596 , y0=3.32978272605646 , psi0=0.9389995233097065 , v0=2.8000000298594134 , spline0=5.379999826889574 , a0=0.0 , w0=0.0
2026-01-24 02:19:46,685 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:46,686 - INFO - integration_test - Dyn residual k=0: pred=[4.099738940567534, 3.5557336640731227, 0.9389995233097065, 2.8000000298594134, 5.659999829875516], ws=[4.099738940567534, 3.5557336640731227, 0.9389995233097066, 2.8000000298594134, 4.902424072299758], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.7575757575757578], res_norm=7.576e-01
2026-01-24 02:19:46,687 - INFO - integration_test - Dyn residual k=1: pred=[4.265105730708473, 3.7816846020897854, 0.9389995233097066, 2.8000000298594134, 5.1824240752857], ws=[4.265105730708473, 3.7816846020897854, 0.9389995233097066, 2.8000000298594134, 5.485454378316002], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:19:46,688 - INFO - integration_test - Dyn residual k=2: pred=[4.4304725208494125, 4.007635540106448, 0.9389995233097066, 2.8000000298594134, 5.765454381301944], ws=[4.4304725208494125, 4.007635540106448, 0.9389995233097066, 2.8000000298594134, 5.563434179281742], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:19:46,703 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:47,719 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:47,744 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:47,800 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:47,827 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:47,879 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:47,915 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:48,001 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:48,028 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:48,086 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:48,110 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:48,159 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:48,185 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:48,264 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:48,292 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:48,348 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:48,371 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:48,425 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:48,451 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:48,502 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:48,527 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:48,580 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:52,627 - WARNING - integration_test - Step 21: MPC solve failed
2026-01-24 02:19:52,627 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 02:19:52,640 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:19:52,640 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1841 scenarios available
2026-01-24 02:19:52,653 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1841 trajectory groups with 18410 total points
2026-01-24 02:19:52,654 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:19:52,984 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:19:53,000 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.380)
2026-01-24 02:19:53,001 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:19:53,001 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 02:19:53,001 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:19:53,001 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:19:53,001 - INFO - integration_test -   Planner output success: False
2026-01-24 02:19:53,001 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:19:53,002 - INFO - integration_test - Step 21 completed in 8.120s
2026-01-24 02:19:53,064 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-24 02:19:53,066 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.08506297 3.55373233 1.01899952 2.60000003 5.63999983]
2026-01-24 02:19:53,067 - DEBUG - integration_test - Step 22: Using propagated spline 5.6400 (close to path, dist=0.219m, drift=0.314m)
2026-01-24 02:19:53,067 - DEBUG - integration_test -   Set spline state to 5.6400
2026-01-24 02:19:53,068 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:54,177 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.085, 3.554), path_start=(0.000, 0.000), dist=5.414m
2026-01-24 02:19:54,177 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-24 02:19:55,175 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:19:55,204 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:19:55,204 - INFO - integration_test - Warmstart k=0: x0=4.085062974635065 , y0=3.5537323303105435 , psi0=1.0189995233097064 , v0=2.6000000298594133 , spline0=5.639999829875515 , a0=0.0 , w0=0.0
2026-01-24 02:19:55,204 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:19:55,205 - INFO - integration_test - Dyn residual k=0: pred=[4.221359709081881, 3.7751441676901734, 1.0189995233097064, 2.6000000298594133, 5.8999998328614565], ws=[4.221359709081881, 3.7751441676901734, 1.0189995233097067, 2.6000000298594133, 5.445454378316001], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:19:55,206 - INFO - integration_test - Dyn residual k=1: pred=[4.357656443528697, 3.9965560050698032, 1.0189995233097067, 2.6000000298594133, 5.7054543813019425], ws=[4.357656443528697, 3.9965560050698032, 1.0189995233097067, 2.6000000298594133, 5.806464482312044], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:19:55,207 - INFO - integration_test - Dyn residual k=2: pred=[4.493953177975513, 4.217967842449434, 1.0189995233097067, 2.6000000298594133, 6.066464485297985], ws=[4.493953177975513, 4.217967842449433, 1.0189995233097067, 2.6000000298594133, 5.662424081257581], res=[0.0, 8.881784197001252e-16, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:19:55,225 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,344 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:56,369 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,422 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:56,448 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,499 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:56,521 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,572 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:56,596 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,648 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:56,672 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,724 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:56,748 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,801 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:56,825 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,875 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:56,900 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:56,950 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:19:56,977 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:57,029 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:19:57,051 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:19:57,104 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:01,747 - WARNING - integration_test - Step 22: MPC solve failed
2026-01-24 02:20:01,747 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-24 02:20:01,761 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:20:01,761 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1875 scenarios available
2026-01-24 02:20:01,777 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1875 trajectory groups with 18750 total points
2026-01-24 02:20:01,778 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:20:02,168 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:20:02,196 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.640)
2026-01-24 02:20:02,196 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:20:02,196 - INFO - integration_test - === Applying control at step 22 ===
2026-01-24 02:20:02,197 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.048926369154917104}
2026-01-24 02:20:02,197 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:20:02,197 - INFO - integration_test -   Planner output success: False
2026-01-24 02:20:02,197 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.048926369154917104}
2026-01-24 02:20:02,198 - INFO - integration_test - Step 22 completed in 9.132s
2026-01-24 02:20:02,267 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-24 02:20:02,269 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.21663088 3.76631117 1.01410689 2.40000003 5.87999983]
2026-01-24 02:20:02,270 - DEBUG - integration_test - Step 23: Using propagated spline 5.8800 (close to path, dist=0.150m, drift=0.144m)
2026-01-24 02:20:02,270 - DEBUG - integration_test -   Set spline state to 5.8800
2026-01-24 02:20:02,271 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:03,276 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.217, 3.766), path_start=(0.000, 0.000), dist=5.654m
2026-01-24 02:20:03,276 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-24 02:20:04,459 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:04,487 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:20:04,487 - INFO - integration_test - Warmstart k=0: x0=4.216630880889338 , y0=3.7663111696311855 , psi0=1.0141068863942146 , v0=2.400000029859413 , spline0=5.879999832861457 , a0=0.0 , w0=0.0
2026-01-24 02:20:04,487 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:20:04,488 - INFO - integration_test - Dyn residual k=0: pred=[4.343441699344885, 3.9700733294054817, 1.0141068863942146, 2.400000029859413, 6.119999835847398], ws=[4.343441699344885, 3.9700733294054817, 1.0141068863942149, 2.400000029859413, 5.564444280291843], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-24 02:20:04,489 - INFO - integration_test - Dyn residual k=1: pred=[4.470252517800433, 4.173835489179778, 1.0141068863942149, 2.400000029859413, 5.8044442832777845], ws=[4.470252517800433, 4.173835489179778, 1.0141068863942149, 2.400000029859413, 5.905454384287885], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-24 02:20:04,490 - INFO - integration_test - Dyn residual k=2: pred=[4.597063336255981, 4.377597648954074, 1.0141068863942149, 2.400000029859413, 6.145454387273826], ws=[4.597063336255981, 4.377597648954074, 1.0141068863942149, 2.400000029859413, 6.2464644882839275], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:20:04,507 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:05,501 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:05,524 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:05,571 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:05,594 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:05,643 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:05,667 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:05,715 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:05,739 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:05,787 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:05,811 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:05,860 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:05,883 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:05,929 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:05,952 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:06,018 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:06,053 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:06,105 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:06,130 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:06,179 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:06,200 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:06,248 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:10,299 - WARNING - integration_test - Step 23: MPC solve failed
2026-01-24 02:20:10,299 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-24 02:20:10,317 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:20:10,317 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:20:10,334 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:20:10,335 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:20:10,737 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:20:10,757 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=5.880)
2026-01-24 02:20:10,757 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:20:10,757 - INFO - integration_test - === Applying control at step 23 ===
2026-01-24 02:20:10,757 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.057629371352622805}
2026-01-24 02:20:10,757 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:20:10,757 - INFO - integration_test -   Planner output success: False
2026-01-24 02:20:10,757 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.057629371352622805}
2026-01-24 02:20:10,759 - INFO - integration_test - Step 23 completed in 8.490s
2026-01-24 02:20:10,830 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-24 02:20:10,831 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.33871177 3.96123708 1.00834395 2.20000003 6.09999984]
2026-01-24 02:20:10,832 - DEBUG - integration_test - Step 24: Using propagated spline 6.1000 (close to path, dist=0.148m, drift=0.364m)
2026-01-24 02:20:10,832 - DEBUG - integration_test -   Set spline state to 6.1000
2026-01-24 02:20:10,833 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:11,790 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.339, 3.961), path_start=(0.000, 0.000), dist=5.875m
2026-01-24 02:20:11,790 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-24 02:20:12,742 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:12,770 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:20:12,770 - INFO - integration_test - Warmstart k=0: x0=4.3387117714285734 , y0=3.9612370817722224 , psi0=1.0083439492589523 , v0=2.200000029859413 , spline0=6.099999835847398 , a0=0.0 , w0=0.0
2026-01-24 02:20:12,770 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:20:12,771 - INFO - integration_test - Dyn residual k=0: pred=[4.4560294983637565, 4.147346061299208, 1.0083439492589523, 2.200000029859413, 6.319999838833339], ws=[4.4560294983637565, 4.147346061299208, 1.0083439492589523, 2.200000029859413, 5.865454384287884], res=[0.0, 0.0, 0.0, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:20:12,772 - INFO - integration_test - Dyn residual k=1: pred=[4.5733472252989396, 4.333455040826194, 1.0083439492589523, 2.200000029859413, 6.085454387273825], ws=[4.5733472252989396, 4.333455040826194, 1.0083439492589523, 2.200000029859413, 6.186464488283926], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:20:12,773 - INFO - integration_test - Dyn residual k=2: pred=[4.690664952234123, 4.5195640203531795, 1.0083439492589523, 2.200000029859413, 6.406464491269867], ws=[4.690664952234123, 4.5195640203531795, 1.0083439492589523, 2.200000029859413, 6.305454390259766], res=[0.0, 0.0, 0.0, 0.0, 0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:20:12,791 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:13,805 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:13,827 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:13,873 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:13,896 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:13,940 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:13,963 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:14,014 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:14,035 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:14,080 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:14,100 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:14,149 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:14,171 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:14,218 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:14,238 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:14,283 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:14,303 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:14,348 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:14,369 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:14,414 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:14,434 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:14,476 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:15,062 - INFO - integration_test - Step 24: MPC solve successful
2026-01-24 02:20:15,072 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:20:15,072 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:20:15,307 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:20:15,307 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:20:15,691 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:20:15,716 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.100)
2026-01-24 02:20:15,716 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:20:15,717 - INFO - integration_test - === Applying control at step 24 ===
2026-01-24 02:20:15,717 - INFO - integration_test -   Control dict from planner: {'a': 1.9999703780579872, 'w': 0.7999999135431973}
2026-01-24 02:20:15,717 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:20:15,717 - INFO - integration_test -   Planner output success: True
2026-01-24 02:20:15,718 - INFO - integration_test - Step 24 completed in 4.887s
2026-01-24 02:20:15,788 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-24 02:20:15,790 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.45333716 4.16056787 1.08834394 2.39999707 6.33999954]
2026-01-24 02:20:15,790 - DEBUG - integration_test - Step 25: Using propagated spline 6.3400 (close to path, dist=0.060m, drift=0.195m)
2026-01-24 02:20:15,791 - DEBUG - integration_test -   Set spline state to 6.3400
2026-01-24 02:20:15,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:16,799 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.453, 4.161), path_start=(0.000, 0.000), dist=6.094m
2026-01-24 02:20:16,799 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-24 02:20:17,851 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:17,878 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:20:17,878 - INFO - integration_test - Warmstart k=0: x0=4.453337162571145 , y0=4.160567874543875 , psi0=1.088343940613272 , v0=2.3999970676652116 , spline0=6.339999542613919 , a0=0.0 , w0=0.0
2026-01-24 02:20:17,878 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:20:17,879 - INFO - integration_test - Dyn residual k=0: pred=[4.564685755845673, 4.3731739657637645, 1.088343940613272, 2.3999970676652116, 6.57999924938044], ws=[4.564685755845673, 4.3731739657637645, 1.0883439406132718, 2.3999970676652116, 5.721413390794581], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.858585858585859], res_norm=8.586e-01
2026-01-24 02:20:17,880 - INFO - integration_test - Dyn residual k=1: pred=[4.676034349120201, 4.585780056983654, 1.0883439406132718, 2.3999970676652116, 5.961413097561102], ws=[4.676034349120201, 4.585780056983654, 1.0883439406132718, 2.3999970676652116, 6.062423198571203], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:20:17,881 - INFO - integration_test - Dyn residual k=2: pred=[4.7873829423947285, 4.7983861482035435, 1.0883439406132718, 2.3999970676652116, 6.302422905337724], ws=[4.7873829423947285, 4.7983861482035435, 1.0883439406132718, 2.3999970676652116, 6.403433006347825], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:20:17,900 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:18,951 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:18,988 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,045 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:19,070 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,118 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:19,146 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,205 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:19,229 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,280 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:19,304 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,354 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:19,378 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,429 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:19,453 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,504 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:19,531 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,587 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:19,613 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,670 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:19,695 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:19,750 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:26,469 - WARNING - integration_test - Step 25: MPC solve failed
2026-01-24 02:20:26,469 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:20:26,495 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:20:26,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:20:26,773 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:20:26,774 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:20:27,276 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:20:27,304 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.340)
2026-01-24 02:20:27,305 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:20:27,305 - INFO - integration_test - === Applying control at step 25 ===
2026-01-24 02:20:27,305 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-24 02:20:27,305 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:20:27,305 - INFO - integration_test -   Planner output success: False
2026-01-24 02:20:27,305 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-24 02:20:27,307 - INFO - integration_test - Step 25 completed in 11.517s
2026-01-24 02:20:27,377 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-24 02:20:27,379 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[4.56796248 4.35989854 1.00834394 2.19999707 6.55999925]
2026-01-24 02:20:27,380 - DEBUG - integration_test - Step 26: Using propagated spline 6.5600 (close to path, dist=0.189m, drift=0.415m)
2026-01-24 02:20:27,380 - DEBUG - integration_test -   Set spline state to 6.5600
2026-01-24 02:20:27,381 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:28,590 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(4.568, 4.360), path_start=(0.000, 0.000), dist=6.315m
2026-01-24 02:20:28,591 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-24 02:20:29,682 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:29,714 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:20:29,714 - INFO - integration_test - Warmstart k=0: x0=4.567962478957347 , y0=4.359898539483534 , psi0=1.008343940613272 , v0=2.1999970676652114 , spline0=6.55999924938044 , a0=0.0 , w0=0.0
2026-01-24 02:20:29,715 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:20:29,716 - INFO - integration_test - Dyn residual k=0: pred=[4.685280049538891, 4.546007267409442, 1.008343940613272, 2.1999970676652114, 6.779998956146962], ws=[4.685280049538891, 4.546007267409442, 1.0083439406132717, 2.1999970676652114, 6.3254535016015065], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:20:29,717 - INFO - integration_test - Dyn residual k=1: pred=[4.802597620120435, 4.7321159953353495, 1.0083439406132717, 2.1999970676652114, 6.545453208368028], ws=[4.552272568823531, 4.592319767712637, 1.0083439406132717, 2.1999970676652114, 6.040402703317524], res=[0.25032505129690374, 0.13979622762271227, 0.0, 0.0, 0.5050505050505043], res_norm=5.808e-01
2026-01-24 02:20:29,718 - INFO - integration_test - Dyn residual k=2: pred=[4.6695901394050745, 4.778428495638545, 1.0083439406132717, 2.1999970676652114, 6.260402410084045], ws=[4.859527541431715, 4.594036042916, 1.0083439406132717, 2.1999970676652114, 6.361412511094145], res=[-0.1899374020266409, 0.18439245272254556, 0.0, 0.0, -0.10101010101010033], res_norm=2.833e-01
2026-01-24 02:20:29,739 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:30,900 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:30,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,023 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:31,051 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,103 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:31,126 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,178 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:31,204 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,253 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:31,276 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,326 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:31,349 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,400 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:31,427 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,482 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:31,510 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,585 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:31,619 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,678 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:31,702 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:31,756 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:37,219 - WARNING - integration_test - Step 26: MPC solve failed
2026-01-24 02:20:37,219 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 02:20:37,237 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:20:37,237 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:20:37,252 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:20:37,253 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:20:37,797 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:20:37,830 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.560)
2026-01-24 02:20:37,830 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:20:37,831 - INFO - integration_test - === Applying control at step 26 ===
2026-01-24 02:20:37,831 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-24 02:20:37,831 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:20:37,831 - INFO - integration_test -   Planner output success: False
2026-01-24 02:20:37,831 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-24 02:20:37,833 - INFO - integration_test - Step 26 completed in 10.454s
2026-01-24 02:20:37,914 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-24 02:20:37,917 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[4.68682036 4.53295686 0.92834394 1.99999707 6.75999896]
2026-01-24 02:20:37,917 - DEBUG - integration_test - Step 27: Using propagated spline 6.7600 (close to path, dist=0.164m, drift=0.205m)
2026-01-24 02:20:37,917 - DEBUG - integration_test -   Set spline state to 6.7600
2026-01-24 02:20:37,919 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:39,220 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(4.687, 4.533), path_start=(0.000, 0.000), dist=6.520m
2026-01-24 02:20:39,220 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-24 02:20:40,208 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:40,236 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:20:40,236 - INFO - integration_test - Warmstart k=0: x0=4.686820364511553 , y0=4.532956864878672 , psi0=0.928343940613272 , v0=1.9999970676652115 , spline0=6.759998956146961 , a0=0.0 , w0=0.0
2026-01-24 02:20:40,236 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:20:40,237 - INFO - integration_test - Dyn residual k=0: pred=[4.806652327241331, 4.693082388812316, 0.928343940613272, 1.9999970676652115, 6.959998662913482], ws=[4.653614382210339, 4.5639374684953635, 0.9283439406132716, 1.9999970676652115, 6.303433006347825], res=[0.15303794503099155, 0.12914492031695257, 3.3306690738754696e-16, 0.0, 0.6565656565656566], res_norm=6.864e-01
2026-01-24 02:20:40,238 - INFO - integration_test - Dyn residual k=1: pred=[4.773446344940116, 4.7240629924290065, 0.9283439406132716, 1.9999970676652115, 6.503432713114346], ws=[4.828448000836915, 4.776168155428286, 0.9283439406132716, 1.9999970676652115, 6.402422612104245], res=[-0.05500165589679895, -0.05210516299927992, 0.0, 0.0, 0.10101010101010122], res_norm=1.263e-01
2026-01-24 02:20:40,239 - INFO - integration_test - Dyn residual k=2: pred=[4.9482799635666925, 4.936293679361929, 0.9283439406132716, 1.9999970676652115, 6.602422318870766], ws=[4.676369719887991, 4.89010170040922, 0.9283439406132716, 1.9999970676652115, 6.4004021168505645], res=[0.2719102436787013, 0.046191978952709434, 0.0, 0.0, 0.20202020202020154], res_norm=3.419e-01
2026-01-24 02:20:40,257 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,304 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:41,329 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,379 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:41,403 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,452 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:41,474 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,525 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:41,549 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,595 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:41,618 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,665 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:41,686 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,734 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:41,757 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,804 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:41,827 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,874 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:41,896 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:41,945 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:41,967 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:42,016 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:47,548 - WARNING - integration_test - Step 27: MPC solve failed
2026-01-24 02:20:47,549 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-24 02:20:47,566 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:20:47,566 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:20:47,583 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:20:47,584 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:20:48,163 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:20:48,188 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=6.760)
2026-01-24 02:20:48,188 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:20:48,188 - INFO - integration_test - === Applying control at step 27 ===
2026-01-24 02:20:48,188 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-24 02:20:48,188 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:20:48,188 - INFO - integration_test -   Planner output success: False
2026-01-24 02:20:48,188 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-24 02:20:48,190 - INFO - integration_test - Step 27 completed in 10.273s
2026-01-24 02:20:48,274 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-24 02:20:48,277 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[4.80651741 4.68044678 0.84834394 1.79999707 6.93999866]
2026-01-24 02:20:48,278 - DEBUG - integration_test - Step 28: Using propagated spline 6.9400 (close to path, dist=0.238m, drift=0.385m)
2026-01-24 02:20:48,278 - DEBUG - integration_test -   Set spline state to 6.9400
2026-01-24 02:20:48,279 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:49,315 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(4.807, 4.680), path_start=(0.000, 0.000), dist=6.709m
2026-01-24 02:20:49,315 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-24 02:20:50,281 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:20:50,306 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:20:50,306 - INFO - integration_test - Warmstart k=0: x0=4.806517413229568 , y0=4.680446778863797 , psi0=0.848343940613272 , v0=1.7999970676652115 , spline0=6.939998662913482 , a0=0.0 , w0=0.0
2026-01-24 02:20:50,306 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:20:50,307 - INFO - integration_test - Dyn residual k=0: pred=[4.925537972284596, 4.815480111631164, 0.848343940613272, 1.7999970676652115, 7.119998369680004], ws=[4.737756408732322, 4.818584934378977, 0.848343940613272, 1.7999970676652115, 6.362422612104246], res=[0.18778156355227438, -0.0031048227478134294, 0.0, 0.0, 0.7575757575757578], res_norm=7.805e-01
2026-01-24 02:20:50,308 - INFO - integration_test - Dyn residual k=1: pred=[4.85677696778735, 4.953618267146344, 0.848343940613272, 1.7999970676652115, 6.542422318870767], ws=[4.510943592910752, 4.525628799619928, 0.848343940613272, 1.7999970676652115, 6.2393920158404645], res=[0.34583337487659804, 0.427989467526416, 0.0, 0.0, 0.30303030303030276], res_norm=6.282e-01
2026-01-24 02:20:50,308 - INFO - integration_test - Dyn residual k=2: pred=[4.62996415196578, 4.660662132387294, 0.848343940613272, 1.7999970676652115, 6.419391722606986], ws=[4.8122350932849205, 4.774298721375467, 0.848343940613272, 1.7999970676652115, 6.621411924627187], res=[-0.1822709413191408, -0.11363658898817253, 0.0, 0.0, -0.20202020202020154], res_norm=2.949e-01
2026-01-24 02:20:50,325 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,269 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:51,290 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,339 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:51,362 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,409 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:51,433 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,478 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:51,502 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,554 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:51,576 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,624 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:51,647 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,694 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:51,716 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,766 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:51,789 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,840 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:20:51,863 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,914 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:51,937 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:20:51,985 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:20:57,579 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-24 02:20:57,579 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-24 02:20:57,600 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:20:57,600 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:20:57,617 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:20:57,618 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:20:58,375 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:20:58,408 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=6.940)
2026-01-24 02:20:58,408 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:20:58,408 - INFO - integration_test - === Applying control at step 28 ===
2026-01-24 02:20:58,408 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.7962078679846396}
2026-01-24 02:20:58,408 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:20:58,408 - INFO - integration_test -   Planner output success: False
2026-01-24 02:20:58,408 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.7962078679846396}
2026-01-24 02:20:58,411 - INFO - integration_test - Step 28 completed in 10.134s
2026-01-24 02:20:58,488 - WARNING - integration_test - Test timeout reached (180.0s) at step 29. Terminating test early.
2026-01-24 02:20:58,491 - INFO - integration_test - Saving test results...
2026-01-24 02:20:58,492 - INFO - integration_test - Saved 30 vehicle states to test_outputs/20260124_021756_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-24 02:20:58,493 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_021756_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-24 02:20:58,493 - INFO - integration_test - Saved 40 states for obstacle 0 to test_outputs/20260124_021756_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-24 02:20:58,493 - INFO - integration_test - Saved 40 states for obstacle 1 to test_outputs/20260124_021756_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-24 02:20:58,493 - INFO - integration_test - Saved state history: 30 vehicle states, 2 obstacles
2026-01-24 02:20:58,493 - INFO - integration_test - Creating animation...
2026-01-24 02:20:58,546 - DEBUG - integration_test - Creating animation with 30 frames (range: 0 to 29)
2026-01-24 02:20:58,547 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:20:59,577 - INFO - integration_test - Frame 0: Safe Horizon module has 1866 scenarios after update
2026-01-24 02:20:59,577 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:20:59,577 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:20:59,579 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:20:59,579 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:20:59,596 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:20:59,597 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:20:59,930 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:20:59,936 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:20:59,937 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:21:00,937 - INFO - integration_test - Frame 0: Safe Horizon module has 1853 scenarios after update
2026-01-24 02:21:00,937 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:21:00,937 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:21:00,939 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:00,939 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:21:00,957 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:21:00,958 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:01,012 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:21:01,018 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:21:01,159 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 02:21:02,132 - INFO - integration_test - Frame 1: Safe Horizon module has 1858 scenarios after update
2026-01-24 02:21:02,132 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-24 02:21:02,132 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:21:02,134 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:02,134 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:21:02,152 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:21:02,153 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:02,208 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:02,217 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-24 02:21:02,332 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 02:21:03,547 - INFO - integration_test - Frame 2: Safe Horizon module has 1866 scenarios after update
2026-01-24 02:21:03,547 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-24 02:21:03,547 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:21:03,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:03,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:21:03,565 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:21:03,566 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:03,615 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:03,623 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-24 02:21:04,660 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:04,660 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:21:04,675 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:21:04,676 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:04,725 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:05,724 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:05,724 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:21:06,013 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:21:06,014 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:06,069 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:07,211 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:07,211 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1845 scenarios available
2026-01-24 02:21:07,233 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1845 trajectory groups with 18450 total points
2026-01-24 02:21:07,234 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:07,302 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:08,442 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:08,442 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:21:08,738 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:21:08,739 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:08,790 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:09,892 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:09,892 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1844 scenarios available
2026-01-24 02:21:09,912 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1844 trajectory groups with 18440 total points
2026-01-24 02:21:09,913 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:09,968 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:11,084 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:11,084 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:21:11,105 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:21:11,106 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:11,434 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:12,469 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:12,469 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:21:12,486 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:21:12,487 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:12,534 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:13,588 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:13,589 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:21:13,608 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:21:13,609 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:13,668 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:14,812 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:14,812 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:21:15,137 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:21:15,138 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:15,207 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:16,304 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:16,305 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:21:16,323 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:21:16,325 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:16,382 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:17,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:17,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:21:17,824 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:21:17,825 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:17,876 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:18,968 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:18,968 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:21:18,988 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:21:18,989 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:19,038 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:20,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:20,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:21:20,398 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:21:20,399 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:20,453 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:21,599 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:21,599 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:21:21,621 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:21:21,623 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:21,678 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:22,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:22,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:21:23,014 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:21:23,015 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:23,361 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:24,428 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:24,428 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:21:24,445 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:21:24,446 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:24,492 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:25,529 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:25,529 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:21:25,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:21:25,551 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:25,610 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:26,782 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:26,782 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:21:27,075 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:21:27,077 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:27,131 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:28,242 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:28,242 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:21:28,262 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:21:28,264 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:28,325 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:29,452 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:29,452 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:21:29,751 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:21:29,753 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:29,805 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:30,940 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:30,940 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:21:30,960 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:21:30,961 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:31,016 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:32,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:32,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1871 scenarios available
2026-01-24 02:21:32,396 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1871 trajectory groups with 18710 total points
2026-01-24 02:21:32,397 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:32,448 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:33,491 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:33,491 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:21:33,511 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:21:33,512 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:33,559 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:34,644 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:34,644 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:21:34,664 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:21:34,665 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:34,720 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:35,858 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:35,858 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1876 scenarios available
2026-01-24 02:21:36,154 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1876 trajectory groups with 18760 total points
2026-01-24 02:21:36,155 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:36,208 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:37,290 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:37,290 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:21:37,311 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:21:37,312 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:37,416 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:38,554 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:21:38,554 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:21:38,852 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:21:38,853 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:21:38,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:21:40,855 - INFO - integration_test - Saved animation with 30 frames at 10.00 fps to test_outputs/20260124_021756_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 3.00s, size: 500146 bytes)
2026-01-24 02:21:40,876 - INFO - integration_test - Animation created successfully
2026-01-24 02:21:40,877 - INFO - integration_test - Test completed successfully
