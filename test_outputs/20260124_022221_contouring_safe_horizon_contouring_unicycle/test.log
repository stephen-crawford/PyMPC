2026-01-24 02:22:21,450 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 02:22:21,450 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 02:22:21,450 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 02:22:21,450 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 02:22:21,450 - INFO - integration_test - Creating objective module: contouring
2026-01-24 02:22:21,457 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 02:22:21,457 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-24 02:22:21,457 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-24 02:22:21,468 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-24 02:22:21,468 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 02:22:21,475 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 02:22:21,475 - INFO - integration_test - Created 2 constraint module(s)
2026-01-24 02:22:21,495 - INFO - integration_test - Setting solver on all modules...
2026-01-24 02:22:21,495 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-24 02:22:21,495 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 02:22:21,495 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 02:22:21,495 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 02:22:21,495 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 02:22:21,495 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 02:22:21,495 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 02:22:21,495 - INFO - integration_test - Obstacle 0: s=8.03, pos=(6.24, 5.59), lateral_offset=0.00m, vel=(0.47, 0.37)
2026-01-24 02:22:21,495 - INFO - integration_test - Obstacle 1: s=17.06, pos=(13.71, 10.71), lateral_offset=0.00m, vel=(-0.69, -0.41)
2026-01-24 02:22:21,496 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 02:22:21,496 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 02:22:21,496 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 02:22:21,497 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 02:22:21,497 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 02:22:21,497 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 02:22:21,497 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 02:22:21,497 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 02:22:21,497 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 02:22:21,497 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 02:22:21,498 - INFO - integration_test - Auto-calculated timeout: 180s for 100 steps
2026-01-24 02:22:21,498 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 02:22:21,498 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 02:22:21,498 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 02:22:21,498 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 02:22:21,499 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:22,660 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 02:22:22,660 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 02:22:23,727 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:23,759 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:22:23,759 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 02:22:23,760 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:22:23,761 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 02:22:23,762 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-24 02:22:23,763 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-24 02:22:23,781 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:24,822 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:24,843 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:24,894 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:24,917 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:24,965 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:24,989 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:25,038 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:25,061 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:25,111 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:25,134 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:25,184 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:25,208 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:25,257 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:25,280 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:25,330 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:25,353 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:25,402 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:25,426 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:25,475 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:25,497 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:25,549 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:26,677 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 02:22:26,866 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:22:26,866 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 02:22:26,937 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 02:22:26,939 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:22:27,021 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:22:27,032 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 02:22:27,033 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:22:27,033 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 02:22:27,033 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 02:22:27,033 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000184502618, 'w': 0.7999999763694126}
2026-01-24 02:22:27,033 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:22:27,033 - INFO - integration_test -   Planner output success: True
2026-01-24 02:22:27,034 - INFO - integration_test - Step 0 completed in 5.537s
2026-01-24 02:22:27,098 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 02:22:27,101 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.08       1.2        0.12      ]
2026-01-24 02:22:27,102 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 02:22:27,102 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 02:22:27,103 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:28,117 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 02:22:28,117 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 02:22:29,088 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:29,114 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:22:29,115 - INFO - integration_test - Warmstart k=0: x0=0.10987737538053628 , y0=0.004530844924300549 , psi0=0.07999999763694125 , v0=1.200000001845026 , spline0=0.12000000018450262 , a0=0.0 , w0=0.0
2026-01-24 02:22:29,115 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:22:29,116 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803434243, 0.01412060793268562, 0.07999999763694125, 1.200000001845026, 0.24000000036900523], ws=[0.2294935803434243, 0.01412060793268562, 0.07999999763694143, 1.200000001845026, 0.052929292933020254], res=[0.0, 0.0, -1.8041124150158794e-16, 0.0, 0.18707070743598497], res_norm=1.871e-01
2026-01-24 02:22:29,116 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097853063123, 0.023710370941070716, 0.07999999763694143, 1.200000001845026, 0.17292929311752286], ws=[0.3491097853063123, 0.023710370941070716, 0.07999999763694143, 1.200000001845026, 0.10828282829401026], res=[0.0, 0.0, 0.0, 0.0, 0.0646464648235126], res_norm=6.465e-02
2026-01-24 02:22:29,117 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259902692003, 0.03330013394945581, 0.07999999763694143, 1.200000001845026, 0.2282828284785129], ws=[0.4687259902692003, 0.03330013394945581, 0.07999999763694143, 1.200000001845026, 0.16606060608297002], res=[0.0, 0.0, 0.0, 0.0, 0.06222222239554287], res_norm=6.222e-02
2026-01-24 02:22:29,134 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,112 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:30,133 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,180 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:30,202 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,245 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:30,266 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,332 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:30,366 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,415 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:30,437 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,483 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:30,503 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,549 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:30,569 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,614 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:30,634 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,679 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:30,702 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,746 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:30,766 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:30,811 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:31,376 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 02:22:31,379 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:22:31,379 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:22:31,447 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:22:31,448 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:22:31,527 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:22:31,538 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 02:22:31,538 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:22:31,538 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 02:22:31,538 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000189294815, 'w': 0.8000000027459401}
2026-01-24 02:22:31,538 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:22:31,538 - INFO - integration_test -   Planner output success: True
2026-01-24 02:22:31,540 - INFO - integration_test - Step 1 completed in 4.439s
2026-01-24 02:22:31,593 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 02:22:31,594 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-24 02:22:31,595 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 02:22:31,595 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 02:22:31,596 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:32,564 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 02:22:32,564 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 02:22:33,561 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:33,589 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:22:33,589 - INFO - integration_test - Warmstart k=0: x0=0.23889212820423894 , y0=0.020221621337653484 , psi0=0.15999999791153524 , v0=1.4000000037379743 , spline0=0.2600000005583 , a0=0.0 , w0=0.0
2026-01-24 02:22:33,589 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:22:33,590 - INFO - integration_test - Dyn residual k=0: pred=[0.377103948292432, 0.04252617003455014, 0.15999999791153524, 1.4000000037379743, 0.4000000009320974], ws=[0.377103948292432, 0.04252617003455014, 0.15999999791153519, 1.4000000037379743, 0.10909090910973934], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, 0.2909090918223581], res_norm=2.909e-01
2026-01-24 02:22:33,591 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157683806251, 0.06483071873144679, 0.15999999791153519, 1.4000000037379743, 0.24909090948353677], ws=[0.5153157683806251, 0.06483071873144679, 0.15999999791153519, 1.4000000037379743, 0.16787878791836044], res=[0.0, 0.0, 0.0, 0.0, 0.08121212156517632], res_norm=8.121e-02
2026-01-24 02:22:33,592 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275884688181, 0.08713526742834343, 0.15999999791153519, 1.4000000037379743, 0.30787878829215787], ws=[0.6535275884688182, 0.08713526742834343, 0.15999999791153519, 1.4000000037379743, 0.4589898991256317], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, -0.15111111083347384], res_norm=1.511e-01
2026-01-24 02:22:33,610 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:34,684 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:34,708 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:34,759 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:34,782 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:34,830 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:34,852 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:34,903 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:34,929 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:34,979 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:35,002 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:35,050 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:35,073 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:35,122 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:35,145 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:35,192 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:35,214 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:35,262 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:35,291 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:35,371 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:35,398 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:35,449 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:36,063 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 02:22:36,066 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:22:36,066 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:22:36,150 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:22:36,151 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:22:36,245 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:22:36,255 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 02:22:36,255 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:22:36,255 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 02:22:36,255 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000149278545, 'w': 0.7999999723883023}
2026-01-24 02:22:36,256 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:22:36,256 - INFO - integration_test -   Planner output success: True
2026-01-24 02:22:36,257 - INFO - integration_test - Step 2 completed in 4.663s
2026-01-24 02:22:36,319 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 02:22:36,320 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-24 02:22:36,320 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 02:22:36,320 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 02:22:36,321 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:37,290 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 02:22:37,291 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 02:22:38,217 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:38,243 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:22:38,244 - INFO - integration_test - Warmstart k=0: x0=0.3858364358097885 , y0=0.050144715519208925 , psi0=0.23999999515036546 , v0=1.6000000052307597 , spline0=0.42000000108137603 , a0=0.0 , w0=0.0
2026-01-24 02:22:38,244 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:22:38,244 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505124786401, 0.08817713511818552, 0.23999999515036546, 1.6000000052307597, 0.580000001604452], ws=[0.5412505124786402, 0.08817713511818552, 0.2399999951503653, 1.6000000052307597, 0.16909090913952884], res=[-1.1102230246251565e-16, 0.0, 1.6653345369377348e-16, 0.0, 0.41090909246492313], res_norm=4.109e-01
2026-01-24 02:22:38,245 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645891474919, 0.12620955471716208, 0.2399999951503653, 1.6000000052307597, 0.3290909096626048], ws=[0.6966645891474919, 0.12620955471716208, 0.2399999951503653, 1.6000000052307597, 0.23191919200515262], res=[0.0, 0.0, 0.0, 0.0, 0.09717171765745217], res_norm=9.717e-02
2026-01-24 02:22:38,246 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786658163435, 0.16424197431613863, 0.2399999951503653, 1.6000000052307597, 0.3919191925282286], ws=[0.8520786658163435, 0.16424197431613866, 0.2399999951503653, 1.6000000052307597, 0.2979797981136668], res=[0.0, -2.7755575615628914e-17, 0.0, 0.0, 0.09393939441456178], res_norm=9.394e-02
2026-01-24 02:22:38,260 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,335 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:39,359 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,415 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:39,439 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,487 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:39,510 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,560 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:39,584 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,634 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:39,657 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,709 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:39,733 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,783 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:39,807 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,858 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:39,883 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:39,940 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:39,966 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:40,020 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:40,044 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:40,096 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:40,760 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 02:22:40,763 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:22:40,763 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:22:40,776 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:22:40,777 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:22:40,940 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:22:40,952 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 02:22:40,953 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:22:40,953 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 02:22:40,953 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018015498, 'w': 0.7999999947004245}
2026-01-24 02:22:40,953 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:22:40,953 - INFO - integration_test -   Planner output success: True
2026-01-24 02:22:40,955 - INFO - integration_test - Step 3 completed in 4.635s
2026-01-24 02:22:41,024 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 02:22:41,026 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.31999999 1.80000001 0.6       ]
2026-01-24 02:22:41,026 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 02:22:41,026 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 02:22:41,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:42,015 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 02:22:42,015 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 02:22:43,061 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:43,094 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:22:43,094 - INFO - integration_test - Warmstart k=0: x0=0.5491354615206877 , y0=0.09724075521434586 , psi0=0.3199999946204079 , v0=1.8000000070323094 , spline0=0.600000001784607 , a0=0.0 , w0=0.0
2026-01-24 02:22:43,094 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:22:43,095 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978377476619, 0.15386273542729012, 0.3199999946204079, 1.8000000070323094, 0.780000002487838], ws=[0.7199978377476619, 0.15386273542729012, 0.31999999462040796, 1.8000000070323094, 0.23353535363587224], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.5464646488519658], res_norm=5.465e-01
2026-01-24 02:22:43,096 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602139746361, 0.21048471564023438, 0.31999999462040796, 1.8000000070323094, 0.4135353543391032], ws=[0.8908602139746361, 0.21048471564023438, 0.31999999462040796, 1.8000000070323094, 0.3010101011712661], res=[0.0, 0.0, 0.0, 0.0, 0.11252525316783712], res_norm=1.125e-01
2026-01-24 02:22:43,098 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225902016103, 0.26710669585317864, 0.31999999462040796, 1.8000000070323094, 0.48101010187449705], ws=[1.0617225902016103, 0.26710669585317864, 0.31999999462040796, 1.8000000070323094, 0.3721212123572303], res=[0.0, 0.0, 0.0, 0.0, 0.10888888951726677], res_norm=1.089e-01
2026-01-24 02:22:43,118 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,210 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:44,232 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,281 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:44,304 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,382 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:44,414 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,465 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:44,488 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,538 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:44,560 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,610 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:44,632 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,681 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:44,703 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,748 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:44,769 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,815 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:44,836 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,880 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:44,901 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:44,952 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:45,528 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 02:22:45,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:22:45,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1873 scenarios available
2026-01-24 02:22:45,543 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1873 trajectory groups with 18730 total points
2026-01-24 02:22:45,543 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:22:45,651 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:22:45,663 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 02:22:45,663 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:22:45,663 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 02:22:45,663 - INFO - integration_test -   Control dict from planner: {'a': 2.000000010384952, 'w': 0.799999935833921}
2026-01-24 02:22:45,663 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:22:45,663 - INFO - integration_test -   Planner output success: True
2026-01-24 02:22:45,665 - INFO - integration_test - Step 4 completed in 4.639s
2026-01-24 02:22:45,719 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 02:22:45,720 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.39999999 2.00000001 0.8       ]
2026-01-24 02:22:45,720 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 02:22:45,720 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 02:22:45,721 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:46,759 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 02:22:46,759 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 02:22:47,770 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:47,799 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:22:47,799 - INFO - integration_test - Warmstart k=0: x0=0.7268614894892041 , y0=0.16427976505779684 , psi0=0.3999999882038 , v0=2.0000000080708045 , spline0=0.8000000025916875 , a0=0.0 , w0=0.0
2026-01-24 02:22:47,799 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:22:47,801 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736899518828, 0.24216343166081492, 0.3999999882038, 2.0000000080708045, 1.000000003398768], ws=[0.9110736899518828, 0.24216343166081494, 0.3999999882037999, 2.0000000080708045, 0.36363636384234954], res=[0.0, -2.7755575615628914e-17, 1.1102230246251565e-16, 0.0, 0.6363636395564184], res_norm=6.364e-01
2026-01-24 02:22:47,802 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858904145615, 0.32004709826383304, 0.3999999882037999, 2.0000000080708045, 0.56363636464943], ws=[1.0952858904145615, 0.32004709826383304, 0.3999999882037999, 2.0000000080708045, 0.8767676773624431], res=[0.0, 0.0, 0.0, 0.0, -0.3131313127130131], res_norm=3.131e-01
2026-01-24 02:22:47,803 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980908772402, 0.3979307648668511, 0.3999999882037999, 2.0000000080708045, 1.0767676781695235], ws=[1.2794980908772402, 0.3979307648668511, 0.3999999882037999, 2.0000000080708045, 0.9696969704565044], res=[0.0, 0.0, 0.0, 0.0, 0.10707070771301908], res_norm=1.071e-01
2026-01-24 02:22:47,821 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:48,924 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:48,946 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,001 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:49,027 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,082 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:49,108 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,162 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:49,188 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,241 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:49,264 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,316 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:49,341 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,389 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:49,411 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,459 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:49,481 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,534 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:49,558 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,609 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:49,631 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:49,679 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:50,318 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 02:22:50,322 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:22:50,322 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1844 scenarios available
2026-01-24 02:22:50,335 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1844 trajectory groups with 18440 total points
2026-01-24 02:22:50,336 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:22:50,541 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:22:50,553 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 02:22:50,553 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:22:50,553 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 02:22:50,553 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000195582426, 'w': 0.800000007247589}
2026-01-24 02:22:50,553 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:22:50,553 - INFO - integration_test -   Planner output success: True
2026-01-24 02:22:50,555 - INFO - integration_test - Step 5 completed in 4.835s
2026-01-24 02:22:50,617 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 02:22:50,618 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-24 02:22:50,619 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 02:22:50,619 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 02:22:50,619 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:51,576 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 02:22:51,576 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 02:22:52,633 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:52,662 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:22:52,662 - INFO - integration_test - Warmstart k=0: x0=0.9167519044823115 , y0=0.25382380289649703 , psi0=0.4799999889285589 , v0=2.2000000100266286 , spline0=1.0200000035943504 , a0=0.0 , w0=0.0
2026-01-24 02:22:52,662 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:22:52,663 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907895078742, 0.35541521981816343, 0.4799999889285589, 2.2000000100266286, 1.2400000045970132], ws=[1.1118907895078742, 0.35541521981816343, 0.4799999889285589, 2.2000000100266286, 0.6933333338441126], res=[0.0, 0.0, 0.0, 0.0, 0.5466666707529007], res_norm=5.467e-01
2026-01-24 02:22:52,664 - INFO - integration_test - Dyn residual k=1: pred=[1.307029674533437, 0.45700663673982983, 0.4799999889285589, 2.2000000100266286, 0.9133333348467754], ws=[1.307029674533437, 0.45700663673982983, 0.4799999889285589, 2.2000000100266286, 1.2397979808726651], res=[0.0, 0.0, 0.0, 0.0, -0.32646464602588976], res_norm=3.265e-01
2026-01-24 02:22:52,665 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685595589997, 0.5585980536614962, 0.4799999889285589, 2.2000000100266286, 1.459797981875328], ws=[1.502168559559, 0.5585980536614963, 0.4799999889285589, 2.2000000100266286, 1.0795959606630043], res=[-2.220446049250313e-16, -1.1102230246251565e-16, 0.0, 0.0, 0.3802020212123236], res_norm=3.802e-01
2026-01-24 02:22:52,682 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:53,744 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:53,768 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:53,818 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:53,848 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:53,911 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:53,936 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:53,985 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:54,010 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:54,060 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:54,082 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:54,135 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:54,158 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:54,210 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:54,233 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:54,283 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:54,307 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:54,358 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:54,382 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:54,428 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:54,451 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:54,509 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:55,237 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 02:22:55,242 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:22:55,242 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:22:55,363 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:22:55,363 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:22:55,500 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:22:55,512 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 02:22:55,513 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:22:55,513 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 02:22:55,513 - INFO - integration_test -   Control dict from planner: {'a': 2.000000010084816, 'w': 0.7999998908706046}
2026-01-24 02:22:55,513 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:22:55,513 - INFO - integration_test -   Planner output success: True
2026-01-24 02:22:55,514 - INFO - integration_test - Step 6 completed in 4.896s
2026-01-24 02:22:55,575 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 02:22:55,583 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819144 0.55999998 2.40000001 1.26      ]
2026-01-24 02:22:55,583 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 02:22:55,583 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 02:22:55,584 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:56,582 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 02:22:56,583 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 02:22:57,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:22:57,583 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:22:57,584 - INFO - integration_test - Warmstart k=0: x0=1.116230866469112 , y0=0.3681914389384983 , psi0=0.5599999780156193 , v0=2.40000001103511 , spline0=1.2600000046978614 , a0=0.0 , w0=0.0
2026-01-24 02:22:57,584 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:22:57,585 - INFO - integration_test - Dyn residual k=0: pred=[1.3195720968499591, 0.49567612255534915, 0.5599999780156193, 2.40000001103511, 1.5000000058013725], ws=[1.3195720968499591, 0.4956761225553492, 0.5599999780156191, 2.40000001103511, 1.2474747485881423], res=[0.0, -5.551115123125783e-17, 2.220446049250313e-16, 0.0, 0.25252525721323016], res_norm=2.525e-01
2026-01-24 02:22:57,586 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133272308062, 0.6231608061722, 0.5599999780156191, 2.40000001103511, 1.4874747496916534], ws=[1.5229133272308062, 0.6231608061722, 0.5599999780156191, 2.40000001103511, 1.3616161630110877], res=[0.0, 0.0, 0.0, 0.0, 0.1258585866805657], res_norm=1.259e-01
2026-01-24 02:22:57,587 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545576116533, 0.7506454897890509, 0.5599999780156191, 2.40000001103511, 1.6016161641145987], ws=[1.7262545576116533, 0.7506454897890509, 0.5599999780156191, 2.40000001103511, 1.1985858599610375], res=[0.0, 0.0, 0.0, 0.0, 0.4030303041535612], res_norm=4.030e-01
2026-01-24 02:22:57,606 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:58,667 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:58,716 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:58,787 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:58,812 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:58,867 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:58,893 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:58,946 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:58,969 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:59,024 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:59,047 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:59,098 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:59,122 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:59,172 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:59,195 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:59,245 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:59,267 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:59,319 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:22:59,343 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:59,396 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:22:59,419 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:22:59,466 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:00,097 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 02:23:00,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:00,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:23:00,216 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:23:00,217 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:00,343 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:00,355 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 02:23:00,355 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:00,355 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 02:23:00,355 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019541939, 'w': 0.8000000003563245}
2026-01-24 02:23:00,355 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:00,355 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:00,357 - INFO - integration_test - Step 7 completed in 4.774s
2026-01-24 02:23:00,410 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 02:23:00,411 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243449 0.50942443 0.63999998 2.60000001 1.52000001]
2026-01-24 02:23:00,411 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 02:23:00,411 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 02:23:00,412 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:01,442 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 02:23:01,442 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 02:23:02,553 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:02,580 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:02,580 - INFO - integration_test - Warmstart k=0: x0=1.3224344936623127 , y0=0.5094244310297944 , psi0=0.6399999780512517 , v0=2.600000012989304 , spline0=1.520000005996792 , a0=0.0 , w0=0.0
2026-01-24 02:23:02,580 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:02,581 - INFO - integration_test - Dyn residual k=0: pred=[1.5309793951620954, 0.6646952419824321, 0.6399999780512517, 2.600000012989304, 1.7800000072957225], ws=[1.5309793951620954, 0.6646952419824321, 0.639999978051252, 2.600000012989304, 1.369696971170853], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.4103030361248694], res_norm=4.103e-01
2026-01-24 02:23:02,582 - INFO - integration_test - Dyn residual k=1: pred=[1.739524296661878, 0.8199660529350699, 0.639999978051252, 2.600000012989304, 1.6296969724697834], ws=[1.739524296661878, 0.8199660529350699, 0.639999978051252, 2.600000012989304, 1.706666668750219], res=[0.0, 0.0, 0.0, 0.0, -0.0769696962804356], res_norm=7.697e-02
2026-01-24 02:23:02,582 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691981616607, 0.9752368638877076, 0.639999978051252, 2.600000012989304, 1.9666666700491495], ws=[1.9480691981616607, 0.9752368638877076, 0.639999978051252, 2.600000012989304, 2.06464646744465], res=[0.0, 0.0, 0.0, 0.0, -0.09797979739550033], res_norm=9.798e-02
2026-01-24 02:23:02,600 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:03,623 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:03,648 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:03,697 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:03,721 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:03,773 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:03,795 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:03,844 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:03,867 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:03,916 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:03,941 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:03,992 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:04,016 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:04,064 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:04,087 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:04,141 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:04,167 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:04,219 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:04,242 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:04,292 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:04,315 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:04,365 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:05,048 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 02:23:05,052 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:05,053 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:23:05,184 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:23:05,185 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:05,333 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:05,346 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 02:23:05,347 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:05,347 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 02:23:05,347 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998442, 'w': 0.8000000099693689}
2026-01-24 02:23:05,347 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:05,347 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:05,348 - INFO - integration_test - Step 8 completed in 4.938s
2026-01-24 02:23:05,411 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 02:23:05,412 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223934 0.67925693 0.71999998 2.80000001 1.80000001]
2026-01-24 02:23:05,413 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 02:23:05,413 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 02:23:05,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:06,400 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 02:23:06,400 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 02:23:07,299 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:07,327 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:07,327 - INFO - integration_test - Warmstart k=0: x0=1.5322393379661925 , y0=0.6792569255510494 , psi0=0.7199999790481887 , v0=2.800000014989148 , spline0=1.8000000074957068 , a0=0.0 , w0=0.0
2026-01-24 02:23:07,327 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:07,328 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449471208207, 0.8638846302809495, 0.7199999790481887, 2.800000014989148, 2.0800000089946216], ws=[1.7427449471208207, 0.8638846302809496, 0.7199999790481888, 2.800000014989148, 1.7163636385441507], res=[0.0, -1.1102230246251565e-16, -1.1102230246251565e-16, 0.0, 0.3636363704504708], res_norm=3.636e-01
2026-01-24 02:23:07,329 - INFO - integration_test - Dyn residual k=1: pred=[1.953250556275449, 1.0485123350108498, 0.7199999790481888, 2.800000014989148, 1.9963636400430655], ws=[1.953250556275449, 1.0485123350108498, 0.7199999790481888, 2.800000014989148, 2.0816161645840303], res=[0.0, 0.0, 0.0, 0.0, -0.08525252454096477], res_norm=8.525e-02
2026-01-24 02:23:07,330 - INFO - integration_test - Dyn residual k=2: pred=[2.163756165430077, 1.23314003974075, 0.7199999790481888, 2.800000014989148, 2.3616161660829453], ws=[2.163756165430077, 1.23314003974075, 0.7199999790481888, 2.800000014989148, 1.9292929323213261], res=[0.0, 0.0, 0.0, 0.0, 0.4323232337616192], res_norm=4.323e-01
2026-01-24 02:23:07,347 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:08,487 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:08,513 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:08,567 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:08,592 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:08,648 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:08,674 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:08,737 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:08,764 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:08,826 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:08,850 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:08,900 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:08,924 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:08,979 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:09,005 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:09,062 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:09,087 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:09,142 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:09,169 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:09,228 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:09,264 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:09,333 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:09,978 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 02:23:09,983 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:09,983 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:23:09,998 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:23:09,999 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:10,223 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:10,239 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 02:23:10,239 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:10,239 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 02:23:10,240 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199470978, 'w': 0.8000000086585145}
2026-01-24 02:23:10,240 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:10,240 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:10,242 - INFO - integration_test - Step 9 completed in 4.829s
2026-01-24 02:23:10,301 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 02:23:10,304 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229391 0.87908749 0.79999998 3.00000002 2.10000001]
2026-01-24 02:23:10,305 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 02:23:10,305 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 02:23:10,306 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:11,290 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 02:23:11,290 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 02:23:12,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:12,460 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:12,460 - INFO - integration_test - Warmstart k=0: x0=1.7422939081256628 , y0=0.8790874909678885 , psi0=0.7999999799140401 , v0=3.000000016983858 , spline0=2.1000000091940927 , a0=0.0 , w0=0.0
2026-01-24 02:23:12,460 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:12,461 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059264357249, 1.0942943152578857, 0.7999999799140401, 3.000000016983858, 2.4000000108924784], ws=[1.951305925252448, 1.0942943140395385, 0.7999999799140403, 3.0, 2.0929292955296424], res=[1.1832768098685165e-09, 1.2183472009041907e-09, -1.1102230246251565e-16, 1.6983857875629838e-08, 0.30707071536283603], res_norm=3.071e-01
2026-01-24 02:23:12,462 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179423792334, 1.3095011371111884, 0.7999999799140403, 3.0, 2.392929295529642], ws=[2.1603179423792334, 1.3095011371111884, 0.7999999799140403, 3.0, 2.488888891860717], res=[0.0, 0.0, 0.0, 0.0, -0.09595959633107487], res_norm=9.596e-02
2026-01-24 02:23:12,463 - INFO - integration_test - Dyn residual k=2: pred=[2.3693299595060187, 1.5247079601828384, 0.7999999799140403, 3.0, 2.788888891860717], ws=[2.3693299595060187, 1.5247079601828384, 0.7999999799140403, 3.0, 2.3434343461275624], res=[0.0, 0.0, 0.0, 0.0, 0.44545454573315446], res_norm=4.455e-01
2026-01-24 02:23:12,479 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:13,527 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:13,549 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:13,593 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:13,614 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:13,662 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:13,683 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:13,727 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:13,749 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:13,795 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:13,817 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:13,861 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:13,882 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:13,930 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:13,952 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:13,998 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:14,023 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:14,070 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:14,092 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:14,139 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:14,160 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:14,205 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:14,849 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 02:23:14,856 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:14,856 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:23:14,870 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:23:14,871 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:15,036 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:15,048 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 02:23:15,049 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:15,049 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 02:23:15,049 - INFO - integration_test -   Control dict from planner: {'a': 1.3015460404224766e-07, 'w': 0.8000000096013936}
2026-01-24 02:23:15,049 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:15,049 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:15,051 - INFO - integration_test - Step 10 completed in 4.747s
2026-01-24 02:23:15,113 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 02:23:15,115 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247937 1.10242086 0.87999998 3.00000003 2.40000001]
2026-01-24 02:23:15,116 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 02:23:15,116 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 02:23:15,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:16,327 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 02:23:16,328 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 02:23:17,358 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:17,389 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:17,389 - INFO - integration_test - Warmstart k=0: x0=1.9424793719096785 , y0=1.1024208612803499 , psi0=0.8799999808741795 , v0=3.000000029999318 , spline0=2.4000000121940244 , a0=0.0 , w0=0.0
2026-01-24 02:23:17,390 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:17,391 - INFO - integration_test - Dyn residual k=0: pred=[2.1336247215029664, 1.3336425236063931, 0.8799999808741795, 3.000000029999318, 2.700000015193956], ws=[2.1336247195915563, 1.333642521294229, 0.8799999808741799, 3.0, 2.4888888928303916], res=[1.9114101412753826e-09, 2.3121640158052514e-09, -3.3306690738754696e-16, 2.999931814073875e-08, 0.21111112236356444], res_norm=2.111e-01
2026-01-24 02:23:17,392 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700672734344, 1.5648641813081083, 0.8799999808741799, 3.0, 2.788888892830392], ws=[2.3247700672734344, 1.5648641813081086, 0.8799999808741799, 3.0, 2.343434347006331], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, 0.44545454582406085], res_norm=4.455e-01
2026-01-24 02:23:17,392 - INFO - integration_test - Dyn residual k=2: pred=[2.5159154149553125, 1.7960858413219878, 0.8799999808741799, 3.0, 2.6434343470063313], ws=[2.5159154149553125, 1.7960858413219878, 0.8799999808741799, 3.0, 2.934343438654453], res=[0.0, 0.0, 0.0, 0.0, -0.2909090916481216], res_norm=2.909e-01
2026-01-24 02:23:17,409 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:18,463 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:18,486 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:18,535 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:18,558 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:18,607 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:18,631 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:18,682 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:18,706 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:18,757 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:18,779 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:18,829 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:18,852 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:18,901 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:18,927 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:18,976 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:18,999 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:19,048 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:19,069 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:19,114 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:19,137 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:19,185 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:19,856 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 02:23:19,863 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:19,863 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:23:19,876 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:23:19,877 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:20,037 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:20,052 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 02:23:20,052 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:20,052 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 02:23:20,052 - INFO - integration_test -   Control dict from planner: {'a': -1.3506633616204826e-07, 'w': 0.059329292372827414}
2026-01-24 02:23:20,052 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:20,052 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:20,053 - INFO - integration_test - Step 11 completed in 4.938s
2026-01-24 02:23:20,110 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 02:23:20,116 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13293769 1.33420819 0.88593291 3.00000002 2.70000001]
2026-01-24 02:23:20,117 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-24 02:23:20,117 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 02:23:20,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:21,369 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 02:23:21,369 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 02:23:22,356 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:22,384 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:22,385 - INFO - integration_test - Warmstart k=0: x0=2.132937690833546 , y0=1.334208190853102 , psi0=0.8859329101114622 , v0=3.0000000164926846 , spline0=2.700000013843293 , a0=0.0 , w0=0.0
2026-01-24 02:23:22,385 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:22,386 - INFO - integration_test - Dyn residual k=0: pred=[2.322707861744897, 1.5665598278644164, 0.8859329101114622, 3.0000000164926846, 3.0000000154925615], ws=[2.322707860701624, 1.566559826587049, 0.8859329101114621, 3.0, 2.3434343474894495], res=[1.0432730235265808e-09, 1.2773673230270788e-09, 1.1102230246251565e-16, 1.6492684551394632e-08, 0.656565668003112], res_norm=6.566e-01
2026-01-24 02:23:22,387 - INFO - integration_test - Dyn residual k=1: pred=[2.512478030569702, 1.798911462320996, 0.8859329101114621, 3.0, 2.6434343474894497], ws=[2.512478030569702, 1.798911462320996, 0.8859329101114621, 3.0, 2.9343434392375274], res=[0.0, 0.0, 0.0, 0.0, -0.29090909174807766], res_norm=2.909e-01
2026-01-24 02:23:22,388 - INFO - integration_test - Dyn residual k=2: pred=[2.70224820043778, 2.031263098054943, 0.8859329101114621, 3.0, 3.234343439237527], ws=[2.70224820043778, 2.031263098054943, 0.8859329101114621, 3.0, 3.301010106323688], res=[0.0, 0.0, 0.0, 0.0, -0.06666666708616065], res_norm=6.667e-02
2026-01-24 02:23:22,406 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:23,445 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:23,467 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:23,516 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:23,541 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:23,589 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:23,611 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:23,662 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:23,684 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:23,735 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:23,759 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:23,808 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:23,831 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:23,880 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:23,903 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:23,953 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:23,975 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:24,027 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:24,050 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:24,138 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:24,167 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:24,219 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:25,079 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 02:23:25,085 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:25,086 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:23:25,102 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:23:25,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:25,304 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:25,481 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 02:23:25,482 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:25,482 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 02:23:25,482 - INFO - integration_test -   Control dict from planner: {'a': 1.350720096251891e-07, 'w': -0.2295356254571146}
2026-01-24 02:23:25,482 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:25,482 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:25,483 - INFO - integration_test - Step 12 completed in 5.368s
2026-01-24 02:23:25,548 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 02:23:25,551 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32535773 1.56436157 0.86297935 3.00000003 3.00000002]
2026-01-24 02:23:25,551 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-24 02:23:25,551 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 02:23:25,552 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:26,518 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-24 02:23:26,518 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 02:23:27,479 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:27,506 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:27,506 - INFO - integration_test - Warmstart k=0: x0=2.3253577305659037 , y0=1.5643615707883254 , psi0=0.8629793475657508 , v0=3.0000000299998857 , spline0=3.0000000168432814 , a0=0.0 , w0=0.0
2026-01-24 02:23:27,506 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:27,507 - INFO - integration_test - Dyn residual k=0: pred=[2.5204107423445476, 1.7922964834192632, 0.8629793475657508, 3.0000000299998857, 3.30000001984327], ws=[2.5204107403940252, 1.792296481139923, 0.8629793475657506, 3.0, 2.9343434402981297], res=[1.950522410254507e-09, 2.2793402720822087e-09, 2.220446049250313e-16, 2.999988568674894e-08, 0.3656565795451403], res_norm=3.657e-01
2026-01-24 02:23:27,508 - INFO - integration_test - Dyn residual k=1: pred=[2.715463750222147, 2.0202313914915204, 0.8629793475657506, 3.0, 3.2343434402981295], ws=[2.715463750222147, 2.0202313914915204, 0.8629793475657506, 3.0, 3.301010107475199], res=[0.0, 0.0, 0.0, 0.0, -0.0666666671770697], res_norm=6.667e-02
2026-01-24 02:23:27,509 - INFO - integration_test - Dyn residual k=2: pred=[2.9105167600502684, 2.248166301843118, 0.8629793475657506, 3.0, 3.601010107475199], ws=[2.9105167600502684, 2.248166301843118, 0.8629793475657506, 3.0, 3.6858585928340863], res=[0.0, 0.0, 0.0, 0.0, -0.08484848535888734], res_norm=8.485e-02
2026-01-24 02:23:27,525 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:28,529 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:28,550 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:28,596 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:28,617 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:28,664 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:28,684 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:28,729 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:28,752 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:28,797 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:28,816 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:28,861 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:28,881 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:28,927 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:28,949 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:28,997 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:29,018 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:29,065 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:29,085 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:29,130 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:29,150 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:29,195 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:29,903 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 02:23:29,910 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:29,910 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:23:29,925 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:23:29,926 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:30,226 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:30,243 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 02:23:30,243 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:30,243 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 02:23:30,243 - INFO - integration_test -   Control dict from planner: {'a': -2.279084911141704e-11, 'w': -0.14374761167793262}
2026-01-24 02:23:30,243 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:30,243 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:30,245 - INFO - integration_test - Step 13 completed in 4.694s
2026-01-24 02:23:30,306 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 02:23:30,314 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52204225 1.79088674 0.84860459 3.00000003 3.30000002]
2026-01-24 02:23:30,314 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-24 02:23:30,314 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 02:23:30,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:31,305 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 02:23:31,305 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 02:23:32,487 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:32,515 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:32,516 - INFO - integration_test - Warmstart k=0: x0=2.5220422517496965 , y0=1.7908867375728332 , psi0=0.8486045863979575 , v0=3.0000000299976066 , spline0=3.300000019843042 , a0=0.0 , w0=0.0
2026-01-24 02:23:32,516 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:32,517 - INFO - integration_test - Dyn residual k=0: pred=[2.720351508699165, 2.015994357186222, 0.8486045863979575, 3.0000000299976066, 3.600000022842803], ws=[2.7203515067162307, 2.0159943549353256, 0.8486045863979577, 3.0, 3.301010108626622], res=[1.982934261235414e-09, 2.250896358191312e-09, -1.1102230246251565e-16, 2.999760662092399e-08, 0.2989899142161807], res_norm=2.990e-01
2026-01-24 02:23:32,518 - INFO - integration_test - Dyn residual k=1: pred=[2.9186607616827644, 2.241101972297818, 0.8486045863979577, 3.0, 3.601010108626622], ws=[2.9186607616827644, 2.241101972297818, 0.8486045863979577, 3.0, 3.6858585940764113], res=[0.0, 0.0, 0.0, 0.0, -0.08484848544978929], res_norm=8.485e-02
2026-01-24 02:23:32,519 - INFO - integration_test - Dyn residual k=2: pred=[3.116970016649298, 2.46620958966031, 0.8486045863979577, 3.0, 3.9858585940764115], ws=[3.116970016649298, 2.46620958966031, 0.8486045863979577, 3.0, 3.8101010183188357], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:23:32,536 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:33,597 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:33,621 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:33,674 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:33,697 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:33,745 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:33,768 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:33,817 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:33,840 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:33,888 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:33,910 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:33,959 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:33,984 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:34,033 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:34,055 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:34,101 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:34,122 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:34,169 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:34,192 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:34,237 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:34,258 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:34,302 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:35,136 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 02:23:35,144 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:35,144 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:23:35,163 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:23:35,164 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:35,371 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:35,385 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 02:23:35,385 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:35,385 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 02:23:35,385 - INFO - integration_test -   Control dict from planner: {'a': 2.2819914478357696e-11, 'w': -0.140171144474659}
2026-01-24 02:23:35,385 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:35,385 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:35,387 - INFO - integration_test - Step 14 completed in 5.073s
2026-01-24 02:23:35,443 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 02:23:35,445 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72192267 2.01459715 0.83458747 3.00000003 3.60000002]
2026-01-24 02:23:35,445 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-24 02:23:35,445 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 02:23:35,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:36,378 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 02:23:36,378 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 02:23:37,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:37,602 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:37,602 - INFO - integration_test - Warmstart k=0: x0=2.721922668617112 , y0=2.014597146737531 , psi0=0.8345874719504917 , v0=3.000000029999889 , spline0=3.600000022843031 , a0=0.0 , w0=0.0
2026-01-24 02:23:37,603 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:37,604 - INFO - integration_test - Dyn residual k=0: pred=[2.9233676999750413, 2.23690301967209, 0.8345874719504917, 3.000000029999889, 3.90000002584302], ws=[2.9233676979605985, 2.2369030174490394, 0.8345874719504915, 3.0, 3.685858595318831], res=[2.0144428347634857e-09, 2.2230506324660837e-09, 1.1102230246251565e-16, 2.999988879537341e-08, 0.21414143052418888], res_norm=2.141e-01
2026-01-24 02:23:37,605 - INFO - integration_test - Dyn residual k=1: pred=[3.124812727304085, 2.4592088881605476, 0.8345874719504915, 3.0, 3.985858595318831], ws=[3.124812727304085, 2.4592088881605476, 0.8345874719504915, 3.0, 3.8101010195612557], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757534], res_norm=1.758e-01
2026-01-24 02:23:37,606 - INFO - integration_test - Dyn residual k=2: pred=[3.3262577566475713, 2.681514758872056, 0.8345874719504915, 3.0, 4.110101019561256], ws=[3.3262577566475713, 2.681514758872056, 0.8345874719504915, 3.0, 3.9343434438036793], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-24 02:23:37,625 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:38,712 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:38,734 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:38,785 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:38,809 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:38,899 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:38,931 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:38,986 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:39,010 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:39,063 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:39,086 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:39,163 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:39,200 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:39,256 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:39,280 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:39,334 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:39,358 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:39,408 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:39,432 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:39,482 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:39,503 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:39,551 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:40,218 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 02:23:40,226 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:40,226 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:23:40,240 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:23:40,241 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:40,494 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:40,514 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 02:23:40,514 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:40,514 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 02:23:40,514 - INFO - integration_test -   Control dict from planner: {'a': -2.555530701177039e-11, 'w': -0.13688306002740164}
2026-01-24 02:23:40,514 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:40,514 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:40,516 - INFO - integration_test - Step 15 completed in 5.071s
2026-01-24 02:23:40,584 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 02:23:40,585 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92488288 2.23551738 0.82089917 3.00000003 3.90000003]
2026-01-24 02:23:40,586 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.418m, drift=0.213m)
2026-01-24 02:23:40,586 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 02:23:40,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:41,592 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.925, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 02:23:41,592 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 02:23:42,568 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:42,593 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:42,593 - INFO - integration_test - Warmstart k=0: x0=2.924882880903904 , y0=2.2355173784195816 , psi0=0.8208991659477515 , v0=3.000000029997333 , spline0=3.9000000258427643 , a0=0.0 , w0=0.0
2026-01-24 02:23:42,593 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:42,594 - INFO - integration_test - Dyn residual k=0: pred=[3.1293519359950834, 2.4550450698618236, 0.8208991659477515, 3.000000029997333, 4.2000000288424975], ws=[3.129351933950575, 2.4550450676667417, 0.8208991659477514, 3.0, 3.81010102080357], res=[2.0445085624487547e-09, 2.1950818940297268e-09, 1.1102230246251565e-16, 2.999733306197072e-08, 0.3898990080389275], res_norm=3.899e-01
2026-01-24 02:23:42,595 - INFO - integration_test - Dyn residual k=1: pred=[3.333820986997246, 2.6745727569139017, 0.8208991659477514, 3.0, 4.11010102080357], ws=[3.333820986997246, 2.6745727569139017, 0.8208991659477514, 3.0, 3.934343445045993], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-24 02:23:42,596 - INFO - integration_test - Dyn residual k=2: pred=[3.538290040043917, 2.8941004461610618, 0.8208991659477514, 3.0, 4.234343445045993], ws=[3.538290040043917, 2.8941004461610618, 0.8208991659477514, 3.0, 4.058585869288417], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:23:42,611 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:43,769 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:43,793 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:43,843 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:43,867 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:43,917 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:43,941 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:43,993 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:44,017 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:44,070 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:44,095 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:44,144 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:44,169 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:44,252 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:44,287 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:44,341 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:44,365 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:44,420 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:44,445 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:44,496 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:44,520 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:44,572 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:45,293 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 02:23:45,301 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:45,302 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:23:45,317 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:23:45,318 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:45,708 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:45,727 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 02:23:45,727 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:45,727 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 02:23:45,727 - INFO - integration_test -   Control dict from planner: {'a': -3.4095469132782687e-10, 'w': -0.12307040065141643}
2026-01-24 02:23:45,727 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:45,727 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:45,729 - INFO - integration_test - Step 16 completed in 5.144s
2026-01-24 02:23:45,800 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 02:23:45,802 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.13069763 2.45378134 0.80859213 3.00000003 4.20000003]
2026-01-24 02:23:45,802 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.415m, drift=0.103m)
2026-01-24 02:23:45,802 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 02:23:45,803 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:46,835 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.131, 2.454), path_start=(0.000, 0.000), dist=3.978m
2026-01-24 02:23:46,835 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 02:23:47,802 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:47,830 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:47,831 - INFO - integration_test - Warmstart k=0: x0=3.130697625440387 , y0=2.4537813396295847 , psi0=0.8085921258826099 , v0=3.0000000299632377 , spline0=4.200000028839088 , a0=0.0 , w0=0.0
2026-01-24 02:23:47,831 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:47,832 - INFO - integration_test - Dyn residual k=0: pred=[3.3378528638445943, 2.6707760607623587, 0.8085921258826099, 3.0000000299632377, 4.500000031835412], ws=[3.3378528617755805, 2.6707760585950706, 0.8085921258826101, 3.0, 3.934343446286895], res=[2.069013849137491e-09, 2.1672881267420507e-09, -2.220446049250313e-16, 2.996323766879527e-08, 0.5656565855485165], res_norm=5.657e-01
2026-01-24 02:23:47,832 - INFO - integration_test - Dyn residual k=1: pred=[3.545008098110774, 2.8877707775605566, 0.8085921258826101, 3.0, 4.234343446286895], ws=[3.545008098110774, 2.8877707775605566, 0.8085921258826101, 3.0, 4.058585870529319], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-24 02:23:47,833 - INFO - integration_test - Dyn residual k=2: pred=[3.7521633344459673, 3.1047654965260425, 0.8085921258826101, 3.0, 4.358585870529319], ws=[3.7521633344459673, 3.1047654965260425, 0.8085921258826101, 3.0, 4.645454574293632], res=[0.0, 0.0, 0.0, 0.0, -0.2868687037643136], res_norm=2.869e-01
2026-01-24 02:23:47,850 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:48,845 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:48,867 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:48,913 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:48,938 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:48,992 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:49,018 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:49,073 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:49,097 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:49,155 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:49,204 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:49,273 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:49,298 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:49,349 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:49,378 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:49,431 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:49,455 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:49,533 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:49,570 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:49,629 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:49,652 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:49,702 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:50,403 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 02:23:50,412 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:50,412 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:23:50,609 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:23:50,610 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:50,914 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:50,933 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 02:23:50,934 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:50,934 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 02:23:50,934 - INFO - integration_test -   Control dict from planner: {'a': 3.0230736337892407e-10, 'w': -0.11657228089109431}
2026-01-24 02:23:50,934 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:50,934 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:50,935 - INFO - integration_test - Step 17 completed in 5.134s
2026-01-24 02:23:50,997 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 02:23:51,006 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.33911294 2.66956373 0.7969349  3.00000003 4.50000003]
2026-01-24 02:23:51,007 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.408m, drift=0.403m)
2026-01-24 02:23:51,007 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 02:23:51,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:52,033 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.339, 2.670), path_start=(0.000, 0.000), dist=4.275m
2026-01-24 02:23:52,033 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 02:23:53,068 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:53,096 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:53,096 - INFO - integration_test - Warmstart k=0: x0=3.3391129362811824 , y0=2.6695637319356664 , psi0=0.7969348977935005 , v0=3.0000000299934686 , spline0=4.500000031838435 , a0=0.0 , w0=0.0
2026-01-24 02:23:53,096 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:53,097 - INFO - integration_test - Dyn residual k=0: pred=[3.548783599252199, 2.8841289082548967, 0.7969348977935005, 3.0000000299934686, 4.800000034837782], ws=[3.5487835971559494, 2.884128906109712, 0.7969348977935002, 3.0, 4.058585871771474], res=[2.0962498403775953e-09, 2.1451844745001836e-09, 2.220446049250313e-16, 2.9993468597666606e-08, 0.7414141630663087], res_norm=7.414e-01
2026-01-24 02:23:53,098 - INFO - integration_test - Dyn residual k=1: pred=[3.7584542580307163, 3.0986940802837575, 0.7969348977935002, 3.0, 4.358585871771473], ws=[3.7584542580307163, 3.0986940802837575, 0.7969348977935002, 3.0, 4.64545457729298], res=[0.0, 0.0, 0.0, 0.0, -0.28686870552150623], res_norm=2.869e-01
2026-01-24 02:23:53,098 - INFO - integration_test - Dyn residual k=2: pred=[3.9681249189054832, 3.313259254457803, 0.7969348977935002, 3.0, 4.945454577292979], ws=[3.9681249189054832, 3.313259254457803, 0.7969348977935002, 3.0, 5.046464678303081], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:23:53,115 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,151 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:54,175 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,229 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:54,253 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,304 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:54,327 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,377 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:54,400 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,450 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:54,473 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,519 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:54,544 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,596 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:54,617 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,664 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:54,689 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,738 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:54,761 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,808 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:54,830 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:54,877 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:55,505 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 02:23:55,517 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:23:55,517 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:23:55,719 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:23:55,720 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:23:55,978 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:23:55,998 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 02:23:55,998 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:23:55,998 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 02:23:55,998 - INFO - integration_test -   Control dict from planner: {'a': -2.8478719879123862e-08, 'w': 0.3185915069986335}
2026-01-24 02:23:55,998 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:23:55,998 - INFO - integration_test -   Planner output success: True
2026-01-24 02:23:56,000 - INFO - integration_test - Step 18 completed in 4.994s
2026-01-24 02:23:56,060 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 02:23:56,062 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54533049 2.88743229 0.82879405 3.00000003 4.80000003]
2026-01-24 02:23:56,063 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.351m, drift=0.293m)
2026-01-24 02:23:56,063 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-24 02:23:56,064 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:57,029 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.545, 2.887), path_start=(0.000, 0.000), dist=4.572m
2026-01-24 02:23:57,030 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 02:23:57,935 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:23:57,964 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:23:57,964 - INFO - integration_test - Warmstart k=0: x0=3.545330488498139 , y0=2.887432294726376 , psi0=0.8287940484933638 , v0=3.0000000271455964 , spline0=4.800000034552995 , a0=0.0 , w0=0.0
2026-01-24 02:23:57,964 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:23:57,966 - INFO - integration_test - Dyn residual k=0: pred=[3.748060043901167, 3.1085673869094723, 0.8287940484933638, 3.0000000271455964, 5.100000037267555], ws=[3.748060042066762, 3.1085673849085245, 0.8287940484933638, 3.0, 4.64545458000754], res=[1.8344050722873817e-09, 2.000947851854562e-09, 0.0, 2.714559643735015e-08, 0.45454545726001516], res_norm=4.545e-01
2026-01-24 02:23:57,967 - INFO - integration_test - Dyn residual k=1: pred=[3.9507895956353845, 3.3297024750906727, 0.8287940484933638, 3.0, 4.94545458000754], ws=[3.9507895956353845, 3.3297024750906727, 0.8287940484933638, 3.0, 5.046464681017641], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:23:57,969 - INFO - integration_test - Dyn residual k=2: pred=[4.1535191492040076, 3.550837565272821, 0.8287940484933638, 3.0, 5.346464681017641], ws=[4.1535191492040076, 3.550837565272821, 0.8287940484933638, 3.0, 5.144444478997439], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:23:57,988 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,165 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:59,192 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,251 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:59,278 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,335 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:59,360 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,418 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:59,444 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,500 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:59,526 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,583 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:59,606 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,659 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:59,684 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,740 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:59,764 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,840 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:23:59,874 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:23:59,932 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:23:59,955 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:00,006 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:00,623 - INFO - integration_test - Step 19: MPC solve successful
2026-01-24 02:24:00,632 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:24:00,632 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1869 scenarios available
2026-01-24 02:24:00,646 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1869 trajectory groups with 18690 total points
2026-01-24 02:24:00,647 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:24:00,942 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:24:00,959 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-24 02:24:00,959 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:24:00,959 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 02:24:00,959 - INFO - integration_test -   Control dict from planner: {'a': -0.9006240280211333, 'w': -0.7999999991812454}
2026-01-24 02:24:00,959 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:24:00,959 - INFO - integration_test -   Planner output success: True
2026-01-24 02:24:00,961 - INFO - integration_test - Step 19 completed in 4.899s
2026-01-24 02:24:01,028 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 02:24:01,029 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.75346946 3.0970749  0.74879405 2.90993762 5.0909938 ]
2026-01-24 02:24:01,030 - DEBUG - integration_test - Step 20: Using propagated spline 5.0910 (close to path, dist=0.331m, drift=0.175m)
2026-01-24 02:24:01,030 - DEBUG - integration_test -   Set spline state to 5.0910
2026-01-24 02:24:01,031 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:02,217 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.753, 3.097), path_start=(0.000, 0.000), dist=4.866m
2026-01-24 02:24:02,217 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 02:24:03,203 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:03,232 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:24:03,232 - INFO - integration_test - Warmstart k=0: x0=3.7534694607775347 , y0=3.0970749002055658 , psi0=0.7487940485752392 , v0=2.909937624343483 , spline0=5.090993796987343 , a0=0.0 , w0=0.0
2026-01-24 02:24:03,232 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:24:03,233 - INFO - integration_test - Dyn residual k=0: pred=[3.966625406413591, 3.2951706159989587, 0.7487940485752392, 2.909937624343483, 5.381987559421691], ws=[3.966625406413591, 3.2951706159989587, 0.7487940485752391, 2.909937624343483, 5.028452205886337], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.3535353535353538], res_norm=3.535e-01
2026-01-24 02:24:03,234 - INFO - integration_test - Dyn residual k=1: pred=[4.1797813520496465, 3.4932663317923516, 0.7487940485752391, 2.909937624343483, 5.319445968320685], ws=[4.1797813520496465, 3.4932663317923516, 0.7487940485752391, 2.909937624343483, 5.117425766300483], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:24:03,235 - INFO - integration_test - Dyn residual k=2: pred=[4.392937297685703, 3.6913620475857445, 0.7487940485752391, 2.909937624343483, 5.408419528734831], ws=[4.392937297685703, 3.6913620475857445, 0.7487940485752391, 2.909937624343483, 5.509429629744932], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-24 02:24:03,251 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,252 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:04,274 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,318 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:04,340 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,384 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:04,406 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,450 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:04,472 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,516 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:04,538 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,582 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:04,602 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,648 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:04,669 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,717 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:04,739 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,785 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:04,806 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,853 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:04,872 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:04,914 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:05,562 - INFO - integration_test - Step 20: MPC solve successful
2026-01-24 02:24:05,571 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:24:05,571 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1843 scenarios available
2026-01-24 02:24:05,587 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1843 trajectory groups with 18430 total points
2026-01-24 02:24:05,588 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:24:05,935 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:24:05,959 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.091)
2026-01-24 02:24:05,959 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:24:05,959 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 02:24:05,959 - INFO - integration_test -   Control dict from planner: {'a': 0.9006240184237327, 'w': -0.639177013664238}
2026-01-24 02:24:05,959 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:24:05,959 - INFO - integration_test -   Planner output success: True
2026-01-24 02:24:05,961 - INFO - integration_test - Step 20 completed in 4.932s
2026-01-24 02:24:06,032 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 02:24:06,034 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.97623484 3.29114776 0.68487635 3.00000003 5.3909938 ]
2026-01-24 02:24:06,034 - DEBUG - integration_test - Step 21: Using propagated spline 5.3910 (close to path, dist=0.367m, drift=0.065m)
2026-01-24 02:24:06,035 - DEBUG - integration_test -   Set spline state to 5.3910
2026-01-24 02:24:06,035 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:07,127 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.976, 3.291), path_start=(0.000, 0.000), dist=5.162m
2026-01-24 02:24:07,127 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 02:24:08,110 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:08,137 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:24:08,137 - INFO - integration_test - Warmstart k=0: x0=3.9762348390613904 , y0=3.2911477553442228 , psi0=0.6848763472088154 , v0=3.000000026185856 , spline0=5.390993799605928 , a0=0.0 , w0=0.0
2026-01-24 02:24:08,137 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:24:08,138 - INFO - integration_test - Dyn residual k=0: pred=[4.2085840229760025, 3.480920931281617, 0.6848763472088154, 3.000000026185856, 5.690993802224513], ws=[4.208584020947915, 3.4809209296251593, 0.6848763472088155, 3.0, 5.1354382440503725], res=[2.0280879198253388e-09, 1.656457637722042e-09, -1.1102230246251565e-16, 2.6185856150107156e-08, 0.5555555581741407], res_norm=5.556e-01
2026-01-24 02:24:08,139 - INFO - integration_test - Dyn residual k=1: pred=[4.440933202834439, 3.670694103906096, 0.6848763472088155, 3.0, 5.435438244050372], ws=[4.440933202834439, 3.670694103906096, 0.6848763472088155, 3.0, 5.738468547080675], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:24:08,140 - INFO - integration_test - Dyn residual k=2: pred=[4.673282384720964, 3.8604672781870324, 0.6848763472088155, 3.0, 6.038468547080675], ws=[4.59321523935883, 3.7478041641319706, 0.6848763472088155, 3.0, 5.8364483450604725], res=[0.08006714536213355, 0.1126631140550618, 0.0, 0.0, 0.20202020202020243], res_norm=2.448e-01
2026-01-24 02:24:08,157 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,196 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:09,223 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,280 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:09,306 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,361 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:09,387 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,443 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:09,477 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,548 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:09,574 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,636 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:09,660 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,712 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:09,739 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,794 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:09,819 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,867 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:09,890 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:09,940 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:09,961 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:10,009 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:14,858 - WARNING - integration_test - Step 21: MPC solve failed
2026-01-24 02:24:14,858 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:24:14,870 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:24:14,870 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:24:14,885 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:24:14,886 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:24:15,369 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:24:15,395 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.391)
2026-01-24 02:24:15,396 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:24:15,396 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 02:24:15,396 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:24:15,396 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:24:15,396 - INFO - integration_test -   Planner output success: False
2026-01-24 02:24:15,396 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:24:15,398 - INFO - integration_test - Step 21 completed in 9.364s
2026-01-24 02:24:15,468 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-24 02:24:15,476 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.19335395 3.48327914 0.76487635 2.80000003 5.6709938 ]
2026-01-24 02:24:15,476 - DEBUG - integration_test - Step 22: Using propagated spline 5.6710 (close to path, dist=0.347m, drift=0.345m)
2026-01-24 02:24:15,476 - DEBUG - integration_test -   Set spline state to 5.6710
2026-01-24 02:24:15,477 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:16,513 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.193, 3.483), path_start=(0.000, 0.000), dist=5.451m
2026-01-24 02:24:16,513 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-24 02:24:17,427 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:17,452 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:24:17,452 - INFO - integration_test - Warmstart k=0: x0=4.193353950877851 , y0=3.4832791405886474 , psi0=0.7648763472088154 , v0=2.800000026185856 , spline0=5.670993802224514 , a0=0.0 , w0=0.0
2026-01-24 02:24:17,452 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:24:17,453 - INFO - integration_test - Dyn residual k=0: pred=[4.395364988862277, 3.677164524253489, 0.7648763472088154, 2.800000026185856, 5.950993804843099], ws=[4.395364988862277, 3.677164524253489, 0.7648763472088156, 2.800000026185856, 5.496448350297644], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:24:17,453 - INFO - integration_test - Dyn residual k=1: pred=[4.597376026846703, 3.8710499079183305, 0.7648763472088156, 2.800000026185856, 5.77644835291623], ws=[4.597376026846703, 3.8710499079183305, 0.7648763472088156, 2.800000026185856, 5.877458453926331], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:24:17,454 - INFO - integration_test - Dyn residual k=2: pred=[4.799387064831129, 4.064935291583172, 0.7648763472088156, 2.800000026185856, 6.157458456544917], ws=[4.799387064831129, 4.064935291583172, 0.7648763472088156, 2.800000026185856, 5.955438254524715], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:24:17,470 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:18,615 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:18,639 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:18,689 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:18,712 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:18,764 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:18,789 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:18,841 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:18,864 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:18,913 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:18,937 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:18,986 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:19,011 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:19,062 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:19,085 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:19,136 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:19,160 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:19,212 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:19,236 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:19,287 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:19,310 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:19,359 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:25,253 - WARNING - integration_test - Step 22: MPC solve failed
2026-01-24 02:24:25,253 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 02:24:25,263 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:24:25,263 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1869 scenarios available
2026-01-24 02:24:25,276 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1869 trajectory groups with 18690 total points
2026-01-24 02:24:25,277 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:24:25,556 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:24:25,571 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.671)
2026-01-24 02:24:25,571 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:24:25,572 - INFO - integration_test - === Applying control at step 22 ===
2026-01-24 02:24:25,572 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.7333685432898864}
2026-01-24 02:24:25,572 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:24:25,572 - INFO - integration_test -   Planner output success: False
2026-01-24 02:24:25,572 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.7333685432898864}
2026-01-24 02:24:25,573 - INFO - integration_test - Step 22 completed in 10.098s
2026-01-24 02:24:25,633 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-24 02:24:25,634 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.38121105 3.67712718 0.8382132  2.60000003 5.9309938 ]
2026-01-24 02:24:25,635 - DEBUG - integration_test - Step 23: Using propagated spline 5.9310 (close to path, dist=0.300m, drift=0.195m)
2026-01-24 02:24:25,635 - DEBUG - integration_test -   Set spline state to 5.9310
2026-01-24 02:24:25,636 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:26,548 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.381, 3.677), path_start=(0.000, 0.000), dist=5.720m
2026-01-24 02:24:26,548 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-24 02:24:27,529 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:27,557 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:24:27,557 - INFO - integration_test - Warmstart k=0: x0=4.381211048346134 , y0=3.677127177619837 , psi0=0.838213201537804 , v0=2.600000026185856 , spline0=5.9309938048431 , a0=0.0 , w0=0.0
2026-01-24 02:24:27,557 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:24:27,558 - INFO - integration_test - Dyn residual k=0: pred=[4.555097044672724, 3.870424000261011, 0.838213201537804, 2.600000026185856, 6.190993807461686], ws=[4.555097044672724, 3.870424000261011, 0.8382132015378039, 2.600000026185856, 5.837458453926332], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.3535353535353538], res_norm=3.535e-01
2026-01-24 02:24:27,559 - INFO - integration_test - Dyn residual k=1: pred=[4.7289830409993145, 4.063720822902185, 0.8382132015378039, 2.600000026185856, 6.097458456544917], ws=[4.7289830409993145, 4.063720822902185, 0.8382132015378039, 2.600000026185856, 5.693418052504514], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-24 02:24:27,559 - INFO - integration_test - Dyn residual k=2: pred=[4.902869037325905, 4.257017645543359, 0.8382132015378039, 2.600000026185856, 5.9534180551231], ws=[4.902869037325905, 4.257017645543359, 0.8382132015378039, 2.600000026185856, 6.054428156133201], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:24:27,576 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:28,678 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:28,701 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:28,750 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:28,775 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:28,823 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:28,846 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:28,894 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:28,917 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:28,966 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:28,991 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:29,041 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:29,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:29,111 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:29,134 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:29,184 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:29,207 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:29,256 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:29,279 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:29,325 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:29,347 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:29,395 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:35,013 - WARNING - integration_test - Step 23: MPC solve failed
2026-01-24 02:24:35,013 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-24 02:24:35,028 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:24:35,028 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:24:35,273 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:24:35,274 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:24:35,856 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:24:35,889 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=5.931)
2026-01-24 02:24:35,889 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:24:35,889 - INFO - integration_test - === Applying control at step 23 ===
2026-01-24 02:24:35,889 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:24:35,889 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:24:35,889 - INFO - integration_test -   Planner output success: False
2026-01-24 02:24:35,889 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:24:35,891 - INFO - integration_test - Step 23 completed in 10.257s
2026-01-24 02:24:35,960 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-24 02:24:35,962 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.54090289 3.86939056 0.9182132  2.40000003 6.17099381]
2026-01-24 02:24:35,963 - DEBUG - integration_test - Step 24: Using propagated spline 6.1710 (close to path, dist=0.312m, drift=0.026m)
2026-01-24 02:24:35,963 - DEBUG - integration_test -   Set spline state to 6.1710
2026-01-24 02:24:35,963 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:36,982 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.541, 3.869), path_start=(0.000, 0.000), dist=5.966m
2026-01-24 02:24:36,982 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-24 02:24:37,969 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:38,001 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:24:38,001 - INFO - integration_test - Warmstart k=0: x0=4.540902893424017 , y0=3.8693905627108305 , psi0=0.918213201537804 , v0=2.4000000261858556 , spline0=6.170993807461685 , a0=0.0 , w0=0.0
2026-01-24 02:24:38,001 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:24:38,002 - INFO - integration_test - Dyn residual k=0: pred=[4.686640679466851, 4.060074854083388, 0.918213201537804, 2.4000000261858556, 6.410993810080271], ws=[4.686640679466851, 4.060074854083388, 0.918213201537804, 2.4000000261858556, 6.158468557555018], res=[0.0, 0.0, 0.0, 0.0, 0.2525252525252526], res_norm=2.525e-01
2026-01-24 02:24:38,003 - INFO - integration_test - Dyn residual k=1: pred=[4.832378465509684, 4.2507591454559455, 0.918213201537804, 2.4000000261858556, 6.398468560173604], ws=[4.832378465509684, 4.2507591454559455, 0.918213201537804, 2.4000000261858556, 5.9944281561332], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:24:38,004 - INFO - integration_test - Dyn residual k=2: pred=[4.9781162515525175, 4.441443436828503, 0.918213201537804, 2.4000000261858556, 6.234428158751785], ws=[4.712354223659349, 4.103280337412366, 0.918213201537804, 2.4000000261858556, 5.931397855721483], res=[0.2657620278931683, 0.3381630994161364, 0.0, 0.0, 0.30303030303030276], res_norm=5.261e-01
2026-01-24 02:24:38,025 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,130 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:39,152 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,223 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:39,262 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,317 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:39,342 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,388 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:39,411 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,459 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:39,482 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,530 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:39,552 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,597 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:39,619 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,665 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:39,686 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,732 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:39,753 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,799 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:39,822 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:39,868 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:45,197 - WARNING - integration_test - Step 24: MPC solve failed
2026-01-24 02:24:45,197 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-24 02:24:45,209 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:24:45,209 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:24:45,442 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:24:45,443 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:24:45,839 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:24:45,857 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.171)
2026-01-24 02:24:45,857 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:24:45,857 - INFO - integration_test - === Applying control at step 24 ===
2026-01-24 02:24:45,857 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:24:45,857 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:24:45,857 - INFO - integration_test -   Planner output success: False
2026-01-24 02:24:45,857 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:24:45,859 - INFO - integration_test - Step 24 completed in 9.897s
2026-01-24 02:24:45,921 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-24 02:24:45,926 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.67322274 4.05744181 0.9982132  2.20000003 6.39099381]
2026-01-24 02:24:45,926 - DEBUG - integration_test - Step 25: Using propagated spline 6.3910 (close to path, dist=0.204m, drift=0.246m)
2026-01-24 02:24:45,926 - DEBUG - integration_test -   Set spline state to 6.3910
2026-01-24 02:24:45,927 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:47,015 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.673, 4.057), path_start=(0.000, 0.000), dist=6.189m
2026-01-24 02:24:47,015 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-24 02:24:48,022 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:48,052 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:24:48,052 - INFO - integration_test - Warmstart k=0: x0=4.673222737665233 , y0=4.057441810994921 , psi0=0.9982132015378039 , v0=2.2000000261858554 , spline0=6.390993810080271 , a0=0.0 , w0=0.0
2026-01-24 02:24:48,052 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:24:48,053 - INFO - integration_test - Dyn residual k=0: pred=[4.792419835043084, 4.242352743956908, 0.9982132015378039, 2.2000000261858554, 6.610993812698856], ws=[4.792419835043084, 4.242352743956908, 0.998213201537804, 2.2000000261858554, 6.2574584591635025], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.3535353535353538], res_norm=3.535e-01
2026-01-24 02:24:48,054 - INFO - integration_test - Dyn residual k=1: pred=[4.9116169324209356, 4.427263676918895, 0.998213201537804, 2.2000000261858554, 6.4774584617820885], ws=[4.9116169324209356, 4.427263676918895, 0.998213201537804, 2.2000000261858554, 6.578468562792189], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-24 02:24:48,055 - INFO - integration_test - Dyn residual k=2: pred=[5.030814029798787, 4.612174609880882, 0.998213201537804, 2.2000000261858554, 6.798468565410774], ws=[5.030814029798787, 4.612174609880882, 0.998213201537804, 2.2000000261858554, 6.39442816137037], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:24:48,073 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,197 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:49,219 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,272 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:49,296 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,345 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:49,369 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,416 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:49,439 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,488 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:49,512 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,561 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:49,583 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,631 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:49,654 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,703 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:49,725 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,772 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:49,797 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,848 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:49,870 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:49,919 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:55,241 - WARNING - integration_test - Step 25: MPC solve failed
2026-01-24 02:24:55,241 - WARNING - integration_test -   Consecutive MPC failures: 5/20
2026-01-24 02:24:55,256 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:24:55,257 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:24:55,273 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:24:55,274 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:24:55,706 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:24:55,735 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.391)
2026-01-24 02:24:55,736 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:24:55,736 - INFO - integration_test - === Applying control at step 25 ===
2026-01-24 02:24:55,736 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.08733505415922505}
2026-01-24 02:24:55,736 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:24:55,736 - INFO - integration_test -   Planner output success: False
2026-01-24 02:24:55,736 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.08733505415922505}
2026-01-24 02:24:55,737 - INFO - integration_test - Step 25 completed in 9.812s
2026-01-24 02:24:55,813 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-24 02:24:55,825 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[4.78624185 4.23443447 1.00694671 2.00000003 6.59099381]
2026-01-24 02:24:55,826 - DEBUG - integration_test - Step 26: Using propagated spline 6.5910 (close to path, dist=0.212m, drift=0.036m)
2026-01-24 02:24:55,826 - DEBUG - integration_test -   Set spline state to 6.5910
2026-01-24 02:24:55,827 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:57,168 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(4.786, 4.234), path_start=(0.000, 0.000), dist=6.391m
2026-01-24 02:24:57,168 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-24 02:24:58,159 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:24:58,191 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:24:58,191 - INFO - integration_test - Warmstart k=0: x0=4.7862418546856045 , y0=4.234434466755314 , psi0=1.0069467069537263 , v0=2.0000000261858553 , spline0=6.590993812698857 , a0=0.0 , w0=0.0
2026-01-24 02:24:58,191 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:24:58,192 - INFO - integration_test - Dyn residual k=0: pred=[4.8931306288809715, 4.403475263601655, 1.0069467069537263, 2.0000000261858553, 6.790993815317442], ws=[4.8931306288809715, 4.403475263601655, 1.0069467069537268, 2.0000000261858553, 6.336448360771987], res=[0.0, 0.0, -4.440892098500626e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:24:58,193 - INFO - integration_test - Dyn residual k=1: pred=[5.000019403076338, 4.572516060447997, 1.0069467069537268, 2.0000000261858553, 6.536448363390573], ws=[5.000019403076338, 4.572516060447997, 1.0069467069537268, 2.0000000261858553, 6.637458464400674], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:24:58,194 - INFO - integration_test - Dyn residual k=2: pred=[5.106908177271704, 4.741556857294339, 1.0069467069537268, 2.0000000261858553, 6.8374584670192595], ws=[4.9360428185507805, 4.501611281565099, 1.0069467069537268, 2.0000000261858553, 6.130387759948553], res=[0.17086535872092323, 0.2399455757292399, 0.0, 0.0, 0.7070707070707067], res_norm=7.660e-01
2026-01-24 02:24:58,212 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:59,429 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:24:59,455 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:59,510 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:59,538 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:59,592 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:59,617 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:59,670 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:59,695 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:59,744 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:59,766 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:59,815 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:59,840 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:59,891 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:59,914 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:24:59,965 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:24:59,987 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:00,035 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:00,058 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:00,106 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:25:00,128 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:00,174 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:25:06,022 - WARNING - integration_test - Step 26: MPC solve failed
2026-01-24 02:25:06,022 - WARNING - integration_test -   Consecutive MPC failures: 6/20
2026-01-24 02:25:06,037 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:06,038 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:25:06,056 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:25:06,057 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:06,554 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:25:06,590 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.591)
2026-01-24 02:25:06,590 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:25:06,590 - INFO - integration_test - === Applying control at step 26 ===
2026-01-24 02:25:06,590 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.3747545219014503}
2026-01-24 02:25:06,590 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:25:06,590 - INFO - integration_test -   Planner output success: False
2026-01-24 02:25:06,590 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.3747545219014503}
2026-01-24 02:25:06,592 - INFO - integration_test - Step 26 completed in 10.767s
2026-01-24 02:25:06,676 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-24 02:25:06,679 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[4.88480711 4.39685574 1.04442216 1.80000003 6.77099382]
2026-01-24 02:25:06,680 - DEBUG - integration_test - Step 27: Using propagated spline 6.7710 (close to path, dist=0.077m, drift=0.216m)
2026-01-24 02:25:06,680 - DEBUG - integration_test -   Set spline state to 6.7710
2026-01-24 02:25:06,681 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:25:07,721 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(4.885, 4.397), path_start=(0.000, 0.000), dist=6.572m
2026-01-24 02:25:07,721 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-24 02:25:08,692 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:25:08,720 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:25:08,720 - INFO - integration_test - Warmstart k=0: x0=4.884807111396054 , y0=4.396855741163838 , psi0=1.0444221591438714 , v0=1.8000000261858553 , spline0=6.770993815317443 , a0=0.0 , w0=0.0
2026-01-24 02:25:08,720 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:25:08,721 - INFO - integration_test - Dyn residual k=0: pred=[4.975239406334548, 4.552489930771546, 1.0444221591438714, 1.8000000261858553, 6.950993817936029], ws=[4.975239406334548, 4.552489930771546, 1.0444221591438714, 1.8000000261858553, 6.395438262380473], res=[0.0, 0.0, 0.0, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-24 02:25:08,722 - INFO - integration_test - Dyn residual k=1: pred=[5.065671701273043, 4.708124120379253, 1.0444221591438714, 1.8000000261858553, 6.575438264999059], ws=[5.065671701273043, 4.708124120379253, 1.0444221591438714, 1.8000000261858553, 6.474428163988958], res=[0.0, 0.0, 0.0, 0.0, 0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:25:08,722 - INFO - integration_test - Dyn residual k=2: pred=[5.156103996211538, 4.86375830998696, 1.0444221591438714, 1.8000000261858553, 6.654428166607544], ws=[5.031505337855918, 4.814993544158509, 1.0444221591438714, 1.8000000261858553, 6.452407964587342], res=[0.12459865835562045, 0.04876476582845157, 0.0, 0.0, 0.20202020202020243], res_norm=2.423e-01
2026-01-24 02:25:08,738 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:09,779 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:25:09,802 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:09,852 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:09,875 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:09,927 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:09,950 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:10,000 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:10,023 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:10,074 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:10,098 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:10,147 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:10,171 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:10,223 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:10,247 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:10,300 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:10,324 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:10,376 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:10,399 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:10,450 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:25:10,475 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:10,529 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:25:16,693 - WARNING - integration_test - Step 27: MPC solve failed
2026-01-24 02:25:16,693 - WARNING - integration_test -   Consecutive MPC failures: 7/20
2026-01-24 02:25:16,712 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:16,712 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:25:16,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:25:16,730 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:17,362 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:25:17,393 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=6.771)
2026-01-24 02:25:17,394 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:25:17,394 - INFO - integration_test - === Applying control at step 27 ===
2026-01-24 02:25:17,394 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.4153084148499193}
2026-01-24 02:25:17,394 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:25:17,394 - INFO - integration_test -   Planner output success: False
2026-01-24 02:25:17,394 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.4153084148499193}
2026-01-24 02:25:17,396 - INFO - integration_test - Step 27 completed in 10.717s
2026-01-24 02:25:17,472 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-24 02:25:17,475 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[4.97318356 4.54206406 1.00289132 1.60000003 6.93099382]
2026-01-24 02:25:17,476 - DEBUG - integration_test - Step 28: Using propagated spline 6.9310 (close to path, dist=0.179m, drift=0.376m)
2026-01-24 02:25:17,476 - DEBUG - integration_test -   Set spline state to 6.9310
2026-01-24 02:25:17,477 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:25:18,533 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(4.973, 4.542), path_start=(0.000, 0.000), dist=6.735m
2026-01-24 02:25:18,533 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-24 02:25:19,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:25:19,604 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:25:19,604 - INFO - integration_test - Warmstart k=0: x0=4.973183556718263 , y0=4.5420640603884666 , psi0=1.0028913176588794 , v0=1.6000000261858554 , spline0=6.930993817936028 , a0=0.0 , w0=0.0
2026-01-24 02:25:19,604 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:25:19,605 - INFO - integration_test - Dyn residual k=0: pred=[5.059242292679404, 4.676948806756313, 1.0028913176588794, 1.6000000261858554, 7.090993820554614], ws=[4.831874758386781, 4.601373241522919, 1.0028913176588796, 1.6000000261858554, 6.131397860958654], res=[0.22736753429262269, 0.07557556523339404, -2.220446049250313e-16, 0.0, 0.9595959595959593], res_norm=9.891e-01
2026-01-24 02:25:19,606 - INFO - integration_test - Dyn residual k=1: pred=[4.917933494347921, 4.736257987890765, 1.0028913176588796, 1.6000000261858554, 6.29139786357724], ws=[5.073994865255726, 4.686622277579897, 1.0028913176588796, 1.6000000261858554, 6.695438267617644], res=[-0.15606137090780425, 0.04963571031086822, 0.0, 0.0, -0.404040404040404], res_norm=4.360e-01
2026-01-24 02:25:19,607 - INFO - integration_test - Dyn residual k=2: pred=[5.160053601216866, 4.821507023947743, 1.0028913176588796, 1.6000000261858554, 6.855438270236229], ws=[5.115869084588561, 4.861199911849964, 1.0028913176588796, 1.6000000261858554, 6.754428169226128], res=[0.044184516628305026, -0.0396928879022207, 0.0, 0.0, 0.10101010101010122], res_norm=1.172e-01
2026-01-24 02:25:19,626 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:20,669 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:25:20,691 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:20,741 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:20,764 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:20,812 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:20,836 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:20,888 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:20,910 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:20,957 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:20,980 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:21,028 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:21,051 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:21,101 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:21,126 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:21,175 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:21,197 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:21,246 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:25:21,270 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:21,318 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:25:21,340 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:25:21,385 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:25:26,887 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-24 02:25:26,887 - WARNING - integration_test -   Consecutive MPC failures: 8/20
2026-01-24 02:25:26,908 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:26,908 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:25:27,203 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:25:27,204 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:27,787 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:25:27,814 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=6.931)
2026-01-24 02:25:27,815 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:25:27,815 - INFO - integration_test - === Applying control at step 28 ===
2026-01-24 02:25:27,815 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.5789657500040502}
2026-01-24 02:25:27,815 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:25:27,815 - INFO - integration_test -   Planner output success: False
2026-01-24 02:25:27,815 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.5789657500040502}
2026-01-24 02:25:27,817 - INFO - integration_test - Step 28 completed in 10.342s
2026-01-24 02:25:27,894 - WARNING - integration_test - Test timeout reached (180.0s) at step 29. Terminating test early.
2026-01-24 02:25:27,898 - INFO - integration_test - Saving test results...
2026-01-24 02:25:27,899 - INFO - integration_test - Saved 30 vehicle states to test_outputs/20260124_022221_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-24 02:25:27,899 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_022221_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-24 02:25:27,899 - INFO - integration_test - Saved 40 states for obstacle 0 to test_outputs/20260124_022221_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-24 02:25:27,899 - INFO - integration_test - Saved 40 states for obstacle 1 to test_outputs/20260124_022221_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-24 02:25:27,899 - INFO - integration_test - Saved state history: 30 vehicle states, 2 obstacles
2026-01-24 02:25:27,899 - INFO - integration_test - Creating animation...
2026-01-24 02:25:27,952 - DEBUG - integration_test - Creating animation with 30 frames (range: 0 to 29)
2026-01-24 02:25:27,953 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:25:28,980 - INFO - integration_test - Frame 0: Safe Horizon module has 1853 scenarios after update
2026-01-24 02:25:28,980 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:25:28,980 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:25:28,982 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:28,982 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:25:28,996 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:25:28,998 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:29,048 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:25:29,055 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:25:29,055 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:25:29,987 - INFO - integration_test - Frame 0: Safe Horizon module has 1876 scenarios after update
2026-01-24 02:25:29,987 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:25:29,987 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:25:29,989 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:29,989 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1876 scenarios available
2026-01-24 02:25:30,260 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1876 trajectory groups with 18760 total points
2026-01-24 02:25:30,261 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:30,309 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:25:30,315 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:25:30,439 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 02:25:31,357 - INFO - integration_test - Frame 1: Safe Horizon module has 1867 scenarios after update
2026-01-24 02:25:31,357 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-24 02:25:31,357 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:25:31,359 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:31,359 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:25:31,377 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:25:31,378 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:31,429 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:31,435 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-24 02:25:31,539 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 02:25:32,633 - INFO - integration_test - Frame 2: Safe Horizon module has 1883 scenarios after update
2026-01-24 02:25:32,633 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-24 02:25:32,633 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:25:32,636 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:32,636 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1883 scenarios available
2026-01-24 02:25:32,946 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1883 trajectory groups with 18830 total points
2026-01-24 02:25:32,947 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:33,002 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:33,010 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-24 02:25:34,146 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:34,146 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:25:34,165 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:25:34,166 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:34,222 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:35,340 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:35,340 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:25:35,363 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:25:35,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:35,425 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:36,901 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:36,901 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:25:36,921 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:25:36,922 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:36,974 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:38,029 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:38,029 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:25:38,045 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:25:38,046 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:38,095 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:39,190 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:39,190 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:25:39,508 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:25:39,509 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:39,573 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:40,726 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:40,726 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:25:40,747 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:25:40,748 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:40,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:41,935 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:41,935 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:25:42,230 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:25:42,231 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:42,282 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:43,376 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:43,376 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:25:43,392 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:25:43,393 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:43,442 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:44,612 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:44,612 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:25:44,924 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:25:44,925 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:44,983 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:46,101 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:46,101 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1869 scenarios available
2026-01-24 02:25:46,122 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1869 trajectory groups with 18690 total points
2026-01-24 02:25:46,123 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:46,177 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:47,311 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:47,311 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:25:47,331 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:25:47,332 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:47,668 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:48,801 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:48,801 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:25:48,824 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:25:48,825 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:48,880 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:49,987 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:49,987 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:25:50,005 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:25:50,007 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:50,060 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:51,152 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:51,152 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:25:51,428 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:25:51,429 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:51,473 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:52,531 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:52,531 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:25:52,552 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:25:52,553 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:52,607 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:53,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:53,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:25:54,125 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:25:54,126 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:54,179 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:55,287 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:55,287 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:25:55,309 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:25:55,311 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:55,368 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:56,476 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:56,476 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:25:56,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:25:56,497 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:56,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:57,956 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:57,956 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:25:57,977 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:25:57,979 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:58,034 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:25:59,151 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:25:59,151 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:25:59,168 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:25:59,169 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:25:59,224 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:26:00,307 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:26:00,307 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:26:00,642 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:26:00,643 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:26:00,697 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:26:01,892 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:26:01,892 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:26:01,916 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:26:01,918 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:26:01,975 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:26:03,133 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:26:03,134 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:26:03,433 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:26:03,434 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:26:03,485 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:26:04,681 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:26:04,681 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1840 scenarios available
2026-01-24 02:26:04,710 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1840 trajectory groups with 18400 total points
2026-01-24 02:26:04,713 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:26:04,775 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:26:05,855 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:26:05,855 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:26:05,873 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:26:05,874 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:26:06,190 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:26:07,249 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:26:07,249 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:26:07,268 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:26:07,269 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:26:07,354 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:26:08,562 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:26:08,563 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:26:08,584 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:26:08,585 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:26:08,644 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:26:10,716 - INFO - integration_test - Saved animation with 30 frames at 10.00 fps to test_outputs/20260124_022221_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 3.00s, size: 498104 bytes)
2026-01-24 02:26:10,737 - INFO - integration_test - Animation created successfully
2026-01-24 02:26:10,738 - INFO - integration_test - Test completed successfully
