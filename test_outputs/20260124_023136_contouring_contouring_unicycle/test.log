2026-01-24 02:31:36,661 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 02:31:36,661 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 02:31:36,661 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 02:31:36,661 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 02:31:36,661 - INFO - integration_test - Creating objective module: contouring
2026-01-24 02:31:36,668 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 02:31:36,668 - INFO - integration_test - Creating 1 constraint module(s): ['contouring']
2026-01-24 02:31:36,668 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 02:31:36,674 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 02:31:36,674 - INFO - integration_test - Created 1 constraint module(s)
2026-01-24 02:31:36,694 - INFO - integration_test - Setting solver on all modules...
2026-01-24 02:31:36,694 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 02:31:36,694 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 02:31:36,694 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 02:31:36,694 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 02:31:36,694 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 02:31:36,694 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 02:31:36,695 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 02:31:36,695 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 02:31:36,695 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 02:31:36,695 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 02:31:36,695 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 02:31:36,695 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 02:31:36,695 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 02:31:36,695 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 02:31:36,695 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 02:31:36,696 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 02:31:36,696 - INFO - integration_test - Auto-calculated timeout: 180s for 100 steps
2026-01-24 02:31:36,696 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 02:31:36,696 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 02:31:36,696 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 02:31:36,696 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 02:31:36,697 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:36,712 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 02:31:36,712 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 02:31:36,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:36,742 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:36,742 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 02:31:36,743 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:36,744 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 02:31:36,744 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-24 02:31:36,745 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-24 02:31:36,761 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:36,819 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:36,841 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:36,884 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:36,905 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:36,947 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:36,967 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:37,012 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:37,033 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:37,076 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:37,097 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:37,141 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:37,160 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:37,207 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:37,228 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:37,274 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:37,302 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:37,360 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:37,386 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:37,435 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:37,458 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:37,506 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:38,869 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 02:31:39,162 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 02:31:39,163 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:39,163 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 02:31:39,163 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 02:31:39,163 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000185256015, 'w': 0.79999997847811}
2026-01-24 02:31:39,163 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:39,163 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:39,165 - INFO - integration_test - Step 0 completed in 2.469s
2026-01-24 02:31:39,249 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 02:31:39,254 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.08       1.2        0.12      ]
2026-01-24 02:31:39,255 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 02:31:39,255 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 02:31:39,255 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:39,277 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 02:31:39,277 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 02:31:39,281 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:39,317 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:39,317 - INFO - integration_test - Warmstart k=0: x0=0.10987737538026617 , y0=0.004530844936250239 , psi0=0.079999997847811 , v0=1.20000000185256 , spline0=0.12000000018525601 , a0=0.0 , w0=0.0
2026-01-24 02:31:39,317 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:39,318 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358034188294, 0.014120607969918958, 0.079999997847811, 1.20000000185256, 0.24000000037051203], ws=[0.22949358034188297, 0.014120607969918961, 0.07999999784781098, 1.20000000185256, 0.05292929293303547], res=[-2.7755575615628914e-17, -3.469446951953614e-18, 2.7755575615628914e-17, 0.0, 0.18707070743747656], res_norm=1.871e-01
2026-01-24 02:31:39,320 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097853034998, 0.023710371003587676, 0.07999999784781098, 1.20000000185256, 0.17292929311829147], ws=[0.3491097853034998, 0.02371037100358768, 0.07999999784781098, 1.20000000185256, 0.10828282829405593], res=[0.0, -3.469446951953614e-18, 0.0, 0.0, 0.06464646482423554], res_norm=6.465e-02
2026-01-24 02:31:39,321 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259902651166, 0.033300134037256394, 0.07999999784781098, 1.20000000185256, 0.22828282847931194], ws=[0.4687259902651166, 0.033300134037256394, 0.07999999784781098, 1.20000000185256, 0.1660606060830613], res=[0.0, 0.0, 0.0, 0.0, 0.06222222239625064], res_norm=6.222e-02
2026-01-24 02:31:39,345 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:39,435 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:39,461 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:39,512 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:39,534 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:39,586 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:39,608 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:39,661 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:39,684 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:39,734 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:39,758 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:39,810 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:39,833 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:39,881 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:39,903 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:39,957 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:39,981 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:40,030 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:40,051 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:40,099 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:40,122 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:40,170 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:40,800 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 02:31:40,805 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 02:31:40,806 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:40,806 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 02:31:40,806 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000189057934, 'w': 0.8000000025805531}
2026-01-24 02:31:40,806 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:40,806 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:40,807 - INFO - integration_test - Step 1 completed in 1.554s
2026-01-24 02:31:40,870 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 02:31:40,871 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-24 02:31:40,872 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 02:31:40,872 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 02:31:40,872 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:40,888 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 02:31:40,888 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 02:31:40,891 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:40,921 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:40,921 - INFO - integration_test - Warmstart k=0: x0=0.23889212820143785 , y0=0.02022162137579041 , psi0=0.1599999981058663 , v0=1.4000000037431395 , spline0=0.26000000055956995 , a0=0.0 , w0=0.0
2026-01-24 02:31:40,921 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:40,922 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039482858064, 0.04252617009962821, 0.1599999981058663, 1.4000000037431395, 0.4000000009338839], ws=[0.3771039482858064, 0.04252617009962821, 0.1599999981058664, 1.4000000037431395, 0.10909090910977542], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.29090909182410846], res_norm=2.909e-01
2026-01-24 02:31:40,923 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157683701749, 0.06483071882346603, 0.1599999981058664, 1.4000000037431395, 0.24909090948408938], ws=[0.5153157683701749, 0.06483071882346603, 0.1599999981058664, 1.4000000037431395, 0.16787878791843025], res=[0.0, 0.0, 0.0, 0.0, 0.08121212156565913], res_norm=8.121e-02
2026-01-24 02:31:40,924 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275884545434, 0.08713526754730383, 0.1599999981058664, 1.4000000037431395, 0.3078787882927442], ws=[0.6535275884545434, 0.08713526754730384, 0.1599999981058664, 1.4000000037431395, 0.4589898991258595], res=[0.0, -1.3877787807814457e-17, 0.0, 0.0, -0.15111111083311535], res_norm=1.511e-01
2026-01-24 02:31:40,942 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,013 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,039 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,122 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,148 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,197 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,219 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,270 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,293 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,342 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,364 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,417 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,440 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,488 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,510 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,558 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,580 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,630 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,653 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,728 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:41,762 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:41,815 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:42,401 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 02:31:42,407 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 02:31:42,407 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:42,408 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 02:31:42,408 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000168074425, 'w': 0.7999999862685274}
2026-01-24 02:31:42,408 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:42,408 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:42,409 - INFO - integration_test - Step 2 completed in 1.538s
2026-01-24 02:31:42,463 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 02:31:42,464 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-24 02:31:42,464 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 02:31:42,464 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 02:31:42,465 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:42,481 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 02:31:42,481 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 02:31:42,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:42,510 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:42,510 - INFO - integration_test - Warmstart k=0: x0=0.38583643578827553 , y0=0.050144715691964416 , psi0=0.23999999673271905 , v0=1.6000000054238837 , spline0=0.42000000110195834 , a0=0.0 , w0=0.0
2026-01-24 02:31:42,510 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:42,511 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505124157053, 0.08817713554145164, 0.23999999673271905, 1.6000000054238837, 0.5800000016443467], ws=[0.5412505124157053, 0.08817713554145164, 0.2399999967327191, 1.6000000054238837, 0.16909090914073777], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.41090909250360896], res_norm=4.109e-01
2026-01-24 02:31:42,512 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645890431351, 0.12620955539093887, 0.2399999967327191, 1.6000000054238837, 0.32909090968312615], ws=[0.6966645890431351, 0.12620955539093887, 0.2399999967327191, 1.6000000054238837, 0.23191919200754488], res=[0.0, 0.0, 0.0, 0.0, 0.09717171767558128], res_norm=9.717e-02
2026-01-24 02:31:42,513 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786656705649, 0.1642419752404261, 0.2399999967327191, 1.6000000054238837, 0.39191919254993324], ws=[0.8520786656705649, 0.1642419752404261, 0.2399999967327191, 1.6000000054238837, 0.29797979811763253], res=[0.0, 0.0, 0.0, 0.0, 0.0939393944323007], res_norm=9.394e-02
2026-01-24 02:31:42,532 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:42,591 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:42,613 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:42,660 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:42,681 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:42,729 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:42,750 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:42,797 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:42,817 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:42,863 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:42,884 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:42,933 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:42,955 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:43,006 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:43,026 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:43,069 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:43,089 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:43,134 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:43,154 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:43,201 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:43,222 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:43,266 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:43,797 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 02:31:43,802 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 02:31:43,802 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:43,802 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 02:31:43,802 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000181393096, 'w': 0.7999999956532291}
2026-01-24 02:31:43,802 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:43,802 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:43,804 - INFO - integration_test - Step 3 completed in 1.340s
2026-01-24 02:31:43,856 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 02:31:43,857 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-24 02:31:43,857 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 02:31:43,857 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 02:31:43,858 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:43,872 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 02:31:43,872 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 02:31:43,875 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:43,901 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:43,901 - INFO - integration_test - Warmstart k=0: x0=0.5491354614414088 , y0=0.09724075565891505 , psi0=0.319999996298042 , v0=1.8000000072378146 , spline0=0.6000000018257399 , a0=0.0 , w0=0.0
2026-01-24 02:31:43,901 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:43,903 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978375928994, 0.15386273616496834, 0.319999996298042, 1.8000000072378146, 0.7800000025495213], ws=[0.7199978375928994, 0.15386273616496834, 0.319999996298042, 1.8000000072378146, 0.23353535363836447], res=[0.0, 0.0, 0.0, 0.0, 0.5464646489111569], res_norm=5.465e-01
2026-01-24 02:31:43,904 - INFO - integration_test - Dyn residual k=1: pred=[0.89086021374439, 0.21048471667102164, 0.319999996298042, 1.8000000072378146, 0.41353535436214595], ws=[0.89086021374439, 0.21048471667102164, 0.319999996298042, 1.8000000072378146, 0.3010101011754193], res=[0.0, 0.0, 0.0, 0.0, 0.11252525318672663], res_norm=1.125e-01
2026-01-24 02:31:43,905 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225898958804, 0.2671066971770749, 0.319999996298042, 1.8000000072378146, 0.4810101018992008], ws=[1.0617225898958806, 0.2671066971770749, 0.319999996298042, 1.8000000072378146, 0.37212121236345963], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, 0.10888888953574116], res_norm=1.089e-01
2026-01-24 02:31:43,922 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,027 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,048 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,095 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,115 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,160 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,180 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,226 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,246 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,291 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,311 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,354 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,374 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,420 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,441 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,485 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,504 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,549 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,570 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,616 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:44,639 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:44,685 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:45,371 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 02:31:45,377 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 02:31:45,377 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:45,377 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 02:31:45,377 - INFO - integration_test -   Control dict from planner: {'a': 2.000000011945953, 'w': 0.7999999465286294}
2026-01-24 02:31:45,377 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:45,377 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:45,379 - INFO - integration_test - Step 4 completed in 1.522s
2026-01-24 02:31:45,445 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 02:31:45,445 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.39999999 2.00000001 0.8       ]
2026-01-24 02:31:45,446 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 02:31:45,446 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 02:31:45,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:45,463 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 02:31:45,464 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 02:31:45,467 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:45,497 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:45,497 - INFO - integration_test - Warmstart k=0: x0=0.7268614892862094 , y0=0.16427976590683507 , psi0=0.39999999095090494 , v0=2.00000000843241 , spline0=0.8000000026689809 , a0=0.0 , w0=0.0
2026-01-24 02:31:45,497 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:45,498 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736895682395, 0.242163433029985, 0.39999999095090494, 2.00000000843241, 1.0000000035122218], ws=[0.9110736895682395, 0.242163433029985, 0.3999999909509051, 2.00000000843241, 0.36363636384922554], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.6363636396629964], res_norm=6.364e-01
2026-01-24 02:31:45,499 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858898502695, 0.3200471001531349, 0.3999999909509051, 2.00000000843241, 0.5636363646924665], ws=[1.0952858898502695, 0.3200471001531349, 0.3999999909509051, 2.00000000843241, 0.8767676773836008], res=[0.0, 0.0, 0.0, 0.0, -0.31313131269113437], res_norm=3.131e-01
2026-01-24 02:31:45,500 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980901322996, 0.39793076727628485, 0.3999999909509051, 2.00000000843241, 1.0767676782268418], ws=[1.2794980901322996, 0.39793076727628485, 0.3999999909509051, 2.00000000843241, 0.9696969704846521], res=[0.0, 0.0, 0.0, 0.0, 0.10707070774218974], res_norm=1.071e-01
2026-01-24 02:31:45,519 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:45,585 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:45,609 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:45,658 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:45,681 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:45,729 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:45,751 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:45,799 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:45,821 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:45,870 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:45,892 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:45,940 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:45,964 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:46,018 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:46,039 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:46,090 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:46,115 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:46,200 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:46,231 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:46,287 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:46,310 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:46,358 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:46,985 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 02:31:46,990 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 02:31:46,990 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:46,990 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 02:31:46,990 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000173553505, 'w': 0.7999999981482523}
2026-01-24 02:31:46,990 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:46,990 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:46,992 - INFO - integration_test - Step 5 completed in 1.547s
2026-01-24 02:31:47,059 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 02:31:47,060 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-24 02:31:47,060 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 02:31:47,060 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 02:31:47,061 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:47,078 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 02:31:47,078 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 02:31:47,081 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:47,111 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:47,111 - INFO - integration_test - Warmstart k=0: x0=0.9167519040986747 , y0=0.2538238041905368 , psi0=0.4799999907657302 , v0=2.200000010167945 , spline0=1.0200000036857753 , a0=0.0 , w0=0.0
2026-01-24 02:31:47,111 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:47,112 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907889501313, 0.3554152214772324, 0.4799999907657302, 2.200000010167945, 1.2400000047025697], ws=[1.1118907889501313, 0.3554152214772325, 0.4799999907657302, 2.200000010167945, 0.6933333338558411], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, 0.5466666708467286], res_norm=5.467e-01
2026-01-24 02:31:47,113 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296738015879, 0.4570066387639281, 0.4799999907657302, 2.200000010167945, 0.9133333348726356], ws=[1.3070296738015879, 0.4570066387639281, 0.4799999907657302, 2.200000010167945, 1.2397979808956354], res=[0.0, 0.0, 0.0, 0.0, -0.32646464602299985], res_norm=3.265e-01
2026-01-24 02:31:47,114 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685586530444, 0.5585980560506237, 0.4799999907657302, 2.200000010167945, 1.45979798191243], ws=[1.5021685586530444, 0.5585980560506237, 0.4799999907657302, 2.200000010167945, 1.0795959606846317], res=[0.0, 0.0, 0.0, 0.0, 0.38020202122779834], res_norm=3.802e-01
2026-01-24 02:31:47,133 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,191 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,214 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,261 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,282 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,330 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,351 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,401 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,423 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,471 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,493 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,540 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,562 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,612 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,634 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,680 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,700 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,745 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,767 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,816 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:47,839 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:47,887 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:48,617 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 02:31:48,623 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 02:31:48,623 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:48,623 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 02:31:48,623 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016228926, 'w': 0.7999999608201749}
2026-01-24 02:31:48,623 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:48,623 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:48,625 - INFO - integration_test - Step 6 completed in 1.566s
2026-01-24 02:31:48,688 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 02:31:48,689 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819144 0.55999999 2.40000001 1.26      ]
2026-01-24 02:31:48,689 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 02:31:48,690 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 02:31:48,690 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:48,707 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 02:31:48,707 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 02:31:48,710 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:48,742 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:48,742 - INFO - integration_test - Warmstart k=0: x0=1.11623086549898 , y0=0.3681914413241053 , psi0=0.5599999868477477 , v0=2.4000000117908376 , spline0=1.260000004864859 , a0=0.0 , w0=0.0
2026-01-24 02:31:48,742 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:48,743 - INFO - integration_test - Dyn residual k=0: pred=[1.3195720948178955, 0.4956761267770352, 0.5599999868477477, 2.4000000117908376, 1.5000000060439427], ws=[1.3195720948178955, 0.4956761267770352, 0.5599999868477479, 2.4000000117908376, 1.247474748634696], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.2525252574092467], res_norm=2.525e-01
2026-01-24 02:31:48,744 - INFO - integration_test - Dyn residual k=1: pred=[1.522913324136811, 0.6231608122299651, 0.5599999868477479, 2.4000000117908376, 1.4874747498137797], ws=[1.522913324136811, 0.6231608122299652, 0.5599999868477479, 2.4000000117908376, 1.3616161630753587], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, 0.12585858673842099], res_norm=1.259e-01
2026-01-24 02:31:48,745 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545534557263, 0.7506454976828951, 0.5599999868477479, 2.4000000117908376, 1.6016161642544424], ws=[1.7262545534557263, 0.7506454976828951, 0.5599999868477479, 2.4000000117908376, 1.198585860028645], res=[0.0, 0.0, 0.0, 0.0, 0.40303030422579744], res_norm=4.030e-01
2026-01-24 02:31:48,765 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:48,832 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:48,856 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:48,909 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:48,937 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:48,993 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:49,022 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:49,077 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:49,100 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:49,167 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:49,203 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:49,262 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:49,285 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:49,333 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:49,354 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:49,403 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:49,425 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:49,471 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:49,492 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:49,542 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:49,563 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:49,611 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,266 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 02:31:50,272 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 02:31:50,272 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:50,272 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 02:31:50,273 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000194819325, 'w': 0.8000000004080715}
2026-01-24 02:31:50,273 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:50,273 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:50,274 - INFO - integration_test - Step 7 completed in 1.585s
2026-01-24 02:31:50,327 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 02:31:50,327 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243449 0.50942444 0.63999999 2.60000001 1.52000001]
2026-01-24 02:31:50,328 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 02:31:50,328 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 02:31:50,328 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:50,342 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 02:31:50,342 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 02:31:50,345 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:50,370 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:50,370 - INFO - integration_test - Warmstart k=0: x0=1.3224344915065265 , y0=0.5094244352796415 , psi0=0.6399999868885549 , v0=2.600000013739031 , spline0=1.520000006238762 , a0=0.0 , w0=0.0
2026-01-24 02:31:50,370 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:50,371 - INFO - integration_test - Dyn residual k=0: pred=[1.530979391694269, 0.6646952481200271, 0.6399999868885549, 2.600000013739031, 1.780000007612665], ws=[1.530979391694269, 0.6646952481200271, 0.6399999868885549, 2.600000013739031, 1.3696969712348819], res=[0.0, 0.0, 0.0, 0.0, 0.4103030363777831], res_norm=4.103e-01
2026-01-24 02:31:50,372 - INFO - integration_test - Dyn residual k=1: pred=[1.7395242918820117, 0.8199660609604127, 0.6399999868885549, 2.600000013739031, 1.629696972608785], ws=[1.7395242918820117, 0.8199660609604127, 0.6399999868885549, 2.600000013739031, 1.7066666688452288], res=[0.0, 0.0, 0.0, 0.0, -0.07696969623644367], res_norm=7.697e-02
2026-01-24 02:31:50,372 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691920697544, 0.9752368738007983, 0.6399999868885549, 2.600000013739031, 1.9666666702191318], ws=[1.9480691920697544, 0.9752368738007983, 0.6399999868885549, 2.600000013739031, 2.064646467576699], res=[0.0, 0.0, 0.0, 0.0, -0.09797979735756712], res_norm=9.798e-02
2026-01-24 02:31:50,391 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,447 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,467 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,513 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,534 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,577 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,598 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,648 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,666 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,712 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,733 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,777 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,799 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,847 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,869 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,914 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:50,938 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:50,985 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:51,008 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:51,054 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:51,077 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:51,123 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:51,771 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 02:31:51,775 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 02:31:51,776 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:51,776 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 02:31:51,776 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199947916, 'w': 0.8000000098976998}
2026-01-24 02:31:51,776 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:51,776 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:51,777 - INFO - integration_test - Step 8 completed in 1.450s
2026-01-24 02:31:51,831 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 02:31:51,832 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223933 0.67925693 0.71999999 2.80000002 1.80000001]
2026-01-24 02:31:51,832 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 02:31:51,832 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 02:31:51,833 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:51,848 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 02:31:51,848 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 02:31:51,851 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:51,879 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:51,879 - INFO - integration_test - Warmstart k=0: x0=1.5322393343684382 , y0=0.6792569317013706 , psi0=0.7199999878783249 , v0=2.80000001573851 , spline0=1.800000007812613 , a0=0.0 , w0=0.0
2026-01-24 02:31:51,879 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:51,880 - INFO - integration_test - Dyn residual k=0: pred=[1.742744941949116, 0.8638846383394757, 0.7199999878783249, 2.80000001573851, 2.080000009386464], ws=[1.742744941949116, 0.8638846383394757, 0.719999987878325, 2.80000001573851, 1.7163636386391428], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.36363637074732136], res_norm=3.636e-01
2026-01-24 02:31:51,881 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505495297938, 1.0485123449775808, 0.719999987878325, 2.80000001573851, 1.9963636402129938], ws=[1.953250549529794, 1.0485123449775808, 0.719999987878325, 2.80000001573851, 2.0816161647160487], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, -0.08525252450305487], res_norm=8.525e-02
2026-01-24 02:31:51,882 - INFO - integration_test - Dyn residual k=2: pred=[2.163756157110472, 1.233140051615686, 0.719999987878325, 2.80000001573851, 2.3616161662899], ws=[2.163756157110472, 1.233140051615686, 0.719999987878325, 2.80000001573851, 1.9292929324581227], res=[0.0, 0.0, 0.0, 0.0, 0.43232323383177707], res_norm=4.323e-01
2026-01-24 02:31:51,898 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:51,957 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:51,980 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,028 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,049 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,099 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,121 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,169 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,191 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,240 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,261 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,310 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,333 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,383 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,406 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,457 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,479 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,528 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,551 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,600 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:52,624 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:52,675 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:53,350 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 02:31:53,356 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 02:31:53,356 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:53,356 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 02:31:53,356 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019659836, 'w': 0.8000000020065053}
2026-01-24 02:31:53,356 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:53,356 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:53,358 - INFO - integration_test - Step 9 completed in 1.526s
2026-01-24 02:31:53,427 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 02:31:53,427 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.7422939  0.8790875  0.79999999 3.00000002 2.10000001]
2026-01-24 02:31:53,428 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 02:31:53,428 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 02:31:53,429 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:53,446 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 02:31:53,446 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 02:31:53,448 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:53,478 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:53,478 - INFO - integration_test - Warmstart k=0: x0=1.7422939028848106 , y0=0.879087498953847 , psi0=0.7999999880789754 , v0=3.0000000177044934 , spline0=2.1000000095830624 , a0=0.0 , w0=0.0
2026-01-24 02:31:53,478 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:53,479 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059194879299, 1.094294325002109, 0.7999999880789754, 3.0000000177044934, 2.400000011353512], ws=[1.951305918254446, 1.0942943237320664, 0.7999999880789757, 3.0, 2.092929295639654], res=[1.2334837595773251e-09, 1.2700427376444168e-09, -2.220446049250313e-16, 1.77044934268622e-08, 0.3070707157138579], res_norm=3.071e-01
2026-01-24 02:31:53,480 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179336240816, 1.3095011485102859, 0.7999999880789757, 3.0, 2.3929292956396537], ws=[2.1603179336240816, 1.3095011485102859, 0.7999999880789757, 3.0, 2.4888888919864445], res=[0.0, 0.0, 0.0, 0.0, -0.09595959634679074], res_norm=9.596e-02
2026-01-24 02:31:53,481 - INFO - integration_test - Dyn residual k=2: pred=[2.369329948993717, 1.5247079732885054, 0.7999999880789757, 3.0, 2.7888888919864447], ws=[2.369329948993717, 1.5247079732885054, 0.7999999880789757, 3.0, 2.343434346241503], res=[0.0, 0.0, 0.0, 0.0, 0.4454545457449419], res_norm=4.455e-01
2026-01-24 02:31:53,499 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:53,558 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:53,579 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:53,628 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:53,650 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:53,699 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:53,723 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:53,773 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:53,798 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:53,852 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:53,877 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:53,929 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:53,952 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:54,006 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:54,031 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:54,081 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:54,104 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:54,154 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:54,177 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:54,231 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:54,256 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:54,309 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,099 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 02:31:55,105 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 02:31:55,105 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:55,105 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 02:31:55,105 - INFO - integration_test -   Control dict from planner: {'a': 1.22953902394161e-07, 'w': 0.8000000098636143}
2026-01-24 02:31:55,105 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:55,105 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:55,107 - INFO - integration_test - Step 10 completed in 1.680s
2026-01-24 02:31:55,179 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 02:31:55,180 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247936 1.10242087 0.87999999 3.00000003 2.40000001]
2026-01-24 02:31:55,181 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 02:31:55,181 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 02:31:55,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:55,199 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 02:31:55,199 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 02:31:55,203 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:55,232 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:55,232 - INFO - integration_test - Warmstart k=0: x0=1.9424793648667802 , y0=1.1024208709299197 , psi0=0.8799999890653368 , v0=3.0000000299998835 , spline0=2.400000012583051 , a0=0.0 , w0=0.0
2026-01-24 02:31:55,232 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:55,233 - INFO - integration_test - Dyn residual k=0: pred=[2.133624712566131, 1.333642534821708, 0.8799999890653368, 3.0000000299998835, 2.7000000155830395], ws=[2.1336247106546855, 1.3336425325095005, 0.8799999890653369, 3.0, 2.4888888929561377], res=[1.9114456684121706e-09, 2.3122075365478167e-09, -1.1102230246251565e-16, 2.999988346630289e-08, 0.2111111226269018], res_norm=2.111e-01
2026-01-24 02:31:55,234 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700564425906, 1.5648641940890813, 0.8799999890653369, 3.0, 2.7888888929561375], ws=[2.3247700564425906, 1.5648641940890813, 0.8799999890653369, 3.0, 2.343434347120288], res=[0.0, 0.0, 0.0, 0.0, 0.44545454583584965], res_norm=4.455e-01
2026-01-24 02:31:55,235 - INFO - integration_test - Dyn residual k=2: pred=[2.5159154022304957, 1.796085855668662, 0.8799999890653369, 3.0, 2.643434347120288], ws=[2.5159154022304957, 1.796085855668662, 0.8799999890653369, 3.0, 2.9343434387919882], res=[0.0, 0.0, 0.0, 0.0, -0.2909090916717001], res_norm=2.909e-01
2026-01-24 02:31:55,253 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,312 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,335 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,383 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,406 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,456 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,479 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,525 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,546 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,592 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,614 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,663 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,685 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,733 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,754 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,799 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,819 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,863 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,882 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,928 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:55,948 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:55,994 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:56,595 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 02:31:56,599 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 02:31:56,600 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:56,600 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 02:31:56,600 - INFO - integration_test -   Control dict from planner: {'a': -2.2443770968736233e-09, 'w': 0.053553128918256504}
2026-01-24 02:31:56,600 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:56,600 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:56,601 - INFO - integration_test - Step 11 completed in 1.421s
2026-01-24 02:31:56,654 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 02:31:56,655 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13300467 1.33415325 0.8853553  3.00000003 2.70000002]
2026-01-24 02:31:56,655 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-24 02:31:56,655 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 02:31:56,656 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:56,670 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 02:31:56,670 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 02:31:56,672 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:56,697 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:56,698 - INFO - integration_test - Warmstart k=0: x0=2.1330046682064263 , y0=1.3341532499483193 , psi0=0.8853553019571625 , v0=3.0000000297754457 , spline0=2.7000000155605957 , a0=0.0 , w0=0.0
2026-01-24 02:31:56,698 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:56,699 - INFO - integration_test - Dyn residual k=0: pred=[2.3229090164947133, 1.5663952364359648, 0.8853553019571625, 3.0000000297754457, 3.0000000185381404], ws=[2.3229090146098845, 1.5663952341309286, 0.885355301957162, 3.0, 2.3434343479924973], res=[1.8848287375305972e-09, 2.305036161942553e-09, 4.440892098500626e-16, 2.9775445664625977e-08, 0.6565656705456431], res_norm=6.566e-01
2026-01-24 02:31:56,699 - INFO - integration_test - Dyn residual k=1: pred=[2.5128133610133427, 1.7986372183135377, 0.885355301957162, 3.0, 2.643434347992497], ws=[2.5128133610133427, 1.7986372183135377, 0.885355301957162, 3.0, 2.9343434398446546], res=[0.0, 0.0, 0.0, 0.0, -0.2909090918521575], res_norm=2.909e-01
2026-01-24 02:31:56,702 - INFO - integration_test - Dyn residual k=2: pred=[2.702717707416801, 2.030879202496147, 0.885355301957162, 3.0, 3.234343439844655], ws=[2.702717707416801, 2.030879202496147, 0.885355301957162, 3.0, 3.301010106982855], res=[0.0, 0.0, 0.0, 0.0, -0.06666666713819991], res_norm=6.667e-02
2026-01-24 02:31:56,719 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:56,772 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:56,793 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:56,840 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:56,862 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:56,910 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:56,933 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:56,984 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:57,006 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:57,059 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:57,083 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:57,134 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:57,158 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:57,210 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:57,234 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:57,319 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:57,350 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:57,408 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:57,432 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:57,482 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:57,505 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:57,554 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,228 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 02:31:58,233 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 02:31:58,234 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:31:58,234 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 02:31:58,234 - INFO - integration_test -   Control dict from planner: {'a': -7.0747370759720735e-09, 'w': -0.22495082467396726}
2026-01-24 02:31:58,234 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:31:58,234 - INFO - integration_test -   Planner output success: True
2026-01-24 02:31:58,235 - INFO - integration_test - Step 12 completed in 1.580s
2026-01-24 02:31:58,300 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 02:31:58,300 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32550504 1.56423978 0.86286022 3.00000003 3.00000002]
2026-01-24 02:31:58,301 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-24 02:31:58,301 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 02:31:58,302 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:58,317 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.326, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-24 02:31:58,317 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 02:31:58,320 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:31:58,348 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:31:58,348 - INFO - integration_test - Warmstart k=0: x0=2.3255050418871654 , y0=1.5642397831537833 , psi0=0.8628602194897658 , v0=3.000000029067972 , spline0=3.000000018467393 , a0=0.0 , w0=0.0
2026-01-24 02:31:58,348 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:31:58,349 - INFO - integration_test - Dyn residual k=0: pred=[2.52058520566869, 1.792151457806601, 0.8628602194897658, 3.000000029067972, 3.3000000213741902], ws=[2.5205852037784955, 1.7921514555982907, 0.8628602194897654, 3.0, 2.934343440872311], res=[1.8901946674532155e-09, 2.2083102013681355e-09, 3.3306690738754696e-16, 2.906797202939515e-08, 0.36565658050187944], res_norm=3.657e-01
2026-01-24 02:31:58,350 - INFO - integration_test - Dyn residual k=1: pred=[2.7156653656698255, 2.020063128042798, 0.8628602194897654, 3.0, 3.234343440872311], ws=[2.7156653656698255, 2.020063128042798, 0.8628602194897654, 3.0, 3.301010108098595], res=[0.0, 0.0, 0.0, 0.0, -0.06666666722628412], res_norm=6.667e-02
2026-01-24 02:31:58,351 - INFO - integration_test - Dyn residual k=2: pred=[2.9107455275611556, 2.2479748004873055, 0.8628602194897654, 3.0, 3.6010101080985955], ws=[2.9107455275611556, 2.2479748004873055, 0.8628602194897654, 3.0, 3.6858585935066976], res=[0.0, 0.0, 0.0, 0.0, -0.08484848540810219], res_norm=8.485e-02
2026-01-24 02:31:58,369 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:58,431 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,458 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:58,534 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,562 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:58,613 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,636 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:58,686 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,709 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:58,758 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,779 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:58,830 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,852 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:58,900 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,922 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:58,973 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:58,999 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:59,068 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:59,101 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:59,160 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:31:59,185 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:31:59,246 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,028 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 02:32:00,035 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 02:32:00,035 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:00,035 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 02:32:00,035 - INFO - integration_test -   Control dict from planner: {'a': 9.319161022544375e-09, 'w': -0.13678343973560933}
2026-01-24 02:32:00,035 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:00,035 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:00,037 - INFO - integration_test - Step 13 completed in 1.736s
2026-01-24 02:32:00,096 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 02:32:00,102 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52213783 1.79081018 0.84918188 3.00000003 3.30000002]
2026-01-24 02:32:00,102 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-24 02:32:00,102 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 02:32:00,103 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:00,121 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 02:32:00,121 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 02:32:00,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:00,156 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:00,156 - INFO - integration_test - Warmstart k=0: x0=2.5221378254414435 , y0=1.790810184986061 , psi0=0.8491818755162048 , v0=3.0000000299998884 , spline0=3.300000021467382 , a0=0.0 , w0=0.0
2026-01-24 02:32:00,156 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:00,157 - INFO - integration_test - Dyn residual k=0: pred=[2.7203170971745023, 2.0160322488593585, 0.8491818755162048, 3.0000000299998884, 3.600000024467371], ws=[2.720317095192717, 2.0160322466071463, 0.849181875516205, 3.0, 3.301010109250106], res=[1.981785402449532e-09, 2.252212194520098e-09, -2.220446049250313e-16, 2.99998883512842e-08, 0.2989899152172648], res_norm=2.990e-01
2026-01-24 02:32:00,158 - INFO - integration_test - Dyn residual k=1: pred=[2.9184963649439903, 2.241254308228232, 0.849181875516205, 3.0, 3.6010101092501063], ws=[2.9184963649439903, 2.241254308228232, 0.849181875516205, 3.0, 3.6858585947491176], res=[0.0, 0.0, 0.0, 0.0, -0.08484848549901125], res_norm=8.485e-02
2026-01-24 02:32:00,159 - INFO - integration_test - Dyn residual k=2: pred=[3.1166756346952638, 2.4664763698493175, 0.849181875516205, 3.0, 3.985858594749118], ws=[3.1166756346952638, 2.4664763698493175, 0.849181875516205, 3.0, 3.810101018991542], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:32:00,177 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,247 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,272 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,319 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,341 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,389 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,411 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,457 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,479 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,526 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,547 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,597 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,619 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,666 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,688 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,735 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,757 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,804 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,828 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,876 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:00,899 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:00,948 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:01,624 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 02:32:01,629 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 02:32:01,629 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:01,629 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 02:32:01,629 - INFO - integration_test -   Control dict from planner: {'a': -8.153395981763282e-11, 'w': -0.15155973662304223}
2026-01-24 02:32:01,629 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:01,629 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:01,631 - INFO - integration_test - Step 14 completed in 1.529s
2026-01-24 02:32:01,692 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 02:32:01,692 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72201621 2.01452186 0.8340259  3.00000003 3.60000002]
2026-01-24 02:32:01,693 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-24 02:32:01,693 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 02:32:01,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:01,708 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 02:32:01,708 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 02:32:01,710 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:01,739 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:01,739 - INFO - integration_test - Warmstart k=0: x0=2.722016207349273 , y0=2.01452185541382 , psi0=0.8340259018539006 , v0=3.000000029991735 , spline0=3.6000000244665555 , a0=0.0 , w0=0.0
2026-01-24 02:32:01,739 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:01,740 - INFO - integration_test - Dyn residual k=0: pred=[2.9235860472666797, 2.236714567794706, 0.8340259018539006, 3.000000029991735, 3.900000027465729], ws=[2.9235860452515365, 2.236714565573391, 0.8340259018539005, 3.0, 3.6858585959911996], res=[2.0151431634474193e-09, 2.2213151318339897e-09, 1.1102230246251565e-16, 2.999173487339135e-08, 0.21414143147452958], res_norm=2.141e-01
2026-01-24 02:32:01,741 - INFO - integration_test - Dyn residual k=1: pred=[3.1251558831538, 2.4589072757329618, 0.8340259018539005, 3.0, 3.9858585959912], ws=[3.1251558831538, 2.4589072757329618, 0.8340259018539005, 3.0, 3.810101020233623], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-24 02:32:01,742 - INFO - integration_test - Dyn residual k=2: pred=[3.326725721056064, 2.6810999858925326, 0.8340259018539005, 3.0, 4.110101020233623], ws=[3.326725721056064, 2.6810999858925326, 0.8340259018539005, 3.0, 3.9343434444760477], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757534], res_norm=1.758e-01
2026-01-24 02:32:01,758 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:01,818 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:01,843 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:01,916 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:01,951 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,009 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:02,031 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,080 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:02,101 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,149 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:02,170 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,225 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:02,253 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,306 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:02,329 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,377 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:02,399 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,450 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:02,473 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,522 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:02,545 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:02,593 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:03,319 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 02:32:03,325 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 02:32:03,325 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:03,325 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 02:32:03,325 - INFO - integration_test -   Control dict from planner: {'a': -1.3491914898509754e-07, 'w': -0.12430795513105394}
2026-01-24 02:32:03,325 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:03,325 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:03,327 - INFO - integration_test - Step 15 completed in 1.634s
2026-01-24 02:32:03,384 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 02:32:03,385 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92496185 2.23545602 0.82159511 3.00000002 3.90000003]
2026-01-24 02:32:03,385 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.418m, drift=0.213m)
2026-01-24 02:32:03,385 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 02:32:03,386 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:03,402 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.925, 2.235), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 02:32:03,402 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 02:32:03,406 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:03,433 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:03,433 - INFO - integration_test - Warmstart k=0: x0=2.9249618539014075 , y0=2.2354560243706576 , psi0=0.8215951063407951 , v0=3.00000001649982 , spline0=3.9000000261165377 , a0=0.0 , w0=0.0
2026-01-24 02:32:03,434 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:03,435 - INFO - integration_test - Dyn residual k=0: pred=[3.1292780803822433, 2.455125959925392, 0.8215951063407951, 3.00000001649982, 4.20000002776652], ws=[3.1292780792585164, 2.45512595871722, 0.8215951063407951, 3.0, 3.81010102091695], res=[1.1237268893182772e-09, 1.2081717848388962e-09, 0.0, 1.6499820176818503e-08, 0.38989900684957], res_norm=3.899e-01
2026-01-24 02:32:03,435 - INFO - integration_test - Dyn residual k=1: pred=[3.3335943046156253, 2.6747958930637825, 0.8215951063407951, 3.0, 4.11010102091695], ws=[3.3335943046156253, 2.6747958930637825, 0.8215951063407951, 3.0, 3.9343434451593744], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:32:03,436 - INFO - integration_test - Dyn residual k=2: pred=[3.5379105299727343, 2.894465827410345, 0.8215951063407951, 3.0, 4.234343445159374], ws=[3.5379105299727343, 2.894465827410345, 0.8215951063407951, 3.0, 4.058585869401798], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:32:03,453 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:03,510 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:03,530 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:03,574 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:03,596 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:03,641 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:03,662 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:03,707 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:03,727 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:03,773 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:03,793 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:03,841 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:03,862 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:03,910 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:03,931 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:03,978 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:04,001 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:04,052 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:04,073 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:04,120 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:04,141 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:04,186 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:04,817 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 02:32:04,823 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 02:32:04,823 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:04,823 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 02:32:04,823 - INFO - integration_test -   Control dict from planner: {'a': 1.3498462034117398e-07, 'w': -0.1295368631425337}
2026-01-24 02:32:04,823 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:04,824 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:04,825 - INFO - integration_test - Step 16 completed in 1.440s
2026-01-24 02:32:04,872 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 02:32:04,872 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.13069511 2.45379651 0.80864142 3.00000003 4.20000003]
2026-01-24 02:32:04,873 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.415m, drift=0.103m)
2026-01-24 02:32:04,873 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 02:32:04,873 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:04,887 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.131, 2.454), path_start=(0.000, 0.000), dist=3.978m
2026-01-24 02:32:04,887 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 02:32:04,890 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:04,919 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:04,919 - INFO - integration_test - Warmstart k=0: x0=3.1306951147450155 , y0=2.453796511457821 , psi0=0.8086414200265417 , v0=3.000000029998282 , spline0=4.2000000291163655 , a0=0.0 , w0=0.0
2026-01-24 02:32:04,919 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:04,920 - INFO - integration_test - Dyn residual k=0: pred=[3.3378396563309463, 2.670801443869625, 0.8086414200265417, 3.000000029998282, 4.500000032116194], ws=[3.3378396542596196, 2.6708014416997, 0.8086414200265417, 3.0, 3.934343446401727], res=[2.07132666574239e-09, 2.1699251284701404e-09, 0.0, 2.999828208061217e-08, 0.5656565857144673], res_norm=5.657e-01
2026-01-24 02:32:04,921 - INFO - integration_test - Dyn residual k=1: pred=[3.5449841937742237, 2.8878063719415787, 0.8086414200265417, 3.0, 4.234343446401727], ws=[3.5449841937742237, 2.8878063719415787, 0.8086414200265417, 3.0, 4.058585870644151], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 02:32:04,922 - INFO - integration_test - Dyn residual k=2: pred=[3.752128733288828, 3.1048113021834576, 0.8086414200265417, 3.0, 4.358585870644151], ws=[3.752128733288828, 3.1048113021834576, 0.8086414200265417, 3.0, 4.64545457457091], res=[0.0, 0.0, 0.0, 0.0, -0.2868687039267588], res_norm=2.869e-01
2026-01-24 02:32:04,938 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:04,994 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,015 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,063 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,083 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,127 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,146 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,192 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,212 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,261 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,291 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,361 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,384 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,432 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,453 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,495 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,514 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,559 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,577 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,623 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:05,643 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:05,685 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:06,322 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 02:32:06,328 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 02:32:06,328 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:06,328 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 02:32:06,328 - INFO - integration_test -   Control dict from planner: {'a': -5.337578107142558e-10, 'w': -0.11102296616395123}
2026-01-24 02:32:06,329 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:06,329 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:06,330 - INFO - integration_test - Step 17 completed in 1.458s
2026-01-24 02:32:06,393 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 02:32:06,393 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.33904002 2.66964711 0.79753912 3.00000003 4.50000003]
2026-01-24 02:32:06,394 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.408m, drift=0.403m)
2026-01-24 02:32:06,394 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 02:32:06,395 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:06,412 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.339, 2.670), path_start=(0.000, 0.000), dist=4.275m
2026-01-24 02:32:06,412 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 02:32:06,416 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:06,444 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:06,444 - INFO - integration_test - Warmstart k=0: x0=3.339040015072722 , y0=2.6696471075956056 , psi0=0.7975391234101465 , v0=3.000000029944906 , spline0=4.500000032110856 , a0=0.0 , w0=0.0
2026-01-24 02:32:06,444 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:06,445 - INFO - integration_test - Dyn residual k=0: pred=[3.5485809939980806, 2.88433893312163, 0.7975391234101465, 3.000000029944906, 4.800000035105347], ws=[3.548580991906519, 2.8843389309786542, 0.7975391234101465, 3.0, 4.0585858718842935], res=[2.0915615905892082e-09, 2.1429755747703894e-09, 0.0, 2.994490611030187e-08, 0.7414141632210534], res_norm=7.414e-01
2026-01-24 02:32:06,446 - INFO - integration_test - Dyn residual k=1: pred=[3.758121968740316, 3.099030754361703, 0.7975391234101465, 3.0, 4.358585871884293], ws=[3.758121968740316, 3.099030754361703, 0.7975391234101465, 3.0, 4.645454577565401], res=[0.0, 0.0, 0.0, 0.0, -0.28686870568110745], res_norm=2.869e-01
2026-01-24 02:32:06,447 - INFO - integration_test - Dyn residual k=2: pred=[3.967662945574113, 3.3137225777447514, 0.7975391234101465, 3.0, 4.945454577565401], ws=[3.967662945574113, 3.3137225777447514, 0.7975391234101465, 3.0, 5.046464678575502], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:32:06,465 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:06,525 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:06,548 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:06,621 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:06,654 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:06,711 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:06,735 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:06,784 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:06,808 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:06,858 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:06,880 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:06,928 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:06,953 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:07,005 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:07,029 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:07,077 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:07,099 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:07,147 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:07,168 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:07,218 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:07,240 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:07,288 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,008 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 02:32:08,014 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 02:32:08,015 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:08,015 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 02:32:08,015 - INFO - integration_test -   Control dict from planner: {'a': 5.49763761119759e-10, 'w': -0.11216702498037387}
2026-01-24 02:32:08,015 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:08,015 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:08,017 - INFO - integration_test - Step 18 completed in 1.624s
2026-01-24 02:32:08,076 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 02:32:08,077 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54978065 2.88315926 0.78632242 3.00000003 4.80000004]
2026-01-24 02:32:08,077 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.357m, drift=0.293m)
2026-01-24 02:32:08,077 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-24 02:32:08,078 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:08,093 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.550, 2.883), path_start=(0.000, 0.000), dist=4.573m
2026-01-24 02:32:08,093 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 02:32:08,097 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:08,125 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:08,125 - INFO - integration_test - Warmstart k=0: x0=3.549780654693348 , y0=2.8831592641756205 , psi0=0.7863224209121091 , v0=3.0000000299998826 , spline0=4.800000035110845 , a0=0.0 , w0=0.0
2026-01-24 02:32:08,125 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:08,126 - INFO - integration_test - Dyn residual k=0: pred=[3.761716535962628, 3.0954872746466995, 0.7863224209121091, 3.0000000299998826, 5.100000038110833], ws=[3.7617165338432774, 3.0954872725234277, 0.7863224209121089, 3.0, 4.6454545805653895], res=[2.119350472895576e-09, 2.123271780618552e-09, 2.220446049250313e-16, 2.999988257812447e-08, 0.45454545754544373], res_norm=4.545e-01
2026-01-24 02:32:08,127 - INFO - integration_test - Dyn residual k=1: pred=[3.9736524129932067, 3.307815280871235, 0.7863224209121089, 3.0, 4.945454580565389], ws=[3.9736524129932067, 3.307815280871235, 0.7863224209121089, 3.0, 5.0464646815754906], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:32:08,128 - INFO - integration_test - Dyn residual k=2: pred=[4.185588292143136, 3.520143289219042, 0.7863224209121089, 3.0, 5.34646468157549], ws=[4.185588292143136, 3.520143289219042, 0.7863224209121089, 3.0, 5.144444479555289], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:32:08,144 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,204 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,228 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,276 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,299 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,348 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,369 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,418 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,440 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,488 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,510 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,558 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,580 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,630 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,653 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,701 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,723 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,769 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,790 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,837 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:08,873 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:08,948 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:09,657 - INFO - integration_test - Step 19: MPC solve successful
2026-01-24 02:32:09,662 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-24 02:32:09,662 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:09,662 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 02:32:09,662 - INFO - integration_test -   Control dict from planner: {'a': -1.9981489532954238e-11, 'w': -0.09960172063099004}
2026-01-24 02:32:09,662 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:09,662 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:09,664 - INFO - integration_test - Step 19 completed in 1.587s
2026-01-24 02:32:09,723 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 02:32:09,724 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.76277043 3.09442831 0.77636225 3.00000003 5.10000004]
2026-01-24 02:32:09,725 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.339m, drift=0.184m)
2026-01-24 02:32:09,725 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-24 02:32:09,725 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:09,741 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.763, 3.094), path_start=(0.000, 0.000), dist=4.872m
2026-01-24 02:32:09,741 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 02:32:09,744 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:09,770 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:09,770 - INFO - integration_test - Warmstart k=0: x0=3.7627704348138797 , y0=3.094428313800725 , psi0=0.7763622488490102 , v0=3.0000000299978846 , spline0=5.100000038110633 , a0=0.0 , w0=0.0
2026-01-24 02:32:09,770 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:09,771 - INFO - integration_test - Dyn residual k=0: pred=[3.976810592168884, 3.3046349094139886, 0.7763622488490102, 3.0000000299978846, 5.400000041110422], ws=[3.9768105900286335, 3.304634907312071, 0.7763622488490101, 3.0, 5.046464684575279], res=[2.1402506433787494e-09, 2.1019177509629117e-09, 1.1102230246251565e-16, 2.9997884620769355e-08, 0.3535353565351427], res_norm=3.535e-01
2026-01-24 02:32:09,772 - INFO - integration_test - Dyn residual k=1: pred=[4.190850745243387, 3.5148415008234166, 0.7763622488490101, 3.0, 5.346464684575279], ws=[4.190850745243387, 3.5148415008234166, 0.7763622488490101, 3.0, 5.144444482555078], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:32:09,772 - INFO - integration_test - Dyn residual k=2: pred=[4.404890900458141, 3.7250480943347624, 0.7763622488490101, 3.0, 5.4444444825550775], ws=[4.404890900458141, 3.7250480943347624, 0.7763622488490101, 3.0, 5.74747478558538], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:09,789 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:09,850 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:09,871 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:09,918 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:09,942 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:09,994 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:10,019 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:10,069 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:10,091 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:10,148 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:10,170 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:10,220 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:10,243 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:10,291 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:10,313 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:10,361 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:10,382 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:10,432 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:10,454 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:10,503 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:10,525 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:10,572 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,235 - INFO - integration_test - Step 20: MPC solve successful
2026-01-24 02:32:11,240 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-24 02:32:11,241 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:11,241 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 02:32:11,241 - INFO - integration_test -   Control dict from planner: {'a': 1.9846268753040045e-11, 'w': -0.0932720570960647}
2026-01-24 02:32:11,241 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:11,241 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:11,242 - INFO - integration_test - Step 20 completed in 1.518s
2026-01-24 02:32:11,298 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 02:32:11,298 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.9777878  3.30363367 0.76703504 3.00000003 5.40000004]
2026-01-24 02:32:11,299 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.356m, drift=0.074m)
2026-01-24 02:32:11,299 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-24 02:32:11,299 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:11,314 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.978, 3.304), path_start=(0.000, 0.000), dist=5.171m
2026-01-24 02:32:11,314 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 02:32:11,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:11,344 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:11,345 - INFO - integration_test - Warmstart k=0: x0=3.977787801688458 , y0=3.3036336704932823 , psi0=0.7670350431394037 , v0=3.0000000299998693 , spline0=5.40000004111062 , a0=0.0 , w0=0.0
2026-01-24 02:32:11,345 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:11,346 - INFO - integration_test - Dyn residual k=0: pred=[4.193779260441023, 3.5118347548947124, 0.7670350431394037, 3.0000000299998693, 5.700000044110607], ws=[4.1937792582811175, 3.5118347528127107, 0.767035043139404, 3.0, 5.144444485555065], res=[2.1599051436282934e-09, 2.082001682168766e-09, -2.220446049250313e-16, 2.9999869255448175e-08, 0.5555555585555423], res_norm=5.556e-01
2026-01-24 02:32:11,346 - INFO - integration_test - Dyn residual k=1: pred=[4.409770714873777, 3.720035835132139, 0.767035043139404, 3.0, 5.444444485555064], ws=[4.409770714873777, 3.720035835132139, 0.767035043139404, 3.0, 5.747474788585367], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:11,347 - INFO - integration_test - Dyn residual k=2: pred=[4.6257621714664365, 3.9282369174515677, 0.767035043139404, 3.0, 6.047474788585367], ws=[4.6257621714664365, 3.9282369174515677, 0.767035043139404, 3.0, 5.643434384544963], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:32:11,363 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,421 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,443 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,491 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,512 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,560 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,581 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,626 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,646 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,689 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,707 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,751 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,771 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,826 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,856 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,906 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,926 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:11,969 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:11,989 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:12,037 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:12,057 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:12,103 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:12,817 - INFO - integration_test - Step 21: MPC solve successful
2026-01-24 02:32:12,823 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-24 02:32:12,823 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:12,823 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 02:32:12,823 - INFO - integration_test -   Control dict from planner: {'a': -2.917874625568312e-09, 'w': -0.08861257406590392}
2026-01-24 02:32:12,823 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:12,823 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:12,824 - INFO - integration_test - Step 21 completed in 1.526s
2026-01-24 02:32:12,877 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-24 02:32:12,878 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.19469889 3.51087506 0.75817379 3.00000003 5.70000004]
2026-01-24 02:32:12,878 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.336m, drift=0.374m)
2026-01-24 02:32:12,878 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-24 02:32:12,879 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:12,893 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.195, 3.511), path_start=(0.000, 0.000), dist=5.470m
2026-01-24 02:32:12,893 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-24 02:32:12,896 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:12,924 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:12,924 - INFO - integration_test - Warmstart k=0: x0=4.194698889430521 , y0=3.510875058477409 , psi0=0.7581737857328134 , v0=3.0000000297080818 , spline0=5.7000000440814285 , a0=0.0 , w0=0.0
2026-01-24 02:32:12,924 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:12,925 - INFO - integration_test - Dyn residual k=0: pred=[4.41252676744621, 3.7171540378758605, 0.7581737857328134, 3.0000000297080818, 6.000000047052237], ws=[4.412526765289128, 3.717154035833143, 0.7581737857328132, 3.0, 5.747474791556176], res=[2.1570825126104864e-09, 2.0427175506654294e-09, 1.1102230246251565e-16, 2.970808177238382e-08, 0.2525252554960611], res_norm=2.525e-01
2026-01-24 02:32:12,926 - INFO - integration_test - Dyn residual k=1: pred=[4.6303546411477345, 3.923433013188877, 0.7581737857328132, 3.0, 6.0474747915561755], ws=[4.6303546411477345, 3.923433013188877, 0.7581737857328132, 3.0, 5.6434343875157715], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:32:12,927 - INFO - integration_test - Dyn residual k=2: pred=[4.848182517006341, 4.129711990544611, 0.7581737857328132, 3.0, 5.943434387515771], ws=[4.848182517006341, 4.129711990544611, 0.7581737857328132, 3.0, 6.246464690546074], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:12,944 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,006 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,028 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,074 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,094 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,139 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,159 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,225 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,262 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,321 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,342 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,390 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,414 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,461 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,484 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,546 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,575 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,647 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,679 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,748 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:13,775 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:13,828 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:14,556 - INFO - integration_test - Step 22: MPC solve successful
2026-01-24 02:32:14,561 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-24 02:32:14,561 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:14,561 - INFO - integration_test - === Applying control at step 22 ===
2026-01-24 02:32:14,561 - INFO - integration_test -   Control dict from planner: {'a': 2.3052500584608708e-09, 'w': -0.07959823655878503}
2026-01-24 02:32:14,561 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:14,561 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:14,563 - INFO - integration_test - Step 22 completed in 1.686s
2026-01-24 02:32:14,622 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-24 02:32:14,622 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.41334544 3.71628493 0.75021396 3.00000003 6.00000005]
2026-01-24 02:32:14,623 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.293m, drift=0.264m)
2026-01-24 02:32:14,623 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-24 02:32:14,623 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:14,642 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.413, 3.716), path_start=(0.000, 0.000), dist=5.770m
2026-01-24 02:32:14,642 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-24 02:32:14,645 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:14,674 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:14,674 - INFO - integration_test - Warmstart k=0: x0=4.413345435058977 , y0=3.7162849284555692 , psi0=0.7502139620769348 , v0=3.0000000299386067 , spline0=6.0000000470752894 , a0=0.0 , w0=0.0
2026-01-24 02:32:14,674 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:14,675 - INFO - integration_test - Dyn residual k=0: pred=[4.6328083394336685, 3.920823519923638, 0.7502139620769348, 3.0000000299386067, 6.30000005006915], ws=[4.632808337243531, 3.9208235178824378, 0.750213962076935, 3.0, 5.643434390509633], res=[2.190137848856466e-09, 2.0412000978353717e-09, -2.220446049250313e-16, 2.993860670486015e-08, 0.6565656595595177], res_norm=6.566e-01
2026-01-24 02:32:14,676 - INFO - integration_test - Dyn residual k=1: pred=[4.8522712394280845, 4.125362107309306, 0.750213962076935, 3.0, 5.9434343905096325], ws=[4.8522712394280845, 4.125362107309306, 0.750213962076935, 3.0, 6.246464693539935], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:14,677 - INFO - integration_test - Dyn residual k=2: pred=[5.071734141612638, 4.329900696736175, 0.750213962076935, 3.0, 6.546464693539935], ws=[5.071734141612638, 4.329900696736175, 0.750213962076935, 3.0, 6.3444444915197336], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:32:14,695 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:14,755 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:14,777 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:14,827 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:14,850 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:14,898 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:14,919 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:14,968 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:14,989 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:15,041 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:15,064 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:15,112 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:15,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:15,186 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:15,208 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:15,259 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:15,282 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:15,332 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:15,368 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:15,441 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:15,467 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:15,527 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,254 - INFO - integration_test - Step 23: MPC solve successful
2026-01-24 02:32:16,259 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-24 02:32:16,259 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:16,259 - INFO - integration_test - === Applying control at step 23 ===
2026-01-24 02:32:16,259 - INFO - integration_test -   Control dict from planner: {'a': 6.127464163900519e-10, 'w': -0.07863413010582286}
2026-01-24 02:32:16,259 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:16,259 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:16,261 - INFO - integration_test - Step 23 completed in 1.638s
2026-01-24 02:32:16,326 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-24 02:32:16,326 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.63361026 3.91995855 0.74235055 3.00000003 6.30000005]
2026-01-24 02:32:16,327 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.288m, drift=0.155m)
2026-01-24 02:32:16,327 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-24 02:32:16,327 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:16,343 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.634, 3.920), path_start=(0.000, 0.000), dist=6.069m
2026-01-24 02:32:16,343 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-24 02:32:16,345 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:16,374 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:16,374 - INFO - integration_test - Warmstart k=0: x0=4.633610259325462 , y0=3.9199585527683727 , psi0=0.7423505490663526 , v0=3.0000000299998812 , spline0=6.300000050075278 , a0=0.0 , w0=0.0
2026-01-24 02:32:16,374 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:16,375 - INFO - integration_test - Dyn residual k=0: pred=[4.854674733531985, 4.122765110955693, 0.7423505490663526, 3.0000000299998812, 6.6000000530752665], ws=[4.8546747313213485, 4.122765108927635, 0.7423505490663524, 3.0, 6.246464696539924], res=[2.210636118604725e-09, 2.028057721759069e-09, 1.1102230246251565e-16, 2.999988124585684e-08, 0.3535353565353425], res_norm=3.535e-01
2026-01-24 02:32:16,376 - INFO - integration_test - Dyn residual k=1: pred=[5.075739203317235, 4.325571665086898, 0.7423505490663524, 3.0, 6.546464696539924], ws=[5.075739203317235, 4.325571665086898, 0.7423505490663524, 3.0, 6.344444494519722], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:32:16,377 - INFO - integration_test - Dyn residual k=2: pred=[5.296803675313121, 4.52837822124616, 0.7423505490663524, 3.0, 6.644444494519722], ws=[5.296803675313121, 4.52837822124616, 0.7423505490663524, 3.0, 6.745454595529822], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-24 02:32:16,394 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:16,455 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,475 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:16,523 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,546 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:16,593 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,615 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:16,664 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,686 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:16,736 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,758 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:16,804 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,827 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:16,876 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,898 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:16,946 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:16,968 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:17,020 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:17,043 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:17,091 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:17,114 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:17,161 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:17,934 - INFO - integration_test - Step 24: MPC solve successful
2026-01-24 02:32:17,939 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-24 02:32:17,940 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:17,940 - INFO - integration_test - === Applying control at step 24 ===
2026-01-24 02:32:17,940 - INFO - integration_test -   Control dict from planner: {'a': -5.437718270029838e-13, 'w': -0.07490803634933611}
2026-01-24 02:32:17,940 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:17,940 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:17,941 - INFO - integration_test - Step 24 completed in 1.615s
2026-01-24 02:32:18,005 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-24 02:32:18,005 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.85543225 4.12193524 0.73485975 3.00000003 6.60000005]
2026-01-24 02:32:18,006 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.323m, drift=0.045m)
2026-01-24 02:32:18,006 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-24 02:32:18,006 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:18,024 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.855, 4.122), path_start=(0.000, 0.000), dist=6.369m
2026-01-24 02:32:18,024 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-24 02:32:18,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:18,055 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:18,055 - INFO - integration_test - Warmstart k=0: x0=4.855432254637712 , y0=4.121935242897743 , psi0=0.734859745431419 , v0=3.000000029999827 , spline0=6.600000053075261 , a0=0.0 , w0=0.0
2026-01-24 02:32:18,055 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:18,056 - INFO - integration_test - Dyn residual k=0: pred=[5.078009696568822, 4.323080176076268, 0.734859745431419, 3.000000029999827, 6.900000056075244], ws=[5.07800969434306, 4.323080174064831, 0.734859745431419, 3.0, 6.344444497519706], res=[2.2257617970922183e-09, 2.0114372389912205e-09, 0.0, 2.999982706697324e-08, 0.5555555585555387], res_norm=5.556e-01
2026-01-24 02:32:18,057 - INFO - integration_test - Dyn residual k=1: pred=[5.300587134048408, 4.524225105231919, 0.734859745431419, 3.0, 6.6444444975197055], ws=[5.300587134048408, 4.524225105231919, 0.734859745431419, 3.0, 6.745454598529806], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-24 02:32:18,057 - INFO - integration_test - Dyn residual k=2: pred=[5.523164573753756, 4.725370036399006, 0.734859745431419, 3.0, 7.045454598529806], ws=[5.523164573753756, 4.725370036399006, 0.734859745431419, 3.0, 6.843434396509604], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:32:18,074 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,131 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,153 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,200 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,225 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,273 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,294 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,343 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,364 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,411 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,433 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,480 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,502 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,548 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,569 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,614 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,636 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,686 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,709 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,756 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:18,778 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:18,825 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:19,696 - INFO - integration_test - Step 25: MPC solve successful
2026-01-24 02:32:19,701 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-24 02:32:19,701 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:19,701 - INFO - integration_test - === Applying control at step 25 ===
2026-01-24 02:32:19,701 - INFO - integration_test -   Control dict from planner: {'a': -3.7386253806803643e-13, 'w': -0.0697927342550908}
2026-01-24 02:32:19,702 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:19,702 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:19,703 - INFO - integration_test - Step 25 completed in 1.698s
2026-01-24 02:32:19,761 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-24 02:32:19,761 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.07870981 4.32230183 0.72788047 3.00000003 6.90000006]
2026-01-24 02:32:19,762 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.282m, drift=0.345m)
2026-01-24 02:32:19,762 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-24 02:32:19,762 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:19,782 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.079, 4.322), path_start=(0.000, 0.000), dist=6.669m
2026-01-24 02:32:19,782 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-24 02:32:19,786 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:19,832 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:19,832 - INFO - integration_test - Warmstart k=0: x0=5.0787098095001575 , y0=4.32230183185019 , psi0=0.7278804720059099 , v0=3.0000000299997898 , spline0=6.90000005607524 , a0=0.0 , w0=0.0
2026-01-24 02:32:19,832 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:19,834 - INFO - integration_test - Dyn residual k=0: pred=[5.302685664640898, 4.52188844992355, 0.7278804720059099, 3.0000000299997898, 7.200000059075219], ws=[5.302685662401156, 4.521888447927697, 0.7278804720059098, 3.0, 6.745454601529785], res=[2.239742613596718e-09, 1.9958523722607424e-09, 1.1102230246251565e-16, 2.999978976347961e-08, 0.45454545754543396], res_norm=4.545e-01
2026-01-24 02:32:19,835 - INFO - integration_test - Dyn residual k=1: pred=[5.526661515302154, 4.721475064005205, 0.7278804720059098, 3.0, 7.0454546015297845], ws=[5.526661515302154, 4.721475064005205, 0.7278804720059098, 3.0, 6.843434399509583], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:32:19,837 - INFO - integration_test - Dyn residual k=2: pred=[5.750637368203152, 4.921061680082712, 0.7278804720059098, 3.0, 7.143434399509583], ws=[5.750637368203152, 4.921061680082712, 0.7278804720059098, 3.0, 7.446464702539886], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:19,862 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:19,923 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:19,943 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:19,989 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,011 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,061 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,080 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,126 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,146 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,193 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,215 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,262 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,284 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,333 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,354 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,402 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,423 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,468 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,491 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,537 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:20,559 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:20,607 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:21,723 - INFO - integration_test - Step 26: MPC solve successful
2026-01-24 02:32:21,728 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-24 02:32:21,729 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:21,729 - INFO - integration_test - === Applying control at step 26 ===
2026-01-24 02:32:21,729 - INFO - integration_test -   Control dict from planner: {'a': -9.249579885219854e-07, 'w': -0.05794772287423022}
2026-01-24 02:32:21,729 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:21,729 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:21,730 - INFO - integration_test - Step 26 completed in 1.969s
2026-01-24 02:32:21,798 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-24 02:32:21,799 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.30326269 4.52123839 0.7220857  2.99999994 7.20000005]
2026-01-24 02:32:21,799 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.246m, drift=0.235m)
2026-01-24 02:32:21,799 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-24 02:32:21,800 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:21,822 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.303, 4.521), path_start=(0.000, 0.000), dist=6.969m
2026-01-24 02:32:21,822 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-24 02:32:21,825 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:21,858 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:21,858 - INFO - integration_test - Warmstart k=0: x0=5.303262685566641 , y0=4.52123838713942 , psi0=0.7220856997184869 , v0=2.9999999375039907 , spline0=7.200000049825639 , a0=0.0 , w0=0.0
2026-01-24 02:32:21,858 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:21,859 - INFO - integration_test - Dyn residual k=0: pred=[5.528391325821528, 4.71952376629589, 0.7220856997184869, 2.9999999375039907, 7.500000043576038], ws=[5.528391325821528, 4.71952376629589, 0.722085699718487, 2.9999999375039907, 6.843434387010381], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.6565656565656566], res_norm=6.566e-01
2026-01-24 02:32:21,860 - INFO - integration_test - Dyn residual k=1: pred=[5.753519966076415, 4.9178091454523605, 0.722085699718487, 2.9999999375039907, 7.14343438076078], ws=[5.753519966076415, 4.917809145452361, 0.722085699718487, 2.9999999375039907, 7.446464683791083], res=[0.0, -8.881784197001252e-16, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:21,861 - INFO - integration_test - Dyn residual k=2: pred=[5.978648606331302, 5.116094524608831, 0.722085699718487, 2.9999999375039907, 7.746464677541482], ws=[5.978648606331302, 5.116094524608831, 0.722085699718487, 2.9999999375039907, 7.342424273501079], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-24 02:32:21,881 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:21,950 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:21,973 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,023 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,049 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,101 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,123 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,173 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,196 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,247 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,270 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,319 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,342 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,391 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,414 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,466 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,489 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,538 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,560 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,625 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:22,683 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:22,764 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:23,488 - INFO - integration_test - Step 27: MPC solve successful
2026-01-24 02:32:23,493 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-24 02:32:23,493 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:23,493 - INFO - integration_test - === Applying control at step 27 ===
2026-01-24 02:32:23,493 - INFO - integration_test -   Control dict from planner: {'a': 9.249588879829255e-07, 'w': -0.0744812441105574}
2026-01-24 02:32:23,494 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:23,494 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:23,495 - INFO - integration_test - Step 27 completed in 1.697s
2026-01-24 02:32:23,556 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-24 02:32:23,557 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.52912767 4.71868355 0.71463758 3.00000003 7.50000005]
2026-01-24 02:32:23,557 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.256m, drift=0.126m)
2026-01-24 02:32:23,557 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-24 02:32:23,558 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:23,573 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.529, 4.719), path_start=(0.000, 0.000), dist=7.269m
2026-01-24 02:32:23,573 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-24 02:32:23,576 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:23,605 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:23,605 - INFO - integration_test - Warmstart k=0: x0=5.52912767150075 , y0=4.718683546856967 , psi0=0.7146375753074312 , v0=3.0000000299998795 , spline0=7.5000000528256265 , a0=0.0 , w0=0.0
2026-01-24 02:32:23,605 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:23,606 - INFO - integration_test - Dyn residual k=0: pred=[5.755726914833433, 4.915286661585723, 0.7146375753074312, 3.0000000299998795, 7.800000055825614], ws=[5.75572691256745, 4.915286659619699, 0.7146375753074312, 3.0, 7.4464646992902725], res=[2.2659829568283385e-09, 1.9660237882135334e-09, 0.0, 2.99998794695e-08, 0.3535353565353416], res_norm=3.535e-01
2026-01-24 02:32:23,607 - INFO - integration_test - Dyn residual k=1: pred=[5.98232615363415, 5.1118897723824315, 0.7146375753074312, 3.0, 7.746464699290272], ws=[5.98232615363415, 5.1118897723824315, 0.7146375753074312, 3.0, 7.342424295249868], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:32:23,607 - INFO - integration_test - Dyn residual k=2: pred=[6.2089253947008505, 5.308492885145164, 0.7146375753074312, 3.0, 7.642424295249868], ws=[6.2089253947008505, 5.308492885145164, 0.7146375753074312, 3.0, 7.945454598280172], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030365], res_norm=3.030e-01
2026-01-24 02:32:23,625 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:23,683 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:23,705 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:23,751 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:23,772 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:23,821 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:23,844 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:23,891 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:23,913 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:23,959 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:23,980 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:24,035 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:24,058 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:24,108 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:24,130 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:24,177 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:24,199 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:24,247 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:24,269 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:24,318 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:24,340 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:24,388 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,206 - INFO - integration_test - Step 28: MPC solve successful
2026-01-24 02:32:25,211 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-24 02:32:25,212 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:25,212 - INFO - integration_test - === Applying control at step 28 ===
2026-01-24 02:32:25,212 - INFO - integration_test -   Control dict from planner: {'a': -2.292422282194283e-12, 'w': -0.057265539762872755}
2026-01-24 02:32:25,212 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:25,212 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:25,213 - INFO - integration_test - Step 28 completed in 1.656s
2026-01-24 02:32:25,265 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-24 02:32:25,266 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.7562886  4.91463677 0.70891102 3.00000003 7.80000006]
2026-01-24 02:32:25,268 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.305m, drift=0.426m)
2026-01-24 02:32:25,268 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-24 02:32:25,268 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:25,283 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.756, 4.915), path_start=(0.000, 0.000), dist=7.569m
2026-01-24 02:32:25,283 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-24 02:32:25,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:25,311 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:25,311 - INFO - integration_test - Warmstart k=0: x0=5.756288603977334 , y0=4.914636772413559 , psi0=0.7089110213311439 , v0=3.0000000299996503 , spline0=7.800000055825592 , a0=0.0 , w0=0.0
2026-01-24 02:32:25,311 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:25,312 - INFO - integration_test - Dyn residual k=0: pred=[5.984009984032977, 5.109939037801169, 0.7089110213311439, 3.0000000299996503, 8.100000058825557], ws=[5.98400998175579, 5.109939035848169, 0.708911021331144, 3.0, 7.342424298249835], res=[2.2771873275928556e-09, 1.9530004280454705e-09, -1.1102230246251565e-16, 2.999965031946772e-08, 0.7575757605757225], res_norm=7.576e-01
2026-01-24 02:32:25,313 - INFO - integration_test - Dyn residual k=1: pred=[6.211731359534245, 5.305241299282779, 0.708911021331144, 3.0, 7.642424298249835], ws=[6.211731359534245, 5.305241299282779, 0.708911021331144, 3.0, 7.945454601280138], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030365], res_norm=3.030e-01
2026-01-24 02:32:25,313 - INFO - integration_test - Dyn residual k=2: pred=[6.439452737312701, 5.500543562717389, 0.708911021331144, 3.0, 8.245454601280139], ws=[6.439452737312701, 5.500543562717389, 0.708911021331144, 3.0, 8.043434399259937], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-24 02:32:25,330 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,385 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,406 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,450 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,470 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,514 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,533 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,577 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,599 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,648 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,670 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,717 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,739 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,788 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,812 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,864 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,888 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:25,940 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:25,963 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:26,020 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:26,058 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:26,132 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:26,824 - INFO - integration_test - Step 29: MPC solve successful
2026-01-24 02:32:26,829 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-24 02:32:26,830 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:26,830 - INFO - integration_test - === Applying control at step 29 ===
2026-01-24 02:32:26,830 - INFO - integration_test -   Control dict from planner: {'a': 2.2552625916203128e-12, 'w': -0.06502426375980616}
2026-01-24 02:32:26,830 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:26,830 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:26,831 - INFO - integration_test - Step 29 completed in 1.566s
2026-01-24 02:32:26,894 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-24 02:32:26,895 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.98464335 5.10919729 0.70240859 3.00000003 8.10000006]
2026-01-24 02:32:26,895 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.239m, drift=0.316m)
2026-01-24 02:32:26,895 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-24 02:32:26,896 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:26,912 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.985, 5.109), path_start=(0.000, 0.000), dist=7.869m
2026-01-24 02:32:26,912 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-24 02:32:26,915 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:26,944 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:26,944 - INFO - integration_test - Warmstart k=0: x0=5.984643346364666 , y0=5.10919729337847 , psi0=0.7024085949551633 , v0=3.000000029999876 , spline0=8.100000058825579 , a0=0.0 , w0=0.0
2026-01-24 02:32:26,944 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:26,945 - INFO - integration_test - Dyn residual k=0: pred=[6.213629841883572, 5.303014698866116, 0.7024085949551633, 3.000000029999876, 8.400000061825565], ws=[6.213629839593716, 5.30301469692795, 0.7024085949551635, 3.0, 7.945454604280124], res=[2.2898554163930385e-09, 1.938166072079639e-09, -2.220446049250313e-16, 2.999987591678632e-08, 0.45454545754544107], res_norm=4.545e-01
2026-01-24 02:32:26,946 - INFO - integration_test - Dyn residual k=1: pred=[6.442616332822767, 5.49683210047743, 0.7024085949551635, 3.0, 8.245454604280125], ws=[6.442616332822767, 5.49683210047743, 0.7024085949551635, 3.0, 8.043434402259923], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-24 02:32:26,947 - INFO - integration_test - Dyn residual k=2: pred=[6.671602826051817, 5.6906495040269105, 0.7024085949551635, 3.0, 8.343434402259923], ws=[6.671602826051817, 5.6906495040269105, 0.7024085949551635, 3.0, 8.444444503270025], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-24 02:32:26,964 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,025 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,049 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,103 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,126 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,174 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,195 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,244 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,267 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,318 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,340 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,389 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,411 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,461 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,482 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,531 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,553 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,601 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,624 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,672 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:27,694 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:27,742 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:28,811 - INFO - integration_test - Step 30: MPC solve successful
2026-01-24 02:32:28,816 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-24 02:32:28,816 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:28,817 - INFO - integration_test - === Applying control at step 30 ===
2026-01-24 02:32:28,817 - INFO - integration_test -   Control dict from planner: {'a': -1.2959730562832106e-06, 'w': -0.05009057694613577}
2026-01-24 02:32:28,817 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:28,817 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:28,819 - INFO - integration_test - Step 30 completed in 1.924s
2026-01-24 02:32:28,880 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-24 02:32:28,881 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[6.2141143  5.30244038 0.69739954 2.9999999  8.40000005]
2026-01-24 02:32:28,881 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.211m, drift=0.206m)
2026-01-24 02:32:28,881 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-24 02:32:28,882 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:28,898 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(6.214, 5.302), path_start=(0.000, 0.000), dist=8.169m
2026-01-24 02:32:28,898 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-24 02:32:28,901 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:28,929 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:28,929 - INFO - integration_test - Warmstart k=0: x0=6.214114299622717 , y0=5.302440382111738 , psi0=0.6973995372605497 , v0=2.99999990040257 , spline0=8.400000048865836 , a0=0.0 , w0=0.0
2026-01-24 02:32:28,930 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:28,930 - INFO - integration_test - Dyn residual k=0: pred=[6.444068751009234, 5.495108346007348, 0.6973995372605497, 2.99999990040257, 8.700000038906094], ws=[6.444068751009234, 5.495108346007348, 0.6973995372605497, 2.99999990040257, 8.043434382340436], res=[0.0, 0.0, 0.0, 0.0, 0.6565656565656575], res_norm=6.566e-01
2026-01-24 02:32:28,931 - INFO - integration_test - Dyn residual k=1: pred=[6.674023202395751, 5.687776309902959, 0.6973995372605497, 2.99999990040257, 8.343434372380694], ws=[6.674023202395751, 5.687776309902959, 0.6973995372605497, 2.99999990040257, 8.444444473390796], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-24 02:32:28,932 - INFO - integration_test - Dyn residual k=2: pred=[6.903977653782268, 5.880444273798569, 0.6973995372605497, 2.99999990040257, 8.744444463431053], ws=[6.903977653782268, 5.880444273798569, 0.6973995372605497, 2.99999990040257, 9.047474766461356], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:28,950 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,010 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,035 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,088 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,111 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,162 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,184 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,232 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,256 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,303 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,325 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,377 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,398 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,464 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,502 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,556 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,577 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,627 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,649 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,695 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:29,716 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:29,763 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:30,455 - INFO - integration_test - Step 31: MPC solve successful
2026-01-24 02:32:30,460 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-24 02:32:30,460 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:30,460 - INFO - integration_test - === Applying control at step 31 ===
2026-01-24 02:32:30,460 - INFO - integration_test -   Control dict from planner: {'a': 1.2959730652502008e-06, 'w': -0.06785475368213216}
2026-01-24 02:32:30,460 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:30,460 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:30,462 - INFO - integration_test - Step 31 completed in 1.581s
2026-01-24 02:32:30,528 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-24 02:32:30,529 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[6.44472066 5.4943267  0.69061406 3.00000003 8.70000005]
2026-01-24 02:32:30,529 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.237m, drift=0.096m)
2026-01-24 02:32:30,529 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-24 02:32:30,530 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:30,546 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(6.445, 5.494), path_start=(0.000, 0.000), dist=8.469m
2026-01-24 02:32:30,546 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-24 02:32:30,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:30,577 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:30,577 - INFO - integration_test - Warmstart k=0: x0=6.444720660732997 , y0=5.494326699519074 , psi0=0.6906140618923365 , v0=3.000000029999877 , spline0=8.700000051865825 , a0=0.0 , w0=0.0
2026-01-24 02:32:30,577 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:30,578 - INFO - integration_test - Dyn residual k=0: pred=[6.675977161961766, 5.685429897920935, 0.6906140618923365, 3.000000029999877, 9.000000054865813], ws=[6.675977159649211, 5.685429896009912, 0.6906140618923367, 3.0, 8.44444449631027], res=[2.3125554804437343e-09, 1.911023339573603e-09, -1.1102230246251565e-16, 2.999987680496474e-08, 0.5555555585555432], res_norm=5.556e-01
2026-01-24 02:32:30,579 - INFO - integration_test - Dyn residual k=1: pred=[6.907233658565423, 5.8765330925007495, 0.6906140618923367, 3.0, 8.74444449631027], ws=[6.907233658565423, 5.8765330925007495, 0.6906140618923367, 3.0, 9.047474799340574], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:30,579 - INFO - integration_test - Dyn residual k=2: pred=[7.138490157481636, 6.067636288991587, 0.6906140618923367, 3.0, 9.347474799340574], ws=[7.138490157481636, 6.067636288991587, 0.6906140618923367, 3.0, 8.94343439530017], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-24 02:32:30,596 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:30,655 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:30,679 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:30,729 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:30,752 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:30,802 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:30,826 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:30,875 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:30,897 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:30,945 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:30,966 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:31,015 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:31,039 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:31,089 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:31,112 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:31,159 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:31,180 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:31,230 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:31,254 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:31,303 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:31,325 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:31,372 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,238 - INFO - integration_test - Step 32: MPC solve successful
2026-01-24 02:32:32,243 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-24 02:32:32,243 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:32,243 - INFO - integration_test - === Applying control at step 32 ===
2026-01-24 02:32:32,243 - INFO - integration_test -   Control dict from planner: {'a': -6.978316507068134e-08, 'w': -0.03458879816225542}
2026-01-24 02:32:32,243 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:32,243 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:32,245 - INFO - integration_test - Step 32 completed in 1.716s
2026-01-24 02:32:32,305 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-24 02:32:32,305 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[6.6763072  5.68502957 0.68715518 3.00000002 9.00000005]
2026-01-24 02:32:32,306 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.266m, drift=0.396m)
2026-01-24 02:32:32,306 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-24 02:32:32,306 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:32,322 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(6.676, 5.685), path_start=(0.000, 0.000), dist=8.769m
2026-01-24 02:32:32,322 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-24 02:32:32,325 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:32,351 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:32,351 - INFO - integration_test - Warmstart k=0: x0=6.676307201741291 , y0=5.685029572821048 , psi0=0.687155182076111 , v0=3.00000002302156 , spline0=9.00000005416798 , a0=0.0 , w0=0.0
2026-01-24 02:32:32,351 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:32,352 - INFO - integration_test - Dyn residual k=0: pred=[6.908223320750725, 5.875331740766911, 0.687155182076111, 3.00000002302156, 9.300000056470136], ws=[6.908223318971035, 5.87533173930656, 0.6871551820761113, 3.0, 9.047474801642728], res=[1.779690173009385e-09, 1.4603509512767232e-09, -2.220446049250313e-16, 2.3021560213720704e-08, 0.2525252548274075], res_norm=2.525e-01
2026-01-24 02:32:32,353 - INFO - integration_test - Dyn residual k=1: pred=[7.140139436200779, 6.0656339057920725, 0.6871551820761113, 3.0, 9.34747480164273], ws=[7.140139436200778, 6.0656339057920725, 0.6871551820761113, 3.0, 8.943434397602324], res=[8.881784197001252e-16, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-24 02:32:32,354 - INFO - integration_test - Dyn residual k=2: pred=[7.372055553430522, 6.255936072277585, 0.6871551820761113, 3.0, 9.243434397602325], ws=[7.372055553430522, 6.255936072277585, 0.6871551820761113, 3.0, 9.54646470063263], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-24 02:32:32,370 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,426 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,447 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,493 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,518 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,564 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,585 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,632 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,652 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,698 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,718 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,762 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,783 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,830 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,851 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,896 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,918 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:32,968 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:32,991 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:33,039 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:33,060 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:33,108 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:33,805 - INFO - integration_test - Step 33: MPC solve successful
2026-01-24 02:32:33,812 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-24 02:32:33,812 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:33,812 - INFO - integration_test - === Applying control at step 33 ===
2026-01-24 02:32:33,812 - INFO - integration_test -   Control dict from planner: {'a': 6.978318395834904e-08, 'w': -0.07856095422751247}
2026-01-24 02:32:33,812 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:33,812 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:33,813 - INFO - integration_test - Step 33 completed in 1.508s
2026-01-24 02:32:33,865 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-24 02:32:33,866 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[6.90896845 5.87441881 0.67929909 3.00000003 9.30000006]
2026-01-24 02:32:33,866 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.202m, drift=0.287m)
2026-01-24 02:32:33,866 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-24 02:32:33,867 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:33,881 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(6.909, 5.874), path_start=(0.000, 0.000), dist=9.069m
2026-01-24 02:32:33,881 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-24 02:32:33,884 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:33,911 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:33,912 - INFO - integration_test - Warmstart k=0: x0=6.908968447604344 , y0=5.874418810578933 , psi0=0.6792990866533598 , v0=3.0000000299998786 , spline0=9.300000057167969 , a0=0.0 , w0=0.0
2026-01-24 02:32:33,912 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:33,913 - INFO - integration_test - Dyn residual k=0: pred=[7.142372427078839, 6.062893170016662, 0.6792990866533598, 3.0000000299998786, 9.600000060167957], ws=[7.142372424744808, 6.062893168131926, 0.6792990866533599, 3.0, 8.943434400602314], res=[2.3340307464536636e-09, 1.8847359228857385e-09, -1.1102230246251565e-16, 2.999987858132158e-08, 0.6565656595656435], res_norm=6.566e-01
2026-01-24 02:32:33,913 - INFO - integration_test - Dyn residual k=1: pred=[7.375776401885273, 6.251367525684919, 0.6792990866533599, 3.0, 9.243434400602315], ws=[7.375776401885273, 6.251367525684919, 0.6792990866533599, 3.0, 9.546464703632616], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-24 02:32:33,914 - INFO - integration_test - Dyn residual k=2: pred=[7.609180379025737, 6.439841883237912, 0.6792990866533599, 3.0, 9.846464703632616], ws=[7.609180379025737, 6.439841883237912, 0.6792990866533599, 3.0, 9.644444501612416], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-24 02:32:33,931 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:33,982 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,004 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,054 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,077 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,131 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,154 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,200 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,224 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,268 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,287 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,333 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,353 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,395 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,417 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,461 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,482 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,526 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,545 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,590 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:34,612 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:34,661 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:35,373 - INFO - integration_test - Step 34: MPC solve successful
2026-01-24 02:32:35,378 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-24 02:32:35,378 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:35,378 - INFO - integration_test - === Applying control at step 34 ===
2026-01-24 02:32:35,378 - INFO - integration_test -   Control dict from planner: {'a': -3.591314493038323e-14, 'w': -0.04704464684860659}
2026-01-24 02:32:35,378 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:35,378 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:35,380 - INFO - integration_test - Step 34 completed in 1.514s
2026-01-24 02:32:35,443 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-24 02:32:35,444 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[7.1428149  6.06234346 0.67459462 3.00000003 9.60000006]
2026-01-24 02:32:35,445 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.186m, drift=0.177m)
2026-01-24 02:32:35,445 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-24 02:32:35,445 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:35,461 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(7.143, 6.062), path_start=(0.000, 0.000), dist=9.369m
2026-01-24 02:32:35,461 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-24 02:32:35,464 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:35,494 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:35,494 - INFO - integration_test - Warmstart k=0: x0=7.142814900797151 , y0=6.062343455421957 , psi0=0.6745946219684992 , v0=3.000000029999875 , spline0=9.600000060167956 , a0=0.0 , w0=0.0
2026-01-24 02:32:35,494 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:35,495 - INFO - integration_test - Dyn residual k=0: pred=[7.377102965126724, 6.249717692478961, 0.6745946219684992, 3.000000029999875, 9.900000063167942], ws=[7.377102962783853, 6.249717690605227, 0.6745946219684993, 3.0, 9.546464706632602], res=[2.342870786264939e-09, 1.873734056800913e-09, -1.1102230246251565e-16, 2.99998750286079e-08, 0.35353535653534074], res_norm=3.535e-01
2026-01-24 02:32:35,496 - INFO - integration_test - Dyn residual k=1: pred=[7.611391024770556, 6.437091925788496, 0.6745946219684993, 3.0, 9.846464706632602], ws=[7.611391024770556, 6.437091925788496, 0.6745946219684993, 3.0, 9.644444504612402], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-24 02:32:35,496 - INFO - integration_test - Dyn residual k=2: pred=[7.845679086757258, 6.624466160971766, 0.6745946219684993, 3.0, 9.944444504612402], ws=[7.845679086757258, 6.624466160971766, 0.6745946219684993, 3.0, 10.247474807642705], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:35,514 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:35,574 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:35,597 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:35,650 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:35,675 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:35,726 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:35,749 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:35,798 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:35,820 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:35,869 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:35,892 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:35,941 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:35,963 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:36,010 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:36,032 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:36,081 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:36,105 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:36,154 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:36,177 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:36,225 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:36,247 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:36,295 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:36,932 - INFO - integration_test - Step 35: MPC solve successful
2026-01-24 02:32:36,937 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-24 02:32:36,938 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:36,938 - INFO - integration_test - === Applying control at step 35 ===
2026-01-24 02:32:36,938 - INFO - integration_test -   Control dict from planner: {'a': -6.643857013833083e-11, 'w': -0.05634266084289495}
2026-01-24 02:32:36,938 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:36,938 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:36,939 - INFO - integration_test - Step 35 completed in 1.495s
2026-01-24 02:32:37,004 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-24 02:32:37,004 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[7.37762958 6.24905668 0.66896036 3.00000003 9.90000006]
2026-01-24 02:32:37,005 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.228m, drift=0.067m)
2026-01-24 02:32:37,005 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-24 02:32:37,005 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:37,023 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(7.378, 6.249), path_start=(0.000, 0.000), dist=9.669m
2026-01-24 02:32:37,023 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-24 02:32:37,026 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:37,054 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:37,055 - INFO - integration_test - Warmstart k=0: x0=7.377629582309257 , y0=6.249056682214583 , psi0=0.6689603558842097 , v0=3.000000029993231 , spline0=9.900000063167278 , a0=0.0 , w0=0.0
2026-01-24 02:32:37,055 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:37,056 - INFO - integration_test - Dyn residual k=0: pred=[7.612969638639515, 6.435107910875036, 0.6689603558842097, 3.000000029993231, 10.2000000661666], ws=[7.612969636286646, 6.435107909014945, 0.6689603558842094, 3.0, 9.644444507611723], res=[2.3528690107355033e-09, 1.8600916362743192e-09, 2.220446049250313e-16, 2.9993231009939336e-08, 0.555555558554877], res_norm=5.556e-01
2026-01-24 02:32:37,056 - INFO - integration_test - Dyn residual k=1: pred=[7.848309690264036, 6.621159135815305, 0.6689603558842094, 3.0, 9.944444507611724], ws=[7.848309690264036, 6.621159135815305, 0.6689603558842094, 3.0, 10.247474810642027], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:37,057 - INFO - integration_test - Dyn residual k=2: pred=[8.083649744241425, 6.807210362615666, 0.6689603558842094, 3.0, 10.547474810642028], ws=[8.083649744241425, 6.807210362615666, 0.6689603558842094, 3.0, 10.143434406601624], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-24 02:32:37,074 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,137 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,160 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,231 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,269 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,332 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,354 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,402 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,425 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,473 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,496 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,545 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,565 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,610 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,632 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,680 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,701 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,749 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,771 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,820 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:37,843 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:37,891 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:38,595 - INFO - integration_test - Step 36: MPC solve successful
2026-01-24 02:32:38,600 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-24 02:32:38,600 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:38,600 - INFO - integration_test - === Applying control at step 36 ===
2026-01-24 02:32:38,600 - INFO - integration_test -   Control dict from planner: {'a': 6.635839564771798e-11, 'w': -0.05130317079072218}
2026-01-24 02:32:38,600 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:38,600 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:38,602 - INFO - integration_test - Step 36 completed in 1.598s
2026-01-24 02:32:38,675 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-24 02:32:38,675 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 7.61344586  6.43450341  0.66383004  3.00000003 10.20000007]
2026-01-24 02:32:38,676 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.231m, drift=0.367m)
2026-01-24 02:32:38,676 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-24 02:32:38,676 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:38,693 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(7.613, 6.435), path_start=(0.000, 0.000), dist=9.968m
2026-01-24 02:32:38,693 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-24 02:32:38,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:38,724 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:38,724 - INFO - integration_test - Warmstart k=0: x0=7.613445856128012 , y0=6.43450341149578 , psi0=0.6638300388051375 , v0=3.000000029999867 , spline0=10.200000066167265 , a0=0.0 , w0=0.0
2026-01-24 02:32:38,725 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:38,726 - INFO - integration_test - Dyn residual k=0: pred=[7.849737312981281, 6.619344827899549, 0.6638300388051375, 3.000000029999867, 10.500000069167251], ws=[7.849737310618377, 6.619344826051143, 0.6638300388051377, 3.0, 10.247474813642013], res=[2.3629036505212753e-09, 1.8484058728063246e-09, -2.220446049250313e-16, 2.9999867035002126e-08, 0.25252525552523863], res_norm=2.525e-01
2026-01-24 02:32:38,726 - INFO - integration_test - Dyn residual k=1: pred=[8.086028765108743, 6.804186240606506, 0.6638300388051377, 3.0, 10.547474813642014], ws=[8.086028765108743, 6.804186240606506, 0.6638300388051377, 3.0, 10.14343440960161], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-24 02:32:38,727 - INFO - integration_test - Dyn residual k=2: pred=[8.322320219599108, 6.989027655161869, 0.6638300388051377, 3.0, 10.443434409601611], ws=[8.322320219599108, 6.989027655161869, 0.6638300388051377, 3.0, 10.746464712631914], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:38,745 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:38,804 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:38,829 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:38,881 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:38,905 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:38,956 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:38,978 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:39,029 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:39,054 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:39,106 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:39,129 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:39,178 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:39,199 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:39,249 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:39,271 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:39,319 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:39,342 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:39,390 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:39,411 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:39,465 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:39,489 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:39,541 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:40,488 - INFO - integration_test - Step 37: MPC solve successful
2026-01-24 02:32:40,493 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-24 02:32:40,493 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:40,493 - INFO - integration_test - === Applying control at step 37 ===
2026-01-24 02:32:40,493 - INFO - integration_test -   Control dict from planner: {'a': 8.221466610310775e-14, 'w': -0.056435902825127206}
2026-01-24 02:32:40,493 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:40,493 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:40,494 - INFO - integration_test - Step 37 completed in 1.819s
2026-01-24 02:32:40,546 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-24 02:32:40,547 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 7.85025764  6.61867708  0.65818645  3.00000003 10.50000007]
2026-01-24 02:32:40,547 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.485m, drift=0.667m)
2026-01-24 02:32:40,547 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-24 02:32:40,548 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:40,562 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(7.850, 6.619), path_start=(0.000, 0.000), dist=10.268m
2026-01-24 02:32:40,562 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.268m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:40,562 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-24 02:32:40,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:40,589 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:40,590 - INFO - integration_test - Warmstart k=0: x0=7.850257641891499 , y0=6.61867708238274 , psi0=0.6581864485226248 , v0=3.0000000299998755 , spline0=10.500000069167251 , a0=0.0 , w0=0.0
2026-01-24 02:32:40,590 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:40,590 - INFO - integration_test - Dyn residual k=0: pred=[8.087588499484081, 6.80218203009359, 0.6581864485226248, 3.0000000299998755, 10.800000072167238], ws=[8.087588497110783, 6.802182028258548, 0.658186448522625, 3.0, 10.143434412601597], res=[2.373298002567026e-09, 1.8350423403035165e-09, -2.220446049250313e-16, 2.999987547269711e-08, 0.6565656595656417], res_norm=6.566e-01
2026-01-24 02:32:40,591 - INFO - integration_test - Dyn residual k=1: pred=[8.324919352330067, 6.985686974134357, 0.658186448522625, 3.0, 10.443434412601597], ws=[8.324919352330067, 6.985686974134357, 0.658186448522625, 3.0, 10.746464715631898], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-24 02:32:40,592 - INFO - integration_test - Dyn residual k=2: pred=[8.56225020754935, 7.1691919200101655, 0.658186448522625, 3.0, 11.046464715631899], ws=[8.56225020754935, 7.1691919200101655, 0.658186448522625, 3.0, 10.642424311591498], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404013], res_norm=4.040e-01
2026-01-24 02:32:40,607 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:40,664 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:40,685 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:40,731 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:40,751 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:40,795 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:40,815 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:40,862 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:40,882 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:40,927 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:40,947 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:40,992 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:41,011 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:41,060 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:41,082 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:41,130 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:41,150 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:41,197 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:41,219 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:41,264 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:41,285 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:41,331 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,007 - INFO - integration_test - Step 38: MPC solve successful
2026-01-24 02:32:42,012 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-24 02:32:42,012 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:42,012 - INFO - integration_test - === Applying control at step 38 ===
2026-01-24 02:32:42,012 - INFO - integration_test -   Control dict from planner: {'a': -4.5320035828145266e-14, 'w': -0.04993043838096762}
2026-01-24 02:32:42,012 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:42,012 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:42,013 - INFO - integration_test - Step 38 completed in 1.467s
2026-01-24 02:32:42,081 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-24 02:32:42,081 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 8.08804564  6.80158877  0.6531934   3.00000003 10.80000007]
2026-01-24 02:32:42,082 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.289m, drift=0.558m)
2026-01-24 02:32:42,082 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-24 02:32:42,082 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:42,099 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(8.088, 6.802), path_start=(0.000, 0.000), dist=10.568m
2026-01-24 02:32:42,099 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.568m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:42,099 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-24 02:32:42,102 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:42,132 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:42,132 - INFO - integration_test - Warmstart k=0: x0=8.088045636528838 , y0=6.801588767159533 , psi0=0.653193404684528 , v0=3.000000029999871 , spline0=10.800000072167238 , a0=0.0 , w0=0.0
2026-01-24 02:32:42,132 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:42,133 - INFO - integration_test - Dyn residual k=0: pred=[8.32628978018201, 6.983906428988986, 0.653193404684528, 3.000000029999871, 11.100000075167225], ws=[8.326289777799579, 6.9839064271658176, 0.653193404684528, 3.0, 10.746464718631886], res=[2.382432029435222e-09, 1.8231682830105456e-09, 0.0, 2.9999871031805014e-08, 0.35353535653533896], res_norm=3.535e-01
2026-01-24 02:32:42,134 - INFO - integration_test - Dyn residual k=1: pred=[8.56453391907032, 7.166224087172102, 0.653193404684528, 3.0, 11.046464718631887], ws=[8.56453391907032, 7.166224087172102, 0.653193404684528, 3.0, 10.642424314591482], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-24 02:32:42,135 - INFO - integration_test - Dyn residual k=2: pred=[8.80277806034106, 7.348541747178387, 0.653193404684528, 3.0, 10.942424314591483], ws=[8.80277806034106, 7.348541747178387, 0.653193404684528, 3.0, 11.245454617621785], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:42,153 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,210 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,235 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,285 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,309 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,359 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,379 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,428 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,451 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,500 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,524 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,573 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,594 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,643 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,666 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,720 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,744 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,797 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,821 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,877 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:42,901 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:42,960 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:43,698 - INFO - integration_test - Step 39: MPC solve successful
2026-01-24 02:32:43,704 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-24 02:32:43,704 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:43,704 - INFO - integration_test - === Applying control at step 39 ===
2026-01-24 02:32:43,704 - INFO - integration_test -   Control dict from planner: {'a': 7.788723996168951e-15, 'w': -0.06779264365661755}
2026-01-24 02:32:43,704 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:43,704 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:43,705 - INFO - integration_test - Step 39 completed in 1.624s
2026-01-24 02:32:43,769 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-24 02:32:43,770 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 8.32690594  6.98309748  0.64641414  3.00000003 11.10000008]
2026-01-24 02:32:43,770 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.165m, drift=0.858m)
2026-01-24 02:32:43,770 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-24 02:32:43,771 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:43,785 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(8.327, 6.983), path_start=(0.000, 0.000), dist=10.867m
2026-01-24 02:32:43,785 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.867m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:43,785 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-24 02:32:43,788 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:43,816 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:43,816 - INFO - integration_test - Warmstart k=0: x0=8.326905942745984 , y0=6.983097475563033 , psi0=0.6464141403188662 , v0=3.000000029999872 , spline0=11.100000075167225 , a0=0.0 , w0=0.0
2026-01-24 02:32:43,817 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:43,818 - INFO - integration_test - Dyn residual k=0: pred=[8.566380581918093, 7.163795840230178, 0.6464141403188662, 3.000000029999872, 11.400000078167212], ws=[8.566380579523358, 7.163795838423202, 0.6464141403188663, 3.0, 10.64242431759147], res=[2.394735076904908e-09, 1.8069759022409926e-09, -1.1102230246251565e-16, 2.9999871919983434e-08, 0.757575760575742], res_norm=7.576e-01
2026-01-24 02:32:43,819 - INFO - integration_test - Dyn residual k=1: pred=[8.805855216300731, 7.344494201283371, 0.6464141403188663, 3.0, 10.94242431759147], ws=[8.805855216300731, 7.344494201283371, 0.6464141403188663, 3.0, 11.245454620621771], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-24 02:32:43,820 - INFO - integration_test - Dyn residual k=2: pred=[9.045329853078105, 7.52519256414354, 0.6464141403188663, 3.0, 11.545454620621772], ws=[9.045329853078105, 7.52519256414354, 0.6464141403188663, 3.0, 11.343434418601571], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-24 02:32:43,839 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:43,899 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:43,922 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:43,973 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:43,995 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,051 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:44,075 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,128 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:44,152 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,203 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:44,226 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,280 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:44,303 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,351 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:44,373 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,422 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:44,444 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,493 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:44,516 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,564 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:44,585 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:44,634 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:45,306 - INFO - integration_test - Step 40: MPC solve successful
2026-01-24 02:32:45,311 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-24 02:32:45,311 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:45,311 - INFO - integration_test - === Applying control at step 40 ===
2026-01-24 02:32:45,311 - INFO - integration_test -   Control dict from planner: {'a': -5.717707899949783e-14, 'w': -0.031942861038639775}
2026-01-24 02:32:45,311 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:45,311 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:45,313 - INFO - integration_test - Step 40 completed in 1.543s
2026-01-24 02:32:45,378 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-24 02:32:45,378 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 8.56666878  7.16341306  0.64321985  3.00000003 11.40000008]
2026-01-24 02:32:45,379 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.157m, drift=0.748m)
2026-01-24 02:32:45,379 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-24 02:32:45,379 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:45,398 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(8.567, 7.163), path_start=(0.000, 0.000), dist=11.167m
2026-01-24 02:32:45,398 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.167m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:45,398 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-24 02:32:45,401 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:45,432 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:45,432 - INFO - integration_test - Warmstart k=0: x0=8.566668775565407 , y0=7.163413058007953 , psi0=0.6432198542150023 , v0=3.000000029999866 , spline0=11.400000078167212 , a0=0.0 , w0=0.0
2026-01-24 02:32:45,432 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:45,433 - INFO - integration_test - Dyn residual k=0: pred=[8.80671939429683, 7.343345551590001, 0.6432198542150023, 3.000000029999866, 11.700000081167198], ws=[8.806719391896335, 7.343345549790683, 0.643219854215002, 3.0, 11.245454623621757], res=[2.4004940257782437e-09, 1.7993171397279184e-09, 2.220446049250313e-16, 2.9999866146823706e-08, 0.45454545754544107], res_norm=4.545e-01
2026-01-24 02:32:45,434 - INFO - integration_test - Dyn residual k=1: pred=[9.046770008227263, 7.5232780415734135, 0.643219854215002, 3.0, 11.545454623621758], ws=[9.046770008227263, 7.5232780415734135, 0.643219854215002, 3.0, 11.343434421601556], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-24 02:32:45,435 - INFO - integration_test - Dyn residual k=2: pred=[9.28682062455819, 7.703210533356144, 0.643219854215002, 3.0, 11.643434421601556], ws=[9.28682062455819, 7.703210533356144, 0.643219854215002, 3.0, 11.744444522611658], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-24 02:32:45,454 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:45,513 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:45,539 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:45,588 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:45,614 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:45,675 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:45,698 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:45,749 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:45,774 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:45,820 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:45,843 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:45,894 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:45,917 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:45,972 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:45,995 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:46,054 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:46,078 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:46,136 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:46,161 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:46,217 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:46,243 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:46,297 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,106 - INFO - integration_test - Step 41: MPC solve successful
2026-01-24 02:32:47,112 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-24 02:32:47,112 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:47,112 - INFO - integration_test - === Applying control at step 41 ===
2026-01-24 02:32:47,112 - INFO - integration_test -   Control dict from planner: {'a': -4.848290668404984e-12, 'w': -0.0606501598532508}
2026-01-24 02:32:47,112 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:47,112 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:47,114 - INFO - integration_test - Step 41 completed in 1.736s
2026-01-24 02:32:47,177 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-24 02:32:47,178 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 8.80726357  7.3426165   0.63715484  3.00000003 11.70000008]
2026-01-24 02:32:47,179 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.214m, drift=0.638m)
2026-01-24 02:32:47,179 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-24 02:32:47,179 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:47,195 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(8.807, 7.343), path_start=(0.000, 0.000), dist=11.467m
2026-01-24 02:32:47,195 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.467m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:47,195 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-24 02:32:47,198 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:47,226 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:47,227 - INFO - integration_test - Warmstart k=0: x0=8.807263567664865 , y0=7.342616495284898 , psi0=0.6371548382296772 , v0=3.000000029999381 , spline0=11.70000008116715 , a0=0.0 , w0=0.0
2026-01-24 02:32:47,227 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:47,228 - INFO - integration_test - Dyn residual k=0: pred=[9.048401058107958, 7.521089777606847, 0.6371548382296772, 3.000000029999381, 12.00000008416709], ws=[9.048401055696633, 7.521089775822151, 0.6371548382296774, 3.0, 11.343434424601494], res=[2.411324473428067e-09, 1.784695946582815e-09, -2.220446049250313e-16, 2.999938120140655e-08, 0.6565656595655955], res_norm=6.566e-01
2026-01-24 02:32:47,229 - INFO - integration_test - Dyn residual k=1: pred=[9.289538543728401, 7.699563056359405, 0.6371548382296774, 3.0, 11.643434424601494], ws=[9.289538543728401, 7.699563056359405, 0.6371548382296774, 3.0, 11.744444525611597], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-24 02:32:47,230 - INFO - integration_test - Dyn residual k=2: pred=[9.53067603176017, 7.878036336896658, 0.6371548382296774, 3.0, 12.044444525611597], ws=[9.53067603176017, 7.878036336896658, 0.6371548382296774, 3.0, 11.842424323591395], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-24 02:32:47,248 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,307 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,330 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,378 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,399 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,449 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,471 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,519 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,541 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,587 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,608 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,653 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,674 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,717 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,738 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,782 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,803 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,847 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,868 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,914 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:47,936 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:47,986 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:48,831 - INFO - integration_test - Step 42: MPC solve successful
2026-01-24 02:32:48,836 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-24 02:32:48,837 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:48,837 - INFO - integration_test - === Applying control at step 42 ===
2026-01-24 02:32:48,837 - INFO - integration_test -   Control dict from planner: {'a': 4.842783947573198e-12, 'w': -0.048602644282518405}
2026-01-24 02:32:48,837 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:48,837 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:48,838 - INFO - integration_test - Step 42 completed in 1.661s
2026-01-24 02:32:48,893 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-24 02:32:48,894 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 9.04883382  7.52050308  0.63229457  3.00000003 12.00000008]
2026-01-24 02:32:48,894 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.200m, drift=0.938m)
2026-01-24 02:32:48,894 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-24 02:32:48,895 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:48,909 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(9.049, 7.521), path_start=(0.000, 0.000), dist=11.766m
2026-01-24 02:32:48,909 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.766m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:48,909 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-24 02:32:48,912 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:48,939 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:48,939 - INFO - integration_test - Warmstart k=0: x0=9.048833821562962 , y0=7.520503080123329 , psi0=0.6322945738014254 , v0=3.0000000299998653 , spline0=12.000000084167137 , a0=0.0 , w0=0.0
2026-01-24 02:32:48,940 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:48,941 - INFO - integration_test - Dyn residual k=0: pred=[9.290835887846647, 7.697802267133363, 0.6322945738014254, 3.0000000299998653, 12.300000087167124], ws=[9.290835885426636, 7.697802265360378, 0.6322945738014254, 3.0, 11.744444528611583], res=[2.4200108583727342e-09, 1.772984425940649e-09, 0.0, 2.9999865258645286e-08, 0.5555555585555414], res_norm=5.556e-01
2026-01-24 02:32:48,941 - INFO - integration_test - Dyn residual k=1: pred=[9.532837949290311, 7.875101450597428, 0.6322945738014254, 3.0, 12.044444528611583], ws=[9.532837949290311, 7.875101450597428, 0.6322945738014254, 3.0, 11.842424326591381], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-24 02:32:48,942 - INFO - integration_test - Dyn residual k=2: pred=[9.774840013153986, 8.052400635834477, 0.6322945738014254, 3.0, 12.142424326591382], ws=[9.774840013153986, 8.052400635834477, 0.6322945738014254, 3.0, 12.445454629621684], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:48,958 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,017 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,041 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,088 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,112 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,160 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,181 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,230 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,253 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,300 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,322 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,370 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,391 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,438 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,459 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,508 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,531 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,578 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,599 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,647 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:49,670 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:49,719 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:50,558 - INFO - integration_test - Step 43: MPC solve successful
2026-01-24 02:32:50,563 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-24 02:32:50,563 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:50,563 - INFO - integration_test - === Applying control at step 43 ===
2026-01-24 02:32:50,563 - INFO - integration_test -   Control dict from planner: {'a': 2.3706159579835924e-15, 'w': -0.05185846042057771}
2026-01-24 02:32:50,564 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:50,564 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:50,565 - INFO - integration_test - Step 43 completed in 1.672s
2026-01-24 02:32:50,629 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-24 02:32:50,636 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[ 9.29129453  7.69717398  0.62710873  3.00000003 12.30000009]
2026-01-24 02:32:50,637 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.140m, drift=0.829m)
2026-01-24 02:32:50,637 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-24 02:32:50,637 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:50,654 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(9.291, 7.697), path_start=(0.000, 0.000), dist=12.065m
2026-01-24 02:32:50,654 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.065m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:50,654 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-24 02:32:50,658 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:50,687 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:50,687 - INFO - integration_test - Warmstart k=0: x0=9.291294525267936 , y0=7.697173981127452 , psi0=0.6271087277593677 , v0=3.0000000299998657 , spline0=12.300000087167124 , a0=0.0 , w0=0.0
2026-01-24 02:32:50,687 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:50,688 - INFO - integration_test - Dyn residual k=0: pred=[9.53421277964434, 7.873215804256823, 0.6271087277593677, 3.0000000299998657, 12.60000009016711], ws=[9.534212777215169, 7.873215802496413, 0.6271087277593677, 3.0, 11.842424329591367], res=[2.4291715305935213e-09, 1.7604095958745347e-09, 0.0, 2.9999865702734496e-08, 0.7575757605757438], res_norm=7.576e-01
2026-01-24 02:32:50,689 - INFO - integration_test - Dyn residual k=1: pred=[9.777131029162401, 8.049257623865374, 0.6271087277593677, 3.0, 12.142424329591368], ws=[9.777131029162401, 8.049257623865374, 0.6271087277593677, 3.0, 12.44545463262167], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:50,690 - INFO - integration_test - Dyn residual k=2: pred=[10.020049281109634, 8.225299445234334, 0.6271087277593677, 3.0, 12.745454632621671], ws=[10.020049281109634, 8.225299445234334, 0.6271087277593677, 3.0, 12.846464733631773], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-24 02:32:50,707 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:50,767 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:50,790 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:50,840 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:50,865 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:50,914 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:50,937 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:50,987 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:51,007 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:51,059 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:51,083 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:51,135 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:51,158 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:51,209 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:51,233 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:51,284 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:51,308 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:51,358 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:51,381 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:51,432 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:51,456 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:51,504 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,241 - INFO - integration_test - Step 44: MPC solve successful
2026-01-24 02:32:52,246 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-24 02:32:52,247 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:52,247 - INFO - integration_test - === Applying control at step 44 ===
2026-01-24 02:32:52,247 - INFO - integration_test -   Control dict from planner: {'a': -7.707852135117797e-14, 'w': -0.05253712271074985}
2026-01-24 02:32:52,247 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:52,247 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:52,248 - INFO - integration_test - Step 44 completed in 1.613s
2026-01-24 02:32:52,310 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-24 02:32:52,310 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[ 9.5346741   7.87257688  0.62185502  3.00000003 12.60000009]
2026-01-24 02:32:52,311 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.151m, drift=0.719m)
2026-01-24 02:32:52,311 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-24 02:32:52,311 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:52,328 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(9.535, 7.873), path_start=(0.000, 0.000), dist=12.365m
2026-01-24 02:32:52,328 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.365m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:52,328 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-24 02:32:52,331 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:52,360 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:52,360 - INFO - integration_test - Warmstart k=0: x0=9.534674097641084 , y0=7.872576884582598 , psi0=0.6218550154882927 , v0=3.000000029999858 , spline0=12.60000009016711 , a0=0.0 , w0=0.0
2026-01-24 02:32:52,360 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:52,361 - INFO - integration_test - Dyn residual k=0: pred=[9.778513868403751, 8.047340061466063, 0.6218550154882927, 3.000000029999858, 12.900000093167098], ws=[9.778513865965365, 8.04734005971844, 0.6218550154882925, 3.0, 12.445454635621656], res=[2.4383854935194904e-09, 1.747622491166112e-09, 2.220446049250313e-16, 2.999985815321793e-08, 0.45454545754544107], res_norm=4.545e-01
2026-01-24 02:32:52,362 - INFO - integration_test - Dyn residual k=1: pred=[10.022353634289647, 8.222103234854282, 0.6218550154882925, 3.0, 12.745454635621657], ws=[10.022353634289647, 8.222103234854282, 0.6218550154882925, 3.0, 12.84646473663176], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-24 02:32:52,363 - INFO - integration_test - Dyn residual k=2: pred=[10.26619340261393, 8.396866409990125, 0.6218550154882925, 3.0, 13.14646473663176], ws=[10.26619340261393, 8.396866409990125, 0.6218550154882925, 3.0, 12.944444534611558], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-24 02:32:52,383 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:52,451 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,474 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:52,522 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,543 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:52,590 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,611 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:52,662 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,685 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:52,734 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,755 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:52,801 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,824 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:52,874 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,897 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:52,950 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:52,973 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:53,025 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:53,048 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:53,094 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:53,117 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:53,165 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:53,853 - INFO - integration_test - Step 45: MPC solve successful
2026-01-24 02:32:53,858 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-24 02:32:53,858 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:53,858 - INFO - integration_test - === Applying control at step 45 ===
2026-01-24 02:32:53,858 - INFO - integration_test -   Control dict from planner: {'a': 4.362576765319864e-14, 'w': -0.0448038208506874}
2026-01-24 02:32:53,858 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:53,858 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:53,859 - INFO - integration_test - Step 45 completed in 1.549s
2026-01-24 02:32:53,912 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-24 02:32:53,912 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[ 9.77890455  8.04679323  0.61737463  3.00000003 12.90000009]
2026-01-24 02:32:53,913 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.222m, drift=0.609m)
2026-01-24 02:32:53,913 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-24 02:32:53,913 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:53,929 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(9.779, 8.047), path_start=(0.000, 0.000), dist=12.664m
2026-01-24 02:32:53,929 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.664m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:53,929 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-24 02:32:53,932 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:53,957 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:53,957 - INFO - integration_test - Warmstart k=0: x0=9.778904554853685 , y0=8.046793230015972 , psi0=0.617374633403224 , v0=3.0000000299998626 , spline0=12.900000093167098 , a0=0.0 , w0=0.0
2026-01-24 02:32:53,957 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:53,958 - INFO - integration_test - Dyn residual k=0: pred=[10.02352488140936, 8.220462161134314, 0.617374633403224, 3.0000000299998626, 13.200000096167084], ws=[10.023524878963167, 8.220462159397632, 0.617374633403224, 3.0, 12.846464739631745], res=[2.4461925818286545e-09, 1.7366819093922459e-09, 0.0, 2.999986259411003e-08, 0.35353535653533896], res_norm=3.535e-01
2026-01-24 02:32:53,959 - INFO - integration_test - Dyn residual k=1: pred=[10.268145203072649, 8.394131088779293, 0.617374633403224, 3.0, 13.146464739631746], ws=[10.268145203072649, 8.394131088779293, 0.617374633403224, 3.0, 12.944444537611544], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-24 02:32:53,960 - INFO - integration_test - Dyn residual k=2: pred=[10.51276552718213, 8.567800018160954, 0.617374633403224, 3.0, 13.244444537611544], ws=[10.51276552718213, 8.567800018160954, 0.617374633403224, 3.0, 13.547474840641847], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:53,977 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,038 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,061 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,108 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,131 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,177 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,197 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,243 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,264 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,311 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,332 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,381 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,402 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,451 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,475 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,525 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,547 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,596 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,620 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,679 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:54,720 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:54,789 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:55,609 - INFO - integration_test - Step 46: MPC solve successful
2026-01-24 02:32:55,614 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-24 02:32:55,614 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:55,614 - INFO - integration_test - === Applying control at step 46 ===
2026-01-24 02:32:55,614 - INFO - integration_test -   Control dict from planner: {'a': 3.6063834616383e-14, 'w': -0.0503553728073431}
2026-01-24 02:32:55,614 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:55,614 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:55,616 - INFO - integration_test - Step 46 completed in 1.704s
2026-01-24 02:32:55,682 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-24 02:32:55,682 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[10.0239611   8.21984553  0.6123391   3.00000003 13.2000001 ]
2026-01-24 02:32:55,683 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.171m, drift=0.909m)
2026-01-24 02:32:55,683 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-24 02:32:55,683 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:55,700 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(10.024, 8.220), path_start=(0.000, 0.000), dist=12.963m
2026-01-24 02:32:55,701 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.963m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:55,701 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-24 02:32:55,704 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:55,732 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:55,732 - INFO - integration_test - Warmstart k=0: x0=10.023961104883934 , y0=8.219845531106404 , psi0=0.6123390961224896 , v0=3.000000029999866 , spline0=13.200000096167084 , a0=0.0 , w0=0.0
2026-01-24 02:32:55,732 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:55,733 - INFO - integration_test - Dyn residual k=0: pred=[10.269452842753266, 8.392280470831182, 0.6123390961224896, 3.000000029999866, 13.500000099167071], ws=[10.26945284029836, 8.39228046910684, 0.6123390961224895, 3.0, 12.94444454061153], res=[2.4549056121259127e-09, 1.7243415584289323e-09, 1.1102230246251565e-16, 2.9999866146823706e-08, 0.5555555585555414], res_norm=5.556e-01
2026-01-24 02:32:55,734 - INFO - integration_test - Dyn residual k=1: pred=[10.514944575712786, 8.564715407107276, 0.6123390961224895, 3.0, 13.24444454061153], ws=[10.514944575712786, 8.564715407107276, 0.6123390961224895, 3.0, 13.547474843641833], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:55,735 - INFO - integration_test - Dyn residual k=2: pred=[10.760436311127211, 8.737150345107711, 0.6123390961224895, 3.0, 13.847474843641834], ws=[10.760436311127211, 8.737150345107711, 0.6123390961224895, 3.0, 13.443434439601429], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-24 02:32:55,752 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:55,811 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:55,834 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:55,883 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:55,905 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:55,953 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:55,975 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:56,024 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:56,047 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:56,097 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:56,122 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:56,174 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:56,196 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:56,245 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:56,267 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:56,315 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:56,337 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:56,387 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:56,411 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:56,464 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:56,485 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:56,535 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:57,364 - INFO - integration_test - Step 47: MPC solve successful
2026-01-24 02:32:57,368 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-24 02:32:57,369 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:32:57,369 - INFO - integration_test - === Applying control at step 47 ===
2026-01-24 02:32:57,369 - INFO - integration_test -   Control dict from planner: {'a': -3.925247066820281e-05, 'w': 0.20642625097924436}
2026-01-24 02:32:57,369 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:32:57,369 - INFO - integration_test -   Planner output success: True
2026-01-24 02:32:57,370 - INFO - integration_test - Step 47 completed in 1.688s
2026-01-24 02:32:57,439 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-24 02:32:57,440 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[10.26765556  8.39480182  0.63298172  2.9999961  13.49999971]
2026-01-24 02:32:57,441 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.116m, drift=0.799m)
2026-01-24 02:32:57,441 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-24 02:32:57,441 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:57,458 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(10.268, 8.395), path_start=(0.000, 0.000), dist=13.263m
2026-01-24 02:32:57,458 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.263m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:32:57,458 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-24 02:32:57,461 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:32:57,488 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:32:57,488 - INFO - integration_test - Warmstart k=0: x0=10.267655557657383 , y0=8.39480181680699 , psi0=0.6329817212204141 , v0=2.999996104752799 , spline0=13.499999706642365 , a0=0.0 , w0=0.0
2026-01-24 02:32:57,488 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:32:57,490 - INFO - integration_test - Dyn residual k=0: pred=[10.50953541965885, 8.572267020842798, 0.6329817212204141, 2.999996104752799, 13.799999317117646], ws=[10.50953541965885, 8.572267020842798, 0.6329817212204141, 2.999996104752799, 13.547474064592393], res=[0.0, 0.0, 0.0, 0.0, 0.2525252525252526], res_norm=2.525e-01
2026-01-24 02:32:57,491 - INFO - integration_test - Dyn residual k=1: pred=[10.751415281660316, 8.749732224878606, 0.6329817212204141, 2.999996104752799, 13.847473675067674], ws=[10.751415281660316, 8.749732224878606, 0.6329817212204141, 2.999996104752799, 13.44343327102727], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-24 02:32:57,491 - INFO - integration_test - Dyn residual k=2: pred=[10.993295143661783, 8.927197428914415, 0.6329817212204141, 2.999996104752799, 13.743432881502551], ws=[10.993295143661783, 8.927197428914415, 0.6329817212204141, 2.999996104752799, 14.046463184532854], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:32:57,509 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:57,568 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:57,590 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:57,637 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:57,661 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:57,708 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:57,730 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:57,779 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:57,801 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:57,851 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:57,873 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:57,922 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:57,948 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:58,000 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:58,022 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:58,071 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:58,093 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:58,141 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:58,164 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:58,210 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:32:58,233 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:32:58,284 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:07,671 - WARNING - integration_test - Step 48: MPC solve failed
2026-01-24 02:33:07,671 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:33:07,676 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-24 02:33:07,677 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:07,677 - INFO - integration_test - === Applying control at step 48 ===
2026-01-24 02:33:07,677 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.21599203545992562}
2026-01-24 02:33:07,677 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:07,677 - INFO - integration_test -   Planner output success: False
2026-01-24 02:33:07,677 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.21599203545992562}
2026-01-24 02:33:07,679 - INFO - integration_test - Step 48 completed in 10.239s
2026-01-24 02:33:07,748 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-24 02:33:07,748 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[10.49962358  8.56883441  0.65458092  2.7999961  13.77999932]
2026-01-24 02:33:07,749 - DEBUG - integration_test - Step 49: Using propagated spline 13.7800 (close to path, dist=0.149m, drift=0.670m)
2026-01-24 02:33:07,749 - DEBUG - integration_test -   Set spline state to 13.7800
2026-01-24 02:33:07,749 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:07,767 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(10.500, 8.569), path_start=(0.000, 0.000), dist=13.552m
2026-01-24 02:33:07,767 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.552m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:07,767 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-24 02:33:07,773 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:07,817 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:07,817 - INFO - integration_test - Warmstart k=0: x0=10.499623577827583 , y0=8.56883441000566 , psi0=0.6545809247664066 , v0=2.799996104752799 , spline0=13.779999317117644 , a0=0.0 , w0=0.0
2026-01-24 02:33:07,818 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:07,819 - INFO - integration_test - Dyn residual k=0: pred=[10.721748148578424, 8.73930568892109, 0.6545809247664066, 2.799996104752799, 14.059998927592924], ws=[10.721748148578424, 8.73930568892109, 0.6545809247664067, 2.799996104752799, 13.403433271027266], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.6565656565656575], res_norm=6.566e-01
2026-01-24 02:33:07,821 - INFO - integration_test - Dyn residual k=1: pred=[10.943872719329265, 8.909776967836521, 0.6545809247664067, 2.799996104752799, 13.683432881502545], ws=[10.943872719329265, 8.909776967836521, 0.6545809247664067, 2.799996104752799, 13.784442982512648], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-24 02:33:07,822 - INFO - integration_test - Dyn residual k=2: pred=[11.165997290080107, 9.080248246751951, 0.6545809247664067, 2.799996104752799, 14.064442592987927], ws=[11.165997290080107, 9.080248246751951, 0.6545809247664067, 2.799996104752799, 14.367472896018228], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-24 02:33:07,848 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:07,917 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:07,941 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:07,994 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,018 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,068 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,089 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,136 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,158 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,208 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,231 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,279 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,301 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,349 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,371 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,415 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,435 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,482 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,503 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,549 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:08,570 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:08,614 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:09,427 - INFO - integration_test - Step 49: MPC solve successful
2026-01-24 02:33:09,432 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.780)
2026-01-24 02:33:09,432 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:09,432 - INFO - integration_test - === Applying control at step 49 ===
2026-01-24 02:33:09,432 - INFO - integration_test -   Control dict from planner: {'a': 1.9999997550516784, 'w': -0.7432700852968503}
2026-01-24 02:33:09,432 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:09,432 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:09,434 - INFO - integration_test - Step 49 completed in 1.686s
2026-01-24 02:33:09,489 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-24 02:33:09,490 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[10.73609967  8.73658464  0.58025392  2.99999608 14.07999893]
2026-01-24 02:33:09,490 - DEBUG - integration_test - Step 50: Using propagated spline 14.0800 (close to path, dist=0.203m, drift=0.970m)
2026-01-24 02:33:09,491 - DEBUG - integration_test -   Set spline state to 14.0800
2026-01-24 02:33:09,491 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:09,505 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(10.736, 8.737), path_start=(0.000, 0.000), dist=13.842m
2026-01-24 02:33:09,506 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.842m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:09,506 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-24 02:33:09,508 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:09,537 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:09,537 - INFO - integration_test - Warmstart k=0: x0=10.736099666111963 , y0=8.736584640474758 , psi0=0.5802539162367216 , v0=2.999996080257967 , spline0=14.07999892514344 , a0=0.0 , w0=0.0
2026-01-24 02:33:09,537 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:09,538 - INFO - integration_test - Dyn residual k=0: pred=[10.986996379527596, 8.901055318751663, 0.5802539162367216, 2.999996080257967, 14.379998533169237], ws=[10.986996379527596, 8.901055318751663, 0.5802539162367215, 2.999996080257967, 14.026463179633883], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.3535353535353547], res_norm=3.535e-01
2026-01-24 02:33:09,539 - INFO - integration_test - Dyn residual k=1: pred=[11.23789309294323, 9.065525997028567, 0.5802539162367215, 2.999996080257967, 14.326462787659679], ws=[11.23789309294323, 9.065525997028567, 0.5802539162367215, 2.999996080257967, 13.922422383619278], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404013], res_norm=4.040e-01
2026-01-24 02:33:09,540 - INFO - integration_test - Dyn residual k=2: pred=[11.488789806358863, 9.229996675305472, 0.5802539162367215, 2.999996080257967, 14.222421991645074], ws=[11.488789806358863, 9.229996675305472, 0.5802539162367215, 2.999996080257967, 14.525452294675375], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-24 02:33:09,556 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:09,609 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:09,632 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:09,677 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:09,699 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:09,744 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:09,764 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:09,809 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:09,830 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:09,875 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:09,896 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:09,939 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:09,960 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:10,004 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:10,023 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:10,069 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:10,089 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:10,133 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:10,154 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:10,198 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:10,220 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:10,267 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:22,586 - WARNING - integration_test - Step 50: MPC solve failed
2026-01-24 02:33:22,586 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:33:22,590 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.080)
2026-01-24 02:33:22,591 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:22,591 - INFO - integration_test - === Applying control at step 50 ===
2026-01-24 02:33:22,591 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.448028222778337}
2026-01-24 02:33:22,591 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:22,591 - INFO - integration_test -   Planner output success: False
2026-01-24 02:33:22,591 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.448028222778337}
2026-01-24 02:33:22,592 - INFO - integration_test - Step 50 completed in 13.102s
2026-01-24 02:33:22,650 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-24 02:33:22,651 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[10.97503337  8.90089044  0.62505674  2.79999608 14.35999853]
2026-01-24 02:33:22,652 - DEBUG - integration_test - Step 51: Using propagated spline 14.3600 (close to path, dist=0.107m, drift=0.840m)
2026-01-24 02:33:22,652 - DEBUG - integration_test -   Set spline state to 14.3600
2026-01-24 02:33:22,652 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:22,670 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(10.975, 8.901), path_start=(0.000, 0.000), dist=14.131m
2026-01-24 02:33:22,670 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.131m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:22,670 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-24 02:33:22,672 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:22,700 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:22,700 - INFO - integration_test - Warmstart k=0: x0=10.975033369697064 , y0=8.900890443652951 , psi0=0.6250567385145553 , v0=2.7999960802579666 , spline0=14.359998533169238 , a0=0.0 , w0=0.0
2026-01-24 02:33:22,700 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:22,701 - INFO - integration_test - Dyn residual k=0: pred=[11.202093429615385, 9.064730334047473, 0.6250567385145553, 2.7999960802579666, 14.639998141195035], ws=[11.202093429615385, 9.064730334047473, 0.6250567385145551, 2.7999960802579666, 14.387472888669784], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.2525252525252508], res_norm=2.525e-01
2026-01-24 02:33:22,702 - INFO - integration_test - Dyn residual k=1: pred=[11.429153489533705, 9.228570224441995, 0.6250567385145551, 2.7999960802579666, 14.66747249669558], ws=[11.429153489533705, 9.228570224441995, 0.6250567385145551, 2.7999960802579666, 14.263432092655176], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-24 02:33:22,703 - INFO - integration_test - Dyn residual k=2: pred=[11.656213549452026, 9.392410114836517, 0.6250567385145551, 2.7999960802579666, 14.543431700680973], ws=[11.656213549452026, 9.392410114836517, 0.6250567385145551, 2.7999960802579666, 14.588894271372993], res=[0.0, 0.0, 0.0, 0.0, -0.04546257069202042], res_norm=4.546e-02
2026-01-24 02:33:22,720 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:22,775 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:22,796 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:22,841 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:22,862 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:22,909 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:22,931 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:22,980 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:23,000 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:23,048 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:23,070 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:23,118 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:23,141 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:23,192 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:23,218 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:23,278 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:23,306 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:23,362 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:23,386 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:23,436 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:23,460 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:23,511 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:24,730 - INFO - integration_test - Step 51: MPC solve successful
2026-01-24 02:33:24,735 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.360)
2026-01-24 02:33:24,735 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:24,735 - INFO - integration_test - === Applying control at step 51 ===
2026-01-24 02:33:24,735 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019996849, 'w': -0.4602830959979129}
2026-01-24 02:33:24,735 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:24,735 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:24,737 - INFO - integration_test - Step 51 completed in 2.086s
2026-01-24 02:33:24,801 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-24 02:33:24,802 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[11.21406775  9.06504737  0.57902843  2.99999608 14.65999814]
2026-01-24 02:33:24,802 - DEBUG - integration_test - Step 52: Using propagated spline 14.6600 (close to path, dist=0.100m, drift=0.730m)
2026-01-24 02:33:24,802 - DEBUG - integration_test -   Set spline state to 14.6600
2026-01-24 02:33:24,803 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:24,819 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(11.214, 9.065), path_start=(0.000, 0.000), dist=14.420m
2026-01-24 02:33:24,819 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.420m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:24,819 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-24 02:33:24,822 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:24,850 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:24,850 - INFO - integration_test - Warmstart k=0: x0=11.214067753810033 , y0=9.065047366344427 , psi0=0.579028428914764 , v0=2.9999960822576517 , spline0=14.659998141395002 , a0=0.0 , w0=0.0
2026-01-24 02:33:24,850 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:24,851 - INFO - integration_test - Dyn residual k=0: pred=[11.465165835672927, 9.229210450563711, 0.579028428914764, 2.9999960822576517, 14.959997749620767], ws=[11.465165835672927, 9.229210450563711, 0.5790284289147642, 2.9999960822576517, 14.505452295075312], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 02:33:24,852 - INFO - integration_test - Dyn residual k=1: pred=[11.716263917535821, 9.393373534782995, 0.5790284289147642, 2.9999960822576517, 14.805451903301076], ws=[11.716263917535821, 9.393373534782995, 0.5790284289147642, 2.9999960822576517, 14.622227605039605], res=[0.0, 0.0, 0.0, 0.0, 0.18322429826147157], res_norm=1.832e-01
2026-01-24 02:33:24,853 - INFO - integration_test - Dyn residual k=2: pred=[11.967361999398715, 9.55753661900228, 0.5790284289147642, 2.9999960822576517, 14.92222721326537], ws=[11.967361999398715, 9.55753661900228, 0.5790284289147642, 2.9999960822576517, 14.981116648962175], res=[0.0, 0.0, 0.0, 0.0, -0.05888943569680549], res_norm=5.889e-02
2026-01-24 02:33:24,871 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:24,932 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:24,955 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,003 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,026 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,075 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,098 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,148 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,169 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,219 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,242 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,293 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,315 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,364 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,386 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,433 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,454 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,505 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,537 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,608 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:25,633 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:25,684 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:26,757 - INFO - integration_test - Step 52: MPC solve successful
2026-01-24 02:33:26,762 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.660)
2026-01-24 02:33:26,762 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:26,762 - INFO - integration_test - === Applying control at step 52 ===
2026-01-24 02:33:26,762 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019997381, 'w': 0.09095937949547077}
2026-01-24 02:33:26,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:26,762 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:26,764 - INFO - integration_test - Step 52 completed in 1.963s
2026-01-24 02:33:26,825 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-24 02:33:26,825 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[11.45607918  9.22482741  0.58812437  2.79999608 14.93999775]
2026-01-24 02:33:26,826 - DEBUG - integration_test - Step 53: Using propagated spline 14.9400 (close to path, dist=0.193m, drift=0.601m)
2026-01-24 02:33:26,826 - DEBUG - integration_test -   Set spline state to 14.9400
2026-01-24 02:33:26,826 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:26,842 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(11.456, 9.225), path_start=(0.000, 0.000), dist=14.708m
2026-01-24 02:33:26,842 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.708m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:26,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-24 02:33:26,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:26,874 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:26,874 - INFO - integration_test - Warmstart k=0: x0=11.456079178152626 , y0=9.22482741388505 , psi0=0.5881243668643111 , v0=2.7999960802579134 , spline0=14.939997749420794 , a0=0.0 , w0=0.0
2026-01-24 02:33:26,874 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:26,876 - INFO - integration_test - Dyn residual k=0: pred=[11.689034020926425, 9.380171617905772, 0.5881243668643111, 2.7999960802579134, 15.219997357446585], ws=[11.689034020926425, 9.380171617905772, 0.588124366864311, 2.7999960802579134, 14.60000538259519], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.6199919748513949], res_norm=6.200e-01
2026-01-24 02:33:26,877 - INFO - integration_test - Dyn residual k=1: pred=[11.921988863700223, 9.535515821926493, 0.588124366864311, 2.7999960802579134, 14.880004990620982], ws=[11.921988863700223, 9.535515821926493, 0.588124366864311, 2.7999960802579134, 15.239147510718539], res=[0.0, 0.0, 0.0, 0.0, -0.35914252009755643], res_norm=3.591e-01
2026-01-24 02:33:26,878 - INFO - integration_test - Dyn residual k=2: pred=[12.154943706474022, 9.690860025947215, 0.588124366864311, 2.7999960802579134, 15.51914711874433], ws=[12.154943706474022, 9.690860025947215, 0.588124366864311, 2.7999960802579134, 15.098894216574005], res=[0.0, 0.0, 0.0, 0.0, 0.4202529021703256], res_norm=4.203e-01
2026-01-24 02:33:26,895 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:26,955 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:26,977 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,024 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,046 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,094 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,117 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,165 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,186 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,237 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,260 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,311 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,335 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,385 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,406 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,454 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,476 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,525 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,546 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,596 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:27,618 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:27,666 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:28,409 - INFO - integration_test - Step 53: MPC solve successful
2026-01-24 02:33:28,414 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=14.940)
2026-01-24 02:33:28,415 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:28,415 - INFO - integration_test - === Applying control at step 53 ===
2026-01-24 02:33:28,415 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199919308, 'w': -0.19395279514747715}
2026-01-24 02:33:28,415 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:28,415 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:28,417 - INFO - integration_test - Step 53 completed in 1.592s
2026-01-24 02:33:28,485 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-24 02:33:28,486 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[11.69891662  9.38334276  0.56872909  2.99999608 15.23999736]
2026-01-24 02:33:28,487 - DEBUG - integration_test - Step 54: Using propagated spline 15.2400 (close to path, dist=0.138m, drift=0.901m)
2026-01-24 02:33:28,487 - DEBUG - integration_test -   Set spline state to 15.2400
2026-01-24 02:33:28,487 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:28,503 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(11.699, 9.383), path_start=(0.000, 0.000), dist=14.997m
2026-01-24 02:33:28,504 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=14.997m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:28,504 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-24 02:33:28,507 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:28,537 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:28,537 - INFO - integration_test - Warmstart k=0: x0=11.698916619935188 , y0=9.383342757943788 , psi0=0.5687290873495634 , v0=2.9999960822571063 , spline0=15.239997357646505 , a0=0.0 , w0=0.0
2026-01-24 02:33:28,537 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:28,538 - INFO - integration_test - Dyn residual k=0: pred=[11.95169212590596, 9.544911036132296, 0.5687290873495634, 2.9999960822571063, 15.539996965872216], ws=[11.951692125905963, 9.544911036132298, 0.5687290873495634, 2.9999960822571063, 14.97040957814799], res=[-1.7763568394002505e-15, -1.7763568394002505e-15, 0.0, 0.0, 0.5695873877242263], res_norm=5.696e-01
2026-01-24 02:33:28,539 - INFO - integration_test - Dyn residual k=1: pred=[12.204467631876735, 9.706479314320806, 0.5687290873495634, 2.9999960822571063, 15.270409186373701], ws=[12.204467631876737, 9.706479314320806, 0.5687290873495634, 2.9999960822571063, 15.597430521942211], res=[-1.7763568394002505e-15, 0.0, 0.0, 0.0, -0.3270213355685101], res_norm=3.270e-01
2026-01-24 02:33:28,539 - INFO - integration_test - Dyn residual k=2: pred=[12.45724313784751, 9.868047592509313, 0.5687290873495634, 2.9999960822571063, 15.897430130167923], ws=[12.457243137847511, 9.868047592509313, 0.5687290873495634, 2.9999960822571063, 15.472126718909], res=[-1.7763568394002505e-15, 0.0, 0.0, 0.0, 0.42530341125892335], res_norm=4.253e-01
2026-01-24 02:33:28,556 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:28,616 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:28,640 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:28,689 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:28,712 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:28,760 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:28,782 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:28,830 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:28,853 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:28,920 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:28,954 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:29,013 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:29,036 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:29,083 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:29,105 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:29,175 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:29,208 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:29,264 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:29,288 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:29,337 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:29,360 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:29,408 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,204 - INFO - integration_test - Step 54: MPC solve successful
2026-01-24 02:33:30,208 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.240)
2026-01-24 02:33:30,209 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:30,209 - INFO - integration_test - === Applying control at step 54 ===
2026-01-24 02:33:30,209 - INFO - integration_test -   Control dict from planner: {'a': 3.947742390458293e-05, 'w': -0.01816314745205602}
2026-01-24 02:33:30,209 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:30,209 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:30,210 - INFO - integration_test - Step 54 completed in 1.724s
2026-01-24 02:33:30,273 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-24 02:33:30,274 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[11.95183888  9.54468149  0.56691277  3.00000003 15.53999736]
2026-01-24 02:33:30,274 - DEBUG - integration_test - Step 55: Using propagated spline 15.5400 (close to path, dist=0.077m, drift=0.791m)
2026-01-24 02:33:30,274 - DEBUG - integration_test -   Set spline state to 15.5400
2026-01-24 02:33:30,275 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:30,291 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(11.952, 9.545), path_start=(0.000, 0.000), dist=15.295m
2026-01-24 02:33:30,291 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.295m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:30,291 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-24 02:33:30,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:30,321 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:30,322 - INFO - integration_test - Warmstart k=0: x0=11.951838882748527 , y0=9.54468149352411 , psi0=0.5669127726043578 , v0=3.0000000299994967 , spline0=15.539997360646455 , a0=0.0 , w0=0.0
2026-01-24 02:33:30,322 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:30,322 - INFO - integration_test - Dyn residual k=0: pred=[12.204907763467903, 9.705790597585338, 0.5669127726043578, 3.0000000299994967, 15.839997363646404], ws=[12.204907760937257, 9.705790595974275, 0.5669127726043577, 3.0, 15.597430903299072], res=[2.5306459150442606e-09, 1.6110632827803784e-09, 1.1102230246251565e-16, 2.999949666460111e-08, 0.24256646034733187], res_norm=2.426e-01
2026-01-24 02:33:30,323 - INFO - integration_test - Dyn residual k=1: pred=[12.457976639125986, 9.86689969842444, 0.5669127726043577, 3.0, 15.897430903299073], ws=[12.457976639125986, 9.86689969842444, 0.5669127726043577, 3.0, 15.472127325923784], res=[0.0, 0.0, 0.0, 0.0, 0.42530357737528846], res_norm=4.253e-01
2026-01-24 02:33:30,324 - INFO - integration_test - Dyn residual k=2: pred=[12.711045517314716, 10.028008800874606, 0.5669127726043577, 3.0, 15.772127325923785], ws=[12.711045517314716, 10.028008800874606, 0.5669127726043577, 3.0, 16.062784803367446], res=[0.0, 0.0, 0.0, 0.0, -0.290657477443661], res_norm=2.907e-01
2026-01-24 02:33:30,340 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,397 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,418 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,465 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,489 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,533 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,552 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,596 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,615 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,659 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,680 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,725 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,746 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,790 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,808 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,852 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,871 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,917 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:30,938 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:30,983 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:31,001 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:31,046 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:31,647 - INFO - integration_test - Step 55: MPC solve successful
2026-01-24 02:33:31,651 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.540)
2026-01-24 02:33:31,652 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:31,652 - INFO - integration_test - === Applying control at step 55 ===
2026-01-24 02:33:31,652 - INFO - integration_test -   Control dict from planner: {'a': 2.714346719190818e-14, 'w': -0.06233878579879751}
2026-01-24 02:33:31,652 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:31,652 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:31,653 - INFO - integration_test - Step 55 completed in 1.380s
2026-01-24 02:33:31,710 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-24 02:33:31,711 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[12.20540829  9.70500076  0.56067889  3.00000003 15.83999736]
2026-01-24 02:33:31,712 - DEBUG - integration_test - Step 56: Using propagated spline 15.8400 (close to path, dist=0.129m, drift=0.681m)
2026-01-24 02:33:31,712 - DEBUG - integration_test -   Set spline state to 15.8400
2026-01-24 02:33:31,712 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:31,728 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(12.205, 9.705), path_start=(0.000, 0.000), dist=15.594m
2026-01-24 02:33:31,728 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.594m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:31,728 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-24 02:33:31,731 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:31,757 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:31,757 - INFO - integration_test - Warmstart k=0: x0=12.205408290046226 , y0=9.705000756321235 , psi0=0.560678894024478 , v0=3.0000000299994993 , spline0=15.839997363646404 , a0=0.0 , w0=0.0
2026-01-24 02:33:31,757 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:31,758 - INFO - integration_test - Dyn residual k=0: pred=[12.459476581583894, 9.8645291394858, 0.560678894024478, 3.0000000299994993, 16.139997366646355], ws=[12.459476579043255, 9.864529137890543, 0.5606788940244778, 3.0, 15.472127327469213], res=[2.5406396986227264e-09, 1.595257259623395e-09, 2.220446049250313e-16, 2.999949932913637e-08, 0.6678700391771422], res_norm=6.679e-01
2026-01-24 02:33:31,758 - INFO - integration_test - Dyn residual k=1: pred=[12.713544868040284, 10.02405751945985, 0.5606788940244778, 3.0, 15.772127327469214], ws=[12.713544868040284, 10.02405751945985, 0.5606788940244778, 3.0, 16.062784804761364], res=[0.0, 0.0, 0.0, 0.0, -0.2906574772921502], res_norm=2.907e-01
2026-01-24 02:33:31,759 - INFO - integration_test - Dyn residual k=2: pred=[12.967613157037313, 10.183585901029158, 0.5606788940244778, 3.0, 16.362784804761365], ws=[12.967613157037313, 10.183585901029158, 0.5606788940244778, 3.0, 16.454755048712407], res=[0.0, 0.0, 0.0, 0.0, -0.09197024395104236], res_norm=9.197e-02
2026-01-24 02:33:31,774 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:31,828 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:31,849 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:31,895 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:31,916 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:31,961 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:31,981 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:32,026 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:32,045 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:32,093 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:32,113 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:32,159 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:32,181 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:32,228 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:32,250 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:32,306 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:32,341 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:32,411 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:32,435 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:32,483 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:32,507 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:32,557 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,229 - INFO - integration_test - Step 56: MPC solve successful
2026-01-24 02:33:33,234 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.840)
2026-01-24 02:33:33,234 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:33,234 - INFO - integration_test - === Applying control at step 56 ===
2026-01-24 02:33:33,234 - INFO - integration_test -   Control dict from planner: {'a': 2.499345265034414e-13, 'w': -0.05191954074901927}
2026-01-24 02:33:33,234 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:33,234 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:33,236 - INFO - integration_test - Step 56 completed in 1.525s
2026-01-24 02:33:33,304 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-24 02:33:33,304 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[12.45988957  9.86386887  0.55548694  3.00000003 16.13999737]
2026-01-24 02:33:33,305 - DEBUG - integration_test - Step 57: Using propagated spline 16.1400 (close to path, dist=0.210m, drift=0.981m)
2026-01-24 02:33:33,305 - DEBUG - integration_test -   Set spline state to 16.1400
2026-01-24 02:33:33,305 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:33,323 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(12.460, 9.864), path_start=(0.000, 0.000), dist=15.892m
2026-01-24 02:33:33,323 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.892m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:33,323 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-24 02:33:33,326 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:33,354 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:33,354 - INFO - integration_test - Warmstart k=0: x0=12.459889571214187 , y0=9.86386886879949 , psi0=0.5554869399495761 , v0=3.000000029999524 , spline0=16.139997366646355 , a0=0.0 , w0=0.0
2026-01-24 02:33:33,354 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:33,355 - INFO - integration_test - Dyn residual k=0: pred=[12.714782698695812, 10.022075996839309, 0.5554869399495761, 3.000000029999524, 16.439997369646306], ws=[12.714782696146921, 10.022075995257262, 0.5554869399495761, 3.0, 16.06278480615528], res=[2.5488908761417406e-09, 1.5820464938087753e-09, 0.0, 2.999952419813212e-08, 0.37721256349102816], res_norm=3.772e-01
2026-01-24 02:33:33,356 - INFO - integration_test - Dyn residual k=1: pred=[12.969675821079655, 10.180283121715036, 0.5554869399495761, 3.0, 16.36278480615528], ws=[12.969675821079655, 10.180283121715036, 0.5554869399495761, 3.0, 16.454755050015418], res=[0.0, 0.0, 0.0, 0.0, -0.09197024386013908], res_norm=9.197e-02
2026-01-24 02:33:33,357 - INFO - integration_test - Dyn residual k=2: pred=[13.224568946012388, 10.338490248172809, 0.5554869399495761, 3.0, 16.75475505001542], ws=[13.224568946012388, 10.338490248172809, 0.5554869399495761, 3.0, 16.34157268494316], res=[0.0, 0.0, 0.0, 0.0, 0.41318236507225947], res_norm=4.132e-01
2026-01-24 02:33:33,374 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:33,442 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,465 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:33,516 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,538 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:33,585 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,606 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:33,653 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,674 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:33,724 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,746 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:33,795 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,818 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:33,865 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,886 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:33,935 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:33,957 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:34,013 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:34,037 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:34,090 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:34,116 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:34,170 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:34,840 - INFO - integration_test - Step 57: MPC solve successful
2026-01-24 02:33:34,845 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.140)
2026-01-24 02:33:34,845 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:34,845 - INFO - integration_test - === Applying control at step 57 ===
2026-01-24 02:33:34,845 - INFO - integration_test -   Control dict from planner: {'a': 1.7898226630922844e-12, 'w': -0.049849494906354756}
2026-01-24 02:33:34,845 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:34,845 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:34,847 - INFO - integration_test - Step 57 completed in 1.543s
2026-01-24 02:33:34,912 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-24 02:33:34,912 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[12.71517597 10.02144003  0.55050199  3.00000003 16.43999737]
2026-01-24 02:33:34,913 - DEBUG - integration_test - Step 58: Using propagated spline 16.4400 (close to path, dist=0.116m, drift=0.872m)
2026-01-24 02:33:34,913 - DEBUG - integration_test -   Set spline state to 16.4400
2026-01-24 02:33:34,913 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:34,929 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(12.715, 10.021), path_start=(0.000, 0.000), dist=16.190m
2026-01-24 02:33:34,930 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.190m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:34,930 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-24 02:33:34,933 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:34,960 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:34,960 - INFO - integration_test - Warmstart k=0: x0=12.715175969481242 , y0=10.021440028238931 , psi0=0.5505019904589407 , v0=3.000000029999703 , spline0=16.439997369646324 , a0=0.0 , w0=0.0
2026-01-24 02:33:34,960 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:34,961 - INFO - integration_test - Dyn residual k=0: pred=[12.970854581233867, 10.178374566477753, 0.5505019904589407, 3.000000029999703, 16.739997372646293], ws=[12.970854578677107, 10.178374564908424, 0.5505019904589408, 3.0, 16.454755051318436], res=[2.5567601369402837e-09, 1.5693295551955089e-09, -1.1102230246251565e-16, 2.999970316608369e-08, 0.285242321327857], res_norm=2.852e-01
2026-01-24 02:33:34,961 - INFO - integration_test - Dyn residual k=1: pred=[13.226533187872972, 10.335309101577916, 0.5505019904589408, 3.0, 16.754755051318437], ws=[13.226533187872972, 10.335309101577916, 0.5505019904589408, 3.0, 16.34157268633708], res=[0.0, 0.0, 0.0, 0.0, 0.4131823649813562], res_norm=4.132e-01
2026-01-24 02:33:34,962 - INFO - integration_test - Dyn residual k=2: pred=[13.482211797068837, 10.492243638247409, 0.5505019904589408, 3.0, 16.64157268633708], ws=[13.482211797068837, 10.492243638247409, 0.5505019904589408, 3.0, 16.949755598117967], res=[0.0, 0.0, 0.0, 0.0, -0.30818291178088586], res_norm=3.082e-01
2026-01-24 02:33:34,978 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,036 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,057 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,104 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,126 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,173 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,194 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,241 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,263 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,313 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,337 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,386 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,407 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,453 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,474 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,522 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,545 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,590 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,610 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,659 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:35,681 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:35,746 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:36,440 - INFO - integration_test - Step 58: MPC solve successful
2026-01-24 02:33:36,446 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.440)
2026-01-24 02:33:36,446 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:36,446 - INFO - integration_test - === Applying control at step 58 ===
2026-01-24 02:33:36,447 - INFO - integration_test -   Control dict from planner: {'a': 5.028129772426082e-13, 'w': -0.043315100772476064}
2026-01-24 02:33:36,447 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:36,447 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:36,449 - INFO - integration_test - Step 58 completed in 1.537s
2026-01-24 02:33:36,517 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-24 02:33:36,518 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[12.97119366 10.17782034  0.54617048  3.00000003 16.73999737]
2026-01-24 02:33:36,518 - DEBUG - integration_test - Step 59: Using propagated spline 16.7400 (close to path, dist=0.080m, drift=0.762m)
2026-01-24 02:33:36,518 - DEBUG - integration_test -   Set spline state to 16.7400
2026-01-24 02:33:36,519 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:36,535 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(12.971, 10.178), path_start=(0.000, 0.000), dist=16.488m
2026-01-24 02:33:36,535 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.488m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:36,535 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-24 02:33:36,538 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:36,566 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:36,566 - INFO - integration_test - Warmstart k=0: x0=12.971193662964025 , y0=10.177820339368562 , psi0=0.546170480381693 , v0=3.0000000299997533 , spline0=16.7399973726463 , a0=0.0 , w0=0.0
2026-01-24 02:33:36,566 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:36,567 - INFO - integration_test - Dyn residual k=0: pred=[13.227549637610196, 10.333645934388112, 0.546170480381693, 3.0000000299997533, 17.039997375646276], ws=[13.227549635046657, 10.333645932829869, 0.5461704803816931, 3.0, 16.34157268773101], res=[2.563538714639435e-09, 1.558243312160812e-09, -1.1102230246251565e-16, 2.9999753348164404e-08, 0.6984246879152671], res_norm=6.984e-01
2026-01-24 02:33:36,568 - INFO - integration_test - Dyn residual k=1: pred=[13.483905607129289, 10.489471526291176, 0.5461704803816931, 3.0, 16.64157268773101], ws=[13.483905607129289, 10.489471526291176, 0.5461704803816931, 3.0, 16.949755599330082], res=[0.0, 0.0, 0.0, 0.0, -0.3081829115990722], res_norm=3.082e-01
2026-01-24 02:33:36,569 - INFO - integration_test - Dyn residual k=2: pred=[13.740261579211921, 10.645297119752483, 0.5461704803816931, 3.0, 17.249755599330083], ws=[13.740261579211921, 10.645297119752483, 0.5461704803816931, 3.0, 17.0709677205422], res=[0.0, 0.0, 0.0, 0.0, 0.17878787878788316], res_norm=1.788e-01
2026-01-24 02:33:36,585 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:36,642 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:36,664 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:36,714 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:36,739 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:36,785 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:36,806 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:36,850 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:36,870 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:36,916 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:36,939 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:36,983 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:37,004 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:37,048 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:37,070 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:37,116 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:37,137 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:37,185 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:37,207 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:37,253 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:37,276 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:37,325 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,042 - INFO - integration_test - Step 59: MPC solve successful
2026-01-24 02:33:38,047 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.740)
2026-01-24 02:33:38,047 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:38,047 - INFO - integration_test - === Applying control at step 59 ===
2026-01-24 02:33:38,047 - INFO - integration_test -   Control dict from planner: {'a': 3.7420530126446324e-13, 'w': -0.031728890229206115}
2026-01-24 02:33:38,047 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:38,047 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:38,049 - INFO - integration_test - Step 59 completed in 1.531s
2026-01-24 02:33:38,105 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-24 02:33:38,106 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[13.22779642 10.33323898  0.54299759  3.00000003 17.03999738]
2026-01-24 02:33:38,106 - DEBUG - integration_test - Step 60: Using propagated spline 17.0400 (close to path, dist=0.153m, drift=0.652m)
2026-01-24 02:33:38,106 - DEBUG - integration_test -   Set spline state to 17.0400
2026-01-24 02:33:38,106 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:38,122 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(13.228, 10.333), path_start=(0.000, 0.000), dist=16.785m
2026-01-24 02:33:38,122 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.785m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:38,122 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-24 02:33:38,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:38,151 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:38,151 - INFO - integration_test - Warmstart k=0: x0=13.227796415930792 , y0=10.33323897874527 , psi0=0.5429975913587725 , v0=3.0000000299997907 , spline0=17.03999737564628 , a0=0.0 , w0=0.0
2026-01-24 02:33:38,151 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:38,152 - INFO - integration_test - Dyn residual k=0: pred=[13.484645516671801, 10.488250401706683, 0.5429975913587725, 3.0000000299997907, 17.33999737864626], ws=[13.48464551410333, 10.488250400156579, 0.5429975913587723, 3.0, 16.949755600542193], res=[2.5684716575824496e-09, 1.55010404512268e-09, 1.1102230246251565e-16, 2.999979065165803e-08, 0.39024177810406613], res_norm=3.902e-01
2026-01-24 02:33:38,153 - INFO - integration_test - Dyn residual k=1: pred=[13.741494612275867, 10.643261821567888, 0.5429975913587723, 3.0, 17.249755600542194], ws=[13.741494612275867, 10.643261821567888, 0.5429975913587723, 3.0, 17.070967721754315], res=[0.0, 0.0, 0.0, 0.0, 0.1787878787878796], res_norm=1.788e-01
2026-01-24 02:33:38,154 - INFO - integration_test - Dyn residual k=2: pred=[13.998343710448404, 10.798273242979198, 0.5429975913587723, 3.0, 17.370967721754315], ws=[13.998343710448404, 10.798273242979198, 0.5429975913587723, 3.0, 17.192179842966436], res=[0.0, 0.0, 0.0, 0.0, 0.1787878787878796], res_norm=1.788e-01
2026-01-24 02:33:38,170 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,225 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,245 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,292 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,313 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,359 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,379 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,424 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,443 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,487 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,509 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,556 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,575 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,619 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,639 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,683 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,706 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,752 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,774 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,818 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:38,838 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:38,883 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,019 - INFO - integration_test - Step 60: MPC solve successful
2026-01-24 02:33:40,024 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.040)
2026-01-24 02:33:40,024 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:40,024 - INFO - integration_test - === Applying control at step 60 ===
2026-01-24 02:33:40,024 - INFO - integration_test -   Control dict from planner: {'a': 5.73312568476033e-13, 'w': -0.02620242371181274}
2026-01-24 02:33:40,024 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:40,024 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:40,026 - INFO - integration_test - Step 60 completed in 1.920s
2026-01-24 02:33:40,091 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-24 02:33:40,092 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[13.48484831 10.48791372  0.54037735  3.00000003 17.33999738]
2026-01-24 02:33:40,092 - DEBUG - integration_test - Step 61: Using propagated spline 17.3400 (close to path, dist=0.184m, drift=0.952m)
2026-01-24 02:33:40,092 - DEBUG - integration_test -   Set spline state to 17.3400
2026-01-24 02:33:40,093 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:40,111 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(13.485, 10.488), path_start=(0.000, 0.000), dist=17.083m
2026-01-24 02:33:40,111 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.083m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:40,111 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-24 02:33:40,115 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:40,145 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:40,146 - INFO - integration_test - Warmstart k=0: x0=13.484848306398083 , y0=10.487913721074678 , psi0=0.5403773489875912 , v0=3.000000029999848 , spline0=17.339997378646263 , a0=0.0 , w0=0.0
2026-01-24 02:33:40,146 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:40,147 - INFO - integration_test - Dyn residual k=0: pred=[13.7421026924527, 10.6422516057811, 0.5403773489875912, 3.000000029999848, 17.639997381646246], ws=[13.74210268988017, 10.642251604237728, 0.5403773489875912, 3.0, 17.07096772296643], res=[2.572530632960479e-09, 1.543371652701353e-09, 0.0, 2.99998479391661e-08, 0.5690296586798169], res_norm=5.690e-01
2026-01-24 02:33:40,148 - INFO - integration_test - Dyn residual k=1: pred=[13.999357073362257, 10.796589487400778, 0.5403773489875912, 3.0, 17.37096772296643], ws=[13.999357073362257, 10.796589487400778, 0.5403773489875912, 3.0, 17.19217984417855], res=[0.0, 0.0, 0.0, 0.0, 0.1787878787878796], res_norm=1.788e-01
2026-01-24 02:33:40,149 - INFO - integration_test - Dyn residual k=2: pred=[14.256611456844343, 10.950927370563829, 0.5403773489875912, 3.0, 17.49217984417855], ws=[14.256611456844343, 10.950927370563829, 0.5403773489875912, 3.0, 17.79667606890272], res=[0.0, 0.0, 0.0, 0.0, -0.3044962247241685], res_norm=3.045e-01
2026-01-24 02:33:40,168 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,232 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,256 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,312 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,391 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,416 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,466 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,489 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,539 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,561 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,609 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,632 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,682 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,706 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,757 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,779 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,826 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,849 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,898 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:40,921 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:40,971 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:41,757 - INFO - integration_test - Step 61: MPC solve successful
2026-01-24 02:33:41,762 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.340)
2026-01-24 02:33:41,762 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:41,763 - INFO - integration_test - === Applying control at step 61 ===
2026-01-24 02:33:41,763 - INFO - integration_test -   Control dict from planner: {'a': -4.2056696291868283e-10, 'w': -0.015323887024347208}
2026-01-24 02:33:41,763 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:41,763 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:41,764 - INFO - integration_test - Step 61 completed in 1.673s
2026-01-24 02:33:41,829 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-24 02:33:41,829 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[13.74222084 10.64205444  0.53884496  3.00000003 17.63999738]
2026-01-24 02:33:41,830 - DEBUG - integration_test - Step 62: Using propagated spline 17.6400 (close to path, dist=0.095m, drift=0.843m)
2026-01-24 02:33:41,830 - DEBUG - integration_test -   Set spline state to 17.6400
2026-01-24 02:33:41,830 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:41,846 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(13.742, 10.642), path_start=(0.000, 0.000), dist=17.381m
2026-01-24 02:33:41,846 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.381m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:41,846 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-24 02:33:41,849 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:41,876 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:41,877 - INFO - integration_test - Warmstart k=0: x0=13.74222084456177 , y0=10.642054438558084 , psi0=0.5388449602851564 , v0=3.0000000299577914 , spline0=17.639997381642043 , a0=0.0 , w0=0.0
2026-01-24 02:33:41,877 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:41,878 - INFO - integration_test - Dyn residual k=0: pred=[13.999711434106835, 10.795997928492545, 0.5388449602851564, 3.0000000299577914, 17.939997384637824], ws=[13.999711431535554, 10.795997926955277, 0.5388449602851564, 3.0, 17.192179845388967], res=[2.5712818541023807e-09, 1.5372680906011738e-09, 0.0, 2.995779135872567e-08, 0.7478175392488566], res_norm=7.478e-01
2026-01-24 02:33:41,879 - INFO - integration_test - Dyn residual k=1: pred=[14.257202018509338, 10.94994141535247, 0.5388449602851564, 3.0, 17.492179845388968], ws=[14.257202018509338, 10.94994141535247, 0.5388449602851564, 3.0, 17.796676069901313], res=[0.0, 0.0, 0.0, 0.0, -0.30449622451234504], res_norm=3.045e-01
2026-01-24 02:33:41,880 - INFO - integration_test - Dyn residual k=2: pred=[14.514692605483122, 11.103884903749663, 0.5388449602851564, 3.0, 18.096676069901314], ws=[14.514692605483122, 11.103884903749663, 0.5388449602851564, 3.0, 18.160717202523088], res=[0.0, 0.0, 0.0, 0.0, -0.06404113262177447], res_norm=6.404e-02
2026-01-24 02:33:41,898 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:41,957 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:41,981 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,030 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,053 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,101 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,123 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,172 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,194 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,241 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,263 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,315 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,338 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,385 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,407 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,457 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,478 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,529 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,551 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,596 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:42,618 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:42,666 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:44,852 - INFO - integration_test - Step 62: MPC solve successful
2026-01-24 02:33:44,857 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.640)
2026-01-24 02:33:44,858 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:44,858 - INFO - integration_test - === Applying control at step 62 ===
2026-01-24 02:33:44,858 - INFO - integration_test -   Control dict from planner: {'a': -0.0006887578760169933, 'w': -0.03945118404514131}
2026-01-24 02:33:44,858 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:44,858 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:44,859 - INFO - integration_test - Step 62 completed in 3.030s
2026-01-24 02:33:44,922 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-24 02:33:44,923 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[14.00001147 10.79548786  0.53489984  2.99993115 17.9399905 ]
2026-01-24 02:33:44,923 - DEBUG - integration_test - Step 63: Using propagated spline 17.9400 (close to path, dist=0.089m, drift=0.733m)
2026-01-24 02:33:44,923 - DEBUG - integration_test -   Set spline state to 17.9400
2026-01-24 02:33:44,924 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:44,940 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(14.000, 10.795), path_start=(0.000, 0.000), dist=17.679m
2026-01-24 02:33:44,940 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.679m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:44,940 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-24 02:33:44,943 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:44,970 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:44,970 - INFO - integration_test - Warmstart k=0: x0=14.000011467984953 , y0=10.795487855009076 , psi0=0.5348998418806422 , v0=2.9999311541701896 , spline0=17.939990497059064 , a0=0.0 , w0=0.0
2026-01-24 02:33:44,970 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:44,971 - INFO - integration_test - Dyn residual k=0: pred=[14.258101451946477, 10.948410807754401, 0.5348998418806422, 2.9999311541701896, 18.239983612476085], ws=[14.258101451946477, 10.948410807754401, 0.5348998418806423, 2.9999311541701896, 17.796671480179327], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.44331213229675726], res_norm=4.433e-01
2026-01-24 02:33:44,972 - INFO - integration_test - Dyn residual k=1: pred=[14.516191435908, 11.101333760499726, 0.5348998418806423, 2.9999311541701896, 18.096664595596348], ws=[14.516191435908, 11.101333760499726, 0.5348998418806423, 2.9999311541701896, 18.160711152435013], res=[0.0, 0.0, 0.0, 0.0, -0.06404655683866523], res_norm=6.405e-02
2026-01-24 02:33:44,973 - INFO - integration_test - Dyn residual k=2: pred=[14.774281419869524, 11.25425671324505, 0.5348998418806423, 2.9999311541701896, 18.460704267852034], ws=[14.774281419869524, 11.25425671324505, 0.5348998418806423, 2.9999311541701896, 18.500508956778216], res=[0.0, 0.0, 0.0, 0.0, -0.03980468892618205], res_norm=3.980e-02
2026-01-24 02:33:44,989 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,042 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,063 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,109 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,130 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,173 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,192 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,236 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,255 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,303 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,324 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,369 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,389 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,433 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,453 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,498 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,521 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,566 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,586 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,633 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:45,654 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:45,700 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:46,783 - INFO - integration_test - Step 63: MPC solve successful
2026-01-24 02:33:46,789 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=17.940)
2026-01-24 02:33:46,789 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:46,789 - INFO - integration_test - === Applying control at step 63 ===
2026-01-24 02:33:46,789 - INFO - integration_test -   Control dict from planner: {'a': 0.0006887582960186748, 'w': -0.0048865302059693146}
2026-01-24 02:33:46,789 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:46,789 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:46,790 - INFO - integration_test - Step 63 completed in 1.868s
2026-01-24 02:33:46,855 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-24 02:33:46,856 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[14.25814177 10.9483495   0.53441119  3.00000003 18.2399905 ]
2026-01-24 02:33:46,856 - DEBUG - integration_test - Step 64: Using propagated spline 18.2400 (close to path, dist=0.176m, drift=0.623m)
2026-01-24 02:33:46,856 - DEBUG - integration_test -   Set spline state to 18.2400
2026-01-24 02:33:46,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:46,872 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(14.258, 10.948), path_start=(0.000, 0.000), dist=17.977m
2026-01-24 02:33:46,872 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=17.977m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:46,872 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-24 02:33:46,875 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:46,902 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:46,902 - INFO - integration_test - Warmstart k=0: x0=14.25814176813925 , y0=10.948349497968875 , psi0=0.5344111888600452 , v0=3.0000000299997915 , spline0=18.239990500059044 , a0=0.0 , w0=0.0
2026-01-24 02:33:46,902 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:46,903 - INFO - integration_test - Dyn residual k=0: pred=[14.516312374785166, 11.101149824094405, 0.5344111888600452, 3.0000000299997915, 18.539990503059023], ws=[14.516312372203476, 11.101149822566411, 0.5344111888600453, 3.0, 18.160715186705843], res=[2.581689528824427e-09, 1.527993731542665e-09, -1.1102230246251565e-16, 2.999979153983645e-08, 0.3792753163531799], res_norm=3.793e-01
2026-01-24 02:33:46,904 - INFO - integration_test - Dyn residual k=1: pred=[14.774482976267702, 11.253950147163946, 0.5344111888600453, 3.0, 18.460715186705844], ws=[14.774482976267702, 11.253950147163946, 0.5344111888600453, 3.0, 18.500514173128952], res=[0.0, 0.0, 0.0, 0.0, -0.03979898642310786], res_norm=3.980e-02
2026-01-24 02:33:46,905 - INFO - integration_test - Dyn residual k=2: pred=[15.032653580331928, 11.406750471761482, 0.5344111888600453, 3.0, 18.800514173128953], ws=[15.032653580331928, 11.406750471761482, 0.5344111888600453, 3.0, 18.396422509069197], res=[0.0, 0.0, 0.0, 0.0, 0.40409166405975583], res_norm=4.041e-01
2026-01-24 02:33:46,923 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:46,982 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,006 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,055 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,077 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,128 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,151 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,199 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,222 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,271 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,295 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,349 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,375 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,428 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,451 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,505 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,529 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,581 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,605 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,655 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:47,679 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:47,732 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:48,780 - INFO - integration_test - Step 64: MPC solve successful
2026-01-24 02:33:48,786 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.240)
2026-01-24 02:33:48,786 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:33:48,786 - INFO - integration_test - === Applying control at step 64 ===
2026-01-24 02:33:48,786 - INFO - integration_test -   Control dict from planner: {'a': -1.6108098095451358e-06, 'w': -0.03962394096721091}
2026-01-24 02:33:48,786 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:33:48,786 - INFO - integration_test -   Planner output success: True
2026-01-24 02:33:48,788 - INFO - integration_test - Step 64 completed in 1.932s
2026-01-24 02:33:48,857 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-24 02:33:48,858 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[14.51661442 11.10063793  0.53044879  2.99999987 18.53999049]
2026-01-24 02:33:48,858 - DEBUG - integration_test - Step 65: Using propagated spline 18.5400 (close to path, dist=0.154m, drift=0.923m)
2026-01-24 02:33:48,858 - DEBUG - integration_test -   Set spline state to 18.5400
2026-01-24 02:33:48,859 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:48,875 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(14.517, 11.101), path_start=(0.000, 0.000), dist=18.274m
2026-01-24 02:33:48,875 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.274m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:33:48,875 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-24 02:33:48,878 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:33:48,909 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:33:48,909 - INFO - integration_test - Warmstart k=0: x0=14.516614419432054 , y0=11.100637933994252 , psi0=0.5304487947633242 , v0=2.9999998689188105 , spline0=18.539990486950924 , a0=0.0 , w0=0.0
2026-01-24 02:33:48,909 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:33:48,910 - INFO - integration_test - Dyn residual k=0: pred=[14.775388438999531, 11.25241408143521, 0.5304487947633242, 2.9999998689188105, 18.839990473842803], ws=[14.775388438999531, 11.25241408143521, 0.5304487947633243, 2.9999998689188105, 18.500514166508687], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.3394763073341167], res_norm=3.395e-01
2026-01-24 02:33:48,911 - INFO - integration_test - Dyn residual k=1: pred=[15.034162458567009, 11.40419022887617, 0.5304487947633243, 2.9999998689188105, 18.800514153400567], ws=[15.034162458567009, 11.40419022887617, 0.5304487947633243, 2.9999998689188105, 18.396422497947157], res=[0.0, 0.0, 0.0, 0.0, 0.40409165545340997], res_norm=4.041e-01
2026-01-24 02:33:48,912 - INFO - integration_test - Dyn residual k=2: pred=[15.292936478134486, 11.555966376317128, 0.5304487947633243, 2.9999998689188105, 18.696422484839037], ws=[15.292936478134486, 11.555966376317128, 0.5304487947633243, 2.9999998689188105, 18.765868199613767], res=[0.0, 0.0, 0.0, 0.0, -0.06944571477473005], res_norm=6.945e-02
2026-01-24 02:33:48,931 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:48,989 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,015 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,067 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,091 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,142 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,165 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,215 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,239 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,288 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,314 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,367 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,390 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,443 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,467 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,517 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,541 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,590 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,612 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,661 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:33:49,683 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:33:49,733 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:16,763 - INFO - integration_test - Step 65: MPC solve successful
2026-01-24 02:34:16,769 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.540)
2026-01-24 02:34:16,769 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:34:16,769 - INFO - integration_test - === Applying control at step 65 ===
2026-01-24 02:34:16,769 - INFO - integration_test -   Control dict from planner: {'a': -0.12252175472735069, 'w': -0.09322483428333801}
2026-01-24 02:34:16,769 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:34:16,769 - INFO - integration_test -   Planner output success: True
2026-01-24 02:34:16,771 - INFO - integration_test - Step 65 completed in 27.913s
2026-01-24 02:34:16,847 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-24 02:34:16,848 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[14.77556181 11.25089904  0.52112631  2.98774769 18.83876526]
2026-01-24 02:34:16,849 - DEBUG - integration_test - Step 66: Using propagated spline 18.8388 (close to path, dist=0.070m, drift=0.812m)
2026-01-24 02:34:16,849 - DEBUG - integration_test -   Set spline state to 18.8388
2026-01-24 02:34:16,849 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:34:16,865 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(14.776, 11.251), path_start=(0.000, 0.000), dist=18.571m
2026-01-24 02:34:16,865 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.571m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:34:16,865 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-24 02:34:16,868 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:34:16,897 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:34:16,897 - INFO - integration_test - Warmstart k=0: x0=14.775561812056596 , y0=11.250899042990845 , psi0=0.5211263113349904 , v0=2.9877476934460754 , spline0=18.83876525629553 , a0=0.0 , w0=0.0
2026-01-24 02:34:16,897 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:34:16,898 - INFO - integration_test - Dyn residual k=0: pred=[15.03467691604385, 11.399646230132644, 0.5211263113349904, 2.9877476934460754, 19.13754002564014], ws=[15.03467691604385, 11.399646230132644, 0.5211263113349904, 2.9877476934460754, 18.395729445597183], res=[0.0, 0.0, 0.0, 0.0, 0.7418105800429551], res_norm=7.418e-01
2026-01-24 02:34:16,899 - INFO - integration_test - Dyn residual k=1: pred=[15.293792020031105, 11.548393417274443, 0.5211263113349904, 2.9877476934460754, 18.69450421494179], ws=[15.293792020031105, 11.548393417274443, 0.5211263113349904, 2.9877476934460754, 18.765014260111123], res=[0.0, 0.0, 0.0, 0.0, -0.0705100451693319], res_norm=7.051e-02
2026-01-24 02:34:16,900 - INFO - integration_test - Dyn residual k=2: pred=[15.552907124018361, 11.697140604416242, 0.5211263113349904, 2.9877476934460754, 19.06378902945573], ws=[15.552907124018361, 11.697140604416242, 0.5211263113349904, 2.9877476934460754, 19.373813029726698], res=[0.0, 0.0, 0.0, 0.0, -0.31002400027096755], res_norm=3.100e-01
2026-01-24 02:34:16,918 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:16,978 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,001 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,051 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,074 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,124 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,152 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,206 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,230 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,279 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,300 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,356 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,382 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,432 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,456 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,505 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,529 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,579 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,603 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,653 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:17,677 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:17,727 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:18,711 - INFO - integration_test - Step 66: MPC solve successful
2026-01-24 02:34:18,716 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.839)
2026-01-24 02:34:18,716 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:34:18,716 - INFO - integration_test - === Applying control at step 66 ===
2026-01-24 02:34:18,716 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000160168754, 'w': -0.7841278920009882}
2026-01-24 02:34:18,716 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:34:18,716 - INFO - integration_test -   Planner output success: True
2026-01-24 02:34:18,717 - INFO - integration_test - Step 66 completed in 1.870s
2026-01-24 02:34:18,780 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-24 02:34:18,782 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[15.03132097 11.38482223  0.44271352  2.78774769 19.11754003]
2026-01-24 02:34:18,782 - DEBUG - integration_test - Step 67: Using propagated spline 19.1175 (close to path, dist=0.119m, drift=0.681m)
2026-01-24 02:34:18,782 - DEBUG - integration_test -   Set spline state to 19.1175
2026-01-24 02:34:18,783 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:34:18,797 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(15.031, 11.385), path_start=(0.000, 0.000), dist=18.856m
2026-01-24 02:34:18,797 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.856m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-24 02:34:18,797 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-24 02:34:18,800 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:34:18,825 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:34:18,825 - INFO - integration_test - Warmstart k=0: x0=15.031320970242644 , y0=11.38482223191721 , psi0=0.4427135221348916 , v0=2.787747691844388 , spline0=19.11754002547997 , a0=0.0 , w0=0.0
2026-01-24 02:34:18,825 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:34:18,826 - INFO - integration_test - Dyn residual k=0: pred=[15.283219771331867, 11.504247379786701, 0.4427135221348916, 2.787747691844388, 19.396314794664406], ws=[15.283219771331867, 11.504247379786701, 0.4427135221348917, 2.787747691844388, 18.75572133074377], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.6405934639206343], res_norm=6.406e-01
2026-01-24 02:34:18,827 - INFO - integration_test - Dyn residual k=1: pred=[15.535118572421089, 11.623672527656192, 0.4427135221348917, 2.787747691844388, 19.03449609992821], ws=[15.535118572421089, 11.623672527656192, 0.4427135221348917, 2.787747691844388, 19.365934241784814], res=[0.0, 0.0, 0.0, 0.0, -0.33143814185660503], res_norm=3.314e-01
2026-01-24 02:34:18,828 - INFO - integration_test - Dyn residual k=2: pred=[15.787017373510311, 11.743097675525682, 0.4427135221348917, 2.787747691844388, 19.64470901096925], ws=[15.787017373510311, 11.743097675525682, 0.4427135221348917, 2.787747691844388, 19.712913822445252], res=[0.0, 0.0, 0.0, 0.0, -0.06820481147600077], res_norm=6.820e-02
2026-01-24 02:34:18,845 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:18,905 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:18,930 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:18,980 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,004 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,053 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,074 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,122 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,144 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,193 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,215 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,263 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,284 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,331 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,358 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,431 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,456 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,502 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,524 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,569 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:19,591 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:34:19,639 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:34:20,313 - INFO - integration_test - Step 67: MPC solve successful
2026-01-24 02:34:20,318 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.118)
2026-01-24 02:34:20,319 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:34:20,319 - INFO - integration_test - === Applying control at step 67 ===
2026-01-24 02:34:20,319 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000198275423, 'w': -0.6633928713808339}
2026-01-24 02:34:20,319 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:34:20,319 - INFO - integration_test -   Planner output success: True
2026-01-24 02:34:20,320 - INFO - integration_test - Goal reached at step 67!
2026-01-24 02:34:20,320 - INFO - integration_test - Step 67 completed in 1.539s
2026-01-24 02:34:20,381 - INFO - integration_test - Goal reached at step 67, added 3 extra frames for visualization
2026-01-24 02:34:20,382 - INFO - integration_test - Saving test results...
2026-01-24 02:34:20,382 - INFO - integration_test - Saved 72 vehicle states to test_outputs/20260124_023136_contouring_contouring_unicycle/vehicle_states.csv
2026-01-24 02:34:20,382 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_023136_contouring_contouring_unicycle/obstacle_summary.csv
2026-01-24 02:34:20,382 - INFO - integration_test - Saved state history: 72 vehicle states, 0 obstacles
2026-01-24 02:34:20,383 - INFO - integration_test - Creating animation...
2026-01-24 02:34:20,428 - DEBUG - integration_test - Creating animation with 72 frames (range: 0 to 71)
2026-01-24 02:34:20,429 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:34:20,435 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:34:20,519 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 02:34:20,560 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 02:34:27,448 - INFO - integration_test - Saved animation with 72 frames at 10.00 fps to test_outputs/20260124_023136_contouring_contouring_unicycle/animation.gif (duration: 7.20s, size: 388476 bytes)
2026-01-24 02:34:27,482 - INFO - integration_test - Animation created successfully
2026-01-24 02:34:27,483 - INFO - integration_test - Test completed successfully
