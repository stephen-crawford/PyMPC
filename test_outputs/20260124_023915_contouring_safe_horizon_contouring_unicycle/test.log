2026-01-24 02:39:15,190 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 02:39:15,190 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 02:39:15,190 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 02:39:15,190 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 02:39:15,190 - INFO - integration_test - Creating objective module: contouring
2026-01-24 02:39:15,196 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 02:39:15,196 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-24 02:39:15,196 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-24 02:39:15,204 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-24 02:39:15,204 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 02:39:15,210 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 02:39:15,210 - INFO - integration_test - Created 2 constraint module(s)
2026-01-24 02:39:15,229 - INFO - integration_test - Setting solver on all modules...
2026-01-24 02:39:15,229 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-24 02:39:15,229 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 02:39:15,229 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 02:39:15,229 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 02:39:15,229 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 02:39:15,229 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 02:39:15,230 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 02:39:15,230 - INFO - integration_test - Obstacle 0: s=8.03, pos=(6.24, 5.59), lateral_offset=0.00m, vel=(0.47, 0.37)
2026-01-24 02:39:15,230 - INFO - integration_test - Obstacle 1: s=17.06, pos=(13.71, 10.71), lateral_offset=0.00m, vel=(-0.69, -0.41)
2026-01-24 02:39:15,231 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 02:39:15,231 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 02:39:15,231 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 02:39:15,231 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 02:39:15,231 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 02:39:15,231 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 02:39:15,231 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 02:39:15,232 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 02:39:15,232 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 02:39:15,232 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 02:39:15,232 - INFO - integration_test - Auto-calculated timeout: 255s for 150 steps
2026-01-24 02:39:15,232 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 02:39:15,232 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 02:39:15,233 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 02:39:15,233 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 02:39:15,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:16,443 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 02:39:16,443 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 02:39:17,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:17,595 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:17,595 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 02:39:17,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:17,596 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 02:39:17,597 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-24 02:39:17,598 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-24 02:39:17,616 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:18,651 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:18,675 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:18,724 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:18,747 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:18,796 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:18,818 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:18,868 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:18,911 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:18,982 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:19,007 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:19,056 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:19,080 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:19,132 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:19,154 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:19,202 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:19,223 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:19,273 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:19,297 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:19,346 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:19,367 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:19,416 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:20,493 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 02:39:20,698 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:20,699 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 02:39:20,770 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 02:39:20,771 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:20,860 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:20,872 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 02:39:20,873 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:20,873 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 02:39:20,873 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 02:39:20,873 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018919914, 'w': 0.7999999877420929}
2026-01-24 02:39:20,873 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:20,873 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:20,876 - INFO - integration_test - Step 0 completed in 5.644s
2026-01-24 02:39:20,952 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 02:39:20,953 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.08       1.2        0.12      ]
2026-01-24 02:39:20,954 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 02:39:20,954 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 02:39:20,955 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:21,904 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 02:39:21,904 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 02:39:22,866 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:22,893 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:22,893 - INFO - integration_test - Warmstart k=0: x0=0.10987737537939557 , y0=0.004530844988764795 , psi0=0.07999999877420928 , v0=1.2000000018919914 , spline0=0.12000000018919915 , a0=0.0 , w0=0.0
2026-01-24 02:39:22,893 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:22,894 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033605893, 0.014120608133560874, 0.07999999877420928, 1.2000000018919914, 0.2400000003783983], ws=[0.22949358033605896, 0.014120608133560876, 0.07999999877420949, 1.2000000018919914, 0.05292929293311513], res=[-2.7755575615628914e-17, -1.734723475976807e-18, -2.0816681711721685e-16, 0.0, 0.18707070744528317], res_norm=1.871e-01
2026-01-24 02:39:22,895 - INFO - integration_test - Dyn residual k=1: pred=[0.34910978529272235, 0.02371037127835698, 0.07999999877420949, 1.2000000018919914, 0.17292929312231428], ws=[0.34910978529272235, 0.023710371278356984, 0.07999999877420949, 1.2000000018919914, 0.1082828282942949], res=[0.0, -3.469446951953614e-18, 0.0, 0.0, 0.06464646482801938], res_norm=6.465e-02
2026-01-24 02:39:22,896 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259902493857, 0.03330013442315309, 0.07999999877420949, 1.2000000018919914, 0.22828282848349407], ws=[0.46872599024938577, 0.03330013442315309, 0.07999999877420949, 1.2000000018919914, 0.1660606060835393], res=[-5.551115123125783e-17, 0.0, 0.0, 0.0, 0.06222222239995476], res_norm=6.222e-02
2026-01-24 02:39:22,914 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:23,872 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:23,895 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:23,972 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:24,005 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,057 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:24,081 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,131 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:24,153 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,203 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:24,226 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,277 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:24,301 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,351 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:24,374 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,427 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:24,450 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,503 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:24,527 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,577 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:24,600 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:24,652 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:25,344 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 02:39:25,347 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:25,347 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1874 scenarios available
2026-01-24 02:39:25,438 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1874 trajectory groups with 18740 total points
2026-01-24 02:39:25,439 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:25,526 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:25,538 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 02:39:25,538 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:25,538 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 02:39:25,538 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018908071, 'w': 0.8000000026461691}
2026-01-24 02:39:25,538 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:25,538 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:25,540 - INFO - integration_test - Step 1 completed in 4.587s
2026-01-24 02:39:25,599 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 02:39:25,600 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-24 02:39:25,601 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 02:39:25,601 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 02:39:25,602 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:26,650 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 02:39:26,650 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 02:39:27,626 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:27,653 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:27,654 - INFO - integration_test - Warmstart k=0: x0=0.2388921281898979 , y0=0.02022162154873088 , psi0=0.1599999990388262 , v0=1.4000000037827984 , spline0=0.26000000056747896 , a0=0.0 , w0=0.0
2026-01-24 02:39:27,654 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:27,655 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039482573724, 0.042526170402146596, 0.1599999990388262, 1.4000000037827984, 0.4000000009457588], ws=[0.3771039482573724, 0.042526170402146596, 0.15999999903882633, 1.4000000037827984, 0.10909090911001533], res=[0.0, 0.0, -1.3877787807814457e-16, 0.0, 0.2909090918357435], res_norm=2.909e-01
2026-01-24 02:39:27,656 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157683248469, 0.06483071925556234, 0.15999999903882633, 1.4000000037827984, 0.24909090948829515], ws=[0.5153157683248469, 0.06483071925556233, 0.15999999903882633, 1.4000000037827984, 0.16787878791891025], res=[0.0, 1.3877787807814457e-17, 0.0, 0.0, 0.0812121215693849], res_norm=8.121e-02
2026-01-24 02:39:27,657 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275883923215, 0.08713526810897808, 0.15999999903882633, 1.4000000037827984, 0.30787878829719006], ws=[0.6535275883923215, 0.08713526810897806, 0.15999999903882633, 1.4000000037827984, 0.45898989912746013], res=[0.0, 1.3877787807814457e-17, 0.0, 0.0, -0.15111111083027007], res_norm=1.511e-01
2026-01-24 02:39:27,676 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:28,814 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:28,836 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:28,887 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:28,910 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:28,957 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:28,981 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:29,031 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:29,053 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:29,102 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:29,125 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:29,174 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:29,197 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:29,246 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:29,268 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:29,319 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:29,341 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:29,388 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:29,413 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:29,463 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:29,485 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:29,529 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:30,078 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 02:39:30,080 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:30,080 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:39:30,156 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:39:30,156 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:30,240 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:30,250 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 02:39:30,251 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:30,251 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 02:39:30,251 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000194361762, 'w': 0.8000000057857097}
2026-01-24 02:39:30,251 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:30,251 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:30,252 - INFO - integration_test - Step 2 completed in 4.653s
2026-01-24 02:39:30,308 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 02:39:30,310 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-24 02:39:30,310 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 02:39:30,310 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 02:39:30,311 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:31,305 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 02:39:31,305 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 02:39:32,365 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:32,393 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:32,393 - INFO - integration_test - Warmstart k=0: x0=0.38583643573378906 , y0=0.05014471615176274 , psi0=0.23999999961739715 , v0=1.600000005726416 , spline0=0.4200000011401206 , a0=0.0 , w0=0.0
2026-01-24 02:39:32,393 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:32,394 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505122808937, 0.08817713645676083, 0.23999999961739715, 1.600000005726416, 0.5800000017127622], ws=[0.5412505122808937, 0.08817713645676083, 0.23999999961739693, 1.600000005726416, 0.16909090914281097], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.41090909256995123], res_norm=4.109e-01
2026-01-24 02:39:32,395 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645888279983, 0.12620955676175888, 0.23999999961739693, 1.600000005726416, 0.32909090971545263], ws=[0.6966645888279983, 0.12620955676175888, 0.23999999961739693, 1.600000005726416, 0.23191919201153147], res=[0.0, 0.0, 0.0, 0.0, 0.09717171770392116], res_norm=9.717e-02
2026-01-24 02:39:32,396 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786653751029, 0.16424197706675692, 0.23999999961739693, 1.600000005726416, 0.39191919258417307], ws=[0.8520786653751029, 0.16424197706675692, 0.23999999961739693, 1.600000005726416, 0.2979797981241437], res=[0.0, 0.0, 0.0, 0.0, 0.09393939446002936], res_norm=9.394e-02
2026-01-24 02:39:32,414 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:33,581 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:33,604 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:33,654 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:33,678 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:33,732 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:33,755 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:33,805 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:33,828 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:33,878 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:33,903 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:33,955 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:33,979 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:34,035 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:34,058 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:34,113 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:34,146 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:34,227 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:34,250 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:34,302 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:34,326 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:34,374 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:34,980 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 02:39:34,983 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:34,983 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:39:34,995 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:39:34,996 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:35,117 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:35,138 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 02:39:35,139 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:35,139 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 02:39:35,139 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000197613317, 'w': 0.8000000078254154}
2026-01-24 02:39:35,139 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:35,139 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:35,141 - INFO - integration_test - Step 3 completed in 4.832s
2026-01-24 02:39:35,211 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 02:39:35,212 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-24 02:39:35,212 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 02:39:35,212 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 02:39:35,213 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:36,135 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 02:39:36,135 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 02:39:37,228 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:37,256 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:37,256 - INFO - integration_test - Warmstart k=0: x0=0.5491354612573462 , y0=0.09724075670143378 , psi0=0.3200000003999387 , v0=1.8000000077025493 , spline0=0.6000000019103755 , a0=0.0 , w0=0.0
2026-01-24 02:39:37,256 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:37,257 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978372206935, 0.1538627379229659, 0.3200000003999387, 1.8000000077025493, 0.7800000026806304], ws=[0.7199978372206935, 0.1538627379229659, 0.3200000003999386, 1.8000000077025493, 0.23353535364366182], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.5464646490369686], res_norm=5.465e-01
2026-01-24 02:39:37,258 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602131840409, 0.210484719144498, 0.3200000003999386, 1.8000000077025493, 0.41353535441391676], ws=[0.8908602131840409, 0.210484719144498, 0.3200000003999386, 1.8000000077025493, 0.3010101011843881], res=[0.0, 0.0, 0.0, 0.0, 0.11252525322952867], res_norm=1.125e-01
2026-01-24 02:39:37,259 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225891473883, 0.2671067003660301, 0.3200000003999386, 1.8000000077025493, 0.481010101954643], ws=[1.0617225891473883, 0.2671067003660301, 0.3200000003999386, 1.8000000077025493, 0.37212121237703877], res=[0.0, 0.0, 0.0, 0.0, 0.10888888957760423], res_norm=1.089e-01
2026-01-24 02:39:37,277 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,331 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:38,354 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,405 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:38,429 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,481 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:38,515 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,592 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:38,618 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,669 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:38,691 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,741 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:38,763 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,811 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:38,833 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,881 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:38,903 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:38,953 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:38,975 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:39,024 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:39,046 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:39,095 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:39,708 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 02:39:39,712 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:39,712 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:39:39,725 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:39:39,726 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:39,840 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:39,851 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 02:39:39,851 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:39,851 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 02:39:39,852 - INFO - integration_test -   Control dict from planner: {'a': 2.000000010816448, 'w': 0.799999938870092}
2026-01-24 02:39:39,852 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:39,852 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:39,853 - INFO - integration_test - Step 4 completed in 4.642s
2026-01-24 02:39:39,912 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 02:39:39,920 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.39999999 2.00000001 0.8       ]
2026-01-24 02:39:39,921 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 02:39:39,921 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 02:39:39,922 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:41,025 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 02:39:41,025 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 02:39:42,026 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:42,055 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:42,055 - INFO - integration_test - Warmstart k=0: x0=0.726861488892413 , y0=0.16427976762376717 , psi0=0.3999999942869479 , v0=2.0000000087841943 , spline0=0.8000000027887949 , a0=0.0 , w0=0.0
2026-01-24 02:39:42,055 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:42,056 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736889470213, 0.242163435375156, 0.3999999942869479, 2.0000000087841943, 1.0000000036672143], ws=[0.9110736889470213, 0.242163435375156, 0.3999999942869481, 2.0000000087841943, 0.363636363858619], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.6363636398085952], res_norm=6.364e-01
2026-01-24 02:39:42,057 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858890016297, 0.3200471031265449, 0.3999999942869481, 2.0000000087841943, 0.5636363647370385], ws=[1.0952858890016297, 0.3200471031265449, 0.3999999942869481, 2.0000000087841943, 0.8767676774104937], res=[0.0, 0.0, 0.0, 0.0, -0.3131313126734552], res_norm=3.131e-01
2026-01-24 02:39:42,058 - INFO - integration_test - Dyn residual k=2: pred=[1.279498089056238, 0.39793077087793377, 0.3999999942869481, 2.0000000087841943, 1.076767678288913], ws=[1.279498089056238, 0.39793077087793377, 0.3999999942869481, 2.0000000087841943, 0.9696969705187961], res=[0.0, 0.0, 0.0, 0.0, 0.10707070777011696], res_norm=1.071e-01
2026-01-24 02:39:42,075 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,085 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:43,106 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,153 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:43,175 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,223 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:43,246 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,291 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:43,314 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,361 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:43,385 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,431 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:43,453 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,502 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:43,523 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,570 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:43,591 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,636 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:43,658 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,703 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:43,724 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:43,770 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:44,339 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 02:39:44,343 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:44,343 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:39:44,354 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:39:44,355 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:44,561 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:44,572 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 02:39:44,572 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:44,572 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 02:39:44,573 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000170844534, 'w': 0.7999999975901211}
2026-01-24 02:39:44,573 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:44,573 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:44,574 - INFO - integration_test - Step 5 completed in 4.654s
2026-01-24 02:39:44,626 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 02:39:44,626 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.25382381 0.47999999 2.20000001 1.02      ]
2026-01-24 02:39:44,627 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 02:39:44,627 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 02:39:44,628 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:45,619 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 02:39:45,619 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 02:39:46,640 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:46,666 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:46,666 - INFO - integration_test - Warmstart k=0: x0=0.9167519034393663 , y0=0.2538238065499882 , psi0=0.47999999404596 , v0=2.20000001049264 , spline0=1.0200000038380588 , a0=0.0 , w0=0.0
2026-01-24 02:39:46,666 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:46,667 - INFO - integration_test - Dyn residual k=0: pred=[1.11189078798638, 0.355415224491778, 0.47999999404596, 2.20000001049264, 1.2400000048873228], ws=[1.11189078798638, 0.355415224491778, 0.47999999404596005, 2.20000001049264, 0.6933333338763693], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.5466666710109535], res_norm=5.467e-01
2026-01-24 02:39:46,668 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296725333936, 0.45700664243356776, 0.47999999404596005, 2.20000001049264, 0.9133333349256333], ws=[1.3070296725333936, 0.45700664243356776, 0.47999999404596005, 2.20000001049264, 1.2397979809373247], res=[0.0, 0.0, 0.0, 0.0, -0.32646464601169145], res_norm=3.265e-01
2026-01-24 02:39:46,669 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685570804073, 0.5585980603753575, 0.47999999404596005, 2.20000001049264, 1.4597979819865887], ws=[1.5021685570804073, 0.5585980603753575, 0.47999999404596005, 2.20000001049264, 1.0795959607249859], res=[0.0, 0.0, 0.0, 0.0, 0.38020202126160285], res_norm=3.802e-01
2026-01-24 02:39:46,687 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:47,743 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:47,766 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:47,816 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:47,840 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:47,889 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:47,914 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:47,971 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:47,997 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:48,048 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:48,070 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:48,120 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:48,144 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:48,193 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:48,215 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:48,264 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:48,285 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:48,335 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:48,356 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:48,405 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:48,428 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:48,476 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:49,257 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 02:39:49,262 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:49,262 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:39:49,386 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:39:49,387 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:49,527 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:49,541 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 02:39:49,542 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:49,542 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 02:39:49,542 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000069313235, 'w': 0.7999998547234315}
2026-01-24 02:39:49,542 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:49,542 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:49,543 - INFO - integration_test - Step 6 completed in 4.917s
2026-01-24 02:39:49,605 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 02:39:49,606 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819144 0.55999998 2.40000001 1.26      ]
2026-01-24 02:39:49,607 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 02:39:49,607 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 02:39:49,607 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:50,594 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 02:39:50,594 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 02:39:51,512 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:51,540 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:51,540 - INFO - integration_test - Warmstart k=0: x0=1.11623086508226 , y0=0.3681914432649367 , psi0=0.5599999795183032 , v0=2.400000011185772 , spline0=1.260000004956636 , a0=0.0 , w0=0.0
2026-01-24 02:39:51,540 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:51,541 - INFO - integration_test - Dyn residual k=0: pred=[1.3195720952843029, 0.4956761271953481, 0.5599999795183032, 2.400000011185772, 1.5000000060752132], ws=[1.319572095284303, 0.4956761271953481, 0.5599999795183033, 2.400000011185772, 1.2474747486406976], res=[-2.220446049250313e-16, 0.0, -1.1102230246251565e-16, 0.0, 0.2525252574345156], res_norm=2.525e-01
2026-01-24 02:39:51,542 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133254863458, 0.6231608111257595, 0.5599999795183033, 2.400000011185772, 1.4874747497592749], ws=[1.5229133254863458, 0.6231608111257595, 0.5599999795183033, 2.400000011185772, 1.3616161630694525], res=[0.0, 0.0, 0.0, 0.0, 0.1258585866898223], res_norm=1.259e-01
2026-01-24 02:39:51,543 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545556883886, 0.750645495056171, 0.5599999795183033, 2.400000011185772, 1.6016161641880298], ws=[1.7262545556883886, 0.750645495056171, 0.5599999795183033, 2.400000011185772, 1.198585860013235], res=[0.0, 0.0, 0.0, 0.0, 0.4030303041747947], res_norm=4.030e-01
2026-01-24 02:39:51,558 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:52,559 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:52,579 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:52,626 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:52,649 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:52,696 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:52,720 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:52,768 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:52,791 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:52,840 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:52,863 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:52,912 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:52,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:52,993 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:53,017 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:53,065 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:53,087 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:53,138 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:53,162 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:53,213 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:53,237 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:53,287 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:54,039 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 02:39:54,044 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:54,045 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:39:54,171 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:39:54,172 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:54,326 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:54,340 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 02:39:54,341 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:54,341 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 02:39:54,341 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000193589447, 'w': 0.7999999983478842}
2026-01-24 02:39:54,341 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:54,341 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:54,342 - INFO - integration_test - Step 7 completed in 4.737s
2026-01-24 02:39:54,405 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 02:39:54,409 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243449 0.50942444 0.63999998 2.60000001 1.52000001]
2026-01-24 02:39:54,409 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 02:39:54,409 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 02:39:54,410 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:55,440 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 02:39:55,440 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 02:39:56,420 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:39:56,448 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:39:56,448 - INFO - integration_test - Warmstart k=0: x0=1.3224344920895634 , y0=0.5094244356532753 , psi0=0.6399999793530916 , v0=2.6000000131216665 , spline0=1.5200000062688026 , a0=0.0 , w0=0.0
2026-01-24 02:39:56,448 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:39:56,449 - INFO - integration_test - Dyn residual k=0: pred=[1.530979393397825, 0.6646952468853098, 0.6399999793530916, 2.6000000131216665, 1.7800000075809692], ws=[1.530979393397825, 0.6646952468853098, 0.6399999793530915, 2.6000000131216665, 1.3696969712284788], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.41030303635249044], res_norm=4.103e-01
2026-01-24 02:39:56,450 - INFO - integration_test - Dyn residual k=1: pred=[1.7395242947060867, 0.8199660581173442, 0.6399999793530915, 2.6000000131216665, 1.6296969725406454], ws=[1.7395242947060867, 0.8199660581173442, 0.6399999793530915, 2.6000000131216665, 1.7066666688225784], res=[0.0, 0.0, 0.0, 0.0, -0.07696969628193306], res_norm=7.697e-02
2026-01-24 02:39:56,451 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691960143484, 0.9752368693493787, 0.6399999793530915, 2.6000000131216665, 1.966666670134745], ws=[1.9480691960143484, 0.9752368693493787, 0.6399999793530915, 2.6000000131216665, 2.0646464675328127], res=[0.0, 0.0, 0.0, 0.0, -0.09797979739806761], res_norm=9.798e-02
2026-01-24 02:39:56,469 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:57,601 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:57,626 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:57,673 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:57,695 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:57,745 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:57,770 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:57,817 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:57,839 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:57,888 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:57,910 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:57,965 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:39:57,988 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:58,039 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:58,061 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:58,108 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:58,136 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:58,192 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:58,216 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:58,266 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:58,291 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:39:58,356 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:39:59,003 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 02:39:59,009 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:39:59,009 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:39:59,129 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:39:59,130 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:39:59,269 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:39:59,281 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 02:39:59,281 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:39:59,281 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 02:39:59,281 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199721213, 'w': 0.8000000050886554}
2026-01-24 02:39:59,281 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:39:59,281 - INFO - integration_test -   Planner output success: True
2026-01-24 02:39:59,283 - INFO - integration_test - Step 8 completed in 4.874s
2026-01-24 02:39:59,338 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 02:39:59,344 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223934 0.67925693 0.71999998 2.80000002 1.80000001]
2026-01-24 02:39:59,345 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 02:39:59,345 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 02:39:59,345 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:00,367 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 02:40:00,367 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 02:40:01,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:01,514 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:01,514 - INFO - integration_test - Warmstart k=0: x0=1.5322393362251758 , y0=0.6792569304046197 , psi0=0.7199999798619572 , v0=2.8000000151188784 , spline0=1.8000000077806906 , a0=0.0 , w0=0.0
2026-01-24 02:40:01,514 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:01,516 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449452393131, 0.8638846353143769, 0.7199999798619572, 2.8000000151188784, 2.0800000092925783], ws=[1.7427449452393131, 0.8638846353143769, 0.7199999798619574, 2.8000000151188784, 1.7163636386163827], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.3636363706761956], res_norm=3.636e-01
2026-01-24 02:40:01,517 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505542534504, 1.048512340224134, 0.7199999798619574, 2.8000000151188784, 1.9963636401282705], ws=[1.9532505542534504, 1.048512340224134, 0.7199999798619574, 2.8000000151188784, 2.08161616467197], res=[0.0, 0.0, 0.0, 0.0, -0.08525252454369969], res_norm=8.525e-02
2026-01-24 02:40:01,518 - INFO - integration_test - Dyn residual k=2: pred=[2.1637561632675877, 1.2331400451338914, 0.7199999798619574, 2.8000000151188784, 2.361616166183858], ws=[2.1637561632675877, 1.2331400451338914, 0.7199999798619574, 2.8000000151188784, 1.9292929324031198], res=[0.0, 0.0, 0.0, 0.0, 0.4323232337807381], res_norm=4.323e-01
2026-01-24 02:40:01,537 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:02,804 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:02,829 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:02,880 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:02,902 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:02,960 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:02,985 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:03,036 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:03,059 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:03,107 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:03,131 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:03,182 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:03,204 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:03,252 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:03,275 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:03,323 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:03,346 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:03,395 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:03,417 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:03,465 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:03,489 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:03,542 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:04,165 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 02:40:04,170 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:04,170 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:40:04,183 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:40:04,184 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:04,334 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:04,347 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 02:40:04,347 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:04,347 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 02:40:04,347 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199936268, 'w': 0.8000000098302921}
2026-01-24 02:40:04,347 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:04,347 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:04,349 - INFO - integration_test - Step 9 completed in 5.005s
2026-01-24 02:40:04,405 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 02:40:04,406 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229391 0.8790875  0.79999998 3.00000002 2.10000001]
2026-01-24 02:40:04,406 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 02:40:04,406 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 02:40:04,407 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:05,468 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 02:40:05,468 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 02:40:06,592 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:06,620 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:06,620 - INFO - integration_test - Warmstart k=0: x0=1.742293906219591 , y0=0.8790874960137844 , psi0=0.7999999808449864 , v0=3.000000017118241 , spline0=2.100000009492515 , a0=0.0 , w0=0.0
2026-01-24 02:40:06,620 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:06,621 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059243386697, 1.0942943205080007, 0.7999999808449864, 3.000000017118241, 2.400000011204339], ws=[1.9513059231460304, 1.0942943192800132, 0.7999999808449862, 3.0, 2.0929292956140446], res=[1.1926393206351804e-09, 1.2279874894716158e-09, 1.1102230246251565e-16, 1.7118241046887306e-08, 0.30707071559029453], res_norm=3.071e-01
2026-01-24 02:40:06,622 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179400724697, 1.309501142546242, 0.7999999808449862, 3.0, 2.392929295614045], ws=[2.1603179400724697, 1.309501142546242, 0.7999999808449862, 3.0, 2.4888888919571763], res=[0.0, 0.0, 0.0, 0.0, -0.09595959634313145], res_norm=9.596e-02
2026-01-24 02:40:06,623 - INFO - integration_test - Dyn residual k=2: pred=[2.369329956998909, 1.5247079658124707, 0.7999999808449862, 3.0, 2.7888888919571766], ws=[2.369329956998909, 1.5247079658124707, 0.7999999808449862, 3.0, 2.3434343462149787], res=[0.0, 0.0, 0.0, 0.0, 0.4454545457421979], res_norm=4.455e-01
2026-01-24 02:40:06,641 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:07,705 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:07,728 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:07,780 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:07,803 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:07,852 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:07,875 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:07,925 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:07,951 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:08,006 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:08,029 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:08,078 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:08,100 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:08,152 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:08,174 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:08,223 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:08,244 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:08,293 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:08,317 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:08,388 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:08,423 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:08,478 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:09,177 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 02:40:09,185 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:09,185 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:40:09,198 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:40:09,199 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:09,393 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:09,410 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 02:40:09,410 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:09,410 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 02:40:09,410 - INFO - integration_test -   Control dict from planner: {'a': 1.2881642893796288e-07, 'w': 0.8000000099223424}
2026-01-24 02:40:09,410 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:09,410 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:09,412 - INFO - integration_test - Step 10 completed in 5.006s
2026-01-24 02:40:09,477 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 02:40:09,478 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247937 1.10242087 0.87999998 3.00000003 2.40000001]
2026-01-24 02:40:09,479 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 02:40:09,479 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 02:40:09,480 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:10,642 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 02:40:10,643 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 02:40:11,602 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:11,630 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:11,630 - INFO - integration_test - Warmstart k=0: x0=1.9424793697966374 , y0=1.1024208665207358 , psi0=0.8799999818372206 , v0=3.000000029999884 , spline0=2.4000000124925034 , a0=0.0 , w0=0.0
2026-01-24 02:40:11,630 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:11,631 - INFO - integration_test - Dyn residual k=0: pred=[2.1336247191672855, 1.3336425290309035, 0.8799999818372206, 3.000000029999884, 2.700000015492492], ws=[2.1336247172558394, 1.333642526718696, 0.8799999818372211, 3.0, 2.4888888929268695], res=[1.9114461125013804e-09, 2.3122075365478167e-09, -4.440892098500626e-16, 2.99998839103921e-08, 0.21111112256562237], res_norm=2.111e-01
2026-01-24 02:40:11,632 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700647150413, 1.5648641869166562, 0.8799999818372211, 3.0, 2.7888888929268694], ws=[2.3247700647150413, 1.5648641869166562, 0.8799999818372211, 3.0, 2.3434343470937637], res=[0.0, 0.0, 0.0, 0.0, 0.4454545458331056], res_norm=4.455e-01
2026-01-24 02:40:11,633 - INFO - integration_test - Dyn residual k=2: pred=[2.5159154121742433, 1.7960858471146164, 0.8799999818372211, 3.0, 2.6434343470937636], ws=[2.5159154121742433, 1.7960858471146164, 0.8799999818372211, 3.0, 2.934343438759976], res=[0.0, 0.0, 0.0, 0.0, -0.2909090916662125], res_norm=2.909e-01
2026-01-24 02:40:11,650 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:12,656 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:12,677 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:12,725 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:12,747 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:12,791 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:12,812 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:12,858 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:12,880 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:12,927 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:12,950 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:13,001 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:13,024 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:13,069 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:13,090 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:13,137 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:13,157 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:13,204 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:13,225 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:13,269 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:13,292 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:13,339 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:13,994 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 02:40:14,004 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:14,004 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:40:14,018 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:40:14,019 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:14,361 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:14,379 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 02:40:14,379 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:14,379 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 02:40:14,380 - INFO - integration_test -   Control dict from planner: {'a': 3.62872487663967e-14, 'w': 0.06104523954035395}
2026-01-24 02:40:14,380 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:14,380 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:14,381 - INFO - integration_test - Step 11 completed in 4.903s
2026-01-24 02:40:14,444 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 02:40:14,446 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13291779 1.33422452 0.88610451 3.00000003 2.70000002]
2026-01-24 02:40:14,447 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-24 02:40:14,447 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 02:40:14,448 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:15,556 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 02:40:15,556 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 02:40:16,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:16,592 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:16,592 - INFO - integration_test - Warmstart k=0: x0=2.132917785093818 , y0=1.334224516816465 , psi0=0.886104505791256 , v0=3.0000000299998875 , spline0=2.700000015492492 , a0=0.0 , w0=0.0
2026-01-24 02:40:16,592 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:16,593 - INFO - integration_test - Dyn residual k=0: pred=[2.3226480835286036, 1.5666087151945827, 0.886104505791256, 3.0000000299998875, 3.0000000184924804], ws=[2.322648081631308, 1.5666087128707493, 0.8861045057912555, 3.0, 2.3434343479725483], res=[1.897295653918718e-09, 2.3238333479724815e-09, 4.440892098500626e-16, 2.999988746310578e-08, 0.6565656705199321], res_norm=6.566e-01
2026-01-24 02:40:16,594 - INFO - integration_test - Dyn residual k=1: pred=[2.512378378168798, 1.7989929089250336, 0.8861045057912555, 3.0, 2.6434343479725486], ws=[2.512378378168798, 1.7989929089250336, 0.8861045057912555, 3.0, 2.934343439820578], res=[0.0, 0.0, 0.0, 0.0, -0.29090909184802927], res_norm=2.909e-01
2026-01-24 02:40:16,595 - INFO - integration_test - Dyn residual k=2: pred=[2.702108674706288, 2.0313771049793177, 0.8861045057912555, 3.0, 3.234343439820578], ws=[2.702108674706288, 2.0313771049793177, 0.8861045057912555, 3.0, 3.3010101069567135], res=[0.0, 0.0, 0.0, 0.0, -0.06666666713613534], res_norm=6.667e-02
2026-01-24 02:40:16,612 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:17,659 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:17,681 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:17,731 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:17,758 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:17,809 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:17,834 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:17,883 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:17,906 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:17,963 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:17,991 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:18,048 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:18,072 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:18,122 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:18,147 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:18,200 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:18,224 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:18,276 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:18,313 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:18,391 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:18,418 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:18,472 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:19,144 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 02:40:19,150 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:19,151 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:40:19,165 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:40:19,166 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:19,361 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:19,533 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 02:40:19,533 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:19,533 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 02:40:19,533 - INFO - integration_test -   Control dict from planner: {'a': -3.3997443893562053e-12, 'w': -0.2330728386956359}
2026-01-24 02:40:19,533 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:19,533 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:19,535 - INFO - integration_test - Step 12 completed in 5.089s
2026-01-24 02:40:19,598 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 02:40:19,600 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32533891 1.56437673 0.86279722 3.00000003 3.00000002]
2026-01-24 02:40:19,600 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-24 02:40:19,601 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 02:40:19,601 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:20,523 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-24 02:40:20,523 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 02:40:21,466 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:21,508 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:21,508 - INFO - integration_test - Warmstart k=0: x0=2.3253389058133758 , y0=1.5643767272599833 , psi0=0.8627972219216924 , v0=3.0000000299995473 , spline0=3.0000000184924467 , a0=0.0 , w0=0.0
2026-01-24 02:40:21,508 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:21,510 - INFO - integration_test - Dyn residual k=0: pred=[2.5204334271496047, 1.792276111955424, 0.8627972219216924, 3.0000000299995473, 3.3000000214924015], ws=[2.5204334251986893, 1.7922761096764646, 0.8627972219216922, 3.0, 2.934343440881168], res=[1.9509154292052244e-09, 2.2789594655847623e-09, 2.220446049250313e-16, 2.9999547290771034e-08, 0.3656565806112333], res_norm=3.657e-01
2026-01-24 02:40:21,511 - INFO - integration_test - Dyn residual k=1: pred=[2.715527944584003, 2.020175492092946, 0.8627972219216922, 3.0, 3.234343440881168], ws=[2.715527944584003, 2.020175492092946, 0.8627972219216922, 3.0, 3.301010108108212], res=[0.0, 0.0, 0.0, 0.0, -0.06666666722704395], res_norm=6.667e-02
2026-01-24 02:40:21,512 - INFO - integration_test - Dyn residual k=2: pred=[2.9106224639693163, 2.2480748745094274, 0.8627972219216922, 3.0, 3.6010101081082118], ws=[2.9106224639693163, 2.2480748745094274, 0.8627972219216922, 3.0, 3.6858585935170733], res=[0.0, 0.0, 0.0, 0.0, -0.08484848540886158], res_norm=8.485e-02
2026-01-24 02:40:21,538 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:22,737 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:22,768 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:22,839 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:22,892 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,011 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:23,051 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,126 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:23,166 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,228 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:23,275 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,369 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:23,398 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,456 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:23,489 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,589 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:23,622 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,678 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:23,702 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,759 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:23,786 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:23,838 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:24,662 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 02:40:24,669 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:24,669 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:40:24,685 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:40:24,686 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:24,951 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:24,974 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 02:40:24,974 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:24,974 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 02:40:24,974 - INFO - integration_test -   Control dict from planner: {'a': 1.1816692287924655e-12, 'w': -0.13550243336186196}
2026-01-24 02:40:24,974 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:24,974 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:24,976 - INFO - integration_test - Step 13 completed in 5.376s
2026-01-24 02:40:25,053 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 02:40:25,058 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52197148 1.79094737 0.84924698 3.00000003 3.30000002]
2026-01-24 02:40:25,059 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-24 02:40:25,059 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 02:40:25,060 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:26,323 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 02:40:26,323 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 02:40:27,524 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:27,553 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:27,553 - INFO - integration_test - Warmstart k=0: x0=2.521971479453118 , y0=1.7909473690609166 , psi0=0.8492469785855062 , v0=3.0000000299996654 , spline0=3.300000021492413 , a0=0.0 , w0=0.0
2026-01-24 02:40:27,553 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:27,554 - INFO - integration_test - Dyn residual k=0: pred=[2.720136088118557, 2.0161823345357583, 0.8492469785855062, 3.0000000299996654, 3.6000000244923793], ws=[2.7201360861369333, 2.016182332283434, 0.8492469785855064, 3.0, 3.301010109259714], res=[1.9816237539771464e-09, 2.25232454909019e-09, -1.1102230246251565e-16, 2.9999665418500854e-08, 0.2989899152326654], res_norm=2.990e-01
2026-01-24 02:40:27,555 - INFO - integration_test - Dyn residual k=1: pred=[2.9183006928207487, 2.241417295505951, 0.8492469785855064, 3.0, 3.6010101092597138], ws=[2.9183006928207487, 2.241417295505951, 0.8492469785855064, 3.0, 3.6858585947594844], res=[0.0, 0.0, 0.0, 0.0, -0.08484848549977064], res_norm=8.485e-02
2026-01-24 02:40:27,556 - INFO - integration_test - Dyn residual k=2: pred=[3.116465299504564, 2.4666522587284683, 0.8492469785855064, 3.0, 3.9858585947594847], ws=[3.116465299504564, 2.4666522587284683, 0.8492469785855064, 3.0, 3.8101010190019085], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757622], res_norm=1.758e-01
2026-01-24 02:40:27,577 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:28,810 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:28,838 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:28,895 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:28,921 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:28,978 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:29,003 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:29,084 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:29,120 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:29,194 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:29,223 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:29,283 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:29,311 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:29,372 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:29,400 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:29,459 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:29,484 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:29,549 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:29,577 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:29,640 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:29,674 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:29,744 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:30,852 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 02:40:30,865 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:30,865 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:40:30,882 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:40:30,883 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:31,209 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:31,232 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 02:40:31,232 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:31,232 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 02:40:31,233 - INFO - integration_test -   Control dict from planner: {'a': -9.722785421961447e-07, 'w': -0.14660586850915827}
2026-01-24 02:40:31,233 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:31,233 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:31,234 - INFO - integration_test - Step 14 completed in 6.176s
2026-01-24 02:40:31,314 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 02:40:31,317 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72178    2.01472168 0.83458639 2.99999993 3.60000001]
2026-01-24 02:40:31,318 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-24 02:40:31,318 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 02:40:31,319 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:32,527 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 02:40:32,528 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 02:40:33,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:33,625 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:33,625 - INFO - integration_test - Warmstart k=0: x0=2.72177999508706 , y0=2.0147216839000195 , psi0=0.8345863917345904 , v0=2.999999932771811 , spline0=3.600000014769594 , a0=0.0 , w0=0.0
2026-01-24 02:40:33,625 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:33,626 - INFO - integration_test - Dyn residual k=0: pred=[2.9232252600544983, 2.237027332025539, 0.8345863917345904, 2.999999932771811, 3.900000008046775], ws=[2.9232252600544983, 2.237027332025539, 0.8345863917345904, 2.999999932771811, 3.6858585891910884], res=[0.0, 0.0, 0.0, 0.0, 0.21414141885568672], res_norm=2.141e-01
2026-01-24 02:40:33,627 - INFO - integration_test - Dyn residual k=1: pred=[3.1246705250219367, 2.459332980151058, 0.8345863917345904, 2.999999932771811, 3.9858585824682695], ws=[3.124670525021937, 2.4593329801510584, 0.8345863917345904, 2.999999932771811, 3.8101010106493156], res=[-4.440892098500626e-16, -4.440892098500626e-16, 0.0, 0.0, 0.1757575718189539], res_norm=1.758e-01
2026-01-24 02:40:33,628 - INFO - integration_test - Dyn residual k=2: pred=[3.3261157899893754, 2.681638628276578, 0.8345863917345904, 2.999999932771811, 4.110101003926497], ws=[3.326115789989376, 2.681638628276578, 0.8345863917345904, 2.999999932771811, 3.934343432107541], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, 0.17575757181895568], res_norm=1.758e-01
2026-01-24 02:40:33,648 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:34,812 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:34,841 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:34,902 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:34,925 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:34,977 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:35,000 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:35,056 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:35,081 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:35,149 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:35,191 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:35,253 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:35,277 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:35,330 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:35,355 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:35,408 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:35,433 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:35,486 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:35,510 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:35,561 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:35,586 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:35,637 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:36,311 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 02:40:36,322 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:36,322 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1842 scenarios available
2026-01-24 02:40:36,338 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1842 trajectory groups with 18420 total points
2026-01-24 02:40:36,339 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:36,584 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:36,600 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 02:40:36,601 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:36,601 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 02:40:36,601 - INFO - integration_test -   Control dict from planner: {'a': 9.721883851257544e-07, 'w': -0.1319974639853053}
2026-01-24 02:40:36,601 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:36,601 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:36,603 - INFO - integration_test - Step 15 completed in 5.285s
2026-01-24 02:40:36,669 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 02:40:36,675 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92468658 2.23569139 0.82138665 3.00000003 3.90000002]
2026-01-24 02:40:36,676 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.417m, drift=0.213m)
2026-01-24 02:40:36,676 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 02:40:36,677 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:37,675 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.925, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 02:40:37,675 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 02:40:38,716 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:38,743 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:38,743 - INFO - integration_test - Warmstart k=0: x0=2.9246865814439493 , y0=2.2356913862476113 , psi0=0.8213866453360599 , v0=3.0000000299906495 , spline0=3.900000017768659 , a0=0.0 , w0=0.0
2026-01-24 02:40:38,743 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:38,744 - INFO - integration_test - Dyn residual k=0: pred=[3.1290485970195516, 2.455318726051462, 0.8213866453360599, 3.0000000299906495, 4.200000020767724], ws=[3.1290485949765685, 2.4553187238558736, 0.8213866453360597, 3.0, 3.810101017459748], res=[2.0429831160129197e-09, 2.1955885998181657e-09, 2.220446049250313e-16, 2.999064951936248e-08, 0.3898990033079759], res_norm=3.899e-01
2026-01-24 02:40:38,745 - INFO - integration_test - Dyn residual k=1: pred=[3.3334106085091877, 2.674946061464136, 0.8213866453360597, 3.0, 4.110101017459748], ws=[3.3334106085091877, 2.674946061464136, 0.8213866453360597, 3.0, 3.9343434417021723], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757534], res_norm=1.758e-01
2026-01-24 02:40:38,746 - INFO - integration_test - Dyn residual k=2: pred=[3.537772622041807, 2.894573399072398, 0.8213866453360597, 3.0, 4.234343441702173], ws=[3.537772622041807, 2.894573399072398, 0.8213866453360597, 3.0, 4.058585865944596], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-24 02:40:38,763 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:39,970 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:39,992 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,040 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:40,064 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,113 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:40,136 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,184 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:40,205 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,254 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:40,276 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,324 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:40,346 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,392 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:40,413 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,460 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:40,482 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,528 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:40,550 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,594 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:40,615 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:40,663 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:41,341 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 02:40:41,350 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:41,350 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:40:41,362 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:40:41,363 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:41,572 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:41,586 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 02:40:41,586 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:41,586 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 02:40:41,586 - INFO - integration_test -   Control dict from planner: {'a': -3.6493928363282083e-07, 'w': -0.1293033521494465}
2026-01-24 02:40:41,586 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:41,586 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:41,588 - INFO - integration_test - Step 16 completed in 4.913s
2026-01-24 02:40:41,644 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 02:40:41,650 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.13046281 2.45399139 0.80845631 2.99999999 4.20000002]
2026-01-24 02:40:41,651 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.415m, drift=0.103m)
2026-01-24 02:40:41,651 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 02:40:41,652 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:42,624 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.130, 2.454), path_start=(0.000, 0.000), dist=3.978m
2026-01-24 02:40:42,624 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 02:40:43,623 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:43,652 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:43,652 - INFO - integration_test - Warmstart k=0: x0=3.1304628089251407 , y0=2.4539913884583076 , psi0=0.8084563101211152 , v0=2.999999993496721 , spline0=4.200000017118331 , a0=0.0 , w0=0.0
2026-01-24 02:40:43,652 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:43,653 - INFO - integration_test - Dyn residual k=0: pred=[3.337647514203529, 2.6709579700060444, 0.8084563101211152, 2.999999993496721, 4.500000016468003], ws=[3.337647514203529, 2.6709579700060444, 0.8084563101211151, 2.999999993496721, 3.934343441163517], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.565656575304486], res_norm=5.657e-01
2026-01-24 02:40:43,654 - INFO - integration_test - Dyn residual k=1: pred=[3.5448322194819175, 2.8879245515537812, 0.8084563101211151, 2.999999993496721, 4.2343434405131894], ws=[3.5448322194819175, 2.8879245515537812, 0.8084563101211151, 2.999999993496721, 4.058585865136613], res=[0.0, 0.0, 0.0, 0.0, 0.17575757537657655], res_norm=1.758e-01
2026-01-24 02:40:43,655 - INFO - integration_test - Dyn residual k=2: pred=[3.752016924760306, 3.104891133101518, 0.8084563101211151, 2.999999993496721, 4.358585864486285], ws=[3.752016924760306, 3.104891133101518, 0.8084563101211151, 2.999999993496721, 4.645454560621892], res=[0.0, 0.0, 0.0, 0.0, -0.28686869613560706], res_norm=2.869e-01
2026-01-24 02:40:43,675 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:44,769 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:44,790 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:44,840 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:44,863 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:44,934 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:44,971 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:45,028 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:45,054 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:45,104 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:45,129 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:45,181 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:45,204 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:45,254 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:45,276 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:45,325 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:45,348 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:45,397 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:45,420 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:45,470 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:45,492 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:45,541 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:46,213 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 02:40:46,222 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:46,223 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1842 scenarios available
2026-01-24 02:40:46,441 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1842 trajectory groups with 18420 total points
2026-01-24 02:40:46,443 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:46,738 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:46,762 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 02:40:46,762 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:46,762 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 02:40:46,762 - INFO - integration_test -   Control dict from planner: {'a': 3.650306932787658e-07, 'w': -0.11530156934839035}
2026-01-24 02:40:46,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:46,762 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:46,764 - INFO - integration_test - Step 17 completed in 5.114s
2026-01-24 02:40:46,831 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 02:40:46,841 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.33889374 2.66975874 0.79692615 3.00000003 4.50000002]
2026-01-24 02:40:46,842 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.408m, drift=0.403m)
2026-01-24 02:40:46,842 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 02:40:46,843 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:47,831 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.339, 2.670), path_start=(0.000, 0.000), dist=4.275m
2026-01-24 02:40:47,831 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 02:40:48,817 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:48,843 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:48,843 - INFO - integration_test - Warmstart k=0: x0=3.3388937403373276 , y0=2.6697587410795207 , psi0=0.7969261531862761 , v0=3.0000000299997907 , spline0=4.50000002011831 , a0=0.0 , w0=0.0
2026-01-24 02:40:48,843 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:48,844 - INFO - integration_test - Dyn residual k=0: pred=[3.5485662795889605, 2.884322083903405, 0.7969261531862761, 3.0000000299997907, 4.800000023118288], ws=[3.5485662774922497, 2.884322081757787, 0.7969261531862761, 3.0, 4.058585866917684], res=[2.0967108049774197e-09, 2.145618349658207e-09, 0.0, 2.999979065165803e-08, 0.7414141562006042], res_norm=7.414e-01
2026-01-24 02:40:48,845 - INFO - integration_test - Dyn residual k=1: pred=[3.7582388146471724, 3.098885422436053, 0.7969261531862761, 3.0, 4.358585866917684], ws=[3.7582388146471724, 3.098885422436053, 0.7969261531862761, 3.0, 4.645454565572854], res=[0.0, 0.0, 0.0, 0.0, -0.2868686986551703], res_norm=2.869e-01
2026-01-24 02:40:48,846 - INFO - integration_test - Dyn residual k=2: pred=[3.967911351802095, 3.313448763114319, 0.7969261531862761, 3.0, 4.945454565572854], ws=[3.967911351802095, 3.313448763114319, 0.7969261531862761, 3.0, 5.046464666582955], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:40:48,862 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:49,837 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:49,860 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:49,907 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:49,929 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:49,976 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:49,996 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:50,045 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:50,069 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:50,118 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:50,143 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:50,195 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:50,221 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:50,273 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:50,297 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:50,351 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:50,373 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:50,425 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:50,451 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:50,505 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:50,529 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:50,582 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:51,369 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 02:40:51,382 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:51,382 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:40:51,608 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:40:51,609 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:51,938 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:51,957 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 02:40:51,957 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:51,957 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 02:40:51,957 - INFO - integration_test -   Control dict from planner: {'a': -8.935923880491294e-13, 'w': -0.10456247644812537}
2026-01-24 02:40:51,957 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:51,957 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:51,959 - INFO - integration_test - Step 18 completed in 5.118s
2026-01-24 02:40:52,025 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 02:40:52,034 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54968421 2.88322199 0.78646991 3.00000003 4.80000002]
2026-01-24 02:40:52,035 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.357m, drift=0.293m)
2026-01-24 02:40:52,035 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-24 02:40:52,036 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:53,044 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.550, 2.883), path_start=(0.000, 0.000), dist=4.573m
2026-01-24 02:40:53,044 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 02:40:54,089 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:54,119 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:54,120 - INFO - integration_test - Warmstart k=0: x0=3.5496842124223273 , y0=2.8832219901026854 , psi0=0.7864699055414636 , v0=3.0000000299997014 , spline0=4.80000002311828 , a0=0.0 , w0=0.0
2026-01-24 02:40:54,120 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:54,121 - INFO - integration_test - Dyn residual k=0: pred=[3.7615887762687974, 3.095581255549285, 0.7864699055414636, 3.0000000299997014, 5.100000026118249], ws=[3.761588774149773, 3.0955812534257134, 0.7864699055414635, 3.0, 4.645454568572824], res=[2.119024511415546e-09, 2.1235715408352007e-09, 1.1102230246251565e-16, 2.999970138972685e-08, 0.4545454575454251], res_norm=4.545e-01
2026-01-24 02:40:54,122 - INFO - integration_test - Dyn residual k=1: pred=[3.9734933358772184, 3.3079405167487415, 0.7864699055414635, 3.0, 4.945454568572824], ws=[3.9734933358772184, 3.3079405167487415, 0.7864699055414635, 3.0, 5.046464669582925], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 02:40:54,123 - INFO - integration_test - Dyn residual k=2: pred=[4.185397897604664, 3.5202997800717695, 0.7864699055414635, 3.0, 5.346464669582925], ws=[4.185397897604664, 3.5202997800717695, 0.7864699055414635, 3.0, 5.144444467562724], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:40:54,144 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,259 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:55,281 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,331 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:55,354 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,403 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:55,426 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,476 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:55,499 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,549 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:55,572 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,618 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:40:55,640 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,688 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:55,710 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,755 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:55,776 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,822 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:55,843 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,888 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:55,908 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:40:55,955 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:40:56,938 - INFO - integration_test - Step 19: MPC solve successful
2026-01-24 02:40:56,947 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:40:56,947 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:40:56,960 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:40:56,961 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:40:57,220 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:40:57,238 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-24 02:40:57,238 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:40:57,238 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 02:40:57,238 - INFO - integration_test -   Control dict from planner: {'a': -4.853566660252091e-06, 'w': -0.06585346310734802}
2026-01-24 02:40:57,238 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:40:57,238 - INFO - integration_test -   Planner output success: True
2026-01-24 02:40:57,240 - INFO - integration_test - Step 19 completed in 5.207s
2026-01-24 02:40:57,306 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 02:40:57,307 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.76228645 3.09488197 0.77988456 2.99999954 5.09999998]
2026-01-24 02:40:57,308 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.338m, drift=0.184m)
2026-01-24 02:40:57,308 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-24 02:40:57,309 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:58,626 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.762, 3.095), path_start=(0.000, 0.000), dist=4.872m
2026-01-24 02:40:58,626 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 02:40:59,650 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:40:59,682 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:40:59,682 - INFO - integration_test - Warmstart k=0: x0=3.7622864545778527 , y0=3.0948819736127113 , psi0=0.7798845592307287 , v0=2.9999995446430354 , spline0=5.099999977582583 , a0=0.0 , w0=0.0
2026-01-24 02:40:59,682 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:40:59,683 - INFO - integration_test - Dyn residual k=0: pred=[3.9755848383198855, 3.3058411454247487, 0.7798845592307287, 2.9999995446430354, 5.399999932046887], ws=[3.9755848383198855, 3.3058411454247487, 0.7798845592307289, 2.9999995446430354, 5.046464578511533], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.3535353535353538], res_norm=3.535e-01
2026-01-24 02:40:59,684 - INFO - integration_test - Dyn residual k=1: pred=[4.188883222061919, 3.516800317236786, 0.7798845592307289, 2.9999995446430354, 5.346464532975837], ws=[4.188883222061919, 3.516800317236786, 0.7798845592307289, 2.9999995446430354, 5.144444330955635], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:40:59,685 - INFO - integration_test - Dyn residual k=2: pred=[4.402181605803952, 3.7277594890488235, 0.7798845592307289, 2.9999995446430354, 5.444444285419939], ws=[4.402181605803952, 3.7277594890488235, 0.7798845592307289, 2.9999995446430354, 5.747474588450242], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:40:59,704 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:00,858 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:00,884 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:00,939 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:00,966 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,020 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:01,045 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,100 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:01,125 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,178 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:01,203 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,258 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:01,284 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,330 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:01,351 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,394 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:01,415 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,471 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:01,515 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,577 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:01,597 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:01,641 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:02,327 - INFO - integration_test - Step 20: MPC solve successful
2026-01-24 02:41:02,341 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:41:02,341 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:41:02,358 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:41:02,359 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:41:02,778 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:41:02,803 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-24 02:41:02,804 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:41:02,804 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 02:41:02,804 - INFO - integration_test -   Control dict from planner: {'a': 4.853568504621537e-06, 'w': -0.14214146805675937}
2026-01-24 02:41:02,804 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:41:02,804 - INFO - integration_test -   Planner output success: True
2026-01-24 02:41:02,805 - INFO - integration_test - Step 20 completed in 5.498s
2026-01-24 02:41:02,883 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 02:41:02,885 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.97707695 3.30431816 0.76567041 3.00000003 5.39999998]
2026-01-24 02:41:02,886 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.355m, drift=0.074m)
2026-01-24 02:41:02,886 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-24 02:41:02,887 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:04,028 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.977, 3.304), path_start=(0.000, 0.000), dist=5.171m
2026-01-24 02:41:04,028 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 02:41:05,186 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:05,213 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:41:05,213 - INFO - integration_test - Warmstart k=0: x0=3.9770769503487853 , y0=3.3043181568857216 , psi0=0.7656704124250528 , v0=3.0000000299998857 , spline0=5.399999980582572 , a0=0.0 , w0=0.0
2026-01-24 02:41:05,213 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:41:05,214 - INFO - integration_test - Dyn residual k=0: pred=[4.193352325496254, 3.5122242989422148, 0.7656704124250528, 3.0000000299998857, 5.69999998358256], ws=[4.193352323333508, 3.5122242968631614, 0.7656704124250528, 3.0, 5.144444425027016], res=[2.1627455382144944e-09, 2.0790533739045713e-09, 0.0, 2.999988568674894e-08, 0.5555555585555441], res_norm=5.556e-01
2026-01-24 02:41:05,215 - INFO - integration_test - Dyn residual k=1: pred=[4.409627696318232, 3.720130436840601, 0.7656704124250528, 3.0, 5.444444425027016], ws=[4.409627696318232, 3.720130436840601, 0.7656704124250528, 3.0, 5.747474728057319], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:41:05,216 - INFO - integration_test - Dyn residual k=2: pred=[4.6259030693029555, 3.928036576818041, 0.7656704124250528, 3.0, 6.047474728057319], ws=[4.6259030693029555, 3.928036576818041, 0.7656704124250528, 3.0, 5.643434324016915], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:41:05,233 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,276 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:06,302 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,354 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:06,378 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,427 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:06,449 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,498 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:06,519 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,566 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:06,588 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,637 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:06,662 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,712 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:06,737 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,788 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:06,811 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,860 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:06,885 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:06,936 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:06,959 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:07,007 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:07,694 - INFO - integration_test - Step 21: MPC solve successful
2026-01-24 02:41:07,709 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:41:07,709 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:41:07,955 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:41:07,956 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:41:08,388 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:41:08,411 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-24 02:41:08,411 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:41:08,411 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 02:41:08,412 - INFO - integration_test -   Control dict from planner: {'a': -1.8676949788294952e-11, 'w': -0.0706754262395023}
2026-01-24 02:41:08,412 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:41:08,412 - INFO - integration_test -   Planner output success: True
2026-01-24 02:41:08,413 - INFO - integration_test - Step 21 completed in 5.529s
2026-01-24 02:41:08,477 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-24 02:41:08,487 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.19408521 3.5114583  0.75860287 3.00000003 5.69999998]
2026-01-24 02:41:08,488 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.335m, drift=0.374m)
2026-01-24 02:41:08,488 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-24 02:41:08,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:09,476 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.194, 3.511), path_start=(0.000, 0.000), dist=5.470m
2026-01-24 02:41:09,476 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-24 02:41:10,403 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:10,430 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:41:10,430 - INFO - integration_test - Warmstart k=0: x0=4.194085214704871 , y0=3.511458303587606 , psi0=0.7586028698011026 , v0=3.000000029998018 , spline0=5.699999983582374 , a0=0.0 , w0=0.0
2026-01-24 02:41:10,430 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:41:10,431 - INFO - integration_test - Dyn residual k=0: pred=[4.41182456166815, 3.7178307304858853, 0.7586028698011026, 3.000000029998018, 5.999999986582176], ws=[4.411824559490901, 3.7178307284222973, 0.7586028698011025, 3.0, 5.747474731057121], res=[2.1772494918081975e-09, 2.063587967171543e-09, 1.1102230246251565e-16, 2.999801784753231e-08, 0.2525252555250548], res_norm=2.525e-01
2026-01-24 02:41:10,432 - INFO - integration_test - Dyn residual k=1: pred=[4.629563904276931, 3.9242031532569888, 0.7586028698011025, 3.0, 6.047474731057121], ws=[4.629563904276931, 3.9242031532569888, 0.7586028698011025, 3.0, 5.643434327016717], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 02:41:10,432 - INFO - integration_test - Dyn residual k=2: pred=[4.847303249062961, 4.130575578091681, 0.7586028698011025, 3.0, 5.943434327016717], ws=[4.847303249062961, 4.130575578091681, 0.7586028698011025, 3.0, 6.2464646300470195], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:41:10,448 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:11,469 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:11,491 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:11,539 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:11,562 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:11,610 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:11,633 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:11,683 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:11,707 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:11,760 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:11,783 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:11,834 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:11,859 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:11,913 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:11,936 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:11,986 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:12,008 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:12,059 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:12,083 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:12,140 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:12,167 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:12,228 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:12,858 - INFO - integration_test - Step 22: MPC solve successful
2026-01-24 02:41:12,871 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:41:12,871 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:41:13,124 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:41:13,126 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:41:13,550 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:41:13,572 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-24 02:41:13,572 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:41:13,572 - INFO - integration_test - === Applying control at step 22 ===
2026-01-24 02:41:13,572 - INFO - integration_test -   Control dict from planner: {'a': -7.71503849969736e-11, 'w': -0.09874521831949178}
2026-01-24 02:41:13,572 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:41:13,572 - INFO - integration_test -   Planner output success: True
2026-01-24 02:41:13,574 - INFO - integration_test - Step 22 completed in 5.087s
2026-01-24 02:41:13,640 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-24 02:41:13,644 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.41283993 3.71675235 0.74872835 3.00000003 5.99999999]
2026-01-24 02:41:13,645 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.292m, drift=0.264m)
2026-01-24 02:41:13,645 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-24 02:41:13,646 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:14,691 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.413, 3.717), path_start=(0.000, 0.000), dist=5.770m
2026-01-24 02:41:14,691 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-24 02:41:15,694 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:15,724 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:41:15,725 - INFO - integration_test - Warmstart k=0: x0=4.412839929435413 , y0=3.716752349505662 , psi0=0.7487283479691534 , v0=3.0000000299903027 , spline0=5.999999986581404 , a0=0.0 , w0=0.0
2026-01-24 02:41:15,725 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:41:15,726 - INFO - integration_test - Dyn residual k=0: pred=[4.63260645693651, 3.920964678196972, 0.7487283479691534, 3.0000000299903027, 6.299999989580434], ws=[4.632606454739555, 3.9209646761555086, 0.7487283479691533, 3.0, 5.643434330015747], res=[2.1969546182276645e-09, 2.041463442736813e-09, 1.1102230246251565e-16, 2.9990302685689585e-08, 0.6565656595646869], res_norm=6.566e-01
2026-01-24 02:41:15,727 - INFO - integration_test - Dyn residual k=1: pred=[4.852372980043698, 4.125177002805356, 0.7487283479691533, 3.0, 5.943434330015747], ws=[4.852372980043698, 4.125177002805356, 0.7487283479691533, 3.0, 6.24646463304605], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 02:41:15,728 - INFO - integration_test - Dyn residual k=2: pred=[5.07213950534784, 4.329389329455203, 0.7487283479691533, 3.0, 6.54646463304605], ws=[4.869289711990393, 4.1753137353904535, 0.7487283479691533, 3.0, 6.243434330015747], res=[0.2028497933574469, 0.15407559406474913, 0.0, 0.0, 0.30303030303030276], res_norm=3.959e-01
2026-01-24 02:41:15,748 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:16,767 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:16,790 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:16,838 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:16,860 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:16,909 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:16,932 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:16,978 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:17,000 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:17,048 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:17,069 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:17,116 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:17,138 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:17,183 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:17,202 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:17,248 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:17,269 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:17,316 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:17,337 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:17,381 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:17,406 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:17,479 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:18,160 - INFO - integration_test - Step 23: MPC solve successful
2026-01-24 02:41:18,169 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:41:18,169 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1844 scenarios available
2026-01-24 02:41:18,183 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1844 trajectory groups with 18440 total points
2026-01-24 02:41:18,184 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:41:18,482 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:41:18,501 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-24 02:41:18,502 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:41:18,502 - INFO - integration_test - === Applying control at step 23 ===
2026-01-24 02:41:18,502 - INFO - integration_test -   Control dict from planner: {'a': -2.199063392100875e-08, 'w': -0.8000000094083316}
2026-01-24 02:41:18,502 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:41:18,502 - INFO - integration_test -   Planner output success: True
2026-01-24 02:41:18,503 - INFO - integration_test - Step 23 completed in 4.859s
2026-01-24 02:41:18,565 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-24 02:41:18,567 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.64053626 3.91196095 0.66872835 3.00000003 6.29999999]
2026-01-24 02:41:18,567 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.298m, drift=0.155m)
2026-01-24 02:41:18,568 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-24 02:41:18,568 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:19,586 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.641, 3.912), path_start=(0.000, 0.000), dist=6.069m
2026-01-24 02:41:19,586 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-24 02:41:20,656 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:20,685 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:41:20,685 - INFO - integration_test - Warmstart k=0: x0=4.6405362551016065 , y0=3.911960950257423 , psi0=0.6687283470283203 , v0=3.000000027791239 , spline0=6.299999989360528 , a0=0.0 , w0=0.0
2026-01-24 02:41:20,685 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:41:20,687 - INFO - integration_test - Dyn residual k=0: pred=[4.8759194704574504, 4.097957572797238, 0.6687283470283203, 3.000000027791239, 6.599999992139653], ws=[4.87591946827692, 4.097957571074213, 0.6687283470283205, 3.0, 6.246464635825174], res=[2.1805304228905698e-09, 1.7230252780109367e-09, -2.220446049250313e-16, 2.7791239087804342e-08, 0.3535353563144783], res_norm=3.535e-01
2026-01-24 02:41:20,688 - INFO - integration_test - Dyn residual k=1: pred=[5.1113026814522335, 4.283954191891003, 0.6687283470283205, 3.0, 6.546464635825174], ws=[5.1113026814522335, 4.283954191891003, 0.6687283470283205, 3.0, 6.344444433804973], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 02:41:20,689 - INFO - integration_test - Dyn residual k=2: pred=[5.346685894627547, 4.469950812707793, 0.6687283470283205, 3.0, 6.644444433804972], ws=[5.346685894627547, 4.469950812707793, 0.6687283470283205, 3.0, 6.745454534815073], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-24 02:41:20,719 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,059 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:22,082 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,135 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:22,160 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,208 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:22,232 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,282 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:22,306 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,355 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:22,379 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,430 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:22,452 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,501 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:22,524 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,572 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:22,594 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,640 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:22,664 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,719 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:22,745 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:22,802 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:28,441 - WARNING - integration_test - Step 24: MPC solve failed
2026-01-24 02:41:28,441 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 02:41:28,459 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:41:28,459 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:41:28,477 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:41:28,478 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:41:29,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:41:29,086 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-24 02:41:29,086 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:41:29,087 - INFO - integration_test - === Applying control at step 24 ===
2026-01-24 02:41:29,087 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:41:29,087 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:41:29,087 - INFO - integration_test -   Planner output success: False
2026-01-24 02:41:29,087 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:41:29,088 - INFO - integration_test - Step 24 completed in 10.522s
2026-01-24 02:41:29,156 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-24 02:41:29,165 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.86072946 4.1005614  0.74872835 2.80000003 6.57999999]
2026-01-24 02:41:29,166 - DEBUG - integration_test - Step 25: Using propagated spline 6.5800 (close to path, dist=0.344m, drift=0.025m)
2026-01-24 02:41:29,166 - DEBUG - integration_test -   Set spline state to 6.5800
2026-01-24 02:41:29,167 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:30,148 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.861, 4.101), path_start=(0.000, 0.000), dist=6.359m
2026-01-24 02:41:30,148 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-24 02:41:31,111 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:31,139 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:41:31,139 - INFO - integration_test - Warmstart k=0: x0=4.860729462702299 , y0=4.100561399173886 , psi0=0.7487283470283203 , v0=2.800000027791239 , spline0=6.579999992139652 , a0=0.0 , w0=0.0
2026-01-24 02:41:31,139 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:41:31,140 - INFO - integration_test - Dyn residual k=0: pred=[5.065844888534681, 4.291159572412535, 0.7487283470283203, 2.800000027791239, 6.859999994918776], ws=[5.065844888534681, 4.291159572412535, 0.7487283470283201, 2.800000027791239, 6.102424237343018], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.7575757575757578], res_norm=7.576e-01
2026-01-24 02:41:31,141 - INFO - integration_test - Dyn residual k=1: pred=[5.270960314367063, 4.4817577456511835, 0.7487283470283201, 2.800000027791239, 6.382424240122142], ws=[5.007647670250792, 4.182180308405987, 0.7487283470283201, 2.800000027791239, 6.079393937091839], res=[0.26331264411627053, 0.2995774372451967, 0.0, 0.0, 0.30303030303030276], res_norm=5.009e-01
2026-01-24 02:41:31,142 - INFO - integration_test - Dyn residual k=2: pred=[5.212763096083174, 4.372778481644636, 0.7487283470283201, 2.800000027791239, 6.359393939870963], ws=[5.476075740199445, 4.672355918889832, 0.7487283470283201, 2.800000027791239, 7.06646464694167], res=[-0.26331264411627053, -0.2995774372451967, 0.0, 0.0, -0.7070707070707067], res_norm=8.118e-01
2026-01-24 02:41:31,160 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,285 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:32,308 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,356 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:32,380 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,431 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:32,453 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,506 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:32,534 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,584 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:32,609 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,658 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:32,682 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,732 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:32,755 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,807 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:32,831 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,883 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:32,908 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:32,962 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:32,987 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:33,038 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:38,721 - WARNING - integration_test - Step 25: MPC solve failed
2026-01-24 02:41:38,721 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 02:41:38,734 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:41:38,734 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:41:38,748 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:41:38,749 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:41:39,105 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:41:39,131 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.580)
2026-01-24 02:41:39,132 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:41:39,132 - INFO - integration_test - === Applying control at step 25 ===
2026-01-24 02:41:39,132 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-24 02:41:39,132 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:41:39,132 - INFO - integration_test -   Planner output success: False
2026-01-24 02:41:39,132 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-24 02:41:39,133 - INFO - integration_test - Step 25 completed in 9.969s
2026-01-24 02:41:39,200 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-24 02:41:39,202 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.05105528 4.29196995 0.82872835 2.60000003 6.83999999]
2026-01-24 02:41:39,203 - DEBUG - integration_test - Step 26: Using propagated spline 6.8400 (close to path, dist=0.273m, drift=0.285m)
2026-01-24 02:41:39,203 - DEBUG - integration_test -   Set spline state to 6.8400
2026-01-24 02:41:39,203 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:40,126 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.051, 4.292), path_start=(0.000, 0.000), dist=6.628m
2026-01-24 02:41:40,126 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-24 02:41:41,220 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:41,248 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:41:41,248 - INFO - integration_test - Warmstart k=0: x0=5.051055277369268 , y0=4.291969951506118 , psi0=0.8287283470283202 , v0=2.6000000277912387 , spline0=6.839999994918776 , a0=0.0 , w0=0.0
2026-01-24 02:41:41,248 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:41:41,249 - INFO - integration_test - Dyn residual k=0: pred=[5.226766817007161, 4.483608820953904, 0.8287283470283202, 2.6000000277912387, 7.099999997697901], ws=[4.950586609402154, 4.3966827232296435, 0.8287283470283202, 2.6000000277912387, 6.342424240122143], res=[0.27618020760500706, 0.08692609772426074, 0.0, 0.0, 0.7575757575757578], res_norm=8.110e-01
2026-01-24 02:41:41,250 - INFO - integration_test - Dyn residual k=1: pred=[5.126298149040047, 4.5883215926774295, 0.8287283470283202, 2.6000000277912387, 6.602424242901267], ws=[5.402478356645054, 4.67524769040169, 0.8287283470283202, 2.6000000277912387, 6.80444444492147], res=[-0.27618020760500706, -0.08692609772426074, 0.0, 0.0, -0.20202020202020243], res_norm=3.530e-01
2026-01-24 02:41:41,251 - INFO - integration_test - Dyn residual k=2: pred=[5.5781898962829475, 4.866886559849476, 0.8287283470283202, 2.6000000277912387, 7.064444447700594], ws=[5.000295113496983, 4.363157328246222, 0.8287283470283202, 2.6000000277912387, 6.357373740629887], res=[0.5778947827859646, 0.5037292316032538, 0.0, 0.0, 0.7070707070707067], res_norm=1.043e+00
2026-01-24 02:41:41,268 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,332 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:42,356 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,405 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:42,432 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,482 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:42,504 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,555 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:42,578 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,623 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:42,646 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,694 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:42,718 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,766 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:42,789 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,842 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:42,864 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,914 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:42,940 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:42,996 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:43,019 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:43,068 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:48,351 - WARNING - integration_test - Step 26: MPC solve failed
2026-01-24 02:41:48,351 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-24 02:41:48,369 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:41:48,369 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:41:48,639 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:41:48,640 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:41:49,184 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:41:49,212 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.840)
2026-01-24 02:41:49,212 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:41:49,212 - INFO - integration_test - === Applying control at step 26 ===
2026-01-24 02:41:49,212 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.5254219263321716}
2026-01-24 02:41:49,212 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:41:49,212 - INFO - integration_test -   Planner output success: False
2026-01-24 02:41:49,212 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.5254219263321716}
2026-01-24 02:41:49,214 - INFO - integration_test - Step 26 completed in 10.012s
2026-01-24 02:41:49,286 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-24 02:41:49,290 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.21515721 4.48053343 0.88127054 2.40000003 7.08      ]
2026-01-24 02:41:49,291 - DEBUG - integration_test - Step 27: Using propagated spline 7.0800 (close to path, dist=0.236m, drift=0.115m)
2026-01-24 02:41:49,291 - DEBUG - integration_test -   Set spline state to 7.0800
2026-01-24 02:41:49,292 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:50,329 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.215, 4.481), path_start=(0.000, 0.000), dist=6.876m
2026-01-24 02:41:50,330 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-24 02:41:51,370 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:41:51,402 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:41:51,402 - INFO - integration_test - Warmstart k=0: x0=5.215157212150348 , y0=4.4805334346062535 , psi0=0.8812705396615373 , v0=2.4000000277912386 , spline0=7.0799999976979 , a0=0.0 , w0=0.0
2026-01-24 02:41:51,402 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:41:51,403 - INFO - integration_test - Dyn residual k=0: pred=[5.367838344129659, 4.665704904523992, 0.8812705396615373, 2.4000000277912386, 7.320000000477024], ws=[5.367838344129659, 4.665704904523992, 0.8812705396615375, 2.4000000277912386, 6.764444444921469], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-24 02:41:51,405 - INFO - integration_test - Dyn residual k=1: pred=[5.520519476108969, 4.85087637444173, 0.8812705396615375, 2.4000000277912386, 7.0044444477005925], ws=[5.478070572163626, 4.642187973256779, 0.8812705396615375, 2.4000000277912386, 6.80242424568039], res=[0.04244890394534373, 0.20868840118495058, 0.0, 0.0, 0.20202020202020243], res_norm=2.935e-01
2026-01-24 02:41:51,406 - INFO - integration_test - Dyn residual k=2: pred=[5.630751704142936, 4.827359443174517, 0.8812705396615375, 2.4000000277912386, 7.042424248459514], ws=[5.845912407136528, 4.377590195228842, 0.8812705396615375, 2.4000000277912386, 6.840404046439312], res=[-0.21516070299359225, 0.4497692479456754, 0.0, 0.0, 0.20202020202020154], res_norm=5.380e-01
2026-01-24 02:41:51,426 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:52,490 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:52,514 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:52,568 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:52,590 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:52,639 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:52,663 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:52,711 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:52,735 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:52,784 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:52,808 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:52,860 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:41:52,882 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:52,933 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:52,959 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:53,013 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:53,036 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:53,080 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:53,103 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:53,150 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:53,172 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:41:53,217 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:41:59,092 - WARNING - integration_test - Step 27: MPC solve failed
2026-01-24 02:41:59,092 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-24 02:41:59,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:41:59,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:41:59,118 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:41:59,119 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:41:59,979 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:42:00,018 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.080)
2026-01-24 02:42:00,018 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:42:00,018 - INFO - integration_test - === Applying control at step 27 ===
2026-01-24 02:42:00,018 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.7055464878088111}
2026-01-24 02:42:00,018 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:42:00,018 - INFO - integration_test -   Planner output success: False
2026-01-24 02:42:00,018 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.7055464878088111}
2026-01-24 02:42:00,020 - INFO - integration_test - Step 27 completed in 10.731s
2026-01-24 02:42:00,100 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-24 02:42:00,108 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.35519098 4.66293031 0.95182519 2.20000003 7.3       ]
2026-01-24 02:42:00,110 - DEBUG - integration_test - Step 28: Using propagated spline 7.3000 (close to path, dist=0.220m, drift=0.335m)
2026-01-24 02:42:00,110 - DEBUG - integration_test -   Set spline state to 7.3000
2026-01-24 02:42:00,111 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:01,321 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.355, 4.663), path_start=(0.000, 0.000), dist=7.101m
2026-01-24 02:42:01,321 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-24 02:42:02,332 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:02,362 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:42:02,362 - INFO - integration_test - Warmstart k=0: x0=5.355190980151524 , y0=4.662930306755987 , psi0=0.9518251884424185 , v0=2.2000000277912384 , spline0=7.3000000004770245 , a0=0.0 , w0=0.0
2026-01-24 02:42:02,362 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:42:02,363 - INFO - integration_test - Dyn residual k=0: pred=[5.482834428425695, 4.84211499174746, 0.9518251884424185, 2.2000000277912384, 7.520000003256149], ws=[5.482834428425695, 4.84211499174746, 0.9518251884424185, 2.2000000277912384, 6.863434346690492], res=[0.0, 0.0, 0.0, 0.0, 0.6565656565656566], res_norm=6.566e-01
2026-01-24 02:42:02,364 - INFO - integration_test - Dyn residual k=1: pred=[5.610477876699867, 5.021299676738932, 0.9518251884424185, 2.2000000277912384, 7.083434349469616], ws=[5.5508575882182445, 4.904907031595349, 0.9518251884424185, 2.2000000277912384, 7.386464652499919], res=[0.059620288481622374, 0.11639264514358327, 0.0, 0.0, -0.30303030303030276], res_norm=3.300e-01
2026-01-24 02:42:02,365 - INFO - integration_test - Dyn residual k=2: pred=[5.678501036492416, 5.084091716586822, 0.9518251884424185, 2.2000000277912384, 7.606464655279043], ws=[5.507676539060003, 4.69307841869489, 0.9518251884424185, 2.2000000277912384, 7.101414150228538], res=[0.17082449743241312, 0.3910132978919316, 0.0, 0.0, 0.5050505050505052], res_norm=6.612e-01
2026-01-24 02:42:02,383 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:03,509 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:03,534 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:03,584 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:03,607 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:03,656 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:03,679 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:03,731 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:03,766 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:03,844 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:03,870 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:03,923 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:03,947 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:03,996 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:04,020 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:04,072 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:04,093 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:04,141 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:04,164 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:04,214 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:04,236 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:04,286 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:10,035 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-24 02:42:10,035 - WARNING - integration_test -   Consecutive MPC failures: 5/20
2026-01-24 02:42:10,055 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:42:10,055 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 02:42:10,072 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 02:42:10,073 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:42:10,788 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:42:10,820 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.300)
2026-01-24 02:42:10,820 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:42:10,820 - INFO - integration_test - === Applying control at step 28 ===
2026-01-24 02:42:10,820 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.04829249926003332}
2026-01-24 02:42:10,821 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:42:10,821 - INFO - integration_test -   Planner output success: False
2026-01-24 02:42:10,821 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.04829249926003332}
2026-01-24 02:42:10,822 - INFO - integration_test - Step 28 completed in 10.715s
2026-01-24 02:42:10,905 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-24 02:42:10,908 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.47743843 4.83368005 0.94699594 2.00000003 7.5       ]
2026-01-24 02:42:10,909 - DEBUG - integration_test - Step 29: Using propagated spline 7.5000 (close to path, dist=0.131m, drift=0.126m)
2026-01-24 02:42:10,909 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-24 02:42:10,910 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:11,937 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.477, 4.834), path_start=(0.000, 0.000), dist=7.305m
2026-01-24 02:42:11,937 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-24 02:42:12,950 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:12,983 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:42:12,983 - INFO - integration_test - Warmstart k=0: x0=5.477438432250398 , y0=4.833680053403961 , psi0=0.9469959385164152 , v0=2.000000027791238 , spline0=7.500000003256148 , a0=0.0 , w0=0.0
2026-01-24 02:42:12,983 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:42:12,985 - INFO - integration_test - Dyn residual k=0: pred=[5.594263236136252, 4.996012940733304, 0.9469959385164152, 2.000000027791238, 7.700000006035272], ws=[5.594263236136252, 4.996012940733304, 0.9469959385164151, 2.000000027791238, 6.942424248459514], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.7575757575757578], res_norm=7.576e-01
2026-01-24 02:42:12,986 - INFO - integration_test - Dyn residual k=1: pred=[5.711088040022105, 5.1583458280626475, 0.9469959385164151, 2.000000027791238, 7.142424251238638], ws=[5.564861235668442, 4.829829101360766, 0.9469959385164151, 2.000000027791238, 7.142424251238638], res=[0.1462268043536632, 0.32851672670188137, 0.0, 0.0, 0.0], res_norm=3.596e-01
2026-01-24 02:42:12,987 - INFO - integration_test - Dyn residual k=2: pred=[5.681686039554295, 4.99216198869011, 0.9469959385164151, 2.000000027791238, 7.342424254017762], ws=[5.1608911482120154, 5.586612940209502, 0.9469959385164151, 2.000000027791238, 7.443434355027864], res=[0.5207948913422795, -0.5944509515193923, 0.0, 0.0, -0.1010101010101021], res_norm=7.967e-01
2026-01-24 02:42:13,009 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,084 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:14,105 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,155 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:14,179 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,226 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:14,249 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,297 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:14,320 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,371 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:14,394 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,446 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:14,468 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,515 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:14,536 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,585 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:14,605 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,650 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:14,672 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,719 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:14,739 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:14,790 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:21,020 - WARNING - integration_test - Step 29: MPC solve failed
2026-01-24 02:42:21,020 - WARNING - integration_test -   Consecutive MPC failures: 6/20
2026-01-24 02:42:21,041 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:42:21,041 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:42:21,057 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:42:21,058 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:42:21,639 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:42:21,666 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-24 02:42:21,666 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:42:21,666 - INFO - integration_test - === Applying control at step 29 ===
2026-01-24 02:42:21,666 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.06832244101723006}
2026-01-24 02:42:21,666 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:42:21,666 - INFO - integration_test -   Planner output success: False
2026-01-24 02:42:21,666 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.06832244101723006}
2026-01-24 02:42:21,668 - INFO - integration_test - Step 29 completed in 10.760s
2026-01-24 02:42:21,741 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-24 02:42:21,743 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.58790358 4.98826761 0.95382818 1.80000003 7.68000001]
2026-01-24 02:42:21,744 - DEBUG - integration_test - Step 30: Using propagated spline 7.6800 (close to path, dist=0.135m, drift=0.306m)
2026-01-24 02:42:21,744 - DEBUG - integration_test -   Set spline state to 7.6800
2026-01-24 02:42:21,744 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:22,678 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.588, 4.988), path_start=(0.000, 0.000), dist=7.490m
2026-01-24 02:42:22,678 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-24 02:42:23,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:23,744 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:42:23,745 - INFO - integration_test - Warmstart k=0: x0=5.587903578254676 , y0=4.988267608778188 , psi0=0.9538281826181382 , v0=1.8000000277912382 , spline0=7.680000006035272 , a0=0.0 , w0=0.0
2026-01-24 02:42:23,745 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:42:23,746 - INFO - integration_test - Dyn residual k=0: pred=[5.692045267568647, 5.135082150112884, 0.9538281826181382, 1.8000000277912382, 7.860000008814397], ws=[5.692045267568647, 5.135082150112884, 0.9538281826181381, 1.8000000277912382, 7.506464655279043], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.3535353535353538], res_norm=3.535e-01
2026-01-24 02:42:23,747 - INFO - integration_test - Dyn residual k=1: pred=[5.796186956882618, 5.281896691447579, 0.9538281826181381, 1.8000000277912382, 7.686464658058167], ws=[5.585812325290528, 5.0938509209154645, 0.9538281826181381, 1.8000000277912382, 7.181414153007661], res=[0.21037463159209047, 0.18804577053211435, 0.0, 0.0, 0.5050505050505061], res_norm=5.785e-01
2026-01-24 02:42:23,747 - INFO - integration_test - Dyn residual k=2: pred=[5.689954014604499, 5.24066546225016, 0.9538281826181381, 1.8000000277912382, 7.361414155786785], ws=[5.651802803497905, 5.124723460997968, 0.9538281826181381, 1.8000000277912382, 7.462424256796886], res=[0.038151211106594474, 0.11594200125219167, 0.0, 0.0, -0.10101010101010122], res_norm=1.584e-01
2026-01-24 02:42:23,766 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:24,881 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:24,905 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:24,959 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:24,985 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,038 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:25,063 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,112 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:25,139 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,190 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:25,215 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,266 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:25,289 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,339 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:25,364 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,415 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:25,438 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,485 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:25,509 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,563 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:25,586 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:25,635 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:31,523 - WARNING - integration_test - Step 30: MPC solve failed
2026-01-24 02:42:31,523 - WARNING - integration_test -   Consecutive MPC failures: 7/20
2026-01-24 02:42:31,541 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:42:31,542 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:42:31,840 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:42:31,841 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:42:32,521 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:42:32,553 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=7.680)
2026-01-24 02:42:32,553 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:42:32,553 - INFO - integration_test - === Applying control at step 30 ===
2026-01-24 02:42:32,553 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.3498026765944662}
2026-01-24 02:42:32,553 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:42:32,554 - INFO - integration_test -   Planner output success: False
2026-01-24 02:42:32,554 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.3498026765944662}
2026-01-24 02:42:32,555 - INFO - integration_test - Step 30 completed in 10.812s
2026-01-24 02:42:32,632 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-24 02:42:32,637 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[5.68861751 5.12521198 0.91884791 1.60000003 7.84000001]
2026-01-24 02:42:32,638 - DEBUG - integration_test - Step 31: Using propagated spline 7.8400 (close to path, dist=0.127m, drift=0.056m)
2026-01-24 02:42:32,638 - DEBUG - integration_test -   Set spline state to 7.8400
2026-01-24 02:42:32,638 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:33,669 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(5.689, 5.125), path_start=(0.000, 0.000), dist=7.657m
2026-01-24 02:42:33,670 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-24 02:42:34,692 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:34,721 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:42:34,721 - INFO - integration_test - Warmstart k=0: x0=5.688617511582705 , y0=5.125211981588869 , psi0=0.9188479149586916 , v0=1.6000000277912383 , spline0=7.840000008814396 , a0=0.0 , w0=0.0
2026-01-24 02:42:34,721 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:42:34,722 - INFO - integration_test - Dyn residual k=0: pred=[5.7856953300870595, 5.252396485533946, 0.9188479149586916, 1.6000000277912383, 8.00000001159352], ws=[5.628451499638268, 4.827560250118471, 0.9188479149586914, 1.6000000277912383, 7.141414153007662], res=[0.15724383044879175, 0.42483623541547466, 1.1102230246251565e-16, 0.0, 0.858585858585859], res_norm=9.708e-01
2026-01-24 02:42:34,723 - INFO - integration_test - Dyn residual k=1: pred=[5.725529318142622, 4.954744754063547, 0.9188479149586914, 1.6000000277912383, 7.3014141557867855], ws=[5.755464518269173, 4.773888478507744, 0.9188479149586914, 1.6000000277912383, 7.402424256796888], res=[-0.02993520012655093, 0.18085627555580341, 0.0, 0.0, -0.1010101010101021], res_norm=2.093e-01
2026-01-24 02:42:34,724 - INFO - integration_test - Dyn residual k=2: pred=[5.852542336773528, 4.9010729824528205, 0.9188479149586914, 1.6000000277912383, 7.562424259576011], ws=[5.588496105128521, 5.253340821978556, 0.9188479149586914, 1.6000000277912383, 7.2593939565457095], res=[0.26404623164500673, -0.3522678395257355, 0.0, 0.0, 0.3030303030303019], res_norm=5.345e-01
2026-01-24 02:42:34,742 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:35,744 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:35,767 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:35,815 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:35,839 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:35,891 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:35,916 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:35,969 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:35,993 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:36,038 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:36,061 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:36,106 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:36,128 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:36,172 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:36,193 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:36,238 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:36,266 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:36,339 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:36,364 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:36,411 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:36,432 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:36,475 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:42,180 - WARNING - integration_test - Step 31: MPC solve failed
2026-01-24 02:42:42,180 - WARNING - integration_test -   Consecutive MPC failures: 8/20
2026-01-24 02:42:42,203 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:42:42,203 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:42:42,219 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:42:42,220 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:42:42,780 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:42:42,804 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=7.840)
2026-01-24 02:42:42,804 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:42:42,804 - INFO - integration_test - === Applying control at step 31 ===
2026-01-24 02:42:42,804 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.3230110774037547}
2026-01-24 02:42:42,804 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:42:42,804 - INFO - integration_test -   Planner output success: False
2026-01-24 02:42:42,804 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.3230110774037547}
2026-01-24 02:42:42,806 - INFO - integration_test - Step 31 completed in 10.169s
2026-01-24 02:42:42,878 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-24 02:42:42,880 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[5.78149543 5.24299033 0.88654681 1.40000003 7.98000001]
2026-01-24 02:42:42,881 - DEBUG - integration_test - Step 32: Using propagated spline 7.9800 (close to path, dist=0.024m, drift=0.196m)
2026-01-24 02:42:42,881 - DEBUG - integration_test -   Set spline state to 7.9800
2026-01-24 02:42:42,882 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:43,882 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(5.781, 5.243), path_start=(0.000, 0.000), dist=7.805m
2026-01-24 02:42:43,882 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-24 02:42:44,805 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:44,832 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:42:44,832 - INFO - integration_test - Warmstart k=0: x0=5.781495433935637 , y0=5.242990328720927 , psi0=0.8865468072183161 , v0=1.4000000277912383 , spline0=7.98000001159352 , a0=0.0 , w0=0.0
2026-01-24 02:42:44,832 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:42:44,833 - INFO - integration_test - Dyn residual k=0: pred=[5.869988266281995, 5.351475440148597, 0.8865468072183161, 1.4000000277912383, 8.120000014372645], ws=[5.443999065099579, 4.9765177073010145, 0.8865468072183162, 1.4000000277912383, 7.160404054776685], res=[0.425989201182416, 0.3749577328475828, -1.1102230246251565e-16, 0.0, 0.9595959595959593], res_norm=1.115e+00
2026-01-24 02:42:44,833 - INFO - integration_test - Dyn residual k=1: pred=[5.5324918974459365, 5.085002818728685, 0.8865468072183162, 1.4000000277912383, 7.300404057555809], ws=[5.542042698516587, 5.01381480919587, 0.8865468072183162, 1.4000000277912383, 7.401414158565909], res=[-0.00955080107065065, 0.07118800953281479, 0.0, 0.0, -0.10101010101009944], res_norm=1.239e-01
2026-01-24 02:42:44,834 - INFO - integration_test - Dyn residual k=2: pred=[5.630535530862945, 5.122299920623541, 0.8865468072183162, 1.4000000277912383, 7.541414161345033], ws=[5.656145016032322, 6.1213566198024605, 0.8865468072183162, 1.4000000277912383, 7.7434343633652345], res=[-0.02560948516937689, -0.9990566991789196, 0.0, 0.0, -0.20202020202020154], res_norm=1.020e+00
2026-01-24 02:42:44,851 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:45,928 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:45,953 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,009 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:46,035 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,085 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:46,109 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,161 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:46,187 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,239 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:46,267 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,356 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:46,383 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,438 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:46,462 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,520 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:46,557 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,625 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:46,651 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,702 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:46,726 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:46,778 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:52,752 - WARNING - integration_test - Step 32: MPC solve failed
2026-01-24 02:42:52,752 - WARNING - integration_test -   Consecutive MPC failures: 9/20
2026-01-24 02:42:52,776 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:42:52,777 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:42:52,796 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:42:52,798 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:42:53,668 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:42:53,708 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=7.980)
2026-01-24 02:42:53,709 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:42:53,709 - INFO - integration_test - === Applying control at step 32 ===
2026-01-24 02:42:53,709 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.48090662504452375}
2026-01-24 02:42:53,709 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:42:53,709 - INFO - integration_test -   Planner output success: False
2026-01-24 02:42:53,709 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.48090662504452375}
2026-01-24 02:42:53,711 - INFO - integration_test - Step 32 completed in 10.830s
2026-01-24 02:42:53,792 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-24 02:42:53,800 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[5.86599658 5.34176435 0.83845614 1.20000003 8.10000001]
2026-01-24 02:42:53,801 - DEBUG - integration_test - Step 33: Using propagated spline 8.1000 (close to path, dist=0.153m, drift=0.316m)
2026-01-24 02:42:53,801 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-24 02:42:53,801 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:54,846 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(5.866, 5.342), path_start=(0.000, 0.000), dist=7.934m
2026-01-24 02:42:54,846 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-24 02:42:55,865 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:42:55,909 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:42:55,909 - INFO - integration_test - Warmstart k=0: x0=5.865996581536988 , y0=5.341764345770682 , psi0=0.8384561447138638 , v0=1.2000000277912384 , spline0=8.100000014372645 , a0=0.0 , w0=0.0
2026-01-24 02:42:55,909 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:42:55,911 - INFO - integration_test - Dyn residual k=0: pred=[5.946229981533939, 5.430997759870553, 0.8384561447138638, 1.2000000277912384, 8.220000017151769], ws=[5.801538701430572, 4.8692180762787105, 0.8384561447138639, 1.2000000277912384, 7.462424259576011], res=[0.14469128010336707, 0.5617796835918423, -1.1102230246251565e-16, 0.0, 0.7575757575757578], res_norm=9.542e-01
2026-01-24 02:42:55,913 - INFO - integration_test - Dyn residual k=1: pred=[5.881772101427523, 4.9584514903785815, 0.8384561447138639, 1.2000000277912384, 7.582424262355135], ws=[6.008596704338127, 4.813026753778791, 0.8384561447138639, 1.2000000277912384, 7.279393959324832], res=[-0.12682460291060416, 0.14542473659979027, 0.0, 0.0, 0.30303030303030276], res_norm=3.592e-01
2026-01-24 02:42:55,916 - INFO - integration_test - Dyn residual k=2: pred=[6.088830104335078, 4.902260167878662, 0.8384561447138639, 1.2000000277912384, 7.3993939621039555], ws=[5.639753009600544, 4.9912772670591865, 0.8384561447138639, 1.2000000277912384, 7.197373760083753], res=[0.44907709473453394, -0.08901709918052436, 0.0, 0.0, 0.20202020202020243], res_norm=5.004e-01
2026-01-24 02:42:55,944 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:56,929 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:56,951 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,000 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:57,025 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,072 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:57,095 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,142 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:57,165 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,215 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:57,239 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,289 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:42:57,313 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,367 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:57,392 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,447 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:57,471 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,536 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:57,577 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,646 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:42:57,672 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:42:57,726 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:03,422 - WARNING - integration_test - Step 33: MPC solve failed
2026-01-24 02:43:03,422 - WARNING - integration_test -   Consecutive MPC failures: 10/20
2026-01-24 02:43:03,441 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:03,441 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:43:03,457 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:43:03,458 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:04,430 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:43:04,461 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-24 02:43:04,461 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:43:04,461 - INFO - integration_test - === Applying control at step 33 ===
2026-01-24 02:43:04,461 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.454335348404598}
2026-01-24 02:43:04,461 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:43:04,461 - INFO - integration_test -   Planner output success: False
2026-01-24 02:43:04,461 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.454335348404598}
2026-01-24 02:43:04,463 - INFO - integration_test - Step 33 completed in 10.663s
2026-01-24 02:43:04,532 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-24 02:43:04,539 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[5.94132128 5.42191493 0.79302261 1.00000003 8.20000002]
2026-01-24 02:43:04,540 - DEBUG - integration_test - Step 34: Using propagated spline 8.2000 (close to path, dist=0.161m, drift=0.006m)
2026-01-24 02:43:04,540 - DEBUG - integration_test -   Set spline state to 8.2000
2026-01-24 02:43:04,540 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:43:05,451 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(5.941, 5.422), path_start=(0.000, 0.000), dist=8.043m
2026-01-24 02:43:05,451 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-24 02:43:06,424 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:43:06,450 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:43:06,450 - INFO - integration_test - Warmstart k=0: x0=5.941321276610776 , y0=5.421914925478297 , psi0=0.793022609873404 , v0=1.0000000277912384 , spline0=8.200000017151769 , a0=0.0 , w0=0.0
2026-01-24 02:43:06,450 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:43:06,451 - INFO - integration_test - Dyn residual k=0: pred=[6.0114907768492625, 5.493162674861037, 0.793022609873404, 1.0000000277912384, 8.300000019930893], ws=[5.464058639085956, 5.289746921089831, 0.7930226098734039, 1.0000000277912384, 7.239393959324833], res=[0.5474321377633062, 0.20341575377120602, 1.1102230246251565e-16, 0.0, 1.0606060606060606], res_norm=1.211e+00
2026-01-24 02:43:06,452 - INFO - integration_test - Dyn residual k=1: pred=[5.534228139324442, 5.3609946704725715, 0.7930226098734039, 1.0000000277912384, 7.339393962103957], ws=[5.449478001879829, 5.219893857904137, 0.7930226098734039, 1.0000000277912384, 7.440404063114058], res=[0.08475013744461357, 0.14110081256843454, 0.0, 0.0, -0.10101010101010122], res_norm=1.931e-01
2026-01-24 02:43:06,453 - INFO - integration_test - Dyn residual k=2: pred=[5.519647502118315, 5.291141607286877, 0.7930226098734039, 1.0000000277912384, 7.540404065893182], ws=[5.571497490587848, 6.287457291621172, 0.7930226098734039, 1.0000000277912384, 7.742424267913384], res=[-0.051849988469532704, -0.9963156843342951, 0.0, 0.0, -0.20202020202020154], res_norm=1.018e+00
2026-01-24 02:43:06,470 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:07,582 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:07,606 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:07,656 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:07,679 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:07,729 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:07,751 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:07,802 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:07,827 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:07,878 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:07,901 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:07,954 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:07,980 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:08,037 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:08,060 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:08,112 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:08,136 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:08,185 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:08,209 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:08,260 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:08,282 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:08,332 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:13,926 - WARNING - integration_test - Step 34: MPC solve failed
2026-01-24 02:43:13,926 - WARNING - integration_test -   Consecutive MPC failures: 11/20
2026-01-24 02:43:13,949 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:13,949 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:43:13,965 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:43:13,966 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:14,908 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:43:14,947 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=8.200)
2026-01-24 02:43:14,947 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:43:14,947 - INFO - integration_test - === Applying control at step 34 ===
2026-01-24 02:43:14,947 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-24 02:43:14,947 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:43:14,948 - INFO - integration_test -   Planner output success: False
2026-01-24 02:43:14,948 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-24 02:43:14,949 - INFO - integration_test - Step 34 completed in 10.410s
2026-01-24 02:43:15,029 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-24 02:43:15,045 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[6.00687888 5.48354203 0.71302261 0.80000003 8.28000002]
2026-01-24 02:43:15,046 - DEBUG - integration_test - Step 35: Using propagated spline 8.2800 (close to path, dist=0.086m, drift=0.086m)
2026-01-24 02:43:15,046 - DEBUG - integration_test -   Set spline state to 8.2800
2026-01-24 02:43:15,047 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:43:16,139 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(6.007, 5.484), path_start=(0.000, 0.000), dist=8.133m
2026-01-24 02:43:16,139 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-24 02:43:17,122 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:43:17,150 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:43:17,150 - INFO - integration_test - Warmstart k=0: x0=6.006878882786234 , y0=5.483542027411077 , psi0=0.713022609873404 , v0=0.8000000277912385 , spline0=8.280000019930894 , a0=0.0 , w0=0.0
2026-01-24 02:43:17,150 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:43:17,151 - INFO - integration_test - Dyn residual k=0: pred=[6.067389938931485, 5.535871870988582, 0.713022609873404, 0.8000000277912385, 8.360000022710018], ws=[5.552026681479761, 6.112729271624142, 0.7130226098734038, 0.8000000277912385, 7.703434366144362], res=[0.5153632574517237, -0.5768574006355598, 2.220446049250313e-16, 0.0, 0.6565656565656566], res_norm=1.015e+00
2026-01-24 02:43:17,152 - INFO - integration_test - Dyn residual k=1: pred=[5.612537737625012, 6.165059115201647, 0.7130226098734038, 0.8000000277912385, 7.783434368923485], ws=[5.467893349317129, 5.295077011219805, 0.7130226098734038, 0.8000000277912385, 7.480404065893183], res=[0.14464438830788318, 0.8699821039818421, 0.0, 0.0, 0.3030303030303019], res_norm=9.325e-01
2026-01-24 02:43:17,153 - INFO - integration_test - Dyn residual k=2: pred=[5.52840440546238, 5.34740685479731, 0.7130226098734038, 0.8000000277912385, 7.560404068672307], ws=[5.493482284722381, 5.787620484459838, 0.7130226098734038, 0.8000000277912385, 7.3583838666521055], res=[0.03492212073999923, -0.4402136296625283, 0.0, 0.0, 0.20202020202020154], res_norm=4.856e-01
2026-01-24 02:43:17,170 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,288 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:18,310 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,359 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:18,382 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,431 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:18,455 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,502 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:18,524 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,572 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:18,596 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,645 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:18,667 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,714 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:18,736 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,786 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:18,811 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,860 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:18,883 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:18,931 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:18,953 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:19,002 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:24,839 - WARNING - integration_test - Step 35: MPC solve failed
2026-01-24 02:43:24,839 - WARNING - integration_test -   Consecutive MPC failures: 12/20
2026-01-24 02:43:24,858 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:24,859 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:43:25,166 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:43:25,166 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:25,713 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:43:25,746 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=8.280)
2026-01-24 02:43:25,747 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:43:25,747 - INFO - integration_test - === Applying control at step 35 ===
2026-01-24 02:43:25,747 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.517243203873635}
2026-01-24 02:43:25,747 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:43:25,747 - INFO - integration_test -   Planner output success: False
2026-01-24 02:43:25,747 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.517243203873635}
2026-01-24 02:43:25,748 - INFO - integration_test - Step 35 completed in 10.704s
2026-01-24 02:43:25,837 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-24 02:43:25,855 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[6.0609317  5.52800784 0.66129829 0.60000003 8.34000002]
2026-01-24 02:43:25,856 - DEBUG - integration_test - Step 36: Using propagated spline 8.3400 (close to path, dist=0.061m, drift=0.146m)
2026-01-24 02:43:25,856 - DEBUG - integration_test -   Set spline state to 8.3400
2026-01-24 02:43:25,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:43:26,902 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(6.061, 5.528), path_start=(0.000, 0.000), dist=8.203m
2026-01-24 02:43:26,902 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-24 02:43:27,915 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 02:43:27,945 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 02:43:27,945 - INFO - integration_test - Warmstart k=0: x0=6.060931700758873 , y0=5.528007838466691 , psi0=0.6612982894860405 , v0=0.6000000277912385 , spline0=8.340000022710017 , a0=0.0 , w0=0.0
2026-01-24 02:43:27,946 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 02:43:27,947 - INFO - integration_test - Dyn residual k=0: pred=[6.108283436718377, 5.564856358587807, 0.6612982894860405, 0.6000000277912385, 8.40000002548914], ws=[6.392335477734625, 5.000921113112906, 0.6612982894860404, 0.6000000277912385, 7.945454570943685], res=[-0.28405204101624815, 0.5639352454749016, 1.1102230246251565e-16, 0.0, 0.45454545454545503], res_norm=7.780e-01
2026-01-24 02:43:27,948 - INFO - integration_test - Dyn residual k=1: pred=[6.439687213694129, 5.037769633234022, 0.6612982894860404, 0.6000000277912385, 8.005454573722808], ws=[5.3945866981741775, 6.0161691354570195, 0.6612982894860404, 0.6000000277912385, 7.601414169682404], res=[1.0451005155199518, -0.9783995022229979, 0.0, 0.0, 0.404040404040404], res_norm=1.488e+00
2026-01-24 02:43:27,949 - INFO - integration_test - Dyn residual k=2: pred=[5.441938434133681, 6.053017655578135, 0.6612982894860404, 0.6000000277912385, 7.661414172461528], ws=[5.30808698348124, 5.635538249594521, 0.6612982894860404, 0.6000000277912385, 7.2573737684211235], res=[0.13385145065244153, 0.417479405983614, 0.0, 0.0, 0.40404040404040487], res_norm=5.962e-01
2026-01-24 02:43:27,971 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,089 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:29,113 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,164 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:29,187 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,263 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:29,302 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,355 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:29,380 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,432 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:29,458 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,509 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 02:43:29,531 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,579 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:29,600 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,651 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:29,674 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,723 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:29,747 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,795 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:29,818 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 02:43:29,868 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 02:43:35,312 - WARNING - integration_test - Step 36: MPC solve failed
2026-01-24 02:43:35,312 - WARNING - integration_test -   Consecutive MPC failures: 13/20
2026-01-24 02:43:35,337 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:35,337 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 02:43:35,354 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 02:43:35,356 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:36,336 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:43:36,380 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=8.340)
2026-01-24 02:43:36,380 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 02:43:36,380 - INFO - integration_test - === Applying control at step 36 ===
2026-01-24 02:43:36,380 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.33142331973205863}
2026-01-24 02:43:36,380 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 02:43:36,380 - INFO - integration_test -   Planner output success: False
2026-01-24 02:43:36,380 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.33142331973205863}
2026-01-24 02:43:36,382 - INFO - integration_test - Step 36 completed in 10.527s
2026-01-24 02:43:36,467 - WARNING - integration_test - Test timeout reached (255.0s) at step 37. Terminating test early.
2026-01-24 02:43:36,470 - INFO - integration_test - Saving test results...
2026-01-24 02:43:36,471 - INFO - integration_test - Saved 38 vehicle states to test_outputs/20260124_023915_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-24 02:43:36,471 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_023915_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-24 02:43:36,471 - INFO - integration_test - Saved 48 states for obstacle 0 to test_outputs/20260124_023915_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-24 02:43:36,471 - INFO - integration_test - Saved 48 states for obstacle 1 to test_outputs/20260124_023915_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-24 02:43:36,472 - INFO - integration_test - Saved state history: 38 vehicle states, 2 obstacles
2026-01-24 02:43:36,472 - INFO - integration_test - Creating animation...
2026-01-24 02:43:36,519 - DEBUG - integration_test - Creating animation with 38 frames (range: 0 to 37)
2026-01-24 02:43:36,519 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:43:37,546 - INFO - integration_test - Frame 0: Safe Horizon module has 1862 scenarios after update
2026-01-24 02:43:37,546 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:43:37,546 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:43:37,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:37,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 02:43:37,900 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 02:43:37,901 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:37,960 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:43:37,967 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:43:37,968 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 02:43:38,972 - INFO - integration_test - Frame 0: Safe Horizon module has 1868 scenarios after update
2026-01-24 02:43:38,972 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 02:43:38,972 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:43:38,974 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:38,974 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:43:38,991 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:43:38,993 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:39,053 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 02:43:39,062 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 02:43:39,201 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 02:43:40,226 - INFO - integration_test - Frame 1: Safe Horizon module has 1867 scenarios after update
2026-01-24 02:43:40,226 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-24 02:43:40,226 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:43:40,228 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:40,228 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:43:40,571 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:43:40,573 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:40,620 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:40,627 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-24 02:43:40,723 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 02:43:41,669 - INFO - integration_test - Frame 2: Safe Horizon module has 1874 scenarios after update
2026-01-24 02:43:41,669 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-24 02:43:41,669 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 02:43:41,671 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:41,671 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1874 scenarios available
2026-01-24 02:43:41,687 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1874 trajectory groups with 18740 total points
2026-01-24 02:43:41,688 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:41,740 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:41,746 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-24 02:43:42,855 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:42,856 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 02:43:42,877 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 02:43:42,878 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:42,937 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:44,161 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:44,161 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:43:44,527 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:43:44,528 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:44,577 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:45,685 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:45,685 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1854 scenarios available
2026-01-24 02:43:45,704 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1854 trajectory groups with 18540 total points
2026-01-24 02:43:45,706 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:45,759 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:47,028 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:47,028 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:43:47,048 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:43:47,050 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:47,106 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:48,185 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:48,185 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1846 scenarios available
2026-01-24 02:43:48,516 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1846 trajectory groups with 18460 total points
2026-01-24 02:43:48,517 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:48,566 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:49,673 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:49,673 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:43:49,692 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:43:49,693 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:49,744 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:50,922 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:50,922 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:43:50,944 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:43:50,945 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:51,000 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:52,165 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:52,165 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1845 scenarios available
2026-01-24 02:43:52,529 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1845 trajectory groups with 18450 total points
2026-01-24 02:43:52,530 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:52,581 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:53,725 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:53,725 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 02:43:53,743 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 02:43:53,744 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:53,793 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:54,870 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:54,871 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 02:43:54,894 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 02:43:54,895 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:54,956 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:56,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:56,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:43:56,516 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:43:56,517 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:56,576 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:57,706 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:57,706 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:43:57,728 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:43:57,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:57,783 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:43:58,924 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:43:58,924 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:43:59,288 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:43:59,289 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:43:59,340 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:00,576 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:00,576 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1859 scenarios available
2026-01-24 02:44:00,596 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1859 trajectory groups with 18590 total points
2026-01-24 02:44:00,597 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:00,654 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:01,819 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:01,819 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 02:44:01,840 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 02:44:01,842 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:01,893 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:02,940 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:02,940 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:44:03,309 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:44:03,310 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:03,381 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:04,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:04,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 02:44:04,552 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 02:44:04,553 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:04,607 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:05,728 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:05,728 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:44:05,749 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:44:05,750 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:05,804 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:06,971 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:06,971 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 02:44:07,328 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 02:44:07,329 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:07,381 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:08,517 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:08,517 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:44:08,536 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:44:08,537 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:08,584 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:09,630 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:09,630 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 02:44:09,647 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 02:44:09,648 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:09,700 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:11,079 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:11,079 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1838 scenarios available
2026-01-24 02:44:11,097 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1838 trajectory groups with 18380 total points
2026-01-24 02:44:11,098 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:11,192 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:12,362 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:12,363 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 02:44:12,383 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 02:44:12,384 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:12,439 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:13,696 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:13,696 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1871 scenarios available
2026-01-24 02:44:14,060 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1871 trajectory groups with 18710 total points
2026-01-24 02:44:14,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:14,116 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:15,263 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:15,263 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 02:44:15,286 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 02:44:15,288 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:15,347 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:16,462 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:16,462 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 02:44:16,494 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 02:44:16,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:16,578 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:17,654 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:17,654 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1837 scenarios available
2026-01-24 02:44:17,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1837 trajectory groups with 18370 total points
2026-01-24 02:44:17,993 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:18,044 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:19,189 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:19,189 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 02:44:19,211 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 02:44:19,212 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:19,269 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:20,558 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:20,558 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1849 scenarios available
2026-01-24 02:44:20,579 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1849 trajectory groups with 18490 total points
2026-01-24 02:44:20,580 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:20,632 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:21,834 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:21,834 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:44:22,190 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:44:22,192 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:22,243 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:23,284 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:23,284 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 02:44:23,305 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 02:44:23,306 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:23,359 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:24,565 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:24,565 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:44:24,588 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:44:24,589 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:24,645 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:26,176 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:26,176 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1872 scenarios available
2026-01-24 02:44:26,198 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1872 trajectory groups with 18720 total points
2026-01-24 02:44:26,199 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:26,253 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:27,408 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:27,408 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 02:44:27,428 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 02:44:27,429 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:27,485 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:28,602 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 02:44:28,602 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 02:44:28,624 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 02:44:28,626 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 02:44:29,022 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 02:44:31,495 - INFO - integration_test - Saved animation with 38 frames at 10.00 fps to test_outputs/20260124_023915_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 3.80s, size: 631636 bytes)
2026-01-24 02:44:31,519 - INFO - integration_test - Animation created successfully
2026-01-24 02:44:31,520 - INFO - integration_test - Test completed successfully
