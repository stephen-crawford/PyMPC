2026-01-24 11:35:42,474 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-24 11:35:42,474 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-24 11:35:42,474 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-24 11:35:42,474 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-24 11:35:42,474 - INFO - integration_test - Creating objective module: contouring
2026-01-24 11:35:42,481 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-24 11:35:42,481 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-24 11:35:42,481 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-24 11:35:42,491 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-24 11:35:42,491 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-24 11:35:42,498 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-24 11:35:42,499 - INFO - integration_test - Created 2 constraint module(s)
2026-01-24 11:35:42,519 - INFO - integration_test - Setting solver on all modules...
2026-01-24 11:35:42,519 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-24 11:35:42,519 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-24 11:35:42,519 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-24 11:35:42,519 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-24 11:35:42,519 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-24 11:35:42,519 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-24 11:35:42,519 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-24 11:35:42,519 - INFO - integration_test - Obstacle 0: s=8.03, pos=(6.24, 5.59), lateral_offset=0.00m, vel=(0.47, 0.37)
2026-01-24 11:35:42,519 - INFO - integration_test - Obstacle 1: s=17.06, pos=(13.71, 10.71), lateral_offset=0.00m, vel=(-0.69, -0.41)
2026-01-24 11:35:42,520 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-24 11:35:42,520 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-24 11:35:42,520 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-24 11:35:42,520 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-24 11:35:42,520 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-24 11:35:42,521 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-24 11:35:42,521 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-24 11:35:42,521 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-24 11:35:42,521 - INFO - integration_test - Added spline variable: 0.0000
2026-01-24 11:35:42,521 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-24 11:35:42,521 - INFO - integration_test - Auto-calculated timeout: 180s for 100 steps
2026-01-24 11:35:42,521 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-24 11:35:42,522 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-24 11:35:42,522 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-24 11:35:42,522 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-24 11:35:42,523 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:35:43,888 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-24 11:35:43,888 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-24 11:35:44,899 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:35:44,927 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:35:44,927 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-24 11:35:44,927 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:35:44,928 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-24 11:35:44,929 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-24 11:35:44,930 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-24 11:35:44,945 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:45,913 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:45,935 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:45,988 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:46,025 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,091 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:46,114 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,161 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:46,185 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,234 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:46,256 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,305 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:46,328 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,377 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:46,401 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,451 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:46,474 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,525 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:46,547 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,597 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:46,620 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:46,671 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:47,841 - INFO - integration_test - Step 0: MPC solve successful
2026-01-24 11:35:48,041 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:35:48,042 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 11:35:48,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 11:35:48,116 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:35:48,201 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:35:48,212 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-24 11:35:48,212 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:35:48,212 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-24 11:35:48,212 - INFO - integration_test - === Applying control at step 0 ===
2026-01-24 11:35:48,212 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018953154, 'w': 0.7999999888823278}
2026-01-24 11:35:48,212 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:35:48,212 - INFO - integration_test -   Planner output success: True
2026-01-24 11:35:48,214 - INFO - integration_test - Step 0 completed in 5.693s
2026-01-24 11:35:48,282 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-24 11:35:48,283 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.08       1.2        0.12      ]
2026-01-24 11:35:48,284 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-24 11:35:48,284 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-24 11:35:48,284 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:35:49,274 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-24 11:35:49,274 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-24 11:35:50,338 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:35:50,367 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:35:50,367 - INFO - integration_test - Warmstart k=0: x0=0.10987737537921205 , y0=0.004530844995224344 , psi0=0.07999999888823278 , v0=1.2000000018953154 , spline0=0.12000000018953155 , a0=0.0 , w0=0.0
2026-01-24 11:35:50,367 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:35:50,368 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033511336, 0.014120608153686046, 0.07999999888823278, 1.2000000018953154, 0.2400000003790631], ws=[0.22949358033511336, 0.014120608153686046, 0.07999999888823295, 1.2000000018953154, 0.05292929293312185], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.18707070744594126], res_norm=1.871e-01
2026-01-24 11:35:50,369 - INFO - integration_test - Dyn residual k=1: pred=[0.34910978529101466, 0.023710371312147767, 0.07999999888823295, 1.2000000018953154, 0.1729292931226534], ws=[0.34910978529101466, 0.02371037131214777, 0.07999999888823295, 1.2000000018953154, 0.10828282829431504], res=[0.0, -3.469446951953614e-18, 0.0, 0.0, 0.06464646482833836], res_norm=6.465e-02
2026-01-24 11:35:50,370 - INFO - integration_test - Dyn residual k=2: pred=[0.46872599024691597, 0.03330013447060949, 0.07999999888823295, 1.2000000018953154, 0.2282828284838466], ws=[0.46872599024691597, 0.03330013447060949, 0.07999999888823295, 1.2000000018953154, 0.1660606060835796], res=[0.0, 0.0, 0.0, 0.0, 0.06222222240026701], res_norm=6.222e-02
2026-01-24 11:35:50,390 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:51,491 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:51,514 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:51,560 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:51,581 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:51,627 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:51,648 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:51,693 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:51,715 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:51,758 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:51,778 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:51,824 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:51,845 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:51,889 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:51,909 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:51,953 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:51,973 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:52,020 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:52,041 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:52,085 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:52,104 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:52,148 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:52,725 - INFO - integration_test - Step 1: MPC solve successful
2026-01-24 11:35:52,727 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:35:52,727 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 11:35:52,801 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 11:35:52,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:35:52,878 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:35:52,888 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-24 11:35:52,888 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:35:52,888 - INFO - integration_test - === Applying control at step 1 ===
2026-01-24 11:35:52,888 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001892516, 'w': 0.8000000027435963}
2026-01-24 11:35:52,888 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:35:52,888 - INFO - integration_test -   Planner output success: True
2026-01-24 11:35:52,890 - INFO - integration_test - Step 1 completed in 4.607s
2026-01-24 11:35:52,947 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-24 11:35:52,948 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-24 11:35:52,948 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-24 11:35:52,948 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-24 11:35:52,949 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:35:53,940 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-24 11:35:53,940 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-24 11:35:54,956 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:35:54,984 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:35:54,984 - INFO - integration_test - Warmstart k=0: x0=0.23889212818825312 , y0=0.020221621570595854 , psi0=0.15999999916259242 , v0=1.4000000037878315 , spline0=0.26000000056831474 , a0=0.0 , w0=0.0
2026-01-24 11:35:54,984 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:35:54,985 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394825346394, 0.04252617044119772, 0.15999999916259242, 1.4000000037878315, 0.40000000094709787], ws=[0.37710394825346394, 0.04252617044119772, 0.15999999916259222, 1.4000000037878315, 0.10909090911004238], res=[0.0, 0.0, 1.942890293094024e-16, 0.0, 0.2909090918370555], res_norm=2.909e-01
2026-01-24 11:35:54,986 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157683186748, 0.06483071931179955, 0.15999999916259222, 1.4000000037878315, 0.24909090948882553], ws=[0.5153157683186748, 0.06483071931179955, 0.15999999916259222, 1.4000000037878315, 0.1678787879189661], res=[0.0, 0.0, 0.0, 0.0, 0.08121212156985944], res_norm=8.121e-02
2026-01-24 11:35:54,987 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275883838856, 0.08713526818240139, 0.15999999916259222, 1.4000000037878315, 0.3078787882977493], ws=[0.6535275883838856, 0.08713526818240139, 0.15999999916259222, 1.4000000037878315, 0.45898989912764965], res=[0.0, 0.0, 0.0, 0.0, -0.15111111082990036], res_norm=1.511e-01
2026-01-24 11:35:55,007 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,115 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:56,139 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,188 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:56,214 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,263 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:56,285 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,332 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:56,355 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,406 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:56,430 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,478 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:56,500 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,549 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:56,571 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,625 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:56,666 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,734 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:35:56,757 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,807 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:56,831 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:35:56,879 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:35:57,459 - INFO - integration_test - Step 2: MPC solve successful
2026-01-24 11:35:57,462 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:35:57,462 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 11:35:57,539 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 11:35:57,540 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:35:57,625 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:35:57,636 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-24 11:35:57,636 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:35:57,636 - INFO - integration_test - === Applying control at step 2 ===
2026-01-24 11:35:57,636 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016046886, 'w': 0.799999980662666}
2026-01-24 11:35:57,636 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:35:57,636 - INFO - integration_test -   Planner output success: True
2026-01-24 11:35:57,638 - INFO - integration_test - Step 2 completed in 4.690s
2026-01-24 11:35:57,694 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-24 11:35:57,695 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-24 11:35:57,695 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-24 11:35:57,695 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-24 11:35:57,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:35:58,670 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-24 11:35:58,670 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-24 11:35:59,735 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:35:59,762 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:35:59,762 - INFO - integration_test - Warmstart k=0: x0=0.3858364357532553 , y0=0.050144716000141344 , psi0=0.239999997228859 , v0=1.60000000539252 , spline0=0.42000000110756674 , a0=0.0 , w0=0.0
2026-01-24 11:35:59,763 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:35:59,764 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505123587692, 0.08817713592599019, 0.239999997228859, 1.60000000539252, 0.5800000016468188], ws=[0.5412505123587692, 0.08817713592599019, 0.23999999722885912, 1.60000000539252, 0.1690909091408127], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.41090909250600605], res_norm=4.109e-01
2026-01-24 11:35:59,765 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645889642831, 0.12620955585183904, 0.23999999722885912, 1.60000000539252, 0.3290909096800647], ws=[0.6966645889642831, 0.12620955585183904, 0.23999999722885912, 1.60000000539252, 0.231919192007518], res=[0.0, 0.0, 0.0, 0.0, 0.0971717176725467], res_norm=9.717e-02
2026-01-24 11:35:59,766 - INFO - integration_test - Dyn residual k=2: pred=[0.852078665569797, 0.1642419757776879, 0.23999999722885912, 1.60000000539252, 0.39191919254677], ws=[0.852078665569797, 0.1642419757776879, 0.23999999722885912, 1.60000000539252, 0.2979797981174405], res=[0.0, 0.0, 0.0, 0.0, 0.09393939442932947], res_norm=9.394e-02
2026-01-24 11:35:59,784 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,006 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:01,032 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,083 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:01,110 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,163 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:01,187 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,250 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:01,276 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,324 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:01,346 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,391 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:01,415 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,463 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:01,485 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,533 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:01,555 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,601 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:01,626 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,671 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:01,692 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:01,741 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:02,362 - INFO - integration_test - Step 3: MPC solve successful
2026-01-24 11:36:02,366 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:02,366 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 11:36:02,379 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 11:36:02,380 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:02,494 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:02,511 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-24 11:36:02,511 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:02,511 - INFO - integration_test - === Applying control at step 3 ===
2026-01-24 11:36:02,511 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000180116677, 'w': 0.7999999946815842}
2026-01-24 11:36:02,511 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:02,511 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:02,513 - INFO - integration_test - Step 3 completed in 4.819s
2026-01-24 11:36:02,594 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-24 11:36:02,595 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-24 11:36:02,596 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-24 11:36:02,596 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-24 11:36:02,596 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:03,631 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-24 11:36:03,631 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-24 11:36:04,686 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:04,716 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:04,716 - INFO - integration_test - Warmstart k=0: x0=0.5491354613818367 , y0=0.09724075603900159 , psi0=0.3199999966970174 , v0=1.8000000071936868 , spline0=0.6000000018269355 , a0=0.0 , w0=0.0
2026-01-24 11:36:04,716 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:04,717 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978375065477, 0.15386273661183666, 0.3199999966970174, 1.8000000071936868, 0.7800000025463042], ws=[0.7199978375065477, 0.15386273661183666, 0.3199999966970175, 1.8000000071936868, 0.2335353536382345], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5464646489080697], res_norm=5.465e-01
2026-01-24 11:36:04,718 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602136312587, 0.21048471718467177, 0.3199999966970175, 1.8000000071936868, 0.4135353543576032], ws=[0.8908602136312587, 0.21048471718467177, 0.3199999966970175, 1.8000000071936868, 0.301010101175034], res=[0.0, 0.0, 0.0, 0.0, 0.11252525318256917], res_norm=1.125e-01
2026-01-24 11:36:04,719 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225897559697, 0.26710669775750684, 0.3199999966970175, 1.8000000071936868, 0.48101010189440274], ws=[1.0617225897559697, 0.26710669775750684, 0.3199999966970175, 1.8000000071936868, 0.37212121236272977], res=[0.0, 0.0, 0.0, 0.0, 0.10888888953167297], res_norm=1.089e-01
2026-01-24 11:36:04,737 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:05,733 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:05,754 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:05,823 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:05,859 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:05,914 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:05,938 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:05,986 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:06,007 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:06,054 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:06,076 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:06,122 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:06,142 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:06,190 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:06,211 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:06,260 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:06,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:06,328 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:06,349 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:06,395 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:06,417 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:06,461 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:07,041 - INFO - integration_test - Step 4: MPC solve successful
2026-01-24 11:36:07,045 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:07,045 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 11:36:07,059 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 11:36:07,060 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:07,166 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:07,177 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-24 11:36:07,178 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:07,178 - INFO - integration_test - === Applying control at step 4 ===
2026-01-24 11:36:07,178 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000115824847, 'w': 0.7999999437282675}
2026-01-24 11:36:07,178 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:07,178 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:07,179 - INFO - integration_test - Step 4 completed in 4.584s
2026-01-24 11:36:07,236 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-24 11:36:07,237 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.39999999 2.00000001 0.8       ]
2026-01-24 11:36:07,238 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-24 11:36:07,238 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-24 11:36:07,238 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:08,318 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-24 11:36:08,318 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-24 11:36:09,361 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:09,388 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:09,388 - INFO - integration_test - Warmstart k=0: x0=0.7268614892039525 , y0=0.16427976633041674 , psi0=0.39999999106984413 , v0=2.000000008351935 , spline0=0.800000002662129 , a0=0.0 , w0=0.0
2026-01-24 11:36:09,389 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:09,390 - INFO - integration_test - Dyn residual k=0: pred=[0.911073689469307, 0.24216343347234287, 0.39999999106984413, 2.000000008351935, 1.0000000034973224], ws=[0.911073689469307, 0.24216343347234287, 0.3999999910698442, 2.000000008351935, 0.36363636384832254], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.6363636396489999], res_norm=6.364e-01
2026-01-24 11:36:09,390 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858897346616, 0.320047100614269, 0.3999999910698442, 2.000000008351935, 0.5636363646835161], ws=[1.0952858897346616, 0.320047100614269, 0.3999999910698442, 2.000000008351935, 0.8767676773803558], res=[0.0, 0.0, 0.0, 0.0, -0.3131313126968397], res_norm=3.131e-01
2026-01-24 11:36:09,391 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980900000161, 0.3979307677561951, 0.3999999910698442, 2.000000008351935, 1.0767676782155493], ws=[1.2794980900000161, 0.3979307677561951, 0.3999999910698442, 2.000000008351935, 0.9696969704799558], res=[0.0, 0.0, 0.0, 0.0, 0.10707070773559346], res_norm=1.071e-01
2026-01-24 11:36:09,409 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:10,442 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:10,464 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:10,516 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:10,540 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:10,586 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:10,609 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:10,659 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:10,682 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:10,731 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:10,753 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:10,802 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:10,828 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:10,879 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:10,901 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:10,950 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:10,973 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:11,026 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:11,066 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:11,135 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:11,158 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:11,206 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:11,896 - INFO - integration_test - Step 5: MPC solve successful
2026-01-24 11:36:11,903 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:11,903 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1844 scenarios available
2026-01-24 11:36:11,923 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1844 trajectory groups with 18440 total points
2026-01-24 11:36:11,924 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:12,152 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:12,163 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-24 11:36:12,163 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:12,163 - INFO - integration_test - === Applying control at step 5 ===
2026-01-24 11:36:12,163 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019539951, 'w': 0.800000007164527}
2026-01-24 11:36:12,163 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:12,163 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:12,165 - INFO - integration_test - Step 5 completed in 4.928s
2026-01-24 11:36:12,226 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-24 11:36:12,227 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-24 11:36:12,228 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-24 11:36:12,228 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-24 11:36:12,229 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:13,185 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-24 11:36:13,185 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-24 11:36:14,096 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:14,123 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:14,123 - INFO - integration_test - Warmstart k=0: x0=0.9167519039661574 , y0=0.2538238047244863 , psi0=0.4799999917862968 , v0=2.20000001030593 , spline0=1.0200000036927221 , a0=0.0 , w0=0.0
2026-01-24 11:36:14,123 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:14,124 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907887261724, 0.3554152222167061, 0.4799999917862968, 2.20000001030593, 1.2400000047233153], ws=[1.1118907887261724, 0.3554152222167061, 0.47999999178629693, 2.20000001030593, 0.6933333338581461], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5466666708651692], res_norm=5.467e-01
2026-01-24 11:36:14,125 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296734861875, 0.45700663970892585, 0.47999999178629693, 2.20000001030593, 0.9133333348887391], ws=[1.3070296734861875, 0.45700663970892585, 0.47999999178629693, 2.20000001030593, 1.2397979809022652], res=[0.0, 0.0, 0.0, 0.0, -0.3264646460135261], res_norm=3.265e-01
2026-01-24 11:36:14,126 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685582462025, 0.5585980572011456, 0.47999999178629693, 2.20000001030593, 1.4597979819328581], ws=[1.5021685582462025, 0.5585980572011456, 0.47999999178629693, 2.20000001030593, 1.0795959606924448], res=[0.0, 0.0, 0.0, 0.0, 0.38020202124041336], res_norm=3.802e-01
2026-01-24 11:36:14,142 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,206 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:15,230 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,281 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:15,306 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,358 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:15,382 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,435 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:15,458 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,514 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:15,539 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,594 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:15,620 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,672 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:15,694 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,744 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:15,768 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,821 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:15,846 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,895 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:15,918 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:15,966 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:16,733 - INFO - integration_test - Step 6: MPC solve successful
2026-01-24 11:36:16,738 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:16,738 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 11:36:16,857 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 11:36:16,858 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:16,994 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:17,008 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-24 11:36:17,008 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:17,008 - INFO - integration_test - === Applying control at step 6 ===
2026-01-24 11:36:17,009 - INFO - integration_test -   Control dict from planner: {'a': 2.000000017356711, 'w': 0.7999999743316165}
2026-01-24 11:36:17,009 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:17,009 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:17,010 - INFO - integration_test - Step 6 completed in 4.783s
2026-01-24 11:36:17,073 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-24 11:36:17,080 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819144 0.55999999 2.40000001 1.26      ]
2026-01-24 11:36:17,081 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-24 11:36:17,081 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-24 11:36:17,081 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:18,138 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-24 11:36:18,138 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-24 11:36:19,180 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:19,216 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:19,217 - INFO - integration_test - Warmstart k=0: x0=1.1162308651863904 , y0=0.36819144220704314 , psi0=0.5599999892194585 , v0=2.400000012041601 , spline0=1.2600000048968822 , a0=0.0 , w0=0.0
2026-01-24 11:36:19,217 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:19,218 - INFO - integration_test - Dyn residual k=0: pred=[1.319572094224195, 0.49567612815555984, 0.5599999892194585, 2.400000012041601, 1.5000000061010423], ws=[1.319572094224195, 0.49567612815555984, 0.5599999892194587, 2.400000012041601, 1.2474747486456548], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.25252525745538756], res_norm=2.525e-01
2026-01-24 11:36:19,220 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133232619998, 0.6231608141040765, 0.5599999892194587, 2.400000012041601, 1.4874747498498149], ws=[1.5229133232619998, 0.6231608141040765, 0.5599999892194587, 2.400000012041601, 1.3616161630919599], res=[0.0, 0.0, 0.0, 0.0, 0.125858586757855], res_norm=1.259e-01
2026-01-24 11:36:19,221 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545522998045, 0.7506455000525932, 0.5599999892194587, 2.400000012041601, 1.60161616429612], ws=[1.7262545522998045, 0.7506455000525932, 0.5599999892194587, 2.400000012041601, 1.1985858600470622], res=[0.0, 0.0, 0.0, 0.0, 0.4030303042490577], res_norm=4.030e-01
2026-01-24 11:36:19,250 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,317 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:20,337 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,383 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:20,405 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,455 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:20,477 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,524 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:20,545 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,589 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:20,611 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,657 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:20,680 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,727 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:20,747 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,793 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:20,816 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,862 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:20,886 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:20,933 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:20,954 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:21,001 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:21,678 - INFO - integration_test - Step 7: MPC solve successful
2026-01-24 11:36:21,686 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:21,686 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 11:36:21,806 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 11:36:21,807 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:21,951 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:21,966 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-24 11:36:21,967 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:21,967 - INFO - integration_test - === Applying control at step 7 ===
2026-01-24 11:36:21,967 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019365066, 'w': 0.7999999988849902}
2026-01-24 11:36:21,967 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:21,967 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:21,969 - INFO - integration_test - Step 7 completed in 4.889s
2026-01-24 11:36:22,034 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-24 11:36:22,035 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243449 0.50942444 0.63999999 2.60000001 1.52000001]
2026-01-24 11:36:22,036 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-24 11:36:22,036 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-24 11:36:22,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:23,063 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-24 11:36:23,063 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-24 11:36:24,088 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:24,118 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:24,118 - INFO - integration_test - Warmstart k=0: x0=1.322434490890294 , y0=0.5094244366496846 , psi0=0.6399999891079575 , v0=2.6000000139781076 , spline0=1.520000006294693 , a0=0.0 , w0=0.0
2026-01-24 11:36:24,118 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:24,119 - INFO - integration_test - Dyn residual k=0: pred=[1.5309793907526046, 0.6646952499671929, 0.6399999891079575, 2.6000000139781076, 1.7800000076925038], ws=[1.5309793907526046, 0.6646952499671929, 0.6399999891079577, 2.6000000139781076, 1.369696971251011], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.4103030364414928], res_norm=4.103e-01
2026-01-24 11:36:24,120 - INFO - integration_test - Dyn residual k=1: pred=[1.739524290614915, 0.8199660632847012, 0.6399999891079577, 2.6000000139781076, 1.6296969726488217], ws=[1.739524290614915, 0.8199660632847012, 0.6399999891079577, 2.6000000139781076, 1.7066666688703793], res=[0.0, 0.0, 0.0, 0.0, -0.07696969622155758], res_norm=7.697e-02
2026-01-24 11:36:24,121 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691904772256, 0.9752368766022095, 0.6399999891079577, 2.6000000139781076, 1.96666667026819], ws=[1.9480691904772256, 0.9752368766022095, 0.6399999891079577, 2.6000000139781076, 2.0646464676128033], res=[0.0, 0.0, 0.0, 0.0, -0.09797979734461326], res_norm=9.798e-02
2026-01-24 11:36:24,140 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,249 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:25,272 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,321 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:25,344 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,393 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:25,415 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,464 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:25,485 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,536 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:25,559 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,606 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:25,628 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,678 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:25,700 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,749 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:25,772 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,820 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:25,844 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,891 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:25,911 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:25,956 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:26,586 - INFO - integration_test - Step 8: MPC solve successful
2026-01-24 11:36:26,590 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:26,590 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 11:36:26,715 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 11:36:26,715 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:26,869 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:26,887 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-24 11:36:26,887 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:26,887 - INFO - integration_test - === Applying control at step 8 ===
2026-01-24 11:36:26,887 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019989272, 'w': 0.8000000096600578}
2026-01-24 11:36:26,888 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:26,888 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:26,889 - INFO - integration_test - Step 8 completed in 4.854s
2026-01-24 11:36:26,956 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-24 11:36:26,957 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223933 0.67925693 0.71999999 2.80000002 1.80000001]
2026-01-24 11:36:26,958 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-24 11:36:26,958 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-24 11:36:26,958 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:28,075 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-24 11:36:28,075 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-24 11:36:29,085 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:29,114 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:29,114 - INFO - integration_test - Warmstart k=0: x0=1.532239333395919 , y0=0.6792569335495697 , psi0=0.7199999900739633 , v0=2.8000000159770346 , spline0=1.8000000078923966 , a0=0.0 , w0=0.0
2026-01-24 11:36:29,114 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:29,115 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449405891537, 0.863884640665597, 0.7199999900739633, 2.8000000159770346, 2.0800000094901], ws=[1.7427449405891537, 0.863884640665597, 0.7199999900739633, 2.8000000159770346, 1.7163636386642664], res=[0.0, 0.0, 0.0, 0.0, 0.36363637082583344], res_norm=3.636e-01
2026-01-24 11:36:29,116 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505477823885, 1.0485123477816243, 0.7199999900739633, 2.8000000159770346, 1.99636364026197], ws=[1.9532505477823885, 1.0485123477816243, 0.7199999900739633, 2.8000000159770346, 2.081616164752106], res=[0.0, 0.0, 0.0, 0.0, -0.0852525244901361], res_norm=8.525e-02
2026-01-24 11:36:29,117 - INFO - integration_test - Dyn residual k=2: pred=[2.1637561549756232, 1.2331400548976517, 0.7199999900739633, 2.8000000159770346, 2.3616161663498096], ws=[2.1637561549756232, 1.2331400548976517, 0.7199999900739633, 2.8000000159770346, 1.92929293249634], res=[0.0, 0.0, 0.0, 0.0, 0.4323232338534697], res_norm=4.323e-01
2026-01-24 11:36:29,134 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,381 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:30,404 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,455 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:30,480 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,533 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:30,557 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,611 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:30,635 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,689 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:30,712 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,767 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:30,791 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,848 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:30,873 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,924 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:30,947 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:30,996 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:31,020 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:31,070 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:31,093 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:31,142 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:31,798 - INFO - integration_test - Step 9: MPC solve successful
2026-01-24 11:36:31,804 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:31,804 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 11:36:31,818 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 11:36:31,819 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:32,013 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:32,029 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-24 11:36:32,029 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:32,029 - INFO - integration_test - === Applying control at step 9 ===
2026-01-24 11:36:32,029 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019995847, 'w': 0.8000000098834489}
2026-01-24 11:36:32,029 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:32,029 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:32,031 - INFO - integration_test - Step 9 completed in 5.074s
2026-01-24 11:36:32,102 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-24 11:36:32,104 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.7422939  0.8790875  0.79999999 3.00000002 2.10000001]
2026-01-24 11:36:32,104 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-24 11:36:32,104 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-24 11:36:32,105 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:33,112 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-24 11:36:33,112 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-24 11:36:34,230 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:34,257 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:34,257 - INFO - integration_test - Warmstart k=0: x0=1.7422939014113124 , y0=0.8790875013634829 , psi0=0.7999999910623082 , v0=3.0000000179766193 , spline0=2.1000000096900586 , a0=0.0 , w0=0.0
2026-01-24 11:36:34,257 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:34,258 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059173913574, 1.0942943280548185, 0.7999999910623082, 3.0000000179766193, 2.4000000114877205], ws=[1.9513059161389144, 1.0942943267652547, 0.7999999910623083, 3.0, 2.0929292956699155], res=[1.252443038168849e-09, 1.289563789086401e-09, -1.1102230246251565e-16, 1.7976619304249652e-08, 0.307070715817805], res_norm=3.071e-01
2026-01-24 11:36:34,259 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179308665164, 1.3095011521670266, 0.7999999910623083, 3.0, 2.3929292956699157], ws=[2.1603179308665164, 1.3095011521670266, 0.7999999910623083, 3.0, 2.4888888920210293], res=[0.0, 0.0, 0.0, 0.0, -0.09595959635111351], res_norm=9.596e-02
2026-01-24 11:36:34,260 - INFO - integration_test - Dyn residual k=2: pred=[2.369329945594118, 1.5247079775687984, 0.7999999910623083, 3.0, 2.7888888920210295], ws=[2.369329945594118, 1.5247079775687984, 0.7999999910623083, 3.0, 2.3434343462728453], res=[0.0, 0.0, 0.0, 0.0, 0.4454545457481842], res_norm=4.455e-01
2026-01-24 11:36:34,277 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,245 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:35,266 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,312 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:35,333 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,378 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:35,398 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,445 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:35,466 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,515 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:35,536 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,582 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:35,602 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,654 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:35,674 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,718 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:35,739 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,782 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:35,802 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,847 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:35,869 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:35,917 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:36,616 - INFO - integration_test - Step 10: MPC solve successful
2026-01-24 11:36:36,622 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:36,622 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 11:36:36,637 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 11:36:36,638 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:36,902 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:36,918 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-24 11:36:36,918 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:36,918 - INFO - integration_test - === Applying control at step 10 ===
2026-01-24 11:36:36,918 - INFO - integration_test -   Control dict from planner: {'a': 1.2023025510986018e-07, 'w': 0.8000000098312859}
2026-01-24 11:36:36,918 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:36,918 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:36,920 - INFO - integration_test - Step 10 completed in 4.816s
2026-01-24 11:36:36,987 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-24 11:36:36,989 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247936 1.10242087 0.87999999 3.00000003 2.40000001]
2026-01-24 11:36:36,989 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-24 11:36:36,989 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-24 11:36:36,990 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:38,138 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-24 11:36:38,138 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-24 11:36:39,129 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:39,157 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:39,157 - INFO - integration_test - Warmstart k=0: x0=1.942479362736576 , y0=1.1024208739464556 , psi0=0.8799999920454369 , v0=3.000000029999645 , spline0=2.400000012690023 , a0=0.0 , w0=0.0
2026-01-24 11:36:39,157 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:39,158 - INFO - integration_test - Dyn residual k=0: pred=[2.133624709746848, 1.333642538407858, 0.8799999920454369, 3.000000029999645, 2.7000000156899877], ws=[2.133624707835417, 1.3336425360956687, 0.8799999920454367, 3.0, 2.4888888929907145], res=[1.9114310134682455e-09, 2.312189328890213e-09, 2.220446049250313e-16, 2.99996449903972e-08, 0.21111112269927323], res_norm=2.111e-01
2026-01-24 11:36:39,159 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700529342588, 1.5648641982448819, 0.8799999920454367, 3.0, 2.7888888929907143], ws=[2.3247700529342588, 1.5648641982448819, 0.8799999920454367, 3.0, 2.3434343471516232], res=[0.0, 0.0, 0.0, 0.0, 0.44545454583909105], res_norm=4.455e-01
2026-01-24 11:36:39,160 - INFO - integration_test - Dyn residual k=2: pred=[2.5159153980331004, 1.796085860394095, 0.8799999920454367, 3.0, 2.643434347151623], ws=[2.5159153980331004, 1.796085860394095, 0.8799999920454367, 3.0, 2.9343434388298064], res=[0.0, 0.0, 0.0, 0.0, -0.29090909167818335], res_norm=2.909e-01
2026-01-24 11:36:39,176 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,281 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:40,304 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,355 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:40,379 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,430 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:40,453 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,503 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:40,529 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,579 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:40,602 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,651 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:40,675 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,725 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:40,747 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,794 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:40,815 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,863 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:40,886 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:40,934 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:40,955 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:41,002 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:42,782 - INFO - integration_test - Step 11: MPC solve successful
2026-01-24 11:36:42,789 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:42,789 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 11:36:42,803 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 11:36:42,804 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:42,982 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:42,995 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-24 11:36:42,996 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:42,996 - INFO - integration_test - === Applying control at step 11 ===
2026-01-24 11:36:42,996 - INFO - integration_test -   Control dict from planner: {'a': -1.9452085025427742e-07, 'w': 0.044697347670291196}
2026-01-24 11:36:42,996 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:42,996 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:42,997 - INFO - integration_test - Step 11 completed in 6.009s
2026-01-24 11:36:43,047 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-24 11:36:43,052 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13310732 1.33406895 0.88446973 3.00000001 2.70000001]
2026-01-24 11:36:43,053 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-24 11:36:43,053 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-24 11:36:43,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:44,231 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-24 11:36:44,231 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-24 11:36:45,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:45,280 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:45,280 - INFO - integration_test - Warmstart k=0: x0=2.1331073237669695 , y0=1.3340689515360764 , psi0=0.884469726812466 , v0=3.00000001054756 , spline0=2.7000000137447793 , a0=0.0 , w0=0.0
2026-01-24 11:36:45,280 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:45,282 - INFO - integration_test - Dyn residual k=0: pred=[2.3232172640750868, 1.5661426709204513, 0.884469726812466, 3.00000001054756, 3.0000000147995354], ws=[2.3232172634066885, 1.5661426701045142, 0.8844697268124664, 3.0, 2.343434347460592], res=[6.683982256561194e-10, 8.15937095666186e-10, -3.3306690738754696e-16, 1.0547560158613578e-08, 0.6565656673389433], res_norm=6.566e-01
2026-01-24 11:36:45,283 - INFO - integration_test - Dyn residual k=1: pred=[2.513327203046407, 1.798216388672952, 0.8844697268124664, 3.0, 2.643434347460592], ws=[2.513327203046407, 1.798216388672952, 0.8844697268124664, 3.0, 2.9343434392026997], res=[0.0, 0.0, 0.0, 0.0, -0.2909090917421078], res_norm=2.909e-01
2026-01-24 11:36:45,283 - INFO - integration_test - Dyn residual k=2: pred=[2.7034371426861257, 2.03029010724139, 0.8844697268124664, 3.0, 3.2343434392027], ws=[2.7034371426861257, 2.03029010724139, 0.8844697268124664, 3.0, 3.301010106285875], res=[0.0, 0.0, 0.0, 0.0, -0.06666666708317504], res_norm=6.667e-02
2026-01-24 11:36:45,302 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:46,465 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:46,491 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:46,541 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:46,563 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:46,609 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:46,631 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:46,682 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:46,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:46,754 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:46,776 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:46,825 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:46,846 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:46,900 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:46,925 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:46,974 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:46,996 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:47,045 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:47,070 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:47,120 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:47,141 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:47,191 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:47,931 - INFO - integration_test - Step 12: MPC solve successful
2026-01-24 11:36:47,938 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:47,939 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 11:36:47,953 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 11:36:47,955 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:48,210 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:48,229 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-24 11:36:48,229 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:48,230 - INFO - integration_test - === Applying control at step 12 ===
2026-01-24 11:36:48,230 - INFO - integration_test -   Control dict from planner: {'a': 1.9331725005695486e-07, 'w': -0.2100013815658739}
2026-01-24 11:36:48,230 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:48,230 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:48,231 - INFO - integration_test - Step 12 completed in 5.179s
2026-01-24 11:36:48,295 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-24 11:36:48,296 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32563999 1.56412952 0.86346959 3.00000003 3.00000002]
2026-01-24 11:36:48,296 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-24 11:36:48,296 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-24 11:36:48,297 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:49,392 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.326, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-24 11:36:49,392 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-24 11:36:50,339 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:50,380 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:50,380 - INFO - integration_test - Warmstart k=0: x0=2.3256399922875532 , y0=1.5641295202617072 , psi0=0.8634695886558786 , v0=3.0000000298792853 , spline0=3.0000000167327077 , a0=0.0 , w0=0.0
2026-01-24 11:36:50,380 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:50,382 - INFO - integration_test - Dyn residual k=0: pred=[2.5205812375636287, 1.7921600284902557, 0.8634695886558786, 3.0000000298792853, 3.300000019720636], ws=[2.5205812356220605, 1.7921600262191262, 0.863469588655879, 3.0, 2.934343440259038], res=[1.9415682395163003e-09, 2.271129506681291e-09, -3.3306690738754696e-16, 2.987928526820838e-08, 0.36565657946159824], res_norm=3.657e-01
2026-01-24 11:36:50,383 - INFO - integration_test - Dyn residual k=1: pred=[2.7155224789565673, 2.0201905321765454, 0.863469588655879, 3.0, 3.234343440259038], ws=[2.7155224789565673, 2.0201905321765454, 0.863469588655879, 3.0, 3.3010101074327567], res=[0.0, 0.0, 0.0, 0.0, -0.06666666717371861], res_norm=6.667e-02
2026-01-24 11:36:50,384 - INFO - integration_test - Dyn residual k=2: pred=[2.910463722291074, 2.2482210381339645, 0.863469588655879, 3.0, 3.6010101074327565], ws=[2.910463722291074, 2.2482210381339645, 0.863469588655879, 3.0, 3.685858592788293], res=[0.0, 0.0, 0.0, 0.0, -0.08484848535553668], res_norm=8.485e-02
2026-01-24 11:36:50,409 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:51,553 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:51,578 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:51,628 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:51,653 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:51,706 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:51,730 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:51,780 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:51,806 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:51,856 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:51,881 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:51,938 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:51,961 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:52,015 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:52,038 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:52,090 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:52,115 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:52,166 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:52,191 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:52,241 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:52,265 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:52,324 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:53,185 - INFO - integration_test - Step 13: MPC solve successful
2026-01-24 11:36:53,192 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:53,193 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 11:36:53,209 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 11:36:53,210 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:53,654 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:53,671 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-24 11:36:53,672 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:53,672 - INFO - integration_test - === Applying control at step 13 ===
2026-01-24 11:36:53,672 - INFO - integration_test -   Control dict from planner: {'a': 1.2060248876107728e-09, 'w': -0.1418443426372029}
2026-01-24 11:36:53,672 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:53,672 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:53,674 - INFO - integration_test - Step 13 completed in 5.378s
2026-01-24 11:36:53,741 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-24 11:36:53,742 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52219192 1.79076984 0.84928515 3.00000003 3.30000002]
2026-01-24 11:36:53,743 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-24 11:36:53,743 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-24 11:36:53,744 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:54,765 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-24 11:36:54,765 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-24 11:36:55,702 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:36:55,731 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:36:55,731 - INFO - integration_test - Warmstart k=0: x0=2.5221919154273555 , y0=1.7907698395624114 , psi0=0.8492851543921583 , v0=3.000000029999888 , spline0=3.3000000197326966 , a0=0.0 , w0=0.0
2026-01-24 11:36:55,731 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:36:55,732 - INFO - integration_test - Dyn residual k=0: pred=[2.7203479254219167, 2.016012369966926, 0.8492851543921583, 3.000000029999888, 3.6000000227326856], ws=[2.720347923440364, 2.016012367714509, 0.8492851543921582, 3.0, 3.3010101085842676], res=[1.9815526997035704e-09, 2.2524169196458388e-09, 1.1102230246251565e-16, 2.999988790719499e-08, 0.298989914148418], res_norm=2.990e-01
2026-01-24 11:36:55,733 - INFO - integration_test - Dyn residual k=1: pred=[2.9185039314533725, 2.2412548958666068, 0.8492851543921582, 3.0, 3.6010101085842674], ws=[2.9185039314533725, 2.2412548958666068, 0.8492851543921582, 3.0, 3.685858594030713], res=[0.0, 0.0, 0.0, 0.0, -0.08484848544644574], res_norm=8.485e-02
2026-01-24 11:36:55,734 - INFO - integration_test - Dyn residual k=2: pred=[3.116659939466381, 2.4664974240187045, 0.8492851543921582, 3.0, 3.985858594030713], ws=[3.116659939466381, 2.4664974240187045, 0.8492851543921582, 3.0, 3.810101018273137], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 11:36:55,752 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:56,888 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:56,913 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:56,967 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:56,992 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,044 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:57,081 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,161 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:57,186 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,240 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:57,262 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,314 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:57,337 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,391 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:57,414 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,465 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:57,488 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,542 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:36:57,564 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,615 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:57,639 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:36:57,688 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:36:59,096 - INFO - integration_test - Step 14: MPC solve successful
2026-01-24 11:36:59,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:36:59,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 11:36:59,118 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 11:36:59,119 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:36:59,368 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:36:59,385 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-24 11:36:59,385 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:36:59,385 - INFO - integration_test - === Applying control at step 14 ===
2026-01-24 11:36:59,385 - INFO - integration_test -   Control dict from planner: {'a': -4.4693342213958595e-10, 'w': -0.1551182435676691}
2026-01-24 11:36:59,385 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:36:59,385 - INFO - integration_test -   Planner output success: True
2026-01-24 11:36:59,387 - INFO - integration_test - Step 14 completed in 5.644s
2026-01-24 11:36:59,455 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-24 11:36:59,458 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72208691 2.01446649 0.83377333 3.00000003 3.60000002]
2026-01-24 11:36:59,459 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-24 11:36:59,459 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-24 11:36:59,459 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:00,540 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.014), path_start=(0.000, 0.000), dist=3.386m
2026-01-24 11:37:00,540 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-24 11:37:01,770 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:01,797 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:01,797 - INFO - integration_test - Warmstart k=0: x0=2.722086905168611 , y0=2.0144664874314415 , psi0=0.8337733300353914 , v0=3.0000000299551948 , spline0=3.6000000227282163 , a0=0.0 , w0=0.0
2026-01-24 11:37:01,797 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:01,798 - INFO - integration_test - Dyn residual k=0: pred=[2.9237128582710668, 2.2366082818620217, 0.8337733300353914, 3.0000000299551948, 3.900000025723736], ws=[2.9237128562578185, 2.2366082796439217, 0.8337733300353913, 3.0, 3.6858585952712812], res=[2.013248234788989e-09, 2.218099925954675e-09, 1.1102230246251565e-16, 2.995519476911568e-08, 0.2141414304524547], res_norm=2.141e-01
2026-01-24 11:37:01,799 - INFO - integration_test - Dyn residual k=1: pred=[3.125338807347026, 2.4587500718564015, 0.8337733300353913, 3.0, 3.9858585952712815], ws=[3.125338807347026, 2.458750071856402, 0.8337733300353913, 3.0, 3.8101010195137053], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, 0.17575757575757622], res_norm=1.758e-01
2026-01-24 11:37:01,800 - INFO - integration_test - Dyn residual k=2: pred=[3.326964758436233, 2.6808918640688817, 0.8337733300353913, 3.0, 4.1101010195137055], ws=[3.326964758436233, 2.680891864068882, 0.8337733300353913, 3.0, 3.9343434437561298], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 11:37:01,816 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:02,831 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:02,853 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:02,908 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:02,945 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,009 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:03,032 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,081 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:03,103 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,151 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:03,172 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,218 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:03,239 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,284 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:03,306 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,353 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:03,373 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,421 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:03,441 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,488 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:03,509 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:03,554 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:04,383 - INFO - integration_test - Step 15: MPC solve successful
2026-01-24 11:37:04,394 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:37:04,394 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 11:37:04,410 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 11:37:04,411 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:37:04,622 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:37:04,637 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-24 11:37:04,637 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:37:04,637 - INFO - integration_test - === Applying control at step 15 ===
2026-01-24 11:37:04,637 - INFO - integration_test -   Control dict from planner: {'a': 3.934351056177561e-10, 'w': -0.1225174310968184}
2026-01-24 11:37:04,637 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:37:04,637 - INFO - integration_test -   Planner output success: True
2026-01-24 11:37:04,639 - INFO - integration_test - Step 15 completed in 5.181s
2026-01-24 11:37:04,693 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-24 11:37:04,695 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92506861 2.23536761 0.82152159 3.00000003 3.90000003]
2026-01-24 11:37:04,695 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.418m, drift=0.213m)
2026-01-24 11:37:04,695 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-24 11:37:04,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:05,750 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.925, 2.235), path_start=(0.000, 0.000), dist=3.681m
2026-01-24 11:37:05,750 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-24 11:37:06,815 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:06,843 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:06,843 - INFO - integration_test - Warmstart k=0: x0=2.9250686092051805 , y0=2.2353676052259246 , psi0=0.8215215869257096 , v0=3.0000000299945384 , spline0=3.90000002572767 , a0=0.0 , w0=0.0
2026-01-24 11:37:06,843 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:06,844 - INFO - integration_test - Dyn residual k=0: pred=[3.1294009860581364, 2.4550225199656, 0.8215215869257096, 3.0000000299945384, 4.200000028727124], ws=[3.1294009840151844, 2.4550225177694505, 0.8215215869257095, 3.0, 3.8101010207559036], res=[2.04295202976823e-09, 2.1961494844902063e-09, 1.1102230246251565e-16, 2.9994538408573135e-08, 0.38989900797122035], res_norm=3.899e-01
2026-01-24 11:37:06,845 - INFO - integration_test - Dyn residual k=1: pred=[3.3337333588251883, 2.6746774303129763, 0.8215215869257095, 3.0, 4.110101020755904], ws=[3.3337333588251883, 2.6746774303129763, 0.8215215869257095, 3.0, 3.9343434449983277], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757622], res_norm=1.758e-01
2026-01-24 11:37:06,846 - INFO - integration_test - Dyn residual k=2: pred=[3.538065733635192, 2.894332342856502, 0.8215215869257095, 3.0, 4.234343444998328], ws=[3.538065733635192, 2.894332342856502, 0.8215215869257095, 3.0, 4.058585869240752], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 11:37:06,863 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:07,895 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:07,918 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:07,970 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:07,994 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,044 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:08,068 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,121 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:08,148 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,198 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:08,223 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,270 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:08,296 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,345 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:08,368 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,417 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:08,439 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,488 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:08,513 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,560 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:08,581 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:08,630 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:09,358 - INFO - integration_test - Step 16: MPC solve successful
2026-01-24 11:37:09,367 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:37:09,367 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 11:37:09,564 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 11:37:09,565 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:37:09,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:37:09,819 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-24 11:37:09,820 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:37:09,820 - INFO - integration_test - === Applying control at step 16 ===
2026-01-24 11:37:09,820 - INFO - integration_test -   Control dict from planner: {'a': 1.86435843590318e-11, 'w': -0.13055161337973262}
2026-01-24 11:37:09,820 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:37:09,820 - INFO - integration_test -   Planner output success: True
2026-01-24 11:37:09,821 - INFO - integration_test - Step 16 completed in 5.127s
2026-01-24 11:37:09,879 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-24 11:37:09,887 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.13082898 2.4536825  0.80846643 3.00000003 4.20000003]
2026-01-24 11:37:09,888 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.415m, drift=0.103m)
2026-01-24 11:37:09,888 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-24 11:37:09,888 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:10,832 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.131, 2.454), path_start=(0.000, 0.000), dist=3.978m
2026-01-24 11:37:10,832 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-24 11:37:11,747 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:11,773 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:11,773 - INFO - integration_test - Warmstart k=0: x0=3.1308289766128903 , y0=2.4536825033289698 , psi0=0.8084664255877364 , v0=3.0000000299964027 , spline0=4.2000000287273105 , a0=0.0 , w0=0.0
2026-01-24 11:37:11,773 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:11,774 - INFO - integration_test - Dyn residual k=0: pred=[3.3380114896831636, 2.6706511832753392, 0.8084664255877364, 3.0000000299964027, 4.500000031726951], ws=[3.338011487611587, 2.670651181105913, 0.8084664255877363, 3.0, 3.9343434462406033], res=[2.0715766879675357e-09, 2.1694264162874788e-09, 1.1102230246251565e-16, 2.9996402695076085e-08, 0.5656565854863476], res_norm=5.657e-01
2026-01-24 11:37:11,775 - INFO - integration_test - Dyn residual k=1: pred=[3.5451939986102836, 2.887619858882856, 0.8084664255877363, 3.0, 4.2343434462406035], ws=[3.5451939986102836, 2.887619858882856, 0.8084664255877363, 3.0, 4.058585870483028], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-24 11:37:11,775 - INFO - integration_test - Dyn residual k=2: pred=[3.7523765096089803, 3.104588536659799, 0.8084664255877363, 3.0, 4.358585870483028], ws=[3.7523765096089803, 3.104588536659799, 0.8084664255877363, 3.0, 4.645454574181855], res=[0.0, 0.0, 0.0, 0.0, -0.28686870369882733], res_norm=2.869e-01
2026-01-24 11:37:11,793 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:12,979 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:13,007 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,066 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:13,091 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,143 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:13,166 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,214 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:13,237 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,286 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:13,311 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,362 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:13,385 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,434 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:13,458 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,507 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:13,531 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,580 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:13,603 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,651 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:13,673 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:13,723 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:14,433 - INFO - integration_test - Step 17: MPC solve successful
2026-01-24 11:37:14,443 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:37:14,443 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1869 scenarios available
2026-01-24 11:37:14,680 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1869 trajectory groups with 18690 total points
2026-01-24 11:37:14,681 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:37:14,976 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:37:14,996 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-24 11:37:14,996 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:37:14,996 - INFO - integration_test - === Applying control at step 17 ===
2026-01-24 11:37:14,996 - INFO - integration_test -   Control dict from planner: {'a': -4.583070810614642e-07, 'w': 0.7999995634615141}
2026-01-24 11:37:14,996 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:37:14,996 - INFO - integration_test -   Planner output success: True
2026-01-24 11:37:14,998 - INFO - integration_test - Step 17 completed in 5.111s
2026-01-24 11:37:15,067 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-24 11:37:15,069 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.32911645 2.6787027  0.88846638 2.99999998 4.50000003]
2026-01-24 11:37:15,070 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.395m, drift=0.403m)
2026-01-24 11:37:15,070 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-24 11:37:15,071 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:16,124 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.329, 2.679), path_start=(0.000, 0.000), dist=4.273m
2026-01-24 11:37:16,124 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-24 11:37:17,148 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:17,175 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:17,176 - INFO - integration_test - Warmstart k=0: x0=3.3291164524881993 , y0=2.6787027028354675 , psi0=0.8884663819338878 , v0=2.9999999841656946 , spline0=4.50000002714388 , a0=0.0 , w0=0.0
2026-01-24 11:37:17,176 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:17,177 - INFO - integration_test - Dyn residual k=0: pred=[3.5182973566478033, 2.9115343685325894, 0.8884663819338878, 2.9999999841656946, 4.80000002556045], ws=[3.5182973566478033, 2.9115343685325894, 0.8884663819338883, 2.9999999841656946, 4.0585858691715], res=[0.0, 0.0, -4.440892098500626e-16, 0.0, 0.7414141563889496], res_norm=7.414e-01
2026-01-24 11:37:17,178 - INFO - integration_test - Dyn residual k=1: pred=[3.7074782608074073, 3.1443660342297113, 0.8884663819338883, 2.9999999841656946, 4.3585858675880695], ws=[3.7074782608074073, 3.1443660342297113, 0.8884663819338883, 2.9999999841656946, 4.645454569431564], res=[0.0, 0.0, 0.0, 0.0, -0.28686870184349456], res_norm=2.869e-01
2026-01-24 11:37:17,179 - INFO - integration_test - Dyn residual k=2: pred=[3.8966591649670113, 3.377197699926833, 0.8884663819338883, 2.9999999841656946, 4.945454567848134], ws=[3.8966591649670113, 3.3771976999268336, 0.8884663819338883, 2.9999999841656946, 4.743434365827932], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 11:37:17,197 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,191 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:18,212 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,258 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:18,280 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,328 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:18,352 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,397 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:18,425 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,494 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:18,519 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,566 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:18,588 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,635 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:18,657 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,702 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:18,723 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,769 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:18,790 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,834 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:18,854 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:18,899 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:19,527 - INFO - integration_test - Step 18: MPC solve successful
2026-01-24 11:37:19,536 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:37:19,537 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 11:37:19,770 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 11:37:19,771 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:37:20,157 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:37:20,179 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-24 11:37:20,179 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:37:20,180 - INFO - integration_test - === Applying control at step 18 ===
2026-01-24 11:37:20,180 - INFO - integration_test -   Control dict from planner: {'a': -1.9999998759284536, 'w': -0.7999998263201324}
2026-01-24 11:37:20,180 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:37:20,180 - INFO - integration_test -   Planner output success: True
2026-01-24 11:37:20,181 - INFO - integration_test - Step 18 completed in 5.113s
2026-01-24 11:37:20,250 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-24 11:37:20,254 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.52069434 2.89631035 0.8084664  2.8        4.78000003]
2026-01-24 11:37:20,255 - DEBUG - integration_test - Step 19: Using propagated spline 4.7800 (close to path, dist=0.327m, drift=0.273m)
2026-01-24 11:37:20,255 - DEBUG - integration_test -   Set spline state to 4.7800
2026-01-24 11:37:20,256 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:21,307 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.521, 2.896), path_start=(0.000, 0.000), dist=4.559m
2026-01-24 11:37:21,307 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-24 11:37:22,392 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:22,421 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:22,421 - INFO - integration_test - Warmstart k=0: x0=3.5206943386016376 , y0=2.896310352993768 , psi0=0.8084663993018746 , v0=2.7999999965728493 , spline0=4.780000026801165 , a0=0.0 , w0=0.0
2026-01-24 11:37:22,421 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:22,422 - INFO - integration_test - Dyn residual k=0: pred=[3.714064687286734, 3.0988144469214807, 0.8084663993018746, 2.7999999965728493, 5.06000002645845], ws=[3.714064687286734, 3.0988144469214807, 0.8084663993018744, 2.7999999965728493, 4.403434369892794], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.6565656565656566], res_norm=6.566e-01
2026-01-24 11:37:22,423 - INFO - integration_test - Dyn residual k=1: pred=[3.90743503597183, 3.301318540849193, 0.8084663993018744, 2.7999999965728493, 4.683434369550079], ws=[3.9074350359718304, 3.301318540849193, 0.8084663993018744, 2.7999999965728493, 4.986464672580381], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-24 11:37:22,424 - INFO - integration_test - Dyn residual k=2: pred=[4.100805384656927, 3.5038226347769057, 0.8084663993018744, 2.7999999965728493, 5.2664646722376665], ws=[4.100805384656927, 3.5038226347769057, 0.8084663993018744, 2.7999999965728493, 4.8624242681972625], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 11:37:22,442 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:23,461 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:23,482 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:23,528 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:23,549 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:23,594 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:23,617 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:23,665 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:23,686 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:23,733 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:23,756 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:23,801 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:23,821 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:23,864 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:23,885 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:23,933 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:23,954 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:24,002 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:24,024 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:24,070 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:24,091 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:24,140 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:28,762 - WARNING - integration_test - Step 19: MPC solve failed
2026-01-24 11:37:28,762 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 11:37:28,773 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:37:28,773 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1839 scenarios available
2026-01-24 11:37:28,788 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1839 trajectory groups with 18390 total points
2026-01-24 11:37:28,788 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:37:29,330 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:37:29,356 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.780)
2026-01-24 11:37:29,356 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:37:29,356 - INFO - integration_test - === Applying control at step 19 ===
2026-01-24 11:37:29,356 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.7860288478864232}
2026-01-24 11:37:29,356 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:37:29,356 - INFO - integration_test -   Planner output success: False
2026-01-24 11:37:29,356 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.7860288478864232}
2026-01-24 11:37:29,358 - INFO - integration_test - Step 19 completed in 9.104s
2026-01-24 11:37:29,426 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-24 11:37:29,428 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.69939435 3.09861903 0.88706928 2.6        5.04000003]
2026-01-24 11:37:29,428 - DEBUG - integration_test - Step 20: Using propagated spline 5.0400 (close to path, dist=0.305m, drift=0.124m)
2026-01-24 11:37:29,429 - DEBUG - integration_test -   Set spline state to 5.0400
2026-01-24 11:37:29,429 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:30,459 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.699, 3.099), path_start=(0.000, 0.000), dist=4.826m
2026-01-24 11:37:30,459 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-24 11:37:31,419 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:31,445 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:31,445 - INFO - integration_test - Warmstart k=0: x0=3.699394345933998 , y0=3.09861902840555 , psi0=0.8870692840905169 , v0=2.599999996572849 , spline0=5.04000002645845 , a0=0.0 , w0=0.0
2026-01-24 11:37:31,446 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:31,447 - INFO - integration_test - Dyn residual k=0: pred=[3.863632886887782, 3.300177212280977, 0.8870692840905169, 2.599999996572849, 5.300000026115734], ws=[3.863632886887782, 3.300177212280977, 0.8870692840905168, 2.599999996572849, 4.744444470560179], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-24 11:37:31,447 - INFO - integration_test - Dyn residual k=1: pred=[4.027871427841566, 3.5017353961564037, 0.8870692840905168, 2.599999996572849, 5.0044444702174635], ws=[4.027871427841566, 3.5017353961564037, 0.8870692840905168, 2.599999996572849, 5.105454571227564], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-24 11:37:31,448 - INFO - integration_test - Dyn residual k=2: pred=[4.19210996879535, 3.7032935800318305, 0.8870692840905168, 2.599999996572849, 5.3654545708848485], ws=[4.19210996879535, 3.7032935800318305, 0.8870692840905168, 2.599999996572849, 5.163434368864647], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-24 11:37:31,465 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:32,472 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:32,491 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:32,539 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:32,561 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:32,607 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:32,629 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:32,674 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:32,694 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:32,742 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:32,763 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:32,808 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:32,831 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:32,876 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:32,897 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:32,943 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:32,963 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:33,008 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:33,029 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:33,074 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:33,094 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:33,142 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:33,882 - INFO - integration_test - Step 20: MPC solve successful
2026-01-24 11:37:33,890 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:37:33,891 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 11:37:33,907 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 11:37:33,908 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:37:34,314 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:37:34,339 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.040)
2026-01-24 11:37:34,339 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:37:34,339 - INFO - integration_test - === Applying control at step 20 ===
2026-01-24 11:37:34,339 - INFO - integration_test -   Control dict from planner: {'a': -1.3031340402464942, 'w': 0.8000000094153936}
2026-01-24 11:37:34,339 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:37:34,339 - INFO - integration_test -   Planner output success: True
2026-01-24 11:37:34,341 - INFO - integration_test - Step 20 completed in 4.913s
2026-01-24 11:37:34,423 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-24 11:37:34,426 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.85155966 3.30126594 0.96706929 2.46968659 5.28696869]
2026-01-24 11:37:34,428 - DEBUG - integration_test - Step 21: Using propagated spline 5.2870 (close to path, dist=0.283m, drift=0.371m)
2026-01-24 11:37:34,428 - DEBUG - integration_test -   Set spline state to 5.2870
2026-01-24 11:37:34,429 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:35,470 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.852, 3.301), path_start=(0.000, 0.000), dist=5.073m
2026-01-24 11:37:35,470 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-24 11:37:36,466 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:36,492 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:36,492 - INFO - integration_test - Warmstart k=0: x0=3.8515596620688735 , y0=3.3012659369978357 , psi0=0.9670692850320562 , v0=2.4696865925481997 , spline0=5.28696868571327 , a0=0.0 , w0=0.0
2026-01-24 11:37:36,492 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:36,493 - INFO - integration_test - Dyn residual k=0: pred=[3.9917673768813904, 3.5045768205264243, 0.9670692850320562, 2.4696865925481997, 5.53393734496809], ws=[3.9917673768813904, 3.5045768205264243, 0.9670692850320561, 2.4696865925481997, 5.079391890422635], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-24 11:37:36,493 - INFO - integration_test - Dyn residual k=1: pred=[4.131975091693907, 3.707887704055013, 0.9670692850320561, 2.4696865925481997, 5.326360549677456], ws=[4.131975091693907, 3.707887704055013, 0.9670692850320561, 2.4696865925481997, 5.427370650687557], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-24 11:37:36,494 - INFO - integration_test - Dyn residual k=2: pred=[4.272182806506424, 3.9111985875836015, 0.9670692850320561, 2.4696865925481997, 5.674339309942377], ws=[4.272182806506424, 3.9111985875836015, 0.9670692850320561, 2.4696865925481997, 5.270298905901973], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-24 11:37:36,511 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:37,559 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:37,583 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:37,634 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:37,658 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:37,709 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:37,735 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:37,785 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:37,808 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:37,857 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:37,881 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:37,932 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:37,956 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:38,006 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:38,030 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:38,081 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:38,107 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:38,157 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:38,180 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:38,228 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:38,251 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:38,298 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:42,832 - WARNING - integration_test - Step 21: MPC solve failed
2026-01-24 11:37:42,832 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-24 11:37:42,847 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:37:42,847 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 11:37:42,862 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 11:37:42,863 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:37:43,341 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:37:43,370 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.287)
2026-01-24 11:37:43,370 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:37:43,370 - INFO - integration_test - === Applying control at step 21 ===
2026-01-24 11:37:43,370 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.10437413197805867}
2026-01-24 11:37:43,370 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:37:43,371 - INFO - integration_test -   Planner output success: False
2026-01-24 11:37:43,371 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.10437413197805867}
2026-01-24 11:37:43,372 - INFO - integration_test - Step 21 completed in 8.946s
2026-01-24 11:37:43,439 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-24 11:37:43,448 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[3.98508411 3.49703329 0.9775067  2.26968659 5.51393734]
2026-01-24 11:37:43,449 - DEBUG - integration_test - Step 22: Using propagated spline 5.5139 (close to path, dist=0.179m, drift=0.188m)
2026-01-24 11:37:43,449 - DEBUG - integration_test -   Set spline state to 5.5139
2026-01-24 11:37:43,450 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:44,429 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(3.985, 3.497), path_start=(0.000, 0.000), dist=5.302m
2026-01-24 11:37:44,429 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-24 11:37:45,531 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:45,560 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:45,560 - INFO - integration_test - Warmstart k=0: x0=3.9850841111935784 , y0=3.4970332924883265 , psi0=0.9775066982298621 , v0=2.2696865925481995 , spline0=5.51393734496809 , a0=0.0 , w0=0.0
2026-01-24 11:37:45,560 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:45,561 - INFO - integration_test - Dyn residual k=0: pred=[4.111980357943353, 3.685214361793267, 0.9775066982298621, 2.2696865925481995, 5.74090600422291], ws=[4.111980357943353, 3.685214361793267, 0.9775066982298624, 2.2696865925481995, 5.387370650687556], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.3535353535353538], res_norm=3.535e-01
2026-01-24 11:37:45,562 - INFO - integration_test - Dyn residual k=1: pred=[4.238876604693128, 3.8733954310982077, 0.9775066982298624, 2.2696865925481995, 5.614339309942376], ws=[4.238876604693128, 3.8733954310982077, 0.9775066982298624, 2.2696865925481995, 5.513329208932275], res=[0.0, 0.0, 0.0, 0.0, 0.10101010101010122], res_norm=1.010e-01
2026-01-24 11:37:45,563 - INFO - integration_test - Dyn residual k=2: pred=[4.365772851442903, 4.061576500403149, 0.9775066982298624, 2.2696865925481995, 5.740297868187095], ws=[4.20110020064517, 4.289128879402742, 0.9775066982298624, 2.2696865925481995, 5.841307969197196], res=[0.16467265079773252, -0.2275523789995928, 0.0, 0.0, -0.10101010101010122], res_norm=2.985e-01
2026-01-24 11:37:45,579 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:46,654 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:46,674 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:46,721 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:46,743 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:46,788 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:46,810 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:46,855 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:46,874 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:46,920 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:46,940 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:46,986 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:47,008 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:47,055 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:47,076 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:47,127 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:47,149 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:47,197 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:47,220 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:47,267 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:47,287 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:47,334 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:51,863 - WARNING - integration_test - Step 22: MPC solve failed
2026-01-24 11:37:51,863 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-24 11:37:51,873 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:37:51,873 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1861 scenarios available
2026-01-24 11:37:52,096 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1861 trajectory groups with 18610 total points
2026-01-24 11:37:52,097 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:37:52,434 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:37:52,452 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.514)
2026-01-24 11:37:52,453 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:37:52,453 - INFO - integration_test - === Applying control at step 22 ===
2026-01-24 11:37:52,453 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.1704096743305925}
2026-01-24 11:37:52,453 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:37:52,453 - INFO - integration_test -   Planner output success: False
2026-01-24 11:37:52,453 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.1704096743305925}
2026-01-24 11:37:52,455 - INFO - integration_test - Step 22 completed in 9.007s
2026-01-24 11:37:52,519 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-24 11:37:52,521 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.10487454 3.67793247 0.99454767 2.06968659 5.720906  ]
2026-01-24 11:37:52,521 - DEBUG - integration_test - Step 23: Using propagated spline 5.7209 (close to path, dist=0.219m, drift=0.395m)
2026-01-24 11:37:52,521 - DEBUG - integration_test -   Set spline state to 5.7209
2026-01-24 11:37:52,522 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:53,532 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.105, 3.678), path_start=(0.000, 0.000), dist=5.512m
2026-01-24 11:37:53,532 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-24 11:37:54,624 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:37:54,654 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:37:54,654 - INFO - integration_test - Warmstart k=0: x0=4.104874541320143 , y0=3.6779324731552996 , psi0=0.9945476656629214 , v0=2.0696865925481993 , spline0=5.72090600422291 , a0=0.0 , w0=0.0
2026-01-24 11:37:54,654 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:37:54,655 - INFO - integration_test - Dyn residual k=0: pred=[4.217648086589825, 3.851478298230537, 0.9945476656629214, 2.0696865925481993, 5.927874663477731], ws=[3.959417856080982, 3.4091456704788783, 0.9945476656629211, 2.0696865925481993, 5.069288804891872], res=[0.25823023050884286, 0.4423326277516586, 3.3306690738754696e-16, 0.0, 0.858585858585859], res_norm=9.998e-01
2026-01-24 11:37:54,656 - INFO - integration_test - Dyn residual k=1: pred=[4.072191401350663, 3.5826914955541156, 0.9945476656629211, 2.0696865925481993, 5.276257464146692], ws=[4.109888493289315, 4.0230806375001436, 0.9945476656629211, 2.0696865925481993, 5.478277666166894], res=[-0.037697091938651894, -0.44038914194602796, 0.0, 0.0, -0.20202020202020243], res_norm=4.860e-01
2026-01-24 11:37:54,657 - INFO - integration_test - Dyn residual k=2: pred=[4.222662038558997, 4.196626462575381, 0.9945476656629211, 2.0696865925481993, 5.685246325421715], ws=[4.238224415165357, 4.149096543355584, 0.9945476656629211, 2.0696865925481993, 5.5842362244116135], res=[-0.015562376606360395, 0.0475299192197971, 0.0, 0.0, 0.10101010101010122], res_norm=1.127e-01
2026-01-24 11:37:54,676 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:55,737 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:55,760 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:55,808 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:55,833 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:55,880 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:55,904 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:55,955 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:55,977 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:56,026 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:56,049 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:56,096 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:56,120 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:56,172 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:56,196 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:56,247 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:56,269 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:56,319 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:37:56,344 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:56,394 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:37:56,417 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:37:56,468 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:00,684 - WARNING - integration_test - Step 23: MPC solve failed
2026-01-24 11:38:00,684 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-24 11:38:00,699 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:00,699 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1875 scenarios available
2026-01-24 11:38:00,936 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1875 trajectory groups with 18750 total points
2026-01-24 11:38:00,937 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:01,325 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:38:01,343 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=5.721)
2026-01-24 11:38:01,343 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:38:01,343 - INFO - integration_test - === Applying control at step 23 ===
2026-01-24 11:38:01,343 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.27580303437122033}
2026-01-24 11:38:01,343 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:38:01,343 - INFO - integration_test -   Planner output success: False
2026-01-24 11:38:01,343 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.27580303437122033}
2026-01-24 11:38:01,345 - INFO - integration_test - Step 23 completed in 8.824s
2026-01-24 11:38:01,410 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-24 11:38:01,412 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.21442491 3.84161788 0.96696736 1.86968659 5.90787466]
2026-01-24 11:38:01,412 - DEBUG - integration_test - Step 24: Using propagated spline 5.9079 (close to path, dist=0.075m, drift=0.172m)
2026-01-24 11:38:01,412 - DEBUG - integration_test -   Set spline state to 5.9079
2026-01-24 11:38:01,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:02,349 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.214, 3.842), path_start=(0.000, 0.000), dist=5.703m
2026-01-24 11:38:02,349 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-24 11:38:03,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:03,469 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:38:03,469 - INFO - integration_test - Warmstart k=0: x0=4.2144249112298695 , y0=3.841617878963042 , psi0=0.9669673622257994 , v0=1.8696865925481994 , spline0=5.90787466347773 , a0=0.0 , w0=0.0
2026-01-24 11:38:03,469 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:38:03,470 - INFO - integration_test - Dyn residual k=0: pred=[4.320585436885752, 3.995524416627989, 0.9669673622257994, 1.8696865925481994, 6.09484332273255], ws=[4.272098218712544, 3.922632017081958, 0.966967362225799, 1.8696865925481994, 5.741307969197196], res=[0.04848721817320811, 0.07289239954603088, 3.3306690738754696e-16, 0.0, 0.3535353535353538], res_norm=3.642e-01
2026-01-24 11:38:03,471 - INFO - integration_test - Dyn residual k=1: pred=[4.378258744368426, 4.0765385547469055, 0.966967362225799, 1.8696865925481994, 5.928276628452016], ws=[4.063251744950077, 3.6427284766181662, 0.966967362225799, 1.8696865925481994, 5.120195820371208], res=[0.3150069994183493, 0.4338100781287393, 0.0, 0.0, 0.808080808080808], res_norm=9.698e-01
2026-01-24 11:38:03,472 - INFO - integration_test - Dyn residual k=2: pred=[4.169412270605959, 3.796635014283113, 0.966967362225799, 1.8696865925481994, 5.307164479626028], ws=[4.160563362321696, 3.7716823075113983, 0.966967362225799, 1.8696865925481994, 5.206154378615928], res=[0.008848908284263324, 0.024952706771714794, 0.0, 0.0, 0.10101010101010033], res_norm=1.044e-01
2026-01-24 11:38:03,489 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:04,549 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:04,573 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:04,623 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:04,646 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:04,694 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:04,719 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:04,769 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:04,791 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:04,841 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:04,863 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:04,913 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:04,937 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:04,986 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:05,008 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:05,056 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:05,078 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:05,127 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:05,152 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:05,206 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:05,228 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:05,278 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:09,573 - WARNING - integration_test - Step 24: MPC solve failed
2026-01-24 11:38:09,573 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-24 11:38:09,586 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:09,586 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 11:38:09,603 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 11:38:09,604 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:10,194 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:38:10,229 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=5.908)
2026-01-24 11:38:10,230 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:38:10,230 - INFO - integration_test - === Applying control at step 24 ===
2026-01-24 11:38:10,230 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.23603230517305995}
2026-01-24 11:38:10,230 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:38:10,230 - INFO - integration_test -   Planner output success: False
2026-01-24 11:38:10,230 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.23603230517305995}
2026-01-24 11:38:10,231 - INFO - integration_test - Step 24 completed in 8.820s
2026-01-24 11:38:10,310 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-24 11:38:10,313 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.31658513 3.98611613 0.94336413 1.66968659 6.07484332]
2026-01-24 11:38:10,313 - DEBUG - integration_test - Step 25: Using propagated spline 6.0748 (close to path, dist=0.138m, drift=0.339m)
2026-01-24 11:38:10,313 - DEBUG - integration_test -   Set spline state to 6.0748
2026-01-24 11:38:10,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:11,660 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.317, 3.986), path_start=(0.000, 0.000), dist=5.876m
2026-01-24 11:38:11,660 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-24 11:38:12,698 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:12,726 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:38:12,726 - INFO - integration_test - Warmstart k=0: x0=4.316585125172876 , y0=3.98611613037246 , psi0=0.9433641317084934 , v0=1.6696865925481994 , spline0=6.0748433227325505 , a0=0.0 , w0=0.0
2026-01-24 11:38:12,726 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:38:12,727 - INFO - integration_test - Dyn residual k=0: pred=[4.4146070754988775, 4.121283546666621, 0.9433641317084934, 1.6696865925481994, 6.241811981987371], ws=[3.791832263974625, 3.6441577872309256, 0.9433641317084938, 1.6696865925481994, 5.080195820371209], res=[0.6227748115242524, 0.4771257594356957, -3.3306690738754696e-16, 0.0, 1.1616161616161618], res_norm=1.402e+00
2026-01-24 11:38:12,728 - INFO - integration_test - Dyn residual k=1: pred=[3.889854214300626, 3.7793252035250875, 0.9433641317084938, 1.6696865925481994, 5.247164479626029], ws=[4.032806332053508, 3.4188343237790777, 0.9433641317084938, 1.6696865925481994, 4.843124075585625], res=[-0.1429521177528823, 0.3604908797460098, 0.0, 0.0, 0.404040404040404], res_norm=5.600e-01
2026-01-24 11:38:12,729 - INFO - integration_test - Dyn residual k=2: pred=[4.130828282379509, 3.5540017400732395, 0.9433641317084938, 1.6696865925481994, 5.010092734840446], ws=[4.068991531602861, 4.407201947000604, 0.9433641317084938, 1.6696865925481994, 5.8181735429212535], res=[0.06183675077664841, -0.8532002069273643, 0.0, 0.0, -0.808080808080808], res_norm=1.177e+00
2026-01-24 11:38:12,747 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:13,813 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:13,838 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:13,891 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:13,916 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:13,970 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:13,995 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:14,047 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:14,071 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:14,118 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:14,141 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:14,190 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:14,214 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:14,263 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:14,286 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:14,332 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:14,359 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:14,436 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:14,467 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:14,521 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:14,542 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:14,591 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:19,087 - WARNING - integration_test - Step 25: MPC solve failed
2026-01-24 11:38:19,088 - WARNING - integration_test -   Consecutive MPC failures: 5/20
2026-01-24 11:38:19,106 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:19,107 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 11:38:19,122 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 11:38:19,123 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:19,762 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:38:19,785 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.075)
2026-01-24 11:38:19,785 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:38:19,785 - INFO - integration_test - === Applying control at step 25 ===
2026-01-24 11:38:19,785 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.42089769624755746}
2026-01-24 11:38:19,785 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:38:19,785 - INFO - integration_test -   Planner output success: False
2026-01-24 11:38:19,785 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.42089769624755746}
2026-01-24 11:38:19,787 - INFO - integration_test - Step 25 completed in 9.474s
2026-01-24 11:38:19,863 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-24 11:38:19,869 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[4.41132711 4.11125399 0.90127436 1.46968659 6.22181198]
2026-01-24 11:38:19,870 - DEBUG - integration_test - Step 26: Using propagated spline 6.2218 (close to path, dist=0.120m, drift=0.076m)
2026-01-24 11:38:19,870 - DEBUG - integration_test -   Set spline state to 6.2218
2026-01-24 11:38:19,871 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:20,884 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(4.411, 4.111), path_start=(0.000, 0.000), dist=6.030m
2026-01-24 11:38:20,884 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-24 11:38:21,821 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:21,848 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:38:21,848 - INFO - integration_test - Warmstart k=0: x0=4.411327106228872 , y0=4.111253993333943 , psi0=0.9012743620837377 , v0=1.4696865925481994 , spline0=6.22181198198737 , a0=0.0 , w0=0.0
2026-01-24 11:38:21,848 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:38:21,850 - INFO - integration_test - Dyn residual k=0: pred=[4.502537505397857, 4.2264948276184695, 0.9012743620837377, 1.4696865925481994, 6.36878064124219], ws=[4.387890916672016, 3.1472667532883567, 0.901274362083738, 1.4696865925481994, 5.106154378615928], res=[0.11464658872584099, 1.0792280743301128, -3.3306690738754696e-16, 0.0, 1.262626262626262], res_norm=1.665e+00
2026-01-24 11:38:21,851 - INFO - integration_test - Dyn residual k=1: pred=[4.479101315841001, 3.262507587572883, 0.901274362083738, 1.4696865925481994, 5.253123037870748], ws=[3.9441306515900516, 4.484544592321833, 0.901274362083738, 1.4696865925481994, 5.556153340901051], res=[0.5349706642509497, -1.22203700474895, 0.0, 0.0, -0.30303030303030276], res_norm=1.368e+00
2026-01-24 11:38:21,852 - INFO - integration_test - Dyn residual k=2: pred=[4.035341050759037, 4.59978542660636, 0.901274362083738, 1.4696865925481994, 5.7031220001558705], ws=[5.556214100499246, 5.522714211846871, 0.901274362083738, 1.4696865925481994, 7.319283616317486], res=[-1.5208730497402092, -0.9229287852405115, 0.0, 0.0, -1.616161616161616], res_norm=2.404e+00
2026-01-24 11:38:21,869 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:22,990 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:23,015 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,063 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:23,088 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,139 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:23,166 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,216 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:23,241 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,291 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:23,317 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,367 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:23,392 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,477 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:23,515 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,569 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:23,593 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,643 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:23,669 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,719 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:23,744 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:23,793 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:28,497 - WARNING - integration_test - Step 26: MPC solve failed
2026-01-24 11:38:28,497 - WARNING - integration_test -   Consecutive MPC failures: 6/20
2026-01-24 11:38:28,510 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:28,511 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 11:38:28,526 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 11:38:28,527 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:28,979 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:38:29,002 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.222)
2026-01-24 11:38:29,002 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:38:29,002 - INFO - integration_test - === Applying control at step 26 ===
2026-01-24 11:38:29,002 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.47564068732180154}
2026-01-24 11:38:29,002 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:38:29,002 - INFO - integration_test -   Planner output success: False
2026-01-24 11:38:29,002 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.47564068732180154}
2026-01-24 11:38:29,004 - INFO - integration_test - Step 26 completed in 9.135s
2026-01-24 11:38:29,069 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-24 11:38:29,073 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[4.49879208 4.21664262 0.85371029 1.26968659 6.34878064]
2026-01-24 11:38:29,074 - DEBUG - integration_test - Step 27: Using propagated spline 6.3488 (close to path, dist=0.039m, drift=0.203m)
2026-01-24 11:38:29,074 - DEBUG - integration_test -   Set spline state to 6.3488
2026-01-24 11:38:29,075 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:30,045 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(4.499, 4.217), path_start=(0.000, 0.000), dist=6.166m
2026-01-24 11:38:30,045 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-24 11:38:30,978 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:31,011 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:38:31,011 - INFO - integration_test - Warmstart k=0: x0=4.498792079658719 , y0=4.216642615997642 , psi0=0.8537102933515576 , v0=1.2696865925481995 , spline0=6.3487806412421905 , a0=0.0 , w0=0.0
2026-01-24 11:38:31,011 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:38:31,012 - INFO - integration_test - Dyn residual k=0: pred=[4.582234757431133, 4.312341936575876, 0.8537102933515576, 1.2696865925481995, 6.475749300497011], ws=[4.147327893644241, 3.8398677042953686, 0.8537102933515577, 1.2696865925481995, 5.213123037870748], res=[0.4349068637868916, 0.4724742322805078, -1.1102230246251565e-16, 0.0, 1.262626262626263], res_norm=1.417e+00
2026-01-24 11:38:31,013 - INFO - integration_test - Dyn residual k=1: pred=[4.230770571416655, 3.935567024873603, 0.8537102933515577, 1.2696865925481995, 5.340091697125568], ws=[3.911128557984316, 3.9710529324863435, 0.8537102933515577, 1.2696865925481995, 5.441101798135669], res=[0.3196420134323392, -0.03548590761274051, 0.0, 0.0, -0.10101010101010122], res_norm=3.371e-01
2026-01-24 11:38:31,014 - INFO - integration_test - Dyn residual k=2: pred=[3.99457123575673, 4.066752253064578, 0.8537102933515577, 1.2696865925481995, 5.56807045739049], ws=[4.302118296002879, 4.3048211386657576, 0.8537102933515577, 1.2696865925481995, 5.871100760420792], res=[-0.3075470602461494, -0.23806888560117923, 0.0, 0.0, -0.30303030303030276], res_norm=4.930e-01
2026-01-24 11:38:31,034 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,150 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:32,173 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,222 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:32,246 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,296 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:32,320 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,369 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:32,392 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,442 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:32,465 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,539 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:32,570 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,631 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:32,656 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,704 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:32,726 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,776 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:32,798 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,846 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:32,870 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:32,918 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:37,095 - WARNING - integration_test - Step 27: MPC solve failed
2026-01-24 11:38:37,095 - WARNING - integration_test -   Consecutive MPC failures: 7/20
2026-01-24 11:38:37,110 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:37,110 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 11:38:37,371 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 11:38:37,372 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:37,766 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:38:37,784 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=6.349)
2026-01-24 11:38:37,785 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:38:37,785 - INFO - integration_test - === Applying control at step 27 ===
2026-01-24 11:38:37,785 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.45942862333119017}
2026-01-24 11:38:37,785 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:38:37,785 - INFO - integration_test -   Planner output success: False
2026-01-24 11:38:37,785 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.45942862333119017}
2026-01-24 11:38:37,786 - INFO - integration_test - Step 27 completed in 8.713s
2026-01-24 11:38:37,847 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-24 11:38:37,849 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[4.57760412 4.30305979 0.80776743 1.06968659 6.4557493 ]
2026-01-24 11:38:37,850 - DEBUG - integration_test - Step 28: Using propagated spline 6.4557 (close to path, dist=0.141m, drift=0.310m)
2026-01-24 11:38:37,850 - DEBUG - integration_test -   Set spline state to 6.4557
2026-01-24 11:38:37,851 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:38,828 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(4.578, 4.303), path_start=(0.000, 0.000), dist=6.283m
2026-01-24 11:38:38,828 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-24 11:38:39,953 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-24 11:38:39,981 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-24 11:38:39,981 - INFO - integration_test - Warmstart k=0: x0=4.577604121882599 , y0=4.303059794716803 , psi0=0.8077674310184385 , v0=1.0696865925481995 , spline0=6.45574930049701 , a0=0.0 , w0=0.0
2026-01-24 11:38:39,981 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-24 11:38:39,983 - INFO - integration_test - Dyn residual k=0: pred=[4.651531631436763, 4.380370967220477, 0.8077674310184385, 1.0696865925481995, 6.56271795975183], ws=[3.964460893008985, 3.9989366990729103, 0.8077674310184384, 1.0696865925481995, 5.199081596115466], res=[0.6870707384277779, 0.38143426814756687, 1.1102230246251565e-16, 0.0, 1.3636363636363642], res_norm=1.574e+00
2026-01-24 11:38:39,984 - INFO - integration_test - Dyn residual k=1: pred=[4.0383884025631485, 4.076247871576584, 0.8077674310184384, 1.0696865925481995, 5.306050255370286], ws=[3.6111594348967304, 4.431642699793312, 0.8077674310184384, 1.0696865925481995, 5.205040154360185], res=[0.42722896766641805, -0.3553948282167285, 0.0, 0.0, 0.10101010101010033], res_norm=5.648e-01
2026-01-24 11:38:39,985 - INFO - integration_test - Dyn residual k=2: pred=[3.685086944450894, 4.508953872296987, 0.8077674310184384, 1.0696865925481995, 5.312008813615005], ws=[5.073007130471823, 5.565027445102723, 0.8077674310184384, 1.0696865925481995, 6.928170429776621], res=[-1.3879201860209291, -1.0560735728057367, 0.0, 0.0, -1.616161616161616], res_norm=2.378e+00
2026-01-24 11:38:40,004 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,060 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:41,082 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,131 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:41,157 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,208 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:41,230 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,278 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:41,302 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,353 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:41,378 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,428 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:41,452 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,499 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:41,522 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,568 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:41,591 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,639 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-24 11:38:41,661 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,708 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:41,730 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-24 11:38:41,778 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-24 11:38:47,191 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-24 11:38:47,191 - WARNING - integration_test -   Consecutive MPC failures: 8/20
2026-01-24 11:38:47,212 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:47,212 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1863 scenarios available
2026-01-24 11:38:47,230 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1863 trajectory groups with 18630 total points
2026-01-24 11:38:47,232 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:48,227 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:38:48,266 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=6.456)
2026-01-24 11:38:48,267 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-24 11:38:48,267 - INFO - integration_test - === Applying control at step 28 ===
2026-01-24 11:38:48,267 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.3878100357761749}
2026-01-24 11:38:48,267 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-24 11:38:48,267 - INFO - integration_test -   Planner output success: False
2026-01-24 11:38:48,267 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.3878100357761749}
2026-01-24 11:38:48,269 - INFO - integration_test - Step 28 completed in 10.420s
2026-01-24 11:38:48,348 - WARNING - integration_test - Test timeout reached (180.0s) at step 29. Terminating test early.
2026-01-24 11:38:48,353 - INFO - integration_test - Saving test results...
2026-01-24 11:38:48,354 - INFO - integration_test - Saved 30 vehicle states to test_outputs/20260124_113542_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-24 11:38:48,354 - INFO - integration_test - Saved obstacle summary to test_outputs/20260124_113542_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-24 11:38:48,354 - INFO - integration_test - Saved 40 states for obstacle 0 to test_outputs/20260124_113542_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-24 11:38:48,354 - INFO - integration_test - Saved 40 states for obstacle 1 to test_outputs/20260124_113542_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-24 11:38:48,354 - INFO - integration_test - Saved state history: 30 vehicle states, 2 obstacles
2026-01-24 11:38:48,354 - INFO - integration_test - Creating animation...
2026-01-24 11:38:48,401 - DEBUG - integration_test - Creating animation with 30 frames (range: 0 to 29)
2026-01-24 11:38:48,402 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 11:38:49,422 - INFO - integration_test - Frame 0: Safe Horizon module has 1865 scenarios after update
2026-01-24 11:38:49,422 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 11:38:49,422 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 11:38:49,424 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:49,424 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1865 scenarios available
2026-01-24 11:38:49,440 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1865 trajectory groups with 18650 total points
2026-01-24 11:38:49,441 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:49,492 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:38:49,499 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 11:38:49,500 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-24 11:38:50,423 - INFO - integration_test - Frame 0: Safe Horizon module has 1853 scenarios after update
2026-01-24 11:38:50,423 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-24 11:38:50,423 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 11:38:50,425 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:50,425 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 11:38:50,440 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 11:38:50,441 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:50,490 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-24 11:38:50,498 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-24 11:38:50,634 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-24 11:38:52,057 - INFO - integration_test - Frame 1: Safe Horizon module has 1876 scenarios after update
2026-01-24 11:38:52,057 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-24 11:38:52,058 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 11:38:52,059 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:52,059 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1876 scenarios available
2026-01-24 11:38:52,076 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1876 trajectory groups with 18760 total points
2026-01-24 11:38:52,077 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:52,131 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:38:52,139 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-24 11:38:52,248 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-24 11:38:53,259 - INFO - integration_test - Frame 2: Safe Horizon module has 1857 scenarios after update
2026-01-24 11:38:53,259 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-24 11:38:53,259 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-24 11:38:53,261 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:53,261 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 11:38:53,279 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 11:38:53,280 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:53,334 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:38:53,343 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-24 11:38:54,456 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:54,456 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1867 scenarios available
2026-01-24 11:38:54,779 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1867 trajectory groups with 18670 total points
2026-01-24 11:38:54,780 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:54,834 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:38:55,940 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:55,940 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1864 scenarios available
2026-01-24 11:38:55,957 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1864 trajectory groups with 18640 total points
2026-01-24 11:38:55,958 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:56,014 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:38:57,110 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:57,111 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1858 scenarios available
2026-01-24 11:38:57,420 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1858 trajectory groups with 18580 total points
2026-01-24 11:38:57,421 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:57,474 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:38:58,537 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:58,537 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 11:38:58,554 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 11:38:58,555 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:38:58,604 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:38:59,681 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:38:59,681 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 11:38:59,701 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 11:38:59,703 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:00,062 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:01,329 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:01,329 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 11:39:01,350 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 11:39:01,351 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:01,413 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:02,533 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:02,533 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1869 scenarios available
2026-01-24 11:39:02,550 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1869 trajectory groups with 18690 total points
2026-01-24 11:39:02,552 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:02,603 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:03,755 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:03,755 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 11:39:04,060 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 11:39:04,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:04,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:05,243 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:05,243 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 11:39:05,260 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 11:39:05,261 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:05,309 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:06,377 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:06,377 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1855 scenarios available
2026-01-24 11:39:06,660 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1855 trajectory groups with 18550 total points
2026-01-24 11:39:06,661 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:06,710 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:07,852 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:07,852 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1844 scenarios available
2026-01-24 11:39:07,872 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1844 trajectory groups with 18440 total points
2026-01-24 11:39:07,874 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:07,932 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:09,143 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:09,143 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1856 scenarios available
2026-01-24 11:39:09,163 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1856 trajectory groups with 18560 total points
2026-01-24 11:39:09,164 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:09,515 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:10,649 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:10,649 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1857 scenarios available
2026-01-24 11:39:10,667 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1857 trajectory groups with 18570 total points
2026-01-24 11:39:10,668 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:10,720 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:11,909 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:11,909 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1870 scenarios available
2026-01-24 11:39:11,930 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1870 trajectory groups with 18700 total points
2026-01-24 11:39:11,931 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:11,982 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:13,052 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:13,052 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1881 scenarios available
2026-01-24 11:39:13,350 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1881 trajectory groups with 18810 total points
2026-01-24 11:39:13,352 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:13,407 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:14,507 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:14,507 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 11:39:14,529 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 11:39:14,530 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:14,584 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:15,860 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:15,860 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1853 scenarios available
2026-01-24 11:39:16,179 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1853 trajectory groups with 18530 total points
2026-01-24 11:39:16,181 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:16,239 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:17,422 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:17,422 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 11:39:17,443 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 11:39:17,445 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:17,507 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:18,616 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:18,616 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1850 scenarios available
2026-01-24 11:39:18,635 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1850 trajectory groups with 18500 total points
2026-01-24 11:39:18,636 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:18,959 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:20,108 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:20,108 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 11:39:20,130 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 11:39:20,131 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:20,185 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:21,419 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:21,419 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1851 scenarios available
2026-01-24 11:39:21,439 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1851 trajectory groups with 18510 total points
2026-01-24 11:39:21,440 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:21,497 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:22,619 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:22,619 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1866 scenarios available
2026-01-24 11:39:22,918 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1866 trajectory groups with 18660 total points
2026-01-24 11:39:22,920 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:22,971 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:24,107 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:24,107 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1852 scenarios available
2026-01-24 11:39:24,125 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1852 trajectory groups with 18520 total points
2026-01-24 11:39:24,126 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:24,179 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:25,306 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:25,306 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1862 scenarios available
2026-01-24 11:39:25,611 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1862 trajectory groups with 18620 total points
2026-01-24 11:39:25,612 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:25,663 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:26,772 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:26,772 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1860 scenarios available
2026-01-24 11:39:26,790 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1860 trajectory groups with 18600 total points
2026-01-24 11:39:26,791 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:26,841 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:27,882 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:27,882 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1848 scenarios available
2026-01-24 11:39:28,172 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1848 trajectory groups with 18480 total points
2026-01-24 11:39:28,174 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:28,228 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:29,337 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-24 11:39:29,337 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1868 scenarios available
2026-01-24 11:39:29,358 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1868 trajectory groups with 18680 total points
2026-01-24 11:39:29,359 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-24 11:39:29,413 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.22375,0.11;0.5775x0.77)
2026-01-24 11:39:31,513 - INFO - integration_test - Saved animation with 30 frames at 10.00 fps to test_outputs/20260124_113542_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 3.00s, size: 498826 bytes)
2026-01-24 11:39:31,534 - INFO - integration_test - Animation created successfully
2026-01-24 11:39:31,535 - INFO - integration_test - Test completed successfully
