2026-01-25 18:57:23,706 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-25 18:57:23,707 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-25 18:57:23,707 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-25 18:57:23,707 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-25 18:57:23,707 - INFO - integration_test - Creating objective module: contouring
2026-01-25 18:57:23,713 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-25 18:57:23,713 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-25 18:57:23,713 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-25 18:57:23,722 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-25 18:57:23,722 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-25 18:57:23,730 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-25 18:57:23,730 - INFO - integration_test - Created 2 constraint module(s)
2026-01-25 18:57:23,747 - INFO - integration_test - Setting solver on all modules...
2026-01-25 18:57:23,747 - DEBUG - integration_test -   Set solver on module: safe_horizon_constraint
2026-01-25 18:57:23,747 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-25 18:57:23,747 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-25 18:57:23,747 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-25 18:57:23,747 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-25 18:57:23,747 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-25 18:57:23,748 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-25 18:57:23,748 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-25 18:57:23,749 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-25 18:57:23,749 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-25 18:57:23,749 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-25 18:57:23,749 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-25 18:57:23,749 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-25 18:57:23,749 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-25 18:57:23,749 - INFO - integration_test - Added spline variable: 0.0000
2026-01-25 18:57:23,749 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-25 18:57:23,749 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-25 18:57:23,750 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-25 18:57:23,750 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-25 18:57:23,750 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-25 18:57:23,753 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:23,902 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-25 18:57:23,902 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-25 18:57:24,001 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:24,027 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:24,027 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-25 18:57:24,027 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:24,028 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-25 18:57:24,029 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.10505050505050506], res=[0.0, 0.0, 0.0, 0.0, 0.04646464646464646], res_norm=4.646e-02
2026-01-25 18:57:24,030 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.20505050505050507], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.16060606060606059], res=[0.0, 0.0, 0.0, 0.0, 0.04444444444444448], res_norm=4.444e-02
2026-01-25 18:57:24,044 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,187 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:24,205 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,247 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:24,266 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,308 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:24,327 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,368 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:24,386 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,427 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:24,446 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,485 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:24,505 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,549 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:24,574 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,634 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:24,665 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,759 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:24,804 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,873 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:24,902 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:24,959 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:26,098 - INFO - integration_test - Step 0: MPC solve successful
2026-01-25 18:57:26,274 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:26,274 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:26,282 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:26,282 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:26,347 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:26,359 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-25 18:57:26,360 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:26,360 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-25 18:57:26,360 - INFO - integration_test - === Applying control at step 0 ===
2026-01-25 18:57:26,360 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019547464, 'w': 0.7999999823427512}
2026-01-25 18:57:26,360 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:26,360 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:26,361 - INFO - integration_test - Step 0 completed in 2.612s
2026-01-25 18:57:26,412 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-25 18:57:26,416 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.08       1.2        0.12      ]
2026-01-25 18:57:26,417 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-25 18:57:26,417 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-25 18:57:26,420 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:26,520 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-25 18:57:26,520 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-25 18:57:26,612 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:26,636 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:26,636 - INFO - integration_test - Warmstart k=0: x0=0.10987737538418296 , y0=0.004530844958386131 , psi0=0.07999999823427512 , v0=1.2000000019547463 , spline0=0.12000000019547463 , a0=0.0 , w0=0.0
2026-01-25 18:57:26,636 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:26,637 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358035227962, 0.014120608039098839, 0.07999999823427512, 1.2000000019547463, 0.24000000039094926], ws=[0.22949358035227962, 0.014120608039098839, 0.07999999823427517, 1.2000000019547463, 0.10585858586648383], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.13414141452446543], res_norm=1.341e-01
2026-01-25 18:57:26,638 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097853203763, 0.023710371119811554, 0.07999999823427517, 1.2000000019547463, 0.22585858606195847], ws=[0.3491097853203763, 0.023710371119811554, 0.07999999823427517, 1.2000000019547463, 0.16242424244201284], res=[0.0, 0.0, 0.0, 0.0, 0.06343434361994563], res_norm=6.343e-02
2026-01-25 18:57:26,638 - INFO - integration_test - Dyn residual k=2: pred=[0.46872599028847295, 0.03330013420052427, 0.07999999823427517, 1.2000000019547463, 0.28242424263748744], ws=[0.46872599028847295, 0.03330013420052427, 0.07999999823427517, 1.2000000019547463, 0.22141414144573326], res=[0.0, 0.0, 0.0, 0.0, 0.06101010119175418], res_norm=6.101e-02
2026-01-25 18:57:26,653 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:26,846 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:26,868 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:26,917 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:26,939 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:26,985 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:27,006 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:27,049 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:27,068 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:27,110 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:27,131 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:27,172 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:27,198 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:27,244 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:27,264 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:27,308 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:27,330 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:27,375 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:27,396 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:27,439 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:27,457 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:27,498 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:28,112 - INFO - integration_test - Step 1: MPC solve successful
2026-01-25 18:57:28,116 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:28,116 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:28,122 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:28,123 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:28,206 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:28,219 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-25 18:57:28,219 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:28,219 - INFO - integration_test - === Applying control at step 1 ===
2026-01-25 18:57:28,219 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018754516, 'w': 0.7999999516577277}
2026-01-25 18:57:28,219 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:28,219 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:28,221 - INFO - integration_test - Step 1 completed in 1.805s
2026-01-25 18:57:28,275 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-25 18:57:28,276 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-25 18:57:28,276 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-25 18:57:28,276 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-25 18:57:28,279 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:28,392 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-25 18:57:28,392 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-25 18:57:28,496 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:28,523 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:28,523 - INFO - integration_test - Warmstart k=0: x0=0.23889212825403014 , y0=0.020221621112527344 , psi0=0.1599999934000479 , v0=1.4000000038301978 , spline0=0.26000000057849443 , a0=0.0 , w0=0.0
2026-01-25 18:57:28,523 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:28,524 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394845195444, 0.042526169187352414, 0.1599999934000479, 1.4000000038301978, 0.4000000009615142], ws=[0.37710394845195444, 0.042526169187352414, 0.159999993400048, 1.4000000038301978, 0.16363636366550044], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.23636363729601378], res_norm=2.364e-01
2026-01-25 18:57:28,524 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157686498787, 0.0648307172621775, 0.159999993400048, 1.4000000038301978, 0.30363636404852024], ws=[0.5153157686498787, 0.0648307172621775, 0.159999993400048, 1.4000000038301978, 0.27979797986588556], res=[0.0, 0.0, 0.0, 0.0, 0.023838384182634675], res_norm=2.384e-02
2026-01-25 18:57:28,525 - INFO - integration_test - Dyn residual k=2: pred=[0.653527588847803, 0.08713526533700258, 0.159999993400048, 1.4000000038301978, 0.41979798024890536], ws=[0.653527588847803, 0.08713526533700258, 0.159999993400048, 1.4000000038301978, 0.5737373739118741], res=[0.0, 0.0, 0.0, 0.0, -0.15393939366296872], res_norm=1.539e-01
2026-01-25 18:57:28,541 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:28,694 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:28,716 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:28,759 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:28,779 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:28,820 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:28,839 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:28,880 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:28,900 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:28,943 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:28,961 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:29,004 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:29,024 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:29,067 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:29,086 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:29,130 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:29,151 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:29,194 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:29,214 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:29,256 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:29,275 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:29,317 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:29,850 - INFO - integration_test - Step 2: MPC solve successful
2026-01-25 18:57:29,853 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:29,853 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:29,926 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:29,927 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:30,012 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:30,025 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-25 18:57:30,025 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:30,025 - INFO - integration_test - === Applying control at step 2 ===
2026-01-25 18:57:30,025 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000194911842, 'w': 0.7999999790351388}
2026-01-25 18:57:30,025 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:30,025 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:30,027 - INFO - integration_test - Step 2 completed in 1.751s
2026-01-25 18:57:30,073 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-25 18:57:30,074 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999999 1.60000001 0.42      ]
2026-01-25 18:57:30,074 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-25 18:57:30,074 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-25 18:57:30,078 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:30,187 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-25 18:57:30,188 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-25 18:57:30,307 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:30,338 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:30,338 - INFO - integration_test - Warmstart k=0: x0=0.385836436015093 , y0=0.05014471468759553 , psi0=0.23999999130356175 , v0=1.6000000057793162 , spline0=0.42000000115642605 , a0=0.0 , w0=0.0
2026-01-25 18:57:30,338 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:30,339 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505128835312, 0.088177133701764, 0.23999999130356175, 1.6000000057793162, 0.5800000017343576], ws=[0.5412505128835312, 0.08817713370176401, 0.23999999130356198, 1.6000000057793162, 0.2818181819057757], res=[0.0, -1.3877787807814457e-17, -2.220446049250313e-16, 0.0, 0.29818181982858194], res_norm=2.982e-01
2026-01-25 18:57:30,340 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645897519694, 0.12620955271593254, 0.23999999130356198, 1.6000000057793162, 0.4418181824837073], ws=[0.6966645897519694, 0.12620955271593254, 0.23999999130356198, 1.6000000057793162, 0.3478787880189266], res=[0.0, 0.0, 0.0, 0.0, 0.09393939446478072], res_norm=9.394e-02
2026-01-25 18:57:30,341 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786666204077, 0.16424197173010105, 0.23999999130356198, 1.6000000057793162, 0.5078787885968582], ws=[0.8520786666204077, 0.16424197173010105, 0.23999999130356198, 1.6000000057793162, 0.4171717173760762], res=[0.0, 0.0, 0.0, 0.0, 0.09070707122078198], res_norm=9.071e-02
2026-01-25 18:57:30,359 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:30,509 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:30,530 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:30,571 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:30,592 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:30,633 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:30,653 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:30,701 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:30,723 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:30,770 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:30,791 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:30,838 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:30,859 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:30,904 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:30,926 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:30,972 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:30,993 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:31,037 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:31,058 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:31,099 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:31,123 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:31,188 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:31,807 - INFO - integration_test - Step 3: MPC solve successful
2026-01-25 18:57:31,812 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:31,812 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:31,821 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:31,822 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:31,944 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:31,958 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-25 18:57:31,959 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:31,959 - INFO - integration_test - === Applying control at step 3 ===
2026-01-25 18:57:31,959 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000178669826, 'w': 0.799999831690368}
2026-01-25 18:57:31,959 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:31,959 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:31,961 - INFO - integration_test - Step 3 completed in 1.887s
2026-01-25 18:57:32,041 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-25 18:57:32,043 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999997 1.80000001 0.6       ]
2026-01-25 18:57:32,044 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-25 18:57:32,044 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-25 18:57:32,052 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:32,299 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-25 18:57:32,299 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-25 18:57:32,412 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:32,441 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:32,441 - INFO - integration_test - Warmstart k=0: x0=0.5491354623682647 , y0=0.0972407524175397 , psi0=0.31999997447259854 , v0=1.8000000075660145 , spline0=0.6000000019130275 , a0=0.0 , w0=0.0
2026-01-25 18:57:32,441 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:32,442 - INFO - integration_test - Dyn residual k=0: pred=[0.719997839786709, 0.15386272920476993, 0.31999997447259854, 1.8000000075660145, 0.780000002669629], ws=[0.719997839786709, 0.15386272920476993, 0.31999997447259876, 1.8000000075660145, 0.350303030464826], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.42969697220480296], res_norm=4.297e-01
2026-01-25 18:57:32,443 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602172051532, 0.2104847059920002, 0.31999997447259876, 1.8000000075660145, 0.5303030312214275], ws=[0.8908602172051532, 0.2104847059920002, 0.31999997447259876, 1.8000000075660145, 0.7224242428395431], res=[0.0, 0.0, 0.0, 0.0, -0.19212121161811557], res_norm=1.921e-01
2026-01-25 18:57:32,444 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225946235973, 0.26710668277923044, 0.31999997447259876, 1.8000000075660145, 0.9024242435961446], ws=[1.0617225946235975, 0.2671066827792305, 0.31999997447259876, 1.8000000075660145, 1.0543434350616985], res=[-2.220446049250313e-16, -5.551115123125783e-17, 0.0, 0.0, -0.15191919146555388], res_norm=1.519e-01
2026-01-25 18:57:32,460 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:32,636 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:32,660 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:32,707 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:32,729 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:32,774 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:32,794 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:32,842 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:32,864 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:32,913 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:32,936 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:32,983 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:33,006 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:33,055 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:33,076 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:33,123 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:33,144 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:33,187 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:33,212 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:33,259 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:33,279 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:33,326 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:34,047 - INFO - integration_test - Step 4: MPC solve successful
2026-01-25 18:57:34,052 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:34,052 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:34,060 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:34,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:34,181 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:34,195 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-25 18:57:34,195 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:34,195 - INFO - integration_test - === Applying control at step 4 ===
2026-01-25 18:57:34,195 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999755, 'w': 0.8000000099665485}
2026-01-25 18:57:34,195 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:34,195 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:34,196 - INFO - integration_test - Step 4 completed in 2.154s
2026-01-25 18:57:34,263 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-25 18:57:34,264 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427976 0.39999998 2.00000001 0.8       ]
2026-01-25 18:57:34,264 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-25 18:57:34,264 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-25 18:57:34,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:34,390 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-25 18:57:34,390 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-25 18:57:34,503 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:34,527 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:34,527 - INFO - integration_test - Warmstart k=0: x0=0.7268614915205371 , y0=0.16427975938353906 , psi0=0.39999997546925337 , v0=2.0000000095659902 , spline0=0.8000000028696266 , a0=0.0 , w0=0.0
2026-01-25 18:57:34,527 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:34,528 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736931127447, 0.24216342369892352, 0.39999997546925337, 2.0000000095659902, 1.0000000038262256], ws=[0.9110736931127447, 0.24216342369892355, 0.39999997546925314, 2.0000000095659902, 0.7272727277365122], res=[0.0, -2.7755575615628914e-17, 2.220446049250313e-16, 0.0, 0.27272727608971337], res_norm=2.727e-01
2026-01-25 18:57:34,529 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858947049522, 0.320047088014308, 0.39999997546925314, 2.0000000095659902, 0.9272727286931113], ws=[1.0952858947049522, 0.320047088014308, 0.39999997546925314, 2.0000000095659902, 1.0646464654677577], res=[0.0, 0.0, 0.0, 0.0, -0.13737373677464637], res_norm=1.374e-01
2026-01-25 18:57:34,529 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980962971598, 0.39793075232969244, 0.39999997546925314, 2.0000000095659902, 1.2646464664243566], ws=[1.2794980962971598, 0.39793075232969244, 0.39999997546925314, 2.0000000095659902, 1.163636364679895], res=[0.0, 0.0, 0.0, 0.0, 0.10101010174446157], res_norm=1.010e-01
2026-01-25 18:57:34,544 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:34,695 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:34,721 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:34,768 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:34,790 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:34,854 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:34,887 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:34,940 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:34,958 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:35,005 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:35,025 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:35,073 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:35,095 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:35,145 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:35,165 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:35,213 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:35,234 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:35,282 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:35,308 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:35,350 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:35,370 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:35,419 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:36,056 - INFO - integration_test - Step 5: MPC solve successful
2026-01-25 18:57:36,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:36,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:36,153 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:36,154 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:36,261 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:36,274 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-25 18:57:36,274 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:36,274 - INFO - integration_test - === Applying control at step 5 ===
2026-01-25 18:57:36,274 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199936627, 'w': 0.8000000078739525}
2026-01-25 18:57:36,274 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:36,274 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:36,276 - INFO - integration_test - Step 5 completed in 2.012s
2026-01-25 18:57:36,335 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-25 18:57:36,335 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.25382379 0.47999998 2.20000001 1.02      ]
2026-01-25 18:57:36,336 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-25 18:57:36,336 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-25 18:57:36,339 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:36,453 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-25 18:57:36,453 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-25 18:57:36,561 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:36,587 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:36,587 - INFO - integration_test - Warmstart k=0: x0=0.916751907788217 , y0=0.25382379487469714 , psi0=0.47999997625664864 , v0=2.2000000115653564 , spline0=1.0200000040261623 , a0=0.0 , w0=0.0
2026-01-25 18:57:36,587 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:36,588 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907942376215, 0.35541520939463633, 0.47999997625664864, 2.2000000115653564, 1.240000005182698], ws=[1.1118907942376215, 0.35541520939463633, 0.4799999762566487, 2.2000000115653564, 1.0715151524051099], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.16848485277758818], res_norm=1.685e-01
2026-01-25 18:57:36,589 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296806870259, 0.4570066239145756, 0.4799999762566487, 2.2000000115653564, 1.2915151535616456], ws=[1.3070296806870259, 0.4570066239145755, 0.4799999762566487, 2.2000000115653564, 0.9787878797483689], res=[0.0, 5.551115123125783e-17, 0.0, 0.0, 0.3127272738132767], res_norm=3.127e-01
2026-01-25 18:57:36,590 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685671364304, 0.5585980384345147, 0.4799999762566487, 2.2000000115653564, 1.1987878809049046], ws=[1.5021685671364304, 0.5585980384345147, 0.4799999762566487, 2.2000000115653564, 1.3494949510092464], res=[0.0, 0.0, 0.0, 0.0, -0.1507070701043418], res_norm=1.507e-01
2026-01-25 18:57:36,606 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:36,760 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:36,781 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:36,829 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:36,853 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:36,906 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:36,931 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:36,980 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:37,005 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:37,055 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:37,078 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:37,129 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:37,151 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:37,199 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:37,222 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:37,266 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:37,286 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:37,332 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:37,355 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:37,403 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:37,428 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:37,478 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:38,135 - INFO - integration_test - Step 6: MPC solve successful
2026-01-25 18:57:38,141 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:38,141 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:38,152 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:38,153 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:38,378 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:38,391 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-25 18:57:38,392 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:38,392 - INFO - integration_test - === Applying control at step 6 ===
2026-01-25 18:57:38,392 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000193084766, 'w': 0.7999892853463604}
2026-01-25 18:57:38,392 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:38,392 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:38,393 - INFO - integration_test - Step 6 completed in 2.058s
2026-01-25 18:57:38,450 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-25 18:57:38,451 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623093 0.36819132 0.5599989  2.40000001 1.26000001]
2026-01-25 18:57:38,452 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-25 18:57:38,452 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-25 18:57:38,455 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:38,561 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-25 18:57:38,561 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-25 18:57:38,664 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:38,687 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:38,687 - INFO - integration_test - Warmstart k=0: x0=1.1162309343323067 , y0=0.36819132198490745 , psi0=0.5599989047912847 , v0=2.400000013496204 , spline0=1.2600000053757827 , a0=0.0 , w0=0.0
2026-01-25 18:57:38,687 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:38,688 - INFO - integration_test - Dyn residual k=0: pred=[1.319572301741219, 0.49567578750165786, 0.5599989047912847, 2.400000013496204, 1.5000000067254031], ws=[1.319572301741219, 0.49567578750165786, 0.5599989047912848, 2.400000013496204, 0.9848484858674854], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5151515208579177], res_norm=5.152e-01
2026-01-25 18:57:38,689 - INFO - integration_test - Dyn residual k=1: pred=[1.5229136691501315, 0.6231602530184083, 0.5599989047912848, 2.400000013496204, 1.224848487217106], ws=[1.5229136691501315, 0.6231602530184084, 0.5599989047912848, 2.400000013496204, 1.3616161632474797], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.13676767603037376], res_norm=1.368e-01
2026-01-25 18:57:38,690 - INFO - integration_test - Dyn residual k=2: pred=[1.7262550365590439, 0.7506447185351588, 0.5599989047912848, 2.400000013496204, 1.6016161645971], ws=[1.7262550365590439, 0.7506447185351588, 0.5599989047912848, 2.400000013496204, 1.4806060626052273], res=[0.0, 0.0, 0.0, 0.0, 0.12101010199187279], res_norm=1.210e-01
2026-01-25 18:57:38,706 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:38,870 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:38,890 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:38,939 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:38,962 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,012 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:39,034 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,081 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:39,102 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,149 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:39,169 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,218 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:39,240 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,287 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:39,311 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,355 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:39,379 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,428 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:39,448 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,499 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:39,524 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:39,574 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:40,211 - INFO - integration_test - Step 7: MPC solve successful
2026-01-25 18:57:40,216 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:40,216 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:40,225 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:40,225 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:40,371 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:40,387 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-25 18:57:40,387 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:40,387 - INFO - integration_test - === Applying control at step 7 ===
2026-01-25 18:57:40,387 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999589, 'w': -0.18372364965204258}
2026-01-25 18:57:40,387 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:40,388 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:40,389 - INFO - integration_test - Step 7 completed in 1.938s
2026-01-25 18:57:40,450 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-25 18:57:40,454 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32926883 0.49900837 0.54162654 2.60000002 1.52000001]
2026-01-25 18:57:40,455 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-25 18:57:40,455 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-25 18:57:40,458 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:40,569 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-25 18:57:40,569 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-25 18:57:40,775 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:40,802 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:40,802 - INFO - integration_test - Warmstart k=0: x0=1.3292688257693823 , y0=0.49900837155627786 , psi0=0.5416265398260804 , v0=2.600000015496163 , spline0=1.520000006925399 , a0=0.0 , w0=0.0
2026-01-25 18:57:40,802 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:40,803 - INFO - integration_test - Dyn residual k=0: pred=[1.5520553610608823, 0.6330462785028192, 0.5416265398260804, 2.600000015496163, 1.7800000084750152], ws=[1.5520553610608823, 0.6330462785028192, 0.5416265398260807, 2.600000015496163, 1.3696969714090939], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.4103030370659213], res_norm=4.103e-01
2026-01-25 18:57:40,804 - INFO - integration_test - Dyn residual k=1: pred=[1.7748418963523822, 0.7670841854493607, 0.5416265398260807, 2.600000015496163, 1.62969697295871], ws=[1.7748418963523822, 0.7670841854493607, 0.5416265398260807, 2.600000015496163, 1.4933333354597704], res=[0.0, 0.0, 0.0, 0.0, 0.13636363749893965], res_norm=1.364e-01
2026-01-25 18:57:40,805 - INFO - integration_test - Dyn residual k=2: pred=[1.9976284316438822, 0.9011220923959022, 0.5416265398260807, 2.600000015496163, 1.7533333370093866], ws=[1.9976284316438822, 0.9011220923959022, 0.5416265398260807, 2.600000015496163, 2.1383838417742744], res=[0.0, 0.0, 0.0, 0.0, -0.3850505047648878], res_norm=3.851e-01
2026-01-25 18:57:40,821 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,001 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:41,026 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,074 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:41,102 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,151 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:41,181 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,261 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:41,287 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,341 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:41,362 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,411 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:41,432 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,477 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:41,497 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,551 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:41,584 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,636 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:41,661 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,713 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:41,737 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:41,787 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:42,534 - INFO - integration_test - Step 8: MPC solve successful
2026-01-25 18:57:42,540 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:42,540 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:42,547 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:42,548 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:57:42,681 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:42,703 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-25 18:57:42,704 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:42,704 - INFO - integration_test - === Applying control at step 8 ===
2026-01-25 18:57:42,704 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199994212, 'w': -0.02960224377584047}
2026-01-25 18:57:42,704 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:42,704 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:42,705 - INFO - integration_test - Step 8 completed in 2.251s
2026-01-25 18:57:42,765 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-25 18:57:42,765 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56083229 0.63785472 0.53866632 2.80000002 1.80000001]
2026-01-25 18:57:42,766 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-25 18:57:42,766 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-25 18:57:42,769 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:42,892 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-25 18:57:42,892 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-25 18:57:43,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:43,036 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:43,036 - INFO - integration_test - Warmstart k=0: x0=1.5608322947329722 , y0=0.6378547165636643 , psi0=0.5386663154484964 , v0=2.8000000174961053 , spline0=1.8000000086750094 , a0=0.0 , w0=0.0
2026-01-25 18:57:43,036 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:43,037 - INFO - integration_test - Dyn residual k=0: pred=[1.8011825080374155, 0.781492371599837, 0.5386663154484964, 2.8000000174961053, 2.08000001042462], ws=[1.8011825080374155, 0.781492371599837, 0.5386663154484963, 2.8000000174961053, 1.7878787905112676], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.29212121991335227], res_norm=2.921e-01
2026-01-25 18:57:43,038 - INFO - integration_test - Dyn residual k=1: pred=[2.041532721341859, 0.9251300266360095, 0.5386663154484963, 2.8000000174961053, 2.067878792260878], ws=[2.041532721341859, 0.9251300266360096, 0.5386663154484963, 2.8000000174961053, 2.1559595995257848], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.08808080726490664], res_norm=8.808e-02
2026-01-25 18:57:43,039 - INFO - integration_test - Dyn residual k=2: pred=[2.281882934646302, 1.0687676816721823, 0.5386663154484963, 2.8000000174961053, 2.4359596012753952], ws=[2.281882934646302, 1.0687676816721823, 0.5386663154484963, 2.8000000174961053, 2.3151515193708607], res=[0.0, 0.0, 0.0, 0.0, 0.12080808190453451], res_norm=1.208e-01
2026-01-25 18:57:43,056 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,236 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:43,259 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,309 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:43,332 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,382 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:43,407 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,457 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:43,482 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,530 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:43,554 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,605 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:43,630 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,677 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:43,702 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,752 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:43,774 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,825 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:43,849 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,896 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:43,920 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:43,966 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:44,682 - INFO - integration_test - Step 9: MPC solve successful
2026-01-25 18:57:44,692 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:44,692 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:44,831 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:44,832 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 18:57:44,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:45,018 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-25 18:57:45,018 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:45,018 - INFO - integration_test - === Applying control at step 9 ===
2026-01-25 18:57:45,018 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199989114, 'w': -0.07467304796405437}
2026-01-25 18:57:45,018 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:45,018 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:45,020 - INFO - integration_test - Step 9 completed in 2.254s
2026-01-25 18:57:45,084 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-25 18:57:45,086 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81032592 0.78568077 0.53119901 3.00000002 2.10000001]
2026-01-25 18:57:45,086 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-25 18:57:45,086 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-25 18:57:45,090 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:45,214 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-25 18:57:45,214 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-25 18:57:45,331 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:45,361 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:45,361 - INFO - integration_test - Warmstart k=0: x0=1.810325919124639 , y0=0.785680769163723 , psi0=0.531199010652091 , v0=3.0000000194959964 , spline0=2.1000000106246093 , a0=0.0 , w0=0.0
2026-01-25 18:57:45,361 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:45,362 - INFO - integration_test - Dyn residual k=0: pred=[2.068986013986126, 0.9376510178836831, 0.531199010652091, 3.0000000194959964, 2.4000000125742087], ws=[2.06898601230518, 0.9376510168960793, 0.5311990106520907, 3.0, 1.9434343462246448], res=[1.680945604931594e-09, 9.876037765366164e-10, 2.220446049250313e-16, 1.9495996372853597e-08, 0.45656566634956386], res_norm=4.566e-01
2026-01-25 18:57:45,363 - INFO - integration_test - Dyn residual k=1: pred=[2.3276461054857216, 1.0896212646284356, 0.5311990106520907, 3.0, 2.243434346224645], ws=[2.3276461054857216, 1.0896212646284356, 0.5311990106520907, 3.0, 2.333333336552912], res=[0.0, 0.0, 0.0, 0.0, -0.08989899032826676], res_norm=8.990e-02
2026-01-25 18:57:45,363 - INFO - integration_test - Dyn residual k=2: pred=[2.586306198666263, 1.241591512360792, 0.5311990106520907, 3.0, 2.633333336552912], ws=[2.586306198666263, 1.241591512360792, 0.5311990106520907, 3.0, 2.7474747511236033], res=[0.0, 0.0, 0.0, 0.0, -0.11414141457069116], res_norm=1.141e-01
2026-01-25 18:57:45,381 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:45,548 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:45,571 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:45,620 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:45,642 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:45,690 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:45,712 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:45,762 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:45,785 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:45,838 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:45,862 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:45,909 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:45,930 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:45,976 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:45,997 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:46,046 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:46,069 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:46,119 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:46,142 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:46,194 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:46,218 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:46,265 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:46,890 - INFO - integration_test - Step 10: MPC solve successful
2026-01-25 18:57:46,899 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:46,899 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:46,910 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:46,911 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 37 trajectories
2026-01-25 18:57:47,206 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 37 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:47,222 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-25 18:57:47,223 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:47,223 - INFO - integration_test - === Applying control at step 10 ===
2026-01-25 18:57:47,223 - INFO - integration_test -   Control dict from planner: {'a': 1.0503891396145313e-07, 'w': -0.04708114189224175}
2026-01-25 18:57:47,223 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:47,223 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:47,224 - INFO - integration_test - Step 10 completed in 2.139s
2026-01-25 18:57:47,292 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-25 18:57:47,293 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.0693428  0.93704156 0.5264909  3.00000003 2.40000001]
2026-01-25 18:57:47,294 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-25 18:57:47,294 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-25 18:57:47,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:47,429 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-25 18:57:47,429 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-25 18:57:47,530 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:47,554 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:47,554 - INFO - integration_test - Warmstart k=0: x0=2.069342804830992 , y0=0.9370415572049631 , psi0=0.5264908964628668 , v0=3.000000029999888 , spline0=2.4000000136245982 , a0=0.0 , w0=0.0
2026-01-25 18:57:47,554 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:47,555 - INFO - integration_test - Dyn residual k=0: pred=[2.3287155244732425, 1.0877923253800397, 0.5264908964628668, 3.000000029999888, 2.700000016624587], ws=[2.3287155218795252, 1.0877923238725378, 0.526490896462867, 3.0, 2.3333333374619993], res=[2.593717240984006e-09, 1.5075019010879487e-09, -1.1102230246251565e-16, 2.999988790719499e-08, 0.3666666791625879], res_norm=3.667e-01
2026-01-25 18:57:47,555 - INFO - integration_test - Dyn residual k=1: pred=[2.5880882389280586, 1.2385430905401125, 0.526490896462867, 3.0, 2.633333337461999], ws=[2.5880882389280586, 1.2385430905401125, 0.526490896462867, 3.0, 2.7474747521539027], res=[0.0, 0.0, 0.0, 0.0, -0.11414141469190353], res_norm=1.141e-01
2026-01-25 18:57:47,556 - INFO - integration_test - Dyn residual k=2: pred=[2.847460955976592, 1.3892938572076872, 0.526490896462867, 3.0, 3.047474752153903], ws=[2.847460955976592, 1.3892938572076872, 0.526490896462867, 3.0, 2.934343439160211], res=[0.0, 0.0, 0.0, 0.0, 0.11313131299369195], res_norm=1.131e-01
2026-01-25 18:57:47,570 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:47,737 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:47,757 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:47,799 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:47,823 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:47,869 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:47,888 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:47,935 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:47,959 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:48,004 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:48,026 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:48,070 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:48,091 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:48,138 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:48,159 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:48,208 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:48,230 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:48,274 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:48,293 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:48,341 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:48,361 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:48,405 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:49,138 - INFO - integration_test - Step 11: MPC solve successful
2026-01-25 18:57:49,145 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:49,145 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:49,153 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:49,153 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:57:49,339 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:49,355 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-25 18:57:49,355 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:49,355 - INFO - integration_test - === Applying control at step 11 ===
2026-01-25 18:57:49,355 - INFO - integration_test -   Control dict from planner: {'a': -2.472330447972451e-12, 'w': -0.07839431928888405}
2026-01-25 18:57:49,355 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:49,355 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:49,356 - INFO - integration_test - Step 11 completed in 2.064s
2026-01-25 18:57:49,417 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-25 18:57:49,418 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32930376 1.08677412 0.51865146 3.00000003 2.70000002]
2026-01-25 18:57:49,419 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-25 18:57:49,419 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-25 18:57:49,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:49,535 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-25 18:57:49,535 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-25 18:57:49,635 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:49,661 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:49,661 - INFO - integration_test - Warmstart k=0: x0=2.3293037649499135 , y0=1.0867741190945133 , psi0=0.5186514645339785 , v0=3.0000000299996405 , spline0=2.7000000166245623 , a0=0.0 , w0=0.0
2026-01-25 18:57:49,662 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:49,662 - INFO - integration_test - Dyn residual k=0: pred=[2.5898503028186126, 1.2354869410185596, 0.5186514645339785, 3.0000000299996405, 3.0000000196245264], ws=[2.589850300213178, 1.2354869395314492, 0.5186514645339786, 3.0, 2.7474747531841928], res=[2.6054345347859e-09, 1.4871104347946584e-09, -1.1102230246251565e-16, 2.99996405495051e-08, 0.2525252664403337], res_norm=2.525e-01
2026-01-25 18:57:49,663 - INFO - integration_test - Dyn residual k=1: pred=[2.8503968354764426, 1.384199759968385, 0.5186514645339786, 3.0, 3.0474747531841926], ws=[2.8503968354764426, 1.384199759968385, 0.5186514645339786, 3.0, 2.934343440220805], res=[0.0, 0.0, 0.0, 0.0, 0.11313131296338774], res_norm=1.131e-01
2026-01-25 18:57:49,664 - INFO - integration_test - Dyn residual k=2: pred=[3.110943370739707, 1.532912580405321, 0.5186514645339786, 3.0, 3.2343434402208047], ws=[3.110943370739707, 1.532912580405321, 0.5186514645339786, 3.0, 3.3010101073912463], res=[0.0, 0.0, 0.0, 0.0, -0.06666666717044167], res_norm=6.667e-02
2026-01-25 18:57:49,679 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:49,834 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:49,855 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:49,898 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:49,922 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:49,964 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:49,982 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:50,030 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:50,051 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:50,094 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:50,116 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:50,161 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:50,182 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:50,229 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:50,249 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:50,293 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:50,316 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:50,363 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:50,385 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:50,434 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:50,454 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:50,497 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:51,119 - INFO - integration_test - Step 12: MPC solve successful
2026-01-25 18:57:51,125 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:51,125 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:51,273 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:51,275 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 36 trajectories
2026-01-25 18:57:51,445 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 36 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:51,461 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-25 18:57:51,461 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:51,461 - INFO - integration_test - === Applying control at step 12 ===
2026-01-25 18:57:51,462 - INFO - integration_test -   Control dict from planner: {'a': 2.510073571706433e-12, 'w': -0.05217277677868576}
2026-01-25 18:57:51,462 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:51,462 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:51,463 - INFO - integration_test - Step 12 completed in 2.045s
2026-01-25 18:57:51,518 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-25 18:57:51,519 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59023706 1.2348066  0.51343419 3.00000003 3.00000002]
2026-01-25 18:57:51,520 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-25 18:57:51,520 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-25 18:57:51,522 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:51,633 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.870m
2026-01-25 18:57:51,633 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-25 18:57:51,735 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:51,759 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:51,759 - INFO - integration_test - Warmstart k=0: x0=2.590237057971245 , y0=1.2348065960830437 , psi0=0.5134341868561099 , v0=3.0000000299998915 , spline0=3.0000000196245518 , a0=0.0 , w0=0.0
2026-01-25 18:57:51,759 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:51,760 - INFO - integration_test - Dyn residual k=0: pred=[2.851555922377757, 1.3821580565620097, 0.5134341868561099, 3.0000000299998915, 3.300000022624541], ws=[2.851555919764578, 1.3821580550885004, 0.5134341868561099, 3.0, 2.934343441281407], res=[2.613179006516475e-09, 1.4735093145645806e-09, 0.0, 2.999989145990867e-08, 0.36565658134313406], res_norm=3.657e-01
2026-01-25 18:57:51,761 - INFO - integration_test - Dyn residual k=1: pred=[3.1128747815579114, 1.5295095140939572, 0.5134341868561099, 3.0, 3.234343441281407], ws=[3.1128747815579114, 1.5295095140939572, 0.5134341868561099, 3.0, 3.3010101085427572], res=[0.0, 0.0, 0.0, 0.0, -0.06666666726135029], res_norm=6.667e-02
2026-01-25 18:57:51,761 - INFO - integration_test - Dyn residual k=2: pred=[3.3741936433512447, 1.676860973099414, 0.5134341868561099, 3.0, 3.6010101085427575], ws=[3.3741936433512447, 1.676860973099414, 0.5134341868561099, 3.0, 3.6858585939859254], res=[0.0, 0.0, 0.0, 0.0, -0.08484848544316792], res_norm=8.485e-02
2026-01-25 18:57:51,779 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:51,942 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:51,962 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,010 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:52,032 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,076 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:52,097 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,144 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:52,164 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,211 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:52,233 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,276 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:52,296 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,339 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:52,361 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,405 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:52,427 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,473 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:52,493 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,536 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:52,554 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:52,594 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:53,293 - INFO - integration_test - Step 13: MPC solve successful
2026-01-25 18:57:53,305 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:53,305 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:53,315 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:53,315 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 37 trajectories
2026-01-25 18:57:53,497 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 37 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:53,520 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-25 18:57:53,520 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:53,520 - INFO - integration_test - === Applying control at step 13 ===
2026-01-25 18:57:53,520 - INFO - integration_test -   Control dict from planner: {'a': -5.213231671871271e-13, 'w': -0.06748957631927709}
2026-01-25 18:57:53,520 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:53,520 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:53,521 - INFO - integration_test - Step 13 completed in 2.002s
2026-01-25 18:57:53,577 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-25 18:57:53,581 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85205117 1.38127513 0.50668523 3.00000003 3.30000002]
2026-01-25 18:57:53,581 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.146m, drift=0.370m)
2026-01-25 18:57:53,581 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-25 18:57:53,584 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:53,842 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-25 18:57:53,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-25 18:57:53,987 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:54,017 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:54,017 - INFO - integration_test - Warmstart k=0: x0=2.8520511710997027 , y0=1.38127512633502 , psi0=0.5066852292241821 , v0=3.0000000299998395 , spline0=3.300000022624536 , a0=0.0 , w0=0.0
2026-01-25 18:57:54,017 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:54,018 - INFO - integration_test - Dyn residual k=0: pred=[3.1143585454112914, 1.52685961445704, 0.5066852292241821, 3.0000000299998395, 3.60000002562452], ws=[3.1143585427882314, 1.526859613001203, 0.5066852292241819, 3.0, 3.301010109694266], res=[2.623059991435639e-09, 1.4558370065032022e-09, 2.220446049250313e-16, 2.9999839501471115e-08, 0.29898991593025404], res_norm=2.990e-01
2026-01-25 18:57:54,019 - INFO - integration_test - Dyn residual k=1: pred=[3.37666591447676, 1.6724440996673862, 0.5066852292241819, 3.0, 3.6010101096942657], ws=[3.37666591447676, 1.6724440996673862, 0.5066852292241819, 3.0, 3.685858595228343], res=[0.0, 0.0, 0.0, 0.0, -0.08484848553407742], res_norm=8.485e-02
2026-01-25 18:57:54,020 - INFO - integration_test - Dyn residual k=2: pred=[3.638973286165289, 1.8180285863335692, 0.5066852292241819, 3.0, 3.9858585952283434], ws=[3.638973286165289, 1.8180285863335692, 0.5066852292241819, 3.0, 3.6242424331551204], res=[0.0, 0.0, 0.0, 0.0, 0.361616162073223], res_norm=3.616e-01
2026-01-25 18:57:54,037 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,193 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:54,216 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,261 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:54,281 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,327 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:54,347 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,387 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:54,411 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,455 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:54,474 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,519 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:54,540 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,580 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:54,599 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,647 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:54,667 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,712 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:54,733 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,775 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:54,793 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:54,843 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:55,486 - INFO - integration_test - Step 14: MPC solve successful
2026-01-25 18:57:55,494 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:55,494 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:55,503 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:55,504 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:57:55,736 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:55,755 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-25 18:57:55,756 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:55,756 - INFO - integration_test - === Applying control at step 14 ===
2026-01-25 18:57:55,756 - INFO - integration_test -   Control dict from planner: {'a': -1.5602466474325466e-11, 'w': -0.055593817427587115}
2026-01-25 18:57:55,756 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:55,756 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:55,757 - INFO - integration_test - Step 14 completed in 2.177s
2026-01-25 18:57:55,822 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-25 18:57:55,823 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11476187 1.52612973 0.50112585 3.00000003 3.60000003]
2026-01-25 18:57:55,824 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-25 18:57:55,824 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-25 18:57:55,827 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:55,947 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-25 18:57:55,947 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-25 18:57:56,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:56,078 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:56,078 - INFO - integration_test - Warmstart k=0: x0=3.1147618730667723 , y0=1.5261297329989667 , psi0=0.5011258474814234 , v0=3.0000000299982794 , spline0=3.6000000256243636 , a0=0.0 , w0=0.0
2026-01-25 18:57:56,078 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:56,079 - INFO - integration_test - Dyn residual k=0: pred=[3.377874549433866, 1.670253712040769, 0.5011258474814234, 3.0000000299982794, 3.9000000286241914], ws=[3.37787454680289, 1.6702537105996118, 0.5011258474814233, 3.0, 3.685858596470696], res=[2.6309758816012163e-09, 1.4411571935823986e-09, 1.1102230246251565e-16, 2.999827941607691e-08, 0.21414143215349535], res_norm=2.141e-01
2026-01-25 18:57:56,080 - INFO - integration_test - Dyn residual k=1: pred=[3.6409872205390075, 1.814377688200257, 0.5011258474814233, 3.0, 3.9858585964706963], ws=[3.6409872205390075, 1.814377688200257, 0.5011258474814233, 3.0, 3.62424243433687], res=[0.0, 0.0, 0.0, 0.0, 0.3616161621338261], res_norm=3.616e-01
2026-01-25 18:57:56,081 - INFO - integration_test - Dyn residual k=2: pred=[3.9040998942751255, 1.958501665800902, 0.5011258474814233, 3.0, 3.92424243433687], ws=[3.904099894275125, 1.958501665800902, 0.5011258474814233, 3.0, 4.030303041173972], res=[4.440892098500626e-16, 0.0, 0.0, 0.0, -0.10606060683710172], res_norm=1.061e-01
2026-01-25 18:57:56,096 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,255 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:56,276 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,321 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:56,341 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,392 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:56,418 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,464 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:56,484 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,530 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:56,550 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,598 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:56,621 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,664 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:56,688 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,731 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:56,750 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,795 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:56,818 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,864 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:56,886 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:56,940 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:57,554 - INFO - integration_test - Step 15: MPC solve successful
2026-01-25 18:57:57,564 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:57,564 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:57,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:57,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:57:57,932 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:57:57,950 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-25 18:57:57,950 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:57:57,950 - INFO - integration_test - === Applying control at step 15 ===
2026-01-25 18:57:57,950 - INFO - integration_test -   Control dict from planner: {'a': 1.6099171045109853e-11, 'w': -0.0620112033983156}
2026-01-25 18:57:57,950 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:57:57,950 - INFO - integration_test -   Planner output success: True
2026-01-25 18:57:57,951 - INFO - integration_test - Step 15 completed in 2.128s
2026-01-25 18:57:58,007 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-25 18:57:58,009 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37831973 1.66943699 0.49492473 3.00000003 3.90000003]
2026-01-25 18:57:58,010 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.147m, drift=0.482m)
2026-01-25 18:57:58,010 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-25 18:57:58,013 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:58,126 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.669), path_start=(0.000, 0.000), dist=3.768m
2026-01-25 18:57:58,126 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-25 18:57:58,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:57:58,260 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:57:58,260 - INFO - integration_test - Warmstart k=0: x0=3.3783197267898166 , y0=1.6694369942843001 , psi0=0.49492472714159186 , v0=3.0000000299998892 , spline0=3.9000000286243526 , a0=0.0 , w0=0.0
2026-01-25 18:57:58,260 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:57:58,261 - INFO - integration_test - Dyn residual k=0: pred=[3.6423210687298533, 1.8119266193587358, 0.49492472714159186, 3.0000000299998892, 4.2000000316243415], ws=[3.6423210660898495, 1.8119266179338447, 0.49492472714159197, 3.0, 3.624242435518684], res=[2.6400037711482582e-09, 1.4248910940040105e-09, -1.1102230246251565e-16, 2.999988923946262e-08, 0.5757575961056576], res_norm=5.758e-01
2026-01-25 18:57:58,261 - INFO - integration_test - Dyn residual k=1: pred=[3.9063224053898824, 1.9544162415833894, 0.49492472714159197, 3.0, 3.924242435518684], ws=[3.9063224053898824, 1.9544162415833894, 0.49492472714159197, 3.0, 4.030303042446695], res=[0.0, 0.0, 0.0, 0.0, -0.10606060692801123], res_norm=1.061e-01
2026-01-25 18:57:58,262 - INFO - integration_test - Dyn residual k=2: pred=[4.170323744689915, 2.096905865232934, 0.49492472714159197, 3.0, 4.330303042446695], ws=[4.170323744689916, 2.096905865232934, 0.49492472714159197, 3.0, 4.157575769719423], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, 0.17272727272727195], res_norm=1.727e-01
2026-01-25 18:57:58,286 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,457 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:58,476 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,520 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:58,542 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,582 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:58,601 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,649 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:58,669 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,714 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:58,734 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,777 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:58,796 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,844 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:58,865 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,909 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:58,930 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:58,990 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:57:59,011 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:59,060 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:59,079 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:57:59,124 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:57:59,854 - INFO - integration_test - Step 16: MPC solve successful
2026-01-25 18:57:59,863 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:57:59,863 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:57:59,872 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:57:59,873 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:00,090 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:00,107 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-25 18:58:00,107 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:00,107 - INFO - integration_test - === Applying control at step 16 ===
2026-01-25 18:58:00,107 - INFO - integration_test -   Control dict from planner: {'a': -6.583893245957176e-12, 'w': -0.05747473045089568}
2026-01-25 18:58:00,107 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:00,108 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:00,109 - INFO - integration_test - Step 16 completed in 2.100s
2026-01-25 18:58:00,167 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-25 18:58:00,169 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64272909 1.81116717 0.48917725 3.00000003 4.20000003]
2026-01-25 18:58:00,169 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.143m, drift=0.294m)
2026-01-25 18:58:00,169 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-25 18:58:00,172 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:00,331 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-25 18:58:00,332 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-25 18:58:00,437 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:00,465 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:00,466 - INFO - integration_test - Warmstart k=0: x0=3.6427290917657515 , y0=1.8111671666629592 , psi0=0.4891772540965023 , v0=3.0000000299992307 , spline0=4.200000031624276 , a0=0.0 , w0=0.0
2026-01-25 18:58:00,466 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:00,467 - INFO - integration_test - Dyn residual k=0: pred=[3.907545024051152, 1.9521371060392958, 0.4891772540965023, 3.0000000299992307, 4.500000034624199], ws=[3.9075450214030605, 1.9521371046296325, 0.48917725409650226, 3.0, 4.03030304371939], res=[2.6480915238380476e-09, 1.4096632749982518e-09, 5.551115123125783e-17, 2.999923065516441e-08, 0.46969699090480876], res_norm=4.697e-01
2026-01-25 18:58:00,468 - INFO - integration_test - Dyn residual k=1: pred=[4.172360951040369, 2.093107042596306, 0.48917725409650226, 3.0, 4.33030304371939], ws=[4.172360951040369, 2.093107042596306, 0.48917725409650226, 3.0, 4.157575770992117], res=[0.0, 0.0, 0.0, 0.0, 0.17272727272727284], res_norm=1.727e-01
2026-01-25 18:58:00,469 - INFO - integration_test - Dyn residual k=2: pred=[4.437176880677678, 2.234076980562979, 0.48917725409650226, 3.0, 4.457575770992117], ws=[4.437176880677678, 2.234076980562979, 0.48917725409650226, 3.0, 4.847474779099023], res=[0.0, 0.0, 0.0, 0.0, -0.38989900810690603], res_norm=3.899e-01
2026-01-25 18:58:00,486 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:00,805 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:00,827 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:00,871 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:00,891 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:00,937 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:00,959 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:01,004 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:01,026 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:01,070 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:01,091 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:01,137 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:01,159 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:01,206 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:01,230 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:01,273 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:01,293 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:01,338 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:01,358 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:01,399 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:01,422 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:01,467 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:02,069 - INFO - integration_test - Step 17: MPC solve successful
2026-01-25 18:58:02,079 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:02,079 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:02,089 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:02,090 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:02,324 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:02,343 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-25 18:58:02,343 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:02,343 - INFO - integration_test - === Applying control at step 17 ===
2026-01-25 18:58:02,343 - INFO - integration_test -   Control dict from planner: {'a': 6.579121722206957e-12, 'w': -0.06191540784464145}
2026-01-25 18:58:02,343 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:02,343 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:02,345 - INFO - integration_test - Step 17 completed in 2.176s
2026-01-25 18:58:02,403 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-25 18:58:02,406 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90797974 1.9513164  0.48298571 3.00000003 4.50000003]
2026-01-25 18:58:02,407 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-25 18:58:02,407 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-25 18:58:02,411 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:02,522 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.951), path_start=(0.000, 0.000), dist=4.368m
2026-01-25 18:58:02,522 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-25 18:58:02,622 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:02,647 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:02,647 - INFO - integration_test - Warmstart k=0: x0=3.907979741263969 , y0=1.9513163986529036 , psi0=0.48298571331203816 , v0=3.0000000299998884 , spline0=4.500000034624264 , a0=0.0 , w0=0.0
2026-01-25 18:58:02,647 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:02,648 - INFO - integration_test - Dyn residual k=0: pred=[4.173663413235205, 2.090644027814798, 0.48298571331203816, 3.0000000299998884, 4.800000037624253], ws=[4.173663410578378, 2.090644026421527, 0.4829857133120381, 3.0, 4.15757577226484], res=[2.6568267585957983e-09, 1.3932712761288712e-09, 5.551115123125783e-17, 2.99998883512842e-08, 0.6424242653594128], res_norm=6.424e-01
2026-01-25 18:58:02,649 - INFO - integration_test - Dyn residual k=1: pred=[4.439347079892786, 2.22997165419015, 0.4829857133120381, 3.0, 4.45757577226484], ws=[4.439347079892786, 2.22997165419015, 0.4829857133120381, 3.0, 4.847474782099011], res=[0.0, 0.0, 0.0, 0.0, -0.3898990098341715], res_norm=3.899e-01
2026-01-25 18:58:02,650 - INFO - integration_test - Dyn residual k=2: pred=[4.705030749207195, 2.369299281958773, 0.4829857133120381, 3.0, 5.147474782099011], ws=[4.705030749207195, 2.3692992819587735, 0.4829857133120381, 3.0, 5.248484883109112], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:02,665 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:02,817 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:02,838 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:02,883 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:02,903 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:02,951 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:02,971 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:03,019 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:03,040 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:03,083 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:03,104 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:03,149 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:03,169 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:03,215 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:03,237 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:03,283 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:03,303 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:03,349 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:03,370 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:03,414 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:03,435 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:03,479 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:04,115 - INFO - integration_test - Step 18: MPC solve successful
2026-01-25 18:58:04,128 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:04,128 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:04,138 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:04,139 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:04,390 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:04,409 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-25 18:58:04,409 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:04,409 - INFO - integration_test - === Applying control at step 18 ===
2026-01-25 18:58:04,409 - INFO - integration_test -   Control dict from planner: {'a': -1.3802489012011715e-14, 'w': -0.05220776329317696}
2026-01-25 18:58:04,409 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:04,409 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:04,411 - INFO - integration_test - Step 18 completed in 2.005s
2026-01-25 18:58:04,474 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-25 18:58:04,474 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.1740259  2.08994986 0.47776494 3.00000003 4.80000004]
2026-01-25 18:58:04,475 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.127m, drift=0.405m)
2026-01-25 18:58:04,475 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-25 18:58:04,478 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:04,775 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-25 18:58:04,775 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-25 18:58:04,877 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:04,902 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:04,902 - INFO - integration_test - Warmstart k=0: x0=4.174025904670252 , y0=2.0899498589474077 , psi0=0.47776493698272043 , v0=3.000000029999887 , spline0=4.800000037624253 , a0=0.0 , w0=0.0
2026-01-25 18:58:04,902 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:04,903 - INFO - integration_test - Dyn residual k=0: pred=[4.440433350929444, 2.2278885205968852, 0.47776493698272043, 3.000000029999887, 5.100000040624241], ws=[4.44043334826538, 2.2278885192175037, 0.4777649369827204, 3.0, 4.847474785099], res=[2.6640645245379346e-09, 1.3793814979123908e-09, 5.551115123125783e-17, 2.999988701901657e-08, 0.2525252555252413], res_norm=2.525e-01
2026-01-25 18:58:04,904 - INFO - integration_test - Dyn residual k=1: pred=[4.7068407918605075, 2.3658271794876, 0.4777649369827204, 3.0, 5.147474785099], ws=[4.7068407918605075, 2.3658271794876, 0.4777649369827204, 3.0, 5.248484886109101], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:04,905 - INFO - integration_test - Dyn residual k=2: pred=[4.973248235455635, 2.503765839757696, 0.4777649369827204, 3.0, 5.548484886109101], ws=[4.973248235455635, 2.503765839757696, 0.4777649369827204, 3.0, 5.144444482068697], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-25 18:58:04,923 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,083 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:05,106 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,154 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:05,176 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,225 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:05,247 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,292 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:05,313 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,358 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:05,379 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,424 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:05,445 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,492 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:05,512 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,556 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:05,575 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,618 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:05,640 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,682 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:05,704 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:05,748 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:06,412 - INFO - integration_test - Step 19: MPC solve successful
2026-01-25 18:58:06,424 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:06,424 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:06,433 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:06,434 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:06,668 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:06,690 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-25 18:58:06,690 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:06,690 - INFO - integration_test - === Applying control at step 19 ===
2026-01-25 18:58:06,690 - INFO - integration_test -   Control dict from planner: {'a': -3.0773876987492948e-12, 'w': -0.05794213679512408}
2026-01-25 18:58:06,690 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:06,690 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:06,691 - INFO - integration_test - Step 19 completed in 2.217s
2026-01-25 18:58:06,752 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-25 18:58:06,753 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44083148 2.22711594 0.47197072 3.00000003 5.10000004]
2026-01-25 18:58:06,754 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.153m, drift=0.217m)
2026-01-25 18:58:06,754 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-25 18:58:06,757 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:06,875 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-25 18:58:06,875 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-25 18:58:06,981 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:07,009 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:07,009 - INFO - integration_test - Warmstart k=0: x0=4.440831482175161 , y0=2.2271159400890714 , psi0=0.47197072330320805 , v0=3.0000000299995793 , spline0=5.100000040624211 , a0=0.0 , w0=0.0
2026-01-25 18:58:07,009 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:07,010 - INFO - integration_test - Dyn residual k=0: pred=[4.708033698018042, 2.3635086732115864, 0.47197072330320805, 3.0000000299995793, 5.4000000436241695], ws=[4.708033695346057, 2.363508671847678, 0.4719707233032082, 3.0, 5.24848488910906], res=[2.6719852996848203e-09, 1.363908541662795e-09, -1.6653345369377348e-16, 2.999957926519414e-08, 0.15151515451510988], res_norm=1.515e-01
2026-01-25 18:58:07,011 - INFO - integration_test - Dyn residual k=1: pred=[4.975235908516952, 2.4999014036062843, 0.4719707233032082, 3.0, 5.5484848891090595], ws=[4.975235908516952, 2.4999014036062843, 0.4719707233032082, 3.0, 5.1444444850686555], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-25 18:58:07,012 - INFO - integration_test - Dyn residual k=2: pred=[5.242438121687847, 2.6362941353648908, 0.4719707233032082, 3.0, 5.444444485068655], ws=[5.242438121687847, 2.6362941353648908, 0.4719707233032082, 3.0, 5.545454586078756], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:07,029 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,190 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:07,214 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,262 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:07,283 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,328 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:07,350 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,393 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:07,414 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,458 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:07,478 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,521 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:07,542 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,583 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:07,603 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,650 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:07,670 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,716 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:07,737 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,781 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:07,800 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:07,844 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:08,446 - INFO - integration_test - Step 20: MPC solve successful
2026-01-25 18:58:08,458 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:08,458 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:08,466 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:08,467 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:08,938 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:08,978 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-25 18:58:08,979 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:08,979 - INFO - integration_test - === Applying control at step 20 ===
2026-01-25 18:58:08,979 - INFO - integration_test -   Control dict from planner: {'a': 3.0864586161815173e-12, 'w': -0.07227792777140991}
2026-01-25 18:58:08,979 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:08,979 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:08,982 - INFO - integration_test - Step 20 completed in 2.229s
2026-01-25 18:58:09,051 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-25 18:58:09,051 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70852428 2.36254185 0.46474293 3.00000003 5.40000004]
2026-01-25 18:58:09,052 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-25 18:58:09,052 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-25 18:58:09,055 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:09,166 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.709, 2.363), path_start=(0.000, 0.000), dist=5.268m
2026-01-25 18:58:09,166 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-25 18:58:09,275 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:09,301 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:09,301 - INFO - integration_test - Warmstart k=0: x0=4.708524278599565 , y0=2.3625418487472687 , psi0=0.4647429305260671 , v0=3.000000029999888 , spline0=5.4000000436242 , a0=0.0 , w0=0.0
2026-01-25 18:58:09,301 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:09,302 - INFO - integration_test - Dyn residual k=0: pred=[4.97670532484691, 2.4969997538093103, 0.4647429305260671, 3.000000029999888, 5.700000046624188], ws=[4.97670532216511, 2.496999752464736, 0.4647429305260671, 3.0, 5.144444488068644], res=[2.6818005594009264e-09, 1.3445742297335528e-09, 0.0, 2.999988790719499e-08, 0.5555555585555441], res_norm=5.556e-01
2026-01-25 18:58:09,303 - INFO - integration_test - Dyn residual k=1: pred=[5.244886365730654, 2.6314576561822034, 0.4647429305260671, 3.0, 5.444444488068644], ws=[5.244886365730654, 2.6314576561822034, 0.4647429305260671, 3.0, 5.545454589078744], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:09,304 - INFO - integration_test - Dyn residual k=2: pred=[5.513067409296198, 2.7659155598996708, 0.4647429305260671, 3.0, 5.845454589078744], ws=[5.513067409296198, 2.7659155598996708, 0.4647429305260671, 3.0, 5.946464690088845], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:09,321 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,474 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:09,494 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,540 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:09,561 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,603 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:09,627 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,670 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:09,690 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,738 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:09,757 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,798 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:09,822 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,866 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:09,885 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,931 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:09,952 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:09,996 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:10,018 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:10,065 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:10,085 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:10,134 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:10,800 - INFO - integration_test - Step 21: MPC solve successful
2026-01-25 18:58:10,816 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:10,816 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:10,825 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:10,826 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:11,097 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:11,122 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-25 18:58:11,122 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:11,122 - INFO - integration_test - === Applying control at step 21 ===
2026-01-25 18:58:11,122 - INFO - integration_test -   Control dict from planner: {'a': -2.849365498542088e-10, 'w': -0.04444465218399907}
2026-01-25 18:58:11,122 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:11,122 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:11,124 - INFO - integration_test - Step 21 completed in 2.072s
2026-01-25 18:58:11,183 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-25 18:58:11,184 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97700324 2.49640335 0.46029847 3.00000003 5.70000005]
2026-01-25 18:58:11,185 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-25 18:58:11,185 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-25 18:58:11,188 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:11,306 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.496), path_start=(0.000, 0.000), dist=5.568m
2026-01-25 18:58:11,306 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-25 18:58:11,410 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:11,439 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:11,439 - INFO - integration_test - Warmstart k=0: x0=4.977003238187068 , y0=2.4964033514600965 , psi0=0.46029846530766716 , v0=3.0000000299713943 , spline0=5.700000046621339 , a0=0.0 , w0=0.0
2026-01-25 18:58:11,439 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:11,440 - INFO - integration_test - Dyn residual k=0: pred=[5.2457792272247525, 2.629668011123108, 0.46029846530766716, 3.0000000299713943, 6.000000049618478], ws=[5.245779224539556, 2.629668009791732, 0.46029846530766694, 3.0, 5.545454592075884], res=[2.6851969536778597e-09, 1.331375898416809e-09, 2.220446049250313e-16, 2.997139425531259e-08, 0.45454545754259446], res_norm=4.545e-01
2026-01-25 18:58:11,441 - INFO - integration_test - Dyn residual k=1: pred=[5.514555210892043, 2.7629326681233675, 0.46029846530766694, 3.0, 5.845454592075884], ws=[5.514555210892043, 2.7629326681233675, 0.46029846530766694, 3.0, 5.946464693085985], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:11,442 - INFO - integration_test - Dyn residual k=2: pred=[5.7833311972445305, 2.896197326455003, 0.46029846530766694, 3.0, 6.246464693085985], ws=[5.7833311972445305, 2.896197326455003, 0.46029846530766694, 3.0, 6.347474794096086], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:11,458 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:11,610 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:11,632 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:11,676 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:11,696 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:11,743 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:11,763 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:11,808 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:11,829 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:11,876 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:11,898 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:11,948 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:11,968 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:12,012 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:12,034 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:12,106 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:12,139 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:12,189 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:12,212 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:12,259 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:12,279 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:12,329 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:12,933 - INFO - integration_test - Step 22: MPC solve successful
2026-01-25 18:58:12,948 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:12,948 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:12,958 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:12,959 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:13,258 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:13,277 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-25 18:58:13,278 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:13,278 - INFO - integration_test - === Applying control at step 22 ===
2026-01-25 18:58:13,278 - INFO - integration_test -   Control dict from planner: {'a': 2.849344311055769e-10, 'w': -0.06290657099994247}
2026-01-25 18:58:13,278 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:13,278 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:13,279 - INFO - integration_test - Step 22 completed in 2.095s
2026-01-25 18:58:13,338 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-25 18:58:13,339 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24619661 2.62882175 0.45400781 3.00000003 6.00000005]
2026-01-25 18:58:13,339 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-25 18:58:13,339 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-25 18:58:13,342 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:13,661 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-25 18:58:13,661 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-25 18:58:13,764 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:13,803 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:13,803 - INFO - integration_test - Warmstart k=0: x0=5.246196614302495 , y0=2.6288217461885073 , psi0=0.4540078082076729 , v0=3.000000029999888 , spline0=6.0000000496213275 , a0=0.0 , w0=0.0
2026-01-25 18:58:13,803 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:13,805 - INFO - integration_test - Dyn residual k=0: pred=[5.515805602057704, 2.760393002630045, 0.4540078082076729, 3.000000029999888, 6.300000052621316], ws=[5.515805599361625, 2.7603930013143376, 0.45400780820767306, 3.0, 5.9464646960859735], res=[2.6960798038544453e-09, 1.315707542914879e-09, -1.6653345369377348e-16, 2.999988790719499e-08, 0.3535353565353425], res_norm=3.535e-01
2026-01-25 18:58:13,807 - INFO - integration_test - Dyn residual k=1: pred=[5.785414584420754, 2.891964256440168, 0.45400780820767306, 3.0, 6.246464696085973], ws=[5.785414584420754, 2.891964256440168, 0.45400780820767306, 3.0, 6.3474747970960745], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:13,808 - INFO - integration_test - Dyn residual k=2: pred=[6.055023569479883, 3.0235355115659983, 0.45400780820767306, 3.0, 6.647474797096074], ws=[6.055023569479883, 3.0235355115659983, 0.45400780820767306, 3.0, 6.748484898106176], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:13,827 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:13,991 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:14,012 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,060 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:14,082 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,129 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:14,148 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,194 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:14,217 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,268 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:14,288 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,337 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:14,357 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,400 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:14,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,468 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:14,487 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,533 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:14,554 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,596 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:14,617 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:14,664 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:15,252 - INFO - integration_test - Step 23: MPC solve successful
2026-01-25 18:58:15,272 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:15,272 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:15,284 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:15,285 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:15,594 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:15,626 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-25 18:58:15,626 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:15,626 - INFO - integration_test - === Applying control at step 23 ===
2026-01-25 18:58:15,626 - INFO - integration_test -   Control dict from planner: {'a': -2.3309021676618123e-12, 'w': -0.05825516942295554}
2026-01-25 18:58:15,626 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:15,626 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:15,627 - INFO - integration_test - Step 23 completed in 2.289s
2026-01-25 18:58:15,691 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-25 18:58:15,692 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51618731 2.75960695 0.44818229 3.00000003 6.30000005]
2026-01-25 18:58:15,693 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-25 18:58:15,693 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-25 18:58:15,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:15,814 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-25 18:58:15,814 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-25 18:58:15,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:15,945 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:15,945 - INFO - integration_test - Warmstart k=0: x0=5.516187311330803 , y0=2.75960695480803 , psi0=0.44818229126537734 , v0=3.0000000299996548 , spline0=6.300000052621293 , a0=0.0 , w0=0.0
2026-01-25 18:58:15,945 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:15,946 - INFO - integration_test - Dyn residual k=0: pred=[5.786558190534605, 2.889605375869758, 0.44818229126537734, 3.0000000299996548, 6.600000055621258], ws=[5.786558187830928, 2.889605374569789, 0.44818229126537723, 3.0, 6.34747480009604], res=[2.7036772820565602e-09, 1.2999690213177928e-09, 1.1102230246251565e-16, 2.999965476035982e-08, 0.2525252555252182], res_norm=2.525e-01
2026-01-25 18:58:15,947 - INFO - integration_test - Dyn residual k=1: pred=[6.056929064331053, 3.0196037943315477, 0.44818229126537723, 3.0, 6.64747480009604], ws=[6.056929064331053, 3.0196037943315477, 0.44818229126537723, 3.0, 6.748484901106141], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:15,948 - INFO - integration_test - Dyn residual k=2: pred=[6.327299940831177, 3.1496022140933064, 0.44818229126537723, 3.0, 7.048484901106141], ws=[6.327299940831177, 3.1496022140933064, 0.44818229126537723, 3.0, 6.644444497065737], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-25 18:58:15,962 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,117 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:16,139 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,184 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:16,206 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,255 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:16,277 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,323 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:16,343 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,387 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:16,408 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,454 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:16,475 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,519 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:16,539 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,583 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:16,603 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,651 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:16,672 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,720 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:16,740 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:16,783 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:17,897 - INFO - integration_test - Step 24: MPC solve successful
2026-01-25 18:58:17,916 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:17,916 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:17,926 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:17,927 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:18,276 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:18,297 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-25 18:58:18,297 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:18,297 - INFO - integration_test - === Applying control at step 24 ===
2026-01-25 18:58:18,297 - INFO - integration_test -   Control dict from planner: {'a': 1.8139171851598295e-12, 'w': -0.05713024483273058}
2026-01-25 18:58:18,297 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:18,297 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:18,299 - INFO - integration_test - Step 24 completed in 2.607s
2026-01-25 18:58:18,361 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-25 18:58:18,362 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78692806 2.88883235 0.44246927 3.00000003 6.60000006]
2026-01-25 18:58:18,363 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.112m, drift=0.252m)
2026-01-25 18:58:18,363 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-25 18:58:18,366 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:18,481 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.889), path_start=(0.000, 0.000), dist=6.468m
2026-01-25 18:58:18,481 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-25 18:58:18,579 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:18,602 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:18,602 - INFO - integration_test - Warmstart k=0: x0=5.78692806085157 , y0=2.8888323530832176 , psi0=0.4424692667821043 , v0=3.000000029999836 , spline0=6.600000055621276 , a0=0.0 , w0=0.0
2026-01-25 18:58:18,602 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:18,603 - INFO - integration_test - Dyn residual k=0: pred=[6.058037207919595, 3.0172840256143223, 0.4424692667821043, 3.000000029999836, 6.900000058621259], ws=[6.058037205208518, 3.0172840243298125, 0.4424692667821044, 3.0, 6.748484904106125], res=[2.711076696471082e-09, 1.2845098318337023e-09, -1.1102230246251565e-16, 2.9999835948757436e-08, 0.15151515451513475], res_norm=1.515e-01
2026-01-25 18:58:18,604 - INFO - integration_test - Dyn residual k=1: pred=[6.329146349565467, 3.1457356955764073, 0.4424692667821044, 3.0, 7.048484904106124], ws=[6.329146349565467, 3.1457356955764073, 0.4424692667821044, 3.0, 6.64444450006572], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-25 18:58:18,605 - INFO - integration_test - Dyn residual k=2: pred=[6.600255493922416, 3.274187366823002, 0.4424692667821044, 3.0, 6.94444450006572], ws=[6.600255493922416, 3.274187366823002, 0.4424692667821044, 3.0, 7.0454546010758206], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:18,623 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:18,997 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:19,020 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,066 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:19,088 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,131 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:19,151 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,198 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:19,221 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,267 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:19,288 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,335 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:19,355 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,400 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:19,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,467 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:19,487 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,532 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:19,552 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,596 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:19,617 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:19,663 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:20,227 - INFO - integration_test - Step 25: MPC solve successful
2026-01-25 18:58:20,242 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:20,242 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:20,250 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:20,251 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:20,571 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:20,593 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-25 18:58:20,593 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:20,593 - INFO - integration_test - === Applying control at step 25 ===
2026-01-25 18:58:20,593 - INFO - integration_test -   Control dict from planner: {'a': 2.0768173567339454e-13, 'w': -0.06431866569109035}
2026-01-25 18:58:20,593 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:20,593 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:20,595 - INFO - integration_test - Step 25 completed in 2.232s
2026-01-25 18:58:20,657 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-25 18:58:20,659 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05844843 3.01641127 0.4360374  3.00000003 6.90000006]
2026-01-25 18:58:20,659 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.205m, drift=0.064m)
2026-01-25 18:58:20,659 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-25 18:58:20,662 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:20,774 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.016), path_start=(0.000, 0.000), dist=6.768m
2026-01-25 18:58:20,774 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-25 18:58:20,876 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:20,900 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:20,901 - INFO - integration_test - Warmstart k=0: x0=6.05844842926047 , y0=3.016411274041217 , psi0=0.43603740021299525 , v0=3.000000029999857 , spline0=6.900000058621262 , a0=0.0 , w0=0.0
2026-01-25 18:58:20,901 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:20,902 - INFO - integration_test - Dyn residual k=0: pred=[6.3303781469251295, 3.143116563791922, 0.43603740021299525, 3.000000029999857, 7.200000061621248], ws=[6.330378144205845, 3.143116562524875, 0.4360374002129954, 3.0, 6.644444503065706], res=[2.719284353247531e-09, 1.2670469118347683e-09, -1.6653345369377348e-16, 2.99998568209503e-08, 0.5555555585555414], res_norm=5.556e-01
2026-01-25 18:58:20,904 - INFO - integration_test - Dyn residual k=1: pred=[6.60230785915122, 3.2698218510085333, 0.4360374002129954, 3.0, 6.944444503065706], ws=[6.60230785915122, 3.2698218510085333, 0.4360374002129954, 3.0, 7.045454604075807], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:20,905 - INFO - integration_test - Dyn residual k=2: pred=[6.874237574096595, 3.3965271394921914, 0.4360374002129954, 3.0, 7.345454604075806], ws=[6.874237574096595, 3.3965271394921914, 0.4360374002129954, 3.0, 7.446464705085908], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:20,921 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,075 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:21,099 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,145 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:21,166 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,212 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:21,236 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,280 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:21,305 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,350 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:21,370 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,413 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:21,435 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,480 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:21,499 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,547 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:21,566 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,609 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:21,631 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,678 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:21,696 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:21,744 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:22,353 - INFO - integration_test - Step 26: MPC solve successful
2026-01-25 18:58:22,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:22,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:22,373 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:22,374 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:22,701 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:22,732 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-25 18:58:22,732 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:22,733 - INFO - integration_test - === Applying control at step 26 ===
2026-01-25 18:58:22,733 - INFO - integration_test -   Control dict from planner: {'a': 2.7562262120270006e-13, 'w': -0.0550009160598439}
2026-01-25 18:58:22,733 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:22,733 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:22,734 - INFO - integration_test - Step 26 completed in 2.075s
2026-01-25 18:58:22,792 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-25 18:58:22,793 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33072522 3.14236811 0.43053731 3.00000003 7.20000006]
2026-01-25 18:58:22,794 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.174m, drift=0.364m)
2026-01-25 18:58:22,794 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-25 18:58:22,797 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:22,910 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.331, 3.142), path_start=(0.000, 0.000), dist=7.068m
2026-01-25 18:58:22,911 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-25 18:58:23,018 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:23,053 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:23,053 - INFO - integration_test - Warmstart k=0: x0=6.330725220374523 , y0=3.142368107672229 , psi0=0.43053730860701084 , v0=3.0000000299998844 , spline0=7.2000000616212505 , a0=0.0 , w0=0.0
2026-01-25 18:58:23,053 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:23,055 - INFO - integration_test - Dyn residual k=0: pred=[6.603347712162555, 3.2675758501296253, 0.43053730860701084, 3.0000000299998844, 7.500000064621239], ws=[6.603347709436341, 3.2675758488775526, 0.4305373086070108, 3.0, 7.045454607075795], res=[2.726213921278031e-09, 1.252072667767834e-09, 5.551115123125783e-17, 2.999988435448131e-08, 0.45454545754544373], res_norm=4.545e-01
2026-01-25 18:58:23,056 - INFO - integration_test - Dyn residual k=1: pred=[6.875970198498159, 3.392783590082876, 0.4305373086070108, 3.0, 7.345454607075795], ws=[6.875970198498159, 3.392783590082876, 0.4305373086070108, 3.0, 7.446464708085896], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:23,058 - INFO - integration_test - Dyn residual k=2: pred=[7.148592687559976, 3.5179913312881994, 0.4305373086070108, 3.0, 7.746464708085896], ws=[7.148592687559977, 3.5179913312881994, 0.4305373086070108, 3.0, 7.847474809095997], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-25 18:58:23,084 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,263 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:23,284 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,331 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:23,351 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,396 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:23,418 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,465 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:23,488 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,535 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:23,556 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,600 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:23,624 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,668 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:23,692 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,735 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:23,754 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,799 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:23,820 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,867 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:23,886 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:23,930 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:24,552 - INFO - integration_test - Step 27: MPC solve successful
2026-01-25 18:58:24,570 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:24,570 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:24,819 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:24,820 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:25,162 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:25,186 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-25 18:58:25,187 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:25,188 - INFO - integration_test - === Applying control at step 27 ===
2026-01-25 18:58:25,188 - INFO - integration_test -   Control dict from planner: {'a': -2.4672210529847853e-10, 'w': -0.21910380307688235}
2026-01-25 18:58:25,188 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:25,188 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:25,190 - INFO - integration_test - Step 27 completed in 2.397s
2026-01-25 18:58:25,259 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-25 18:58:25,260 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60469752 3.26457932 0.40862693 3.00000003 7.50000006]
2026-01-25 18:58:25,260 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.127m, drift=0.175m)
2026-01-25 18:58:25,260 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-25 18:58:25,263 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:25,381 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.605, 3.265), path_start=(0.000, 0.000), dist=7.367m
2026-01-25 18:58:25,381 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-25 18:58:25,487 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:25,513 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:25,513 - INFO - integration_test - Warmstart k=0: x0=6.6046975197186795 , y0=3.264579320650157 , psi0=0.4086269282993226 , v0=3.000000029975212 , spline0=7.500000064618772 , a0=0.0 , w0=0.0
2026-01-25 18:58:25,513 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:25,514 - INFO - integration_test - Dyn residual k=0: pred=[6.879997705658454, 3.383784225834626, 0.4086269282993226, 3.000000029975212, 7.800000067616293], ws=[6.879997702907727, 3.383784224643562, 0.4086269282993227, 3.0, 7.446464711083418], res=[2.750726757483335e-09, 1.1910641362078422e-09, -5.551115123125783e-17, 2.997521209024967e-08, 0.35353535653287516], res_norm=3.535e-01
2026-01-25 18:58:25,515 - INFO - integration_test - Dyn residual k=1: pred=[7.155297886096775, 3.5029891286369668, 0.4086269282993227, 3.0, 7.7464647110834175], ws=[7.155297886096775, 3.5029891286369668, 0.4086269282993227, 3.0, 7.84747481209352], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:25,516 - INFO - integration_test - Dyn residual k=2: pred=[7.430598069285822, 3.6221940326303717, 0.4086269282993227, 3.0, 8.14747481209352], ws=[7.430598069285822, 3.6221940326303717, 0.4086269282993227, 3.0, 8.24848491310362], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:25,532 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:25,689 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:25,709 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:25,753 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:25,776 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:25,820 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:25,841 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:25,885 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:25,905 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:25,950 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:25,970 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:26,014 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:26,035 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:26,096 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:26,131 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:26,182 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:26,204 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:26,250 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:26,273 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:26,319 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:26,339 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:26,383 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:27,060 - INFO - integration_test - Step 28: MPC solve successful
2026-01-25 18:58:27,077 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:27,077 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:27,086 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:27,087 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:27,495 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:27,521 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-25 18:58:27,521 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:27,521 - INFO - integration_test - === Applying control at step 28 ===
2026-01-25 18:58:27,521 - INFO - integration_test -   Control dict from planner: {'a': 2.467315269893448e-10, 'w': 0.029970266450614718}
2026-01-25 18:58:27,521 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:27,521 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:27,523 - INFO - integration_test - Step 28 completed in 2.263s
2026-01-25 18:58:27,582 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-25 18:58:27,583 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.87981866 3.38419659 0.41162395 3.00000003 7.80000007]
2026-01-25 18:58:27,583 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.246m, drift=0.013m)
2026-01-25 18:58:27,583 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-25 18:58:27,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:27,701 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.880, 3.384), path_start=(0.000, 0.000), dist=7.667m
2026-01-25 18:58:27,701 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-25 18:58:27,807 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:27,833 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:27,833 - INFO - integration_test - Warmstart k=0: x0=6.879818663522836 , y0=3.3841965880696403 , psi0=0.4116239549443841 , v0=3.0000000299998852 , spline0=7.80000006761876 , a0=0.0 , w0=0.0
2026-01-25 18:58:27,833 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:27,834 - INFO - integration_test - Dyn residual k=0: pred=[7.154760353327208, 3.504226038653694, 0.4116239549443841, 3.0000000299998852, 8.100000070618748], ws=[7.154760350577801, 3.504226037453404, 0.4116239549443841, 3.0, 7.847474815093507], res=[2.7494069243516606e-09, 1.2002900895424773e-09, 0.0, 2.999988524265973e-08, 0.2525252555252404], res_norm=2.525e-01
2026-01-25 18:58:27,835 - INFO - integration_test - Dyn residual k=1: pred=[7.429702037632766, 3.6242554868371677, 0.4116239549443841, 3.0, 8.147474815093508], ws=[7.429702037632766, 3.6242554868371677, 0.4116239549443841, 3.0, 8.24848491610361], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:27,836 - INFO - integration_test - Dyn residual k=2: pred=[7.704643724687731, 3.7442849362209314, 0.4116239549443841, 3.0, 8.548484916103611], ws=[7.704643724687731, 3.7442849362209314, 0.4116239549443841, 3.0, 8.144444512063206], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-25 18:58:27,852 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,011 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:28,033 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,079 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:28,100 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,144 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:28,163 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,209 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:28,232 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,277 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:28,299 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,345 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:28,366 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,413 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:28,434 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,478 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:28,498 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,543 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:28,563 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,607 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:28,629 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:28,673 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:29,343 - INFO - integration_test - Step 29: MPC solve successful
2026-01-25 18:58:29,358 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:29,358 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:29,367 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:29,367 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:29,752 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:29,777 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-25 18:58:29,777 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:29,777 - INFO - integration_test - === Applying control at step 29 ===
2026-01-25 18:58:29,777 - INFO - integration_test -   Control dict from planner: {'a': -2.1911937147318745e-13, 'w': 0.043258248379818724}
2026-01-25 18:58:29,777 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:29,777 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:29,779 - INFO - integration_test - Step 29 completed in 2.196s
2026-01-25 18:58:29,839 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-25 18:58:29,845 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.15449988 3.50482034 0.41594978 3.00000003 8.10000007]
2026-01-25 18:58:29,846 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.157m, drift=0.287m)
2026-01-25 18:58:29,846 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-25 18:58:29,849 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:29,963 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.154, 3.505), path_start=(0.000, 0.000), dist=7.967m
2026-01-25 18:58:29,963 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-25 18:58:30,332 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:30,357 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:30,357 - INFO - integration_test - Warmstart k=0: x0=7.154499883057236 , y0=3.5048203381750405 , psi0=0.41594977978236597 , v0=3.0000000299998635 , spline0=8.100000070618746 , a0=0.0 , w0=0.0
2026-01-25 18:58:30,357 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:30,358 - INFO - integration_test - Dyn residual k=0: pred=[7.428919775647349, 3.626038011601082, 0.41594977978236597, 3.0000000299998635, 8.400000073618733], ws=[7.428919772903162, 3.626038010388911, 0.41594977978236614, 3.0, 8.248484919103596], res=[2.7441862116006632e-09, 1.2121712522628059e-09, -1.6653345369377348e-16, 2.999986348228845e-08, 0.15151515451513653], res_norm=1.515e-01
2026-01-25 18:58:30,359 - INFO - integration_test - Dyn residual k=1: pred=[7.703339662749089, 3.7472556826027814, 0.41594977978236614, 3.0, 8.548484919103597], ws=[7.703339662749089, 3.7472556826027814, 0.41594977978236614, 3.0, 8.144444515063192], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-25 18:58:30,360 - INFO - integration_test - Dyn residual k=2: pred=[7.977759552595016, 3.868473354816652, 0.41594977978236614, 3.0, 8.444444515063193], ws=[7.977759552595016, 3.868473354816652, 0.41594977978236614, 3.0, 8.545454616073293], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:30,375 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:30,530 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:30,552 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:30,594 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:30,616 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:30,661 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:30,681 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:30,726 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:30,746 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:30,790 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:30,811 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:30,856 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:30,875 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:30,920 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:30,940 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:30,984 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:31,002 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:31,047 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:31,067 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:31,111 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:31,132 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:31,177 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:32,157 - INFO - integration_test - Step 30: MPC solve successful
2026-01-25 18:58:32,170 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:32,170 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:32,179 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:32,180 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:32,581 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:32,608 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-25 18:58:32,608 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:32,608 - INFO - integration_test - === Applying control at step 30 ===
2026-01-25 18:58:32,608 - INFO - integration_test -   Control dict from planner: {'a': -2.425327124450382e-10, 'w': -0.11337343249931858}
2026-01-25 18:58:32,608 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:32,608 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:32,610 - INFO - integration_test - Step 30 completed in 2.765s
2026-01-25 18:58:32,674 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-25 18:58:32,675 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.42960103 3.62447984 0.40461244 3.00000003 8.40000007]
2026-01-25 18:58:32,676 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.156m, drift=0.099m)
2026-01-25 18:58:32,676 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-25 18:58:32,679 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:32,791 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.430, 3.624), path_start=(0.000, 0.000), dist=8.267m
2026-01-25 18:58:32,791 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-25 18:58:32,898 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:32,925 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:32,925 - INFO - integration_test - Warmstart k=0: x0=7.429601032734992 , y0=3.624479835229159 , psi0=0.4046124365324341 , v0=3.00000002997561 , spline0=8.400000073616306 , a0=0.0 , w0=0.0
2026-01-25 18:58:32,926 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:32,927 - INFO - integration_test - Dyn residual k=0: pred=[7.70537754611409, 3.7425785924919035, 0.4046124365324341, 3.00000002997561, 8.700000076613867], ws=[7.705377543358567, 3.7425785913118763, 0.40461243653243395, 3.0, 8.144444518060752], res=[2.7555229209497156e-09, 1.1800271870754386e-09, 1.6653345369377348e-16, 2.9975609994181696e-08, 0.5555555585531149], res_norm=5.556e-01
2026-01-25 18:58:32,928 - INFO - integration_test - Dyn residual k=1: pred=[7.981154053982142, 3.8606773473945935, 0.40461243653243395, 3.0, 8.444444518060752], ws=[7.981154053982142, 3.8606773473945935, 0.40461243653243395, 3.0, 8.545454619070853], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:32,928 - INFO - integration_test - Dyn residual k=2: pred=[8.256930564605717, 3.9787761034773106, 0.40461243653243395, 3.0, 8.845454619070853], ws=[8.256930564605717, 3.9787761034773106, 0.40461243653243395, 3.0, 8.946464720080954], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:32,946 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,112 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:33,134 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,179 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:33,200 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,249 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:33,271 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,327 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:33,349 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,399 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:33,420 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,467 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:33,489 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,534 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:33,554 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,598 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:33,619 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,665 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:33,685 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,731 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:33,752 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:33,793 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:34,420 - INFO - integration_test - Step 31: MPC solve successful
2026-01-25 18:58:34,438 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:34,438 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:34,447 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:34,448 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:34,913 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:34,935 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-25 18:58:34,936 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:34,936 - INFO - integration_test - === Applying control at step 31 ===
2026-01-25 18:58:34,936 - INFO - integration_test -   Control dict from planner: {'a': 2.427402244576232e-10, 'w': -0.030936067818421124}
2026-01-25 18:58:34,936 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:34,936 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:34,937 - INFO - integration_test - Step 31 completed in 2.262s
2026-01-25 18:58:35,001 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-25 18:58:35,002 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.70555978 3.74215183 0.40151883 3.00000003 8.70000008]
2026-01-25 18:58:35,003 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.255m, drift=0.399m)
2026-01-25 18:58:35,003 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-25 18:58:35,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:35,123 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.706, 3.742), path_start=(0.000, 0.000), dist=8.566m
2026-01-25 18:58:35,123 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-25 18:58:35,225 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:35,252 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:35,252 - INFO - integration_test - Warmstart k=0: x0=7.705559781645876 , y0=3.742151832411199 , psi0=0.401518829750592 , v0=3.000000029999884 , spline0=8.700000076616295 , a0=0.0 , w0=0.0
2026-01-25 18:58:35,252 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:35,254 - INFO - integration_test - Dyn residual k=0: pred=[7.981700325915722, 3.859396881817756, 0.401518829750592, 3.000000029999884, 9.000000079616283], ws=[7.981700323154327, 3.8593968806453103, 0.40151882975059205, 3.0, 8.54545462207084], res=[2.761394668482353e-09, 1.1724456960848784e-09, -5.551115123125783e-17, 2.99998839103921e-08, 0.45454545754544284], res_norm=4.545e-01
2026-01-25 18:58:35,254 - INFO - integration_test - Dyn residual k=1: pred=[8.257840864662779, 3.9766419288794217, 0.40151882975059205, 3.0, 8.845454622070841], ws=[8.257840864662779, 3.9766419288794217, 0.40151882975059205, 3.0, 8.946464723080943], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:35,255 - INFO - integration_test - Dyn residual k=2: pred=[8.53398140617123, 4.093886977113533, 0.40151882975059205, 3.0, 9.246464723080944], ws=[8.53398140617123, 4.093886977113533, 0.40151882975059205, 3.0, 9.347474824091044], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:35,272 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,433 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:35,454 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,499 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:35,521 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,565 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:35,586 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,631 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:35,653 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,699 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:35,721 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,764 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:35,783 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,829 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:35,850 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,894 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:35,916 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:35,958 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:35,979 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:36,022 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:36,043 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:36,087 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:36,707 - INFO - integration_test - Step 32: MPC solve successful
2026-01-25 18:58:36,731 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:36,731 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:37,013 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:37,014 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:37,471 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:37,500 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-25 18:58:37,500 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:37,500 - INFO - integration_test - === Applying control at step 32 ===
2026-01-25 18:58:37,500 - INFO - integration_test -   Control dict from planner: {'a': -2.1482200341354398e-08, 'w': 0.743550031717056}
2026-01-25 18:58:37,500 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:37,500 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:37,502 - INFO - integration_test - Step 32 completed in 2.499s
2026-01-25 18:58:37,564 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-25 18:58:37,565 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.97708908 3.86955036 0.47587383 3.00000003 9.00000008]
2026-01-25 18:58:37,566 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.131m, drift=0.211m)
2026-01-25 18:58:37,566 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-25 18:58:37,569 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:37,682 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.977, 3.870), path_start=(0.000, 0.000), dist=8.866m
2026-01-25 18:58:37,682 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-25 18:58:37,784 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:37,809 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:37,809 - INFO - integration_test - Warmstart k=0: x0=7.977089080719064 , y0=3.869550364708271 , psi0=0.47587383292229757 , v0=3.000000027851664 , spline0=9.000000079401461 , a0=0.0 , w0=0.0
2026-01-25 18:58:37,810 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:37,811 - INFO - integration_test - Dyn residual k=0: pred=[8.243756906622009, 4.006984975703087, 0.47587383292229757, 3.000000027851664, 9.300000082186628], ws=[8.243756904146295, 4.0069849744271595, 0.47587383292229735, 3.0, 8.946464725866107], res=[2.4757138561426473e-09, 1.2759278078533498e-09, 2.220446049250313e-16, 2.785166408614259e-08, 0.3535353563205206], res_norm=3.535e-01
2026-01-25 18:58:37,811 - INFO - integration_test - Dyn residual k=1: pred=[8.510424727573525, 4.144419584146048, 0.47587383292229735, 3.0, 9.246464725866108], ws=[8.510424727573525, 4.144419584146048, 0.47587383292229735, 3.0, 9.34747482687621], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:37,812 - INFO - integration_test - Dyn residual k=2: pred=[8.777092551000756, 4.281854193864937, 0.47587383292229735, 3.0, 9.647474826876211], ws=[8.777092551000756, 4.281854193864937, 0.47587383292229735, 3.0, 9.748484927886313], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:37,828 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,027 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:38,050 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,094 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:38,116 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,162 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:38,182 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,223 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:38,246 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,294 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:38,315 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,361 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:38,382 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,425 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:38,446 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,494 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:38,515 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,559 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:38,578 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,623 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:38,645 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:38,690 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:39,258 - INFO - integration_test - Step 33: MPC solve successful
2026-01-25 18:58:39,281 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:39,281 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:39,291 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:39,292 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:39,761 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:39,789 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-25 18:58:39,789 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:39,789 - INFO - integration_test - === Applying control at step 33 ===
2026-01-25 18:58:39,789 - INFO - integration_test -   Control dict from planner: {'a': -1.7623835185914382e-06, 'w': 0.013352322593508012}
2026-01-25 18:58:39,789 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:39,789 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:39,791 - INFO - integration_test - Step 33 completed in 2.225s
2026-01-25 18:58:39,856 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-25 18:58:39,857 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.24366507 4.00716296 0.47720907 2.99999985 9.30000006]
2026-01-25 18:58:39,857 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.171m, drift=0.022m)
2026-01-25 18:58:39,857 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-25 18:58:39,861 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:39,975 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.244, 4.007), path_start=(0.000, 0.000), dist=9.166m
2026-01-25 18:58:39,975 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-25 18:58:40,082 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:40,108 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:40,108 - INFO - integration_test - Warmstart k=0: x0=8.243665066005411 , y0=4.007162962537195 , psi0=0.47720906518164835 , v0=2.999999851613312 , spline0=9.300000064562793 , a0=0.0 , w0=0.0
2026-01-25 18:58:40,108 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:40,109 - INFO - integration_test - Dyn residual k=0: pred=[8.510149131468138, 4.144953506302928, 0.47720906518164835, 2.999999851613312, 9.600000049724125], ws=[8.510149131468138, 4.144953506302928, 0.4772090651816483, 2.999999851613312, 9.347474797198872], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, 0.2525252525252526], res_norm=2.525e-01
2026-01-25 18:58:40,110 - INFO - integration_test - Dyn residual k=1: pred=[8.776633196930865, 4.28274405006866, 0.4772090651816483, 2.999999851613312, 9.647474782360204], ws=[8.776633196930865, 4.28274405006866, 0.4772090651816483, 2.999999851613312, 9.748484883370306], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:40,111 - INFO - integration_test - Dyn residual k=2: pred=[9.043117262393592, 4.420534593834393, 0.4772090651816483, 2.999999851613312, 10.048484868531638], ws=[9.043117262393592, 4.420534593834393, 0.4772090651816483, 2.999999851613312, 9.644444464491233], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-25 18:58:40,127 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,296 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:40,319 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,364 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:40,386 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,432 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:40,455 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,498 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:40,521 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,565 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:40,585 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,630 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:40,651 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,697 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:40,719 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,763 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:40,783 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,830 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:40,851 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,902 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:40,944 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:40,999 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:41,621 - INFO - integration_test - Step 34: MPC solve successful
2026-01-25 18:58:41,636 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:41,636 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:41,645 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:41,646 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:42,166 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:42,196 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-25 18:58:42,197 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:42,197 - INFO - integration_test - === Applying control at step 34 ===
2026-01-25 18:58:42,197 - INFO - integration_test -   Control dict from planner: {'a': 8.523732919379944e-07, 'w': 0.5819356439252916}
2026-01-25 18:58:42,197 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:42,197 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:42,198 - INFO - integration_test - Step 34 completed in 2.341s
2026-01-25 18:58:42,262 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-25 18:58:42,263 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.50599062 4.15262739 0.53540263 2.99999994 9.60000006]
2026-01-25 18:58:42,263 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.175m, drift=0.322m)
2026-01-25 18:58:42,263 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-25 18:58:42,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:42,385 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.506, 4.153), path_start=(0.000, 0.000), dist=9.466m
2026-01-25 18:58:42,385 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-25 18:58:42,490 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:42,516 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:42,516 - INFO - integration_test - Warmstart k=0: x0=8.505990623915283 , y0=4.152627391950386 , psi0=0.5354026295741775 , v0=2.9999999368506414 , spline0=9.600000058247858 , a0=0.0 , w0=0.0
2026-01-25 18:58:42,516 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:42,517 - INFO - integration_test - Dyn residual k=0: pred=[8.764009603225151, 4.305683599034358, 0.5354026295741775, 2.9999999368506414, 9.900000051932922], ws=[8.764009603225151, 4.305683599034358, 0.5354026295741776, 2.9999999368506414, 9.748484900417772], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.1515151515151505], res_norm=1.515e-01
2026-01-25 18:58:42,518 - INFO - integration_test - Dyn residual k=1: pred=[9.02202858253502, 4.458739806118331, 0.5354026295741776, 2.9999999368506414, 10.048484894102836], ws=[9.02202858253502, 4.458739806118331, 0.5354026295741776, 2.9999999368506414, 9.644444490062432], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-25 18:58:42,519 - INFO - integration_test - Dyn residual k=2: pred=[9.280047561844889, 4.611796013202303, 0.5354026295741776, 2.9999999368506414, 9.944444483747496], ws=[9.280047561844889, 4.611796013202303, 0.5354026295741776, 2.9999999368506414, 10.045454584757596], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:42,536 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:42,691 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:42,715 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:42,759 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:42,779 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:42,828 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:42,848 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:42,893 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:42,915 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:42,964 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:42,986 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:43,030 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:43,051 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:43,096 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:43,117 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:43,161 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:43,182 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:43,226 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:43,246 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:43,294 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:43,316 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:43,363 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:44,028 - INFO - integration_test - Step 35: MPC solve successful
2026-01-25 18:58:44,057 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:44,057 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:44,363 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:44,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:44,885 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:44,923 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-25 18:58:44,923 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:44,923 - INFO - integration_test - === Applying control at step 35 ===
2026-01-25 18:58:44,923 - INFO - integration_test -   Control dict from planner: {'a': 9.308481899627307e-07, 'w': 0.527569223152589}
2026-01-25 18:58:44,923 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:44,923 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:44,925 - INFO - integration_test - Step 35 completed in 2.662s
2026-01-25 18:58:44,985 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-25 18:58:44,989 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.75985348 4.31241718 0.58815955 3.00000003 9.90000006]
2026-01-25 18:58:44,990 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.028m, drift=0.134m)
2026-01-25 18:58:44,990 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-25 18:58:44,993 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:45,109 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.760, 4.312), path_start=(0.000, 0.000), dist=9.764m
2026-01-25 18:58:45,109 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-25 18:58:45,214 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:45,243 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:45,243 - INFO - integration_test - Warmstart k=0: x0=8.759853483219025 , y0=4.312417176962547 , psi0=0.5881595518894364 , v0=3.0000000299354603 , spline0=9.900000061241403 , a0=0.0 , w0=0.0
2026-01-25 18:58:45,243 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:45,244 - INFO - integration_test - Dyn residual k=0: pred=[9.00944245315384, 4.478866412115509, 0.5881595518894364, 3.0000000299354603, 10.200000064234949], ws=[9.00944245066332, 4.478866410454597, 0.5881595518894365, 3.0, 9.644444505685849], res=[2.4905197903990484e-09, 1.6609114084076282e-09, -1.1102230246251565e-16, 2.993546033280836e-08, 0.5555555585491003], res_norm=5.556e-01
2026-01-25 18:58:45,245 - INFO - integration_test - Dyn residual k=1: pred=[9.259031418107615, 4.645315643946648, 0.5881595518894365, 3.0, 9.94444450568585], ws=[9.259031418107615, 4.645315643946648, 0.5881595518894365, 3.0, 10.04545460669595], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:58:45,246 - INFO - integration_test - Dyn residual k=2: pred=[9.508620385551907, 4.811764877438699, 0.5881595518894365, 3.0, 10.34545460669595], ws=[9.508620385551907, 4.811764877438699, 0.5881595518894365, 3.0, 10.446464707706053], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:45,262 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,419 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:45,440 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,484 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:45,509 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,554 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:45,574 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,620 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:45,641 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,689 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:45,711 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,755 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:45,775 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,820 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:45,840 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,884 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:45,906 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:45,950 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:45,969 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:46,015 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:46,034 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:46,075 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:46,939 - INFO - integration_test - Step 36: MPC solve successful
2026-01-25 18:58:46,965 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:46,966 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:46,981 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:46,982 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:47,556 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:47,586 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-25 18:58:47,586 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:47,586 - INFO - integration_test - === Applying control at step 36 ===
2026-01-25 18:58:47,586 - INFO - integration_test -   Control dict from planner: {'a': -3.8869532704810117e-07, 'w': 0.7999826725761986}
2026-01-25 18:58:47,586 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:47,586 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:47,587 - INFO - integration_test - Step 36 completed in 2.598s
2026-01-25 18:58:47,649 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-25 18:58:47,655 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.00252205  4.48866695  0.66815782  2.99999999 10.20000006]
2026-01-25 18:58:47,656 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.222m, drift=0.054m)
2026-01-25 18:58:47,656 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-25 18:58:47,660 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:47,774 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.003, 4.489), path_start=(0.000, 0.000), dist=10.059m
2026-01-25 18:58:47,774 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.059m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:58:47,774 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-25 18:58:47,876 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:47,902 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:47,902 - INFO - integration_test - Warmstart k=0: x0=9.00252204824885 , y0=4.4886669515785265 , psi0=0.6681578191470562 , v0=2.9999999910659274 , spline0=10.200000060347996 , a0=0.0 , w0=0.0
2026-01-25 18:58:47,902 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:47,903 - INFO - integration_test - Dyn residual k=0: pred=[9.23801133866625, 4.6745292488920605, 0.6681578191470562, 2.9999999910659274, 10.500000059454589], ws=[9.23801133866625, 4.6745292488920605, 0.6681578191470563, 2.9999999910659274, 10.045454604909134], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-25 18:58:47,904 - INFO - integration_test - Dyn residual k=1: pred=[9.473500629083652, 4.860391546205594, 0.6681578191470563, 2.9999999910659274, 10.345454604015726], ws=[9.473500629083652, 4.860391546205594, 0.6681578191470563, 2.9999999910659274, 10.446464705025829], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:47,905 - INFO - integration_test - Dyn residual k=2: pred=[9.708989919501054, 5.046253843519128, 0.6681578191470563, 2.9999999910659274, 10.746464704132421], ws=[9.607121523992204, 5.071545620262124, 0.6681578191470563, 2.9999999910659274, 10.544444502112219], res=[0.10186839550885018, -0.02529177674299543, 0.0, 0.0, 0.20202020202020243], res_norm=2.277e-01
2026-01-25 18:58:47,921 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,081 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:48,104 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,145 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:48,166 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,213 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:48,232 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,278 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:48,301 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,348 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:48,368 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,414 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:48,435 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,481 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:48,503 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,545 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:48,565 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,611 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:48,632 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,674 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:48,698 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:48,741 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:49,412 - INFO - integration_test - Step 37: MPC solve successful
2026-01-25 18:58:49,435 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:49,435 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:49,444 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:49,444 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:58:50,044 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:50,075 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-25 18:58:50,075 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:50,075 - INFO - integration_test - === Applying control at step 37 ===
2026-01-25 18:58:50,075 - INFO - integration_test -   Control dict from planner: {'a': 3.7646174878756574e-07, 'w': 0.6936930346432164}
2026-01-25 18:58:50,075 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:50,075 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:50,076 - INFO - integration_test - Step 37 completed in 2.421s
2026-01-25 18:58:50,140 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-25 18:58:50,141 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.23137854  4.68254481  0.73752712  3.00000003 10.50000006]
2026-01-25 18:58:50,142 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.168m, drift=0.246m)
2026-01-25 18:58:50,142 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-25 18:58:50,145 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:50,258 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.231, 4.683), path_start=(0.000, 0.000), dist=10.351m
2026-01-25 18:58:50,258 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.351m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:58:50,258 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-25 18:58:50,365 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:50,392 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:50,392 - INFO - integration_test - Warmstart k=0: x0=9.231378536680358 , y0=4.682544812045894 , psi0=0.7375271226113779 , v0=3.0000000287121025 , spline0=10.500000063219206 , a0=0.0 , w0=0.0
2026-01-25 18:58:50,392 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:50,393 - INFO - integration_test - Dyn residual k=0: pred=[9.453418657939995, 4.884282726860468, 0.7375271226113779, 3.0000000287121025, 10.800000066090416], ws=[9.453418655814914, 4.884282724929694, 0.737527122611378, 3.0, 10.446464709683852], res=[2.1250805559702712e-09, 1.930773763092475e-09, -1.1102230246251565e-16, 2.8712102473349432e-08, 0.35353535640656375], res_norm=3.535e-01
2026-01-25 18:58:50,394 - INFO - integration_test - Dyn residual k=1: pred=[9.67545877494947, 5.086020637813494, 0.737527122611378, 3.0, 10.746464709683853], ws=[9.67545877494947, 5.086020637813494, 0.737527122611378, 3.0, 10.544444507663652], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-25 18:58:50,395 - INFO - integration_test - Dyn residual k=2: pred=[9.897498894084027, 5.287758550697294, 0.737527122611378, 3.0, 10.844444507663653], ws=[9.785818278593831, 5.34260115297546, 0.737527122611378, 3.0, 10.642424305643452], res=[0.11168061549019548, -0.05484260227816584, 0.0, 0.0, 0.20202020202020066], res_norm=2.373e-01
2026-01-25 18:58:50,410 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:50,569 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:50,591 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:50,634 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:50,657 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:50,705 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:50,728 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:50,773 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:50,796 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:50,838 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:50,860 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:50,906 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:50,926 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:50,970 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:50,991 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:51,034 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:51,054 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:51,099 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:51,120 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:51,163 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:51,182 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:51,227 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:51,898 - INFO - integration_test - Step 38: MPC solve successful
2026-01-25 18:58:51,922 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:51,922 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:52,246 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:52,246 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 18:58:52,855 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:52,897 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-25 18:58:52,897 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:52,897 - INFO - integration_test - === Applying control at step 38 ===
2026-01-25 18:58:52,897 - INFO - integration_test -   Control dict from planner: {'a': -4.7454075455817914e-07, 'w': -0.14577977275626078}
2026-01-25 18:58:52,897 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:52,897 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:52,898 - INFO - integration_test - Step 38 completed in 2.757s
2026-01-25 18:58:52,960 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-25 18:58:52,961 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.45488123  4.88265716  0.72294915  2.99999998 10.80000006]
2026-01-25 18:58:52,961 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.293m, drift=0.057m)
2026-01-25 18:58:52,961 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-25 18:58:52,964 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:53,129 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.455, 4.883), path_start=(0.000, 0.000), dist=10.641m
2026-01-25 18:58:53,129 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.641m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:58:53,129 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-25 18:58:53,237 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:53,260 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:53,260 - INFO - integration_test - Warmstart k=0: x0=9.454881231017323 , y0=4.8826571606320535 , psi0=0.7229491453357518 , v0=2.999999981258027 , spline0=10.800000061345008 , a0=0.0 , w0=0.0
2026-01-25 18:58:53,260 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:53,261 - INFO - integration_test - Dyn residual k=0: pred=[9.679838582011804, 5.08113685508221, 0.7229491453357518, 2.999999981258027, 11.10000005947081], ws=[9.679838582011804, 5.08113685508221, 0.7229491453357517, 2.999999981258027, 10.544444503915255], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-25 18:58:53,262 - INFO - integration_test - Dyn residual k=1: pred=[9.904795933006286, 5.279616549532367, 0.7229491453357517, 2.999999981258027, 10.844444502041057], ws=[9.792630513528044, 5.334076723740223, 0.7229491453357517, 2.999999981258027, 10.642424300020856], res=[0.11216541947824155, -0.05446017420785587, 0.0, 0.0, 0.20202020202020066], res_norm=2.374e-01
2026-01-25 18:58:53,263 - INFO - integration_test - Dyn residual k=2: pred=[10.017587864522525, 5.53255641819038, 0.7229491453357517, 2.999999981258027, 10.942424298146658], ws=[9.96941326014737, 5.593872660751819, 0.7229491453357517, 2.999999981258027, 11.043434399156757], res=[0.04817460437515564, -0.06131624256143908, 0.0, 0.0, -0.10101010101009855], res_norm=1.276e-01
2026-01-25 18:58:53,279 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,443 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:53,465 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,512 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:53,533 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,576 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:53,599 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,643 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:53,664 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,709 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:53,729 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,775 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:53,796 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,841 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:53,862 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,910 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:53,932 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:53,977 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:53,998 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:54,043 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:54,064 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:54,108 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:54,703 - INFO - integration_test - Step 39: MPC solve successful
2026-01-25 18:58:54,731 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:54,731 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:54,741 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:54,741 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:55,366 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:55,407 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-25 18:58:55,407 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:55,407 - INFO - integration_test - === Applying control at step 39 ===
2026-01-25 18:58:55,407 - INFO - integration_test -   Control dict from planner: {'a': 3.503449762445265e-07, 'w': 0.7999936384819567}
2026-01-25 18:58:55,407 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:55,407 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:55,408 - INFO - integration_test - Step 39 completed in 2.448s
2026-01-25 18:58:55,474 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-25 18:58:55,477 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.67166382  5.08991864  0.80294851  3.00000002 11.10000006]
2026-01-25 18:58:55,477 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.401m, drift=0.357m)
2026-01-25 18:58:55,478 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-25 18:58:55,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:55,616 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.672, 5.090), path_start=(0.000, 0.000), dist=10.929m
2026-01-25 18:58:55,616 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.929m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:58:55,616 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-25 18:58:55,738 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:55,765 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:55,765 - INFO - integration_test - Warmstart k=0: x0=9.671663821007753 , y0=5.089918643219921 , psi0=0.8029485091839474 , v0=3.0000000162925247 , spline0=11.10000006297426 , a0=0.0 , w0=0.0
2026-01-25 18:58:55,765 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:55,766 - INFO - integration_test - Dyn residual k=0: pred=[9.880040388012446, 5.305740809136423, 0.8029485091839474, 3.0000000162925247, 11.400000064603512], ws=[9.880040386880786, 5.305740807964327, 0.8029485091839472, 3.0, 10.945454608428806], res=[1.1316600989630388e-09, 1.1720961978767264e-09, 2.220446049250313e-16, 1.629252466273101e-08, 0.45454545617470643], res_norm=4.545e-01
2026-01-25 18:58:55,767 - INFO - integration_test - Dyn residual k=1: pred=[10.08841695275382, 5.5215629727087325, 0.8029485091839472, 3.0, 11.245454608428807], ws=[9.988323771683493, 5.596733753732161, 0.8029485091839472, 3.0, 11.043434406408604], res=[0.10009318107032605, -0.07517078102342811, 0.0, 0.0, 0.20202020202020243], res_norm=2.377e-01
2026-01-25 18:58:55,768 - INFO - integration_test - Dyn residual k=2: pred=[10.196700337556527, 5.8125559184765665, 0.8029485091839472, 3.0, 11.343434406408605], ws=[10.183138649134097, 5.861955386197111, 0.8029485091839472, 3.0, 11.444444507418707], res=[0.013561688422429441, -0.049399467720544266, 0.0, 0.0, -0.1010101010101021], res_norm=1.133e-01
2026-01-25 18:58:55,785 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:55,970 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:55,992 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,040 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:56,060 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,108 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:56,128 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,180 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:56,213 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,273 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:56,296 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,342 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:56,364 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,410 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:56,430 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,475 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:56,496 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,540 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:56,561 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,605 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:56,626 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:56,668 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:57,310 - INFO - integration_test - Step 40: MPC solve successful
2026-01-25 18:58:57,332 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:57,332 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:57,345 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:57,346 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:58:58,012 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:58:58,044 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-25 18:58:58,044 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:58:58,044 - INFO - integration_test - === Applying control at step 40 ===
2026-01-25 18:58:58,044 - INFO - integration_test -   Control dict from planner: {'a': -4.4213290232299706e-08, 'w': 0.7999737626592002}
2026-01-25 18:58:58,044 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:58:58,044 - INFO - integration_test -   Planner output success: True
2026-01-25 18:58:58,045 - INFO - integration_test - Step 40 completed in 2.569s
2026-01-25 18:58:58,114 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-25 18:58:58,116 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 9.87119021  5.31384104  0.88294589  3.00000001 11.40000006]
2026-01-25 18:58:58,116 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.524m, drift=0.169m)
2026-01-25 18:58:58,116 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-25 18:58:58,120 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:58,235 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(9.871, 5.314), path_start=(0.000, 0.000), dist=11.211m
2026-01-25 18:58:58,235 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.211m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:58:58,235 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-25 18:58:58,343 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:58:58,370 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:58:58,370 - INFO - integration_test - Warmstart k=0: x0=9.871190207316726 , y0=5.313841035926962 , psi0=0.8829458854498675 , v0=3.0000000118711956 , spline0=11.400000064161379 , a0=0.0 , w0=0.0
2026-01-25 18:58:58,371 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:58:58,372 - INFO - integration_test - Dyn residual k=0: pred=[10.061653570378391, 5.545624788686968, 0.8829458854498675, 3.0000000118711956, 11.700000065348497], ws=[10.061653569624717, 5.545624787769785, 0.8829458854498675, 3.0, 11.043434407595722], res=[7.536744561775777e-10, 9.171836623522722e-10, 0.0, 1.18711955821027e-08, 0.6565656577527754], res_norm=6.566e-01
2026-01-25 18:58:58,372 - INFO - integration_test - Dyn residual k=1: pred=[10.252116931932708, 5.777408539612607, 0.8829458854498675, 3.0, 11.343434407595723], ws=[10.252116931932708, 5.777408539612607, 0.8829458854498675, 3.0, 11.444444508605825], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:58:58,373 - INFO - integration_test - Dyn residual k=2: pred=[10.442580294240699, 6.00919229145543, 0.8829458854498675, 3.0, 11.744444508605826], ws=[10.38654217747904, 6.100816056900453, 0.8829458854498675, 3.0, 11.542424306585623], res=[0.05603811676165904, -0.09162376544502315, 0.0, 0.0, 0.20202020202020243], res_norm=2.288e-01
2026-01-25 18:58:58,390 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:58,554 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:58,577 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:58,622 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:58,642 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:58,689 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:58,711 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:58,756 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:58,777 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:58,824 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:58,844 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:58,889 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:58,911 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:58,956 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:58,976 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:59,023 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:59,042 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:59,088 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:58:59,125 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:59,192 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:59,215 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:58:59,258 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:58:59,954 - INFO - integration_test - Step 41: MPC solve successful
2026-01-25 18:58:59,981 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:58:59,981 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:58:59,991 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:58:59,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:01,074 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:01,125 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-25 18:59:01,126 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:01,126 - INFO - integration_test - === Applying control at step 41 ===
2026-01-25 18:59:01,126 - INFO - integration_test -   Control dict from planner: {'a': 1.7495210316646613e-07, 'w': 0.15465190639809734}
2026-01-25 18:59:01,126 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:01,126 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:01,127 - INFO - integration_test - Step 41 completed in 3.012s
2026-01-25 18:59:01,200 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-25 18:59:01,201 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.05985372  5.5470883   0.89841108  3.00000003 11.70000007]
2026-01-25 18:59:01,202 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.692m, drift=0.469m)
2026-01-25 18:59:01,202 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-25 18:59:01,206 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:01,330 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.060, 5.547), path_start=(0.000, 0.000), dist=11.488m
2026-01-25 18:59:01,330 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.488m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:01,330 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-25 18:59:01,434 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:01,459 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:01,459 - INFO - integration_test - Warmstart k=0: x0=10.059853724526903 , y0=5.547088296871122 , psi0=0.8984110760896773 , v0=3.0000000293664058 , spline0=11.700000067098019 , a0=0.0 , w0=0.0
2026-01-25 18:59:01,459 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:01,460 - INFO - integration_test - Dyn residual k=0: pred=[10.246709875332161, 5.781789768251739, 0.8984110760896773, 3.0000000293664058, 12.000000070034659], ws=[10.246709873503065, 5.781789765954293, 0.8984110760896771, 3.0, 11.444444511542464], res=[1.829096873962044e-09, 2.2974466773462154e-09, 2.220446049250313e-16, 2.936640575157412e-08, 0.5555555584921947], res_norm=5.556e-01
2026-01-25 18:59:01,461 - INFO - integration_test - Dyn residual k=1: pred=[10.433566022479226, 6.0164912350374635, 0.8984110760896771, 3.0, 11.744444511542465], ws=[10.433566022479226, 6.0164912350374635, 0.8984110760896771, 3.0, 11.542424309522263], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-25 18:59:01,462 - INFO - integration_test - Dyn residual k=2: pred=[10.620422171455388, 6.251192704120634, 0.8984110760896771, 3.0, 11.842424309522263], ws=[10.620422171455388, 6.251192704120634, 0.8984110760896771, 3.0, 11.943434410532365], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:59:01,477 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:01,634 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:01,655 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:01,703 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:01,738 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:01,806 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:01,829 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:01,877 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:01,900 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:01,949 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:01,969 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:02,011 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:02,032 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:02,078 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:02,099 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:02,144 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:02,165 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:02,209 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:02,229 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:02,273 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:02,294 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:02,338 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:03,018 - INFO - integration_test - Step 42: MPC solve successful
2026-01-25 18:59:03,045 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:03,045 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:03,054 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:03,055 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:03,757 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:03,805 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-25 18:59:03,805 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:03,805 - INFO - integration_test - === Applying control at step 42 ===
2026-01-25 18:59:03,806 - INFO - integration_test -   Control dict from planner: {'a': 8.658515860512404e-09, 'w': -0.8000000077927325}
2026-01-25 18:59:03,806 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:03,806 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:03,807 - INFO - integration_test - Step 42 completed in 2.606s
2026-01-25 18:59:03,869 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-25 18:59:03,878 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.25589368  5.77406924  0.81841108  3.00000003 12.00000007]
2026-01-25 18:59:03,879 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.822m, drift=0.281m)
2026-01-25 18:59:03,879 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-25 18:59:03,882 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:03,995 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.256, 5.774), path_start=(0.000, 0.000), dist=11.770m
2026-01-25 18:59:03,995 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.770m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:03,995 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-25 18:59:04,105 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:04,130 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:04,130 - INFO - integration_test - Warmstart k=0: x0=10.255893681738486 , y0=5.774069242680466 , psi0=0.818411075310404 , v0=3.000000030232257 , spline0=12.000000070121244 , a0=0.0 , w0=0.0
2026-01-25 18:59:04,130 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:04,131 - INFO - integration_test - Dyn residual k=0: pred=[10.460908308183651, 5.9930875176199905, 0.818411075310404, 3.000000030232257, 12.300000073144469], ws=[10.460908306117632, 5.993087515412852, 0.8184110753104039, 3.0, 11.542424312545487], res=[2.0660184674170523e-09, 2.207138471987946e-09, 1.1102230246251565e-16, 3.0232257142159824e-08, 0.7575757605989821], res_norm=7.576e-01
2026-01-25 18:59:04,132 - INFO - integration_test - Dyn residual k=1: pred=[10.665922930496778, 6.212105788145238, 0.8184110753104039, 3.0, 11.842424312545488], ws=[10.630874805222364, 6.315318714797437, 0.8184110753104039, 3.0, 11.94343441355559], res=[0.03504812527441459, -0.10321292665219861, 0.0, 0.0, -0.1010101010101021], res_norm=1.486e-01
2026-01-25 18:59:04,133 - INFO - integration_test - Dyn residual k=2: pred=[10.83588942960151, 6.534336987529823, 0.8184110753104039, 3.0, 12.24343441355559], ws=[10.870937554875924, 6.431124060877624, 0.8184110753104039, 3.0, 12.041414211535386], res=[-0.03504812527441459, 0.10321292665219861, 0.0, 0.0, 0.2020202020202042], res_norm=2.296e-01
2026-01-25 18:59:04,148 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,308 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:04,330 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,376 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:04,400 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,445 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:04,468 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,517 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:04,538 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,580 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:04,602 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,647 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:04,669 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,717 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:04,747 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,829 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:04,849 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,897 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:04,919 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:04,963 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:04,983 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:05,030 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:05,883 - INFO - integration_test - Step 43: MPC solve successful
2026-01-25 18:59:05,913 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:05,913 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:05,923 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:05,924 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:06,678 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:06,722 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-25 18:59:06,723 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:06,723 - INFO - integration_test - === Applying control at step 43 ===
2026-01-25 18:59:06,723 - INFO - integration_test -   Control dict from planner: {'a': -1.7616205074748996e-09, 'w': 0.7185015207298379}
2026-01-25 18:59:06,723 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:06,723 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:06,724 - INFO - integration_test - Step 43 completed in 2.847s
2026-01-25 18:59:06,786 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-25 18:59:06,789 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[10.4528671   6.00026112  0.89026123  3.00000003 12.30000007]
2026-01-25 18:59:06,790 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.986m, drift=0.581m)
2026-01-25 18:59:06,790 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-25 18:59:06,795 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:06,922 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(10.453, 6.000), path_start=(0.000, 0.000), dist=12.053m
2026-01-25 18:59:06,922 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.053m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:06,922 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-25 18:59:07,028 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:07,053 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:07,053 - INFO - integration_test - Warmstart k=0: x0=10.452867095613467 , y0=6.000261121466976 , psi0=0.8902612273833879 , v0=3.000000030056095 , spline0=12.300000073126853 , a0=0.0 , w0=0.0
2026-01-25 18:59:07,053 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:07,054 - INFO - integration_test - Dyn residual k=0: pred=[10.641629801308994, 6.2334319660034865, 0.8902612273833879, 3.000000030056095, 12.600000076132462], ws=[10.641629799417839, 6.233431963667418, 0.8902612273833874, 3.0, 11.943434416561196], res=[1.891155676503331e-09, 2.3360682277484557e-09, 4.440892098500626e-16, 3.005609494621808e-08, 0.6565656595712657], res_norm=6.566e-01
2026-01-25 18:59:07,055 - INFO - integration_test - Dyn residual k=1: pred=[10.83039250322221, 6.46660280586786, 0.8902612273833874, 3.0, 12.243434416561197], ws=[10.83039250322221, 6.46660280586786, 0.8902612273833874, 3.0, 12.041414214540996], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-25 18:59:07,056 - INFO - integration_test - Dyn residual k=2: pred=[11.019155207026582, 6.699773648068303, 0.8902612273833874, 3.0, 12.341414214540997], ws=[11.019155207026582, 6.699773648068303, 0.8902612273833874, 3.0, 12.442424315551097], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:59:07,073 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,229 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:07,249 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,296 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:07,318 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,362 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:07,384 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,432 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:07,452 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,500 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:07,521 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,563 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:07,584 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,630 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:07,650 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,697 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:07,718 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,763 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:07,784 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,830 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:07,850 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:07,914 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:08,542 - INFO - integration_test - Step 44: MPC solve successful
2026-01-25 18:59:08,560 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:08,560 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:08,568 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:08,569 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:09,265 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:09,317 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-25 18:59:09,317 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:09,317 - INFO - integration_test - === Applying control at step 44 ===
2026-01-25 18:59:09,317 - INFO - integration_test -   Control dict from planner: {'a': -2.5844764565938113e-07, 'w': -0.7999979226984504}
2026-01-25 18:59:09,318 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:09,318 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:09,319 - INFO - integration_test - Step 44 completed in 2.531s
2026-01-25 18:59:09,384 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-25 18:59:09,385 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[10.65075036  6.22563687  0.81026144  3.         12.60000007]
2026-01-25 18:59:09,386 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=1.117m, drift=0.392m)
2026-01-25 18:59:09,386 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-25 18:59:09,391 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:09,511 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(10.651, 6.226), path_start=(0.000, 0.000), dist=12.337m
2026-01-25 18:59:09,511 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.337m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:09,511 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-25 18:59:09,625 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:09,650 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:09,650 - INFO - integration_test - Warmstart k=0: x0=10.650750358190212 , y0=6.225636870975553 , psi0=0.8102614351135429 , v0=3.0000000042113304 , spline0=12.600000073547985 , a0=0.0 , w0=0.0
2026-01-25 18:59:09,650 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:09,651 - INFO - integration_test - Dyn residual k=0: pred=[10.857543075067865, 6.442977093895837, 0.8102614351135429, 3.0000000042113304, 12.900000073969117], ws=[10.857543074777574, 6.44297709359074, 0.8102614351135431, 3.0, 12.041414214962128], res=[2.9029045833794953e-10, 3.050972807727703e-10, -2.220446049250313e-16, 4.211330395520463e-09, 0.8585858590069897], res_norm=8.586e-01
2026-01-25 18:59:09,652 - INFO - integration_test - Dyn residual k=1: pred=[11.064335791364936, 6.660317316205926, 0.8102614351135431, 3.0, 12.341414214962128], ws=[11.064335791364936, 6.660317316205926, 0.8102614351135431, 3.0, 12.442424315972229], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:59:09,653 - INFO - integration_test - Dyn residual k=2: pred=[11.271128507952298, 6.877657538821113, 0.8102614351135431, 3.0, 12.74242431597223], ws=[11.271128507952298, 6.877657538821113, 0.8102614351135431, 3.0, 12.540404113952029], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-25 18:59:09,669 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:09,828 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:09,848 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:09,896 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:09,918 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:09,965 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:09,985 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:10,032 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:10,054 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:10,099 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:10,120 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:10,164 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:10,182 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:10,230 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:10,250 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:10,298 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:10,320 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:10,363 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:10,386 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:10,432 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:10,452 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:10,499 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:11,258 - INFO - integration_test - Step 45: MPC solve successful
2026-01-25 18:59:11,291 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:11,291 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:11,660 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:11,661 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:12,523 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:12,558 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-25 18:59:12,559 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:12,559 - INFO - integration_test - === Applying control at step 45 ===
2026-01-25 18:59:12,559 - INFO - integration_test -   Control dict from planner: {'a': 1.4346227514293346e-07, 'w': -0.7999901475535285}
2026-01-25 18:59:12,559 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:12,559 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:12,560 - INFO - integration_test - Step 45 completed in 3.175s
2026-01-25 18:59:12,622 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-25 18:59:12,631 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[10.86601144  6.43447815  0.73026242  3.00000002 12.90000008]
2026-01-25 18:59:12,632 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=1.264m, drift=0.692m)
2026-01-25 18:59:12,632 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-25 18:59:12,636 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:12,764 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(10.866, 6.434), path_start=(0.000, 0.000), dist=12.628m
2026-01-25 18:59:12,764 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.628m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:12,764 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-25 18:59:12,873 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:12,900 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:12,900 - INFO - integration_test - Warmstart k=0: x0=10.86601144217624 , y0=6.434478151338105 , psi0=0.73026242035819 , v0=3.0000000185575577 , spline0=12.90000007540374 , a0=0.0 , w0=0.0
2026-01-25 18:59:12,900 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:12,901 - INFO - integration_test - Dyn residual k=0: pred=[11.089511256514893, 6.6345977008679835, 0.73026242035819, 3.0000000185575577, 13.200000077259496], ws=[11.089511255132356, 6.634597699630073, 0.7302624203581898, 3.0, 12.442424317827985], res=[1.3825367517483755e-09, 1.2379102187765056e-09, 2.220446049250313e-16, 1.855755771273948e-08, 0.7575757594315107], res_norm=7.576e-01
2026-01-25 18:59:12,902 - INFO - integration_test - Dyn residual k=1: pred=[11.313011068088471, 6.8347172479220415, 0.7302624203581898, 3.0, 12.742424317827986], ws=[11.313011068088471, 6.8347172479220415, 0.7302624203581898, 3.0, 12.843434418838084], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101009855], res_norm=1.010e-01
2026-01-25 18:59:12,903 - INFO - integration_test - Dyn residual k=2: pred=[11.536510881044586, 7.03483679621401, 0.7302624203581898, 3.0, 13.143434418838085], ws=[11.536510881044586, 7.03483679621401, 0.7302624203581898, 3.0, 12.941414216817885], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-25 18:59:12,919 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,082 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:13,104 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,149 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:13,172 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,224 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:13,247 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,299 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:13,321 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,365 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:13,389 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,436 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:13,457 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,506 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:13,526 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,568 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:13,588 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,633 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:13,654 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,701 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:13,721 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:13,764 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:14,458 - INFO - integration_test - Step 46: MPC solve successful
2026-01-25 18:59:14,486 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:14,487 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:14,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:14,496 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:15,297 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:15,344 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-25 18:59:15,344 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:15,344 - INFO - integration_test - === Applying control at step 46 ===
2026-01-25 18:59:15,345 - INFO - integration_test -   Control dict from planner: {'a': 8.887085334196308e-08, 'w': 0.7999984074474099}
2026-01-25 18:59:15,345 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:15,345 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:15,346 - INFO - integration_test - Step 46 completed in 2.715s
2026-01-25 18:59:15,411 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-25 18:59:15,415 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.08127244  6.64331952  0.81026226  3.00000003 13.20000008]
2026-01-25 18:59:15,415 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=1.376m, drift=0.504m)
2026-01-25 18:59:15,415 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-25 18:59:15,419 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:15,543 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.081, 6.643), path_start=(0.000, 0.000), dist=12.920m
2026-01-25 18:59:15,543 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.920m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:15,543 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-25 18:59:15,646 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:15,672 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:15,672 - INFO - integration_test - Warmstart k=0: x0=11.08127243954932 , y0=6.643319520272122 , psi0=0.810262261102931 , v0=3.000000027444643 , spline0=13.200000078148205 , a0=0.0 , w0=0.0
2026-01-25 18:59:15,672 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:15,673 - INFO - integration_test - Dyn residual k=0: pred=[11.288064978507675, 6.860659915684101, 0.810262261102931, 3.000000027444643, 13.50000008089267], ws=[11.288064976615894, 6.860659913695825, 0.8102622611029311, 3.0, 12.540404118552246], res=[1.8917809541108e-09, 1.9882762103407003e-09, -1.1102230246251565e-16, 2.7444643002638713e-08, 0.9595959623404244], res_norm=9.596e-01
2026-01-25 18:59:15,674 - INFO - integration_test - Dyn residual k=1: pred=[11.494857513682469, 7.078000307119527, 0.8102622611029311, 3.0, 12.840404118552247], ws=[11.494857513682469, 7.078000307119527, 0.8102622611029311, 3.0, 12.941414219562349], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:59:15,675 - INFO - integration_test - Dyn residual k=2: pred=[11.701650050749043, 7.29534070054323, 0.8102622611029311, 3.0, 13.24141421956235], ws=[11.701650050749043, 7.29534070054323, 0.8102622611029311, 3.0, 13.039394017542147], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-25 18:59:15,693 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:15,851 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:15,872 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:15,919 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:15,942 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:15,988 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:16,011 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:16,057 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:16,078 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:16,123 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:16,146 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:16,191 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:16,213 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:16,257 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:16,278 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:16,323 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:16,343 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:16,390 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:16,412 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:16,457 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:16,478 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:16,527 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:17,205 - INFO - integration_test - Step 47: MPC solve successful
2026-01-25 18:59:17,230 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:17,230 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:17,240 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:17,240 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:18,146 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:18,197 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-25 18:59:18,198 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:18,198 - INFO - integration_test - === Applying control at step 47 ===
2026-01-25 18:59:18,198 - INFO - integration_test -   Control dict from planner: {'a': 3.5318956352151036e-08, 'w': 0.3008816841886004}
2026-01-25 18:59:18,198 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:18,198 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:18,199 - INFO - integration_test - Step 47 completed in 2.785s
2026-01-25 18:59:18,262 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-25 18:59:18,266 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[11.28476434  6.86373789  0.84035043  3.00000003 13.50000008]
2026-01-25 18:59:18,267 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=1.542m, drift=0.804m)
2026-01-25 18:59:18,267 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-25 18:59:18,271 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:18,386 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(11.285, 6.864), path_start=(0.000, 0.000), dist=13.208m
2026-01-25 18:59:18,386 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.208m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:18,386 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-25 18:59:18,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:18,524 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:18,524 - INFO - integration_test - Warmstart k=0: x0=11.284764338074485 , y0=6.863737894073274 , psi0=0.8403504295217911 , v0=3.0000000309765387 , spline0=13.50000008124586 , a0=0.0 , w0=0.0
2026-01-25 18:59:18,524 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:18,525 - INFO - integration_test - Dyn residual k=0: pred=[11.484924892120759, 7.087200988257707, 0.8403504295217911, 3.0000000309765387, 13.800000084343514], ws=[11.484924890053998, 7.087200985950336, 0.840350429521791, 3.0, 12.941414222660002], res=[2.0667609845759216e-09, 2.3073711830079446e-09, 1.1102230246251565e-16, 3.097653866745986e-08, 0.8585858616835118], res_norm=8.586e-01
2026-01-25 18:59:18,526 - INFO - integration_test - Dyn residual k=1: pred=[11.685085442033511, 7.310664077827398, 0.840350429521791, 3.0, 13.241414222660003], ws=[11.685085442033511, 7.310664077827398, 0.840350429521791, 3.0, 13.0393940206398], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-25 18:59:18,527 - INFO - integration_test - Dyn residual k=2: pred=[11.885245994013024, 7.53412716970446, 0.840350429521791, 3.0, 13.339394020639801], ws=[11.885245994013024, 7.53412716970446, 0.840350429521791, 3.0, 13.642424323670106], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-25 18:59:18,546 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:18,704 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:18,727 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:18,769 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:18,793 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:18,836 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:18,857 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:18,904 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:18,926 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:18,969 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:18,990 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:19,034 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:19,057 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:19,105 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:19,126 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:19,171 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:19,192 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:19,235 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:19,258 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:19,305 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:19,327 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:19,369 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:20,054 - INFO - integration_test - Step 48: MPC solve successful
2026-01-25 18:59:20,085 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:20,085 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:20,099 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:20,100 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:20,986 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:21,041 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-25 18:59:21,042 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:21,042 - INFO - integration_test - === Applying control at step 48 ===
2026-01-25 18:59:21,042 - INFO - integration_test -   Control dict from planner: {'a': -1.1532483756406496e-06, 'w': -0.7999998511488103}
2026-01-25 18:59:21,042 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:21,042 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:21,043 - INFO - integration_test - Step 48 completed in 2.777s
2026-01-25 18:59:21,110 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-25 18:59:21,120 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[11.49364521  7.07896055  0.76035044  2.99999992 13.80000007]
2026-01-25 18:59:21,121 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=1.666m, drift=0.616m)
2026-01-25 18:59:21,121 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-25 18:59:21,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:21,624 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(11.494, 7.079), path_start=(0.000, 0.000), dist=13.499m
2026-01-25 18:59:21,624 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.499m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:21,624 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-25 18:59:21,738 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:21,763 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:21,763 - INFO - integration_test - Warmstart k=0: x0=11.493645210732646 , y0=7.078960551461083 , psi0=0.76035044440691 , v0=2.999999915651701 , spline0=13.80000007281103 , a0=0.0 , w0=0.0
2026-01-25 18:59:21,763 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:21,764 - INFO - integration_test - Dyn residual k=0: pred=[11.711023565891692, 7.285713170906281, 0.76035044440691, 2.999999915651701, 14.1000000643762], ws=[11.711023565891692, 7.285713170906281, 0.7603504444069102, 2.999999915651701, 13.03939400377014], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 1.0606060606060606], res_norm=1.061e+00
2026-01-25 18:59:21,765 - INFO - integration_test - Dyn residual k=1: pred=[11.928401921050737, 7.492465790351478, 0.7603504444069102, 2.999999915651701, 13.33939399533531], ws=[11.928401921050737, 7.492465790351478, 0.7603504444069102, 2.999999915651701, 13.44040409634541], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:59:21,766 - INFO - integration_test - Dyn residual k=2: pred=[12.145780276209782, 7.699218409796675, 0.7603504444069102, 2.999999915651701, 13.74040408791058], ws=[12.145780276209782, 7.699218409796675, 0.7603504444069102, 2.999999915651701, 13.538383885890376], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-25 18:59:21,784 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:21,953 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:21,974 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,022 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:22,044 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,090 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:22,113 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,157 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:22,178 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,225 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:22,246 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,294 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:22,316 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,361 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:22,383 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,427 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:22,448 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,497 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:22,521 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,564 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:22,583 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:22,629 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:23,287 - INFO - integration_test - Step 49: MPC solve successful
2026-01-25 18:59:23,317 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:23,318 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:23,327 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:23,328 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:24,252 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:24,298 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-25 18:59:24,298 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:24,298 - INFO - integration_test - === Applying control at step 49 ===
2026-01-25 18:59:24,298 - INFO - integration_test -   Control dict from planner: {'a': 1.0786418480589513e-06, 'w': -0.7999999999049475}
2026-01-25 18:59:24,298 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:24,298 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:24,299 - INFO - integration_test - Step 49 completed in 3.179s
2026-01-25 18:59:24,362 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-25 18:59:24,363 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[11.71905747  7.27680221  0.68035044  3.00000002 14.10000008]
2026-01-25 18:59:24,363 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=1.805m, drift=0.427m)
2026-01-25 18:59:24,363 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-25 18:59:24,367 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:24,477 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(11.719, 7.277), path_start=(0.000, 0.000), dist=13.794m
2026-01-25 18:59:24,477 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.794m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:24,477 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-25 18:59:24,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:24,619 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:24,619 - INFO - integration_test - Warmstart k=0: x0=11.719057472134756 , y0=7.276802213867037 , psi0=0.6803504444164152 , v0=3.0000000235158857 , spline0=14.100000075162619 , a0=0.0 , w0=0.0
2026-01-25 18:59:24,619 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:24,620 - INFO - integration_test - Dyn residual k=0: pred=[11.95226316816389, 7.4655218597720685, 0.6803504444164152, 3.0000000235158857, 14.400000077514207], ws=[11.952263166335877, 7.465521858292765, 0.6803504444164155, 3.0, 13.440404115566661], res=[1.8280132962900097e-09, 1.4793037905747042e-09, -2.220446049250313e-16, 2.3515885683167426e-08, 0.9595959619475458], res_norm=9.596e-01
2026-01-25 18:59:24,621 - INFO - integration_test - Dyn residual k=1: pred=[12.185468860536998, 7.6542415027184925, 0.6803504444164155, 3.0, 13.740404115566662], ws=[12.185468860536998, 7.6542415027184925, 0.6803504444164155, 3.0, 13.538383913546458], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-25 18:59:24,621 - INFO - integration_test - Dyn residual k=2: pred=[12.41867455473812, 7.84296114714422, 0.6803504444164155, 3.0, 13.838383913546458], ws=[12.41867455473812, 7.84296114714422, 0.6803504444164155, 3.0, 13.93939401455656], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:59:24,637 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:24,797 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:24,820 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:24,862 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:24,884 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:24,933 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:24,953 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:24,999 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:25,019 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:25,063 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:25,084 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:25,133 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:25,153 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:25,202 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:25,223 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:25,267 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:25,287 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:25,333 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:25,354 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:25,399 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:25,421 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:25,465 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:26,147 - INFO - integration_test - Step 50: MPC solve successful
2026-01-25 18:59:26,177 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:26,177 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:26,186 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:26,187 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:27,186 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:27,243 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-25 18:59:27,243 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:27,243 - INFO - integration_test - === Applying control at step 50 ===
2026-01-25 18:59:27,243 - INFO - integration_test -   Control dict from planner: {'a': 4.468993991963532e-08, 'w': -0.8000000052894236}
2026-01-25 18:59:27,243 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:27,243 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:27,244 - INFO - integration_test - Step 50 completed in 2.882s
2026-01-25 18:59:27,313 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-25 18:59:27,322 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[11.95955926  7.45599737  0.60035044  3.00000003 14.40000008]
2026-01-25 18:59:27,322 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=1.891m, drift=0.727m)
2026-01-25 18:59:27,322 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-25 18:59:27,326 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:27,442 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(11.960, 7.456), path_start=(0.000, 0.000), dist=14.093m
2026-01-25 18:59:27,442 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.093m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:27,442 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-25 18:59:27,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:27,573 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:27,573 - INFO - integration_test - Warmstart k=0: x0=11.959559259334661 , y0=7.45599737199127 , psi0=0.6003504438874728 , v0=3.0000000279848797 , spline0=14.400000077961106 , a0=0.0 , w0=0.0
2026-01-25 18:59:27,573 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:27,574 - INFO - integration_test - Dyn residual k=0: pred=[12.207100568262861, 7.625476875333727, 0.6003504438874728, 3.0000000279848797, 14.700000080759594], ws=[12.207100565953724, 7.625476873752773, 0.6003504438874727, 3.0, 13.841414219375249], res=[2.309137769884728e-09, 1.5809540343525441e-09, 1.1102230246251565e-16, 2.7984879746867364e-08, 0.8585858613843449], res_norm=8.586e-01
2026-01-25 18:59:27,575 - INFO - integration_test - Dyn residual k=1: pred=[12.454641872572786, 7.794956375514277, 0.6003504438874727, 3.0, 14.14141421937525], ws=[12.454641872572786, 7.794956375514277, 0.6003504438874727, 3.0, 13.939394017355047], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-25 18:59:27,575 - INFO - integration_test - Dyn residual k=2: pred=[12.702183179191849, 7.96443587727578, 0.6003504438874727, 3.0, 14.239394017355048], ws=[12.702183179191849, 7.96443587727578, 0.6003504438874727, 3.0, 14.34040411836515], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:59:27,591 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:27,751 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:27,772 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:27,817 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:27,838 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:27,881 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:27,904 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:27,950 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:27,972 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:28,017 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:28,038 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:28,082 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:28,105 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:28,148 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:28,169 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:28,216 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:28,236 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:28,280 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:28,304 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:28,348 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:28,367 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:28,414 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:29,096 - INFO - integration_test - Step 51: MPC solve successful
2026-01-25 18:59:29,127 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:29,127 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:29,137 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:29,137 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:30,180 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:30,238 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-25 18:59:30,238 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:30,238 - INFO - integration_test - === Applying control at step 51 ===
2026-01-25 18:59:30,238 - INFO - integration_test -   Control dict from planner: {'a': 1.0000479035765279e-08, 'w': -0.8000000084253936}
2026-01-25 18:59:30,238 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:30,238 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:30,240 - INFO - integration_test - Step 51 completed in 2.918s
2026-01-25 18:59:30,307 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-25 18:59:30,314 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[12.21361218  7.61539978  0.52035044  3.00000003 14.70000008]
2026-01-25 18:59:30,314 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=1.983m, drift=0.539m)
2026-01-25 18:59:30,314 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-25 18:59:30,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:30,430 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(12.214, 7.615), path_start=(0.000, 0.000), dist=14.393m
2026-01-25 18:59:30,430 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.393m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:30,431 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-25 18:59:30,540 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:30,565 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:30,565 - INFO - integration_test - Warmstart k=0: x0=12.21361217774573 , y0=7.61539978462026 , psi0=0.5203504430449335 , v0=3.000000028984928 , spline0=14.7000000808596 , a0=0.0 , w0=0.0
2026-01-25 18:59:30,565 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:30,566 - INFO - integration_test - Dyn residual k=0: pred=[12.473905679721842, 7.764555054618031, 0.5203504430449335, 3.000000028984928, 15.000000083758092], ws=[12.473905677206979, 7.764555053176945, 0.5203504430449337, 3.0, 13.93939402025354], res=[2.5148629845261894e-09, 1.4410854731750078e-09, -2.220446049250313e-16, 2.89849277912424e-08, 1.0606060635045527], res_norm=1.061e+00
2026-01-25 18:59:30,567 - INFO - integration_test - Dyn residual k=1: pred=[12.734199176668227, 7.91371032173363, 0.5203504430449337, 3.0, 14.23939402025354], ws=[12.734199176668227, 7.91371032173363, 0.5203504430449337, 3.0, 14.340404121263642], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:59:30,568 - INFO - integration_test - Dyn residual k=2: pred=[12.994492676129475, 8.062865590290315, 0.5203504430449337, 3.0, 14.640404121263643], ws=[12.994492676129475, 8.062865590290315, 0.5203504430449337, 3.0, 14.438383919243439], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-25 18:59:30,584 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:30,746 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:30,769 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:30,813 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:30,834 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:30,880 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:30,903 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:30,948 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:30,970 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:31,016 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:31,037 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:31,079 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:31,104 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:31,148 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:31,169 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:31,215 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:31,235 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:31,279 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:31,303 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:31,348 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:31,368 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:31,415 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:32,127 - INFO - integration_test - Step 52: MPC solve successful
2026-01-25 18:59:32,157 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:32,157 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:32,167 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:32,168 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:33,691 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:33,757 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-25 18:59:33,758 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:33,758 - INFO - integration_test - === Applying control at step 52 ===
2026-01-25 18:59:33,758 - INFO - integration_test -   Control dict from planner: {'a': -5.999130432276736e-07, 'w': -0.799999892078736}
2026-01-25 18:59:33,758 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:33,758 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:33,759 - INFO - integration_test - Step 52 completed in 3.446s
2026-01-25 18:59:33,832 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-25 18:59:33,835 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[12.47959115  7.75398982  0.44035045  2.99999997 15.00000008]
2026-01-25 18:59:33,836 - INFO - integration_test - Step 53: Safety reset spline from 15.0000 to 14.1608 (vehicle at (12.48, 7.75), closest path point at (12.95, 5.77), distance=2.035m, drift=0.839m)
2026-01-25 18:59:33,836 - DEBUG - integration_test -   Set spline state to 14.1608
2026-01-25 18:59:33,839 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:33,951 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(12.480, 7.754), path_start=(0.000, 0.000), dist=14.692m
2026-01-25 18:59:33,951 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.692m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:33,951 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-25 18:59:34,059 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:34,084 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:34,084 - INFO - integration_test - Warmstart k=0: x0=12.479591152029556 , y0=7.7539898202981865 , psi0=0.4403504538370599 , v0=2.9999999689936234 , spline0=14.160816635124155 , a0=0.0 , w0=0.0
2026-01-25 18:59:34,084 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:34,085 - INFO - integration_test - Dyn residual k=0: pred=[12.750971849887698, 7.8818667727550125, 0.4403504538370599, 2.9999999689936234, 14.460816632023517], ws=[12.750971849887698, 7.8818667727550125, 0.44035045383705995, 2.9999999689936234, 14.107281278488163], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.3535353535353547], res_norm=3.535e-01
2026-01-25 18:59:34,086 - INFO - integration_test - Dyn residual k=1: pred=[13.02235254774584, 8.00974372521184, 0.44035045383705995, 2.9999999689936234, 14.407281275387525], ws=[13.02235254774584, 8.00974372521184, 0.44035045383705995, 2.9999999689936234, 14.71031157841783], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-25 18:59:34,087 - INFO - integration_test - Dyn residual k=2: pred=[13.293733245603981, 8.137620677668666, 0.44035045383705995, 2.9999999689936234, 15.010311575317193], ws=[13.293733245603981, 8.137620677668666, 0.44035045383705995, 2.9999999689936234, 15.111321676327293], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:59:34,107 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,269 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:34,290 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,340 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:34,362 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,407 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:34,430 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,474 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:34,496 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,541 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:34,562 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,609 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:34,630 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,673 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:34,696 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,741 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:34,761 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,809 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:34,830 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,873 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:34,895 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:34,941 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:35,668 - INFO - integration_test - Step 53: MPC solve successful
2026-01-25 18:59:35,704 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:35,704 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:35,715 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:35,715 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 18:59:36,787 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:36,845 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=14.161)
2026-01-25 18:59:36,845 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:36,845 - INFO - integration_test - === Applying control at step 53 ===
2026-01-25 18:59:36,845 - INFO - integration_test -   Control dict from planner: {'a': 6.096139672010375e-07, 'w': -0.8000000098906529}
2026-01-25 18:59:36,845 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:36,845 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:36,847 - INFO - integration_test - Step 53 completed in 3.011s
2026-01-25 18:59:36,920 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-25 18:59:36,930 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[12.75579483  7.87088098  0.36035045  3.00000003 14.46081664]
2026-01-25 18:59:36,930 - INFO - integration_test - Step 54: Safety reset spline from 14.4608 to 14.6491 (vehicle at (12.76, 7.87), closest path point at (13.43, 5.91), distance=2.076m, drift=0.188m)
2026-01-25 18:59:36,931 - DEBUG - integration_test -   Set spline state to 14.6491
2026-01-25 18:59:36,934 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:37,052 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(12.756, 7.871), path_start=(0.000, 0.000), dist=14.989m
2026-01-25 18:59:37,052 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=14.989m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:37,052 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-25 18:59:37,161 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:37,187 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:37,187 - INFO - integration_test - Warmstart k=0: x0=12.75579482720611 , y0=7.870880977295657 , psi0=0.3603504528479946 , v0=3.0000000299550202 , spline0=14.649120657024989 , a0=0.0 , w0=0.0
2026-01-25 18:59:37,187 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:37,188 - INFO - integration_test - Dyn residual k=0: pred=[13.036526823219228, 7.976661638154777, 0.3603504528479946, 3.0000000299550202, 14.94912066002049], ws=[13.036526820416116, 7.976661637098556, 0.3603504528479946, 3.0, 14.494575202479535], res=[2.803112408855668e-09, 1.0562208885289692e-09, 0.0, 2.995502024205621e-08, 0.45454545754095577], res_norm=4.545e-01
2026-01-25 18:59:37,190 - INFO - integration_test - Dyn residual k=1: pred=[13.317258813626122, 8.082442296901455, 0.3603504528479946, 3.0, 14.794575202479535], ws=[13.317258813626122, 8.082442296901455, 0.3603504528479946, 3.0, 15.097605505509838], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-25 18:59:37,191 - INFO - integration_test - Dyn residual k=2: pred=[13.597990806836128, 8.188222956704355, 0.3603504528479946, 3.0, 15.397605505509839], ws=[13.597990806836128, 8.188222956704355, 0.3603504528479946, 3.0, 14.993565101469436], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-25 18:59:37,208 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,369 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:37,390 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,435 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:37,456 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,500 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:37,522 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,569 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:37,591 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,637 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:37,658 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,703 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:37,726 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,771 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:37,791 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,836 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:37,857 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,902 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:37,925 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:37,971 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:37,990 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:38,035 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:38,782 - INFO - integration_test - Step 54: MPC solve successful
2026-01-25 18:59:38,822 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:38,822 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:38,832 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:38,833 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 18:59:39,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:39,965 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=14.649)
2026-01-25 18:59:39,966 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:39,966 - INFO - integration_test - === Applying control at step 54 ===
2026-01-25 18:59:39,966 - INFO - integration_test -   Control dict from planner: {'a': -5.716247627214311e-08, 'w': -0.799999994096078}
2026-01-25 18:59:39,966 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:39,966 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:39,967 - INFO - integration_test - Step 54 completed in 3.037s
2026-01-25 18:59:40,038 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-25 18:59:40,045 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[13.04045645  7.96532555  0.28035045  3.00000002 14.94912066]
2026-01-25 18:59:40,045 - INFO - integration_test - Step 55: Safety reset spline from 14.9491 to 14.6491 (vehicle at (13.04, 7.97), closest path point at (13.43, 5.91), distance=2.094m, drift=0.300m)
2026-01-25 18:59:40,045 - DEBUG - integration_test -   Set spline state to 14.6491
2026-01-25 18:59:40,049 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:40,169 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(13.040, 7.965), path_start=(0.000, 0.000), dist=15.281m
2026-01-25 18:59:40,169 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.281m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:40,169 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-25 18:59:40,283 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:40,311 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:40,311 - INFO - integration_test - Warmstart k=0: x0=13.040456445577165 , y0=7.96532555072356 , psi0=0.2803504534383868 , v0=3.0000000242387728 , spline0=14.649120657024989 , a0=0.0 , w0=0.0
2026-01-25 18:59:40,311 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:40,313 - INFO - integration_test - Dyn residual k=0: pred=[13.32874400675888, 8.048333282425045, 0.2803504534383868, 3.0000000242387728, 14.949120659448866], ws=[13.328744004429634, 8.048333281754376, 0.2803504534383867, 3.0, 15.100635808540142], res=[2.329246129306739e-09, 6.706688537860828e-10, 1.1102230246251565e-16, 2.4238772766693728e-08, -0.15151514909127606], res_norm=1.515e-01
2026-01-25 18:59:40,313 - INFO - integration_test - Dyn residual k=1: pred=[13.617031563282103, 8.13134101278519, 0.2803504534383867, 3.0, 15.400635808540143], ws=[13.617031563282103, 8.13134101278519, 0.2803504534383867, 3.0, 14.996595404499736], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040664], res_norm=4.040e-01
2026-01-25 18:59:40,314 - INFO - integration_test - Dyn residual k=2: pred=[13.905319122134571, 8.214348743816005, 0.2803504534383867, 3.0, 15.296595404499737], ws=[13.905319122134571, 8.214348743816005, 0.2803504534383867, 3.0, 15.39760550550984], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010388], res_norm=1.010e-01
2026-01-25 18:59:40,331 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:40,490 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:40,514 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:40,561 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:40,583 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:40,631 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:40,652 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:40,701 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:40,748 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:40,811 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:40,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:40,877 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:40,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:40,945 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:40,967 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:41,010 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:41,031 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:41,075 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:41,097 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:41,145 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:41,166 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:41,210 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:41,902 - INFO - integration_test - Step 55: MPC solve successful
2026-01-25 18:59:41,939 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:41,939 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:41,948 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:41,949 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 18:59:43,051 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:43,106 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=14.649)
2026-01-25 18:59:43,107 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:43,107 - INFO - integration_test - === Applying control at step 55 ===
2026-01-25 18:59:43,107 - INFO - integration_test -   Control dict from planner: {'a': 9.972015931560113e-08, 'w': -0.8000000018353708}
2026-01-25 18:59:43,107 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:43,107 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:43,108 - INFO - integration_test - Step 55 completed in 3.063s
2026-01-25 18:59:43,180 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-25 18:59:43,181 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[13.33175514  8.03671942  0.20035045  3.00000003 14.94912066]
2026-01-25 18:59:43,182 - INFO - integration_test - Step 56: Safety reset spline from 14.9491 to 15.1374 (vehicle at (13.33, 8.04), closest path point at (13.92, 6.04), distance=2.084m, drift=0.188m)
2026-01-25 18:59:43,182 - DEBUG - integration_test -   Set spline state to 15.1374
2026-01-25 18:59:43,185 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:43,302 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(13.332, 8.037), path_start=(0.000, 0.000), dist=15.567m
2026-01-25 18:59:43,302 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.567m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:43,302 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-25 18:59:43,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:43,443 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:43,443 - INFO - integration_test - Warmstart k=0: x0=13.331755141863917 , y0=8.036719416649998 , psi0=0.20035045325484974 , v0=3.000000034210789 , spline0=15.137424678925822 , a0=0.0 , w0=0.0
2026-01-25 18:59:43,443 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:43,444 - INFO - integration_test - Dyn residual k=0: pred=[13.625754213219883, 8.096423253163888, 0.20035045325484974, 3.000000034210789, 15.4374246823469], ws=[13.625754209867235, 8.09642325248305, 0.2003504532548499, 3.0, 14.982879224380367], res=[3.352647937049369e-09, 6.808384966916492e-10, -1.6653345369377348e-16, 3.4210788868449526e-08, 0.45454545796653356], res_norm=4.545e-01
2026-01-25 18:59:43,445 - INFO - integration_test - Dyn residual k=1: pred=[13.919753277870553, 8.1561270883161, 0.2003504532548499, 3.0, 15.282879224380368], ws=[13.919753277870553, 8.1561270883161, 0.2003504532548499, 3.0, 15.38388932539047], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-25 18:59:43,446 - INFO - integration_test - Dyn residual k=2: pred=[14.213752345873871, 8.215830924149152, 0.2003504532548499, 3.0, 15.68388932539047], ws=[14.213752345873871, 8.215830924149152, 0.2003504532548499, 3.0, 15.784899426400571], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:59:43,464 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:43,665 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:43,688 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:43,733 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:43,754 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:43,803 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:43,823 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:43,865 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:43,888 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:43,935 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:43,955 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:44,003 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:44,024 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:44,071 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:44,093 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:44,139 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:44,162 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:44,208 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:44,229 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:44,275 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:44,295 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:44,339 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:45,079 - INFO - integration_test - Step 56: MPC solve successful
2026-01-25 18:59:45,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:45,115 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:45,127 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:45,128 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:46,316 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:46,380 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.137)
2026-01-25 18:59:46,381 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:46,381 - INFO - integration_test - === Applying control at step 56 ===
2026-01-25 18:59:46,381 - INFO - integration_test -   Control dict from planner: {'a': -6.110167110024375e-09, 'w': -0.8000000079632037}
2026-01-25 18:59:46,381 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:46,381 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:46,382 - INFO - integration_test - Step 56 completed in 3.201s
2026-01-25 18:59:46,451 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-25 18:59:46,459 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[13.6278276   8.0846059   0.12035045  3.00000003 15.43742468]
2026-01-25 18:59:46,459 - INFO - integration_test - Step 57: Safety reset spline from 15.4374 to 15.1374 (vehicle at (13.63, 8.08), closest path point at (13.92, 6.04), distance=2.068m, drift=0.300m)
2026-01-25 18:59:46,459 - DEBUG - integration_test -   Set spline state to 15.1374
2026-01-25 18:59:46,462 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:46,615 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(13.628, 8.085), path_start=(0.000, 0.000), dist=15.845m
2026-01-25 18:59:46,616 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.845m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:46,616 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-25 18:59:47,165 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:47,191 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:47,191 - INFO - integration_test - Warmstart k=0: x0=13.627827598796117 , y0=8.08460589779406 , psi0=0.12035045245852935 , v0=3.0000000335997723 , spline0=15.137424678925822 , a0=0.0 , w0=0.0
2026-01-25 18:59:47,192 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:47,193 - INFO - integration_test - Dyn residual k=0: pred=[13.925657588566944, 8.12062393784478, 0.12035045245852935, 3.0000000335997723, 15.4374246822858], ws=[13.92565758523127, 8.120623937441382, 0.12035045245852949, 3.0, 15.386919628420772], res=[3.33567307109206e-09, 4.033982037299211e-10, -1.3877787807814457e-16, 3.3599772297776553e-08, 0.05050505386502735], res_norm=5.051e-02
2026-01-25 18:59:47,194 - INFO - integration_test - Dyn residual k=1: pred=[14.223487571666425, 8.156641977088704, 0.12035045245852949, 3.0, 15.686919628420773], ws=[14.223487571666425, 8.156641977088704, 0.12035045245852949, 3.0, 15.48489942640057], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-25 18:59:47,195 - INFO - integration_test - Dyn residual k=2: pred=[14.521317558101579, 8.192660016736026, 0.12035045245852949, 3.0, 15.784899426400571], ws=[14.521317558101579, 8.192660016736026, 0.12035045245852949, 3.0, 15.885909527410671], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:59:47,212 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,374 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:47,397 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,442 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:47,462 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,510 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:47,532 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,576 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:47,600 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,646 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:47,666 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,712 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:47,735 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,778 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:47,801 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,844 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:47,863 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,909 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:47,934 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:47,977 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:48,002 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:48,046 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:48,843 - INFO - integration_test - Step 57: MPC solve successful
2026-01-25 18:59:48,869 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:48,869 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:48,878 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:48,879 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:50,174 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:50,242 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=15.137)
2026-01-25 18:59:50,242 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:50,242 - INFO - integration_test - === Applying control at step 57 ===
2026-01-25 18:59:50,242 - INFO - integration_test -   Control dict from planner: {'a': -4.7203163532713696e-08, 'w': -0.8000000047145724}
2026-01-25 18:59:50,242 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:50,242 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:50,243 - INFO - integration_test - Step 57 completed in 3.785s
2026-01-25 18:59:50,310 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-25 18:59:50,316 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[13.92677996  8.10867868  0.04035045  3.00000003 15.43742468]
2026-01-25 18:59:50,317 - INFO - integration_test - Step 58: Safety reset spline from 15.4374 to 15.6257 (vehicle at (13.93, 8.11), closest path point at (14.41, 6.16), distance=2.008m, drift=0.188m)
2026-01-25 18:59:50,317 - DEBUG - integration_test -   Set spline state to 15.6257
2026-01-25 18:59:50,320 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:50,438 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(13.927, 8.109), path_start=(0.000, 0.000), dist=16.115m
2026-01-25 18:59:50,438 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.115m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:50,438 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-25 18:59:50,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:50,572 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:50,572 - INFO - integration_test - Warmstart k=0: x0=13.926779962291281 , y0=8.10867868391074 , psi0=0.040350451987072114 , v0=3.000000028879456 , spline0=15.625728700826654 , a0=0.0 , w0=0.0
2026-01-25 18:59:50,572 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:50,573 - INFO - integration_test - Dyn residual k=0: pred=[14.226535774465015, 8.120780535043234, 0.040350451987072114, 3.000000028879456, 15.925728703714599], ws=[14.22653577157942, 8.120780534926736, 0.04035045198707232, 3.0, 15.775814203414866], res=[2.8855957623363793e-09, 1.1649881059838663e-10, -2.0816681711721685e-16, 2.88794561598138e-08, 0.14991450029973308], res_norm=1.499e-01
2026-01-25 18:59:50,573 - INFO - integration_test - Dyn residual k=1: pred=[14.526291580867557, 8.13288238594273, 0.04035045198707232, 3.0, 16.075814203414865], ws=[14.526291580867557, 8.13288238594273, 0.04035045198707232, 3.0, 15.873794001394664], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-25 18:59:50,574 - INFO - integration_test - Dyn residual k=2: pred=[14.826047390155695, 8.144984236958726, 0.04035045198707232, 3.0, 16.173794001394665], ws=[14.826047390155695, 8.144984236958726, 0.04035045198707232, 3.0, 16.274804102404765], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:59:50,590 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:50,757 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:50,780 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:50,825 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:50,847 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:50,892 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:50,913 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:50,958 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:50,981 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:51,024 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:51,045 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:51,089 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:51,113 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:51,160 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:51,182 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:51,229 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:51,248 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:51,296 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:51,318 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:51,363 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:51,383 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:51,428 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:52,153 - INFO - integration_test - Step 58: MPC solve successful
2026-01-25 18:59:52,191 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:52,191 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:52,202 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:52,203 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:53,467 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:53,545 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=15.626)
2026-01-25 18:59:53,546 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:53,546 - INFO - integration_test - === Applying control at step 58 ===
2026-01-25 18:59:53,546 - INFO - integration_test -   Control dict from planner: {'a': 1.1049086605025329e-08, 'w': -0.8000000097372285}
2026-01-25 18:59:53,546 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:53,546 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:53,547 - INFO - integration_test - Step 58 completed in 3.231s
2026-01-25 18:59:53,617 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-25 18:59:53,629 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[14.22669996  8.10878379 -0.03964955  3.00000003 15.9257287 ]
2026-01-25 18:59:53,630 - DEBUG - integration_test - Step 59: Using propagated spline 15.9257 (close to path, dist=1.953m, drift=0.188m)
2026-01-25 18:59:53,630 - DEBUG - integration_test -   Set spline state to 15.9257
2026-01-25 18:59:53,634 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:53,757 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(14.227, 8.109), path_start=(0.000, 0.000), dist=16.375m
2026-01-25 18:59:53,757 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.375m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:53,757 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-25 18:59:53,867 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:53,891 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:53,891 - INFO - integration_test - Warmstart k=0: x0=14.226699957480312 , y0=8.108783791326564 , psi0=-0.039649548986650726 , v0=3.0000000299843648 , spline0=15.92572870382509 , a0=0.0 , w0=0.0
2026-01-25 18:59:53,891 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:53,892 - INFO - integration_test - Dyn residual k=0: pred=[14.526464178357754, 8.096892042893243, -0.039649548986650726, 3.0000000299843648, 16.225728706823528], ws=[14.526464175361674, 8.096892043012097, -0.03964954898665063, 3.0, 15.872193350289738], res=[2.9960798286765566e-09, -1.1885425976743136e-10, -9.71445146547012e-17, 2.998436476886468e-08, 0.35353535653379], res_norm=3.535e-01
2026-01-25 18:59:53,893 - INFO - integration_test - Dyn residual k=1: pred=[14.826228393243037, 8.08500029469763, -0.03964954898665063, 3.0, 16.17219335028974], ws=[14.826228393243037, 8.08500029469763, -0.03964954898665063, 3.0, 16.27320345129984], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 18:59:53,894 - INFO - integration_test - Dyn residual k=2: pred=[15.1259926111244, 8.073108546383164, -0.03964954898665063, 3.0, 16.57320345129984], ws=[15.1259926111244, 8.073108546383164, -0.03964954898665063, 3.0, 16.37118324927964], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-25 18:59:53,910 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,074 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:54,095 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,140 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:54,163 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,210 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:54,231 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,278 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:54,299 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,343 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:54,366 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,413 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:54,434 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,478 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:54,499 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,542 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:54,562 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,609 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:54,631 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,676 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:54,697 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:54,743 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:55,560 - INFO - integration_test - Step 59: MPC solve successful
2026-01-25 18:59:55,600 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 18:59:55,600 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 18:59:55,612 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 18:59:55,613 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 18:59:57,021 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 18:59:57,087 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=15.926)
2026-01-25 18:59:57,087 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 18:59:57,087 - INFO - integration_test - === Applying control at step 59 ===
2026-01-25 18:59:57,087 - INFO - integration_test -   Control dict from planner: {'a': 1.5508438644465043e-10, 'w': -0.8000000099967726}
2026-01-25 18:59:57,087 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 18:59:57,087 - INFO - integration_test -   Planner output success: True
2026-01-25 18:59:57,088 - INFO - integration_test - Step 59 completed in 3.459s
2026-01-25 18:59:57,157 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-25 18:59:57,166 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[14.52566912  8.08492055 -0.11964955  3.00000003 16.22572871]
2026-01-25 18:59:57,166 - DEBUG - integration_test - Step 60: Using propagated spline 16.2257 (close to path, dist=1.847m, drift=0.112m)
2026-01-25 18:59:57,166 - DEBUG - integration_test -   Set spline state to 16.2257
2026-01-25 18:59:57,169 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:57,283 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(14.526, 8.085), path_start=(0.000, 0.000), dist=16.624m
2026-01-25 18:59:57,283 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.624m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 18:59:57,283 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-25 18:59:57,390 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 18:59:57,417 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 18:59:57,417 - INFO - integration_test - Warmstart k=0: x0=14.52566912009827 , y0=8.084920547648514 , psi0=-0.11964954998632797 , v0=3.0000000299998733 , spline0=16.225728706825077 , a0=0.0 , w0=0.0
2026-01-25 18:59:57,417 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 18:59:57,418 - INFO - integration_test - Dyn residual k=0: pred=[14.823524281486314, 8.049111266246985, -0.11964954998632797, 3.0000000299998733, 16.525728709825064], ws=[14.823524278507776, 8.049111266605076, -0.11964954998632793, 3.0, 16.273203454299825], res=[2.978538304887479e-09, -3.580904461841783e-10, -4.163336342344337e-17, 2.9999873252251064e-08, 0.25252525552523863], res_norm=2.525e-01
2026-01-25 18:59:57,419 - INFO - integration_test - Dyn residual k=1: pred=[15.121379436917282, 8.013301985561638, -0.11964954998632793, 3.0, 16.573203454299826], ws=[15.121379436917282, 8.013301985561638, -0.11964954998632793, 3.0, 16.37118325227962], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-25 18:59:57,420 - INFO - integration_test - Dyn residual k=2: pred=[15.419234595326788, 7.9774927045182, -0.11964954998632793, 3.0, 16.671183252279622], ws=[15.419234595326788, 7.9774927045182, -0.11964954998632793, 3.0, 16.772193353289726], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010388], res_norm=1.010e-01
2026-01-25 18:59:57,436 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:57,596 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:57,618 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:57,665 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:57,688 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:57,735 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:57,757 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:57,804 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:57,825 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:57,872 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:57,895 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:57,943 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:57,965 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:58,012 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:58,033 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:58,078 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:58,100 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:58,146 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 18:59:58,168 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:58,214 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 18:59:58,233 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 18:59:58,279 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:00,041 - INFO - integration_test - Step 60: MPC solve successful
2026-01-25 19:00:00,071 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:00:00,072 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:00:00,081 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:00:00,082 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:00:01,463 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:00:01,530 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=16.226)
2026-01-25 19:00:01,530 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:00:01,530 - INFO - integration_test - === Applying control at step 60 ===
2026-01-25 19:00:01,530 - INFO - integration_test -   Control dict from planner: {'a': -5.4212758635648396e-05, 'w': -0.7994805615011967}
2026-01-25 19:00:01,530 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:00:01,530 - INFO - integration_test -   Planner output success: True
2026-01-25 19:00:01,531 - INFO - integration_test - Step 60 completed in 4.366s
2026-01-25 19:00:01,597 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-25 19:00:01,608 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[14.82177614  8.03724932 -0.19959761  2.99999461 16.52572817]
2026-01-25 19:00:01,608 - DEBUG - integration_test - Step 61: Using propagated spline 16.5257 (close to path, dist=1.747m, drift=0.077m)
2026-01-25 19:00:01,608 - DEBUG - integration_test -   Set spline state to 16.5257
2026-01-25 19:00:01,611 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:01,735 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(14.822, 8.037), path_start=(0.000, 0.000), dist=16.861m
2026-01-25 19:00:01,735 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=16.861m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:00:01,735 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-25 19:00:01,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:01,870 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:00:01,871 - INFO - integration_test - Warmstart k=0: x0=14.821776141439022 , y0=8.0372493169399 , psi0=-0.19959760613644764 , v0=2.9999946087240095 , spline0=16.525728167697476 , a0=0.0 , w0=0.0
2026-01-25 19:00:01,871 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:00:01,872 - INFO - integration_test - Dyn residual k=0: pred=[15.115819545558649, 7.977766941252026, -0.19959760613644764, 2.9999946087240095, 16.825727628569876], ws=[15.115819545558649, 7.977766941252026, -0.1995976061364475, 2.9999946087240095, 16.37118217402442], res=[0.0, 0.0, -1.3877787807814457e-16, 0.0, 0.4545454545454568], res_norm=4.545e-01
2026-01-25 19:00:01,873 - INFO - integration_test - Dyn residual k=1: pred=[15.409862949678276, 7.918284565564152, -0.1995976061364475, 2.9999946087240095, 16.67118163489682], ws=[15.409862949678276, 7.918284565564152, -0.1995976061364475, 2.9999946087240095, 16.772191735906922], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010388], res_norm=1.010e-01
2026-01-25 19:00:01,873 - INFO - integration_test - Dyn residual k=2: pred=[15.703906353797903, 7.858802189876278, -0.1995976061364475, 2.9999946087240095, 17.072191196779322], ws=[15.703906353797903, 7.858802189876278, -0.1995976061364475, 2.9999946087240095, 16.87017099475912], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-25 19:00:01,891 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,055 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:02,076 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,121 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:02,146 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,193 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:02,216 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,260 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:02,282 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,327 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:02,348 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,395 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:02,417 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,463 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:02,484 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,529 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:02,549 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,598 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:02,619 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,666 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:02,686 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:02,736 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:06,850 - WARNING - integration_test - Step 61: MPC solve failed
2026-01-25 19:00:06,850 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-25 19:00:06,887 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:00:06,887 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:00:06,899 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:00:06,900 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:00:08,397 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:00:08,462 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=16.526)
2026-01-25 19:00:08,462 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:00:08,462 - INFO - integration_test - === Applying control at step 61 ===
2026-01-25 19:00:08,462 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-25 19:00:08,462 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:00:08,462 - INFO - integration_test -   Planner output success: False
2026-01-25 19:00:08,462 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-25 19:00:08,464 - INFO - integration_test - Step 61 completed in 6.856s
2026-01-25 19:00:08,539 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-25 19:00:08,549 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[15.10344787  7.96857688 -0.27959761  2.79999461 16.80572763]
2026-01-25 19:00:08,550 - DEBUG - integration_test - Step 62: Using propagated spline 16.8057 (close to path, dist=1.608m, drift=0.203m)
2026-01-25 19:00:08,550 - DEBUG - integration_test -   Set spline state to 16.8057
2026-01-25 19:00:08,553 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:08,678 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(15.103, 7.969), path_start=(0.000, 0.000), dist=17.077m
2026-01-25 19:00:08,678 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.077m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:00:08,678 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-25 19:00:08,800 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:08,827 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:00:08,827 - INFO - integration_test - Warmstart k=0: x0=15.103447865226412 , y0=7.968576877886166 , psi0=-0.27959760613644763 , v0=2.7999946087240093 , spline0=16.805727628569876 , a0=0.0 , w0=0.0
2026-01-25 19:00:08,827 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:00:08,828 - INFO - integration_test - Dyn residual k=0: pred=[15.372573985043882, 7.891305733719482, -0.27959760613644763, 2.7999946087240093, 17.085727089442276], ws=[15.372573985043882, 7.891305733719482, -0.2795976061364476, 2.7999946087240093, 16.732191735906923], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.3535353535353529], res_norm=3.535e-01
2026-01-25 19:00:08,829 - INFO - integration_test - Dyn residual k=1: pred=[15.641700104861352, 7.814034589552797, -0.2795976061364476, 2.7999946087240093, 17.012191196779323], ws=[15.641700104861352, 7.814034589552797, -0.2795976061364476, 2.7999946087240093, 17.113201297789423], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 19:00:08,830 - INFO - integration_test - Dyn residual k=2: pred=[15.910826224678821, 7.736763445386113, -0.2795976061364476, 2.7999946087240093, 17.393200758661823], ws=[15.910826224678821, 7.736763445386113, -0.2795976061364476, 2.7999946087240093, 17.19118055664162], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-25 19:00:08,845 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,006 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:09,027 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,071 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:09,096 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,141 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:09,165 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,212 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:09,234 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,280 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:09,303 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,347 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:09,368 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,415 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:09,436 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,480 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:09,503 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,547 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:09,568 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,614 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:09,634 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:09,681 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:10,397 - INFO - integration_test - Step 62: MPC solve successful
2026-01-25 19:00:10,439 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:00:10,440 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:00:10,449 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:00:10,450 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:00:11,871 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:00:11,947 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=16.806)
2026-01-25 19:00:11,948 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:00:11,948 - INFO - integration_test - === Applying control at step 62 ===
2026-01-25 19:00:11,948 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000134910985, 'w': 0.05007592210543474}
2026-01-25 19:00:11,948 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:00:11,948 - INFO - integration_test -   Planner output success: True
2026-01-25 19:00:11,949 - INFO - integration_test - Step 62 completed in 3.400s
2026-01-25 19:00:12,019 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-25 19:00:12,028 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[15.38238715  7.88925231 -0.27459001  2.99999461 17.10572709]
2026-01-25 19:00:12,028 - DEBUG - integration_test - Step 63: Using propagated spline 17.1057 (close to path, dist=1.487m, drift=0.015m)
2026-01-25 19:00:12,028 - DEBUG - integration_test -   Set spline state to 17.1057
2026-01-25 19:00:12,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:12,148 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(15.382, 7.889), path_start=(0.000, 0.000), dist=17.288m
2026-01-25 19:00:12,148 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.288m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:00:12,148 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-25 19:00:12,252 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:12,278 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:00:12,278 - INFO - integration_test - Warmstart k=0: x0=15.38238714942418 , y0=7.889252307882209 , psi0=-0.27459001392590415 , v0=2.999994610073119 , spline0=17.105727089577186 , a0=0.0 , w0=0.0
2026-01-25 19:00:12,278 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:00:12,279 - INFO - integration_test - Dyn residual k=0: pred=[15.67114756478449, 7.807906754066291, -0.27459001392590415, 2.999994610073119, 17.405726550584497], ws=[15.67114756478449, 7.807906754066291, -0.2745900139259043, 2.999994610073119, 16.85017099502894], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, 0.5555555555555571], res_norm=5.556e-01
2026-01-25 19:00:12,279 - INFO - integration_test - Dyn residual k=1: pred=[15.959907980144802, 7.726561200250373, -0.2745900139259043, 2.999994610073119, 17.15017045603625], ws=[15.959907980144802, 7.726561200250373, -0.2745900139259043, 2.999994610073119, 17.251180557046354], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010388], res_norm=1.010e-01
2026-01-25 19:00:12,280 - INFO - integration_test - Dyn residual k=2: pred=[16.248668395505113, 7.645215646434455, -0.2745900139259043, 2.999994610073119, 17.551180018053664], ws=[16.248668395505113, 7.645215646434455, -0.2745900139259043, 2.999994610073119, 17.34915981603346], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-25 19:00:12,296 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:12,459 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:12,481 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:12,527 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:12,549 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:12,595 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:12,617 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:12,666 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:12,689 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:12,743 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:12,770 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:12,817 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:12,839 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:12,883 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:12,906 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:12,952 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:12,983 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:13,056 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:13,077 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:13,127 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:13,147 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:13,190 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:19,475 - WARNING - integration_test - Step 63: MPC solve failed
2026-01-25 19:00:19,475 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-25 19:00:19,516 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:00:19,516 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:00:19,526 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:00:19,526 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:00:21,040 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:00:21,108 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=17.106)
2026-01-25 19:00:21,109 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:00:21,109 - INFO - integration_test - === Applying control at step 63 ===
2026-01-25 19:00:21,109 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-25 19:00:21,109 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:00:21,109 - INFO - integration_test -   Planner output success: False
2026-01-25 19:00:21,109 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-25 19:00:21,110 - INFO - integration_test - Step 63 completed in 9.083s
2026-01-25 19:00:21,182 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-25 19:00:21,189 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[15.65812212  7.79966943 -0.35459001  2.79999461 17.38572655]
2026-01-25 19:00:21,190 - DEBUG - integration_test - Step 64: Using propagated spline 17.3857 (close to path, dist=1.327m, drift=0.295m)
2026-01-25 19:00:21,190 - DEBUG - integration_test -   Set spline state to 17.3857
2026-01-25 19:00:21,195 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:21,313 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(15.658, 7.800), path_start=(0.000, 0.000), dist=17.493m
2026-01-25 19:00:21,313 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=17.493m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:00:21,313 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-25 19:00:21,429 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:21,454 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:00:21,454 - INFO - integration_test - Warmstart k=0: x0=15.658122117275603 , y0=7.79966943312855 , psi0=-0.35459001392590417 , v0=2.799994610073119 , spline0=17.385726550584497 , a0=0.0 , w0=0.0
2026-01-25 19:00:21,454 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:00:21,455 - INFO - integration_test - Dyn residual k=0: pred=[15.920702508636047, 7.702451964341395, -0.35459001392590417, 2.799994610073119, 17.665726011591808], ws=[15.920702508636047, 7.702451964341395, -0.35459001392590395, 2.799994610073119, 17.211180557046355], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.45454545454545325], res_norm=4.545e-01
2026-01-25 19:00:21,456 - INFO - integration_test - Dyn residual k=1: pred=[16.18328289999649, 7.605234495554241, -0.35459001392590395, 2.799994610073119, 17.491180018053665], ws=[16.18328289999649, 7.605234495554241, -0.35459001392590395, 2.799994610073119, 17.592190119063766], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 19:00:21,456 - INFO - integration_test - Dyn residual k=2: pred=[16.445863291356936, 7.508017026767086, -0.35459001392590395, 2.799994610073119, 17.872189580071076], ws=[16.445863291356936, 7.508017026767086, -0.35459001392590395, 2.799994610073119, 17.670169378050872], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-25 19:00:21,472 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:21,679 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:21,703 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:21,750 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:21,774 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:21,828 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:21,853 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:21,905 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:21,930 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:21,980 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:22,004 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:22,053 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:22,075 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:22,122 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:22,143 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:22,188 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:22,211 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:22,257 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:22,278 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:22,325 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:22,346 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:22,393 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:25,161 - INFO - integration_test - Step 64: MPC solve successful
2026-01-25 19:00:25,204 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:00:25,204 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:00:25,214 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:00:25,215 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:00:26,658 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:00:26,733 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=17.386)
2026-01-25 19:00:26,733 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:00:26,733 - INFO - integration_test - === Applying control at step 64 ===
2026-01-25 19:00:26,733 - INFO - integration_test -   Control dict from planner: {'a': 1.9999932393976216, 'w': 0.7999827162748568}
2026-01-25 19:00:26,733 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:00:26,733 - INFO - integration_test -   Planner output success: True
2026-01-25 19:00:26,734 - INFO - integration_test - Step 64 completed in 5.545s
2026-01-25 19:00:26,805 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-25 19:00:26,816 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[15.93385698  7.71008633 -0.27459174  2.99999393 17.68572594]
2026-01-25 19:00:26,817 - DEBUG - integration_test - Step 65: Using propagated spline 17.6857 (close to path, dist=1.208m, drift=0.107m)
2026-01-25 19:00:26,817 - DEBUG - integration_test -   Set spline state to 17.6857
2026-01-25 19:00:26,821 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:26,943 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(15.934, 7.710), path_start=(0.000, 0.000), dist=17.701m
2026-01-25 19:00:26,944 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=17.701m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:00:26,944 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-25 19:00:27,052 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:27,079 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:00:27,079 - INFO - integration_test - Warmstart k=0: x0=15.933856977721732 , y0=7.710086326346154 , psi0=-0.2745917422984185 , v0=2.999993934012881 , spline0=17.685725943985787 , a0=0.0 , w0=0.0
2026-01-25 19:00:27,079 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:00:27,080 - INFO - integration_test - Dyn residual k=0: pred=[16.22261718741296, 7.6287402917764355, -0.2745917422984185, 2.999993934012881, 17.985725337387073], ws=[16.22261718741296, 7.6287402917764355, -0.2745917422984183, 2.999993934012881, 17.329159680821416], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.6565656565656575], res_norm=6.566e-01
2026-01-25 19:00:27,081 - INFO - integration_test - Dyn residual k=1: pred=[16.51137739710419, 7.547394257206717, -0.2745917422984183, 2.999993934012881, 17.629159074222706], ws=[16.51137739710419, 7.547394257206717, -0.2745917422984183, 2.999993934012881, 17.730169175232803], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101009678], res_norm=1.010e-01
2026-01-25 19:00:27,082 - INFO - integration_test - Dyn residual k=2: pred=[16.80013760679542, 7.466048222636998, -0.2745917422984183, 2.999993934012881, 18.03016856863409], ws=[16.80013760679542, 7.466048222636998, -0.2745917422984183, 2.999993934012881, 17.82814836661389], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-25 19:00:27,099 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,260 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:27,281 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,327 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:27,350 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,397 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:27,430 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,500 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:27,522 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,570 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:27,591 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,639 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:27,659 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,710 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:27,732 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,781 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:27,804 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,850 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:27,871 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,917 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:27,939 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:27,987 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:28,677 - INFO - integration_test - Step 65: MPC solve successful
2026-01-25 19:00:28,723 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:00:28,723 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:00:29,234 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:00:29,235 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:00:30,806 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:00:30,879 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=17.686)
2026-01-25 19:00:30,879 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:00:30,879 - INFO - integration_test - === Applying control at step 65 ===
2026-01-25 19:00:30,879 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019386712, 'w': 0.7999996361412595}
2026-01-25 19:00:30,879 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:00:30,879 - INFO - integration_test -   Planner output success: True
2026-01-25 19:00:30,881 - INFO - integration_test - Step 65 completed in 4.065s
2026-01-25 19:00:30,953 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-25 19:00:30,965 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[16.2158069   7.64256547 -0.19459178  2.79999393 17.96572534]
2026-01-25 19:00:30,965 - DEBUG - integration_test - Step 66: Using propagated spline 17.9657 (close to path, dist=1.063m, drift=0.387m)
2026-01-25 19:00:30,965 - DEBUG - integration_test -   Set spline state to 17.9657
2026-01-25 19:00:30,970 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:31,090 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(16.216, 7.643), path_start=(0.000, 0.000), dist=17.927m
2026-01-25 19:00:31,090 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=17.927m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:00:31,090 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-25 19:00:31,205 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:00:31,233 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:00:31,233 - INFO - integration_test - Warmstart k=0: x0=16.21580689990125 , y0=7.6425654694041585 , psi0=-0.19459177868429253 , v0=2.79999393207421 , spline0=17.96572533719321 , a0=0.0 , w0=0.0
2026-01-25 19:00:31,233 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:00:31,234 - INFO - integration_test - Dyn residual k=0: pred=[16.490521777042392, 7.588423097144984, -0.19459177868429253, 2.79999393207421, 18.24572473040063], ws=[16.490521777042392, 7.588423097144984, -0.19459177868429256, 2.79999393207421, 17.690169174845074], res=[0.0, 0.0, 2.7755575615628914e-17, 0.0, 0.5555555555555571], res_norm=5.556e-01
2026-01-25 19:00:31,235 - INFO - integration_test - Dyn residual k=1: pred=[16.765236654183536, 7.53428072488581, -0.19459177868429256, 2.79999393207421, 17.970168568052497], ws=[16.765236654183536, 7.53428072488581, -0.19459177868429256, 2.79999393207421, 18.071178669062597], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-25 19:00:31,236 - INFO - integration_test - Dyn residual k=2: pred=[17.03995153132468, 7.480138352626636, -0.19459177868429256, 2.79999393207421, 18.35117806227002], ws=[17.03995153132468, 7.480138352626636, -0.19459177868429256, 2.79999393207421, 18.452188163280123], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010388], res_norm=1.010e-01
2026-01-25 19:00:31,252 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,412 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:31,433 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,477 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:31,500 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,544 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:31,566 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,616 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:31,637 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,686 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:31,709 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,759 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:31,781 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,827 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:31,849 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,902 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:31,924 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:31,972 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:00:31,994 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:32,040 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:00:32,061 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:00:32,108 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:09,988 - WARNING - integration_test - Step 66: MPC solve failed
2026-01-25 19:01:09,988 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-25 19:01:10,032 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:10,032 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:10,042 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:10,043 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:01:11,673 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:11,733 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=17.966)
2026-01-25 19:01:11,733 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:11,733 - INFO - integration_test - === Applying control at step 66 ===
2026-01-25 19:01:11,733 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-25 19:01:11,733 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:11,733 - INFO - integration_test -   Planner output success: False
2026-01-25 19:01:11,733 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-25 19:01:11,735 - INFO - integration_test - Step 66 completed in 40.770s
2026-01-25 19:01:11,811 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-25 19:01:11,820 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[16.47837179  7.57995158 -0.27459178  2.59999393 18.22572473]
2026-01-25 19:01:11,821 - DEBUG - integration_test - Step 67: Using propagated spline 18.2257 (close to path, dist=0.984m, drift=0.158m)
2026-01-25 19:01:11,821 - DEBUG - integration_test -   Set spline state to 18.2257
2026-01-25 19:01:11,826 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:11,954 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(16.478, 7.580), path_start=(0.000, 0.000), dist=18.138m
2026-01-25 19:01:11,954 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.138m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:11,954 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-25 19:01:12,065 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:12,092 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:12,092 - INFO - integration_test - Warmstart k=0: x0=16.478371790061146 , y0=7.579951580393445 , psi0=-0.2745917786842925 , v0=2.59999393207421 , spline0=18.225724730400632 , a0=0.0 , w0=0.0
2026-01-25 19:01:12,092 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:12,093 - INFO - integration_test - Dyn residual k=0: pred=[16.728630557858665, 7.509451696643928, -0.2745917786842925, 2.59999393207421, 18.485724123608055], ws=[16.728630557858665, 7.509451696643928, -0.27459177868429263, 2.59999393207421, 17.829158467042397], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.6565656565656575], res_norm=6.566e-01
2026-01-25 19:01:12,094 - INFO - integration_test - Dyn residual k=1: pred=[16.978889325656183, 7.438951812894411, -0.27459177868429263, 2.59999393207421, 18.08915786024982], ws=[16.978889325656183, 7.438951812894411, -0.27459177868429263, 2.59999393207421, 18.392188163280125], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-25 19:01:12,095 - INFO - integration_test - Dyn residual k=2: pred=[17.229148093453702, 7.368451929144894, -0.27459177868429263, 2.59999393207421, 18.652187556487547], ws=[17.229148093453702, 7.368451929144894, -0.27459177868429263, 2.59999393207421, 18.515347529621952], res=[0.0, 0.0, 0.0, 0.0, 0.13684002686559538], res_norm=1.368e-01
2026-01-25 19:01:12,111 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,313 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:12,334 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,379 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:12,403 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,448 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:12,469 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,516 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:12,537 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,581 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:12,605 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,654 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:12,677 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,727 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:12,748 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,798 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:12,822 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,868 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:12,889 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:12,937 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:12,958 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:13,005 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:13,734 - INFO - integration_test - Step 67: MPC solve successful
2026-01-25 19:01:13,775 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:13,775 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:13,787 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:13,787 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:01:15,465 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:15,544 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=18.226)
2026-01-25 19:01:15,545 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:15,545 - INFO - integration_test - === Applying control at step 67 ===
2026-01-25 19:01:15,545 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199991055, 'w': 0.8000000098941001}
2026-01-25 19:01:15,545 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:15,545 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:15,546 - INFO - integration_test - Step 67 completed in 3.726s
2026-01-25 19:01:15,622 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-25 19:01:15,627 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[16.72142771  7.52172608 -0.19459178  2.39999393 18.46572412]
2026-01-25 19:01:15,627 - DEBUG - integration_test - Step 68: Using propagated spline 18.4657 (close to path, dist=0.850m, drift=0.398m)
2026-01-25 19:01:15,627 - DEBUG - integration_test -   Set spline state to 18.4657
2026-01-25 19:01:15,633 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:15,750 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(16.721, 7.522), path_start=(0.000, 0.000), dist=18.335m
2026-01-25 19:01:15,750 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=18.335m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:15,750 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-25 19:01:15,866 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:15,892 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:15,892 - INFO - integration_test - Warmstart k=0: x0=16.721427711410524 , y0=7.521726077952593 , psi0=-0.1945917776948825 , v0=2.399993930074299 , spline0=18.465724123408062 , a0=0.0 , w0=0.0
2026-01-25 19:01:15,892 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:15,893 - INFO - integration_test - Dyn residual k=0: pred=[16.956897520904004, 7.475318347335388, -0.1945917776948825, 2.399993930074299, 18.705723516415492], ws=[16.956897520904004, 7.475318347335388, -0.19459177769488267, 2.399993930074299, 18.15016796085994], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, 0.5555555555555536], res_norm=5.556e-01
2026-01-25 19:01:15,894 - INFO - integration_test - Dyn residual k=1: pred=[17.192367330397484, 7.428910616718182, -0.19459177769488267, 2.399993930074299, 18.39016735386737], ws=[17.192367330397484, 7.428910616718182, -0.19459177769488267, 2.399993930074299, 18.280980374472108], res=[0.0, 0.0, 0.0, 0.0, 0.10918697939526112], res_norm=1.092e-01
2026-01-25 19:01:15,894 - INFO - integration_test - Dyn residual k=2: pred=[17.427837139890965, 7.382502886100977, -0.19459177769488267, 2.399993930074299, 18.52097976747954], ws=[17.427837139890965, 7.382502886100977, -0.19459177769488267, 2.399993930074299, 18.613529016389656], res=[0.0, 0.0, 0.0, 0.0, -0.0925492489101174], res_norm=9.255e-02
2026-01-25 19:01:15,912 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,080 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:16,102 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,148 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:16,169 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,219 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:16,242 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,293 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:16,315 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,359 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:16,383 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,433 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:16,453 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,499 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:16,521 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,563 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:16,586 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,633 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:16,655 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,703 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:16,725 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:16,768 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:18,508 - INFO - integration_test - Step 68: MPC solve successful
2026-01-25 19:01:18,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:18,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:18,558 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:18,558 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:01:20,242 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:20,321 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=18.466)
2026-01-25 19:01:20,321 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:20,321 - INFO - integration_test - === Applying control at step 68 ===
2026-01-25 19:01:20,321 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000187732065, 'w': 0.7999999997181779}
2026-01-25 19:01:20,321 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:20,321 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:20,323 - INFO - integration_test - Step 68 completed in 4.696s
2026-01-25 19:01:20,393 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-25 19:01:20,407 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[16.96840039  7.48337395 -0.11459178  2.59999393 18.72572352]
2026-01-25 19:01:20,407 - DEBUG - integration_test - Step 69: Using propagated spline 18.7257 (close to path, dist=0.796m, drift=0.658m)
2026-01-25 19:01:20,407 - DEBUG - integration_test -   Set spline state to 18.7257
2026-01-25 19:01:20,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:20,531 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(16.968, 7.483), path_start=(0.000, 0.000), dist=18.545m
2026-01-25 19:01:20,531 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=18.545m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:20,531 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-25 19:01:20,639 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:20,666 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:20,666 - INFO - integration_test - Warmstart k=0: x0=16.96840039128237 , y0=7.483373953732592 , psi0=-0.11459177772306472 , v0=2.59999393195162 , spline0=18.725723516603225 , a0=0.0 , w0=0.0
2026-01-25 19:01:20,666 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:20,668 - INFO - integration_test - Dyn residual k=0: pred=[17.226694589817928, 7.453645323344932, -0.11459177772306472, 2.59999393195162, 18.985722909798387], ws=[17.226694589817928, 7.453645323344932, -0.1145917777230645, 2.59999393195162, 18.504438438590398], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.4812844712079887], res_norm=4.813e-01
2026-01-25 19:01:20,668 - INFO - integration_test - Dyn residual k=1: pred=[17.484988788353487, 7.423916692957272, -0.1145917777230645, 2.59999393195162, 18.76443783178556], ws=[17.484988788353487, 7.423916692957272, -0.1145917777230645, 2.59999393195162, 18.646256289424123], res=[0.0, 0.0, 0.0, 0.0, 0.11818154236143741], res_norm=1.182e-01
2026-01-25 19:01:20,669 - INFO - integration_test - Dyn residual k=2: pred=[17.743282986889046, 7.394188062569612, -0.1145917777230645, 2.59999393195162, 18.906255682619285], ws=[17.743282986889046, 7.394188062569612, -0.1145917777230645, 2.59999393195162, 18.978400915549813], res=[0.0, 0.0, 0.0, 0.0, -0.07214523293052721], res_norm=7.215e-02
2026-01-25 19:01:20,685 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:20,848 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:20,870 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:20,918 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:20,939 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:20,987 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:21,011 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:21,056 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:21,079 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:21,125 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:21,150 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:21,218 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:21,248 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:21,302 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:21,328 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:21,376 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:21,398 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:21,449 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:21,471 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:21,518 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:21,539 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:21,581 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:22,324 - INFO - integration_test - Step 69: MPC solve successful
2026-01-25 19:01:22,368 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:22,368 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:22,378 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:22,379 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:01:24,059 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:24,144 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=18.726)
2026-01-25 19:01:24,144 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:24,144 - INFO - integration_test - === Applying control at step 69 ===
2026-01-25 19:01:24,144 - INFO - integration_test -   Control dict from planner: {'a': 2.000000017690548, 'w': 0.5285222033270986}
2026-01-25 19:01:24,144 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:24,144 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:24,146 - INFO - integration_test - Step 69 completed in 3.739s
2026-01-25 19:01:24,219 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-25 19:01:24,228 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[17.23732754  7.45969061 -0.06173956  2.79999393 19.00572291]
2026-01-25 19:01:24,229 - DEBUG - integration_test - Step 70: Using propagated spline 19.0057 (close to path, dist=0.699m, drift=0.450m)
2026-01-25 19:01:24,229 - DEBUG - integration_test -   Set spline state to 19.0057
2026-01-25 19:01:24,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:24,353 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(17.237, 7.460), path_start=(0.000, 0.000), dist=18.782m
2026-01-25 19:01:24,353 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=18.782m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:24,353 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-25 19:01:24,990 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:25,016 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:25,017 - INFO - integration_test - Warmstart k=0: x0=17.237327540505795 , y0=7.459690606252569 , psi0=-0.06173955739035485 , v0=2.7999939337206747 , spline0=19.00572290997529 , a0=0.0 , w0=0.0
2026-01-25 19:01:25,017 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:25,017 - INFO - integration_test - Dyn residual k=0: pred=[17.516793456311728, 7.442414547920971, -0.06173955739035485, 2.7999939337206747, 19.285722303347356], ws=[17.516793456311728, 7.442414547920971, -0.06173955739035497, 2.7999939337206747, 18.66807447143529], res=[0.0, 0.0, 1.1796119636642288e-16, 0.0, 0.6176478319120662], res_norm=6.176e-01
2026-01-25 19:01:25,018 - INFO - integration_test - Dyn residual k=1: pred=[17.79625937211766, 7.425138489589373, -0.06173955739035497, 2.7999939337206747, 18.948073864807355], ws=[17.79625937211766, 7.425138489589373, -0.06173955739035497, 2.7999939337206747, 19.293588048447397], res=[0.0, 0.0, 0.0, 0.0, -0.3455141836400415], res_norm=3.455e-01
2026-01-25 19:01:25,019 - INFO - integration_test - Dyn residual k=2: pred=[18.075725287923593, 7.407862431257775, -0.06173955739035497, 2.7999939337206747, 19.573587441819463], ws=[18.075725287923593, 7.407862431257775, -0.06173955739035497, 2.7999939337206747, 19.15698645578157], res=[0.0, 0.0, 0.0, 0.0, 0.4166009860378921], res_norm=4.166e-01
2026-01-25 19:01:25,034 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,197 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:25,221 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,267 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:25,291 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,338 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:25,358 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,406 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:25,430 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,476 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:25,496 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,544 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:25,564 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,613 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:25,635 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,685 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:25,708 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,750 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:25,774 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,820 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:25,840 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:25,888 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:26,584 - INFO - integration_test - Step 70: MPC solve successful
2026-01-25 19:01:26,638 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:26,638 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:26,652 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:26,654 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:01:28,405 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:28,488 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.006)
2026-01-25 19:01:28,489 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:28,489 - INFO - integration_test - === Applying control at step 70 ===
2026-01-25 19:01:28,489 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000134686666, 'w': -0.7999991414752979}
2026-01-25 19:01:28,489 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:28,489 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:28,490 - INFO - integration_test - Step 70 completed in 4.262s
2026-01-25 19:01:28,563 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-25 19:01:28,572 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[17.52573689  7.43011233 -0.14173947  2.99999394 19.3057223 ]
2026-01-25 19:01:28,572 - DEBUG - integration_test - Step 71: Using propagated spline 19.3057 (close to path, dist=0.660m, drift=0.750m)
2026-01-25 19:01:28,572 - DEBUG - integration_test -   Set spline state to 19.3057
2026-01-25 19:01:28,576 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:28,691 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(17.526, 7.430), path_start=(0.000, 0.000), dist=19.036m
2026-01-25 19:01:28,691 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.036m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:28,691 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-25 19:01:28,802 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:28,829 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:28,829 - INFO - integration_test - Warmstart k=0: x0=17.52573688547531 , y0=7.430112326938514 , psi0=-0.14173947153788466 , v0=2.9999939350675415 , spline0=19.305722303482046 , a0=0.0 , w0=0.0
2026-01-25 19:01:28,829 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:28,830 - INFO - integration_test - Dyn residual k=0: pred=[17.822727815158302, 7.387732806053388, -0.14173947153788466, 2.9999939350675415, 19.6057216969888], ws=[17.822727815158302, 7.387732806053388, -0.14173947153788458, 2.9999939350675415, 19.030926168495313], res=[0.0, 0.0, -8.326672684688674e-17, 0.0, 0.5747955284934889], res_norm=5.748e-01
2026-01-25 19:01:28,831 - INFO - integration_test - Dyn residual k=1: pred=[18.119718744841293, 7.345353285168263, -0.14173947153788458, 2.9999939350675415, 19.33092556200207], ws=[18.119718744841293, 7.345353285168263, -0.14173947153788458, 2.9999939350675415, 19.18850160750896], res=[0.0, 0.0, 0.0, 0.0, 0.14242395449310763], res_norm=1.424e-01
2026-01-25 19:01:28,831 - INFO - integration_test - Dyn residual k=2: pred=[18.416709674524284, 7.302973764283137, -0.14173947153788458, 2.9999939350675415, 19.488501001015717], ws=[18.416709674524284, 7.302973764283137, -0.14173947153788458, 2.9999939350675415, 19.786540510620515], res=[0.0, 0.0, 0.0, 0.0, -0.2980395096047985], res_norm=2.980e-01
2026-01-25 19:01:28,847 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,014 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:29,037 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,082 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:29,103 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,149 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:29,172 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,219 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:29,241 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,285 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:29,308 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,353 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:29,374 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,420 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:29,443 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,488 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:29,510 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,552 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:29,572 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,615 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:29,635 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:29,680 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:30,396 - INFO - integration_test - Step 71: MPC solve successful
2026-01-25 19:01:30,443 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:30,443 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:30,453 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:30,454 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:01:32,191 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:32,275 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=19.306)
2026-01-25 19:01:32,275 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:32,275 - INFO - integration_test - === Applying control at step 71 ===
2026-01-25 19:01:32,275 - INFO - integration_test -   Control dict from planner: {'a': 6.0929200672656124e-05, 'w': -0.799999931208261}
2026-01-25 19:01:32,275 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:32,275 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:32,276 - INFO - integration_test - Step 71 completed in 3.705s
2026-01-25 19:01:32,350 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-25 19:01:32,358 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[17.82071715  7.37590463 -0.22173946  3.00000003 19.60572231]
2026-01-25 19:01:32,358 - DEBUG - integration_test - Step 72: Using propagated spline 19.6057 (close to path, dist=0.517m, drift=0.562m)
2026-01-25 19:01:32,358 - DEBUG - integration_test -   Set spline state to 19.6057
2026-01-25 19:01:32,362 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:32,480 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(17.821, 7.376), path_start=(0.000, 0.000), dist=19.287m
2026-01-25 19:01:32,480 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=19.287m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:32,480 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-25 19:01:32,627 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:32,653 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:32,653 - INFO - integration_test - Warmstart k=0: x0=17.820717152469875 , y0=7.375904634879822 , psi0=-0.22173946465871075 , v0=3.0000000279876087 , spline0=19.605722306280807 , a0=0.0 , w0=0.0
2026-01-25 19:01:32,653 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:32,654 - INFO - integration_test - Dyn residual k=0: pred=[18.113372066320387, 7.309926584905565, -0.22173946465871075, 3.0000000279876087, 19.905722309079568], ws=[18.113372063590152, 7.309926585521087, -0.22173946465871097, 3.0, 19.188502246103234], res=[2.7302355931624334e-09, -6.15521855706902e-10, 2.220446049250313e-16, 2.7987608675061892e-08, 0.7172200629763346], res_norm=7.172e-01
2026-01-25 19:01:32,655 - INFO - integration_test - Dyn residual k=1: pred=[18.40602697471043, 7.2439485361623515, -0.22173946465871097, 3.0, 19.488502246103234], ws=[18.40602697471043, 7.2439485361623515, -0.22173946465871097, 3.0, 19.78654137574263], res=[0.0, 0.0, 0.0, 0.0, -0.2980391296393954], res_norm=2.980e-01
2026-01-25 19:01:32,656 - INFO - integration_test - Dyn residual k=2: pred=[18.698681885830705, 7.177970486803616, -0.22173946465871097, 3.0, 20.08654137574263], ws=[18.698681885830705, 7.177970486803616, -0.22173946465871097, 3.0, 19.6737785040196], res=[0.0, 0.0, 0.0, 0.0, 0.4127628717230287], res_norm=4.128e-01
2026-01-25 19:01:32,672 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:32,836 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:32,860 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:32,907 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:32,932 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:32,981 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:33,003 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:33,052 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:33,073 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:33,118 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:33,139 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:33,185 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:33,210 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:33,256 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:33,279 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:33,326 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:33,347 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:33,393 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:33,417 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:33,464 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:33,488 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:33,533 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:34,265 - INFO - integration_test - Step 72: MPC solve successful
2026-01-25 19:01:34,315 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:34,315 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:34,326 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:34,327 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:01:36,106 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:36,185 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=19.606)
2026-01-25 19:01:36,185 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:36,185 - INFO - integration_test - === Applying control at step 72 ===
2026-01-25 19:01:36,185 - INFO - integration_test -   Control dict from planner: {'a': 2.0103589012622065e-08, 'w': -0.5275722417088148}
2026-01-25 19:01:36,185 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:36,185 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:36,187 - INFO - integration_test - Step 72 completed in 3.829s
2026-01-25 19:01:36,268 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-25 19:01:36,270 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[18.11149632  7.30223915 -0.27449669  3.00000003 19.90572231]
2026-01-25 19:01:36,271 - DEBUG - integration_test - Step 73: Using propagated spline 19.9057 (close to path, dist=0.469m, drift=0.374m)
2026-01-25 19:01:36,271 - DEBUG - integration_test -   Set spline state to 19.9057
2026-01-25 19:01:36,278 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:36,415 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(18.111, 7.302), path_start=(0.000, 0.000), dist=19.528m
2026-01-25 19:01:36,415 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=19.528m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:36,415 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-25 19:01:36,541 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:36,569 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:36,569 - INFO - integration_test - Warmstart k=0: x0=18.111496321402974 , y0=7.302239146764901 , psi0=-0.2744966888295922 , v0=3.0000000299979677 , spline0=19.905722309280605 , a0=0.0 , w0=0.0
2026-01-25 19:01:36,569 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:36,570 - INFO - integration_test - Dyn residual k=0: pred=[18.400264848788662, 7.220920394982921, -0.2744966888295922, 3.0000000299979677, 20.205722312280404], ws=[18.400264845901173, 7.220920395796053, -0.2744966888295921, 3.0, 19.786541377166778], res=[2.88748935872718e-09, -8.131326723059829e-10, -1.1102230246251565e-16, 2.99979676654516e-08, 0.4191809351136264], res_norm=4.192e-01
2026-01-25 19:01:36,571 - INFO - integration_test - Dyn residual k=1: pred=[18.689033370399372, 7.139601644827206, -0.2744966888295921, 3.0, 20.08654137716678], ws=[18.689033370399372, 7.139601644827206, -0.2744966888295921, 3.0, 19.67377850553465], res=[0.0, 0.0, 0.0, 0.0, 0.412762871632129], res_norm=4.128e-01
2026-01-25 19:01:36,572 - INFO - integration_test - Dyn residual k=2: pred=[18.97780189489757, 7.058282893858358, -0.2744966888295921, 3.0, 19.97377850553465], ws=[18.97780189489757, 7.058282893858358, -0.2744966888295921, 3.0, 20.317486066980724], res=[0.0, 0.0, 0.0, 0.0, -0.34370756144607384], res_norm=3.437e-01
2026-01-25 19:01:36,588 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:36,768 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:36,788 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:36,837 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:36,859 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:36,912 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:36,937 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:36,984 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:37,010 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:37,061 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:37,082 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:37,127 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:37,147 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:37,191 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:37,215 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:37,266 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:37,286 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:37,331 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:37,351 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:37,397 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:37,419 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:37,468 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:38,253 - INFO - integration_test - Step 73: MPC solve successful
2026-01-25 19:01:38,303 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:38,303 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:38,314 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:38,314 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:01:40,173 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:40,256 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=19.906)
2026-01-25 19:01:40,256 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:40,256 - INFO - integration_test - === Applying control at step 73 ===
2026-01-25 19:01:40,256 - INFO - integration_test -   Control dict from planner: {'a': 1.833802408834835e-11, 'w': 0.8000000099836252}
2026-01-25 19:01:40,256 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:40,256 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:40,257 - INFO - integration_test - Step 73 completed in 3.987s
2026-01-25 19:01:40,328 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-25 19:01:40,338 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[18.40320795  7.23255169 -0.19449669  3.00000003 20.20572231]
2026-01-25 19:01:40,339 - DEBUG - integration_test - Step 74: Using propagated spline 20.2057 (close to path, dist=0.284m, drift=0.674m)
2026-01-25 19:01:40,339 - DEBUG - integration_test -   Set spline state to 20.2057
2026-01-25 19:01:40,344 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:40,464 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(18.403, 7.233), path_start=(0.000, 0.000), dist=19.773m
2026-01-25 19:01:40,464 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=19.773m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:40,464 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-25 19:01:40,570 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:40,594 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:40,594 - INFO - integration_test - Warmstart k=0: x0=18.403207947401224 , y0=7.232551688401256 , psi0=-0.1944966878312297 , v0=3.0000000299998013 , spline0=20.205722312280585 , a0=0.0 , w0=0.0
2026-01-25 19:01:40,594 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:40,595 - INFO - integration_test - Dyn residual k=0: pred=[18.697551471446452, 7.174569866658361, -0.1944966878312297, 3.0000000299998013, 20.505722315280565], ws=[18.697551468503036, 7.1745698672381755, -0.19449668783122975, 3.0, 19.67377850704979], res=[2.9434161774588574e-09, -5.798144186996979e-10, 5.551115123125783e-17, 2.999980130979907e-08, 0.8319438082307755], res_norm=8.319e-01
2026-01-25 19:01:40,596 - INFO - integration_test - Dyn residual k=1: pred=[18.991894989604848, 7.116588046075095, -0.19449668783122975, 3.0, 19.97377850704979], ws=[18.991894989604848, 7.116588046075095, -0.19449668783122975, 3.0, 20.317486068314047], res=[0.0, 0.0, 0.0, 0.0, -0.3437075612642566], res_norm=3.437e-01
2026-01-25 19:01:40,598 - INFO - integration_test - Dyn residual k=2: pred=[19.28623851070666, 7.0586062249120145, -0.19449668783122975, 3.0, 20.617486068314047], ws=[19.28623851070666, 7.0586062249120145, -0.19449668783122975, 3.0, 20.687824697431022], res=[0.0, 0.0, 0.0, 0.0, -0.07033862911697497], res_norm=7.034e-02
2026-01-25 19:01:40,615 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:40,777 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:40,799 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:40,846 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:40,868 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:40,915 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:40,938 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:40,986 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:41,011 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:41,063 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:41,085 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:41,132 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:41,153 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:41,198 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:41,221 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:41,271 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:41,293 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:41,340 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:41,361 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:41,406 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:41,428 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:41,480 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:42,205 - INFO - integration_test - Step 74: MPC solve successful
2026-01-25 19:01:42,252 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:42,252 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:42,262 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:42,263 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:01:44,082 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:44,159 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=20.206)
2026-01-25 19:01:44,160 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:44,160 - INFO - integration_test - === Applying control at step 74 ===
2026-01-25 19:01:44,160 - INFO - integration_test -   Control dict from planner: {'a': -4.702146533424849e-08, 'w': -0.3558737787304119}
2026-01-25 19:01:44,160 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:44,160 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:44,161 - INFO - integration_test - Step 74 completed in 3.823s
2026-01-25 19:01:44,237 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-25 19:01:44,246 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[18.69645774  7.1693452  -0.23008407  3.00000003 20.50572231]
2026-01-25 19:01:44,247 - DEBUG - integration_test - Step 75: Using propagated spline 20.5057 (close to path, dist=0.273m, drift=0.485m)
2026-01-25 19:01:44,247 - DEBUG - integration_test -   Set spline state to 20.5057
2026-01-25 19:01:44,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:44,372 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(18.696, 7.169), path_start=(0.000, 0.000), dist=20.024m
2026-01-25 19:01:44,372 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=20.024m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:44,372 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-25 19:01:44,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:44,520 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:44,521 - INFO - integration_test - Warmstart k=0: x0=18.696457744573085 , y0=7.169345200145358 , psi0=-0.2300840657042709 , v0=3.0000000252976546 , spline0=20.50572231481035 , a0=0.0 , w0=0.0
2026-01-25 19:01:44,521 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:44,522 - INFO - integration_test - Dyn residual k=0: pred=[18.988551914978338, 7.100927387164196, -0.2300840657042709, 3.0000000252976546, 20.805722317340113], ws=[18.98855191251524, 7.100927387741133, -0.2300840657042711, 3.0, 20.317486069438385], res=[2.4630963935123873e-09, -5.769367206198694e-10, 1.942890293094024e-16, 2.529765463776812e-08, 0.48823624790172815], res_norm=4.882e-01
2026-01-25 19:01:44,524 - INFO - integration_test - Dyn residual k=1: pred=[19.280646080457398, 7.032509575336908, -0.2300840657042711, 3.0, 20.617486069438385], ws=[19.280646080457398, 7.032509575336908, -0.2300840657042711, 3.0, 20.687824698478703], res=[0.0, 0.0, 0.0, 0.0, -0.07033862904031807], res_norm=7.034e-02
2026-01-25 19:01:44,525 - INFO - integration_test - Dyn residual k=2: pred=[19.572740248399555, 6.964091762932683, -0.2300840657042711, 3.0, 20.987824698478704], ws=[19.572740248399555, 6.964091762932683, -0.2300840657042711, 3.0, 20.81206712272113], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-25 19:01:44,551 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:44,727 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:44,748 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:44,790 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:44,814 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:44,861 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:44,881 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:44,933 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:44,957 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:45,005 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:45,027 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:45,073 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:45,096 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:45,141 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:45,164 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:45,208 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:45,230 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:45,274 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:45,295 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:45,343 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:45,362 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:45,403 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:46,122 - INFO - integration_test - Step 75: MPC solve successful
2026-01-25 19:01:46,171 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:46,172 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:46,745 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:46,746 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:01:48,618 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:48,704 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=20.506)
2026-01-25 19:01:48,704 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:48,704 - INFO - integration_test - === Applying control at step 75 ===
2026-01-25 19:01:48,704 - INFO - integration_test -   Control dict from planner: {'a': -2.1542214403864201e-10, 'w': -0.7370764746943609}
2026-01-25 19:01:48,704 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:48,704 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:48,705 - INFO - integration_test - Step 75 completed in 4.459s
2026-01-25 19:01:48,774 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-25 19:01:48,785 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[18.98576719  7.09022941 -0.30379171  3.00000003 20.80572232]
2026-01-25 19:01:48,786 - DEBUG - integration_test - Step 76: Using propagated spline 20.8057 (close to path, dist=0.085m, drift=0.785m)
2026-01-25 19:01:48,786 - DEBUG - integration_test -   Set spline state to 20.8057
2026-01-25 19:01:48,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:48,908 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(18.986, 7.090), path_start=(0.000, 0.000), dist=20.266m
2026-01-25 19:01:48,908 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=20.266m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:48,909 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-25 19:01:49,023 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:49,051 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:49,051 - INFO - integration_test - Warmstart k=0: x0=18.985767190725966 , y0=7.090229405414689 , psi0=-0.303791713173707 , v0=3.0000000252761123 , spline0=20.80572231733796 , a0=0.0 , w0=0.0
2026-01-25 19:01:49,051 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:49,052 - INFO - integration_test - Dyn residual k=0: pred=[19.272029922081643, 7.0004872739860575, -0.303791713173707, 3.0000000252761123, 21.10572231986557], ws=[19.272029919669773, 7.000487274742168, -0.3037917131737071, 3.0, 20.687824699525493], res=[2.411869814977763e-09, -7.561107295828151e-10, 1.1102230246251565e-16, 2.5276112314287502e-08, 0.41789762034007794], res_norm=4.179e-01
2026-01-25 19:01:49,053 - INFO - integration_test - Dyn residual k=1: pred=[19.55829264861358, 6.910745144069647, -0.3037917131737071, 3.0, 20.987824699525493], ws=[19.55829264861358, 6.910745144069647, -0.3037917131737071, 3.0, 20.812067123767914], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757933], res_norm=1.758e-01
2026-01-25 19:01:49,054 - INFO - integration_test - Dyn residual k=2: pred=[19.844555377557388, 6.821003013397126, -0.3037917131737071, 3.0, 21.112067123767915], ws=[19.844555377557388, 6.821003013397126, -0.3037917131737071, 3.0, 20.93630954801034], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-25 19:01:49,070 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,227 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:49,250 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,294 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:49,318 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,364 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:49,386 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,431 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:49,455 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,500 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:49,522 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,566 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:49,587 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,635 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:49,658 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,704 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:49,726 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,769 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:49,788 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,832 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:49,853 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:49,899 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:50,679 - INFO - integration_test - Step 76: MPC solve successful
2026-01-25 19:01:50,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:50,729 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:50,739 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:50,740 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:01:52,603 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:52,689 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=20.806)
2026-01-25 19:01:52,689 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:52,690 - INFO - integration_test - === Applying control at step 76 ===
2026-01-25 19:01:52,690 - INFO - integration_test -   Control dict from planner: {'a': -6.28574781909373e-08, 'w': -0.7999972673989576}
2026-01-25 19:01:52,690 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:52,690 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:52,691 - INFO - integration_test - Step 76 completed in 3.906s
2026-01-25 19:01:52,762 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-25 19:01:52,771 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[19.26813692  6.9891386  -0.38379144  3.00000002 21.10572232]
2026-01-25 19:01:52,772 - DEBUG - integration_test - Step 77: Using propagated spline 21.1057 (close to path, dist=0.205m, drift=0.597m)
2026-01-25 19:01:52,772 - DEBUG - integration_test -   Set spline state to 21.1057
2026-01-25 19:01:52,776 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:52,894 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(19.268, 6.989), path_start=(0.000, 0.000), dist=20.497m
2026-01-25 19:01:52,894 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=20.497m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:52,894 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-25 19:01:53,017 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:53,044 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:53,044 - INFO - integration_test - Warmstart k=0: x0=19.268136919746333 , y0=6.989138601748181 , psi0=-0.38379143991360276 , v0=3.0000000189903644 , spline0=21.105722319236996 , a0=0.0 , w0=0.0
2026-01-25 19:01:53,044 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:53,045 - INFO - integration_test - Dyn residual k=0: pred=[19.546312413956176, 6.876806969691442, -0.38379143991360276, 3.0000000189903644, 21.405722321136032], ws=[19.54631241219529, 6.876806970402514, -0.38379143991360287, 3.0, 20.812067124554385], res=[1.7608847713290743e-09, -7.110720900982415e-10, 1.1102230246251565e-16, 1.8990364392124093e-08, 0.593655196581647], res_norm=5.937e-01
2026-01-25 19:01:53,046 - INFO - integration_test - Dyn residual k=1: pred=[19.82448790464425, 6.7644753390568475, -0.38379143991360287, 3.0, 21.112067124554386], ws=[19.82448790464425, 6.7644753390568475, -0.38379143991360287, 3.0, 21.155133026187833], res=[0.0, 0.0, 0.0, 0.0, -0.04306590163344737], res_norm=4.307e-02
2026-01-25 19:01:53,047 - INFO - integration_test - Dyn residual k=2: pred=[20.10266339709321, 6.652143707711181, -0.38379143991360287, 3.0, 21.455133026187834], ws=[20.12824755078886, 6.495161768367573, -0.38379143991360287, 3.0, 21.27028454133935], res=[-0.025584153695650258, 0.15698193934360827, 0.0, 0.0, 0.1848484848484837], res_norm=2.439e-01
2026-01-25 19:01:53,066 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,230 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:53,264 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,329 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:53,354 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,399 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:53,422 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,468 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:53,489 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,535 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:53,556 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,603 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:53,625 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,668 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:53,689 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,735 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:53,757 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,801 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:53,823 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,868 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:53,889 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:53,938 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:54,756 - INFO - integration_test - Step 77: MPC solve successful
2026-01-25 19:01:54,807 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:54,807 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:54,818 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:54,818 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:01:56,697 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:01:56,788 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=21.106)
2026-01-25 19:01:56,788 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:01:56,788 - INFO - integration_test - === Applying control at step 77 ===
2026-01-25 19:01:56,788 - INFO - integration_test -   Control dict from planner: {'a': -4.3464419314631366e-07, 'w': 0.7997168323278652}
2026-01-25 19:01:56,788 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:01:56,788 - INFO - integration_test -   Planner output success: True
2026-01-25 19:01:56,790 - INFO - integration_test - Step 77 completed in 4.018s
2026-01-25 19:01:56,866 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-25 19:01:56,876 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[19.55050528  6.88804382 -0.30381976  2.99999998 21.40572232]
2026-01-25 19:01:56,877 - DEBUG - integration_test - Step 78: Using propagated spline 21.4057 (close to path, dist=0.240m, drift=0.897m)
2026-01-25 19:01:56,877 - DEBUG - integration_test -   Set spline state to 21.4057
2026-01-25 19:01:56,882 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:57,010 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(19.551, 6.888), path_start=(0.000, 0.000), dist=20.728m
2026-01-25 19:01:57,011 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=20.728m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:01:57,011 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-25 19:01:57,123 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:01:57,150 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:01:57,150 - INFO - integration_test - Warmstart k=0: x0=19.55050528169734 , y0=6.888043820682928 , psi0=-0.30381975668081623 , v0=2.999999975525945 , spline0=21.40572231678959 , a0=0.0 , w0=0.0
2026-01-25 19:01:57,150 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:01:57,151 - INFO - integration_test - Dyn residual k=0: pred=[19.83676549150919, 6.798293662967006, -0.30381975668081623, 2.999999975525945, 21.705722314342182], ws=[19.83676549150919, 6.798293662967006, -0.30381975668081607, 2.999999975525945, 21.155133024309016], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.5505892900331659], res_norm=5.506e-01
2026-01-25 19:01:57,152 - INFO - integration_test - Dyn residual k=1: pred=[20.12302570132104, 6.708543505251083, -0.30381975668081607, 2.999999975525945, 21.45513302186161], ws=[20.142071904436598, 6.531761876346707, -0.30381975668081607, 2.999999975525945, 21.060551969998514], res=[-0.019046203115557603, 0.17678162890437665, 0.0, 0.0, 0.39458105186309567], res_norm=4.328e-01
2026-01-25 19:01:57,152 - INFO - integration_test - Dyn residual k=2: pred=[20.428332114248448, 6.442011718630784, -0.30381975668081607, 2.999999975525945, 21.360551967551107], ws=[20.439686465734304, 6.447065104227808, -0.30381975668081607, 2.999999975525945, 21.65295826540771], res=[-0.011354351485856284, -0.005053385597023841, 0.0, 0.0, -0.2924062978566049], res_norm=2.927e-01
2026-01-25 19:01:57,167 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,332 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:57,354 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,396 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:57,422 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,470 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:57,490 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,536 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:57,559 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,603 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:57,625 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,671 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:57,693 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,740 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:57,762 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,805 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:57,827 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,873 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:01:57,893 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:57,941 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:57,964 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:01:58,010 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:01:58,824 - INFO - integration_test - Step 78: MPC solve successful
2026-01-25 19:01:58,874 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:01:58,874 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:01:58,884 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:01:58,884 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:00,761 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:00,852 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=21.406)
2026-01-25 19:02:00,852 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:00,852 - INFO - integration_test - === Applying control at step 78 ===
2026-01-25 19:02:00,852 - INFO - integration_test -   Control dict from planner: {'a': 4.993232305920331e-07, 'w': 0.688819861429606}
2026-01-25 19:02:00,852 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:00,852 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:00,854 - INFO - integration_test - Step 78 completed in 3.978s
2026-01-25 19:02:00,928 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-25 19:02:00,937 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[19.83962904  6.80821981 -0.23493777  3.00000003 21.70572232]
2026-01-25 19:02:00,937 - DEBUG - integration_test - Step 79: Using propagated spline 21.7057 (close to path, dist=0.382m, drift=0.709m)
2026-01-25 19:02:00,937 - DEBUG - integration_test -   Set spline state to 21.7057
2026-01-25 19:02:00,943 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:01,067 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(19.840, 6.808), path_start=(0.000, 0.000), dist=20.975m
2026-01-25 19:02:01,067 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=20.975m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:01,067 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-25 19:02:01,173 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:01,202 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:01,202 - INFO - integration_test - Warmstart k=0: x0=19.839629041298213 , y0=6.808219806514484 , psi0=-0.23493777053785564 , v0=3.0000000254582684 , spline0=21.705722319335415 , a0=0.0 , w0=0.0
2026-01-25 19:02:01,202 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:01,203 - INFO - integration_test - Dyn residual k=0: pred=[20.13138769251711, 6.738385066116693, -0.23493777053785564, 3.0000000254582684, 22.00572232188124], ws=[20.130394646892928, 6.557569222428081, -0.2349377705378557, 3.0, 21.270284541377126], res=[0.0009930456241811214, 0.18081584368861137, 5.551115123125783e-17, 2.545826838229459e-08, 0.7354377805041139], res_norm=7.573e-01
2026-01-25 19:02:01,204 - INFO - integration_test - Dyn residual k=1: pred=[20.422153295635933, 6.487734482622914, -0.2349377705378557, 3.0, 21.570284541377127], ws=[20.466053034656, 6.455489901457328, -0.2349377705378557, 3.0, 21.452316609597382], res=[-0.043899739020066164, 0.03224458116558537, 0.0, 0.0, 0.11796793177974507], res_norm=1.299e-01
2026-01-25 19:02:01,205 - INFO - integration_test - Dyn residual k=2: pred=[20.757811683399005, 6.385655161652161, -0.2349377705378557, 3.0, 21.752316609597383], ws=[20.746914165418474, 6.388072182178609, -0.2349377705378557, 3.0, 21.564437821718595], res=[0.01089751798053129, -0.0024170205264484323, 0.0, 0.0, 0.18787878787878753], res_norm=1.882e-01
2026-01-25 19:02:01,222 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,384 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:01,409 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,456 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:01,478 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,522 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:01,544 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,588 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:01,613 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,664 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:01,686 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,733 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:01,756 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,805 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:01,828 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,894 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:01,936 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:01,990 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:02,017 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:02,065 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:02,088 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:02,133 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:02,883 - INFO - integration_test - Step 79: MPC solve successful
2026-01-25 19:02:02,936 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:02,936 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:02,947 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:02,948 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:04,819 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:04,936 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=21.706)
2026-01-25 19:02:04,936 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:04,937 - INFO - integration_test - === Applying control at step 79 ===
2026-01-25 19:02:04,937 - INFO - integration_test -   Control dict from planner: {'a': 4.1669461742601546e-08, 'w': -0.8000000022159931}
2026-01-25 19:02:04,937 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:04,937 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:04,938 - INFO - integration_test - Step 79 completed in 4.002s
2026-01-25 19:02:05,015 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-25 19:02:05,025 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[20.12828469  6.72679541 -0.31493777  3.00000003 22.00572232]
2026-01-25 19:02:05,026 - DEBUG - integration_test - Step 80: Using propagated spline 22.0057 (close to path, dist=0.480m, drift=1.009m)
2026-01-25 19:02:05,026 - DEBUG - integration_test -   Set spline state to 22.0057
2026-01-25 19:02:05,030 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:05,156 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(20.128, 6.727), path_start=(0.000, 0.000), dist=21.223m
2026-01-25 19:02:05,156 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=21.223m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:05,156 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-25 19:02:05,266 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:05,292 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:05,292 - INFO - integration_test - Warmstart k=0: x0=20.12828468703139 , y0=6.726795408231946 , psi0=-0.31493777075945495 , v0=3.0000000296252147 , spline0=22.005722322297935 , a0=0.0 , w0=0.0
2026-01-25 19:02:05,292 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:05,293 - INFO - integration_test - Dyn residual k=0: pred=[20.413529386863235, 6.633868216326927, -0.31493777075945495, 3.0000000296252147, 22.305722325260454], ws=[20.4693967396191, 6.459791505028099, -0.31493777075945495, 3.0, 21.452316610704585], res=[-0.05586735275586463, 0.1740767112988273, 0.0, 2.96252147258258e-08, 0.8534057145558691], res_norm=8.728e-01
2026-01-25 19:02:05,295 - INFO - integration_test - Dyn residual k=1: pred=[20.754641436634135, 6.366864314040742, -0.31493777075945495, 3.0, 21.752316610704586], ws=[20.738747826180838, 6.379876227660109, -0.31493777075945495, 3.0, 21.5644378228258], res=[0.015893610453296958, -0.013011913619366489, 0.0, 0.0, 0.18787878787878753], res_norm=1.890e-01
2026-01-25 19:02:05,296 - INFO - integration_test - Dyn residual k=2: pred=[21.023992523195872, 6.286949036672752, -0.31493777075945495, 3.0, 21.8644378228258], ws=[21.042810905024428, 6.319287422891892, -0.31493777075945495, 3.0, 21.919838822859855], res=[-0.018818381828555886, -0.032338386219140425, 0.0, 0.0, -0.055401000034056125], res_norm=6.685e-02
2026-01-25 19:02:05,315 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:05,481 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:05,503 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:05,546 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:05,567 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:05,612 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:05,633 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:05,680 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:05,703 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:05,748 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:05,769 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:05,814 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:05,836 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:05,888 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:05,911 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:05,956 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:05,979 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:06,026 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:06,050 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:06,097 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:06,118 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:06,163 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:06,939 - INFO - integration_test - Step 80: MPC solve successful
2026-01-25 19:02:06,994 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:06,994 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:07,007 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:07,008 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:08,945 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:09,041 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.006)
2026-01-25 19:02:09,041 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:09,041 - INFO - integration_test - === Applying control at step 80 ===
2026-01-25 19:02:09,041 - INFO - integration_test -   Control dict from planner: {'a': -5.63823030555222e-07, 'w': 0.30348078171451665}
2026-01-25 19:02:09,041 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:09,042 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:09,043 - INFO - integration_test - Step 80 completed in 4.018s
2026-01-25 19:02:09,126 - INFO - integration_test - Step 81 (contouring until path end)
2026-01-25 19:02:09,128 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[20.41489557  6.63821046 -0.28458969  2.99999997 22.30572232]
2026-01-25 19:02:09,129 - DEBUG - integration_test - Step 81: Using propagated spline 22.3057 (close to path, dist=0.606m, drift=0.820m)
2026-01-25 19:02:09,129 - DEBUG - integration_test -   Set spline state to 22.3057
2026-01-25 19:02:09,133 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:09,851 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(20.415, 6.638), path_start=(0.000, 0.000), dist=21.467m
2026-01-25 19:02:09,852 - WARNING - integration_test - Step 81: Vehicle is far from path start (dist=21.467m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:09,852 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2026-01-25 19:02:09,965 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:09,993 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:09,993 - INFO - integration_test - Warmstart k=0: x0=20.41489557354798 , y0=6.638210462911541 , psi0=-0.28458969258800326 , v0=2.9999999732429115 , spline0=22.305722319622227 , a0=0.0 , w0=0.0
2026-01-25 19:02:09,993 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:09,994 - INFO - integration_test - Dyn residual k=0: pred=[20.702828650837837, 6.553981362257629, -0.28458969258800326, 2.9999999732429115, 22.60572231694652], ws=[20.76624138974321, 6.394785548864757, -0.2845896925880034, 2.9999999732429115, 21.81983882107605], res=[-0.0634127389053738, 0.1591958133928717, 1.1102230246251565e-16, 0.0, 0.7858834958704684], res_norm=8.043e-01
2026-01-25 19:02:09,995 - INFO - integration_test - Dyn residual k=1: pred=[21.05417446703307, 6.3105564482108445, -0.2845896925880034, 2.9999999732429115, 22.119838818400343], ws=[21.06255224313818, 6.355666543428704, -0.2845896925880034, 2.9999999732429115, 22.22393855548061], res=[-0.008377776105110257, -0.04511009521785958, 0.0, 0.0, -0.10409973708026854], res_norm=1.138e-01
2026-01-25 19:02:09,996 - INFO - integration_test - Dyn residual k=2: pred=[21.350485320428042, 6.271437442774792, -0.2845896925880034, 2.9999999732429115, 22.523938552804903], ws=[21.27869480541755, 6.385523160949804, -0.2845896925880034, 2.9999999732429115, 22.30878703957233], res=[0.07179051501049116, -0.11408571817501212, 0.0, 0.0, 0.21515151323257342], res_norm=2.539e-01
2026-01-25 19:02:10,013 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,185 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:10,207 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,252 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:10,277 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,323 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:10,344 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,390 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:10,413 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,459 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:10,480 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,525 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:10,545 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,587 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:10,609 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,655 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:10,676 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,729 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:10,764 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,826 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:10,847 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:10,894 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:11,629 - INFO - integration_test - Step 81: MPC solve successful
2026-01-25 19:02:11,680 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:11,680 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:11,690 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:11,691 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:13,675 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:13,768 - INFO - integration_test - Step 81: Computed 6 numeric contouring constraints for visualization (s=22.306)
2026-01-25 19:02:13,769 - DEBUG - integration_test - Step 81: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:13,769 - INFO - integration_test - === Applying control at step 81 ===
2026-01-25 19:02:13,769 - INFO - integration_test -   Control dict from planner: {'a': -6.447927962307718e-06, 'w': 0.7999999188540718}
2026-01-25 19:02:13,769 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:13,769 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:13,770 - INFO - integration_test - Step 81 completed in 4.642s
2026-01-25 19:02:13,845 - INFO - integration_test - Step 82 (contouring until path end)
2026-01-25 19:02:13,855 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[20.70588896  6.56558236 -0.2045897   2.99999933 22.60572225]
2026-01-25 19:02:13,855 - DEBUG - integration_test - Step 82: Using propagated spline 22.6057 (close to path, dist=0.718m, drift=1.120m)
2026-01-25 19:02:13,855 - DEBUG - integration_test -   Set spline state to 22.6057
2026-01-25 19:02:13,861 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:13,979 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(20.706, 6.566), path_start=(0.000, 0.000), dist=21.722m
2026-01-25 19:02:13,979 - WARNING - integration_test - Step 82: Vehicle is far from path start (dist=21.722m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:13,979 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2026-01-25 19:02:14,097 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:14,123 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:14,123 - INFO - integration_test - Warmstart k=0: x0=20.705888960494832 , y0=6.565582364885736 , psi0=-0.20458970070259608 , v0=2.9999993284501154 , spline0=22.60572225246724 , a0=0.0 , w0=0.0
2026-01-25 19:02:14,123 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:14,124 - INFO - integration_test - Dyn residual k=0: pred=[20.999632222411275, 6.504632748105156, -0.20458970070259608, 2.9999993284501154, 22.90572218531225], ws=[21.077576561956544, 6.414637212012597, -0.20458970070259586, 2.9999993284501154, 22.223938519007483], res=[-0.0779443395452688, 0.08999553609255884, -2.220446049250313e-16, 0.0, 0.6817836663047672], res_norm=6.921e-01
2026-01-25 19:02:14,125 - INFO - integration_test - Dyn residual k=1: pred=[21.371319823872987, 6.353687595232016, -0.20458970070259586, 2.9999993284501154, 22.523938451852494], ws=[21.29337548432772, 6.443683131324575, -0.20458970070259586, 2.9999993284501154, 22.30878698486264], res=[0.0779443395452688, -0.08999553609255884, 0.0, 0.0, 0.21515146698985532], res_norm=2.459e-01
2026-01-25 19:02:14,125 - INFO - integration_test - Dyn residual k=2: pred=[21.587118746244162, 6.382733514543995, -0.20458970070259586, 2.9999993284501154, 22.60878691770765], ws=[21.587118746244162, 6.382733514543995, -0.20458970070259586, 2.9999993284501154, 22.44839479437576], res=[0.0, 0.0, 0.0, 0.0, 0.16039212333189212], res_norm=1.604e-01
2026-01-25 19:02:14,141 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,311 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:14,337 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,387 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:14,412 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,460 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:14,481 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,528 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:14,548 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,590 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:14,613 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,657 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:14,679 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,727 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:14,749 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,795 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:14,817 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,861 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:14,886 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,931 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:14,951 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:14,994 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:20,851 - INFO - integration_test - Step 82: MPC solve successful
2026-01-25 19:02:20,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:20,905 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:20,916 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:20,916 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:22,914 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:23,008 - INFO - integration_test - Step 82: Computed 6 numeric contouring constraints for visualization (s=22.606)
2026-01-25 19:02:23,008 - DEBUG - integration_test - Step 82: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:23,008 - INFO - integration_test - === Applying control at step 82 ===
2026-01-25 19:02:23,009 - INFO - integration_test -   Control dict from planner: {'a': 7.0142656399413885e-06, 'w': 0.8000000099888744}
2026-01-25 19:02:23,009 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:23,009 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:23,010 - INFO - integration_test - Step 82 completed in 9.155s
2026-01-25 19:02:23,081 - INFO - integration_test - Step 83 (contouring until path end)
2026-01-25 19:02:23,092 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[21.00175572  6.5164412  -0.1245897   3.00000003 22.90572226]
2026-01-25 19:02:23,093 - DEBUG - integration_test - Step 83: Using propagated spline 22.9057 (close to path, dist=0.793m, drift=0.932m)
2026-01-25 19:02:23,093 - DEBUG - integration_test -   Set spline state to 22.9057
2026-01-25 19:02:23,100 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:23,222 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(21.002, 6.516), path_start=(0.000, 0.000), dist=21.989m
2026-01-25 19:02:23,222 - WARNING - integration_test - Step 83: Vehicle is far from path start (dist=21.989m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:23,222 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2026-01-25 19:02:23,331 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:23,357 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:23,357 - INFO - integration_test - Warmstart k=0: x0=21.0017557201004 , y0=6.5164411996846185 , psi0=-0.12458969970370863 , v0=3.0000000298766794 , spline0=22.905722255454908 , a0=0.0 , w0=0.0
2026-01-25 19:02:23,357 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:23,358 - INFO - integration_test - Dyn residual k=0: pred=[21.299430344402367, 6.479160912141686, -0.12458969970370863, 3.0000000298766794, 23.205722258442577], ws=[21.29943034143786, 6.479160912512957, -0.12458969970370859, 3.0, 22.308787023694297], res=[2.964508638569896e-09, -3.7127101393252815e-10, -4.163336342344337e-17, 2.987667935272498e-08, 0.8969352347482804], res_norm=8.969e-01
2026-01-25 19:02:23,359 - INFO - integration_test - Dyn residual k=1: pred=[21.597104962775315, 6.4418806253412955, -0.12458969970370859, 3.0, 22.608787023694298], ws=[21.597104962775315, 6.4418806253412955, -0.12458969970370859, 3.0, 22.448394850135568], res=[0.0, 0.0, 0.0, 0.0, 0.16039217355872992], res_norm=1.604e-01
2026-01-25 19:02:23,360 - INFO - integration_test - Dyn residual k=2: pred=[21.894779584112772, 6.404600338169634, -0.12458969970370859, 3.0, 22.74839485013557], ws=[21.894779584112772, 6.404600338169634, -0.12458969970370859, 3.0, 22.840587263328654], res=[0.0, 0.0, 0.0, 0.0, -0.0921924131930858], res_norm=9.219e-02
2026-01-25 19:02:23,377 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:23,541 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:23,563 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:23,609 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:23,629 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:23,673 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:23,697 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:23,742 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:23,765 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:23,812 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:23,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:23,877 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:23,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:23,948 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:23,969 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:24,015 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:24,035 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:24,085 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:24,108 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:24,155 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:24,176 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:24,225 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:24,935 - INFO - integration_test - Step 83: MPC solve successful
2026-01-25 19:02:24,988 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:24,988 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:25,000 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:25,001 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:27,089 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:27,191 - INFO - integration_test - Step 83: Computed 6 numeric contouring constraints for visualization (s=22.906)
2026-01-25 19:02:27,191 - DEBUG - integration_test - Step 83: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:27,191 - INFO - integration_test - === Applying control at step 83 ===
2026-01-25 19:02:27,191 - INFO - integration_test -   Control dict from planner: {'a': -1.9999998531387446, 'w': 0.8000000037965213}
2026-01-25 19:02:27,191 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:27,191 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:27,192 - INFO - integration_test - Step 83 completed in 4.100s
2026-01-25 19:02:27,270 - INFO - integration_test - Step 84 (contouring until path end)
2026-01-25 19:02:27,281 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[21.2906305   6.49181314 -0.0445897   2.80000004 23.18572226]
2026-01-25 19:02:27,281 - DEBUG - integration_test - Step 84: Using propagated spline 23.1857 (close to path, dist=0.875m, drift=1.212m)
2026-01-25 19:02:27,281 - DEBUG - integration_test -   Set spline state to 23.1857
2026-01-25 19:02:27,287 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:27,405 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(21.291, 6.492), path_start=(0.000, 0.000), dist=22.258m
2026-01-25 19:02:27,406 - WARNING - integration_test - Step 84: Vehicle is far from path start (dist=22.258m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:27,406 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2026-01-25 19:02:27,518 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:27,543 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:27,543 - INFO - integration_test - Warmstart k=0: x0=21.29063049809844 , y0=6.491813142763906 , psi0=-0.0445896993240565 , v0=2.800000044562805 , spline0=23.185722259911188 , a0=0.0 , w0=0.0
2026-01-25 19:02:27,543 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:27,544 - INFO - integration_test - Dyn residual k=0: pred=[21.570352194886762, 6.479332163580379, -0.0445896993240565, 2.800000044562805, 23.465722264367468], ws=[21.570352194886762, 6.479332163580379, -0.04458969932405665, 2.800000044562805, 22.437485761657175], res=[0.0, 0.0, 1.5265566588595902e-16, 0.0, 1.0282365027102927], res_norm=1.028e+00
2026-01-25 19:02:27,544 - INFO - integration_test - Dyn residual k=1: pred=[21.850073891675084, 6.466851184396852, -0.04458969932405665, 2.800000044562805, 22.717485766113455], ws=[21.850073891675084, 6.466851184396852, -0.04458969932405665, 2.800000044562805, 22.827859993437194], res=[0.0, 0.0, 0.0, 0.0, -0.1103742273237387], res_norm=1.104e-01
2026-01-25 19:02:27,545 - INFO - integration_test - Dyn residual k=2: pred=[22.129795588463406, 6.4543702052133245, -0.04458969932405665, 2.800000044562805, 23.107859997893474], ws=[22.129795588463406, 6.4543702052133245, -0.04458969932405665, 2.800000044562805, 22.967301113544856], res=[0.0, 0.0, 0.0, 0.0, 0.14055888434861785], res_norm=1.406e-01
2026-01-25 19:02:27,561 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:27,722 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:27,743 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:27,787 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:27,810 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:27,855 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:27,878 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:27,926 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:27,947 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:27,993 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:28,016 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:28,081 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:28,119 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:28,170 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:28,194 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:28,242 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:28,264 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:28,314 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:28,337 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:28,382 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:28,402 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:28,447 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:29,186 - INFO - integration_test - Step 84: MPC solve successful
2026-01-25 19:02:29,238 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:29,238 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:29,248 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:29,249 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:31,325 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:31,419 - INFO - integration_test - Step 84: Computed 6 numeric contouring constraints for visualization (s=23.186)
2026-01-25 19:02:31,419 - DEBUG - integration_test - Step 84: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:31,419 - INFO - integration_test - === Applying control at step 84 ===
2026-01-25 19:02:31,420 - INFO - integration_test -   Control dict from planner: {'a': -1.9999930558504209, 'w': 0.79999953324446}
2026-01-25 19:02:31,420 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:31,420 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:31,421 - INFO - integration_test - Step 84 completed in 4.140s
2026-01-25 19:02:31,494 - INFO - integration_test - Step 85 (contouring until path end)
2026-01-25 19:02:31,507 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[21.56055509  6.49044096  0.03541025  2.60000074 23.44572233]
2026-01-25 19:02:31,508 - DEBUG - integration_test - Step 85: Using propagated spline 23.4457 (close to path, dist=0.887m, drift=0.984m)
2026-01-25 19:02:31,508 - DEBUG - integration_test -   Set spline state to 23.4457
2026-01-25 19:02:31,515 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:31,633 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(21.561, 6.490), path_start=(0.000, 0.000), dist=22.516m
2026-01-25 19:02:31,633 - WARNING - integration_test - Step 85: Vehicle is far from path start (dist=22.516m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:31,633 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2026-01-25 19:02:31,742 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:31,768 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:31,768 - INFO - integration_test - Warmstart k=0: x0=21.56055509206632 , y0=6.490440956394613 , psi0=0.03541025400038951 , v0=2.6000007389777626 , spline0=23.445722333808963 , a0=0.0 , w0=0.0
2026-01-25 19:02:31,768 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:31,769 - INFO - integration_test - Dyn residual k=0: pred=[21.820392177758066, 6.499645701153116, 0.03541025400038951, 2.6000007389777626, 23.705722407706737], ws=[21.820392177758066, 6.499645701153116, 0.03541025400038933, 2.6000007389777626, 22.819375174412375], res=[0.0, 0.0, 1.8041124150158794e-16, 0.0, 0.8863472332943623], res_norm=8.863e-01
2026-01-25 19:02:31,770 - INFO - integration_test - Dyn residual k=1: pred=[22.080229263449812, 6.508850445911619, 0.03541025400038933, 2.6000007389777626, 23.07937524831015], ws=[22.080229263449812, 6.508850445911619, 0.03541025400038933, 2.6000007389777626, 23.169321315565057], res=[0.0, 0.0, 0.0, 0.0, -0.08994606725490684], res_norm=8.995e-02
2026-01-25 19:02:31,771 - INFO - integration_test - Dyn residual k=2: pred=[22.34006634914156, 6.518055190670123, 0.03541025400038933, 2.6000007389777626, 23.42932138946283], ws=[22.34006634914156, 6.518055190670123, 0.03541025400038933, 2.6000007389777626, 23.32083646708021], res=[0.0, 0.0, 0.0, 0.0, 0.10848492238262253], res_norm=1.085e-01
2026-01-25 19:02:31,787 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:31,960 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:31,982 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,030 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:32,054 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,104 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:32,127 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,176 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:32,201 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,247 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:32,269 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,320 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:32,342 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,387 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:32,410 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,456 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:32,477 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,526 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:32,548 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,593 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:32,616 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:32,663 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:33,408 - INFO - integration_test - Step 85: MPC solve successful
2026-01-25 19:02:33,457 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:33,457 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:33,467 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:33,468 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:35,540 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:35,639 - INFO - integration_test - Step 85: Computed 6 numeric contouring constraints for visualization (s=23.446)
2026-01-25 19:02:35,640 - DEBUG - integration_test - Step 85: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:35,640 - INFO - integration_test - === Applying control at step 85 ===
2026-01-25 19:02:35,640 - INFO - integration_test -   Control dict from planner: {'a': -1.999999987285422, 'w': 0.8000000041746236}
2026-01-25 19:02:35,640 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:35,640 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:35,641 - INFO - integration_test - Step 85 completed in 4.134s
2026-01-25 19:02:35,715 - INFO - integration_test - Step 86 (contouring until path end)
2026-01-25 19:02:35,726 - DEBUG - integration_test - Syncing planner state at step 86: vehicle_state=[21.80978824  6.50913772  0.11541025  2.40000074 23.68572241]
2026-01-25 19:02:35,726 - DEBUG - integration_test - Step 86: Using propagated spline 23.6857 (close to path, dist=0.922m, drift=1.224m)
2026-01-25 19:02:35,726 - DEBUG - integration_test -   Set spline state to 23.6857
2026-01-25 19:02:35,733 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:35,851 - DEBUG - integration_test - Step 86: Checking path alignment: vehicle=(21.810, 6.509), path_start=(0.000, 0.000), dist=22.760m
2026-01-25 19:02:35,851 - WARNING - integration_test - Step 86: Vehicle is far from path start (dist=22.760m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:35,851 - INFO - integration_test - === Calling planner.solve_mpc() at step 86 ===
2026-01-25 19:02:35,967 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:35,990 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:35,990 - INFO - integration_test - Warmstart k=0: x0=21.809788238447638 , y0=6.509137721567095 , psi0=0.11541025441785188 , v0=2.4000007402492205 , spline0=23.685722407833886 , a0=0.0 , w0=0.0
2026-01-25 19:02:35,990 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:35,991 - INFO - integration_test - Dyn residual k=0: pred=[22.04819174207161, 6.536774743689314, 0.11541025441785188, 2.4000007402492205, 23.92572248185881], ws=[22.04819174207161, 6.536774743689314, 0.11541025441785191, 2.4000007402492205, 22.916796063039804], res=[0.0, 0.0, -2.7755575615628914e-17, 0.0, 1.008926418819005], res_norm=1.009e+00
2026-01-25 19:02:35,992 - INFO - integration_test - Dyn residual k=1: pred=[22.28659524569558, 6.564411765811533, 0.11541025441785191, 2.4000007402492205, 23.156796137064728], ws=[22.28659524569558, 6.564411765811533, 0.11541025441785191, 2.4000007402492205, 23.52285666910041], res=[0.0, 0.0, 0.0, 0.0, -0.36606053203568223], res_norm=3.661e-01
2026-01-25 19:02:35,992 - INFO - integration_test - Dyn residual k=2: pred=[22.52499874931955, 6.592048787933752, 0.11541025441785191, 2.4000007402492205, 23.762856743125333], ws=[22.52499874931955, 6.592048787933752, 0.11541025441785191, 2.4000007402492205, 23.62386677011051], res=[0.0, 0.0, 0.0, 0.0, 0.13898997301482297], res_norm=1.390e-01
2026-01-25 19:02:36,010 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,181 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:36,203 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,250 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:36,269 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,319 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:36,341 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,383 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:36,406 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,453 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:36,473 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,519 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:36,542 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,586 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:36,609 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,652 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:36,674 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,721 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:36,743 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,788 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:36,810 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:36,855 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:37,702 - INFO - integration_test - Step 86: MPC solve successful
2026-01-25 19:02:37,756 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:37,757 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:37,768 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:37,769 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:39,876 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:39,977 - INFO - integration_test - Step 86: Computed 6 numeric contouring constraints for visualization (s=23.686)
2026-01-25 19:02:39,977 - DEBUG - integration_test - Step 86: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:39,977 - INFO - integration_test - === Applying control at step 86 ===
2026-01-25 19:02:39,977 - INFO - integration_test -   Control dict from planner: {'a': -1.9999999777056556, 'w': 0.8000000005847437}
2026-01-25 19:02:39,977 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:39,977 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:39,978 - INFO - integration_test - Step 86 completed in 4.253s
2026-01-25 19:02:40,053 - INFO - integration_test - Step 87 (contouring until path end)
2026-01-25 19:02:40,063 - DEBUG - integration_test - Syncing planner state at step 87: vehicle_state=[22.03697642  6.5445972   0.19541025  2.20000074 23.90572248]
2026-01-25 19:02:40,064 - DEBUG - integration_test - Step 87: Using propagated spline 23.9057 (close to path, dist=0.895m, drift=0.955m)
2026-01-25 19:02:40,064 - DEBUG - integration_test -   Set spline state to 23.9057
2026-01-25 19:02:40,069 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:40,831 - DEBUG - integration_test - Step 87: Checking path alignment: vehicle=(22.037, 6.545), path_start=(0.000, 0.000), dist=22.988m
2026-01-25 19:02:40,831 - WARNING - integration_test - Step 87: Vehicle is far from path start (dist=22.988m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-25 19:02:40,831 - INFO - integration_test - === Calling planner.solve_mpc() at step 87 ===
2026-01-25 19:02:40,944 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-25 19:02:40,970 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-25 19:02:40,970 - INFO - integration_test - Warmstart k=0: x0=22.036976424028786 , y0=6.544597196664511 , psi0=0.19541025447632626 , v0=2.2000007424786547 , spline0=23.905722482081753 , a0=0.0 , w0=0.0
2026-01-25 19:02:40,970 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-25 19:02:40,971 - INFO - integration_test - Dyn residual k=0: pred=[22.25278947741246, 6.587314390606551, 0.19541025447632626, 2.2000007424786547, 24.12572255632962], ws=[22.25278947741246, 6.587314390606551, 0.1954102544763261, 2.2000007424786547, 23.270331416575157], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, 0.8553911397544631], res_norm=8.554e-01
2026-01-25 19:02:40,972 - INFO - integration_test - Dyn residual k=1: pred=[22.468602530796133, 6.630031584548591, 0.1954102544763261, 2.2000007424786547, 23.490331490823024], ws=[22.468602530796133, 6.630031584548591, 0.1954102544763261, 2.2000007424786547, 23.371341517585257], res=[0.0, 0.0, 0.0, 0.0, 0.11898997323776683], res_norm=1.190e-01
2026-01-25 19:02:40,973 - INFO - integration_test - Dyn residual k=2: pred=[22.684415584179806, 6.6727487784906305, 0.1954102544763261, 2.2000007424786547, 23.591341591833125], ws=[22.684415584179806, 6.6727487784906305, 0.1954102544763261, 2.2000007424786547, 23.724876871120614], res=[0.0, 0.0, 0.0, 0.0, -0.13353527928748932], res_norm=1.335e-01
2026-01-25 19:02:40,988 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,158 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:41,181 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,231 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:41,253 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,301 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:41,324 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,370 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:41,390 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,437 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:41,461 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,508 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:41,528 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,571 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:41,593 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,639 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:41,659 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,707 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-25 19:02:41,730 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,776 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:41,798 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-25 19:02:41,843 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-25 19:02:42,607 - INFO - integration_test - Step 87: MPC solve successful
2026-01-25 19:02:42,665 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:42,665 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:42,676 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:42,677 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:44,804 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:44,902 - INFO - integration_test - Step 87: Computed 6 numeric contouring constraints for visualization (s=23.906)
2026-01-25 19:02:44,902 - DEBUG - integration_test - Step 87: Captured 6 contouring constraint halfspaces for visualization
2026-01-25 19:02:44,902 - INFO - integration_test - === Applying control at step 87 ===
2026-01-25 19:02:44,903 - INFO - integration_test -   Control dict from planner: {'a': -1.9999993781821184, 'w': 0.7999998454661015}
2026-01-25 19:02:44,903 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-25 19:02:44,903 - INFO - integration_test -   Planner output success: True
2026-01-25 19:02:44,904 - INFO - integration_test - Goal reached at step 87!
2026-01-25 19:02:44,904 - INFO - integration_test - Step 87 completed in 4.841s
2026-01-25 19:02:44,975 - INFO - integration_test - Goal reached at step 87, added 3 extra frames for visualization
2026-01-25 19:02:44,984 - INFO - integration_test - Saving test results...
2026-01-25 19:02:44,987 - INFO - integration_test - Saved 92 vehicle states to test_outputs/20260125_185723_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-25 19:02:44,987 - INFO - integration_test - Saved obstacle summary to test_outputs/20260125_185723_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-25 19:02:44,987 - INFO - integration_test - Saved 99 states for obstacle 0 to test_outputs/20260125_185723_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-25 19:02:44,987 - INFO - integration_test - Saved 99 states for obstacle 1 to test_outputs/20260125_185723_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-25 19:02:44,988 - INFO - integration_test - Saved 99 states for obstacle 2 to test_outputs/20260125_185723_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-25 19:02:44,988 - INFO - integration_test - Saved 99 states for obstacle 3 to test_outputs/20260125_185723_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-25 19:02:44,988 - INFO - integration_test - Saved state history: 92 vehicle states, 4 obstacles
2026-01-25 19:02:44,988 - INFO - integration_test - Creating animation...
2026-01-25 19:02:45,035 - DEBUG - integration_test - Creating animation with 92 frames (range: 0 to 91)
2026-01-25 19:02:45,035 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-25 19:02:45,145 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-25 19:02:45,145 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-25 19:02:45,145 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-25 19:02:45,147 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:45,148 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:45,158 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:45,159 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:45,211 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:45,217 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-25 19:02:45,218 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-25 19:02:45,335 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-25 19:02:45,335 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-25 19:02:45,335 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-25 19:02:45,337 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:45,337 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:45,347 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:45,348 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:45,395 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.11;0.775x0.77)
2026-01-25 19:02:45,402 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-25 19:02:45,594 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-25 19:02:45,708 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-25 19:02:45,708 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-25 19:02:45,708 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-25 19:02:45,710 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:45,710 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:45,721 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:45,721 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:45,769 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:45,775 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-25 19:02:45,868 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-25 19:02:45,984 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-25 19:02:45,984 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-25 19:02:45,984 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-25 19:02:45,986 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:45,986 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:45,997 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:45,998 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:46,044 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:46,054 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-25 19:02:46,267 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:46,268 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:46,277 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:46,278 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:46,330 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:46,552 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:46,553 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:46,562 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:46,563 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:46,609 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:46,823 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:46,823 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:47,503 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:47,504 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:47,548 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:47,762 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:47,762 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:47,772 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:47,773 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:47,821 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:48,051 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:48,051 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:48,061 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:48,062 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:48,112 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:48,376 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:48,376 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:48,386 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:48,387 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:48,437 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:48,652 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:48,652 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:48,662 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:48,663 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:48,712 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:48,929 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:48,929 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:48,940 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:48,941 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:48,988 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:49,214 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:49,214 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:49,224 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:49,226 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 38 trajectories
2026-01-25 19:02:49,275 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 38 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:49,506 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:49,506 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:49,517 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:49,518 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:49,567 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:49,784 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:49,784 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:50,451 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:50,452 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:50,501 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:50,714 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:50,714 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:50,727 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:50,728 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:50,774 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:51,026 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:51,027 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:51,039 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:51,040 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:51,088 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:51,312 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:51,312 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:51,323 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:51,323 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:51,375 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:51,591 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:51,591 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:51,605 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:51,607 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:51,655 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:51,872 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:51,872 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:51,883 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:51,884 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:51,942 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:52,160 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:52,161 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:52,172 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:52,174 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:52,226 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:52,446 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:52,446 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:52,456 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:52,457 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:52,505 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:52,723 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:52,723 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:53,395 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:53,397 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:53,444 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:53,655 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:53,655 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:53,668 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:53,669 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:53,719 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:53,972 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:53,973 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:53,982 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:53,983 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:54,028 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:54,252 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:54,252 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:54,264 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:54,265 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:54,317 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:54,538 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:54,538 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:54,550 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:54,551 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:54,604 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:54,820 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:54,820 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:54,831 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:54,832 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 39 trajectories
2026-01-25 19:02:54,879 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 39 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:55,099 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:55,099 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:55,112 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:55,113 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:55,161 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:55,384 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:55,384 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:55,394 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:55,395 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:55,446 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:55,659 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:55,659 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:55,672 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:55,673 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:56,403 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:56,619 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:56,619 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:56,629 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:56,630 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:56,677 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:56,895 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:56,895 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:56,911 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:56,913 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:56,999 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:57,229 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:57,229 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:57,240 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:57,240 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:57,291 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:57,514 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:57,514 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:57,524 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:57,525 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:57,570 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:57,781 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:57,781 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:57,791 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:57,792 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:57,843 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:58,063 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:58,063 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:58,074 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:58,075 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:58,126 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:58,353 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:58,353 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:58,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:58,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:58,414 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:58,637 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:58,637 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:58,649 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:58,650 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:58,696 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:58,918 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:58,918 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:59,589 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:59,590 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:59,642 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:02:59,856 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:02:59,856 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:02:59,866 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:02:59,867 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:02:59,926 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:00,180 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:00,180 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:00,191 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:00,192 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:00,246 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:00,468 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:00,468 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:00,481 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:00,482 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:00,533 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:00,751 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:00,751 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:00,761 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:00,762 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:00,811 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:01,025 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:01,025 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:01,035 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:01,036 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:01,086 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:01,315 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:01,315 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:01,326 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:01,327 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:01,375 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:01,592 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:01,592 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:01,606 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:01,607 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:01,653 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:01,867 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:01,867 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:02,541 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:02,542 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:02,588 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:02,807 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:02,807 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:02,819 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:02,820 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:02,867 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:03,140 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:03,140 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:03,150 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:03,151 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:03,199 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:03,420 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:03,420 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:03,431 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:03,432 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:03,479 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:03,706 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:03,707 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:03,722 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:03,723 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:03,773 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:03,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:03,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:04,005 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:04,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:04,056 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:04,277 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:04,277 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:04,289 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:04,290 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:04,341 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:04,563 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:04,563 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:04,574 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:04,575 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:04,625 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:04,850 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:04,850 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:04,860 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:04,861 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:05,579 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:05,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:05,802 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:05,814 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:05,815 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:05,863 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:06,074 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:06,074 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:06,087 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:06,088 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:06,144 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:06,398 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:06,398 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:06,410 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:06,411 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:06,459 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:06,672 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:06,672 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:06,682 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:06,683 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:06,736 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:06,967 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:06,967 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:06,977 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:06,977 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:07,027 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:07,246 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:07,246 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:07,260 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:07,261 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:07,313 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:07,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:07,532 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:07,543 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:07,544 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:07,591 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:07,816 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:07,816 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:07,826 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:07,827 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:07,875 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:08,100 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:08,100 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:08,768 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:08,769 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:08,819 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:09,041 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:09,042 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:09,052 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:09,052 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:09,103 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:09,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:09,364 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:09,375 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:09,376 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:09,428 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:09,648 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:09,648 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:09,659 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:09,660 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:09,710 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:09,931 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:09,931 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:09,942 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:09,943 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:09,990 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:10,211 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:10,211 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:10,222 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:10,222 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:10,271 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:10,492 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:10,492 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:10,504 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:10,505 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:10,556 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:10,771 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:10,771 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:10,783 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:10,783 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:10,834 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:11,047 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:11,047 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:11,721 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:11,721 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:11,771 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:11,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:11,992 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:12,005 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:12,006 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:12,056 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:12,274 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:12,274 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:12,286 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:12,287 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:12,344 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:12,566 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:12,566 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:12,576 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:12,576 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:12,628 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:12,889 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:12,889 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:12,902 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:12,904 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:12,958 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:13,178 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:13,178 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:13,188 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:13,189 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:13,241 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:13,464 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:13,464 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:13,474 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:13,475 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:13,527 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:13,747 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:13,747 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:13,759 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:13,760 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:13,807 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:14,025 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:14,025 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:14,036 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:14,037 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:14,750 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:14,971 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:14,971 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:14,984 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:14,985 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:15,036 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:15,253 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:15,253 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:15,264 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:15,264 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:15,319 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:15,539 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:15,539 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:15,549 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:15,550 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:15,601 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:15,852 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:15,853 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:15,864 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:15,866 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:15,917 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:16,146 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:16,146 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:16,158 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:16,158 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:16,212 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:16,442 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:16,442 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:16,455 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:16,456 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:16,508 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:16,727 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:16,728 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:16,739 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:16,740 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:16,789 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:17,013 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:17,013 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:17,024 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:17,025 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:17,074 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:17,294 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:17,294 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:17,966 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:17,967 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:18,019 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:18,238 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:18,239 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:18,249 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:18,249 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:18,303 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:18,522 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:18,522 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:18,534 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:18,536 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:18,582 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:18,837 - INFO - integration_test - SafeHorizonConstraintsVisualizer: scenario_module=True
2026-01-25 19:03:18,837 - INFO - integration_test - SafeHorizonConstraintsVisualizer: 1000 scenarios available
2026-01-25 19:03:18,849 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Extracted 1000 trajectory groups with 11000 total points
2026-01-25 19:03:18,850 - INFO - integration_test - SafeHorizonConstraintsVisualizer: About to draw 40 trajectories
2026-01-25 19:03:18,898 - INFO - integration_test - SafeHorizonConstraintsVisualizer: Drew 40 hypothetical trajectories to ax=Axes(0.125,0.118897;0.775x0.752206)
2026-01-25 19:03:24,698 - INFO - integration_test - Saved animation with 92 frames at 10.00 fps to test_outputs/20260125_185723_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 9.20s, size: 1402619 bytes)
2026-01-25 19:03:24,745 - INFO - integration_test - Animation created successfully
2026-01-25 19:03:24,746 - INFO - integration_test - Test completed successfully
