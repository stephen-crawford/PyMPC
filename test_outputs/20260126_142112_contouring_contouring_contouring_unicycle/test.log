2026-01-26 14:21:12,598 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-26 14:21:12,599 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2026-01-26 14:21:12,599 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-26 14:21:12,599 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-26 14:21:12,599 - INFO - integration_test - Creating objective module: contouring
2026-01-26 14:21:12,604 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-26 14:21:12,604 - INFO - integration_test - Creating 1 constraint module(s): ['contouring']
2026-01-26 14:21:12,604 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-26 14:21:12,609 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-26 14:21:12,609 - INFO - integration_test - Created 1 constraint module(s)
2026-01-26 14:21:12,626 - INFO - integration_test - Setting solver on all modules...
2026-01-26 14:21:12,626 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-26 14:21:12,626 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-26 14:21:12,626 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-26 14:21:12,626 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-26 14:21:12,626 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-26 14:21:12,627 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-26 14:21:12,627 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-26 14:21:12,627 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-26 14:21:12,628 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-26 14:21:12,628 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-26 14:21:12,628 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-26 14:21:12,628 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-26 14:21:12,628 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-26 14:21:12,628 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-26 14:21:12,628 - INFO - integration_test - Added spline variable: 0.0000
2026-01-26 14:21:12,628 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-26 14:21:12,628 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-26 14:21:12,628 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-26 14:21:12,629 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-26 14:21:12,629 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-26 14:21:12,629 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:12,644 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-26 14:21:12,644 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-26 14:21:12,646 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:12,682 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:12,682 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-26 14:21:12,682 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:12,683 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.14533333333333337, 0.0, 0.0, 1.0, 0.051515151515151514], res=[-0.045333333333333364, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=6.638e-02
2026-01-26 14:21:12,684 - INFO - integration_test - Dyn residual k=1: pred=[0.24533333333333338, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.35655111111111115, 0.0, 0.0, 1.0, 0.10505050505050506], res=[-0.11121777777777778, 0.0, 0.0, 0.0, 0.04646464646464646], res_norm=1.205e-01
2026-01-26 14:21:12,685 - INFO - integration_test - Dyn residual k=2: pred=[0.45655111111111113, 0.0, 0.0, 1.0, 0.20505050505050507], ws=[0.5247454379440666, 0.0, 0.0, 1.0, 0.16060606060606059], res=[-0.06819432683295545, 0.0, 0.0, 0.0, 0.04444444444444448], res_norm=8.140e-02
2026-01-26 14:21:12,701 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:12,752 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:12,768 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:12,808 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:12,825 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:12,868 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:12,884 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:12,924 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:12,939 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:12,980 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:12,996 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,040 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,056 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,098 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,113 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,153 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,170 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,210 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,229 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,268 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,285 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,334 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,558 - INFO - integration_test - Step 0: MPC solve successful
2026-01-26 14:21:13,563 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-26 14:21:13,564 - DEBUG - integration_test - Step 0: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:13,564 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-26 14:21:13,564 - INFO - integration_test - === Applying control at step 0 ===
2026-01-26 14:21:13,564 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000170603487, 'w': 0.0}
2026-01-26 14:21:13,564 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:13,564 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:13,565 - INFO - integration_test - Step 0 completed in 0.937s
2026-01-26 14:21:13,584 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-26 14:21:13,586 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.11 0.   0.   1.2  0.12]
2026-01-26 14:21:13,587 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-26 14:21:13,587 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-26 14:21:13,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:13,605 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.000), path_start=(0.000, 0.000), dist=0.110m
2026-01-26 14:21:13,605 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-26 14:21:13,608 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:13,647 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:13,647 - INFO - integration_test - Warmstart k=0: x0=0.11000000008530174 , y0=0.0 , psi0=0.0 , v0=1.2000000017060348 , spline0=0.12000000017060349 , a0=0.0 , w0=0.0
2026-01-26 14:21:13,647 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:13,648 - INFO - integration_test - Dyn residual k=0: pred=[0.23000000025590522, 0.0, 0.0, 1.2000000017060348, 0.24000000034120697], ws=[0.24808449030065827, 0.0, 0.0, 1.2000000017060348, 0.052929292932739465], res=[-0.018084490044753043, 0.0, 0.0, 0.0, 0.1870707074084675], res_norm=1.879e-01
2026-01-26 14:21:13,649 - INFO - integration_test - Dyn residual k=1: pred=[0.36808449047126174, 0.0, 0.0, 1.2000000017060348, 0.17292929310334296], ws=[0.4487672827469764, 0.0, 0.0, 1.2000000017060348, 0.3248484848795037], res=[-0.08068279227571468, 0.0, 0.0, 0.0, -0.15191919177616073], res_norm=1.720e-01
2026-01-26 14:21:13,650 - INFO - integration_test - Dyn residual k=2: pred=[0.5687672829175798, 0.0, 0.0, 1.2000000017060348, 0.44484848505010716], ws=[0.6016507642315438, 0.0, 0.0, 1.2000000017060348, 0.38747474752299893], res=[-0.032883481313964014, 0.0, 0.0, 0.0, 0.057373737527108226], res_norm=6.613e-02
2026-01-26 14:21:13,669 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,738 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,758 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,806 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,826 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,878 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,897 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:13,952 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:13,982 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,060 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,082 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,138 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,160 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,211 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,230 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,279 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,299 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,358 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,375 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,415 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,432 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,473 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,638 - INFO - integration_test - Step 1: MPC solve successful
2026-01-26 14:21:14,642 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-26 14:21:14,643 - DEBUG - integration_test - Step 1: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:14,643 - INFO - integration_test - === Applying control at step 1 ===
2026-01-26 14:21:14,643 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000185695552, 'w': 0.0}
2026-01-26 14:21:14,643 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:14,643 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:14,644 - INFO - integration_test - Step 1 completed in 1.058s
2026-01-26 14:21:14,657 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-26 14:21:14,658 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.24 0.   0.   1.4  0.26]
2026-01-26 14:21:14,658 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.066m, drift=0.046m)
2026-01-26 14:21:14,658 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-26 14:21:14,659 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:14,673 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.240, 0.000), path_start=(0.000, 0.000), dist=0.240m
2026-01-26 14:21:14,673 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-26 14:21:14,676 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:14,699 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:14,699 - INFO - integration_test - Warmstart k=0: x0=0.24000000034875302 , y0=0.0 , psi0=0.0 , v0=1.4000000035629903 , spline0=0.26000000052690253 , a0=0.0 , w0=0.0
2026-01-26 14:21:14,699 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:14,700 - INFO - integration_test - Dyn residual k=0: pred=[0.380000000705052, 0.0, 0.0, 1.4000000035629903, 0.40000000088320153], ws=[0.5260822689389316, 0.0, 0.0, 1.4000000035629903, 0.16363636366312734], res=[-0.1460822682338796, 0.0, 0.0, 0.0, 0.2363636372200742], res_norm=2.779e-01
2026-01-26 14:21:14,701 - INFO - integration_test - Dyn residual k=1: pred=[0.6660822692952306, 0.0, 0.0, 1.4000000035629903, 0.3036363640194264], ws=[0.8030796557525761, 0.0, 0.0, 1.4000000035629903, 0.6715151516653939], res=[-0.1369973864573455, 0.0, 0.0, 0.0, -0.3678787876459675], res_norm=3.926e-01
2026-01-26 14:21:14,701 - INFO - integration_test - Dyn residual k=2: pred=[0.9430796561088751, 0.0, 0.0, 1.4000000035629903, 0.8115151520216929], ws=[1.0668736810509913, 0.0, 0.0, 1.4000000035629903, 0.7458585860681354], res=[-0.12379402494211622, 0.0, 0.0, 0.0, 0.06565656595355751], res_norm=1.401e-01
2026-01-26 14:21:14,715 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,763 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,779 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,818 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,834 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,872 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,888 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,928 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:14,945 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:14,989 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,006 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,049 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,065 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,106 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,123 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,165 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,182 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,221 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,237 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,275 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,290 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,333 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,476 - INFO - integration_test - Step 2: MPC solve successful
2026-01-26 14:21:15,480 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-26 14:21:15,480 - DEBUG - integration_test - Step 2: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:15,480 - INFO - integration_test - === Applying control at step 2 ===
2026-01-26 14:21:15,481 - INFO - integration_test -   Control dict from planner: {'a': 2.000000017552604, 'w': 0.0}
2026-01-26 14:21:15,481 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:15,481 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:15,482 - INFO - integration_test - Step 2 completed in 0.824s
2026-01-26 14:21:15,495 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-26 14:21:15,497 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.39       0.         0.         1.60000001 0.42      ]
2026-01-26 14:21:15,497 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.084m, drift=0.114m)
2026-01-26 14:21:15,497 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-26 14:21:15,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:15,512 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.390, 0.000), path_start=(0.000, 0.000), dist=0.390m
2026-01-26 14:21:15,512 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-26 14:21:15,515 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:15,539 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:15,539 - INFO - integration_test - Warmstart k=0: x0=0.39000000079281505 , y0=0.0 , psi0=0.0 , v0=1.6000000053182506 , spline0=0.4200000010587276 , a0=0.0 , w0=0.0
2026-01-26 14:21:15,539 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:15,540 - INFO - integration_test - Dyn residual k=0: pred=[0.5500000013246401, 0.0, 0.0, 1.6000000053182506, 0.5800000015905526], ws=[0.58844231545944, 0.0, 0.0, 1.6000000053182506, 0.39454545465791785], res=[-0.038442314134799926, 0.0, 0.0, 0.0, 0.1854545469326348], res_norm=1.894e-01
2026-01-26 14:21:15,541 - INFO - integration_test - Dyn residual k=1: pred=[0.7484423159912651, 0.0, 0.0, 1.6000000053182506, 0.5545454551897429], ws=[0.8768451461082685, 0.0, 0.0, 1.6000000053182506, 0.6957575760148337], res=[-0.12840283011700337, 0.0, 0.0, 0.0, -0.14121212082509083], res_norm=1.909e-01
2026-01-26 14:21:15,542 - INFO - integration_test - Dyn residual k=2: pred=[1.0368451466400934, 0.0, 0.0, 1.6000000053182506, 0.8557575765466587], ws=[1.1572150831138175, 0.0, 0.0, 1.6000000053182506, 0.7747474750960064], res=[-0.12036993647372407, 0.0, 0.0, 0.0, 0.08101010145065235], res_norm=1.451e-01
2026-01-26 14:21:15,556 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,603 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,620 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,659 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,675 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,716 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,735 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,773 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,789 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,830 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,845 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,884 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,942 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:15,957 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:15,998 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,013 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,051 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,067 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,110 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,127 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,169 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,324 - INFO - integration_test - Step 3: MPC solve successful
2026-01-26 14:21:16,329 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-26 14:21:16,329 - DEBUG - integration_test - Step 3: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:16,329 - INFO - integration_test - === Applying control at step 3 ===
2026-01-26 14:21:16,329 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000188970115, 'w': 0.0}
2026-01-26 14:21:16,329 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:16,329 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:16,331 - INFO - integration_test - Step 3 completed in 0.834s
2026-01-26 14:21:16,347 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-26 14:21:16,349 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.56       0.         0.         1.80000001 0.6       ]
2026-01-26 14:21:16,349 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.052m, drift=0.012m)
2026-01-26 14:21:16,349 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-26 14:21:16,350 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:16,364 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.560, 0.000), path_start=(0.000, 0.000), dist=0.560m
2026-01-26 14:21:16,364 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-26 14:21:16,367 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:16,390 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:16,390 - INFO - integration_test - Warmstart k=0: x0=0.5600000014191252 , y0=0.0 , psi0=0.0 , v0=1.8000000072079518 , spline0=0.6000000017795228 , a0=0.0 , w0=0.0
2026-01-26 14:21:16,390 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:16,391 - INFO - integration_test - Dyn residual k=0: pred=[0.7400000021399203, 0.0, 0.0, 1.8000000072079518, 0.780000002500318], ws=[0.8006068067842498, 0.0, 0.0, 1.8000000072079518, 0.4670707072727529], res=[-0.06060680464432944, 0.0, 0.0, 0.0, 0.3129292952275651], res_norm=3.187e-01
2026-01-26 14:21:16,392 - INFO - integration_test - Dyn residual k=1: pred=[0.9806068075050449, 0.0, 0.0, 1.8000000072079518, 0.647070707993548], ws=[1.1502886972482307, 0.0, 0.0, 1.8000000072079518, 0.782626263049237], res=[-0.16968188974318577, 0.0, 0.0, 0.0, -0.13555555505568895], res_norm=2.172e-01
2026-01-26 14:21:16,392 - INFO - integration_test - Dyn residual k=2: pred=[1.3302886979690258, 0.0, 0.0, 1.8000000072079518, 0.9626262637700322], ws=[1.3809420243143864, 0.0, 0.0, 1.8000000072079518, 1.0543434350203278], res=[-0.05065332634536057, 0.0, 0.0, 0.0, -0.09171717125029555], res_norm=1.048e-01
2026-01-26 14:21:16,407 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,456 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,472 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,513 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,532 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,573 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,589 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,628 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,643 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,681 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,696 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,736 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,753 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,791 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,807 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,846 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,861 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,899 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,915 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:16,955 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:16,969 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,008 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,153 - INFO - integration_test - Step 4: MPC solve successful
2026-01-26 14:21:17,157 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-26 14:21:17,157 - DEBUG - integration_test - Step 4: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:17,157 - INFO - integration_test - === Applying control at step 4 ===
2026-01-26 14:21:17,157 - INFO - integration_test -   Control dict from planner: {'a': 2.000000015645237, 'w': 0.0}
2026-01-26 14:21:17,158 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:17,158 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:17,159 - INFO - integration_test - Step 4 completed in 0.810s
2026-01-26 14:21:17,174 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-26 14:21:17,175 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.75       0.         0.         2.00000001 0.8       ]
2026-01-26 14:21:17,175 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.138m, drift=0.188m)
2026-01-26 14:21:17,175 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-26 14:21:17,176 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:17,190 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.750, 0.000), path_start=(0.000, 0.000), dist=0.750m
2026-01-26 14:21:17,190 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-26 14:21:17,192 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:17,214 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:17,214 - INFO - integration_test - Warmstart k=0: x0=0.7500000022181466 , y0=0.0 , psi0=0.0 , v0=2.0000000087724756 , spline0=0.8000000026567704 , a0=0.0 , w0=0.0
2026-01-26 14:21:17,214 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:17,215 - INFO - integration_test - Dyn residual k=0: pred=[0.9500000030953941, 0.0, 0.0, 2.0000000087724756, 1.000000003534018], ws=[1.0746845863393106, 0.0, 0.0, 2.0000000087724756, 0.9696969702681241], res=[-0.12468458324391651, 0.0, 0.0, 0.0, 0.030303033265893897], res_norm=1.283e-01
2026-01-26 14:21:17,216 - INFO - integration_test - Dyn residual k=1: pred=[1.2746845872165582, 0.0, 0.0, 2.0000000087724756, 1.1696969711453717], ws=[1.4077840050579873, 0.0, 0.0, 2.0000000087724756, 1.0646464654039547], res=[-0.1330994178414291, 0.0, 0.0, 0.0, 0.10505050574141706], res_norm=1.696e-01
2026-01-26 14:21:17,216 - INFO - integration_test - Dyn residual k=2: pred=[1.6077840059352349, 0.0, 0.0, 2.0000000087724756, 1.2646464662812023], ws=[1.7531129833917158, 0.0, 0.0, 2.0000000087724756, 1.1636363645979115], res=[-0.145328977456481, 0.0, 0.0, 0.0, 0.10101010168329072], res_norm=1.770e-01
2026-01-26 14:21:17,230 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,277 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,294 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,334 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,350 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,395 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,410 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,449 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,463 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,501 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,516 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,556 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,571 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,611 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,626 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,663 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,678 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,724 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,747 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,804 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:17,822 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:17,862 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,006 - INFO - integration_test - Step 5: MPC solve successful
2026-01-26 14:21:18,010 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-26 14:21:18,011 - DEBUG - integration_test - Step 5: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:18,011 - INFO - integration_test - === Applying control at step 5 ===
2026-01-26 14:21:18,011 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018988395, 'w': 0.0}
2026-01-26 14:21:18,011 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:18,011 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:18,012 - INFO - integration_test - Step 5 completed in 0.837s
2026-01-26 14:21:18,026 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-26 14:21:18,026 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.96       0.         0.         2.20000001 1.02      ]
2026-01-26 14:21:18,027 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.042m, drift=0.102m)
2026-01-26 14:21:18,027 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-26 14:21:18,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:18,040 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.960, 0.000), path_start=(0.000, 0.000), dist=0.960m
2026-01-26 14:21:18,040 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-26 14:21:18,042 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:18,065 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:18,065 - INFO - integration_test - Warmstart k=0: x0=0.9600000031903361 , y0=0.0 , psi0=0.0 , v0=2.200000010671315 , spline0=1.0200000037239019 , a0=0.0 , w0=0.0
2026-01-26 14:21:18,065 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:18,066 - INFO - integration_test - Dyn residual k=0: pred=[1.1800000042574676, 0.0, 0.0, 2.200000010671315, 1.2400000047910333], ws=[1.2464579671856097, 0.0, 0.0, 2.200000010671315, 1.008484849259157], res=[-0.0664579629281421, 0.0, 0.0, 0.0, 0.2315151555318764], res_norm=2.409e-01
2026-01-26 14:21:18,067 - INFO - integration_test - Dyn residual k=1: pred=[1.4664579682527412, 0.0, 0.0, 2.200000010671315, 1.2284848503262884], ws=[1.524001364654659, 0.0, 0.0, 2.200000010671315, 1.1092929302988768], res=[-0.05754339640191786, 0.0, 0.0, 0.0, 0.11919192002741164], res_norm=1.324e-01
2026-01-26 14:21:18,068 - INFO - integration_test - Dyn residual k=2: pred=[1.7440013657217905, 0.0, 0.0, 2.200000010671315, 1.3292929313660082], ws=[1.7885889254389291, 0.0, 0.0, 2.200000010671315, 1.6193939410727993], res=[-0.04458755971713857, 0.0, 0.0, 0.0, -0.2901010097067911], res_norm=2.935e-01
2026-01-26 14:21:18,081 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,130 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,145 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,187 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,203 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,242 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,258 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,297 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,312 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,353 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,371 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,413 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,428 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,471 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,487 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,528 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,544 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,584 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,600 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,639 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,655 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,695 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,836 - INFO - integration_test - Step 6: MPC solve successful
2026-01-26 14:21:18,840 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-26 14:21:18,841 - DEBUG - integration_test - Step 6: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:18,841 - INFO - integration_test - === Applying control at step 6 ===
2026-01-26 14:21:18,841 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000135173353, 'w': 0.0}
2026-01-26 14:21:18,841 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:18,841 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:18,843 - INFO - integration_test - Step 6 completed in 0.817s
2026-01-26 14:21:18,856 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-26 14:21:18,856 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.19       0.         0.         2.40000001 1.26      ]
2026-01-26 14:21:18,857 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.034m, drift=0.036m)
2026-01-26 14:21:18,857 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-26 14:21:18,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:18,870 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.190, 0.000), path_start=(0.000, 0.000), dist=1.190m
2026-01-26 14:21:18,870 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-26 14:21:18,872 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:18,895 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:18,895 - INFO - integration_test - Warmstart k=0: x0=1.1900000043250543 , y0=0.0 , psi0=0.0 , v0=2.4000000120230487 , spline0=1.2600000049262068 , a0=0.0 , w0=0.0
2026-01-26 14:21:18,895 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:18,896 - INFO - integration_test - Dyn residual k=0: pred=[1.4300000055273592, 0.0, 0.0, 2.4000000120230487, 1.5000000061285117], ws=[1.4547024593274198, 0.0, 0.0, 2.4000000120230487, 0.8535353543401075], res=[-0.024702453800060642, 0.0, 0.0, 0.0, 0.6464646517884042], res_norm=6.469e-01
2026-01-26 14:21:18,897 - INFO - integration_test - Dyn residual k=1: pred=[1.6947024605297247, 0.0, 0.0, 2.4000000120230487, 1.0935353555424123], ws=[1.8394033605975242, 0.0, 0.0, 2.4000000120230487, 1.8381818201811317], res=[-0.14470090006779945, 0.0, 0.0, 0.0, -0.7446464646387194], res_norm=7.586e-01
2026-01-26 14:21:18,898 - INFO - integration_test - Dyn residual k=2: pred=[2.079403361799829, 0.0, 0.0, 2.4000000120230487, 2.0781818213834367], ws=[2.120950983368579, 0.0, 0.0, 2.4000000120230487, 1.4806060624161166], res=[-0.04154762156875025, 0.0, 0.0, 0.0, 0.5975757589673201], res_norm=5.990e-01
2026-01-26 14:21:18,911 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:18,961 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:18,977 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,016 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,032 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,070 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,085 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,123 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,138 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,178 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,193 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,232 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,247 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,285 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,300 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,339 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,354 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,397 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,414 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,454 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,471 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,511 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,654 - INFO - integration_test - Step 7: MPC solve successful
2026-01-26 14:21:19,658 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-26 14:21:19,658 - DEBUG - integration_test - Step 7: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:19,659 - INFO - integration_test - === Applying control at step 7 ===
2026-01-26 14:21:19,659 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000065609416, 'w': 0.0}
2026-01-26 14:21:19,659 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:19,659 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:19,660 - INFO - integration_test - Step 7 completed in 0.804s
2026-01-26 14:21:19,673 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-26 14:21:19,675 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.44000001 0.         0.         2.60000001 1.52000001]
2026-01-26 14:21:19,675 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.091m, drift=0.011m)
2026-01-26 14:21:19,675 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-26 14:21:19,676 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:19,689 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.440, 0.000), path_start=(0.000, 0.000), dist=1.440m
2026-01-26 14:21:19,689 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-26 14:21:19,692 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:19,716 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:19,716 - INFO - integration_test - Warmstart k=0: x0=1.4400000055601638 , y0=0.0 , psi0=0.0 , v0=2.6000000126791427 , spline0=1.520000006194121 , a0=0.0 , w0=0.0
2026-01-26 14:21:19,716 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:19,717 - INFO - integration_test - Dyn residual k=0: pred=[1.700000006828078, 0.0, 0.0, 2.6000000126791427, 1.7800000074620352], ws=[1.8127513959543613, 0.0, 0.0, 2.6000000126791427, 1.8490909111260097], res=[-0.11275138912628324, 0.0, 0.0, 0.0, -0.06909090366397441], res_norm=1.322e-01
2026-01-26 14:21:19,718 - INFO - integration_test - Dyn residual k=1: pred=[2.0727513972222757, 0.0, 0.0, 2.6000000126791427, 2.109090912393924], ws=[2.215707906456513, 0.0, 0.0, 2.6000000126791427, 1.9200000023808954], res=[-0.1429565092342373, 0.0, 0.0, 0.0, 0.1890909100130287], res_norm=2.370e-01
2026-01-26 14:21:19,718 - INFO - integration_test - Dyn residual k=2: pred=[2.4757079077244275, 0.0, 0.0, 2.6000000126791427, 2.18000000364881], ws=[2.6625625248488918, 0.0, 0.0, 2.6000000126791427, 2.507070710504317], res=[-0.18685461712446427, 0.0, 0.0, 0.0, -0.327070706855507], res_norm=3.767e-01
2026-01-26 14:21:19,734 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,786 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,803 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,842 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,857 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,895 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,910 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:19,949 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:19,964 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,002 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,017 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,054 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,069 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,107 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,122 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,160 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,176 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,215 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,230 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,267 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,282 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,321 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,456 - INFO - integration_test - Step 8: MPC solve successful
2026-01-26 14:21:20,460 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-26 14:21:20,461 - DEBUG - integration_test - Step 8: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:20,461 - INFO - integration_test - === Applying control at step 8 ===
2026-01-26 14:21:20,461 - INFO - integration_test -   Control dict from planner: {'a': 2.00000000272603, 'w': 0.0}
2026-01-26 14:21:20,461 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:20,461 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:20,462 - INFO - integration_test - Step 8 completed in 0.788s
2026-01-26 14:21:20,474 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-26 14:21:20,475 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.71000001 0.         0.         2.80000001 1.80000001]
2026-01-26 14:21:20,475 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.127m, drift=0.037m)
2026-01-26 14:21:20,475 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-26 14:21:20,475 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:20,489 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.710, 0.000), path_start=(0.000, 0.000), dist=1.710m
2026-01-26 14:21:20,489 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-26 14:21:20,491 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:20,518 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:20,518 - INFO - integration_test - Warmstart k=0: x0=1.7100000068417083 , y0=0.0 , psi0=0.0 , v0=2.8000000129517457 , spline0=1.8000000074892957 , a0=0.0 , w0=0.0
2026-01-26 14:21:20,518 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:20,519 - INFO - integration_test - Dyn residual k=0: pred=[1.990000008136883, 0.0, 0.0, 2.8000000129517457, 2.08000000878447], ws=[2.093938110365265, 0.0, 0.0, 2.8000000129517457, 1.5018181836815543], res=[-0.10393810222838207, 0.0, 0.0, 0.0, 0.5781818251029158], res_norm=5.874e-01
2026-01-26 14:21:20,520 - INFO - integration_test - Dyn residual k=1: pred=[2.3739381116604394, 0.0, 0.0, 2.8000000129517457, 1.781818184976729], ws=[2.513152643948753, 0.0, 0.0, 2.8000000129517457, 2.453333336693215], res=[-0.13921453228831338, 0.0, 0.0, 0.0, -0.6715151517164859], res_norm=6.858e-01
2026-01-26 14:21:20,521 - INFO - integration_test - Dyn residual k=2: pred=[2.7931526452439273, 0.0, 0.0, 2.8000000129517457, 2.7333333379883893], ws=[2.98363558921934, 0.0, 0.0, 2.8000000129517457, 2.392323235885044], res=[-0.19048294397541277, 0.0, 0.0, 0.0, 0.34101010210334515], res_norm=3.906e-01
2026-01-26 14:21:20,538 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,591 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,607 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,648 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,664 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,701 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,717 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,756 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,771 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,810 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,825 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,864 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,879 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,918 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,934 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:20,973 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:20,988 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,027 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,043 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,084 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,099 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,139 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,278 - INFO - integration_test - Step 9: MPC solve successful
2026-01-26 14:21:21,283 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-26 14:21:21,283 - DEBUG - integration_test - Step 9: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:21,283 - INFO - integration_test - === Applying control at step 9 ===
2026-01-26 14:21:21,283 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019364516, 'w': 0.0}
2026-01-26 14:21:21,283 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:21,283 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:21,284 - INFO - integration_test - Step 9 completed in 0.810s
2026-01-26 14:21:21,296 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-26 14:21:21,297 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[2.00000001 0.         0.         3.00000001 2.10000001]
2026-01-26 14:21:21,298 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.143m, drift=0.043m)
2026-01-26 14:21:21,298 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-26 14:21:21,298 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:21,312 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(2.000, 0.000), path_start=(0.000, 0.000), dist=2.000m
2026-01-26 14:21:21,312 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-26 14:21:21,314 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:21,339 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:21,339 - INFO - integration_test - Warmstart k=0: x0=2.0000000082337053 , y0=0.0 , psi0=0.0 , v0=3.0000000148881973 , spline0=2.1000000089781157 , a0=0.0 , w0=0.0
2026-01-26 14:21:21,339 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:21,340 - INFO - integration_test - Dyn residual k=0: pred=[2.300000009722525, 0.0, 0.0, 3.0000000148881973, 2.4000000104669352], ws=[2.4115959342654985, 0.0, 0.0, 3.0, 2.018181820630395], res=[-0.11159592454297362, 0.0, 0.0, 1.4888197341633713e-08, 0.38181818983654026], res_norm=3.978e-01
2026-01-26 14:21:21,341 - INFO - integration_test - Dyn residual k=1: pred=[2.7115959342654983, 0.0, 0.0, 3.0, 2.318181820630395], ws=[2.871006503227623, 0.0, 0.0, 3.0, 2.800000003264769], res=[-0.1594105689621248, 0.0, 0.0, 0.0, -0.48181818263437437], res_norm=5.075e-01
2026-01-26 14:21:21,341 - INFO - integration_test - Dyn residual k=2: pred=[3.171006503227623, 0.0, 0.0, 3.0, 3.1000000032647694], ws=[3.2611321763777474, 0.0, 0.0, 3.0, 2.909090912355679], res=[-0.09012567315012454, 0.0, 0.0, 0.0, 0.19090909090909047], res_norm=2.111e-01
2026-01-26 14:21:21,356 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,409 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,427 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,471 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,490 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,537 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,555 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,605 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,628 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,673 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,692 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,740 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,758 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,831 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,853 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,897 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,913 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:21,953 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:21,969 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,007 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,023 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,064 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,200 - INFO - integration_test - Step 10: MPC solve successful
2026-01-26 14:21:22,204 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-26 14:21:22,205 - DEBUG - integration_test - Step 10: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:22,205 - INFO - integration_test - === Applying control at step 10 ===
2026-01-26 14:21:22,205 - INFO - integration_test -   Control dict from planner: {'a': 1.5068261803460425e-07, 'w': 0.0}
2026-01-26 14:21:22,205 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:22,205 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:22,206 - INFO - integration_test - Step 10 completed in 0.909s
2026-01-26 14:21:22,218 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-26 14:21:22,220 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.30000001 0.         0.         3.00000003 2.40000001]
2026-01-26 14:21:22,220 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.149m, drift=0.049m)
2026-01-26 14:21:22,220 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-26 14:21:22,221 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:22,238 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.300, 0.000), path_start=(0.000, 0.000), dist=2.300m
2026-01-26 14:21:22,238 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-26 14:21:22,242 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:22,273 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:22,274 - INFO - integration_test - Warmstart k=0: x0=2.300000010475938 , y0=0.0 , psi0=0.0 , v0=3.000000029956459 , spline0=2.4000000119737614 , a0=0.0 , w0=0.0
2026-01-26 14:21:22,274 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:22,275 - INFO - integration_test - Dyn residual k=0: pred=[2.600000013471584, 0.0, 0.0, 3.000000029956459, 2.7000000149694072], ws=[2.7065537623778035, 0.0, 0.0, 3.0, 2.1000000032655715], res=[-0.1065537489062196, 0.0, 0.0, 2.995645909109612e-08, 0.6000000117038358], res_norm=6.094e-01
2026-01-26 14:21:22,275 - INFO - integration_test - Dyn residual k=1: pred=[3.0065537623778034, 0.0, 0.0, 3.0, 2.4000000032655713], ws=[3.158636371604434, 0.0, 0.0, 3.0, 2.66666667065792], res=[-0.15208260922663053, 0.0, 0.0, 0.0, -0.2666666673923488], res_norm=3.070e-01
2026-01-26 14:21:22,276 - INFO - integration_test - Dyn residual k=2: pred=[3.4586363716044337, 0.0, 0.0, 3.0, 2.9666666706579203], ws=[3.538112076605639, 0.0, 0.0, 3.0, 3.437373742332568], res=[-0.07947570500120538, 0.0, 0.0, 0.0, -0.47070707167464754], res_norm=4.774e-01
2026-01-26 14:21:22,291 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,345 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,361 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,405 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,422 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,467 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,483 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,527 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,546 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,589 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,606 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,651 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,668 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,709 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,726 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,771 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,790 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,833 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,852 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,893 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:22,909 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:22,949 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,067 - INFO - integration_test - Step 11: MPC solve successful
2026-01-26 14:21:23,071 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-26 14:21:23,072 - DEBUG - integration_test - Step 11: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:23,072 - INFO - integration_test - === Applying control at step 11 ===
2026-01-26 14:21:23,072 - INFO - integration_test -   Control dict from planner: {'a': 1.4644628134267994e-08, 'w': 0.0}
2026-01-26 14:21:23,072 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:23,072 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:23,073 - INFO - integration_test - Step 11 completed in 0.854s
2026-01-26 14:21:23,085 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-26 14:21:23,086 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.60000001 0.         0.         3.00000003 2.70000002]
2026-01-26 14:21:23,087 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.151m, drift=0.251m)
2026-01-26 14:21:23,087 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-26 14:21:23,087 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:23,100 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.600, 0.000), path_start=(0.000, 0.000), dist=2.600m
2026-01-26 14:21:23,100 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-26 14:21:23,102 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:23,125 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:23,125 - INFO - integration_test - Warmstart k=0: x0=2.600000013544807 , y0=0.0 , psi0=0.0 , v0=3.000000031420922 , spline0=2.7000000151158536 , a0=0.0 , w0=0.0
2026-01-26 14:21:23,125 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:23,126 - INFO - integration_test - Dyn residual k=0: pred=[2.9000000166868993, 0.0, 0.0, 3.000000031420922, 3.000000018257946], ws=[3.0015115911902166, 0.0, 0.0, 3.0, 2.8282828336268167], res=[-0.10151157450331727, 0.0, 0.0, 3.1420921864366846e-08, 0.17171718463112917], res_norm=1.995e-01
2026-01-26 14:21:23,127 - INFO - integration_test - Dyn residual k=1: pred=[3.3015115911902164, 0.0, 0.0, 3.0, 3.128282833626817], ws=[3.446266240497463, 0.0, 0.0, 3.0, 3.1858585916606303], res=[-0.14475464930724646, 0.0, 0.0, 0.0, -0.05757575803381343], res_norm=1.558e-01
2026-01-26 14:21:23,128 - INFO - integration_test - Dyn residual k=2: pred=[3.7462662404974627, 0.0, 0.0, 3.0, 3.48585859166063], ws=[3.815091977082498, 0.0, 0.0, 3.0, 3.3010101068121456], res=[-0.0688257365850351, 0.0, 0.0, 0.0, 0.1848484848484846], res_norm=1.972e-01
2026-01-26 14:21:23,141 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,189 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,205 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,244 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,259 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,298 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,314 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,356 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,373 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,412 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,427 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,467 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,483 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,531 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,549 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,589 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,606 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,645 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,660 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,698 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,713 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:23,752 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:23,876 - INFO - integration_test - Step 12: MPC solve successful
2026-01-26 14:21:23,880 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-26 14:21:23,880 - DEBUG - integration_test - Step 12: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:23,881 - INFO - integration_test - === Applying control at step 12 ===
2026-01-26 14:21:23,881 - INFO - integration_test -   Control dict from planner: {'a': -5.21272128782592e-09, 'w': 0.0}
2026-01-26 14:21:23,881 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:23,881 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:23,882 - INFO - integration_test - Step 12 completed in 0.796s
2026-01-26 14:21:23,895 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-26 14:21:23,896 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.90000002 0.         0.         3.00000003 3.00000002]
2026-01-26 14:21:23,896 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.145m, drift=0.245m)
2026-01-26 14:21:23,896 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-26 14:21:23,897 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:23,910 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.900, 0.000), path_start=(0.000, 0.000), dist=2.900m
2026-01-26 14:21:23,910 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-26 14:21:23,913 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:23,935 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:23,935 - INFO - integration_test - Warmstart k=0: x0=2.9000000166608357 , y0=0.0 , psi0=0.0 , v0=3.00000003089965 , spline0=3.0000000182058186 , a0=0.0 , w0=0.0
2026-01-26 14:21:23,935 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:23,936 - INFO - integration_test - Dyn residual k=0: pred=[3.2000000197508007, 0.0, 0.0, 3.00000003089965, 3.3000000212957836], ws=[3.2964694199707845, 0.0, 0.0, 3.0, 2.9343434407798346], res=[-0.09646940021998374, 0.0, 0.0, 3.089964994984484e-08, 0.36565658051594907], res_norm=3.782e-01
2026-01-26 14:21:23,937 - INFO - integration_test - Dyn residual k=1: pred=[3.5964694199707843, 0.0, 0.0, 3.0, 3.234343440779835], ws=[3.7338961092438288, 0.0, 0.0, 3.0, 3.4747474821033615], res=[-0.13742668927304447, 0.0, 0.0, 0.0, -0.24040404132352666], res_norm=2.769e-01
2026-01-26 14:21:23,937 - INFO - integration_test - Dyn residual k=2: pred=[4.033896109243829, 0.0, 0.0, 3.0, 3.7747474821033613], ws=[4.092071877245823, 0.0, 0.0, 3.0, 3.5959596033154826], res=[-0.058175768001994754, 0.0, 0.0, 0.0, 0.17878787878787872], res_norm=1.880e-01
2026-01-26 14:21:23,951 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,001 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,018 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,058 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,075 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,116 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,134 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,176 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,194 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,235 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,251 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,291 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,306 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,346 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,361 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,401 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,418 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,458 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,474 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,515 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,532 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,573 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,711 - INFO - integration_test - Step 13: MPC solve successful
2026-01-26 14:21:24,715 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-26 14:21:24,716 - DEBUG - integration_test - Step 13: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:24,716 - INFO - integration_test - === Applying control at step 13 ===
2026-01-26 14:21:24,716 - INFO - integration_test -   Control dict from planner: {'a': 8.875624437466172e-09, 'w': 0.0}
2026-01-26 14:21:24,716 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:24,716 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:24,717 - INFO - integration_test - Step 13 completed in 0.821s
2026-01-26 14:21:24,732 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-26 14:21:24,734 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[3.20000002 0.         0.         3.00000003 3.30000002]
2026-01-26 14:21:24,734 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.139m, drift=0.239m)
2026-01-26 14:21:24,734 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-26 14:21:24,735 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:24,750 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(3.200, 0.000), path_start=(0.000, 0.000), dist=3.200m
2026-01-26 14:21:24,750 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-26 14:21:24,753 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:24,776 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:24,776 - INFO - integration_test - Warmstart k=0: x0=3.200000019795179 , y0=0.0 , psi0=0.0 , v0=3.0000000317872124 , spline0=3.3000000213845397 , a0=0.0 , w0=0.0
2026-01-26 14:21:24,776 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:24,777 - INFO - integration_test - Dyn residual k=0: pred=[3.5000000229739, 0.0, 0.0, 3.0000000317872124, 3.600000024563261], ws=[3.591427248868357, 0.0, 0.0, 3.0, 3.2141414221336158], res=[-0.09142722589445684, 0.0, 0.0, 3.1787212417810906e-08, 0.3858586024296451], res_norm=3.965e-01
2026-01-26 14:21:24,778 - INFO - integration_test - Dyn residual k=1: pred=[3.891427248868357, 0.0, 0.0, 3.0, 3.5141414221336156], ws=[4.021525978250628, 0.0, 0.0, 3.0, 3.7757575848298046], res=[-0.13009872938227085, 0.0, 0.0, 0.0, -0.26161616269618904], res_norm=2.922e-01
2026-01-26 14:21:24,778 - INFO - integration_test - Dyn residual k=2: pred=[4.3215259782506275, 0.0, 0.0, 3.0, 4.075757584829804], ws=[4.507827288082112, 0.0, 0.0, 3.0, 4.367676777829024], res=[-0.1863013098314843, 0.0, 0.0, 0.0, -0.2919191929992193], res_norm=3.463e-01
2026-01-26 14:21:24,793 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,843 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,861 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,905 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,924 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:24,968 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:24,985 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,030 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,048 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,093 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,111 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,152 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,168 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,209 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,225 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,268 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,284 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,324 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,340 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,380 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,395 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,435 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,591 - INFO - integration_test - Step 14: MPC solve successful
2026-01-26 14:21:25,595 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-26 14:21:25,595 - DEBUG - integration_test - Step 14: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:25,595 - INFO - integration_test - === Applying control at step 14 ===
2026-01-26 14:21:25,595 - INFO - integration_test -   Control dict from planner: {'a': -5.294414259345647e-09, 'w': 0.0}
2026-01-26 14:21:25,595 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:25,595 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:25,596 - INFO - integration_test - Step 14 completed in 0.863s
2026-01-26 14:21:25,609 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-26 14:21:25,610 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.50000002 0.         0.         3.00000003 3.60000002]
2026-01-26 14:21:25,611 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.133m, drift=0.233m)
2026-01-26 14:21:25,611 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-26 14:21:25,611 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:25,625 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.500, 0.000), path_start=(0.000, 0.000), dist=3.500m
2026-01-26 14:21:25,625 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-26 14:21:25,627 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:25,650 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:25,650 - INFO - integration_test - Warmstart k=0: x0=3.500000022947428 , y0=0.0 , psi0=0.0 , v0=3.000000031257771 , spline0=3.600000024510317 , a0=0.0 , w0=0.0
2026-01-26 14:21:25,650 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:25,651 - INFO - integration_test - Dyn residual k=0: pred=[3.800000026073205, 0.0, 0.0, 3.000000031257771, 3.900000027636094], ws=[3.886385077714491, 0.0, 0.0, 3.0, 3.3262626354230473], res=[-0.08638505164128585, 0.0, 0.0, 3.12577710381845e-08, 0.5737373922130469], res_norm=5.802e-01
2026-01-26 14:21:25,652 - INFO - integration_test - Dyn residual k=1: pred=[4.186385077714491, 0.0, 0.0, 3.0, 3.626262635423047], ws=[4.309155847105209, 0.0, 0.0, 3.0, 4.088888899782363], res=[-0.1227707693907174, 0.0, 0.0, 0.0, -0.462626264359316], res_norm=4.786e-01
2026-01-26 14:21:25,652 - INFO - integration_test - Dyn residual k=2: pred=[4.6091558471052085, 0.0, 0.0, 3.0, 4.388888899782363], ws=[4.784807188415636, 0.0, 0.0, 3.0, 4.222222233115697], res=[-0.17565134131042726, 0.0, 0.0, 0.0, 0.16666666666666607], res_norm=2.421e-01
2026-01-26 14:21:25,666 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,716 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,732 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,771 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,787 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,849 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,870 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,915 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,931 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:25,970 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:25,985 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,024 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,039 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,079 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,095 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,135 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,152 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,192 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,209 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,247 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,264 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,310 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,443 - INFO - integration_test - Step 15: MPC solve successful
2026-01-26 14:21:26,447 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-26 14:21:26,448 - DEBUG - integration_test - Step 15: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:26,448 - INFO - integration_test - === Applying control at step 15 ===
2026-01-26 14:21:26,448 - INFO - integration_test -   Control dict from planner: {'a': -5.0730113170294324e-09, 'w': 0.0}
2026-01-26 14:21:26,448 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:26,448 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:26,449 - INFO - integration_test - Step 15 completed in 0.839s
2026-01-26 14:21:26,462 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-26 14:21:26,464 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.80000003 0.         0.         3.00000003 3.90000003]
2026-01-26 14:21:26,464 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.127m, drift=0.227m)
2026-01-26 14:21:26,464 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-26 14:21:26,465 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:26,478 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.800, 0.000), path_start=(0.000, 0.000), dist=3.800m
2026-01-26 14:21:26,478 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-26 14:21:26,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:26,503 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:26,503 - INFO - integration_test - Warmstart k=0: x0=3.80000002604784 , y0=0.0 , psi0=0.0 , v0=3.0000000307504697 , spline0=3.900000027585364 , a0=0.0 , w0=0.0
2026-01-26 14:21:26,503 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:26,504 - INFO - integration_test - Dyn residual k=0: pred=[4.100000029122887, 0.0, 0.0, 3.0000000307504697, 4.200000030660411], ws=[4.18134290646741, 0.0, 0.0, 3.0, 3.624242435109386], res=[-0.0813428773445235, 0.0, 0.0, 3.075046972611517e-08, 0.5757575955510252], res_norm=5.815e-01
2026-01-26 14:21:26,505 - INFO - integration_test - Dyn residual k=1: pred=[4.48134290646741, 0.0, 0.0, 3.0, 3.9242424351093863], ws=[4.596785715806438, 0.0, 0.0, 3.0, 4.606060619435328], res=[-0.11544280933902762, 0.0, 0.0, 0.0, -0.6818181843259419], res_norm=6.915e-01
2026-01-26 14:21:26,505 - INFO - integration_test - Dyn residual k=2: pred=[4.896785715806438, 0.0, 0.0, 3.0, 4.906060619435328], ws=[5.061787088508408, 0.0, 0.0, 3.0, 4.949494963426951], res=[-0.1650013727019708, 0.0, 0.0, 0.0, -0.04343434399162316], res_norm=1.706e-01
2026-01-26 14:21:26,519 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,568 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,584 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,622 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,639 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,679 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,695 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,735 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,750 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,789 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,805 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,846 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,861 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,900 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,915 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:26,955 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:26,970 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,008 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,024 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,068 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,087 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,135 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,274 - INFO - integration_test - Step 16: MPC solve successful
2026-01-26 14:21:27,279 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-26 14:21:27,279 - DEBUG - integration_test - Step 16: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:27,279 - INFO - integration_test - === Applying control at step 16 ===
2026-01-26 14:21:27,279 - INFO - integration_test -   Control dict from planner: {'a': -1.6886751330603743e-09, 'w': 0.0}
2026-01-26 14:21:27,279 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:27,279 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:27,280 - INFO - integration_test - Step 16 completed in 0.817s
2026-01-26 14:21:27,295 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-26 14:21:27,296 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[4.10000003 0.         0.         3.00000003 4.20000003]
2026-01-26 14:21:27,297 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.120m, drift=0.220m)
2026-01-26 14:21:27,297 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-26 14:21:27,297 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:27,314 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(4.100, 0.000), path_start=(0.000, 0.000), dist=4.100m
2026-01-26 14:21:27,314 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-26 14:21:27,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:27,340 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:27,340 - INFO - integration_test - Warmstart k=0: x0=4.100000029114444 , y0=0.0 , psi0=0.0 , v0=3.000000030581602 , spline0=4.200000030643524 , a0=0.0 , w0=0.0
2026-01-26 14:21:27,340 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:27,341 - INFO - integration_test - Dyn residual k=0: pred=[4.400000032172604, 0.0, 0.0, 3.000000030581602, 4.500000033701685], ws=[4.476300735178763, 0.0, 0.0, 3.0, 4.126262639572439], res=[-0.07630070300615976, 0.0, 0.0, 3.0581602139534425e-08, 0.3737373941292459], res_norm=3.814e-01
2026-01-26 14:21:27,342 - INFO - integration_test - Dyn residual k=1: pred=[4.776300735178763, 0.0, 0.0, 3.0, 4.426262639572439], ws=[4.8844155844548265, 0.0, 0.0, 3.0, 4.25656566987547], res=[-0.1081148492760633, 0.0, 0.0, 0.0, 0.169696969696969], res_norm=2.012e-01
2026-01-26 14:21:27,343 - INFO - integration_test - Dyn residual k=2: pred=[5.184415584454826, 0.0, 0.0, 3.0, 4.55656566987547], ws=[5.338766988531956, 0.0, 0.0, 3.0, 5.251515182158675], res=[-0.1543514040771301, 0.0, 0.0, 0.0, -0.6949495122832055], res_norm=7.119e-01
2026-01-26 14:21:27,357 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,407 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,424 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,466 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,484 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,530 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,546 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,586 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,602 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,642 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,658 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,697 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,713 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,757 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,774 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,814 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,830 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,869 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,885 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,925 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:27,941 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:27,981 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,118 - INFO - integration_test - Step 17: MPC solve successful
2026-01-26 14:21:28,123 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-26 14:21:28,124 - DEBUG - integration_test - Step 17: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:28,124 - INFO - integration_test - === Applying control at step 17 ===
2026-01-26 14:21:28,124 - INFO - integration_test -   Control dict from planner: {'a': -1.6230533574342795e-09, 'w': 0.0}
2026-01-26 14:21:28,124 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:28,124 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:28,126 - INFO - integration_test - Step 17 completed in 0.830s
2026-01-26 14:21:28,143 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-26 14:21:28,145 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[4.40000003 0.         0.         3.00000003 4.50000003]
2026-01-26 14:21:28,146 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.114m, drift=0.214m)
2026-01-26 14:21:28,146 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-26 14:21:28,147 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:28,163 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(4.400, 0.000), path_start=(0.000, 0.000), dist=4.400m
2026-01-26 14:21:28,163 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-26 14:21:28,166 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:28,193 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:28,193 - INFO - integration_test - Warmstart k=0: x0=4.400000032164488 , y0=0.0 , psi0=0.0 , v0=3.000000030419297 , spline0=4.500000033685454 , a0=0.0 , w0=0.0
2026-01-26 14:21:28,193 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:28,194 - INFO - integration_test - Dyn residual k=0: pred=[4.700000035206418, 0.0, 0.0, 3.000000030419297, 4.8000000367273845], ws=[4.77125856386031, 0.0, 0.0, 3.0, 4.652525268517336], res=[-0.0712585286538916, 0.0, 0.0, 3.0419296859207634e-08, 0.14747476821004835], res_norm=1.638e-01
2026-01-26 14:21:28,195 - INFO - integration_test - Dyn residual k=1: pred=[5.07125856386031, 0.0, 0.0, 3.0, 4.952525268517336], ws=[5.172045453054156, 0.0, 0.0, 3.0, 4.544444478129899], res=[-0.10078688919384593, 0.0, 0.0, 0.0, 0.4080807903874373], res_norm=4.203e-01
2026-01-26 14:21:28,196 - INFO - integration_test - Dyn residual k=2: pred=[5.472045453054156, 0.0, 0.0, 3.0, 4.8444444781298985], ws=[5.615746888478464, 0.0, 0.0, 3.0, 5.551515185200605], res=[-0.14370143542430824, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.215e-01
2026-01-26 14:21:28,213 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,265 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,281 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,320 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,378 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,393 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,432 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,448 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,487 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,503 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,544 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,561 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,602 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,617 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,657 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,672 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,712 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,728 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,768 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,783 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:28,821 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:28,949 - INFO - integration_test - Step 18: MPC solve successful
2026-01-26 14:21:28,953 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-26 14:21:28,954 - DEBUG - integration_test - Step 18: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:28,954 - INFO - integration_test - === Applying control at step 18 ===
2026-01-26 14:21:28,954 - INFO - integration_test -   Control dict from planner: {'a': -5.058105766027138e-10, 'w': 0.0}
2026-01-26 14:21:28,954 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:28,954 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:28,955 - INFO - integration_test - Step 18 completed in 0.810s
2026-01-26 14:21:28,967 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-26 14:21:28,968 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.70000004 0.         0.         3.00000003 4.80000004]
2026-01-26 14:21:28,969 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.108m, drift=0.208m)
2026-01-26 14:21:28,969 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-26 14:21:28,969 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:28,982 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.700, 0.000), path_start=(0.000, 0.000), dist=4.700m
2026-01-26 14:21:28,982 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-26 14:21:28,985 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:29,009 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:29,009 - INFO - integration_test - Warmstart k=0: x0=4.700000035203889 , y0=0.0 , psi0=0.0 , v0=3.000000030368716 , spline0=4.800000036722326 , a0=0.0 , w0=0.0
2026-01-26 14:21:29,009 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:29,010 - INFO - integration_test - Dyn residual k=0: pred=[5.000000038240761, 0.0, 0.0, 3.000000030368716, 5.100000039759198], ws=[5.066216392529076, 0.0, 0.0, 3.0, 4.948484885207175], res=[-0.06621635428831496, 0.0, 0.0, 3.036871598638413e-08, 0.15151515455202347], res_norm=1.654e-01
2026-01-26 14:21:29,010 - INFO - integration_test - Dyn residual k=1: pred=[5.366216392529076, 0.0, 0.0, 3.0, 5.248484885207175], ws=[5.459675321637599, 0.0, 0.0, 3.0, 4.844444481166771], res=[-0.09345892910852349, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.147e-01
2026-01-26 14:21:29,011 - INFO - integration_test - Dyn residual k=2: pred=[5.759675321637599, 0.0, 0.0, 3.0, 5.1444444811667704], ws=[5.8927267884045715, 0.0, 0.0, 3.0, 5.851515188237477], res=[-0.13305146676697266, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.195e-01
2026-01-26 14:21:29,025 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,073 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,090 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,130 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,149 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,189 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,206 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,246 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,262 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,303 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,320 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,360 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,375 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,415 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,431 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,472 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,489 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,529 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,549 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,591 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,606 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,646 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,792 - INFO - integration_test - Step 19: MPC solve successful
2026-01-26 14:21:29,796 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-26 14:21:29,796 - DEBUG - integration_test - Step 19: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:29,796 - INFO - integration_test - === Applying control at step 19 ===
2026-01-26 14:21:29,796 - INFO - integration_test -   Control dict from planner: {'a': -5.9032090172302255e-09, 'w': 0.0}
2026-01-26 14:21:29,796 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:29,797 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:29,798 - INFO - integration_test - Step 19 completed in 0.830s
2026-01-26 14:21:29,811 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-26 14:21:29,812 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[5.00000004 0.         0.         3.00000003 5.10000004]
2026-01-26 14:21:29,813 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.102m, drift=0.202m)
2026-01-26 14:21:29,813 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-26 14:21:29,814 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:29,827 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(5.000, 0.000), path_start=(0.000, 0.000), dist=5.000m
2026-01-26 14:21:29,827 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-26 14:21:29,829 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:29,853 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:29,853 - INFO - integration_test - Warmstart k=0: x0=5.000000038211244 , y0=0.0 , psi0=0.0 , v0=3.0000000297783953 , spline0=5.100000039700166 , a0=0.0 , w0=0.0
2026-01-26 14:21:29,853 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:29,854 - INFO - integration_test - Dyn residual k=0: pred=[5.300000041189083, 0.0, 0.0, 3.0000000297783953, 5.4000000426780055], ws=[5.361174221107376, 0.0, 0.0, 3.0, 5.248484888185015], res=[-0.06117417991829299, 0.0, 0.0, 2.97783953051578e-08, 0.1515151544929907], res_norm=1.634e-01
2026-01-26 14:21:29,855 - INFO - integration_test - Dyn residual k=1: pred=[5.661174221107376, 0.0, 0.0, 3.0, 5.548484888185015], ws=[5.7473051900456715, 0.0, 0.0, 3.0, 5.144444484144611], res=[-0.08613096893829564, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.131e-01
2026-01-26 14:21:29,856 - INFO - integration_test - Dyn residual k=2: pred=[6.047305190045671, 0.0, 0.0, 3.0, 5.4444444841446105], ws=[6.169706688031914, 0.0, 0.0, 3.0, 6.151515191215317], res=[-0.12240149798624245, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.176e-01
2026-01-26 14:21:29,870 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,919 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:29,976 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:29,992 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,033 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,049 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,089 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,105 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,162 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,187 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,245 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,264 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,307 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,324 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,365 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,381 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,421 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,438 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,478 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,494 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,537 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,670 - INFO - integration_test - Step 20: MPC solve successful
2026-01-26 14:21:30,674 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-26 14:21:30,674 - DEBUG - integration_test - Step 20: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:30,674 - INFO - integration_test - === Applying control at step 20 ===
2026-01-26 14:21:30,674 - INFO - integration_test -   Control dict from planner: {'a': 1.7643929600101134e-09, 'w': 0.0}
2026-01-26 14:21:30,674 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:30,674 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:30,675 - INFO - integration_test - Step 20 completed in 0.863s
2026-01-26 14:21:30,688 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-26 14:21:30,689 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[5.30000004 0.         0.         3.00000003 5.40000004]
2026-01-26 14:21:30,689 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.096m, drift=0.196m)
2026-01-26 14:21:30,689 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-26 14:21:30,690 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:30,702 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(5.300, 0.000), path_start=(0.000, 0.000), dist=5.300m
2026-01-26 14:21:30,703 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-26 14:21:30,705 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:30,726 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:30,726 - INFO - integration_test - Warmstart k=0: x0=5.300000041197905 , y0=0.0 , psi0=0.0 , v0=3.0000000299548346 , spline0=5.40000004269565 , a0=0.0 , w0=0.0
2026-01-26 14:21:30,726 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:30,727 - INFO - integration_test - Dyn residual k=0: pred=[5.600000044193389, 0.0, 0.0, 3.0000000299548346, 5.700000045691134], ws=[5.656132049693442, 0.0, 0.0, 3.0, 5.346464689160296], res=[-0.056132005500052706, 0.0, 0.0, 2.995483461276649e-08, 0.3535353565308377], res_norm=3.580e-01
2026-01-26 14:21:30,728 - INFO - integration_test - Dyn residual k=1: pred=[5.956132049693442, 0.0, 0.0, 3.0, 5.646464689160296], ws=[6.034935058502872, 0.0, 0.0, 3.0, 5.444444487140094], res=[-0.07880300880943025, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.168e-01
2026-01-26 14:21:30,729 - INFO - integration_test - Dyn residual k=2: pred=[6.334935058502872, 0.0, 0.0, 3.0, 5.744444487140094], ws=[6.446686587768495, 0.0, 0.0, 3.0, 6.451515194210801], res=[-0.11175152926562326, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.158e-01
2026-01-26 14:21:30,743 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,790 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,805 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,843 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,858 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,897 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,912 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:30,952 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:30,967 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,006 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,021 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,062 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,078 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,118 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,134 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,175 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,191 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,231 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,247 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,286 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,301 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,341 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,496 - INFO - integration_test - Step 21: MPC solve successful
2026-01-26 14:21:31,501 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-26 14:21:31,501 - DEBUG - integration_test - Step 21: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:31,501 - INFO - integration_test - === Applying control at step 21 ===
2026-01-26 14:21:31,501 - INFO - integration_test -   Control dict from planner: {'a': 2.8037114257978646e-09, 'w': 0.0}
2026-01-26 14:21:31,501 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:31,501 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:31,502 - INFO - integration_test - Step 21 completed in 0.813s
2026-01-26 14:21:31,518 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-26 14:21:31,519 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[5.60000004 0.         0.         3.00000003 5.70000005]
2026-01-26 14:21:31,520 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.090m, drift=0.190m)
2026-01-26 14:21:31,520 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-26 14:21:31,520 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:31,533 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(5.600, 0.000), path_start=(0.000, 0.000), dist=5.600m
2026-01-26 14:21:31,534 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-26 14:21:31,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:31,558 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:31,558 - INFO - integration_test - Warmstart k=0: x0=5.600000044207407 , y0=0.0 , psi0=0.0 , v0=3.000000030235206 , spline0=5.700000045719171 , a0=0.0 , w0=0.0
2026-01-26 14:21:31,558 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:31,559 - INFO - integration_test - Dyn residual k=0: pred=[5.900000047230928, 0.0, 0.0, 3.000000030235206, 6.000000048742692], ws=[5.951089878327326, 0.0, 0.0, 3.0, 5.646464692183817], res=[-0.051089831096398086, 0.0, 0.0, 3.023520589451323e-08, 0.3535353565588748], res_norm=3.572e-01
2026-01-26 14:21:31,559 - INFO - integration_test - Dyn residual k=1: pred=[6.251089878327326, 0.0, 0.0, 3.0, 5.946464692183817], ws=[6.322564927044193, 0.0, 0.0, 3.0, 5.744444490163615], res=[-0.07147504871686738, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.143e-01
2026-01-26 14:21:31,560 - INFO - integration_test - Dyn residual k=2: pred=[6.622564927044193, 0.0, 0.0, 3.0, 6.044444490163615], ws=[6.7236664876419585, 0.0, 0.0, 3.0, 6.751515197234322], res=[-0.10110156059776543, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.143e-01
2026-01-26 14:21:31,574 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,622 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,638 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,677 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,692 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,734 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,751 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,793 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,810 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,851 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,868 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,908 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,924 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:31,965 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:31,982 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,022 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,038 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,078 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,094 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,134 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,150 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,191 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,347 - INFO - integration_test - Step 22: MPC solve successful
2026-01-26 14:21:32,351 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-26 14:21:32,351 - DEBUG - integration_test - Step 22: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:32,351 - INFO - integration_test - === Applying control at step 22 ===
2026-01-26 14:21:32,351 - INFO - integration_test -   Control dict from planner: {'a': -2.934922947484068e-10, 'w': 0.0}
2026-01-26 14:21:32,351 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:32,351 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:32,353 - INFO - integration_test - Step 22 completed in 0.834s
2026-01-26 14:21:32,365 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-26 14:21:32,366 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.90000005 0.         0.         3.00000003 6.00000005]
2026-01-26 14:21:32,367 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.084m, drift=0.184m)
2026-01-26 14:21:32,367 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-26 14:21:32,367 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:32,381 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.900, 0.000), path_start=(0.000, 0.000), dist=5.900m
2026-01-26 14:21:32,381 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-26 14:21:32,384 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:32,407 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:32,407 - INFO - integration_test - Warmstart k=0: x0=5.90000004722946 , y0=0.0 , psi0=0.0 , v0=3.0000000302058565 , spline0=6.000000048739756 , a0=0.0 , w0=0.0
2026-01-26 14:21:32,408 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:32,409 - INFO - integration_test - Dyn residual k=0: pred=[6.200000050250045, 0.0, 0.0, 3.0000000302058565, 6.300000051760342], ws=[6.246047706965717, 0.0, 0.0, 3.0, 5.946464695204402], res=[-0.04604765671567179, 0.0, 0.0, 3.020585648272345e-08, 0.3535353565559394], res_norm=3.565e-01
2026-01-26 14:21:32,409 - INFO - integration_test - Dyn residual k=1: pred=[6.546047706965717, 0.0, 0.0, 3.0, 6.246464695204402], ws=[6.6101947955783285, 0.0, 0.0, 3.0, 6.0444444931842005], res=[-0.06414708861261165, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.120e-01
2026-01-26 14:21:32,410 - INFO - integration_test - Dyn residual k=2: pred=[6.910194795578328, 0.0, 0.0, 3.0, 6.3444444931842], ws=[7.0006463874912415, 0.0, 0.0, 3.0, 7.051515200254907], res=[-0.09045159191291319, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.128e-01
2026-01-26 14:21:32,424 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,472 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,489 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,528 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,546 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,586 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,603 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,642 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,657 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,695 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,710 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,749 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,765 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,803 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,819 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,857 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,872 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,910 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,925 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:32,965 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:32,979 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,018 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,140 - INFO - integration_test - Step 23: MPC solve successful
2026-01-26 14:21:33,144 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-26 14:21:33,144 - DEBUG - integration_test - Step 23: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:33,144 - INFO - integration_test - === Applying control at step 23 ===
2026-01-26 14:21:33,144 - INFO - integration_test -   Control dict from planner: {'a': -9.753760166444858e-09, 'w': 0.0}
2026-01-26 14:21:33,144 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:33,144 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:33,145 - INFO - integration_test - Step 23 completed in 0.779s
2026-01-26 14:21:33,158 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-26 14:21:33,159 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[6.20000005 0.         0.         3.00000003 6.30000005]
2026-01-26 14:21:33,160 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.078m, drift=0.178m)
2026-01-26 14:21:33,160 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-26 14:21:33,160 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:33,173 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(6.200, 0.000), path_start=(0.000, 0.000), dist=6.200m
2026-01-26 14:21:33,173 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-26 14:21:33,176 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:33,199 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:33,199 - INFO - integration_test - Warmstart k=0: x0=6.200000050201276 , y0=0.0 , psi0=0.0 , v0=3.0000000292304803 , spline0=6.3000000516628045 , a0=0.0 , w0=0.0
2026-01-26 14:21:33,200 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:33,200 - INFO - integration_test - Dyn residual k=0: pred=[6.5000000531243245, 0.0, 0.0, 3.0000000292304803, 6.600000054585853], ws=[6.679781045660441, 0.0, 0.0, 3.0, 6.751515203177956], res=[-0.17978099253611646, 0.0, 0.0, 2.9230480258490843e-08, -0.1515151485921029], res_norm=2.351e-01
2026-01-26 14:21:33,201 - INFO - integration_test - Dyn residual k=1: pred=[6.979781045660441, 0.0, 0.0, 3.0, 7.0515152031779555], ws=[7.09951173865293, 0.0, 0.0, 3.0, 6.849495001157754], res=[-0.11973069299248884, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.348e-01
2026-01-26 14:21:33,202 - INFO - integration_test - Dyn residual k=2: pred=[7.399511738652929, 0.0, 0.0, 3.0, 7.149495001157754], ws=[7.570744835597931, 0.0, 0.0, 3.0, 7.654545506208258], res=[-0.17123309694500133, 0.0, 0.0, 0.0, -0.5050505050505043], res_norm=5.333e-01
2026-01-26 14:21:33,216 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,266 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,284 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,324 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,340 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,380 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,395 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,436 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,451 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,491 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,507 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,548 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,564 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,603 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,619 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,658 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,674 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,713 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,729 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,768 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,783 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:33,822 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:33,944 - INFO - integration_test - Step 24: MPC solve successful
2026-01-26 14:21:33,948 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-26 14:21:33,948 - DEBUG - integration_test - Step 24: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:33,949 - INFO - integration_test - === Applying control at step 24 ===
2026-01-26 14:21:33,949 - INFO - integration_test -   Control dict from planner: {'a': 4.157638326664781e-09, 'w': 0.0}
2026-01-26 14:21:33,949 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:33,949 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:33,950 - INFO - integration_test - Step 24 completed in 0.791s
2026-01-26 14:21:33,964 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-26 14:21:33,965 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[6.50000005 0.         0.         3.00000003 6.60000005]
2026-01-26 14:21:33,965 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.071m, drift=0.171m)
2026-01-26 14:21:33,965 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-26 14:21:33,966 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:33,979 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(6.500, 0.000), path_start=(0.000, 0.000), dist=6.500m
2026-01-26 14:21:33,979 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-26 14:21:33,981 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:34,002 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:34,002 - INFO - integration_test - Warmstart k=0: x0=6.500000053145112 , y0=0.0 , psi0=0.0 , v0=3.000000029646244 , spline0=6.600000054627429 , a0=0.0 , w0=0.0
2026-01-26 14:21:34,002 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:34,003 - INFO - integration_test - Dyn residual k=0: pred=[6.800000056109736, 0.0, 0.0, 3.000000029646244, 6.900000057592054], ws=[6.974738874182614, 0.0, 0.0, 3.0, 7.0515152061425805], res=[-0.1747388180728775, 0.0, 0.0, 2.964624412626904e-08, -0.1515151485505264], res_norm=2.313e-01
2026-01-26 14:21:34,004 - INFO - integration_test - Dyn residual k=1: pred=[7.274738874182614, 0.0, 0.0, 3.0, 7.35151520614258], ws=[7.38714160701562, 0.0, 0.0, 3.0, 7.149495004122379], res=[-0.11240273283300617, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.312e-01
2026-01-26 14:21:34,005 - INFO - integration_test - Dyn residual k=2: pred=[7.6871416070156195, 0.0, 0.0, 3.0, 7.449495004122379], ws=[7.847724735195507, 0.0, 0.0, 3.0, 7.752525307152681], res=[-0.16058312817988707, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.429e-01
2026-01-26 14:21:34,019 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,066 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,081 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,120 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,135 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,175 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,190 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,235 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,256 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,308 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,324 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,364 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,380 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,419 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,433 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,472 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,488 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,526 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,542 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,582 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,597 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,636 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,759 - INFO - integration_test - Step 25: MPC solve successful
2026-01-26 14:21:34,763 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-26 14:21:34,763 - DEBUG - integration_test - Step 25: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:34,763 - INFO - integration_test - === Applying control at step 25 ===
2026-01-26 14:21:34,763 - INFO - integration_test -   Control dict from planner: {'a': 1.559675249110624e-09, 'w': 0.0}
2026-01-26 14:21:34,763 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:34,763 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:34,764 - INFO - integration_test - Step 25 completed in 0.800s
2026-01-26 14:21:34,778 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-26 14:21:34,779 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.80000006 0.         0.         3.00000003 6.90000006]
2026-01-26 14:21:34,779 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.065m, drift=0.165m)
2026-01-26 14:21:34,779 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-26 14:21:34,780 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:34,793 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.800, 0.000), path_start=(0.000, 0.000), dist=6.800m
2026-01-26 14:21:34,793 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-26 14:21:34,795 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:34,817 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:34,817 - INFO - integration_test - Warmstart k=0: x0=6.800000056117535 , y0=0.0 , psi0=0.0 , v0=3.000000029802212 , spline0=6.900000057607651 , a0=0.0 , w0=0.0
2026-01-26 14:21:34,817 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:34,818 - INFO - integration_test - Dyn residual k=0: pred=[7.1000000590977566, 0.0, 0.0, 3.000000029802212, 7.200000060587872], ws=[7.269696702741501, 0.0, 0.0, 3.0, 7.351515209122802], res=[-0.1696966436437446, 0.0, 0.0, 2.980221180948206e-08, -0.15151514853492998], res_norm=2.275e-01
2026-01-26 14:21:34,819 - INFO - integration_test - Dyn residual k=1: pred=[7.569696702741501, 0.0, 0.0, 3.0, 7.651515209122802], ws=[7.674771475426834, 0.0, 0.0, 3.0, 7.4494950071026], res=[-0.10507477268533272, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.277e-01
2026-01-26 14:21:34,819 - INFO - integration_test - Dyn residual k=2: pred=[7.9747714754268335, 0.0, 0.0, 3.0, 7.7494950071026], ws=[8.12470463485877, 0.0, 0.0, 3.0, 7.345454603062195], res=[-0.14993315943193597, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.310e-01
2026-01-26 14:21:34,834 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,881 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,897 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,937 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:34,953 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:34,993 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,010 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,051 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,067 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,105 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,120 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,159 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,175 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,215 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,231 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,270 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,286 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,327 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,344 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,386 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,402 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,445 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,597 - INFO - integration_test - Step 26: MPC solve successful
2026-01-26 14:21:35,601 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-26 14:21:35,601 - DEBUG - integration_test - Step 26: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:35,601 - INFO - integration_test - === Applying control at step 26 ===
2026-01-26 14:21:35,601 - INFO - integration_test -   Control dict from planner: {'a': 2.0467226269166814e-09, 'w': 0.0}
2026-01-26 14:21:35,601 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:35,601 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:35,602 - INFO - integration_test - Step 26 completed in 0.824s
2026-01-26 14:21:35,620 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-26 14:21:35,621 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[7.10000006 0.         0.         3.00000003 7.20000006]
2026-01-26 14:21:35,621 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.059m, drift=0.159m)
2026-01-26 14:21:35,621 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-26 14:21:35,622 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:35,637 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(7.100, 0.000), path_start=(0.000, 0.000), dist=7.100m
2026-01-26 14:21:35,637 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-26 14:21:35,639 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:35,664 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:35,664 - INFO - integration_test - Warmstart k=0: x0=7.10000005910799 , y0=0.0 , psi0=0.0 , v0=3.000000030006884 , spline0=7.200000060608339 , a0=0.0 , w0=0.0
2026-01-26 14:21:35,664 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:35,665 - INFO - integration_test - Dyn residual k=0: pred=[7.4000000621086786, 0.0, 0.0, 3.000000030006884, 7.500000063609027], ws=[7.564654531336159, 0.0, 0.0, 3.0, 7.449495010103289], res=[-0.1646544692274805, 0.0, 0.0, 3.0006884088606967e-08, 0.05050505350573875], res_norm=1.722e-01
2026-01-26 14:21:35,666 - INFO - integration_test - Dyn residual k=1: pred=[7.864654531336159, 0.0, 0.0, 3.0, 7.7494950101032885], ws=[7.9624013438996, 0.0, 0.0, 3.0, 7.7494950101032885], res=[-0.09774681256344131, 0.0, 0.0, 0.0, 0.0], res_norm=9.775e-02
2026-01-26 14:21:35,668 - INFO - integration_test - Dyn residual k=2: pred=[8.262401343899601, 0.0, 0.0, 3.0, 8.04949501010329], ws=[8.401684534621054, 0.0, 0.0, 3.0, 7.645454606062884], res=[-0.13928319072145356, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.274e-01
2026-01-26 14:21:35,684 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,734 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,751 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,794 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,810 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,850 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,866 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,905 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,920 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:35,960 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:35,976 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,014 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,030 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,071 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,091 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,134 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,151 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,199 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,220 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,275 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,297 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,351 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,543 - INFO - integration_test - Step 27: MPC solve successful
2026-01-26 14:21:36,548 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-26 14:21:36,549 - DEBUG - integration_test - Step 27: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:36,549 - INFO - integration_test - === Applying control at step 27 ===
2026-01-26 14:21:36,549 - INFO - integration_test -   Control dict from planner: {'a': 1.464203851862161e-09, 'w': 0.0}
2026-01-26 14:21:36,549 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:36,549 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:36,550 - INFO - integration_test - Step 27 completed in 0.930s
2026-01-26 14:21:36,569 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-26 14:21:36,570 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[7.40000006 0.         0.         3.00000003 7.50000006]
2026-01-26 14:21:36,571 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.053m, drift=0.153m)
2026-01-26 14:21:36,571 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-26 14:21:36,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:36,587 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(7.400, 0.000), path_start=(0.000, 0.000), dist=7.400m
2026-01-26 14:21:36,587 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-26 14:21:36,591 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:36,617 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:36,617 - INFO - integration_test - Warmstart k=0: x0=7.400000062116 , y0=0.0 , psi0=0.0 , v0=3.0000000301533043 , spline0=7.50000006362367 , a0=0.0 , w0=0.0
2026-01-26 14:21:36,618 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:36,619 - INFO - integration_test - Dyn residual k=0: pred=[7.70000006513133, 0.0, 0.0, 3.0000000301533043, 7.800000066639001], ws=[7.859612359959373, 0.0, 0.0, 3.0, 7.7494950131186195], res=[-0.15961229482804296, 0.0, 0.0, 3.015330429789742e-08, 0.05050505352038126], res_norm=1.674e-01
2026-01-26 14:21:36,620 - INFO - integration_test - Dyn residual k=1: pred=[8.159612359959374, 0.0, 0.0, 3.0, 8.04949501311862], ws=[8.250031212416912, 0.0, 0.0, 3.0, 8.04949501311862], res=[-0.09041885245753889, 0.0, 0.0, 0.0, 0.0], res_norm=9.042e-02
2026-01-26 14:21:36,620 - INFO - integration_test - Dyn residual k=2: pred=[8.550031212416913, 0.0, 0.0, 3.0, 8.34949501311862], ws=[8.67866443445112, 0.0, 0.0, 3.0, 7.945454609078215], res=[-0.1286332220342068, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.240e-01
2026-01-26 14:21:36,638 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,694 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,712 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,755 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,774 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,819 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,841 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,887 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,905 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:36,953 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:36,979 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,045 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,067 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,114 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,132 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,177 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,194 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,241 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,260 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,307 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,323 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,369 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,528 - INFO - integration_test - Step 28: MPC solve successful
2026-01-26 14:21:37,533 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-26 14:21:37,533 - DEBUG - integration_test - Step 28: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:37,533 - INFO - integration_test - === Applying control at step 28 ===
2026-01-26 14:21:37,533 - INFO - integration_test -   Control dict from planner: {'a': 4.3998321637542715e-10, 'w': 0.0}
2026-01-26 14:21:37,533 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:37,533 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:37,535 - INFO - integration_test - Step 28 completed in 0.965s
2026-01-26 14:21:37,552 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-26 14:21:37,553 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[7.70000007 0.         0.         3.00000003 7.80000007]
2026-01-26 14:21:37,554 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.047m, drift=0.147m)
2026-01-26 14:21:37,554 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-26 14:21:37,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:37,568 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(7.700, 0.000), path_start=(0.000, 0.000), dist=7.700m
2026-01-26 14:21:37,568 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-26 14:21:37,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:37,595 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:37,595 - INFO - integration_test - Warmstart k=0: x0=7.70000006513353 , y0=0.0 , psi0=0.0 , v0=3.0000000301973024 , spline0=7.8000000666434 , a0=0.0 , w0=0.0
2026-01-26 14:21:37,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:37,596 - INFO - integration_test - Dyn residual k=0: pred=[8.00000006815326, 0.0, 0.0, 3.0000000301973024, 8.10000006966313], ws=[8.154570188593869, 0.0, 0.0, 3.0, 8.04949501613835], res=[-0.15457012044060825, 0.0, 0.0, 3.0197302436363316e-08, 0.05050505352478041], res_norm=1.626e-01
2026-01-26 14:21:37,597 - INFO - integration_test - Dyn residual k=1: pred=[8.45457018859387, 0.0, 0.0, 3.0, 8.34949501613835], ws=[8.537661080948066, 0.0, 0.0, 3.0, 8.34949501613835], res=[-0.0830908923541962, 0.0, 0.0, 0.0, 0.0], res_norm=8.309e-02
2026-01-26 14:21:37,598 - INFO - integration_test - Dyn residual k=2: pred=[8.837661080948067, 0.0, 0.0, 3.0, 8.649495016138351], ws=[8.95564433429875, 0.0, 0.0, 3.0, 8.245454612097946], res=[-0.11798325335068327, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.209e-01
2026-01-26 14:21:37,614 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,669 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,686 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,732 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,753 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,800 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,818 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,858 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,874 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,914 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,929 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:37,972 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:37,987 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,028 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,046 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,086 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,101 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,142 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,160 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,200 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,217 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,260 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,404 - INFO - integration_test - Step 29: MPC solve successful
2026-01-26 14:21:38,409 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-26 14:21:38,409 - DEBUG - integration_test - Step 29: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:38,409 - INFO - integration_test - === Applying control at step 29 ===
2026-01-26 14:21:38,409 - INFO - integration_test -   Control dict from planner: {'a': 1.387158820281637e-10, 'w': 0.0}
2026-01-26 14:21:38,409 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:38,409 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:38,410 - INFO - integration_test - Step 29 completed in 0.857s
2026-01-26 14:21:38,423 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-26 14:21:38,424 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[8.00000007 0.         0.         3.00000003 8.10000007]
2026-01-26 14:21:38,425 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.041m, drift=0.141m)
2026-01-26 14:21:38,425 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-26 14:21:38,425 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:38,442 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(8.000, 0.000), path_start=(0.000, 0.000), dist=8.000m
2026-01-26 14:21:38,442 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-26 14:21:38,445 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:38,469 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:38,469 - INFO - integration_test - Warmstart k=0: x0=8.000000068153954 , y0=0.0 , psi0=0.0 , v0=3.000000030211174 , spline0=8.100000069664517 , a0=0.0 , w0=0.0
2026-01-26 14:21:38,469 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:38,470 - INFO - integration_test - Dyn residual k=0: pred=[8.30000007117507, 0.0, 0.0, 3.000000030211174, 8.400000072685636], ws=[8.449528017231856, 0.0, 0.0, 3.0, 8.349495019159468], res=[-0.14952794605678577, 0.0, 0.0, 3.021117400692219e-08, 0.05050505352616774], res_norm=1.578e-01
2026-01-26 14:21:38,471 - INFO - integration_test - Dyn residual k=1: pred=[8.749528017231857, 0.0, 0.0, 3.0, 8.649495019159469], ws=[8.825290949483577, 0.0, 0.0, 3.0, 8.649495019159469], res=[-0.07576293225172037, 0.0, 0.0, 0.0, 0.0], res_norm=7.576e-02
2026-01-26 14:21:38,472 - INFO - integration_test - Dyn residual k=2: pred=[9.125290949483578, 0.0, 0.0, 3.0, 8.94949501915947], ws=[9.232624234151997, 0.0, 0.0, 3.0, 8.545454615119064], res=[-0.10733328466841918, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.181e-01
2026-01-26 14:21:38,485 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,534 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,553 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,595 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,610 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,652 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,668 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,707 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,723 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,765 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,783 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,825 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,842 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,886 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,903 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:38,945 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:38,963 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,004 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,021 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,065 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,081 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,124 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,290 - INFO - integration_test - Step 30: MPC solve successful
2026-01-26 14:21:39,294 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-26 14:21:39,294 - DEBUG - integration_test - Step 30: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:39,294 - INFO - integration_test - === Applying control at step 30 ===
2026-01-26 14:21:39,294 - INFO - integration_test -   Control dict from planner: {'a': 6.062741420812407e-10, 'w': 0.0}
2026-01-26 14:21:39,294 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:39,294 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:39,295 - INFO - integration_test - Step 30 completed in 0.871s
2026-01-26 14:21:39,308 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-26 14:21:39,309 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[8.30000007 0.         0.         3.00000003 8.40000007]
2026-01-26 14:21:39,310 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.035m, drift=0.135m)
2026-01-26 14:21:39,310 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-26 14:21:39,311 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:39,325 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(8.300, 0.000), path_start=(0.000, 0.000), dist=8.300m
2026-01-26 14:21:39,325 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-26 14:21:39,328 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:39,355 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:39,355 - INFO - integration_test - Warmstart k=0: x0=8.300000071178102 , y0=0.0 , psi0=0.0 , v0=3.0000000302718015 , spline0=8.400000072691698 , a0=0.0 , w0=0.0
2026-01-26 14:21:39,355 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:39,356 - INFO - integration_test - Dyn residual k=0: pred=[8.600000074205283, 0.0, 0.0, 3.0000000302718015, 8.70000007571888], ws=[8.74448584587941, 0.0, 0.0, 3.0, 8.649495022186649], res=[-0.1444857716741268, 0.0, 0.0, 3.027180150994013e-08, 0.05050505353223045], res_norm=1.531e-01
2026-01-26 14:21:39,357 - INFO - integration_test - Dyn residual k=1: pred=[9.04448584587941, 0.0, 0.0, 3.0, 8.94949502218665], ws=[9.112920818037145, 0.0, 0.0, 3.0, 8.94949502218665], res=[-0.06843497215773375, 0.0, 0.0, 0.0, 0.0], res_norm=6.843e-02
2026-01-26 14:21:39,358 - INFO - integration_test - Dyn residual k=2: pred=[9.412920818037145, 0.0, 0.0, 3.0, 9.24949502218665], ws=[9.509604134035637, 0.0, 0.0, 3.0, 8.845454618146245], res=[-0.09668331599849189, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.154e-01
2026-01-26 14:21:39,373 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,426 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,443 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,486 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,505 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,550 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,568 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,611 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,627 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,671 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,686 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,726 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,744 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,786 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,802 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,845 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,862 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,903 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,920 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:39,966 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:39,982 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,024 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,190 - INFO - integration_test - Step 31: MPC solve successful
2026-01-26 14:21:40,194 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-26 14:21:40,194 - DEBUG - integration_test - Step 31: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:40,194 - INFO - integration_test - === Applying control at step 31 ===
2026-01-26 14:21:40,194 - INFO - integration_test -   Control dict from planner: {'a': 5.810424137016076e-09, 'w': 0.0}
2026-01-26 14:21:40,195 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:40,195 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:40,196 - INFO - integration_test - Step 31 completed in 0.886s
2026-01-26 14:21:40,222 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-26 14:21:40,223 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[8.60000007 0.         0.         3.00000003 8.70000008]
2026-01-26 14:21:40,224 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.029m, drift=0.129m)
2026-01-26 14:21:40,224 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-26 14:21:40,225 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:40,242 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(8.600, 0.000), path_start=(0.000, 0.000), dist=8.600m
2026-01-26 14:21:40,242 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-26 14:21:40,246 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:40,270 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:40,270 - INFO - integration_test - Warmstart k=0: x0=8.600000074234334 , y0=0.0 , psi0=0.0 , v0=3.000000030852844 , spline0=8.700000075776982 , a0=0.0 , w0=0.0
2026-01-26 14:21:40,271 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:40,271 - INFO - integration_test - Dyn residual k=0: pred=[8.900000077319618, 0.0, 0.0, 3.000000030852844, 9.000000078862266], ws=[9.03944367461635, 0.0, 0.0, 3.0, 8.949495025271933], res=[-0.13944359729673295, 0.0, 0.0, 3.0852843835305066e-08, 0.050505053590333304], res_norm=1.483e-01
2026-01-26 14:21:40,272 - INFO - integration_test - Dyn residual k=1: pred=[9.339443674616351, 0.0, 0.0, 3.0, 9.249495025271933], ws=[9.400550686763387, 0.0, 0.0, 3.0, 9.249495025271933], res=[-0.06110701214703518, 0.0, 0.0, 0.0, 0.0], res_norm=6.111e-02
2026-01-26 14:21:40,273 - INFO - integration_test - Dyn residual k=2: pred=[9.700550686763387, 0.0, 0.0, 3.0, 9.549495025271934], ws=[9.786584034212995, 0.0, 0.0, 3.0, 9.14545462123153], res=[-0.08603334744960733, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.131e-01
2026-01-26 14:21:40,288 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,340 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,358 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,403 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,420 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,465 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,482 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,525 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,543 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,586 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,602 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,647 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,665 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,709 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,727 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,772 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,790 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,832 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,850 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,891 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:40,907 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:40,949 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,154 - INFO - integration_test - Step 32: MPC solve successful
2026-01-26 14:21:41,159 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-26 14:21:41,159 - DEBUG - integration_test - Step 32: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:41,159 - INFO - integration_test - === Applying control at step 32 ===
2026-01-26 14:21:41,159 - INFO - integration_test -   Control dict from planner: {'a': -1.022240942068961e-06, 'w': 0.0}
2026-01-26 14:21:41,159 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:41,159 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:41,160 - INFO - integration_test - Step 32 completed in 0.937s
2026-01-26 14:21:41,177 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-26 14:21:41,178 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[8.90000007 0.         0.         2.99999993 9.00000007]
2026-01-26 14:21:41,179 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.022m, drift=0.122m)
2026-01-26 14:21:41,179 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-26 14:21:41,179 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:41,194 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(8.900, 0.000), path_start=(0.000, 0.000), dist=8.900m
2026-01-26 14:21:41,195 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-26 14:21:41,197 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:41,222 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:41,222 - INFO - integration_test - Warmstart k=0: x0=8.900000072208414 , y0=0.0 , psi0=0.0 , v0=2.9999999286287498 , spline0=9.000000068639856 , a0=0.0 , w0=0.0
2026-01-26 14:21:41,222 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:41,223 - INFO - integration_test - Dyn residual k=0: pred=[9.200000065071288, 0.0, 0.0, 2.9999999286287498, 9.30000006150273], ws=[9.334401477612168, 0.0, 0.0, 2.9999999286287498, 9.24949501099768], res=[-0.13440141254088012, 0.0, 0.0, 0.0, 0.050505050505050164], res_norm=1.436e-01
2026-01-26 14:21:41,224 - INFO - integration_test - Dyn residual k=1: pred=[9.634401470475042, 0.0, 0.0, 2.9999999286287498, 9.549495003860555], ws=[9.688180499724128, 0.0, 0.0, 2.9999999286287498, 9.549495003860555], res=[-0.0537790292490854, 0.0, 0.0, 0.0, 0.0], res_norm=5.378e-02
2026-01-26 14:21:41,225 - INFO - integration_test - Dyn residual k=2: pred=[9.988180492587002, 0.0, 0.0, 2.9999999286287498, 9.849494996723429], ws=[10.063563834989427, 0.0, 0.0, 2.9999999286287498, 9.445454592683024], res=[-0.07538334240242506, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.110e-01
2026-01-26 14:21:41,242 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,299 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,316 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,361 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,377 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,418 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,435 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,479 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,494 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,532 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,548 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,590 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,605 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,647 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,663 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,703 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,719 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,758 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,774 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,812 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:41,827 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:41,871 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,007 - INFO - integration_test - Step 33: MPC solve successful
2026-01-26 14:21:42,012 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-26 14:21:42,012 - DEBUG - integration_test - Step 33: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:42,012 - INFO - integration_test - === Applying control at step 33 ===
2026-01-26 14:21:42,012 - INFO - integration_test -   Control dict from planner: {'a': -2.7230888130288654e-08, 'w': 0.0}
2026-01-26 14:21:42,012 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:42,012 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:42,014 - INFO - integration_test - Step 33 completed in 0.836s
2026-01-26 14:21:42,029 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-26 14:21:42,030 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[9.20000006 0.         0.         2.99999993 9.30000006]
2026-01-26 14:21:42,031 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.016m, drift=0.116m)
2026-01-26 14:21:42,031 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-26 14:21:42,031 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:42,045 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(9.200, 0.000), path_start=(0.000, 0.000), dist=9.200m
2026-01-26 14:21:42,045 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-26 14:21:42,048 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:21:42,072 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:21:42,072 - INFO - integration_test - Warmstart k=0: x0=9.200000064935134 , y0=0.0 , psi0=0.0 , v0=2.999999925905661 , spline0=9.300000061230422 , a0=0.0 , w0=0.0
2026-01-26 14:21:42,072 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:21:42,073 - INFO - integration_test - Dyn residual k=0: pred=[9.5000000575257, 0.0, 0.0, 2.999999925905661, 9.600000053820988], ws=[9.629359286920835, 0.0, 0.0, 2.999999925905661, 9.549495003315938], res=[-0.1293592293951349, 0.0, 0.0, 0.0, 0.050505050505050164], res_norm=1.389e-01
2026-01-26 14:21:42,074 - INFO - integration_test - Dyn residual k=1: pred=[9.9293592795114, 0.0, 0.0, 2.999999925905661, 9.849494995906504], ws=[9.975810335798556, 0.0, 0.0, 2.999999925905661, 9.849494995906504], res=[-0.04645105628715562, 0.0, 0.0, 0.0, 0.0], res_norm=4.645e-02
2026-01-26 14:21:42,075 - INFO - integration_test - Dyn residual k=2: pred=[10.275810328389122, 0.0, 0.0, 2.999999925905661, 10.14949498849707], ws=[10.340543683296765, 0.0, 0.0, 2.999999925905661, 9.753535374415275], res=[-0.0647333549076432, 0.0, 0.0, 0.0, 0.3959596140817947], res_norm=4.012e-01
2026-01-26 14:21:42,089 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,139 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,155 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,197 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,214 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,257 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,272 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,313 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,329 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,370 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,386 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,425 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,441 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,481 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,497 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,537 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,553 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,594 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,610 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,652 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,668 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:21:42,707 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:21:42,924 - INFO - integration_test - Step 34: MPC solve successful
2026-01-26 14:21:42,929 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-26 14:21:42,929 - DEBUG - integration_test - Step 34: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:21:42,929 - INFO - integration_test - === Applying control at step 34 ===
2026-01-26 14:21:42,929 - INFO - integration_test -   Control dict from planner: {'a': 1.040941787126117e-06, 'w': 0.0}
2026-01-26 14:21:42,929 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:21:42,929 - INFO - integration_test -   Planner output success: True
2026-01-26 14:21:42,930 - INFO - integration_test - Step 34 completed in 0.900s
2026-01-26 14:21:42,949 - WARNING - integration_test - Test timeout reached (30.0s) at step 35. Terminating test early.
2026-01-26 14:21:42,949 - INFO - integration_test - Saving test results...
2026-01-26 14:21:42,950 - INFO - integration_test - Saved 36 vehicle states to test_outputs/20260126_142112_contouring_contouring_contouring_unicycle/vehicle_states.csv
2026-01-26 14:21:42,950 - INFO - integration_test - Saved obstacle summary to test_outputs/20260126_142112_contouring_contouring_contouring_unicycle/obstacle_summary.csv
2026-01-26 14:21:42,950 - INFO - integration_test - Saved state history: 36 vehicle states, 0 obstacles
2026-01-26 14:21:42,950 - INFO - integration_test - Creating animation...
2026-01-26 14:21:42,991 - DEBUG - integration_test - Creating animation with 36 frames (range: 0 to 35)
2026-01-26 14:21:42,992 - DEBUG - integration_test - Frame 0: Drawing 2 contouring constraint halfspaces
2026-01-26 14:21:42,993 - DEBUG - integration_test - Frame 0: Drawing 2 contouring constraint halfspaces
2026-01-26 14:21:43,060 - DEBUG - integration_test - Frame 1: Drawing 2 contouring constraint halfspaces
2026-01-26 14:21:43,089 - DEBUG - integration_test - Frame 2: Drawing 2 contouring constraint halfspaces
2026-01-26 14:21:46,729 - INFO - integration_test - Saved animation with 36 frames at 10.00 fps to test_outputs/20260126_142112_contouring_contouring_contouring_unicycle/animation.gif (duration: 3.60s, size: 172023 bytes)
2026-01-26 14:21:46,755 - INFO - integration_test - Animation created successfully
2026-01-26 14:21:46,756 - INFO - integration_test - Test completed successfully
