2026-01-26 14:23:03,006 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-26 14:23:03,006 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2026-01-26 14:23:03,006 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-26 14:23:03,006 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-26 14:23:03,006 - INFO - integration_test - Creating objective module: contouring
2026-01-26 14:23:03,011 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-26 14:23:03,011 - INFO - integration_test - Creating 1 constraint module(s): ['contouring']
2026-01-26 14:23:03,011 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-26 14:23:03,016 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-26 14:23:03,016 - INFO - integration_test - Created 1 constraint module(s)
2026-01-26 14:23:03,032 - INFO - integration_test - Setting solver on all modules...
2026-01-26 14:23:03,032 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-26 14:23:03,032 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-26 14:23:03,032 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-26 14:23:03,032 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-26 14:23:03,032 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-26 14:23:03,033 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-26 14:23:03,033 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-26 14:23:03,033 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-26 14:23:03,033 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-26 14:23:03,033 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-26 14:23:03,033 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-26 14:23:03,033 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-26 14:23:03,033 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-26 14:23:03,034 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-26 14:23:03,034 - INFO - integration_test - Added spline variable: 0.0000
2026-01-26 14:23:03,034 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-26 14:23:03,034 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-26 14:23:03,034 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-26 14:23:03,034 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-26 14:23:03,034 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-26 14:23:03,035 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:03,048 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-26 14:23:03,048 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-26 14:23:03,051 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:03,078 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:03,078 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-26 14:23:03,078 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:03,079 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.14533333333333337, 0.0, 0.0, 1.0, 0.051515151515151514], res=[-0.045333333333333364, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=6.638e-02
2026-01-26 14:23:03,080 - INFO - integration_test - Dyn residual k=1: pred=[0.24533333333333338, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.35655111111111115, 0.0, 0.0, 1.0, 0.10505050505050506], res=[-0.11121777777777778, 0.0, 0.0, 0.0, 0.04646464646464646], res_norm=1.205e-01
2026-01-26 14:23:03,081 - INFO - integration_test - Dyn residual k=2: pred=[0.45655111111111113, 0.0, 0.0, 1.0, 0.20505050505050507], ws=[0.5247454379440666, 0.0, 0.0, 1.0, 0.16060606060606059], res=[-0.06819432683295545, 0.0, 0.0, 0.0, 0.04444444444444448], res_norm=8.140e-02
2026-01-26 14:23:03,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,163 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,190 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,243 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,262 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,305 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,324 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,369 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,387 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,432 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,450 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,497 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,512 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,551 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,567 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,613 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,634 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,692 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,715 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,771 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:03,790 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:03,839 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,067 - INFO - integration_test - Step 0: MPC solve successful
2026-01-26 14:23:04,074 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-26 14:23:04,074 - DEBUG - integration_test - Step 0: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:04,074 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-26 14:23:04,074 - INFO - integration_test - === Applying control at step 0 ===
2026-01-26 14:23:04,074 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000170603487, 'w': 0.0}
2026-01-26 14:23:04,074 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:04,074 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:04,075 - INFO - integration_test - Step 0 completed in 1.042s
2026-01-26 14:23:04,100 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-26 14:23:04,100 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.11 0.   0.   1.2  0.12]
2026-01-26 14:23:04,101 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-26 14:23:04,101 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-26 14:23:04,101 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:04,121 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.000), path_start=(0.000, 0.000), dist=0.110m
2026-01-26 14:23:04,121 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-26 14:23:04,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:04,158 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:04,158 - INFO - integration_test - Warmstart k=0: x0=0.11000000008530174 , y0=0.0 , psi0=0.0 , v0=1.2000000017060348 , spline0=0.12000000017060349 , a0=0.0 , w0=0.0
2026-01-26 14:23:04,158 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:04,159 - INFO - integration_test - Dyn residual k=0: pred=[0.23000000025590522, 0.0, 0.0, 1.2000000017060348, 0.24000000034120697], ws=[0.24808449030065827, 0.0, 0.0, 1.2000000017060348, 0.052929292932739465], res=[-0.018084490044753043, 0.0, 0.0, 0.0, 0.1870707074084675], res_norm=1.879e-01
2026-01-26 14:23:04,160 - INFO - integration_test - Dyn residual k=1: pred=[0.36808449047126174, 0.0, 0.0, 1.2000000017060348, 0.17292929310334296], ws=[0.4487672827469764, 0.0, 0.0, 1.2000000017060348, 0.3248484848795037], res=[-0.08068279227571468, 0.0, 0.0, 0.0, -0.15191919177616073], res_norm=1.720e-01
2026-01-26 14:23:04,161 - INFO - integration_test - Dyn residual k=2: pred=[0.5687672829175798, 0.0, 0.0, 1.2000000017060348, 0.44484848505010716], ws=[0.6016507642315438, 0.0, 0.0, 1.2000000017060348, 0.38747474752299893], res=[-0.032883481313964014, 0.0, 0.0, 0.0, 0.057373737527108226], res_norm=6.613e-02
2026-01-26 14:23:04,182 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,248 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,269 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,320 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,342 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,392 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,415 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,463 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,482 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,529 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,548 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,594 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,610 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,650 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,665 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,704 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,719 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,757 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,772 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,810 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:04,825 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:04,864 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,006 - INFO - integration_test - Step 1: MPC solve successful
2026-01-26 14:23:05,011 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-26 14:23:05,011 - DEBUG - integration_test - Step 1: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:05,011 - INFO - integration_test - === Applying control at step 1 ===
2026-01-26 14:23:05,011 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000185695552, 'w': 0.0}
2026-01-26 14:23:05,011 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:05,011 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:05,012 - INFO - integration_test - Step 1 completed in 0.912s
2026-01-26 14:23:05,024 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-26 14:23:05,025 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.24 0.   0.   1.4  0.26]
2026-01-26 14:23:05,025 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.066m, drift=0.046m)
2026-01-26 14:23:05,026 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-26 14:23:05,026 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:05,040 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.240, 0.000), path_start=(0.000, 0.000), dist=0.240m
2026-01-26 14:23:05,040 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-26 14:23:05,043 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:05,067 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:05,067 - INFO - integration_test - Warmstart k=0: x0=0.24000000034875302 , y0=0.0 , psi0=0.0 , v0=1.4000000035629903 , spline0=0.26000000052690253 , a0=0.0 , w0=0.0
2026-01-26 14:23:05,067 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:05,068 - INFO - integration_test - Dyn residual k=0: pred=[0.380000000705052, 0.0, 0.0, 1.4000000035629903, 0.40000000088320153], ws=[0.5260822689389316, 0.0, 0.0, 1.4000000035629903, 0.16363636366312734], res=[-0.1460822682338796, 0.0, 0.0, 0.0, 0.2363636372200742], res_norm=2.779e-01
2026-01-26 14:23:05,068 - INFO - integration_test - Dyn residual k=1: pred=[0.6660822692952306, 0.0, 0.0, 1.4000000035629903, 0.3036363640194264], ws=[0.8030796557525761, 0.0, 0.0, 1.4000000035629903, 0.6715151516653939], res=[-0.1369973864573455, 0.0, 0.0, 0.0, -0.3678787876459675], res_norm=3.926e-01
2026-01-26 14:23:05,069 - INFO - integration_test - Dyn residual k=2: pred=[0.9430796561088751, 0.0, 0.0, 1.4000000035629903, 0.8115151520216929], ws=[1.0668736810509913, 0.0, 0.0, 1.4000000035629903, 0.7458585860681354], res=[-0.12379402494211622, 0.0, 0.0, 0.0, 0.06565656595355751], res_norm=1.401e-01
2026-01-26 14:23:05,084 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,130 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,145 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,182 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,198 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,237 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,254 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,293 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,308 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,346 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,360 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,398 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,412 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,451 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,466 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,505 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,519 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,558 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,573 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,610 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,625 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,664 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,810 - INFO - integration_test - Step 2: MPC solve successful
2026-01-26 14:23:05,815 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-26 14:23:05,815 - DEBUG - integration_test - Step 2: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:05,815 - INFO - integration_test - === Applying control at step 2 ===
2026-01-26 14:23:05,815 - INFO - integration_test -   Control dict from planner: {'a': 2.000000017552604, 'w': 0.0}
2026-01-26 14:23:05,815 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:05,815 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:05,816 - INFO - integration_test - Step 2 completed in 0.792s
2026-01-26 14:23:05,831 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-26 14:23:05,832 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.39       0.         0.         1.60000001 0.42      ]
2026-01-26 14:23:05,832 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.084m, drift=0.114m)
2026-01-26 14:23:05,832 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-26 14:23:05,833 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:05,847 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.390, 0.000), path_start=(0.000, 0.000), dist=0.390m
2026-01-26 14:23:05,847 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-26 14:23:05,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:05,874 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:05,874 - INFO - integration_test - Warmstart k=0: x0=0.39000000079281505 , y0=0.0 , psi0=0.0 , v0=1.6000000053182506 , spline0=0.4200000010587276 , a0=0.0 , w0=0.0
2026-01-26 14:23:05,874 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:05,875 - INFO - integration_test - Dyn residual k=0: pred=[0.5500000013246401, 0.0, 0.0, 1.6000000053182506, 0.5800000015905526], ws=[0.58844231545944, 0.0, 0.0, 1.6000000053182506, 0.39454545465791785], res=[-0.038442314134799926, 0.0, 0.0, 0.0, 0.1854545469326348], res_norm=1.894e-01
2026-01-26 14:23:05,875 - INFO - integration_test - Dyn residual k=1: pred=[0.7484423159912651, 0.0, 0.0, 1.6000000053182506, 0.5545454551897429], ws=[0.8768451461082685, 0.0, 0.0, 1.6000000053182506, 0.6957575760148337], res=[-0.12840283011700337, 0.0, 0.0, 0.0, -0.14121212082509083], res_norm=1.909e-01
2026-01-26 14:23:05,876 - INFO - integration_test - Dyn residual k=2: pred=[1.0368451466400934, 0.0, 0.0, 1.6000000053182506, 0.8557575765466587], ws=[1.1572150831138175, 0.0, 0.0, 1.6000000053182506, 0.7747474750960064], res=[-0.12036993647372407, 0.0, 0.0, 0.0, 0.08101010145065235], res_norm=1.451e-01
2026-01-26 14:23:05,890 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,938 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:05,954 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:05,994 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,010 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,057 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,075 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,118 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,134 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,174 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,190 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,230 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,246 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,291 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,308 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,351 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,367 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,407 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,424 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,469 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,491 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,553 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,713 - INFO - integration_test - Step 3: MPC solve successful
2026-01-26 14:23:06,718 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-26 14:23:06,718 - DEBUG - integration_test - Step 3: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:06,718 - INFO - integration_test - === Applying control at step 3 ===
2026-01-26 14:23:06,718 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000188970115, 'w': 0.0}
2026-01-26 14:23:06,718 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:06,718 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:06,719 - INFO - integration_test - Step 3 completed in 0.887s
2026-01-26 14:23:06,735 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-26 14:23:06,736 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.56       0.         0.         1.80000001 0.6       ]
2026-01-26 14:23:06,736 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.052m, drift=0.012m)
2026-01-26 14:23:06,736 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-26 14:23:06,737 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:06,751 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.560, 0.000), path_start=(0.000, 0.000), dist=0.560m
2026-01-26 14:23:06,751 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-26 14:23:06,753 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:06,777 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:06,777 - INFO - integration_test - Warmstart k=0: x0=0.5600000014191252 , y0=0.0 , psi0=0.0 , v0=1.8000000072079518 , spline0=0.6000000017795228 , a0=0.0 , w0=0.0
2026-01-26 14:23:06,777 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:06,778 - INFO - integration_test - Dyn residual k=0: pred=[0.7400000021399203, 0.0, 0.0, 1.8000000072079518, 0.780000002500318], ws=[0.8006068067842498, 0.0, 0.0, 1.8000000072079518, 0.4670707072727529], res=[-0.06060680464432944, 0.0, 0.0, 0.0, 0.3129292952275651], res_norm=3.187e-01
2026-01-26 14:23:06,778 - INFO - integration_test - Dyn residual k=1: pred=[0.9806068075050449, 0.0, 0.0, 1.8000000072079518, 0.647070707993548], ws=[1.1502886972482307, 0.0, 0.0, 1.8000000072079518, 0.782626263049237], res=[-0.16968188974318577, 0.0, 0.0, 0.0, -0.13555555505568895], res_norm=2.172e-01
2026-01-26 14:23:06,779 - INFO - integration_test - Dyn residual k=2: pred=[1.3302886979690258, 0.0, 0.0, 1.8000000072079518, 0.9626262637700322], ws=[1.3809420243143864, 0.0, 0.0, 1.8000000072079518, 1.0543434350203278], res=[-0.05065332634536057, 0.0, 0.0, 0.0, -0.09171717125029555], res_norm=1.048e-01
2026-01-26 14:23:06,793 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,842 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,860 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,903 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,919 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:06,959 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:06,983 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,026 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,043 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,087 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,103 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,148 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,164 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,204 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,220 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,261 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,278 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,318 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,334 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,374 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,390 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,430 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,574 - INFO - integration_test - Step 4: MPC solve successful
2026-01-26 14:23:07,578 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-26 14:23:07,579 - DEBUG - integration_test - Step 4: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:07,579 - INFO - integration_test - === Applying control at step 4 ===
2026-01-26 14:23:07,579 - INFO - integration_test -   Control dict from planner: {'a': 2.000000015645237, 'w': 0.0}
2026-01-26 14:23:07,579 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:07,579 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:07,580 - INFO - integration_test - Step 4 completed in 0.844s
2026-01-26 14:23:07,592 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-26 14:23:07,594 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.75       0.         0.         2.00000001 0.8       ]
2026-01-26 14:23:07,594 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.138m, drift=0.188m)
2026-01-26 14:23:07,594 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-26 14:23:07,595 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:07,608 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.750, 0.000), path_start=(0.000, 0.000), dist=0.750m
2026-01-26 14:23:07,608 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-26 14:23:07,610 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:07,631 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:07,632 - INFO - integration_test - Warmstart k=0: x0=0.7500000022181466 , y0=0.0 , psi0=0.0 , v0=2.0000000087724756 , spline0=0.8000000026567704 , a0=0.0 , w0=0.0
2026-01-26 14:23:07,632 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:07,633 - INFO - integration_test - Dyn residual k=0: pred=[0.9500000030953941, 0.0, 0.0, 2.0000000087724756, 1.000000003534018], ws=[1.0746845863393106, 0.0, 0.0, 2.0000000087724756, 0.9696969702681241], res=[-0.12468458324391651, 0.0, 0.0, 0.0, 0.030303033265893897], res_norm=1.283e-01
2026-01-26 14:23:07,633 - INFO - integration_test - Dyn residual k=1: pred=[1.2746845872165582, 0.0, 0.0, 2.0000000087724756, 1.1696969711453717], ws=[1.4077840050579873, 0.0, 0.0, 2.0000000087724756, 1.0646464654039547], res=[-0.1330994178414291, 0.0, 0.0, 0.0, 0.10505050574141706], res_norm=1.696e-01
2026-01-26 14:23:07,634 - INFO - integration_test - Dyn residual k=2: pred=[1.6077840059352349, 0.0, 0.0, 2.0000000087724756, 1.2646464662812023], ws=[1.7531129833917158, 0.0, 0.0, 2.0000000087724756, 1.1636363645979115], res=[-0.145328977456481, 0.0, 0.0, 0.0, 0.10101010168329072], res_norm=1.770e-01
2026-01-26 14:23:07,648 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,694 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,710 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,747 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,763 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,801 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,817 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,855 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,873 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,914 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,929 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:07,972 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:07,990 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,034 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,052 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,096 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,112 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,152 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,168 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,207 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,222 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,262 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,405 - INFO - integration_test - Step 5: MPC solve successful
2026-01-26 14:23:08,409 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-26 14:23:08,409 - DEBUG - integration_test - Step 5: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:08,409 - INFO - integration_test - === Applying control at step 5 ===
2026-01-26 14:23:08,409 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018988395, 'w': 0.0}
2026-01-26 14:23:08,409 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:08,409 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:08,410 - INFO - integration_test - Step 5 completed in 0.817s
2026-01-26 14:23:08,422 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-26 14:23:08,423 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.96       0.         0.         2.20000001 1.02      ]
2026-01-26 14:23:08,423 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.042m, drift=0.102m)
2026-01-26 14:23:08,423 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-26 14:23:08,424 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:08,438 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.960, 0.000), path_start=(0.000, 0.000), dist=0.960m
2026-01-26 14:23:08,438 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-26 14:23:08,440 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:08,464 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:08,464 - INFO - integration_test - Warmstart k=0: x0=0.9600000031903361 , y0=0.0 , psi0=0.0 , v0=2.200000010671315 , spline0=1.0200000037239019 , a0=0.0 , w0=0.0
2026-01-26 14:23:08,464 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:08,465 - INFO - integration_test - Dyn residual k=0: pred=[1.1800000042574676, 0.0, 0.0, 2.200000010671315, 1.2400000047910333], ws=[1.2464579671856097, 0.0, 0.0, 2.200000010671315, 1.008484849259157], res=[-0.0664579629281421, 0.0, 0.0, 0.0, 0.2315151555318764], res_norm=2.409e-01
2026-01-26 14:23:08,466 - INFO - integration_test - Dyn residual k=1: pred=[1.4664579682527412, 0.0, 0.0, 2.200000010671315, 1.2284848503262884], ws=[1.524001364654659, 0.0, 0.0, 2.200000010671315, 1.1092929302988768], res=[-0.05754339640191786, 0.0, 0.0, 0.0, 0.11919192002741164], res_norm=1.324e-01
2026-01-26 14:23:08,466 - INFO - integration_test - Dyn residual k=2: pred=[1.7440013657217905, 0.0, 0.0, 2.200000010671315, 1.3292929313660082], ws=[1.7885889254389291, 0.0, 0.0, 2.200000010671315, 1.6193939410727993], res=[-0.04458755971713857, 0.0, 0.0, 0.0, -0.2901010097067911], res_norm=2.935e-01
2026-01-26 14:23:08,480 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,526 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,542 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,583 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,599 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,638 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,656 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,695 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,711 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,750 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,768 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,805 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,820 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,863 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,880 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,921 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,938 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:08,977 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:08,993 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,031 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,047 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,087 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,220 - INFO - integration_test - Step 6: MPC solve successful
2026-01-26 14:23:09,224 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-26 14:23:09,224 - DEBUG - integration_test - Step 6: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:09,224 - INFO - integration_test - === Applying control at step 6 ===
2026-01-26 14:23:09,224 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000135173353, 'w': 0.0}
2026-01-26 14:23:09,224 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:09,224 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:09,225 - INFO - integration_test - Step 6 completed in 0.803s
2026-01-26 14:23:09,239 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-26 14:23:09,240 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.19       0.         0.         2.40000001 1.26      ]
2026-01-26 14:23:09,240 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.034m, drift=0.036m)
2026-01-26 14:23:09,240 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-26 14:23:09,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:09,255 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.190, 0.000), path_start=(0.000, 0.000), dist=1.190m
2026-01-26 14:23:09,255 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-26 14:23:09,258 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:09,285 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:09,285 - INFO - integration_test - Warmstart k=0: x0=1.1900000043250543 , y0=0.0 , psi0=0.0 , v0=2.4000000120230487 , spline0=1.2600000049262068 , a0=0.0 , w0=0.0
2026-01-26 14:23:09,285 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:09,286 - INFO - integration_test - Dyn residual k=0: pred=[1.4300000055273592, 0.0, 0.0, 2.4000000120230487, 1.5000000061285117], ws=[1.4547024593274198, 0.0, 0.0, 2.4000000120230487, 0.8535353543401075], res=[-0.024702453800060642, 0.0, 0.0, 0.0, 0.6464646517884042], res_norm=6.469e-01
2026-01-26 14:23:09,287 - INFO - integration_test - Dyn residual k=1: pred=[1.6947024605297247, 0.0, 0.0, 2.4000000120230487, 1.0935353555424123], ws=[1.8394033605975242, 0.0, 0.0, 2.4000000120230487, 1.8381818201811317], res=[-0.14470090006779945, 0.0, 0.0, 0.0, -0.7446464646387194], res_norm=7.586e-01
2026-01-26 14:23:09,287 - INFO - integration_test - Dyn residual k=2: pred=[2.079403361799829, 0.0, 0.0, 2.4000000120230487, 2.0781818213834367], ws=[2.120950983368579, 0.0, 0.0, 2.4000000120230487, 1.4806060624161166], res=[-0.04154762156875025, 0.0, 0.0, 0.0, 0.5975757589673201], res_norm=5.990e-01
2026-01-26 14:23:09,301 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,350 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,365 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,407 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,423 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,464 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,481 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,522 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,537 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,576 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,592 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,632 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,648 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,689 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,705 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,745 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,760 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,798 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,813 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,852 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:09,868 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:09,905 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,032 - INFO - integration_test - Step 7: MPC solve successful
2026-01-26 14:23:10,036 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-26 14:23:10,036 - DEBUG - integration_test - Step 7: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:10,036 - INFO - integration_test - === Applying control at step 7 ===
2026-01-26 14:23:10,036 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000065609416, 'w': 0.0}
2026-01-26 14:23:10,037 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:10,037 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:10,038 - INFO - integration_test - Step 7 completed in 0.798s
2026-01-26 14:23:10,053 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-26 14:23:10,054 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.44000001 0.         0.         2.60000001 1.52000001]
2026-01-26 14:23:10,054 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.091m, drift=0.011m)
2026-01-26 14:23:10,054 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-26 14:23:10,055 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:10,069 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.440, 0.000), path_start=(0.000, 0.000), dist=1.440m
2026-01-26 14:23:10,069 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-26 14:23:10,071 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:10,094 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:10,094 - INFO - integration_test - Warmstart k=0: x0=1.4400000055601638 , y0=0.0 , psi0=0.0 , v0=2.6000000126791427 , spline0=1.520000006194121 , a0=0.0 , w0=0.0
2026-01-26 14:23:10,094 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:10,095 - INFO - integration_test - Dyn residual k=0: pred=[1.700000006828078, 0.0, 0.0, 2.6000000126791427, 1.7800000074620352], ws=[1.8127513959543613, 0.0, 0.0, 2.6000000126791427, 1.8490909111260097], res=[-0.11275138912628324, 0.0, 0.0, 0.0, -0.06909090366397441], res_norm=1.322e-01
2026-01-26 14:23:10,096 - INFO - integration_test - Dyn residual k=1: pred=[2.0727513972222757, 0.0, 0.0, 2.6000000126791427, 2.109090912393924], ws=[2.215707906456513, 0.0, 0.0, 2.6000000126791427, 1.9200000023808954], res=[-0.1429565092342373, 0.0, 0.0, 0.0, 0.1890909100130287], res_norm=2.370e-01
2026-01-26 14:23:10,097 - INFO - integration_test - Dyn residual k=2: pred=[2.4757079077244275, 0.0, 0.0, 2.6000000126791427, 2.18000000364881], ws=[2.6625625248488918, 0.0, 0.0, 2.6000000126791427, 2.507070710504317], res=[-0.18685461712446427, 0.0, 0.0, 0.0, -0.327070706855507], res_norm=3.767e-01
2026-01-26 14:23:10,110 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,156 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,172 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,210 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,226 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,265 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,280 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,318 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,333 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,370 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,385 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,422 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,438 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,477 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,492 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,532 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,547 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,611 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,636 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,678 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,694 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,731 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,856 - INFO - integration_test - Step 8: MPC solve successful
2026-01-26 14:23:10,860 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-26 14:23:10,860 - DEBUG - integration_test - Step 8: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:10,860 - INFO - integration_test - === Applying control at step 8 ===
2026-01-26 14:23:10,860 - INFO - integration_test -   Control dict from planner: {'a': 2.00000000272603, 'w': 0.0}
2026-01-26 14:23:10,860 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:10,860 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:10,861 - INFO - integration_test - Step 8 completed in 0.808s
2026-01-26 14:23:10,874 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-26 14:23:10,874 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.71000001 0.         0.         2.80000001 1.80000001]
2026-01-26 14:23:10,875 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.127m, drift=0.037m)
2026-01-26 14:23:10,875 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-26 14:23:10,875 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:10,889 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.710, 0.000), path_start=(0.000, 0.000), dist=1.710m
2026-01-26 14:23:10,889 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-26 14:23:10,891 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:10,913 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:10,913 - INFO - integration_test - Warmstart k=0: x0=1.7100000068417083 , y0=0.0 , psi0=0.0 , v0=2.8000000129517457 , spline0=1.8000000074892957 , a0=0.0 , w0=0.0
2026-01-26 14:23:10,913 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:10,914 - INFO - integration_test - Dyn residual k=0: pred=[1.990000008136883, 0.0, 0.0, 2.8000000129517457, 2.08000000878447], ws=[2.093938110365265, 0.0, 0.0, 2.8000000129517457, 1.5018181836815543], res=[-0.10393810222838207, 0.0, 0.0, 0.0, 0.5781818251029158], res_norm=5.874e-01
2026-01-26 14:23:10,914 - INFO - integration_test - Dyn residual k=1: pred=[2.3739381116604394, 0.0, 0.0, 2.8000000129517457, 1.781818184976729], ws=[2.513152643948753, 0.0, 0.0, 2.8000000129517457, 2.453333336693215], res=[-0.13921453228831338, 0.0, 0.0, 0.0, -0.6715151517164859], res_norm=6.858e-01
2026-01-26 14:23:10,915 - INFO - integration_test - Dyn residual k=2: pred=[2.7931526452439273, 0.0, 0.0, 2.8000000129517457, 2.7333333379883893], ws=[2.98363558921934, 0.0, 0.0, 2.8000000129517457, 2.392323235885044], res=[-0.19048294397541277, 0.0, 0.0, 0.0, 0.34101010210334515], res_norm=3.906e-01
2026-01-26 14:23:10,928 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:10,974 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:10,989 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,026 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,043 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,085 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,101 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,140 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,155 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,192 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,207 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,245 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,262 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,299 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,315 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,352 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,369 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,408 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,425 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,463 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,478 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,519 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,672 - INFO - integration_test - Step 9: MPC solve successful
2026-01-26 14:23:11,676 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-26 14:23:11,676 - DEBUG - integration_test - Step 9: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:11,676 - INFO - integration_test - === Applying control at step 9 ===
2026-01-26 14:23:11,676 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019364516, 'w': 0.0}
2026-01-26 14:23:11,677 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:11,677 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:11,678 - INFO - integration_test - Step 9 completed in 0.803s
2026-01-26 14:23:11,691 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-26 14:23:11,691 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[2.00000001 0.         0.         3.00000001 2.10000001]
2026-01-26 14:23:11,692 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.143m, drift=0.043m)
2026-01-26 14:23:11,692 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-26 14:23:11,692 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:11,705 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(2.000, 0.000), path_start=(0.000, 0.000), dist=2.000m
2026-01-26 14:23:11,705 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-26 14:23:11,708 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:11,730 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:11,730 - INFO - integration_test - Warmstart k=0: x0=2.0000000082337053 , y0=0.0 , psi0=0.0 , v0=3.0000000148881973 , spline0=2.1000000089781157 , a0=0.0 , w0=0.0
2026-01-26 14:23:11,730 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:11,731 - INFO - integration_test - Dyn residual k=0: pred=[2.300000009722525, 0.0, 0.0, 3.0000000148881973, 2.4000000104669352], ws=[2.4115959342654985, 0.0, 0.0, 3.0, 2.018181820630395], res=[-0.11159592454297362, 0.0, 0.0, 1.4888197341633713e-08, 0.38181818983654026], res_norm=3.978e-01
2026-01-26 14:23:11,732 - INFO - integration_test - Dyn residual k=1: pred=[2.7115959342654983, 0.0, 0.0, 3.0, 2.318181820630395], ws=[2.871006503227623, 0.0, 0.0, 3.0, 2.800000003264769], res=[-0.1594105689621248, 0.0, 0.0, 0.0, -0.48181818263437437], res_norm=5.075e-01
2026-01-26 14:23:11,733 - INFO - integration_test - Dyn residual k=2: pred=[3.171006503227623, 0.0, 0.0, 3.0, 3.1000000032647694], ws=[3.2611321763777474, 0.0, 0.0, 3.0, 2.909090912355679], res=[-0.09012567315012454, 0.0, 0.0, 0.0, 0.19090909090909047], res_norm=2.111e-01
2026-01-26 14:23:11,746 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,792 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,807 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,845 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,861 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,899 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,914 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:11,952 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:11,966 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,004 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,019 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,057 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,073 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,113 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,128 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,166 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,181 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,219 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,234 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,273 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,288 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,325 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,445 - INFO - integration_test - Step 10: MPC solve successful
2026-01-26 14:23:12,449 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-26 14:23:12,450 - DEBUG - integration_test - Step 10: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:12,450 - INFO - integration_test - === Applying control at step 10 ===
2026-01-26 14:23:12,450 - INFO - integration_test -   Control dict from planner: {'a': 1.5068261803460425e-07, 'w': 0.0}
2026-01-26 14:23:12,450 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:12,450 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:12,451 - INFO - integration_test - Step 10 completed in 0.760s
2026-01-26 14:23:12,466 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-26 14:23:12,466 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.30000001 0.         0.         3.00000003 2.40000001]
2026-01-26 14:23:12,467 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.149m, drift=0.049m)
2026-01-26 14:23:12,467 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-26 14:23:12,467 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:12,480 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.300, 0.000), path_start=(0.000, 0.000), dist=2.300m
2026-01-26 14:23:12,480 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-26 14:23:12,482 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:12,504 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:12,504 - INFO - integration_test - Warmstart k=0: x0=2.300000010475938 , y0=0.0 , psi0=0.0 , v0=3.000000029956459 , spline0=2.4000000119737614 , a0=0.0 , w0=0.0
2026-01-26 14:23:12,504 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:12,505 - INFO - integration_test - Dyn residual k=0: pred=[2.600000013471584, 0.0, 0.0, 3.000000029956459, 2.7000000149694072], ws=[2.7065537623778035, 0.0, 0.0, 3.0, 2.1000000032655715], res=[-0.1065537489062196, 0.0, 0.0, 2.995645909109612e-08, 0.6000000117038358], res_norm=6.094e-01
2026-01-26 14:23:12,505 - INFO - integration_test - Dyn residual k=1: pred=[3.0065537623778034, 0.0, 0.0, 3.0, 2.4000000032655713], ws=[3.158636371604434, 0.0, 0.0, 3.0, 2.66666667065792], res=[-0.15208260922663053, 0.0, 0.0, 0.0, -0.2666666673923488], res_norm=3.070e-01
2026-01-26 14:23:12,506 - INFO - integration_test - Dyn residual k=2: pred=[3.4586363716044337, 0.0, 0.0, 3.0, 2.9666666706579203], ws=[3.538112076605639, 0.0, 0.0, 3.0, 3.437373742332568], res=[-0.07947570500120538, 0.0, 0.0, 0.0, -0.47070707167464754], res_norm=4.774e-01
2026-01-26 14:23:12,520 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,566 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,581 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,619 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,635 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,674 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,689 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,726 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,741 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,779 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,793 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,830 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,845 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,884 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,898 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,936 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:12,953 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:12,991 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,006 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,044 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,060 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,100 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,220 - INFO - integration_test - Step 11: MPC solve successful
2026-01-26 14:23:13,224 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-26 14:23:13,224 - DEBUG - integration_test - Step 11: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:13,224 - INFO - integration_test - === Applying control at step 11 ===
2026-01-26 14:23:13,225 - INFO - integration_test -   Control dict from planner: {'a': 1.4644628134267994e-08, 'w': 0.0}
2026-01-26 14:23:13,225 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:13,225 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:13,226 - INFO - integration_test - Step 11 completed in 0.759s
2026-01-26 14:23:13,239 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-26 14:23:13,240 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.60000001 0.         0.         3.00000003 2.70000002]
2026-01-26 14:23:13,241 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.151m, drift=0.251m)
2026-01-26 14:23:13,241 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-26 14:23:13,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:13,255 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.600, 0.000), path_start=(0.000, 0.000), dist=2.600m
2026-01-26 14:23:13,255 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-26 14:23:13,257 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:13,280 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:13,280 - INFO - integration_test - Warmstart k=0: x0=2.600000013544807 , y0=0.0 , psi0=0.0 , v0=3.000000031420922 , spline0=2.7000000151158536 , a0=0.0 , w0=0.0
2026-01-26 14:23:13,280 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:13,281 - INFO - integration_test - Dyn residual k=0: pred=[2.9000000166868993, 0.0, 0.0, 3.000000031420922, 3.000000018257946], ws=[3.0015115911902166, 0.0, 0.0, 3.0, 2.8282828336268167], res=[-0.10151157450331727, 0.0, 0.0, 3.1420921864366846e-08, 0.17171718463112917], res_norm=1.995e-01
2026-01-26 14:23:13,282 - INFO - integration_test - Dyn residual k=1: pred=[3.3015115911902164, 0.0, 0.0, 3.0, 3.128282833626817], ws=[3.446266240497463, 0.0, 0.0, 3.0, 3.1858585916606303], res=[-0.14475464930724646, 0.0, 0.0, 0.0, -0.05757575803381343], res_norm=1.558e-01
2026-01-26 14:23:13,283 - INFO - integration_test - Dyn residual k=2: pred=[3.7462662404974627, 0.0, 0.0, 3.0, 3.48585859166063], ws=[3.815091977082498, 0.0, 0.0, 3.0, 3.3010101068121456], res=[-0.0688257365850351, 0.0, 0.0, 0.0, 0.1848484848484846], res_norm=1.972e-01
2026-01-26 14:23:13,296 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,342 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,357 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,400 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,418 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,461 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,481 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,524 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,542 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,583 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,601 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,641 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,658 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,701 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,718 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,760 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,775 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,814 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,830 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,869 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:13,884 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:13,924 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,044 - INFO - integration_test - Step 12: MPC solve successful
2026-01-26 14:23:14,048 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-26 14:23:14,049 - DEBUG - integration_test - Step 12: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:14,049 - INFO - integration_test - === Applying control at step 12 ===
2026-01-26 14:23:14,049 - INFO - integration_test -   Control dict from planner: {'a': -5.21272128782592e-09, 'w': 0.0}
2026-01-26 14:23:14,049 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:14,049 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:14,050 - INFO - integration_test - Step 12 completed in 0.810s
2026-01-26 14:23:14,066 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-26 14:23:14,067 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.90000002 0.         0.         3.00000003 3.00000002]
2026-01-26 14:23:14,067 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.145m, drift=0.245m)
2026-01-26 14:23:14,068 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-26 14:23:14,068 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:14,081 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.900, 0.000), path_start=(0.000, 0.000), dist=2.900m
2026-01-26 14:23:14,081 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-26 14:23:14,084 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:14,106 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:14,106 - INFO - integration_test - Warmstart k=0: x0=2.9000000166608357 , y0=0.0 , psi0=0.0 , v0=3.00000003089965 , spline0=3.0000000182058186 , a0=0.0 , w0=0.0
2026-01-26 14:23:14,106 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:14,106 - INFO - integration_test - Dyn residual k=0: pred=[3.2000000197508007, 0.0, 0.0, 3.00000003089965, 3.3000000212957836], ws=[3.2964694199707845, 0.0, 0.0, 3.0, 2.9343434407798346], res=[-0.09646940021998374, 0.0, 0.0, 3.089964994984484e-08, 0.36565658051594907], res_norm=3.782e-01
2026-01-26 14:23:14,107 - INFO - integration_test - Dyn residual k=1: pred=[3.5964694199707843, 0.0, 0.0, 3.0, 3.234343440779835], ws=[3.7338961092438288, 0.0, 0.0, 3.0, 3.4747474821033615], res=[-0.13742668927304447, 0.0, 0.0, 0.0, -0.24040404132352666], res_norm=2.769e-01
2026-01-26 14:23:14,108 - INFO - integration_test - Dyn residual k=2: pred=[4.033896109243829, 0.0, 0.0, 3.0, 3.7747474821033613], ws=[4.092071877245823, 0.0, 0.0, 3.0, 3.5959596033154826], res=[-0.058175768001994754, 0.0, 0.0, 0.0, 0.17878787878787872], res_norm=1.880e-01
2026-01-26 14:23:14,121 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,167 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,183 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,220 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,236 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,274 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,289 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,327 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,342 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,380 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,394 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,431 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,446 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,485 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,500 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,547 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,569 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,618 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,634 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,676 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,692 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,732 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:14,858 - INFO - integration_test - Step 13: MPC solve successful
2026-01-26 14:23:14,863 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-26 14:23:14,863 - DEBUG - integration_test - Step 13: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:14,863 - INFO - integration_test - === Applying control at step 13 ===
2026-01-26 14:23:14,863 - INFO - integration_test -   Control dict from planner: {'a': 8.875624437466172e-09, 'w': 0.0}
2026-01-26 14:23:14,863 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:14,863 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:14,864 - INFO - integration_test - Step 13 completed in 0.798s
2026-01-26 14:23:14,879 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-26 14:23:14,880 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[3.20000002 0.         0.         3.00000003 3.30000002]
2026-01-26 14:23:14,881 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.139m, drift=0.239m)
2026-01-26 14:23:14,881 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-26 14:23:14,881 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:14,895 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(3.200, 0.000), path_start=(0.000, 0.000), dist=3.200m
2026-01-26 14:23:14,895 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-26 14:23:14,897 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:14,921 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:14,921 - INFO - integration_test - Warmstart k=0: x0=3.200000019795179 , y0=0.0 , psi0=0.0 , v0=3.0000000317872124 , spline0=3.3000000213845397 , a0=0.0 , w0=0.0
2026-01-26 14:23:14,921 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:14,922 - INFO - integration_test - Dyn residual k=0: pred=[3.5000000229739, 0.0, 0.0, 3.0000000317872124, 3.600000024563261], ws=[3.591427248868357, 0.0, 0.0, 3.0, 3.2141414221336158], res=[-0.09142722589445684, 0.0, 0.0, 3.1787212417810906e-08, 0.3858586024296451], res_norm=3.965e-01
2026-01-26 14:23:14,923 - INFO - integration_test - Dyn residual k=1: pred=[3.891427248868357, 0.0, 0.0, 3.0, 3.5141414221336156], ws=[4.021525978250628, 0.0, 0.0, 3.0, 3.7757575848298046], res=[-0.13009872938227085, 0.0, 0.0, 0.0, -0.26161616269618904], res_norm=2.922e-01
2026-01-26 14:23:14,923 - INFO - integration_test - Dyn residual k=2: pred=[4.3215259782506275, 0.0, 0.0, 3.0, 4.075757584829804], ws=[4.507827288082112, 0.0, 0.0, 3.0, 4.367676777829024], res=[-0.1863013098314843, 0.0, 0.0, 0.0, -0.2919191929992193], res_norm=3.463e-01
2026-01-26 14:23:14,937 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:14,985 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,001 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,040 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,057 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,098 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,113 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,151 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,166 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,203 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,217 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,256 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,272 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,309 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,324 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,361 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,376 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,414 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,428 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,467 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,482 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,520 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,639 - INFO - integration_test - Step 14: MPC solve successful
2026-01-26 14:23:15,644 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-26 14:23:15,644 - DEBUG - integration_test - Step 14: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:15,644 - INFO - integration_test - === Applying control at step 14 ===
2026-01-26 14:23:15,644 - INFO - integration_test -   Control dict from planner: {'a': -5.294414259345647e-09, 'w': 0.0}
2026-01-26 14:23:15,644 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:15,644 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:15,645 - INFO - integration_test - Step 14 completed in 0.765s
2026-01-26 14:23:15,661 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-26 14:23:15,661 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.50000002 0.         0.         3.00000003 3.60000002]
2026-01-26 14:23:15,662 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.133m, drift=0.233m)
2026-01-26 14:23:15,662 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-26 14:23:15,662 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:15,676 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.500, 0.000), path_start=(0.000, 0.000), dist=3.500m
2026-01-26 14:23:15,676 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-26 14:23:15,678 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:15,699 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:15,699 - INFO - integration_test - Warmstart k=0: x0=3.500000022947428 , y0=0.0 , psi0=0.0 , v0=3.000000031257771 , spline0=3.600000024510317 , a0=0.0 , w0=0.0
2026-01-26 14:23:15,700 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:15,700 - INFO - integration_test - Dyn residual k=0: pred=[3.800000026073205, 0.0, 0.0, 3.000000031257771, 3.900000027636094], ws=[3.886385077714491, 0.0, 0.0, 3.0, 3.3262626354230473], res=[-0.08638505164128585, 0.0, 0.0, 3.12577710381845e-08, 0.5737373922130469], res_norm=5.802e-01
2026-01-26 14:23:15,701 - INFO - integration_test - Dyn residual k=1: pred=[4.186385077714491, 0.0, 0.0, 3.0, 3.626262635423047], ws=[4.309155847105209, 0.0, 0.0, 3.0, 4.088888899782363], res=[-0.1227707693907174, 0.0, 0.0, 0.0, -0.462626264359316], res_norm=4.786e-01
2026-01-26 14:23:15,702 - INFO - integration_test - Dyn residual k=2: pred=[4.6091558471052085, 0.0, 0.0, 3.0, 4.388888899782363], ws=[4.784807188415636, 0.0, 0.0, 3.0, 4.222222233115697], res=[-0.17565134131042726, 0.0, 0.0, 0.0, 0.16666666666666607], res_norm=2.421e-01
2026-01-26 14:23:15,716 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,762 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,777 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,815 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,830 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,868 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,884 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,922 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,937 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:15,974 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:15,989 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,027 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,042 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,085 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,102 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,140 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,155 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,193 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,208 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,247 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,264 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,302 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,423 - INFO - integration_test - Step 15: MPC solve successful
2026-01-26 14:23:16,428 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-26 14:23:16,428 - DEBUG - integration_test - Step 15: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:16,428 - INFO - integration_test - === Applying control at step 15 ===
2026-01-26 14:23:16,428 - INFO - integration_test -   Control dict from planner: {'a': -5.0730113170294324e-09, 'w': 0.0}
2026-01-26 14:23:16,428 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:16,428 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:16,429 - INFO - integration_test - Step 15 completed in 0.768s
2026-01-26 14:23:16,443 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-26 14:23:16,444 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.80000003 0.         0.         3.00000003 3.90000003]
2026-01-26 14:23:16,444 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.127m, drift=0.227m)
2026-01-26 14:23:16,444 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-26 14:23:16,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:16,458 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.800, 0.000), path_start=(0.000, 0.000), dist=3.800m
2026-01-26 14:23:16,458 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-26 14:23:16,460 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:16,483 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:16,483 - INFO - integration_test - Warmstart k=0: x0=3.80000002604784 , y0=0.0 , psi0=0.0 , v0=3.0000000307504697 , spline0=3.900000027585364 , a0=0.0 , w0=0.0
2026-01-26 14:23:16,483 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:16,484 - INFO - integration_test - Dyn residual k=0: pred=[4.100000029122887, 0.0, 0.0, 3.0000000307504697, 4.200000030660411], ws=[4.18134290646741, 0.0, 0.0, 3.0, 3.624242435109386], res=[-0.0813428773445235, 0.0, 0.0, 3.075046972611517e-08, 0.5757575955510252], res_norm=5.815e-01
2026-01-26 14:23:16,485 - INFO - integration_test - Dyn residual k=1: pred=[4.48134290646741, 0.0, 0.0, 3.0, 3.9242424351093863], ws=[4.596785715806438, 0.0, 0.0, 3.0, 4.606060619435328], res=[-0.11544280933902762, 0.0, 0.0, 0.0, -0.6818181843259419], res_norm=6.915e-01
2026-01-26 14:23:16,486 - INFO - integration_test - Dyn residual k=2: pred=[4.896785715806438, 0.0, 0.0, 3.0, 4.906060619435328], ws=[5.061787088508408, 0.0, 0.0, 3.0, 4.949494963426951], res=[-0.1650013727019708, 0.0, 0.0, 0.0, -0.04343434399162316], res_norm=1.706e-01
2026-01-26 14:23:16,499 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,545 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,560 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,599 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,615 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,654 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,670 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,713 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,729 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,768 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,782 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,821 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,835 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,875 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,890 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,929 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,943 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:16,981 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:16,996 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,034 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,049 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,090 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,213 - INFO - integration_test - Step 16: MPC solve successful
2026-01-26 14:23:17,217 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-26 14:23:17,217 - DEBUG - integration_test - Step 16: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:17,217 - INFO - integration_test - === Applying control at step 16 ===
2026-01-26 14:23:17,217 - INFO - integration_test -   Control dict from planner: {'a': -1.6886751330603743e-09, 'w': 0.0}
2026-01-26 14:23:17,217 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:17,217 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:17,218 - INFO - integration_test - Step 16 completed in 0.775s
2026-01-26 14:23:17,232 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-26 14:23:17,232 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[4.10000003 0.         0.         3.00000003 4.20000003]
2026-01-26 14:23:17,233 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.120m, drift=0.220m)
2026-01-26 14:23:17,233 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-26 14:23:17,233 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:17,246 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(4.100, 0.000), path_start=(0.000, 0.000), dist=4.100m
2026-01-26 14:23:17,246 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-26 14:23:17,248 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:17,271 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:17,271 - INFO - integration_test - Warmstart k=0: x0=4.100000029114444 , y0=0.0 , psi0=0.0 , v0=3.000000030581602 , spline0=4.200000030643524 , a0=0.0 , w0=0.0
2026-01-26 14:23:17,271 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:17,272 - INFO - integration_test - Dyn residual k=0: pred=[4.400000032172604, 0.0, 0.0, 3.000000030581602, 4.500000033701685], ws=[4.476300735178763, 0.0, 0.0, 3.0, 4.126262639572439], res=[-0.07630070300615976, 0.0, 0.0, 3.0581602139534425e-08, 0.3737373941292459], res_norm=3.814e-01
2026-01-26 14:23:17,273 - INFO - integration_test - Dyn residual k=1: pred=[4.776300735178763, 0.0, 0.0, 3.0, 4.426262639572439], ws=[4.8844155844548265, 0.0, 0.0, 3.0, 4.25656566987547], res=[-0.1081148492760633, 0.0, 0.0, 0.0, 0.169696969696969], res_norm=2.012e-01
2026-01-26 14:23:17,273 - INFO - integration_test - Dyn residual k=2: pred=[5.184415584454826, 0.0, 0.0, 3.0, 4.55656566987547], ws=[5.338766988531956, 0.0, 0.0, 3.0, 5.251515182158675], res=[-0.1543514040771301, 0.0, 0.0, 0.0, -0.6949495122832055], res_norm=7.119e-01
2026-01-26 14:23:17,287 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,333 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,349 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,388 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,403 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,442 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,460 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,500 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,515 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,553 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,567 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,605 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,620 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,658 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,674 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,715 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,731 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,769 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,784 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,822 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,837 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:17,875 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:17,994 - INFO - integration_test - Step 17: MPC solve successful
2026-01-26 14:23:17,999 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-26 14:23:17,999 - DEBUG - integration_test - Step 17: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:17,999 - INFO - integration_test - === Applying control at step 17 ===
2026-01-26 14:23:17,999 - INFO - integration_test -   Control dict from planner: {'a': -1.6230533574342795e-09, 'w': 0.0}
2026-01-26 14:23:17,999 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:17,999 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:18,000 - INFO - integration_test - Step 17 completed in 0.768s
2026-01-26 14:23:18,012 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-26 14:23:18,013 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[4.40000003 0.         0.         3.00000003 4.50000003]
2026-01-26 14:23:18,014 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.114m, drift=0.214m)
2026-01-26 14:23:18,014 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-26 14:23:18,014 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:18,027 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(4.400, 0.000), path_start=(0.000, 0.000), dist=4.400m
2026-01-26 14:23:18,027 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-26 14:23:18,029 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:18,051 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:18,051 - INFO - integration_test - Warmstart k=0: x0=4.400000032164488 , y0=0.0 , psi0=0.0 , v0=3.000000030419297 , spline0=4.500000033685454 , a0=0.0 , w0=0.0
2026-01-26 14:23:18,051 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:18,052 - INFO - integration_test - Dyn residual k=0: pred=[4.700000035206418, 0.0, 0.0, 3.000000030419297, 4.8000000367273845], ws=[4.77125856386031, 0.0, 0.0, 3.0, 4.652525268517336], res=[-0.0712585286538916, 0.0, 0.0, 3.0419296859207634e-08, 0.14747476821004835], res_norm=1.638e-01
2026-01-26 14:23:18,053 - INFO - integration_test - Dyn residual k=1: pred=[5.07125856386031, 0.0, 0.0, 3.0, 4.952525268517336], ws=[5.172045453054156, 0.0, 0.0, 3.0, 4.544444478129899], res=[-0.10078688919384593, 0.0, 0.0, 0.0, 0.4080807903874373], res_norm=4.203e-01
2026-01-26 14:23:18,053 - INFO - integration_test - Dyn residual k=2: pred=[5.472045453054156, 0.0, 0.0, 3.0, 4.8444444781298985], ws=[5.615746888478464, 0.0, 0.0, 3.0, 5.551515185200605], res=[-0.14370143542430824, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.215e-01
2026-01-26 14:23:18,068 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,116 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,132 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,170 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,186 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,224 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,239 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,278 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,293 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,331 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,346 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,384 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,399 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,437 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,453 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,492 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,508 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,560 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,581 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,626 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,642 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,682 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,802 - INFO - integration_test - Step 18: MPC solve successful
2026-01-26 14:23:18,807 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-26 14:23:18,807 - DEBUG - integration_test - Step 18: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:18,807 - INFO - integration_test - === Applying control at step 18 ===
2026-01-26 14:23:18,807 - INFO - integration_test -   Control dict from planner: {'a': -5.058105766027138e-10, 'w': 0.0}
2026-01-26 14:23:18,807 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:18,807 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:18,808 - INFO - integration_test - Step 18 completed in 0.795s
2026-01-26 14:23:18,821 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-26 14:23:18,822 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.70000004 0.         0.         3.00000003 4.80000004]
2026-01-26 14:23:18,822 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.108m, drift=0.208m)
2026-01-26 14:23:18,822 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-26 14:23:18,823 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:18,836 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.700, 0.000), path_start=(0.000, 0.000), dist=4.700m
2026-01-26 14:23:18,836 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-26 14:23:18,838 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:18,861 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:18,861 - INFO - integration_test - Warmstart k=0: x0=4.700000035203889 , y0=0.0 , psi0=0.0 , v0=3.000000030368716 , spline0=4.800000036722326 , a0=0.0 , w0=0.0
2026-01-26 14:23:18,861 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:18,863 - INFO - integration_test - Dyn residual k=0: pred=[5.000000038240761, 0.0, 0.0, 3.000000030368716, 5.100000039759198], ws=[5.066216392529076, 0.0, 0.0, 3.0, 4.948484885207175], res=[-0.06621635428831496, 0.0, 0.0, 3.036871598638413e-08, 0.15151515455202347], res_norm=1.654e-01
2026-01-26 14:23:18,863 - INFO - integration_test - Dyn residual k=1: pred=[5.366216392529076, 0.0, 0.0, 3.0, 5.248484885207175], ws=[5.459675321637599, 0.0, 0.0, 3.0, 4.844444481166771], res=[-0.09345892910852349, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.147e-01
2026-01-26 14:23:18,864 - INFO - integration_test - Dyn residual k=2: pred=[5.759675321637599, 0.0, 0.0, 3.0, 5.1444444811667704], ws=[5.8927267884045715, 0.0, 0.0, 3.0, 5.851515188237477], res=[-0.13305146676697266, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.195e-01
2026-01-26 14:23:18,878 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,925 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,940 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:18,979 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:18,994 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,032 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,047 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,088 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,103 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,142 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,157 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,195 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,211 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,250 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,265 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,304 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,319 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,359 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,374 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,412 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,427 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,465 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,589 - INFO - integration_test - Step 19: MPC solve successful
2026-01-26 14:23:19,593 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-26 14:23:19,593 - DEBUG - integration_test - Step 19: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:19,593 - INFO - integration_test - === Applying control at step 19 ===
2026-01-26 14:23:19,593 - INFO - integration_test -   Control dict from planner: {'a': -5.9032090172302255e-09, 'w': 0.0}
2026-01-26 14:23:19,593 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:19,593 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:19,595 - INFO - integration_test - Step 19 completed in 0.773s
2026-01-26 14:23:19,607 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-26 14:23:19,608 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[5.00000004 0.         0.         3.00000003 5.10000004]
2026-01-26 14:23:19,608 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.102m, drift=0.202m)
2026-01-26 14:23:19,608 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-26 14:23:19,609 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:19,621 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(5.000, 0.000), path_start=(0.000, 0.000), dist=5.000m
2026-01-26 14:23:19,621 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-26 14:23:19,623 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:19,645 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:19,645 - INFO - integration_test - Warmstart k=0: x0=5.000000038211244 , y0=0.0 , psi0=0.0 , v0=3.0000000297783953 , spline0=5.100000039700166 , a0=0.0 , w0=0.0
2026-01-26 14:23:19,645 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:19,646 - INFO - integration_test - Dyn residual k=0: pred=[5.300000041189083, 0.0, 0.0, 3.0000000297783953, 5.4000000426780055], ws=[5.361174221107376, 0.0, 0.0, 3.0, 5.248484888185015], res=[-0.06117417991829299, 0.0, 0.0, 2.97783953051578e-08, 0.1515151544929907], res_norm=1.634e-01
2026-01-26 14:23:19,646 - INFO - integration_test - Dyn residual k=1: pred=[5.661174221107376, 0.0, 0.0, 3.0, 5.548484888185015], ws=[5.7473051900456715, 0.0, 0.0, 3.0, 5.144444484144611], res=[-0.08613096893829564, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.131e-01
2026-01-26 14:23:19,647 - INFO - integration_test - Dyn residual k=2: pred=[6.047305190045671, 0.0, 0.0, 3.0, 5.4444444841446105], ws=[6.169706688031914, 0.0, 0.0, 3.0, 6.151515191215317], res=[-0.12240149798624245, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.176e-01
2026-01-26 14:23:19,661 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,709 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,724 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,764 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,780 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,817 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,833 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,872 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,888 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,926 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:19,941 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:19,985 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,004 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,046 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,062 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,102 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,118 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,157 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,172 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,211 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,226 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,264 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,399 - INFO - integration_test - Step 20: MPC solve successful
2026-01-26 14:23:20,404 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-26 14:23:20,404 - DEBUG - integration_test - Step 20: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:20,404 - INFO - integration_test - === Applying control at step 20 ===
2026-01-26 14:23:20,404 - INFO - integration_test -   Control dict from planner: {'a': 1.7643929600101134e-09, 'w': 0.0}
2026-01-26 14:23:20,404 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:20,404 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:20,405 - INFO - integration_test - Step 20 completed in 0.798s
2026-01-26 14:23:20,419 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-26 14:23:20,421 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[5.30000004 0.         0.         3.00000003 5.40000004]
2026-01-26 14:23:20,421 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.096m, drift=0.196m)
2026-01-26 14:23:20,421 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-26 14:23:20,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:20,435 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(5.300, 0.000), path_start=(0.000, 0.000), dist=5.300m
2026-01-26 14:23:20,435 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-26 14:23:20,438 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:20,460 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:20,460 - INFO - integration_test - Warmstart k=0: x0=5.300000041197905 , y0=0.0 , psi0=0.0 , v0=3.0000000299548346 , spline0=5.40000004269565 , a0=0.0 , w0=0.0
2026-01-26 14:23:20,460 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:20,461 - INFO - integration_test - Dyn residual k=0: pred=[5.600000044193389, 0.0, 0.0, 3.0000000299548346, 5.700000045691134], ws=[5.656132049693442, 0.0, 0.0, 3.0, 5.346464689160296], res=[-0.056132005500052706, 0.0, 0.0, 2.995483461276649e-08, 0.3535353565308377], res_norm=3.580e-01
2026-01-26 14:23:20,462 - INFO - integration_test - Dyn residual k=1: pred=[5.956132049693442, 0.0, 0.0, 3.0, 5.646464689160296], ws=[6.034935058502872, 0.0, 0.0, 3.0, 5.444444487140094], res=[-0.07880300880943025, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.168e-01
2026-01-26 14:23:20,462 - INFO - integration_test - Dyn residual k=2: pred=[6.334935058502872, 0.0, 0.0, 3.0, 5.744444487140094], ws=[6.446686587768495, 0.0, 0.0, 3.0, 6.451515194210801], res=[-0.11175152926562326, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.158e-01
2026-01-26 14:23:20,476 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,523 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,539 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,578 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,593 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,640 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,657 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,696 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,711 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,750 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,765 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,802 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,817 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,855 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,871 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,910 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,925 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:20,965 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:20,980 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,018 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,034 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,076 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,205 - INFO - integration_test - Step 21: MPC solve successful
2026-01-26 14:23:21,210 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-26 14:23:21,210 - DEBUG - integration_test - Step 21: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:21,210 - INFO - integration_test - === Applying control at step 21 ===
2026-01-26 14:23:21,210 - INFO - integration_test -   Control dict from planner: {'a': 2.8037114257978646e-09, 'w': 0.0}
2026-01-26 14:23:21,210 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:21,210 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:21,211 - INFO - integration_test - Step 21 completed in 0.791s
2026-01-26 14:23:21,223 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-26 14:23:21,223 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[5.60000004 0.         0.         3.00000003 5.70000005]
2026-01-26 14:23:21,224 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.090m, drift=0.190m)
2026-01-26 14:23:21,224 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-26 14:23:21,224 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:21,237 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(5.600, 0.000), path_start=(0.000, 0.000), dist=5.600m
2026-01-26 14:23:21,237 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-26 14:23:21,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:21,263 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:21,263 - INFO - integration_test - Warmstart k=0: x0=5.600000044207407 , y0=0.0 , psi0=0.0 , v0=3.000000030235206 , spline0=5.700000045719171 , a0=0.0 , w0=0.0
2026-01-26 14:23:21,264 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:21,264 - INFO - integration_test - Dyn residual k=0: pred=[5.900000047230928, 0.0, 0.0, 3.000000030235206, 6.000000048742692], ws=[5.951089878327326, 0.0, 0.0, 3.0, 5.646464692183817], res=[-0.051089831096398086, 0.0, 0.0, 3.023520589451323e-08, 0.3535353565588748], res_norm=3.572e-01
2026-01-26 14:23:21,265 - INFO - integration_test - Dyn residual k=1: pred=[6.251089878327326, 0.0, 0.0, 3.0, 5.946464692183817], ws=[6.322564927044193, 0.0, 0.0, 3.0, 5.744444490163615], res=[-0.07147504871686738, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.143e-01
2026-01-26 14:23:21,266 - INFO - integration_test - Dyn residual k=2: pred=[6.622564927044193, 0.0, 0.0, 3.0, 6.044444490163615], ws=[6.7236664876419585, 0.0, 0.0, 3.0, 6.751515197234322], res=[-0.10110156059776543, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.143e-01
2026-01-26 14:23:21,279 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,326 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,341 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,379 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,394 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,432 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,446 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,487 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,504 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,544 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,561 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,601 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,616 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,654 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,670 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,708 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,724 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,763 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,779 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,817 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,832 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:21,870 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:21,998 - INFO - integration_test - Step 22: MPC solve successful
2026-01-26 14:23:22,003 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-26 14:23:22,003 - DEBUG - integration_test - Step 22: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:22,003 - INFO - integration_test - === Applying control at step 22 ===
2026-01-26 14:23:22,003 - INFO - integration_test -   Control dict from planner: {'a': -2.934922947484068e-10, 'w': 0.0}
2026-01-26 14:23:22,003 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:22,003 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:22,004 - INFO - integration_test - Step 22 completed in 0.781s
2026-01-26 14:23:22,016 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-26 14:23:22,016 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.90000005 0.         0.         3.00000003 6.00000005]
2026-01-26 14:23:22,017 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.084m, drift=0.184m)
2026-01-26 14:23:22,017 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-26 14:23:22,017 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:22,031 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.900, 0.000), path_start=(0.000, 0.000), dist=5.900m
2026-01-26 14:23:22,031 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-26 14:23:22,033 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:22,056 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:22,056 - INFO - integration_test - Warmstart k=0: x0=5.90000004722946 , y0=0.0 , psi0=0.0 , v0=3.0000000302058565 , spline0=6.000000048739756 , a0=0.0 , w0=0.0
2026-01-26 14:23:22,056 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:22,057 - INFO - integration_test - Dyn residual k=0: pred=[6.200000050250045, 0.0, 0.0, 3.0000000302058565, 6.300000051760342], ws=[6.246047706965717, 0.0, 0.0, 3.0, 5.946464695204402], res=[-0.04604765671567179, 0.0, 0.0, 3.020585648272345e-08, 0.3535353565559394], res_norm=3.565e-01
2026-01-26 14:23:22,058 - INFO - integration_test - Dyn residual k=1: pred=[6.546047706965717, 0.0, 0.0, 3.0, 6.246464695204402], ws=[6.6101947955783285, 0.0, 0.0, 3.0, 6.0444444931842005], res=[-0.06414708861261165, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.120e-01
2026-01-26 14:23:22,059 - INFO - integration_test - Dyn residual k=2: pred=[6.910194795578328, 0.0, 0.0, 3.0, 6.3444444931842], ws=[7.0006463874912415, 0.0, 0.0, 3.0, 7.051515200254907], res=[-0.09045159191291319, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.128e-01
2026-01-26 14:23:22,074 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,122 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,138 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,177 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,192 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,231 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,246 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,285 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,300 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,339 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,353 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,392 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,406 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,444 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,460 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,499 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,515 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,568 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,590 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,634 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,650 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,688 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,810 - INFO - integration_test - Step 23: MPC solve successful
2026-01-26 14:23:22,814 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-26 14:23:22,814 - DEBUG - integration_test - Step 23: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:22,814 - INFO - integration_test - === Applying control at step 23 ===
2026-01-26 14:23:22,814 - INFO - integration_test -   Control dict from planner: {'a': -9.753760166444858e-09, 'w': 0.0}
2026-01-26 14:23:22,814 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:22,814 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:22,815 - INFO - integration_test - Step 23 completed in 0.799s
2026-01-26 14:23:22,828 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-26 14:23:22,828 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[6.20000005 0.         0.         3.00000003 6.30000005]
2026-01-26 14:23:22,829 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.078m, drift=0.178m)
2026-01-26 14:23:22,829 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-26 14:23:22,829 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:22,842 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(6.200, 0.000), path_start=(0.000, 0.000), dist=6.200m
2026-01-26 14:23:22,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-26 14:23:22,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:22,868 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:22,868 - INFO - integration_test - Warmstart k=0: x0=6.200000050201276 , y0=0.0 , psi0=0.0 , v0=3.0000000292304803 , spline0=6.3000000516628045 , a0=0.0 , w0=0.0
2026-01-26 14:23:22,868 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:22,869 - INFO - integration_test - Dyn residual k=0: pred=[6.5000000531243245, 0.0, 0.0, 3.0000000292304803, 6.600000054585853], ws=[6.679781045660441, 0.0, 0.0, 3.0, 6.751515203177956], res=[-0.17978099253611646, 0.0, 0.0, 2.9230480258490843e-08, -0.1515151485921029], res_norm=2.351e-01
2026-01-26 14:23:22,870 - INFO - integration_test - Dyn residual k=1: pred=[6.979781045660441, 0.0, 0.0, 3.0, 7.0515152031779555], ws=[7.09951173865293, 0.0, 0.0, 3.0, 6.849495001157754], res=[-0.11973069299248884, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.348e-01
2026-01-26 14:23:22,871 - INFO - integration_test - Dyn residual k=2: pred=[7.399511738652929, 0.0, 0.0, 3.0, 7.149495001157754], ws=[7.570744835597931, 0.0, 0.0, 3.0, 7.654545506208258], res=[-0.17123309694500133, 0.0, 0.0, 0.0, -0.5050505050505043], res_norm=5.333e-01
2026-01-26 14:23:22,884 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,931 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:22,947 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:22,985 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,001 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,039 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,054 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,095 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,111 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,149 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,164 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,203 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,218 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,257 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,273 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,311 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,325 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,365 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,380 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,418 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,433 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,472 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,594 - INFO - integration_test - Step 24: MPC solve successful
2026-01-26 14:23:23,598 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-26 14:23:23,598 - DEBUG - integration_test - Step 24: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:23,598 - INFO - integration_test - === Applying control at step 24 ===
2026-01-26 14:23:23,598 - INFO - integration_test -   Control dict from planner: {'a': 4.157638326664781e-09, 'w': 0.0}
2026-01-26 14:23:23,598 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:23,598 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:23,599 - INFO - integration_test - Step 24 completed in 0.772s
2026-01-26 14:23:23,613 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-26 14:23:23,614 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[6.50000005 0.         0.         3.00000003 6.60000005]
2026-01-26 14:23:23,614 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.071m, drift=0.171m)
2026-01-26 14:23:23,614 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-26 14:23:23,615 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:23,628 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(6.500, 0.000), path_start=(0.000, 0.000), dist=6.500m
2026-01-26 14:23:23,628 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-26 14:23:23,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:23,652 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:23,652 - INFO - integration_test - Warmstart k=0: x0=6.500000053145112 , y0=0.0 , psi0=0.0 , v0=3.000000029646244 , spline0=6.600000054627429 , a0=0.0 , w0=0.0
2026-01-26 14:23:23,652 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:23,653 - INFO - integration_test - Dyn residual k=0: pred=[6.800000056109736, 0.0, 0.0, 3.000000029646244, 6.900000057592054], ws=[6.974738874182614, 0.0, 0.0, 3.0, 7.0515152061425805], res=[-0.1747388180728775, 0.0, 0.0, 2.964624412626904e-08, -0.1515151485505264], res_norm=2.313e-01
2026-01-26 14:23:23,654 - INFO - integration_test - Dyn residual k=1: pred=[7.274738874182614, 0.0, 0.0, 3.0, 7.35151520614258], ws=[7.38714160701562, 0.0, 0.0, 3.0, 7.149495004122379], res=[-0.11240273283300617, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.312e-01
2026-01-26 14:23:23,654 - INFO - integration_test - Dyn residual k=2: pred=[7.6871416070156195, 0.0, 0.0, 3.0, 7.449495004122379], ws=[7.847724735195507, 0.0, 0.0, 3.0, 7.752525307152681], res=[-0.16058312817988707, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.429e-01
2026-01-26 14:23:23,669 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,716 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,731 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,770 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,786 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,824 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,838 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,877 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,892 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,930 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,945 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:23,983 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:23,998 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,036 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,050 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,090 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,106 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,144 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,159 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,197 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,211 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,249 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,374 - INFO - integration_test - Step 25: MPC solve successful
2026-01-26 14:23:24,379 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-26 14:23:24,379 - DEBUG - integration_test - Step 25: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:24,379 - INFO - integration_test - === Applying control at step 25 ===
2026-01-26 14:23:24,379 - INFO - integration_test -   Control dict from planner: {'a': 1.559675249110624e-09, 'w': 0.0}
2026-01-26 14:23:24,379 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:24,379 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:24,380 - INFO - integration_test - Step 25 completed in 0.767s
2026-01-26 14:23:24,395 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-26 14:23:24,396 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.80000006 0.         0.         3.00000003 6.90000006]
2026-01-26 14:23:24,397 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.065m, drift=0.165m)
2026-01-26 14:23:24,397 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-26 14:23:24,397 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:24,411 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.800, 0.000), path_start=(0.000, 0.000), dist=6.800m
2026-01-26 14:23:24,411 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-26 14:23:24,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:24,436 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:24,436 - INFO - integration_test - Warmstart k=0: x0=6.800000056117535 , y0=0.0 , psi0=0.0 , v0=3.000000029802212 , spline0=6.900000057607651 , a0=0.0 , w0=0.0
2026-01-26 14:23:24,436 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:24,437 - INFO - integration_test - Dyn residual k=0: pred=[7.1000000590977566, 0.0, 0.0, 3.000000029802212, 7.200000060587872], ws=[7.269696702741501, 0.0, 0.0, 3.0, 7.351515209122802], res=[-0.1696966436437446, 0.0, 0.0, 2.980221180948206e-08, -0.15151514853492998], res_norm=2.275e-01
2026-01-26 14:23:24,438 - INFO - integration_test - Dyn residual k=1: pred=[7.569696702741501, 0.0, 0.0, 3.0, 7.651515209122802], ws=[7.674771475426834, 0.0, 0.0, 3.0, 7.4494950071026], res=[-0.10507477268533272, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.277e-01
2026-01-26 14:23:24,438 - INFO - integration_test - Dyn residual k=2: pred=[7.9747714754268335, 0.0, 0.0, 3.0, 7.7494950071026], ws=[8.12470463485877, 0.0, 0.0, 3.0, 7.345454603062195], res=[-0.14993315943193597, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.310e-01
2026-01-26 14:23:24,452 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,499 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,515 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,553 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,569 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,607 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,621 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,660 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,675 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,713 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,728 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,766 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,781 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,819 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,833 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,872 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,887 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,925 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,940 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:24,978 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:24,992 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,030 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,163 - INFO - integration_test - Step 26: MPC solve successful
2026-01-26 14:23:25,167 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-26 14:23:25,167 - DEBUG - integration_test - Step 26: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:25,167 - INFO - integration_test - === Applying control at step 26 ===
2026-01-26 14:23:25,167 - INFO - integration_test -   Control dict from planner: {'a': 2.0467226269166814e-09, 'w': 0.0}
2026-01-26 14:23:25,167 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:25,167 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:25,169 - INFO - integration_test - Step 26 completed in 0.773s
2026-01-26 14:23:25,180 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-26 14:23:25,181 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[7.10000006 0.         0.         3.00000003 7.20000006]
2026-01-26 14:23:25,181 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.059m, drift=0.159m)
2026-01-26 14:23:25,182 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-26 14:23:25,182 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:25,195 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(7.100, 0.000), path_start=(0.000, 0.000), dist=7.100m
2026-01-26 14:23:25,195 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-26 14:23:25,198 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:25,223 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:25,223 - INFO - integration_test - Warmstart k=0: x0=7.10000005910799 , y0=0.0 , psi0=0.0 , v0=3.000000030006884 , spline0=7.200000060608339 , a0=0.0 , w0=0.0
2026-01-26 14:23:25,223 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:25,224 - INFO - integration_test - Dyn residual k=0: pred=[7.4000000621086786, 0.0, 0.0, 3.000000030006884, 7.500000063609027], ws=[7.564654531336159, 0.0, 0.0, 3.0, 7.449495010103289], res=[-0.1646544692274805, 0.0, 0.0, 3.0006884088606967e-08, 0.05050505350573875], res_norm=1.722e-01
2026-01-26 14:23:25,224 - INFO - integration_test - Dyn residual k=1: pred=[7.864654531336159, 0.0, 0.0, 3.0, 7.7494950101032885], ws=[7.9624013438996, 0.0, 0.0, 3.0, 7.7494950101032885], res=[-0.09774681256344131, 0.0, 0.0, 0.0, 0.0], res_norm=9.775e-02
2026-01-26 14:23:25,225 - INFO - integration_test - Dyn residual k=2: pred=[8.262401343899601, 0.0, 0.0, 3.0, 8.04949501010329], ws=[8.401684534621054, 0.0, 0.0, 3.0, 7.645454606062884], res=[-0.13928319072145356, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.274e-01
2026-01-26 14:23:25,238 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,288 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,304 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,343 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,357 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,396 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,410 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,451 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,468 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,508 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,523 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,562 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,576 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,615 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,630 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,669 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,685 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,723 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,739 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,776 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,792 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:25,829 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:25,958 - INFO - integration_test - Step 27: MPC solve successful
2026-01-26 14:23:25,963 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-26 14:23:25,963 - DEBUG - integration_test - Step 27: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:25,963 - INFO - integration_test - === Applying control at step 27 ===
2026-01-26 14:23:25,963 - INFO - integration_test -   Control dict from planner: {'a': 1.464203851862161e-09, 'w': 0.0}
2026-01-26 14:23:25,963 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:25,963 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:25,964 - INFO - integration_test - Step 27 completed in 0.784s
2026-01-26 14:23:25,975 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-26 14:23:25,976 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[7.40000006 0.         0.         3.00000003 7.50000006]
2026-01-26 14:23:25,977 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.053m, drift=0.153m)
2026-01-26 14:23:25,977 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-26 14:23:25,977 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:25,991 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(7.400, 0.000), path_start=(0.000, 0.000), dist=7.400m
2026-01-26 14:23:25,991 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-26 14:23:25,993 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:26,016 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:26,016 - INFO - integration_test - Warmstart k=0: x0=7.400000062116 , y0=0.0 , psi0=0.0 , v0=3.0000000301533043 , spline0=7.50000006362367 , a0=0.0 , w0=0.0
2026-01-26 14:23:26,016 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:26,017 - INFO - integration_test - Dyn residual k=0: pred=[7.70000006513133, 0.0, 0.0, 3.0000000301533043, 7.800000066639001], ws=[7.859612359959373, 0.0, 0.0, 3.0, 7.7494950131186195], res=[-0.15961229482804296, 0.0, 0.0, 3.015330429789742e-08, 0.05050505352038126], res_norm=1.674e-01
2026-01-26 14:23:26,017 - INFO - integration_test - Dyn residual k=1: pred=[8.159612359959374, 0.0, 0.0, 3.0, 8.04949501311862], ws=[8.250031212416912, 0.0, 0.0, 3.0, 8.04949501311862], res=[-0.09041885245753889, 0.0, 0.0, 0.0, 0.0], res_norm=9.042e-02
2026-01-26 14:23:26,018 - INFO - integration_test - Dyn residual k=2: pred=[8.550031212416913, 0.0, 0.0, 3.0, 8.34949501311862], ws=[8.67866443445112, 0.0, 0.0, 3.0, 7.945454609078215], res=[-0.1286332220342068, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.240e-01
2026-01-26 14:23:26,031 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,083 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,101 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,143 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,158 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,196 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,211 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,248 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,263 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,303 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,318 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,356 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,371 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,409 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,424 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,462 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,478 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,515 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,530 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,568 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,583 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,621 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,747 - INFO - integration_test - Step 28: MPC solve successful
2026-01-26 14:23:26,751 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-26 14:23:26,751 - DEBUG - integration_test - Step 28: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:26,752 - INFO - integration_test - === Applying control at step 28 ===
2026-01-26 14:23:26,752 - INFO - integration_test -   Control dict from planner: {'a': 4.3998321637542715e-10, 'w': 0.0}
2026-01-26 14:23:26,752 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:26,752 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:26,753 - INFO - integration_test - Step 28 completed in 0.777s
2026-01-26 14:23:26,766 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-26 14:23:26,767 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[7.70000007 0.         0.         3.00000003 7.80000007]
2026-01-26 14:23:26,767 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.047m, drift=0.147m)
2026-01-26 14:23:26,767 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-26 14:23:26,768 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:26,781 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(7.700, 0.000), path_start=(0.000, 0.000), dist=7.700m
2026-01-26 14:23:26,781 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-26 14:23:26,783 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:26,805 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:26,805 - INFO - integration_test - Warmstart k=0: x0=7.70000006513353 , y0=0.0 , psi0=0.0 , v0=3.0000000301973024 , spline0=7.8000000666434 , a0=0.0 , w0=0.0
2026-01-26 14:23:26,805 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:26,806 - INFO - integration_test - Dyn residual k=0: pred=[8.00000006815326, 0.0, 0.0, 3.0000000301973024, 8.10000006966313], ws=[8.154570188593869, 0.0, 0.0, 3.0, 8.04949501613835], res=[-0.15457012044060825, 0.0, 0.0, 3.0197302436363316e-08, 0.05050505352478041], res_norm=1.626e-01
2026-01-26 14:23:26,807 - INFO - integration_test - Dyn residual k=1: pred=[8.45457018859387, 0.0, 0.0, 3.0, 8.34949501613835], ws=[8.537661080948066, 0.0, 0.0, 3.0, 8.34949501613835], res=[-0.0830908923541962, 0.0, 0.0, 0.0, 0.0], res_norm=8.309e-02
2026-01-26 14:23:26,808 - INFO - integration_test - Dyn residual k=2: pred=[8.837661080948067, 0.0, 0.0, 3.0, 8.649495016138351], ws=[8.95564433429875, 0.0, 0.0, 3.0, 8.245454612097946], res=[-0.11798325335068327, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.209e-01
2026-01-26 14:23:26,821 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,868 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,884 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,922 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,937 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:26,975 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:26,990 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,034 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,055 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,110 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,128 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,169 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,183 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,221 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,236 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,275 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,289 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,327 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,379 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,393 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,431 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,557 - INFO - integration_test - Step 29: MPC solve successful
2026-01-26 14:23:27,561 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-26 14:23:27,562 - DEBUG - integration_test - Step 29: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:27,562 - INFO - integration_test - === Applying control at step 29 ===
2026-01-26 14:23:27,562 - INFO - integration_test -   Control dict from planner: {'a': 1.387158820281637e-10, 'w': 0.0}
2026-01-26 14:23:27,562 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:27,562 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:27,563 - INFO - integration_test - Step 29 completed in 0.797s
2026-01-26 14:23:27,575 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-26 14:23:27,576 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[8.00000007 0.         0.         3.00000003 8.10000007]
2026-01-26 14:23:27,576 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.041m, drift=0.141m)
2026-01-26 14:23:27,576 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-26 14:23:27,577 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:27,589 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(8.000, 0.000), path_start=(0.000, 0.000), dist=8.000m
2026-01-26 14:23:27,589 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-26 14:23:27,592 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:27,614 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:27,614 - INFO - integration_test - Warmstart k=0: x0=8.000000068153954 , y0=0.0 , psi0=0.0 , v0=3.000000030211174 , spline0=8.100000069664517 , a0=0.0 , w0=0.0
2026-01-26 14:23:27,614 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:27,615 - INFO - integration_test - Dyn residual k=0: pred=[8.30000007117507, 0.0, 0.0, 3.000000030211174, 8.400000072685636], ws=[8.449528017231856, 0.0, 0.0, 3.0, 8.349495019159468], res=[-0.14952794605678577, 0.0, 0.0, 3.021117400692219e-08, 0.05050505352616774], res_norm=1.578e-01
2026-01-26 14:23:27,616 - INFO - integration_test - Dyn residual k=1: pred=[8.749528017231857, 0.0, 0.0, 3.0, 8.649495019159469], ws=[8.825290949483577, 0.0, 0.0, 3.0, 8.649495019159469], res=[-0.07576293225172037, 0.0, 0.0, 0.0, 0.0], res_norm=7.576e-02
2026-01-26 14:23:27,617 - INFO - integration_test - Dyn residual k=2: pred=[9.125290949483578, 0.0, 0.0, 3.0, 8.94949501915947], ws=[9.232624234151997, 0.0, 0.0, 3.0, 8.545454615119064], res=[-0.10733328466841918, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.181e-01
2026-01-26 14:23:27,631 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,678 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,732 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,747 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,785 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,800 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,838 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,853 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,892 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,907 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,945 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:27,960 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:27,999 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,014 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,052 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,068 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,108 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,123 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,161 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,176 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,214 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,342 - INFO - integration_test - Step 30: MPC solve successful
2026-01-26 14:23:28,347 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-26 14:23:28,347 - DEBUG - integration_test - Step 30: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:28,347 - INFO - integration_test - === Applying control at step 30 ===
2026-01-26 14:23:28,347 - INFO - integration_test -   Control dict from planner: {'a': 6.062741420812407e-10, 'w': 0.0}
2026-01-26 14:23:28,347 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:28,347 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:28,348 - INFO - integration_test - Step 30 completed in 0.773s
2026-01-26 14:23:28,360 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-26 14:23:28,361 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[8.30000007 0.         0.         3.00000003 8.40000007]
2026-01-26 14:23:28,361 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.035m, drift=0.135m)
2026-01-26 14:23:28,361 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-26 14:23:28,362 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:28,375 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(8.300, 0.000), path_start=(0.000, 0.000), dist=8.300m
2026-01-26 14:23:28,375 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-26 14:23:28,377 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:28,399 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:28,399 - INFO - integration_test - Warmstart k=0: x0=8.300000071178102 , y0=0.0 , psi0=0.0 , v0=3.0000000302718015 , spline0=8.400000072691698 , a0=0.0 , w0=0.0
2026-01-26 14:23:28,399 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:28,400 - INFO - integration_test - Dyn residual k=0: pred=[8.600000074205283, 0.0, 0.0, 3.0000000302718015, 8.70000007571888], ws=[8.74448584587941, 0.0, 0.0, 3.0, 8.649495022186649], res=[-0.1444857716741268, 0.0, 0.0, 3.027180150994013e-08, 0.05050505353223045], res_norm=1.531e-01
2026-01-26 14:23:28,401 - INFO - integration_test - Dyn residual k=1: pred=[9.04448584587941, 0.0, 0.0, 3.0, 8.94949502218665], ws=[9.112920818037145, 0.0, 0.0, 3.0, 8.94949502218665], res=[-0.06843497215773375, 0.0, 0.0, 0.0, 0.0], res_norm=6.843e-02
2026-01-26 14:23:28,402 - INFO - integration_test - Dyn residual k=2: pred=[9.412920818037145, 0.0, 0.0, 3.0, 9.24949502218665], ws=[9.509604134035637, 0.0, 0.0, 3.0, 8.845454618146245], res=[-0.09668331599849189, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.154e-01
2026-01-26 14:23:28,415 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,462 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,478 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,516 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,532 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,570 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,585 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,622 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,638 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,677 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,693 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,731 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,746 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,784 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,800 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,838 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,853 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,893 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,908 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:28,948 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:28,963 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,003 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,155 - INFO - integration_test - Step 31: MPC solve successful
2026-01-26 14:23:29,159 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-26 14:23:29,159 - DEBUG - integration_test - Step 31: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:29,159 - INFO - integration_test - === Applying control at step 31 ===
2026-01-26 14:23:29,159 - INFO - integration_test -   Control dict from planner: {'a': 5.810424137016076e-09, 'w': 0.0}
2026-01-26 14:23:29,159 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:29,159 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:29,160 - INFO - integration_test - Step 31 completed in 0.800s
2026-01-26 14:23:29,175 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-26 14:23:29,175 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[8.60000007 0.         0.         3.00000003 8.70000008]
2026-01-26 14:23:29,176 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.029m, drift=0.129m)
2026-01-26 14:23:29,176 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-26 14:23:29,176 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:29,189 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(8.600, 0.000), path_start=(0.000, 0.000), dist=8.600m
2026-01-26 14:23:29,189 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-26 14:23:29,191 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:29,213 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:29,213 - INFO - integration_test - Warmstart k=0: x0=8.600000074234334 , y0=0.0 , psi0=0.0 , v0=3.000000030852844 , spline0=8.700000075776982 , a0=0.0 , w0=0.0
2026-01-26 14:23:29,213 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:29,213 - INFO - integration_test - Dyn residual k=0: pred=[8.900000077319618, 0.0, 0.0, 3.000000030852844, 9.000000078862266], ws=[9.03944367461635, 0.0, 0.0, 3.0, 8.949495025271933], res=[-0.13944359729673295, 0.0, 0.0, 3.0852843835305066e-08, 0.050505053590333304], res_norm=1.483e-01
2026-01-26 14:23:29,214 - INFO - integration_test - Dyn residual k=1: pred=[9.339443674616351, 0.0, 0.0, 3.0, 9.249495025271933], ws=[9.400550686763387, 0.0, 0.0, 3.0, 9.249495025271933], res=[-0.06110701214703518, 0.0, 0.0, 0.0, 0.0], res_norm=6.111e-02
2026-01-26 14:23:29,215 - INFO - integration_test - Dyn residual k=2: pred=[9.700550686763387, 0.0, 0.0, 3.0, 9.549495025271934], ws=[9.786584034212995, 0.0, 0.0, 3.0, 9.14545462123153], res=[-0.08603334744960733, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.131e-01
2026-01-26 14:23:29,229 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,277 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,293 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,332 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,347 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,386 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,400 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,438 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,452 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,490 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,505 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,542 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,557 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,596 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,611 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,649 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,664 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,702 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,718 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,755 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,770 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:29,808 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:29,937 - INFO - integration_test - Step 32: MPC solve successful
2026-01-26 14:23:29,941 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-26 14:23:29,941 - DEBUG - integration_test - Step 32: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:29,941 - INFO - integration_test - === Applying control at step 32 ===
2026-01-26 14:23:29,941 - INFO - integration_test -   Control dict from planner: {'a': -1.022240942068961e-06, 'w': 0.0}
2026-01-26 14:23:29,941 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:29,941 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:29,942 - INFO - integration_test - Step 32 completed in 0.767s
2026-01-26 14:23:29,955 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-26 14:23:29,956 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[8.90000007 0.         0.         2.99999993 9.00000007]
2026-01-26 14:23:29,957 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.022m, drift=0.122m)
2026-01-26 14:23:29,957 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-26 14:23:29,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:29,970 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(8.900, 0.000), path_start=(0.000, 0.000), dist=8.900m
2026-01-26 14:23:29,970 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-26 14:23:29,972 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:29,994 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:29,994 - INFO - integration_test - Warmstart k=0: x0=8.900000072208414 , y0=0.0 , psi0=0.0 , v0=2.9999999286287498 , spline0=9.000000068639856 , a0=0.0 , w0=0.0
2026-01-26 14:23:29,994 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:29,995 - INFO - integration_test - Dyn residual k=0: pred=[9.200000065071288, 0.0, 0.0, 2.9999999286287498, 9.30000006150273], ws=[9.334401477612168, 0.0, 0.0, 2.9999999286287498, 9.24949501099768], res=[-0.13440141254088012, 0.0, 0.0, 0.0, 0.050505050505050164], res_norm=1.436e-01
2026-01-26 14:23:29,996 - INFO - integration_test - Dyn residual k=1: pred=[9.634401470475042, 0.0, 0.0, 2.9999999286287498, 9.549495003860555], ws=[9.688180499724128, 0.0, 0.0, 2.9999999286287498, 9.549495003860555], res=[-0.0537790292490854, 0.0, 0.0, 0.0, 0.0], res_norm=5.378e-02
2026-01-26 14:23:29,996 - INFO - integration_test - Dyn residual k=2: pred=[9.988180492587002, 0.0, 0.0, 2.9999999286287498, 9.849494996723429], ws=[10.063563834989427, 0.0, 0.0, 2.9999999286287498, 9.445454592683024], res=[-0.07538334240242506, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.110e-01
2026-01-26 14:23:30,009 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,056 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,072 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,111 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,127 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,166 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,181 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,218 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,234 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,272 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,287 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,325 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,340 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,377 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,392 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,430 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,445 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,483 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,499 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,537 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,552 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,591 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,712 - INFO - integration_test - Step 33: MPC solve successful
2026-01-26 14:23:30,716 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-26 14:23:30,717 - DEBUG - integration_test - Step 33: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:30,717 - INFO - integration_test - === Applying control at step 33 ===
2026-01-26 14:23:30,717 - INFO - integration_test -   Control dict from planner: {'a': -2.7230888130288654e-08, 'w': 0.0}
2026-01-26 14:23:30,717 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:30,717 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:30,718 - INFO - integration_test - Step 33 completed in 0.762s
2026-01-26 14:23:30,730 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-26 14:23:30,731 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[9.20000006 0.         0.         2.99999993 9.30000006]
2026-01-26 14:23:30,732 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.016m, drift=0.116m)
2026-01-26 14:23:30,732 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-26 14:23:30,732 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:30,745 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(9.200, 0.000), path_start=(0.000, 0.000), dist=9.200m
2026-01-26 14:23:30,745 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-26 14:23:30,747 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:30,769 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:30,769 - INFO - integration_test - Warmstart k=0: x0=9.200000064935134 , y0=0.0 , psi0=0.0 , v0=2.999999925905661 , spline0=9.300000061230422 , a0=0.0 , w0=0.0
2026-01-26 14:23:30,769 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:30,770 - INFO - integration_test - Dyn residual k=0: pred=[9.5000000575257, 0.0, 0.0, 2.999999925905661, 9.600000053820988], ws=[9.629359286920835, 0.0, 0.0, 2.999999925905661, 9.549495003315938], res=[-0.1293592293951349, 0.0, 0.0, 0.0, 0.050505050505050164], res_norm=1.389e-01
2026-01-26 14:23:30,771 - INFO - integration_test - Dyn residual k=1: pred=[9.9293592795114, 0.0, 0.0, 2.999999925905661, 9.849494995906504], ws=[9.975810335798556, 0.0, 0.0, 2.999999925905661, 9.849494995906504], res=[-0.04645105628715562, 0.0, 0.0, 0.0, 0.0], res_norm=4.645e-02
2026-01-26 14:23:30,771 - INFO - integration_test - Dyn residual k=2: pred=[10.275810328389122, 0.0, 0.0, 2.999999925905661, 10.14949498849707], ws=[10.340543683296765, 0.0, 0.0, 2.999999925905661, 9.753535374415275], res=[-0.0647333549076432, 0.0, 0.0, 0.0, 0.3959596140817947], res_norm=4.012e-01
2026-01-26 14:23:30,785 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,831 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,847 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,887 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,902 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:30,940 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:30,954 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,002 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,022 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,072 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,091 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,132 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,147 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,186 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,201 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,239 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,254 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,293 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,308 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,347 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,362 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,400 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,558 - INFO - integration_test - Step 34: MPC solve successful
2026-01-26 14:23:31,562 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-26 14:23:31,563 - DEBUG - integration_test - Step 34: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:31,563 - INFO - integration_test - === Applying control at step 34 ===
2026-01-26 14:23:31,563 - INFO - integration_test -   Control dict from planner: {'a': 1.040941787126117e-06, 'w': 0.0}
2026-01-26 14:23:31,563 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:31,563 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:31,564 - INFO - integration_test - Step 34 completed in 0.833s
2026-01-26 14:23:31,577 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-26 14:23:31,578 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[9.50000006 0.         0.         3.00000003 9.60000006]
2026-01-26 14:23:31,579 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.010m, drift=0.110m)
2026-01-26 14:23:31,579 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-26 14:23:31,579 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:31,591 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(9.500, 0.000), path_start=(0.000, 0.000), dist=9.500m
2026-01-26 14:23:31,591 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-26 14:23:31,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:31,616 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:31,616 - INFO - integration_test - Warmstart k=0: x0=9.50000006273041 , y0=0.0 , psi0=0.0 , v0=3.0000000299998395 , spline0=9.600000064230406 , a0=0.0 , w0=0.0
2026-01-26 14:23:31,616 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:31,617 - INFO - integration_test - Dyn residual k=0: pred=[9.800000065730393, 0.0, 0.0, 3.0000000299998395, 9.900000067230389], ws=[9.924317122975438, 0.0, 0.0, 3.0, 9.849495013725356], res=[-0.1243170572450456, 0.0, 0.0, 2.9999839501471115e-08, 0.05050505350503265], res_norm=1.342e-01
2026-01-26 14:23:31,618 - INFO - integration_test - Dyn residual k=1: pred=[10.224317122975439, 0.0, 0.0, 3.0, 10.149495013725357], ws=[10.263440230123383, 0.0, 0.0, 3.0, 10.149494981285756], res=[-0.03912310714794387, 0.0, 0.0, 0.0, 3.243960122745193e-08], res_norm=3.912e-02
2026-01-26 14:23:31,618 - INFO - integration_test - Dyn residual k=2: pred=[10.563440230123383, 0.0, 0.0, 3.0, 10.449494981285756], ws=[10.617523635640978, 0.0, 0.0, 3.0, 10.489899020392214], res=[-0.05408340551759494, 0.0, 0.0, 0.0, -0.04040403910645729], res_norm=6.751e-02
2026-01-26 14:23:31,631 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,678 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,732 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,747 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,785 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,800 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,838 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,854 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,893 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,907 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,945 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:31,960 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:31,997 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,012 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,050 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,065 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,109 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,129 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,170 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,185 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,223 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,538 - INFO - integration_test - Step 35: MPC solve successful
2026-01-26 14:23:32,542 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-26 14:23:32,543 - DEBUG - integration_test - Step 35: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:32,543 - INFO - integration_test - === Applying control at step 35 ===
2026-01-26 14:23:32,543 - INFO - integration_test -   Control dict from planner: {'a': -3.8120004976832156e-06, 'w': 0.0}
2026-01-26 14:23:32,543 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:32,543 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:32,544 - INFO - integration_test - Step 35 completed in 0.966s
2026-01-26 14:23:32,556 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-26 14:23:32,558 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[9.80000005 0.         0.         2.99999965 9.90000003]
2026-01-26 14:23:32,558 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.004m, drift=0.104m)
2026-01-26 14:23:32,558 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-26 14:23:32,559 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:32,572 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(9.800, 0.000), path_start=(0.000, 0.000), dist=9.800m
2026-01-26 14:23:32,572 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-26 14:23:32,574 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:23:32,595 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:23:32,595 - INFO - integration_test - Warmstart k=0: x0=9.800000046670391 , y0=0.0 , psi0=0.0 , v0=2.9999996487997898 , spline0=9.900000029110384 , a0=0.0 , w0=0.0
2026-01-26 14:23:32,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:23:32,596 - INFO - integration_test - Dyn residual k=0: pred=[10.10000001155037, 0.0, 0.0, 2.9999996487997898, 10.199999993990362], ws=[10.21927484315515, 0.0, 0.0, 2.9999996487997898, 10.149494946520482], res=[-0.11927483160478047, 0.0, 0.0, 0.0, 0.05050504746987983], res_norm=1.295e-01
2026-01-26 14:23:32,597 - INFO - integration_test - Dyn residual k=1: pred=[10.519274808035128, 0.0, 0.0, 2.9999996487997898, 10.44949491140046], ws=[10.689845370508916, 0.0, 0.0, 2.9999996487997898, 10.489898970372789], res=[-0.1705705624737881, 0.0, 0.0, 0.0, -0.040404058972328016], res_norm=1.753e-01
2026-01-26 14:23:32,598 - INFO - integration_test - Dyn residual k=2: pred=[10.989845335388894, 0.0, 0.0, 2.9999996487997898, 10.789898935252767], ws=[11.096190183188227, 0.0, 0.0, 2.9999996487997898, 10.81818178352287], res=[-0.10634484779933295, 0.0, 0.0, 0.0, -0.028282848270103855], res_norm=1.100e-01
2026-01-26 14:23:32,611 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,657 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,673 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,712 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,727 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,764 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,780 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,817 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,832 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,871 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,887 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,924 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:32,977 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:32,992 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:33,029 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:33,044 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:33,086 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:33,104 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:33,151 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:33,167 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:23:33,205 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:23:33,376 - INFO - integration_test - Step 36: MPC solve successful
2026-01-26 14:23:33,380 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-26 14:23:33,380 - DEBUG - integration_test - Step 36: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 14:23:33,380 - INFO - integration_test - === Applying control at step 36 ===
2026-01-26 14:23:33,380 - INFO - integration_test -   Control dict from planner: {'a': 3.8120000640872706e-06, 'w': 0.0}
2026-01-26 14:23:33,381 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:23:33,381 - INFO - integration_test -   Planner output success: True
2026-01-26 14:23:33,382 - INFO - integration_test - Step 36 completed in 0.824s
2026-01-26 14:23:33,394 - WARNING - integration_test - Test timeout reached (30.0s) at step 37. Terminating test early.
2026-01-26 14:23:33,395 - INFO - integration_test - Saving test results...
2026-01-26 14:23:33,395 - INFO - integration_test - Saved 38 vehicle states to test_outputs/20260126_142303_contouring_contouring_contouring_unicycle/vehicle_states.csv
2026-01-26 14:23:33,395 - INFO - integration_test - Saved obstacle summary to test_outputs/20260126_142303_contouring_contouring_contouring_unicycle/obstacle_summary.csv
2026-01-26 14:23:33,395 - INFO - integration_test - Saved state history: 38 vehicle states, 0 obstacles
2026-01-26 14:23:33,395 - INFO - integration_test - Creating animation...
2026-01-26 14:23:33,433 - DEBUG - integration_test - Creating animation with 38 frames (range: 0 to 37)
2026-01-26 14:23:33,434 - DEBUG - integration_test - Frame 0: Drawing 2 contouring constraint halfspaces
2026-01-26 14:23:33,435 - DEBUG - integration_test - Frame 0: Drawing 2 contouring constraint halfspaces
2026-01-26 14:23:33,484 - DEBUG - integration_test - Frame 1: Drawing 2 contouring constraint halfspaces
2026-01-26 14:23:33,512 - DEBUG - integration_test - Frame 2: Drawing 2 contouring constraint halfspaces
2026-01-26 14:23:37,290 - INFO - integration_test - Saved animation with 38 frames at 10.00 fps to test_outputs/20260126_142303_contouring_contouring_contouring_unicycle/animation.gif (duration: 3.80s, size: 181596 bytes)
2026-01-26 14:23:37,310 - INFO - integration_test - Animation created successfully
2026-01-26 14:23:37,310 - INFO - integration_test - Test completed successfully
