2026-01-26 14:29:39,845 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-26 14:29:39,845 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2026-01-26 14:29:39,845 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-26 14:29:39,845 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-26 14:29:39,845 - INFO - integration_test - Creating objective module: contouring
2026-01-26 14:29:39,850 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-26 14:29:39,850 - INFO - integration_test - Creating 1 constraint module(s): ['contouring']
2026-01-26 14:29:39,850 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-26 14:29:39,855 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-26 14:29:39,856 - INFO - integration_test - Created 1 constraint module(s)
2026-01-26 14:29:39,872 - INFO - integration_test - Setting solver on all modules...
2026-01-26 14:29:39,872 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-26 14:29:39,872 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-26 14:29:39,872 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-26 14:29:39,872 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-26 14:29:39,872 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-26 14:29:39,873 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-26 14:29:39,873 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-26 14:29:39,873 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-26 14:29:39,873 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-26 14:29:39,873 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-26 14:29:39,873 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-26 14:29:39,873 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-26 14:29:39,873 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-26 14:29:39,874 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-26 14:29:39,874 - INFO - integration_test - Added spline variable: 0.0000
2026-01-26 14:29:39,874 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-26 14:29:39,874 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-26 14:29:39,874 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-26 14:29:39,875 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-26 14:29:39,875 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-26 14:29:39,875 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:39,890 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-26 14:29:39,890 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-26 14:29:39,892 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:39,916 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:39,916 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-26 14:29:39,916 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:39,917 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-26 14:29:39,918 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-26 14:29:39,918 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-26 14:29:39,933 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:39,987 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,006 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,049 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,068 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,108 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,126 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,167 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,185 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,227 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,246 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,287 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,306 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,347 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,365 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,405 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,424 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,466 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,486 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,529 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:40,548 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:40,596 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:41,346 - INFO - integration_test - Step 0: MPC solve successful
2026-01-26 14:29:41,351 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-26 14:29:41,352 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:41,352 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-26 14:29:41,352 - INFO - integration_test - === Applying control at step 0 ===
2026-01-26 14:29:41,352 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000185256015, 'w': 0.7999999784781102}
2026-01-26 14:29:41,352 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:41,352 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:41,354 - INFO - integration_test - Step 0 completed in 1.479s
2026-01-26 14:29:41,422 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-26 14:29:41,422 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.08       1.2        0.12      ]
2026-01-26 14:29:41,423 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-26 14:29:41,423 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-26 14:29:41,424 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:41,443 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-26 14:29:41,443 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-26 14:29:41,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:41,476 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:41,477 - INFO - integration_test - Warmstart k=0: x0=0.10987737538026617 , y0=0.0045308449362502405 , psi0=0.07999999784781102 , v0=1.20000000185256 , spline0=0.12000000018525601 , a0=0.0 , w0=0.0
2026-01-26 14:29:41,477 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:41,478 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358034188294, 0.014120607969918961, 0.07999999784781102, 1.20000000185256, 0.24000000037051203], ws=[0.22949358034188297, 0.014120607969918961, 0.07999999784781098, 1.20000000185256, 0.05292929293303547], res=[-2.7755575615628914e-17, 0.0, 4.163336342344337e-17, 0.0, 0.18707070743747656], res_norm=1.871e-01
2026-01-26 14:29:41,479 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097853034998, 0.023710371003587676, 0.07999999784781098, 1.20000000185256, 0.17292929311829147], ws=[0.3491097853034998, 0.02371037100358768, 0.07999999784781098, 1.20000000185256, 0.10828282829405593], res=[0.0, -3.469446951953614e-18, 0.0, 0.0, 0.06464646482423554], res_norm=6.465e-02
2026-01-26 14:29:41,480 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259902651166, 0.033300134037256394, 0.07999999784781098, 1.20000000185256, 0.22828282847931194], ws=[0.4687259902651166, 0.033300134037256394, 0.07999999784781098, 1.20000000185256, 0.1660606060830613], res=[0.0, 0.0, 0.0, 0.0, 0.06222222239625064], res_norm=6.222e-02
2026-01-26 14:29:41,500 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:41,564 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:41,591 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:41,640 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:41,659 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:41,700 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:41,720 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:41,763 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:41,781 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:41,821 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:41,841 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:41,882 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:41,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:41,940 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:41,959 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:41,999 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:42,017 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:42,059 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:42,077 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:42,118 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:42,137 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:42,180 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:42,696 - INFO - integration_test - Step 1: MPC solve successful
2026-01-26 14:29:42,701 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-26 14:29:42,701 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:42,701 - INFO - integration_test - === Applying control at step 1 ===
2026-01-26 14:29:42,701 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000189057934, 'w': 0.8000000025805538}
2026-01-26 14:29:42,701 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:42,701 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:42,702 - INFO - integration_test - Step 1 completed in 1.280s
2026-01-26 14:29:42,754 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-26 14:29:42,754 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-26 14:29:42,755 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-26 14:29:42,755 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-26 14:29:42,755 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:42,768 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-26 14:29:42,769 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-26 14:29:42,771 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:42,793 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:42,794 - INFO - integration_test - Warmstart k=0: x0=0.23889212820143785 , y0=0.02022162137579042 , psi0=0.1599999981058664 , v0=1.4000000037431395 , spline0=0.26000000055956995 , a0=0.0 , w0=0.0
2026-01-26 14:29:42,794 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:42,795 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394828580635, 0.042526170099628224, 0.1599999981058664, 1.4000000037431395, 0.4000000009338839], ws=[0.37710394828580635, 0.04252617009962823, 0.1599999981058664, 1.4000000037431395, 0.10909090910977542], res=[0.0, -6.938893903907228e-18, 0.0, 0.0, 0.29090909182410846], res_norm=2.909e-01
2026-01-26 14:29:42,795 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157683701748, 0.06483071882346604, 0.1599999981058664, 1.4000000037431395, 0.24909090948408938], ws=[0.5153157683701748, 0.06483071882346604, 0.1599999981058664, 1.4000000037431395, 0.16787878791843025], res=[0.0, 0.0, 0.0, 0.0, 0.08121212156565913], res_norm=8.121e-02
2026-01-26 14:29:42,796 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275884545433, 0.08713526754730386, 0.1599999981058664, 1.4000000037431395, 0.3078787882927442], ws=[0.6535275884545433, 0.08713526754730386, 0.1599999981058664, 1.4000000037431395, 0.4589898991258595], res=[0.0, 0.0, 0.0, 0.0, -0.15111111083311535], res_norm=1.511e-01
2026-01-26 14:29:42,811 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:42,896 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:42,928 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:42,974 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:42,992 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,034 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:43,053 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,093 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:43,113 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,153 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:43,172 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,212 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:43,232 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,273 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:43,291 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,332 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:43,350 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,391 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:43,410 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,452 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:43,471 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:43,513 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,022 - INFO - integration_test - Step 2: MPC solve successful
2026-01-26 14:29:44,027 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-26 14:29:44,028 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:44,028 - INFO - integration_test - === Applying control at step 2 ===
2026-01-26 14:29:44,028 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000168073084, 'w': 0.7999999862685271}
2026-01-26 14:29:44,028 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:44,028 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:44,029 - INFO - integration_test - Step 2 completed in 1.275s
2026-01-26 14:29:44,079 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-26 14:29:44,080 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-26 14:29:44,080 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-26 14:29:44,080 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-26 14:29:44,081 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:44,094 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-26 14:29:44,094 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-26 14:29:44,097 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:44,120 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:44,120 - INFO - integration_test - Warmstart k=0: x0=0.3858364357882749 , y0=0.050144715691964284 , psi0=0.2399999967327191 , v0=1.6000000054238703 , spline0=0.420000001101957 , a0=0.0 , w0=0.0
2026-01-26 14:29:44,120 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:44,121 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505124157034, 0.08817713554145121, 0.2399999967327191, 1.6000000054238703, 0.5800000016443441], ws=[0.5412505124157034, 0.08817713554145121, 0.2399999967327191, 1.6000000054238703, 0.1690909091407377], res=[0.0, 0.0, 0.0, 0.0, 0.41090909250360635], res_norm=4.109e-01
2026-01-26 14:29:44,122 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645890431319, 0.12620955539093812, 0.2399999967327191, 1.6000000054238703, 0.32909090968312477], ws=[0.6966645890431319, 0.12620955539093812, 0.2399999967327191, 1.6000000054238703, 0.23191919200754468], res=[0.0, 0.0, 0.0, 0.0, 0.09717171767558008], res_norm=9.717e-02
2026-01-26 14:29:44,123 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786656705603, 0.16424197524042503, 0.2399999967327191, 1.6000000054238703, 0.39191919254993174], ws=[0.8520786656705603, 0.16424197524042503, 0.2399999967327191, 1.6000000054238703, 0.29797979811763226], res=[0.0, 0.0, 0.0, 0.0, 0.09393939443229948], res_norm=9.394e-02
2026-01-26 14:29:44,138 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,188 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,207 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,249 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,269 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,310 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,328 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,368 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,386 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,428 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,446 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,487 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,507 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,549 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,567 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,609 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,629 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,671 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,690 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,731 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:44,749 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:44,789 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,301 - INFO - integration_test - Step 3: MPC solve successful
2026-01-26 14:29:45,305 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-26 14:29:45,306 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:45,306 - INFO - integration_test - === Applying control at step 3 ===
2026-01-26 14:29:45,306 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001813931, 'w': 0.7999999956532289}
2026-01-26 14:29:45,306 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:45,306 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:45,307 - INFO - integration_test - Step 3 completed in 1.227s
2026-01-26 14:29:45,358 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-26 14:29:45,359 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-26 14:29:45,359 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-26 14:29:45,359 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-26 14:29:45,360 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:45,373 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-26 14:29:45,373 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-26 14:29:45,376 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:45,398 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:45,398 - INFO - integration_test - Warmstart k=0: x0=0.5491354614414069 , y0=0.09724075565891453 , psi0=0.319999996298042 , v0=1.8000000072378013 , spline0=0.6000000018257372 , a0=0.0 , w0=0.0
2026-01-26 14:29:45,398 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:45,399 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978375928962, 0.15386273616496743, 0.319999996298042, 1.8000000072378013, 0.7800000025495173], ws=[0.7199978375928962, 0.15386273616496743, 0.319999996298042, 1.8000000072378013, 0.23353535363836433], res=[0.0, 0.0, 0.0, 0.0, 0.546464648911153], res_norm=5.465e-01
2026-01-26 14:29:45,400 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602137443854, 0.2104847166710203, 0.319999996298042, 1.8000000072378013, 0.4135353543621445], ws=[0.8908602137443855, 0.2104847166710203, 0.319999996298042, 1.8000000072378013, 0.30101010117541904], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, 0.11252525318672546], res_norm=1.125e-01
2026-01-26 14:29:45,401 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225898958749, 0.2671066971770732, 0.319999996298042, 1.8000000072378013, 0.4810101018991992], ws=[1.0617225898958749, 0.2671066971770732, 0.319999996298042, 1.8000000072378013, 0.3721212123634592], res=[0.0, 0.0, 0.0, 0.0, 0.10888888953574], res_norm=1.089e-01
2026-01-26 14:29:45,416 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,468 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,488 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,532 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,552 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,594 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,612 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,655 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,674 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,715 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,735 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,776 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,795 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,836 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,855 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,895 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,914 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:45,955 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:45,973 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:46,015 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:46,034 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:46,078 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:46,596 - INFO - integration_test - Step 4: MPC solve successful
2026-01-26 14:29:46,601 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-26 14:29:46,601 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:46,601 - INFO - integration_test - === Applying control at step 4 ===
2026-01-26 14:29:46,601 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000119459513, 'w': 0.799999946528614}
2026-01-26 14:29:46,601 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:46,601 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:46,602 - INFO - integration_test - Step 4 completed in 1.244s
2026-01-26 14:29:46,663 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-26 14:29:46,664 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.39999999 2.00000001 0.8       ]
2026-01-26 14:29:46,665 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-26 14:29:46,665 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-26 14:29:46,665 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:46,688 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-26 14:29:46,688 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-26 14:29:46,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:46,732 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:46,732 - INFO - integration_test - Warmstart k=0: x0=0.7268614892862062 , y0=0.16427976590683396 , psi0=0.3999999909509034 , v0=2.0000000084323966 , spline0=0.8000000026689769 , a0=0.0 , w0=0.0
2026-01-26 14:29:46,732 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:46,734 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736895682352, 0.24216343302998306, 0.3999999909509034, 2.0000000084323966, 1.0000000035122165], ws=[0.9110736895682352, 0.24216343302998306, 0.39999999095090333, 2.0000000084323966, 0.36363636384922526], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, 0.6363636396629913], res_norm=6.364e-01
2026-01-26 14:29:46,736 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858898502642, 0.32004710015313215, 0.39999999095090333, 2.0000000084323966, 0.5636363646924649], ws=[1.0952858898502642, 0.32004710015313215, 0.39999999095090333, 2.0000000084323966, 0.8767676773835998], res=[0.0, 0.0, 0.0, 0.0, -0.3131313126911349], res_norm=3.131e-01
2026-01-26 14:29:46,737 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980901322932, 0.39793076727628124, 0.39999999095090333, 2.0000000084323966, 1.0767676782268394], ws=[1.2794980901322932, 0.39793076727628124, 0.39999999095090333, 2.0000000084323966, 0.9696969704846509], res=[0.0, 0.0, 0.0, 0.0, 0.10707070774218852], res_norm=1.071e-01
2026-01-26 14:29:46,756 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:46,806 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:46,825 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:46,867 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:46,886 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:46,928 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:46,947 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:46,987 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:47,006 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:47,048 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:47,067 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:47,108 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:47,127 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:47,170 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:47,187 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:47,229 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:47,248 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:47,291 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:47,309 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:47,350 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:47,368 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:47,408 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:47,936 - INFO - integration_test - Step 5: MPC solve successful
2026-01-26 14:29:47,940 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-26 14:29:47,941 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:47,941 - INFO - integration_test - === Applying control at step 5 ===
2026-01-26 14:29:47,941 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000173553376, 'w': 0.7999999981482415}
2026-01-26 14:29:47,941 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:47,941 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:47,942 - INFO - integration_test - Step 5 completed in 1.278s
2026-01-26 14:29:47,995 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-26 14:29:47,995 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-26 14:29:47,996 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-26 14:29:47,996 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-26 14:29:47,996 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:48,010 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-26 14:29:48,010 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-26 14:29:48,012 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:48,035 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:48,035 - INFO - integration_test - Warmstart k=0: x0=0.9167519040986704 , y0=0.2538238041905347 , psi0=0.4799999907657275 , v0=2.2000000101679302 , spline0=1.02000000368577 , a0=0.0 , w0=0.0
2026-01-26 14:29:48,035 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:48,036 - INFO - integration_test - Dyn residual k=0: pred=[1.111890788950126, 0.35541522147722915, 0.4799999907657275, 2.2000000101679302, 1.240000004702563], ws=[1.111890788950126, 0.35541522147722915, 0.4799999907657275, 2.2000000101679302, 0.6933333338558403], res=[0.0, 0.0, 0.0, 0.0, 0.5466666708467227], res_norm=5.467e-01
2026-01-26 14:29:48,037 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296738015816, 0.4570066387639236, 0.4799999907657275, 2.2000000101679302, 0.9133333348726334], ws=[1.3070296738015816, 0.4570066387639236, 0.4799999907657275, 2.2000000101679302, 1.239797980895634], res=[0.0, 0.0, 0.0, 0.0, -0.32646464602300074], res_norm=3.265e-01
2026-01-26 14:29:48,037 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685586530373, 0.5585980560506181, 0.4799999907657275, 2.2000000101679302, 1.4597979819124272], ws=[1.5021685586530373, 0.5585980560506181, 0.4799999907657275, 2.2000000101679302, 1.0795959606846302], res=[0.0, 0.0, 0.0, 0.0, 0.380202021227797], res_norm=3.802e-01
2026-01-26 14:29:48,053 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,103 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,122 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,164 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,183 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,223 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,242 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,285 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,303 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,344 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,362 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,402 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,421 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,463 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,482 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,525 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,544 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,586 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,605 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,648 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:48,666 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:48,708 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,341 - INFO - integration_test - Step 6: MPC solve successful
2026-01-26 14:29:49,346 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-26 14:29:49,346 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:49,346 - INFO - integration_test - === Applying control at step 6 ===
2026-01-26 14:29:49,346 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016228924, 'w': 0.7999999608201408}
2026-01-26 14:29:49,346 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:49,346 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:49,347 - INFO - integration_test - Step 6 completed in 1.352s
2026-01-26 14:29:49,399 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-26 14:29:49,400 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819144 0.55999999 2.40000001 1.26      ]
2026-01-26 14:29:49,400 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-26 14:29:49,400 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-26 14:29:49,400 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:49,414 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-26 14:29:49,414 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-26 14:29:49,417 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:49,443 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:49,443 - INFO - integration_test - Warmstart k=0: x0=1.116230865498975 , y0=0.36819144132410164 , psi0=0.5599999868477417 , v0=2.4000000117908225 , spline0=1.2600000048648523 , a0=0.0 , w0=0.0
2026-01-26 14:29:49,443 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:49,444 - INFO - integration_test - Dyn residual k=0: pred=[1.31957209481789, 0.4956761267770295, 0.5599999868477417, 2.4000000117908225, 1.5000000060439347], ws=[1.31957209481789, 0.49567612677702955, 0.5599999868477417, 2.4000000117908225, 1.2474747486346947], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, 0.25252525740924003], res_norm=2.525e-01
2026-01-26 14:29:49,445 - INFO - integration_test - Dyn residual k=1: pred=[1.522913324136805, 0.6231608122299575, 0.5599999868477417, 2.4000000117908225, 1.487474749813777], ws=[1.522913324136805, 0.6231608122299575, 0.5599999868477417, 2.4000000117908225, 1.361616163075357], res=[0.0, 0.0, 0.0, 0.0, 0.1258585867384201], res_norm=1.259e-01
2026-01-26 14:29:49,446 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545534557199, 0.7506454976828854, 0.5599999868477417, 2.4000000117908225, 1.6016161642544393], ws=[1.7262545534557199, 0.7506454976828854, 0.5599999868477417, 2.4000000117908225, 1.1985858600286434], res=[0.0, 0.0, 0.0, 0.0, 0.4030303042257959], res_norm=4.030e-01
2026-01-26 14:29:49,460 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,512 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,533 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,576 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,595 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,637 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,656 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,697 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,716 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,757 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,775 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,815 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,834 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,877 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,895 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,937 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:49,955 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:49,995 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:50,014 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:50,057 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:50,076 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:50,116 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:50,714 - INFO - integration_test - Step 7: MPC solve successful
2026-01-26 14:29:50,718 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-26 14:29:50,719 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:50,719 - INFO - integration_test - === Applying control at step 7 ===
2026-01-26 14:29:50,719 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019481938, 'w': 0.8000000004080856}
2026-01-26 14:29:50,719 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:50,719 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:50,720 - INFO - integration_test - Step 7 completed in 1.321s
2026-01-26 14:29:50,770 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-26 14:29:50,771 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243449 0.50942444 0.63999999 2.60000001 1.52000001]
2026-01-26 14:29:50,771 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-26 14:29:50,771 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-26 14:29:50,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:50,785 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-26 14:29:50,785 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-26 14:29:50,787 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:50,809 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:50,809 - INFO - integration_test - Warmstart k=0: x0=1.3224344915065207 , y0=0.509424435279636 , psi0=0.6399999868885502 , v0=2.6000000137390162 , spline0=1.520000006238754 , a0=0.0 , w0=0.0
2026-01-26 14:29:50,809 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:50,810 - INFO - integration_test - Dyn residual k=0: pred=[1.530979391694263, 0.6646952481200197, 0.6399999868885502, 2.6000000137390162, 1.7800000076126556], ws=[1.530979391694263, 0.6646952481200198, 0.63999998688855, 2.6000000137390162, 1.3696969712348799], res=[0.0, -1.1102230246251565e-16, 2.220446049250313e-16, 0.0, 0.41030303637777576], res_norm=4.103e-01
2026-01-26 14:29:50,811 - INFO - integration_test - Dyn residual k=1: pred=[1.739524291882005, 0.8199660609604035, 0.63999998688855, 2.6000000137390162, 1.6296969726087815], ws=[1.739524291882005, 0.8199660609604035, 0.63999998688855, 2.6000000137390162, 1.706666668845226], res=[0.0, 0.0, 0.0, 0.0, -0.07696969623644456], res_norm=7.697e-02
2026-01-26 14:29:50,812 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691920697473, 0.9752368738007872, 0.63999998688855, 2.6000000137390162, 1.9666666702191278], ws=[1.9480691920697473, 0.9752368738007872, 0.63999998688855, 2.6000000137390162, 2.0646464675766953], res=[0.0, 0.0, 0.0, 0.0, -0.09797979735756757], res_norm=9.798e-02
2026-01-26 14:29:50,827 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:50,879 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:50,898 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:50,940 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:50,958 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:50,999 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:51,018 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:51,061 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:51,081 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:51,130 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:51,149 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:51,189 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:51,208 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:51,250 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:51,269 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:51,308 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:51,327 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:51,368 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:51,386 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:51,427 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:51,446 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:51,486 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,060 - INFO - integration_test - Step 8: MPC solve successful
2026-01-26 14:29:52,064 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-26 14:29:52,065 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:52,065 - INFO - integration_test - === Applying control at step 8 ===
2026-01-26 14:29:52,065 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199947867, 'w': 0.8000000098976999}
2026-01-26 14:29:52,065 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:52,065 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:52,066 - INFO - integration_test - Step 8 completed in 1.296s
2026-01-26 14:29:52,125 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-26 14:29:52,125 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223933 0.67925693 0.71999999 2.80000002 1.80000001]
2026-01-26 14:29:52,126 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-26 14:29:52,126 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-26 14:29:52,127 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:52,143 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-26 14:29:52,143 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-26 14:29:52,145 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:52,169 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:52,169 - INFO - integration_test - Warmstart k=0: x0=1.5322393343684322 , y0=0.6792569317013633 , psi0=0.7199999878783202 , v0=2.8000000157384948 , spline0=1.8000000078126035 , a0=0.0 , w0=0.0
2026-01-26 14:29:52,169 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:52,170 - INFO - integration_test - Dyn residual k=0: pred=[1.74274494194911, 0.8638846383394664, 0.7199999878783202, 2.8000000157384948, 2.080000009386453], ws=[1.74274494194911, 0.8638846383394664, 0.7199999878783201, 2.8000000157384948, 1.7163636386391399], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.36363637074731314], res_norm=3.636e-01
2026-01-26 14:29:52,171 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505495297876, 1.0485123449775695, 0.7199999878783201, 2.8000000157384948, 1.9963636402129894], ws=[1.9532505495297876, 1.0485123449775695, 0.7199999878783201, 2.8000000157384948, 2.081616164716045], res=[0.0, 0.0, 0.0, 0.0, -0.08525252450305576], res_norm=8.525e-02
2026-01-26 14:29:52,171 - INFO - integration_test - Dyn residual k=2: pred=[2.1637561571104653, 1.2331400516156727, 0.7199999878783201, 2.8000000157384948, 2.3616161662898945], ws=[2.1637561571104653, 1.2331400516156727, 0.7199999878783201, 2.8000000157384948, 1.9292929324581192], res=[0.0, 0.0, 0.0, 0.0, 0.4323232338317753], res_norm=4.323e-01
2026-01-26 14:29:52,186 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,236 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,256 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,299 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,320 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,361 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,379 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,420 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,440 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,482 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,501 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,544 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,563 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,604 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,622 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,666 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,684 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,728 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,746 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,786 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:52,805 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:52,846 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,368 - INFO - integration_test - Step 9: MPC solve successful
2026-01-26 14:29:53,373 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-26 14:29:53,373 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:53,373 - INFO - integration_test - === Applying control at step 9 ===
2026-01-26 14:29:53,373 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196598364, 'w': 0.8000000020065122}
2026-01-26 14:29:53,373 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:53,373 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:53,375 - INFO - integration_test - Step 9 completed in 1.249s
2026-01-26 14:29:53,425 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-26 14:29:53,426 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.7422939  0.8790875  0.79999999 3.00000002 2.10000001]
2026-01-26 14:29:53,426 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-26 14:29:53,426 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-26 14:29:53,427 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:53,442 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-26 14:29:53,442 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-26 14:29:53,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:53,469 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:53,469 - INFO - integration_test - Warmstart k=0: x0=1.7422939028848043 , y0=0.8790874989538378 , psi0=0.7999999880789714 , v0=3.0000000177044783 , spline0=2.1000000095830513 , a0=0.0 , w0=0.0
2026-01-26 14:29:53,469 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:53,470 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059194879236, 1.0942943250020978, 0.7999999880789714, 3.0000000177044783, 2.400000011353499], ws=[1.9513059182544408, 1.0942943237320564, 0.7999999880789712, 3.0, 2.092929295639651], res=[1.2334828713989054e-09, 1.2700414053767872e-09, 2.220446049250313e-16, 1.7704478327829065e-08, 0.30707071571384814], res_norm=3.071e-01
2026-01-26 14:29:53,471 - INFO - integration_test - Dyn residual k=1: pred=[2.160317933624077, 1.309501148510275, 0.7999999880789712, 3.0, 2.392929295639651], ws=[2.160317933624077, 1.309501148510275, 0.7999999880789712, 3.0, 2.488888891986441], res=[0.0, 0.0, 0.0, 0.0, -0.09595959634678985], res_norm=9.596e-02
2026-01-26 14:29:53,471 - INFO - integration_test - Dyn residual k=2: pred=[2.3693299489937134, 1.5247079732884936, 0.7999999880789712, 3.0, 2.788888891986441], ws=[2.3693299489937134, 1.5247079732884936, 0.7999999880789712, 3.0, 2.3434343462414997], res=[0.0, 0.0, 0.0, 0.0, 0.4454545457449415], res_norm=4.455e-01
2026-01-26 14:29:53,486 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:53,539 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,559 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:53,601 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,620 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:53,663 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,683 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:53,726 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,746 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:53,790 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,809 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:53,853 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,873 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:53,915 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,934 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:53,976 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:53,994 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:54,038 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:54,058 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:54,100 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:54,118 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:54,159 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:54,772 - INFO - integration_test - Step 10: MPC solve successful
2026-01-26 14:29:54,777 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-26 14:29:54,777 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:54,777 - INFO - integration_test - === Applying control at step 10 ===
2026-01-26 14:29:54,777 - INFO - integration_test -   Control dict from planner: {'a': 1.2295405522579544e-07, 'w': 0.8000000098636143}
2026-01-26 14:29:54,777 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:54,777 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:54,778 - INFO - integration_test - Step 10 completed in 1.353s
2026-01-26 14:29:54,831 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-26 14:29:54,831 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247936 1.10242087 0.87999999 3.00000003 2.40000001]
2026-01-26 14:29:54,832 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-26 14:29:54,832 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-26 14:29:54,832 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:54,846 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-26 14:29:54,846 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-26 14:29:54,849 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:54,873 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:54,873 - INFO - integration_test - Warmstart k=0: x0=1.9424793648667744 , y0=1.102420870929909 , psi0=0.8799999890653328 , v0=3.000000029999884 , spline0=2.40000001258304 , a0=0.0 , w0=0.0
2026-01-26 14:29:54,874 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:54,874 - INFO - integration_test - Dyn residual k=0: pred=[2.1336247125661263, 1.3336425348216967, 0.8799999890653328, 3.000000029999884, 2.7000000155830284], ws=[2.13362471065468, 1.3336425325094892, 0.8799999890653325, 3.0, 2.488888892956134], res=[1.9114461125013804e-09, 2.3122075365478167e-09, 3.3306690738754696e-16, 2.99998839103921e-08, 0.21111112262689424], res_norm=2.111e-01
2026-01-26 14:29:54,875 - INFO - integration_test - Dyn residual k=1: pred=[2.324770056442586, 1.564864194089069, 0.8799999890653325, 3.0, 2.788888892956134], ws=[2.324770056442586, 1.5648641940890693, 0.8799999890653325, 3.0, 2.3434343471202848], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, 0.4454545458358492], res_norm=4.455e-01
2026-01-26 14:29:54,876 - INFO - integration_test - Dyn residual k=2: pred=[2.515915402230492, 1.7960858556686492, 0.8799999890653325, 3.0, 2.6434343471202846], ws=[2.515915402230492, 1.7960858556686494, 0.8799999890653325, 3.0, 2.934343438791984], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, -0.2909090916716992], res_norm=2.909e-01
2026-01-26 14:29:54,891 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:54,941 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:54,963 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,005 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,023 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,067 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,086 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,127 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,146 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,187 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,205 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,247 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,266 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,307 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,324 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,366 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,384 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,424 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,443 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,485 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:55,504 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:55,547 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,152 - INFO - integration_test - Step 11: MPC solve successful
2026-01-26 14:29:56,157 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-26 14:29:56,157 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:56,157 - INFO - integration_test - === Applying control at step 11 ===
2026-01-26 14:29:56,157 - INFO - integration_test -   Control dict from planner: {'a': -3.6674817359311967e-10, 'w': 0.059642923375357704}
2026-01-26 14:29:56,157 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:56,157 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:56,158 - INFO - integration_test - Step 11 completed in 1.327s
2026-01-26 14:29:56,208 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-26 14:29:56,209 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13293404 1.33421119 0.88596428 3.00000003 2.70000002]
2026-01-26 14:29:56,209 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-26 14:29:56,209 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-26 14:29:56,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:56,224 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-26 14:29:56,224 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-26 14:29:56,226 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:56,252 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:56,252 - INFO - integration_test - Warmstart k=0: x0=2.1329340445500127 , y0=1.3342111856330148 , psi0=0.8859642814028686 , v0=3.0000000299632092 , spline0=2.7000000155793606 , a0=0.0 , w0=0.0
2026-01-26 14:29:56,252 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:56,253 - INFO - integration_test - Dyn residual k=0: pred=[2.3226969270491384, 1.566568776908651, 0.8859642814028686, 3.0000000299632092, 3.0000000185756814], ws=[2.3226969251538367, 1.5665687745879247, 0.8859642814028685, 3.0, 2.3434343479979947], res=[1.8953016933664912e-09, 2.3207262778157656e-09, 1.1102230246251565e-16, 2.996320924708584e-08, 0.6565656705776868], res_norm=6.566e-01
2026-01-26 14:29:56,253 - INFO - integration_test - Dyn residual k=1: pred=[2.512459805757661, 1.7989263635428345, 0.8859642814028685, 3.0, 2.643434347997995], ws=[2.512459805757661, 1.7989263635428345, 0.8859642814028685, 3.0, 2.9343434398512893], res=[0.0, 0.0, 0.0, 0.0, -0.2909090918532944], res_norm=2.909e-01
2026-01-26 14:29:56,254 - INFO - integration_test - Dyn residual k=2: pred=[2.702222686361485, 2.0312839524977444, 0.8859642814028685, 3.0, 3.2343434398512896], ws=[2.702222686361485, 2.0312839524977444, 0.8859642814028685, 3.0, 3.301010106990058], res=[0.0, 0.0, 0.0, 0.0, -0.06666666713876834], res_norm=6.667e-02
2026-01-26 14:29:56,269 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,321 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,340 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,381 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,401 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,442 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,462 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,504 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,524 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,568 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,586 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,627 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,647 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,690 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,709 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,751 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,770 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,811 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,831 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,874 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:56,892 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:56,933 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:57,473 - INFO - integration_test - Step 12: MPC solve successful
2026-01-26 14:29:57,477 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-26 14:29:57,478 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:57,478 - INFO - integration_test - === Applying control at step 12 ===
2026-01-26 14:29:57,478 - INFO - integration_test -   Control dict from planner: {'a': -2.365774064430697e-06, 'w': -0.2215050444222682}
2026-01-26 14:29:57,478 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:57,478 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:57,479 - INFO - integration_test - Step 12 completed in 1.270s
2026-01-26 14:29:57,533 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-26 14:29:57,533 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32525472 1.56444818 0.86381378 2.99999979 2.99999999]
2026-01-26 14:29:57,534 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-26 14:29:57,534 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-26 14:29:57,534 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:57,548 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-26 14:29:57,548 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-26 14:29:57,551 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:57,574 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:57,574 - INFO - integration_test - Warmstart k=0: x0=2.3252547158435424 , y0=1.5644481816453157 , psi0=0.8638137769606419 , v0=2.9999997933858027 , spline0=2.999999994917941 , a0=0.0 , w0=0.0
2026-01-26 14:29:57,574 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:57,575 - INFO - integration_test - Dyn residual k=0: pred=[2.520117448778935, 1.7925457548811976, 0.8638137769606419, 2.9999997933858027, 3.299999974256521], ws=[2.520117448778935, 1.7925457548811976, 0.863813776960642, 2.9999997933858027, 2.9343434252422043], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.36565654901431666], res_norm=3.657e-01
2026-01-26 14:29:57,576 - INFO - integration_test - Dyn residual k=1: pred=[2.7149801817143273, 2.0206433281170795, 0.863813776960642, 2.9999997933858027, 3.2343434045807844], ws=[2.7149801817143273, 2.0206433281170795, 0.863813776960642, 2.9999997933858027, 3.30101008319812], res=[0.0, 0.0, 0.0, 0.0, -0.06666667861733577], res_norm=6.667e-02
2026-01-26 14:29:57,576 - INFO - integration_test - Dyn residual k=2: pred=[2.90984291464972, 2.2487409013529613, 0.863813776960642, 2.9999997933858027, 3.6010100625367003], ws=[2.90984291464972, 2.2487409013529613, 0.863813776960642, 2.9999997933858027, 3.685858558083646], res=[0.0, 0.0, 0.0, 0.0, -0.08484849554694573], res_norm=8.485e-02
2026-01-26 14:29:57,590 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:57,650 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:57,676 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:57,720 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:57,740 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:57,781 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:57,800 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:57,842 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:57,861 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:57,901 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:57,920 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:57,962 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:57,980 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:58,021 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:58,040 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:58,116 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:58,147 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:58,190 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:58,208 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:58,249 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:58,267 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:58,308 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:58,940 - INFO - integration_test - Step 13: MPC solve successful
2026-01-26 14:29:58,945 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-26 14:29:58,945 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:29:58,945 - INFO - integration_test - === Applying control at step 13 ===
2026-01-26 14:29:58,945 - INFO - integration_test -   Control dict from planner: {'a': 2.3657818251816194e-06, 'w': -0.14807709431203364}
2026-01-26 14:29:58,945 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:29:58,945 - INFO - integration_test -   Planner output success: True
2026-01-26 14:29:58,946 - INFO - integration_test - Step 13 completed in 1.413s
2026-01-26 14:29:58,994 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-26 14:29:58,995 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52179911 1.79109472 0.84900607 3.00000003 3.3       ]
2026-01-26 14:29:58,995 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-26 14:29:58,995 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-26 14:29:58,996 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:59,009 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-26 14:29:59,009 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-26 14:29:59,011 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:29:59,037 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:29:59,037 - INFO - integration_test - Warmstart k=0: x0=2.5217991058650786 , y0=1.7910947191320767 , psi0=0.8490060675294385 , v0=3.000000029963985 , spline0=3.2999999979143393 , a0=0.0 , w0=0.0
2026-01-26 14:29:59,037 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:29:59,038 - INFO - integration_test - Dyn residual k=0: pred=[2.7200179703704794, 2.0162819380234445, 0.8490060675294385, 3.000000029963985, 3.600000000910738], ws=[2.7200179683906702, 2.0162819357742756, 0.8490060675294386, 3.0, 3.3010101002095436], res=[1.979809205465699e-09, 2.2491688511649954e-09, -1.1102230246251565e-16, 2.996398507093545e-08, 0.29898990070119424], res_norm=2.990e-01
2026-01-26 14:29:59,039 - INFO - integration_test - Dyn residual k=1: pred=[2.918236830916262, 2.2414691524164745, 0.8490060675294386, 3.0, 3.6010101002095434], ws=[2.918236830916262, 2.2414691524164745, 0.8490060675294386, 3.0, 3.6858585849948273], res=[0.0, 0.0, 0.0, 0.0, -0.08484848478528395], res_norm=8.485e-02
2026-01-26 14:29:59,040 - INFO - integration_test - Dyn residual k=2: pred=[3.1164556934418535, 2.4666563690586734, 0.8490060675294386, 3.0, 3.985858584994827], ws=[3.1164556934418535, 2.4666563690586734, 0.8490060675294386, 3.0, 3.810101009237252], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757534], res_norm=1.758e-01
2026-01-26 14:29:59,055 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,106 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,125 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,166 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,185 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,225 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,244 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,285 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,304 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,345 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,364 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,404 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,423 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,465 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,483 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,525 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,546 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,591 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,610 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,654 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:29:59,674 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:29:59,714 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,264 - INFO - integration_test - Step 14: MPC solve successful
2026-01-26 14:30:00,268 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-26 14:30:00,269 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:00,269 - INFO - integration_test - === Applying control at step 14 ===
2026-01-26 14:30:00,269 - INFO - integration_test -   Control dict from planner: {'a': 3.5800257336404235e-10, 'w': -0.14528520938862252}
2026-01-26 14:30:00,269 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:00,269 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:00,270 - INFO - integration_test - Step 14 completed in 1.275s
2026-01-26 14:30:00,322 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-26 14:30:00,323 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72164679 2.01483413 0.83447755 3.00000003 3.6       ]
2026-01-26 14:30:00,323 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-26 14:30:00,323 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-26 14:30:00,324 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:00,338 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-26 14:30:00,338 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-26 14:30:00,340 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:00,364 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:00,364 - INFO - integration_test - Warmstart k=0: x0=2.721646787016252 , y0=2.0148341279694524 , psi0=0.8344775465905763 , v0=3.0000000299997853 , spline0=3.600000000914318 , a0=0.0 , w0=0.0
2026-01-26 14:30:00,364 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:00,365 - INFO - integration_test - Dyn residual k=0: pred=[2.9231162542101297, 2.237117855643347, 0.8344775465905763, 3.0000000299997853, 3.900000003914297], ws=[2.9231162521954492, 2.237117853420526, 0.834477546590576, 3.0, 3.685858586237243], res=[2.0146804224907555e-09, 2.2228210383445912e-09, 2.220446049250313e-16, 2.999978532258751e-08, 0.21414141767705397], res_norm=2.141e-01
2026-01-26 14:30:00,366 - INFO - integration_test - Dyn residual k=1: pred=[3.1245857173746465, 2.4594015788715993, 0.834477546590576, 3.0, 3.985858586237243], ws=[3.1245857173746465, 2.4594015788715993, 0.834477546590576, 3.0, 3.8101010104796673], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-26 14:30:00,367 - INFO - integration_test - Dyn residual k=2: pred=[3.3260551825538442, 2.6816853043226727, 0.834477546590576, 3.0, 4.110101010479667], ws=[3.3260551825538442, 2.6816853043226727, 0.834477546590576, 3.0, 3.9343434347220914], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-26 14:30:00,381 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,431 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,451 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,493 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,513 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,557 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,576 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,617 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,635 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,678 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,696 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,737 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,755 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,796 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,815 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,856 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,876 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,917 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,935 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:00,980 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:00,998 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:01,039 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:01,600 - INFO - integration_test - Step 15: MPC solve successful
2026-01-26 14:30:01,605 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-26 14:30:01,605 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:01,605 - INFO - integration_test - === Applying control at step 15 ===
2026-01-26 14:30:01,606 - INFO - integration_test -   Control dict from planner: {'a': -1.745698063642966e-08, 'w': -0.1275494110923275}
2026-01-26 14:30:01,606 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:01,606 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:01,607 - INFO - integration_test - Step 15 completed in 1.284s
2026-01-26 14:30:01,661 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-26 14:30:01,662 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92452838 2.23582698 0.82172261 3.00000003 3.9       ]
2026-01-26 14:30:01,662 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.417m, drift=0.213m)
2026-01-26 14:30:01,662 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-26 14:30:01,663 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:01,677 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.925, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-26 14:30:01,677 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-26 14:30:01,679 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:01,702 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:01,702 - INFO - integration_test - Warmstart k=0: x0=2.9245283801113375 , y0=2.2358269802863164 , psi0=0.8217226054813436 , v0=3.000000028254087 , spline0=3.9000000037397267 , a0=0.0 , w0=0.0
2026-01-26 14:30:01,702 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:01,703 - INFO - integration_test - Dyn residual k=0: pred=[3.1288165980039957, 2.455522965059564, 0.8217226054813436, 3.000000028254087, 4.200000006565135], ws=[3.128816596080003, 2.455522962990461, 0.8217226054813436, 3.0, 3.8101010116497864], res=[1.9239925208580644e-09, 2.069103111068671e-09, 0.0, 2.825408706996768e-08, 0.38989899491534885], res_norm=3.899e-01
2026-01-26 14:30:01,704 - INFO - integration_test - Dyn residual k=1: pred=[3.333104812048669, 2.6752189456946054, 0.8217226054813436, 3.0, 4.110101011649786], ws=[3.333104812048669, 2.6752189456946054, 0.8217226054813436, 3.0, 3.93434343589221], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757622], res_norm=1.758e-01
2026-01-26 14:30:01,704 - INFO - integration_test - Dyn residual k=2: pred=[3.5373930280173345, 2.89491492839875, 0.8217226054813436, 3.0, 4.23434343589221], ws=[3.5373930280173345, 2.89491492839875, 0.8217226054813436, 3.0, 4.058585860134634], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757667], res_norm=1.758e-01
2026-01-26 14:30:01,719 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:01,769 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:01,788 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:01,828 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:01,848 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:01,889 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:01,908 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:01,950 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:01,968 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:02,023 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:02,053 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:02,105 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:02,125 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:02,169 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:02,187 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:02,228 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:02,248 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:02,289 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:02,308 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:02,349 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:02,368 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:02,408 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:02,972 - INFO - integration_test - Step 16: MPC solve successful
2026-01-26 14:30:02,977 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-26 14:30:02,977 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:02,977 - INFO - integration_test - === Applying control at step 16 ===
2026-01-26 14:30:02,977 - INFO - integration_test -   Control dict from planner: {'a': 8.77656452870291e-09, 'w': -0.1295554651596538}
2026-01-26 14:30:02,977 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:02,977 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:02,978 - INFO - integration_test - Step 16 completed in 1.317s
2026-01-26 14:30:03,031 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-26 14:30:03,032 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.130234   2.45419351 0.80876706 3.00000003 4.20000001]
2026-01-26 14:30:03,032 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.415m, drift=0.103m)
2026-01-26 14:30:03,032 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-26 14:30:03,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:03,048 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.130, 2.454), path_start=(0.000, 0.000), dist=3.978m
2026-01-26 14:30:03,048 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-26 14:30:03,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:03,075 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:03,075 - INFO - integration_test - Warmstart k=0: x0=3.130234004120539 , y0=2.454193505044458 , psi0=0.8087670589653781 , v0=3.0000000291317437 , spline0=4.2000000066529015 , a0=0.0 , w0=0.0
2026-01-26 14:30:03,075 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:03,076 - INFO - integration_test - Dyn residual k=0: pred=[3.337351279742383, 2.6712244611011684, 0.8087670589653781, 3.0000000291317437, 4.500000009566076], ws=[3.337351277731154, 2.6712244589936716, 0.8087670589653779, 3.0, 3.934343437098676], res=[2.011228961151801e-09, 2.107496843706258e-09, 2.220446049250313e-16, 2.913174368401883e-08, 0.5656565724673999], res_norm=5.657e-01
2026-01-26 14:30:03,077 - INFO - integration_test - Dyn residual k=1: pred=[3.544468551341769, 2.8882554129428852, 0.8087670589653779, 3.0, 4.234343437098676], ws=[3.544468551341769, 2.8882554129428852, 0.8087670589653779, 3.0, 4.0585858613411006], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-26 14:30:03,078 - INFO - integration_test - Dyn residual k=2: pred=[3.7515858249523837, 3.105286366892099, 0.8087670589653779, 3.0, 4.3585858613411], ws=[3.7515858249523837, 3.105286366892099, 0.8087670589653779, 3.0, 4.645454552107446], res=[0.0, 0.0, 0.0, 0.0, -0.2868686907663456], res_norm=2.869e-01
2026-01-26 14:30:03,092 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,143 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,162 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,203 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,222 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,265 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,283 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,325 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,343 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,384 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,401 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,442 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,462 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,503 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,521 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,565 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,584 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,624 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,643 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,686 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:03,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:03,746 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,308 - INFO - integration_test - Step 17: MPC solve successful
2026-01-26 14:30:04,312 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-26 14:30:04,313 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:04,313 - INFO - integration_test - === Applying control at step 17 ===
2026-01-26 14:30:04,313 - INFO - integration_test -   Control dict from planner: {'a': 8.509540657754955e-09, 'w': -0.1154769794103364}
2026-01-26 14:30:04,313 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:04,313 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:04,314 - INFO - integration_test - Step 17 completed in 1.283s
2026-01-26 14:30:04,366 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-26 14:30:04,367 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.33859977 2.67002379 0.79721936 3.00000003 4.50000001]
2026-01-26 14:30:04,367 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.407m, drift=0.403m)
2026-01-26 14:30:04,367 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-26 14:30:04,368 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:04,381 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.339, 2.670), path_start=(0.000, 0.000), dist=4.275m
2026-01-26 14:30:04,381 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-26 14:30:04,384 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:04,407 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:04,408 - INFO - integration_test - Warmstart k=0: x0=3.3385997666829397 , y0=2.670023787096819 , psi0=0.7972193610243445 , v0=3.0000000299826977 , spline0=4.500000009651171 , a0=0.0 , w0=0.0
2026-01-26 14:30:04,408 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:04,408 - INFO - integration_test - Dyn residual k=0: pred=[3.54820938526754, 2.884648598327441, 0.7972193610243445, 3.0000000299826977, 4.800000012649441], ws=[3.5482093831726527, 2.884648596182431, 0.7972193610243448, 3.0, 4.058585862582808], res=[2.0948873746817753e-09, 2.1450099474407125e-09, -2.220446049250313e-16, 2.99826976579709e-08, 0.7414141500666336], res_norm=7.414e-01
2026-01-26 14:30:04,409 - INFO - integration_test - Dyn residual k=1: pred=[3.7578189996623657, 3.099273405268043, 0.7972193610243448, 3.0, 4.358585862582808], ws=[3.7578189996623657, 3.099273405268043, 0.7972193610243448, 3.0, 4.645454555105716], res=[0.0, 0.0, 0.0, 0.0, -0.2868686925229085], res_norm=2.869e-01
2026-01-26 14:30:04,410 - INFO - integration_test - Dyn residual k=2: pred=[3.9674286161520786, 3.313898214353655, 0.7972193610243448, 3.0, 4.945454555105716], ws=[3.9674286161520786, 3.313898214353655, 0.7972193610243448, 3.0, 5.046464656115817], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-26 14:30:04,425 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,476 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,495 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,538 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,559 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,600 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,617 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,659 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,679 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,720 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,738 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,779 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,797 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,838 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,857 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,900 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,918 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:04,959 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:04,977 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:05,018 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:05,037 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:05,081 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:05,666 - INFO - integration_test - Step 18: MPC solve successful
2026-01-26 14:30:05,671 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-26 14:30:05,671 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:05,671 - INFO - integration_test - === Applying control at step 18 ===
2026-01-26 14:30:05,671 - INFO - integration_test -   Control dict from planner: {'a': 1.718461241091897e-10, 'w': -0.10814772557055828}
2026-01-26 14:30:05,671 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:05,671 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:05,673 - INFO - integration_test - Step 18 completed in 1.306s
2026-01-26 14:30:05,724 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-26 14:30:05,724 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54936585 2.88351099 0.78640459 3.00000003 4.80000001]
2026-01-26 14:30:05,725 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.357m, drift=0.293m)
2026-01-26 14:30:05,725 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-26 14:30:05,725 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:05,741 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.549, 2.884), path_start=(0.000, 0.000), dist=4.573m
2026-01-26 14:30:05,741 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-26 14:30:05,746 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:05,783 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:05,783 - INFO - integration_test - Warmstart k=0: x0=3.5493658472749465 , y0=2.883510985497162 , psi0=0.7864045884672887 , v0=3.000000029999882 , spline0=4.80000001265116 , a0=0.0 , w0=0.0
2026-01-26 14:30:05,783 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:05,785 - INFO - integration_test - Dyn residual k=0: pred=[3.761284281355286, 3.0958564095046732, 0.7864045884672887, 3.000000029999882, 5.1000000156511485], ws=[3.76128427923611, 3.0958564073812274, 0.7864045884672888, 3.0, 4.645454558105705], res=[2.119175945836105e-09, 2.123445863588813e-09, -1.1102230246251565e-16, 2.999988213403526e-08, 0.45454545754544373], res_norm=4.545e-01
2026-01-26 14:30:05,786 - INFO - integration_test - Dyn residual k=1: pred=[3.9732027111972736, 3.308201829265293, 0.7864045884672888, 3.0, 4.945454558105705], ws=[3.9732027111972736, 3.308201829265293, 0.7864045884672888, 3.0, 5.046464659115806], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.010e-01
2026-01-26 14:30:05,788 - INFO - integration_test - Dyn residual k=2: pred=[4.185121143158437, 3.5205472511493583, 0.7864045884672888, 3.0, 5.346464659115806], ws=[4.185121143158437, 3.5205472511493583, 0.7864045884672888, 3.0, 5.144444457095604], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:30:05,811 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:05,873 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:05,892 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:05,933 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:05,952 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:05,993 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:06,011 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:06,053 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:06,076 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:06,123 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:06,142 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:06,183 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:06,201 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:06,242 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:06,262 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:06,304 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:06,323 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:06,364 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:06,384 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:06,424 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:06,442 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:06,486 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,126 - INFO - integration_test - Step 19: MPC solve successful
2026-01-26 14:30:07,130 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-26 14:30:07,131 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:07,131 - INFO - integration_test - === Applying control at step 19 ===
2026-01-26 14:30:07,131 - INFO - integration_test -   Control dict from planner: {'a': -6.526888285576143e-10, 'w': -0.1350892742689102}
2026-01-26 14:30:07,131 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:07,131 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:07,132 - INFO - integration_test - Step 19 completed in 1.408s
2026-01-26 14:30:07,183 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-26 14:30:07,183 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.76271209 3.09441858 0.77289566 3.00000003 5.10000002]
2026-01-26 14:30:07,184 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.339m, drift=0.184m)
2026-01-26 14:30:07,184 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-26 14:30:07,184 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:07,198 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.763, 3.094), path_start=(0.000, 0.000), dist=4.872m
2026-01-26 14:30:07,198 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-26 14:30:07,201 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:07,225 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:07,225 - INFO - integration_test - Warmstart k=0: x0=3.7627120935248697 , y0=3.0944185774327773 , psi0=0.7728956610403976 , v0=3.0000000299346135 , spline0=5.100000015644621 , a0=0.0 , w0=0.0
2026-01-26 14:30:07,225 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:07,226 - INFO - integration_test - Dyn residual k=0: pred=[3.9774796629537734, 3.303881922478343, 0.7728956610403976, 3.0000000299346135, 5.4000000186380825], ws=[3.9774796608107787, 3.3038819203882754, 0.7728956610403976, 3.0, 5.046464662109267], res=[2.142994670606413e-09, 2.0900676744872726e-09, 0.0, 2.993461345468518e-08, 0.3535353565288153], res_norm=3.535e-01
2026-01-26 14:30:07,227 - INFO - integration_test - Dyn residual k=1: pred=[4.192247228096687, 3.5133452633437736, 0.7728956610403976, 3.0, 5.346464662109267], ws=[4.192247228096687, 3.5133452633437736, 0.7728956610403976, 3.0, 5.1444444600890655], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:30:07,227 - INFO - integration_test - Dyn residual k=2: pred=[4.407014795382596, 3.722808606299272, 0.7728956610403976, 3.0, 5.444444460089065], ws=[4.407014795382596, 3.722808606299272, 0.7728956610403976, 3.0, 5.747474763119368], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:07,242 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,294 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,312 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,352 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,372 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,412 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,430 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,472 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,491 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,531 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,551 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,593 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,612 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,653 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,671 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,713 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,731 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,771 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,790 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,831 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:07,850 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:07,891 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:08,477 - INFO - integration_test - Step 20: MPC solve successful
2026-01-26 14:30:08,482 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-26 14:30:08,482 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:08,482 - INFO - integration_test - === Applying control at step 20 ===
2026-01-26 14:30:08,482 - INFO - integration_test -   Control dict from planner: {'a': 6.527256148528078e-10, 'w': -0.04751868727236357}
2026-01-26 14:30:08,482 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:08,482 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:08,483 - INFO - integration_test - Step 20 completed in 1.300s
2026-01-26 14:30:08,533 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-26 14:30:08,533 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.97797652 3.30337086 0.76814379 3.00000003 5.40000002]
2026-01-26 14:30:08,534 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.356m, drift=0.074m)
2026-01-26 14:30:08,534 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-26 14:30:08,534 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:08,548 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.978, 3.303), path_start=(0.000, 0.000), dist=5.171m
2026-01-26 14:30:08,548 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-26 14:30:08,551 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:08,577 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:08,577 - INFO - integration_test - Warmstart k=0: x0=3.977976524928888 , y0=3.3033708615039803 , psi0=0.7681437923131613 , v0=3.000000029999886 , spline0=5.40000001864461 , a0=0.0 , w0=0.0
2026-01-26 14:30:08,577 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:08,578 - INFO - integration_test - Dyn residual k=0: pred=[4.193737008186638, 3.511811298234418, 0.7681437923131613, 3.000000029999886, 5.700000021644598], ws=[4.193737006029041, 3.5118112961500216, 0.7681437923131611, 3.0, 5.144444463089054], res=[2.157596767915493e-09, 2.0843962111882774e-09, 2.220446049250313e-16, 2.999988613083815e-08, 0.5555555585555441], res_norm=5.556e-01
2026-01-26 14:30:08,579 - INFO - integration_test - Dyn residual k=1: pred=[4.409497487129194, 3.7202517307960625, 0.7681437923131611, 3.0, 5.444444463089054], ws=[4.409497487129194, 3.7202517307960625, 0.7681437923131611, 3.0, 5.747474766119357], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:08,580 - INFO - integration_test - Dyn residual k=2: pred=[4.625257968229347, 3.9286921654421034, 0.7681437923131611, 3.0, 6.047474766119357], ws=[4.625257968229347, 3.9286921654421034, 0.7681437923131611, 3.0, 5.643434362078953], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-26 14:30:08,594 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:08,645 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:08,666 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:08,707 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:08,727 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:08,767 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:08,785 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:08,826 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:08,846 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:08,887 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:08,906 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:08,946 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:08,964 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:09,004 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:09,022 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:09,064 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:09,082 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:09,123 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:09,142 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:09,181 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:09,199 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:09,238 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,136 - INFO - integration_test - Step 21: MPC solve successful
2026-01-26 14:30:10,141 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-26 14:30:10,141 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:10,141 - INFO - integration_test - === Applying control at step 21 ===
2026-01-26 14:30:10,141 - INFO - integration_test -   Control dict from planner: {'a': -3.615040551168599e-07, 'w': -0.10353165518987244}
2026-01-26 14:30:10,141 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:10,141 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:10,143 - INFO - integration_test - Step 21 completed in 1.610s
2026-01-26 14:30:10,191 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-26 14:30:10,191 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.19481215 3.51069068 0.75779063 2.99999999 5.70000002]
2026-01-26 14:30:10,192 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.336m, drift=0.374m)
2026-01-26 14:30:10,192 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-26 14:30:10,192 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:10,206 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.195, 3.511), path_start=(0.000, 0.000), dist=5.470m
2026-01-26 14:30:10,206 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-26 14:30:10,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:10,232 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:10,232 - INFO - integration_test - Warmstart k=0: x0=4.19481215194226 , y0=3.510690681266855 , psi0=0.7577906267941741 , v0=2.999999993849481 , spline0=5.700000018029558 , a0=0.0 , w0=0.0
2026-01-26 14:30:10,232 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:10,233 - INFO - integration_test - Dyn residual k=0: pred=[4.4127190489964745, 3.7168861803621867, 0.7577906267941741, 2.999999993849481, 6.000000017414505], ws=[4.4127190489964745, 3.7168861803621867, 0.7577906267941739, 2.999999993849481, 5.747474764889253], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.2525252525252526], res_norm=2.525e-01
2026-01-26 14:30:10,234 - INFO - integration_test - Dyn residual k=1: pred=[4.630625946050689, 3.9230816794575185, 0.7577906267941739, 2.999999993849481, 6.047474764274201], ws=[4.630625946050689, 3.9230816794575185, 0.7577906267941739, 2.999999993849481, 5.643434360233797], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-26 14:30:10,234 - INFO - integration_test - Dyn residual k=2: pred=[4.848532843104903, 4.12927717855285, 0.7577906267941739, 2.999999993849481, 5.9434343596187444], ws=[4.848532843104903, 4.12927717855285, 0.7577906267941739, 2.999999993849481, 6.246464662649047], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:10,250 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,300 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,320 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,361 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,380 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,420 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,438 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,481 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,499 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,540 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,560 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,603 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,621 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,661 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,681 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,721 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,740 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,781 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,800 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,840 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:10,860 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:10,901 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:11,479 - INFO - integration_test - Step 22: MPC solve successful
2026-01-26 14:30:11,484 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-26 14:30:11,484 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:11,484 - INFO - integration_test - === Applying control at step 22 ===
2026-01-26 14:30:11,484 - INFO - integration_test -   Control dict from planner: {'a': 3.607041216644493e-07, 'w': -0.07770549031077462}
2026-01-26 14:30:11,484 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:11,484 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:11,485 - INFO - integration_test - Step 22 completed in 1.294s
2026-01-26 14:30:11,538 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-26 14:30:11,538 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.41351798 3.71603748 0.75002008 3.00000003 6.00000002]
2026-01-26 14:30:11,539 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.293m, drift=0.264m)
2026-01-26 14:30:11,539 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-26 14:30:11,539 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:11,553 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.414, 3.716), path_start=(0.000, 0.000), dist=5.770m
2026-01-26 14:30:11,554 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-26 14:30:11,556 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:11,581 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:11,581 - INFO - integration_test - Warmstart k=0: x0=4.413517979484782 , y0=3.716037482684398 , psi0=0.7500200777630966 , v0=3.000000029919893 , spline0=6.000000021021547 , a0=0.0 , w0=0.0
2026-01-26 14:30:11,582 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:11,582 - INFO - integration_test - Dyn residual k=0: pred=[4.633020536557387, 3.9205335198924116, 0.7500200777630966, 3.000000029919893, 6.300000024013537], ws=[4.633020534368223, 3.9205335178529115, 0.7500200777630965, 3.0, 5.64343436445589], res=[2.1891644053084747e-09, 2.0395001243400657e-09, 1.1102230246251565e-16, 2.991989278555707e-08, 0.6565656595576463], res_norm=6.566e-01
2026-01-26 14:30:11,583 - INFO - integration_test - Dyn residual k=1: pred=[4.8525230892516635, 4.125029553021426, 0.7500200777630965, 3.0, 5.94343436445589], ws=[4.8525230892516635, 4.125029553021426, 0.7500200777630965, 3.0, 6.246464667486193], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:11,584 - INFO - integration_test - Dyn residual k=2: pred=[5.072025644135104, 4.32952558818994, 0.7500200777630965, 3.0, 6.546464667486193], ws=[5.072025644135104, 4.32952558818994, 0.7500200777630965, 3.0, 6.344444465465991], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:30:11,599 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:11,650 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:11,669 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:11,712 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:11,730 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:11,772 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:11,789 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:11,830 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:11,849 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:11,889 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:11,908 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:11,949 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:11,967 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:12,008 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:12,026 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:12,068 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:12,086 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:12,128 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:12,148 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:12,193 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:12,213 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:12,259 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:12,839 - INFO - integration_test - Step 23: MPC solve successful
2026-01-26 14:30:12,843 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-26 14:30:12,844 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:12,844 - INFO - integration_test - === Applying control at step 23 ===
2026-01-26 14:30:12,844 - INFO - integration_test -   Control dict from planner: {'a': 5.798289057836972e-10, 'w': -0.07823948988501023}
2026-01-26 14:30:12,844 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:12,844 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:12,845 - INFO - integration_test - Step 23 completed in 1.307s
2026-01-26 14:30:12,896 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-26 14:30:12,897 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.63381828 3.91967275 0.74219613 3.00000003 6.30000002]
2026-01-26 14:30:12,897 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.288m, drift=0.155m)
2026-01-26 14:30:12,897 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-26 14:30:12,898 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:12,912 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.634, 3.920), path_start=(0.000, 0.000), dist=6.069m
2026-01-26 14:30:12,912 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-26 14:30:12,914 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:12,938 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:12,938 - INFO - integration_test - Warmstart k=0: x0=4.633818276322782 , y0=3.919672749533857 , psi0=0.7421961287745956 , v0=3.0000000299778757 , spline0=6.300000024019335 , a0=0.0 , w0=0.0
2026-01-26 14:30:12,938 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:12,939 - INFO - integration_test - Dyn residual k=0: pred=[4.854914065339733, 4.122445168461197, 0.7421961287745956, 3.0000000299778757, 6.600000027017122], ws=[4.854914063130406, 4.122445166434968, 0.7421961287745957, 3.0, 6.246464670483981], res=[2.2093269436140872e-09, 2.0262289623929064e-09, -1.1102230246251565e-16, 2.997787573733035e-08, 0.3535353565331416], res_norm=3.535e-01
2026-01-26 14:30:12,940 - INFO - integration_test - Dyn residual k=1: pred=[5.076009849938029, 4.325217583336078, 0.7421961287745957, 3.0, 6.546464670483981], ws=[5.076009849938029, 4.325217583336078, 0.7421961287745957, 3.0, 6.344444468463779], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:30:12,940 - INFO - integration_test - Dyn residual k=2: pred=[5.297105636745653, 4.527990000237189, 0.7421961287745957, 3.0, 6.644444468463779], ws=[5.297105636745653, 4.527990000237189, 0.7421961287745957, 3.0, 6.745454569473879], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 14:30:12,955 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,005 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,025 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,069 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,088 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,129 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,148 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,189 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,208 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,250 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,269 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,310 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,327 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,368 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,386 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,428 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,448 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,490 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,508 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,550 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:13,569 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:13,612 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:14,569 - INFO - integration_test - Step 24: MPC solve successful
2026-01-26 14:30:14,574 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-26 14:30:14,574 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:14,574 - INFO - integration_test - === Applying control at step 24 ===
2026-01-26 14:30:14,574 - INFO - integration_test -   Control dict from planner: {'a': -8.722926711015187e-05, 'w': -0.344243186070656}
2026-01-26 14:30:14,574 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:14,574 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:14,575 - INFO - integration_test - Step 24 completed in 1.679s
2026-01-26 14:30:14,624 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-26 14:30:14,624 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.85835988 4.11859967 0.70777181 2.99999131 6.59999915]
2026-01-26 14:30:14,625 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.326m, drift=0.045m)
2026-01-26 14:30:14,625 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-26 14:30:14,625 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:14,640 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.858, 4.119), path_start=(0.000, 0.000), dist=6.369m
2026-01-26 14:30:14,640 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-26 14:30:14,643 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:14,675 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:14,675 - INFO - integration_test - Warmstart k=0: x0=4.858359878801201 , y0=4.118599674758025 , psi0=0.70777181016753 , v0=2.9999913070511646 , spline0=6.599999154724451 , a0=0.0 , w0=0.0
2026-01-26 14:30:14,675 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:14,676 - INFO - integration_test - Dyn residual k=0: pred=[5.08630293878066, 4.3136418236157175, 0.70777181016753, 2.9999913070511646, 6.899998285429568], ws=[5.08630293878066, 4.3136418236157175, 0.7077718101675301, 2.9999913070511646, 6.344442729874013], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-26 14:30:14,677 - INFO - integration_test - Dyn residual k=1: pred=[5.31424599876012, 4.50868397247341, 0.7077718101675301, 2.9999913070511646, 6.644441860579129], ws=[5.31424599876012, 4.50868397247341, 0.7077718101675301, 2.9999913070511646, 6.74545196158923], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 14:30:14,678 - INFO - integration_test - Dyn residual k=2: pred=[5.542189058739579, 4.703726121331102, 0.7077718101675301, 2.9999913070511646, 7.045451092294346], ws=[5.542189058739579, 4.703726121331102, 0.7077718101675301, 2.9999913070511646, 6.843430890274145], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:30:14,700 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:14,752 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:14,771 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:14,813 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:14,831 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:14,874 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:14,894 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:14,934 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:14,953 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:14,993 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:15,012 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:15,053 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:15,073 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:15,115 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:15,134 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:15,175 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:15,192 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:15,235 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:15,255 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:15,297 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:15,316 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:15,356 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,066 - INFO - integration_test - Step 25: MPC solve successful
2026-01-26 14:30:16,071 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-26 14:30:16,071 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:16,071 - INFO - integration_test - === Applying control at step 25 ===
2026-01-26 14:30:16,072 - INFO - integration_test -   Control dict from planner: {'a': 8.722816653375215e-05, 'w': 0.30233038553851094}
2026-01-26 14:30:16,072 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:16,072 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:16,073 - INFO - integration_test - Step 25 completed in 1.449s
2026-01-26 14:30:16,129 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-26 14:30:16,129 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.08332041 4.31705785 0.73800485 3.00000003 6.89999916]
2026-01-26 14:30:16,130 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.289m, drift=0.345m)
2026-01-26 14:30:16,130 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-26 14:30:16,130 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:16,144 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.083, 4.317), path_start=(0.000, 0.000), dist=6.669m
2026-01-26 14:30:16,144 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-26 14:30:16,146 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:16,169 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:16,170 - INFO - integration_test - Warmstart k=0: x0=5.083320407476191 , y0=4.3170578457972795 , psi0=0.7380048487213811 , v0=3.000000029867818 , spline0=6.899999157711234 , a0=0.0 , w0=0.0
2026-01-26 14:30:16,170 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:16,171 - INFO - integration_test - Dyn residual k=0: pred=[5.305264128018464, 4.518901812028432, 0.7380048487213811, 3.000000029867818, 7.199999160698016], ws=[5.305264125808805, 4.518901810018885, 0.7380048487213813, 3.0, 6.745453703165778], res=[2.2096582341646354e-09, 2.009546307135679e-09, -2.220446049250313e-16, 2.986781799663163e-08, 0.4545454575322374], res_norm=4.545e-01
2026-01-26 14:30:16,171 - INFO - integration_test - Dyn residual k=1: pred=[5.52720784414142, 4.720745774240491, 0.7380048487213813, 3.0, 7.045453703165778], ws=[5.52720784414142, 4.720745774240491, 0.7380048487213813, 3.0, 6.843433501145577], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:30:16,172 - INFO - integration_test - Dyn residual k=2: pred=[5.749151562474034, 4.922589738462097, 0.7380048487213813, 3.0, 7.1434335011455765], ws=[5.749151562474034, 4.922589738462097, 0.7380048487213813, 3.0, 7.446463804175879], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:16,186 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,235 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,254 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,296 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,315 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,357 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,375 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,415 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,434 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,476 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,495 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,536 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,554 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,598 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,618 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,659 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,678 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,719 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,737 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,778 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:16,797 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:16,837 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:17,634 - INFO - integration_test - Step 26: MPC solve successful
2026-01-26 14:30:17,638 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-26 14:30:17,639 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:17,639 - INFO - integration_test - === Applying control at step 26 ===
2026-01-26 14:30:17,639 - INFO - integration_test -   Control dict from planner: {'a': 1.0716914736808722e-09, 'w': -0.17177227947557921}
2026-01-26 14:30:17,639 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:17,639 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:17,640 - INFO - integration_test - Step 26 completed in 1.511s
2026-01-26 14:30:17,693 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-26 14:30:17,693 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.30698673 4.51698574 0.72082762 3.00000003 7.19999916]
2026-01-26 14:30:17,694 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.252m, drift=0.235m)
2026-01-26 14:30:17,694 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-26 14:30:17,694 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:17,708 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.307, 4.517), path_start=(0.000, 0.000), dist=6.969m
2026-01-26 14:30:17,708 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-26 14:30:17,711 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:17,734 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:17,734 - INFO - integration_test - Warmstart k=0: x0=5.3069867311273144 , y0=4.5169857441960195 , psi0=0.7208276207738231 , v0=3.000000029974987 , spline0=7.199999160708733 , a0=0.0 , w0=0.0
2026-01-26 14:30:17,734 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:17,735 - INFO - integration_test - Dyn residual k=0: pred=[5.532364658761344, 4.714987743008883, 0.7208276207738231, 3.000000029974987, 7.4999991637062315], ws=[5.532364656509444, 4.714987741030513, 0.7208276207738233, 3.0, 6.843433504143076], res=[2.2518999998055733e-09, 1.978369468247365e-09, -2.220446049250313e-16, 2.9974986937020276e-08, 0.6565656595631557], res_norm=6.566e-01
2026-01-26 14:30:17,736 - INFO - integration_test - Dyn residual k=1: pred=[5.757742581891574, 4.912989737865007, 0.7208276207738233, 3.0, 7.143433504143076], ws=[5.757742581891574, 4.912989737865007, 0.7208276207738233, 3.0, 7.446463807173378], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:17,737 - INFO - integration_test - Dyn residual k=2: pred=[5.983120507273704, 5.110991734699501, 0.7208276207738233, 3.0, 7.746463807173378], ws=[5.983120507273704, 5.110991734699501, 0.7208276207738233, 3.0, 7.342423403132974], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-26 14:30:17,751 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:17,810 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:17,843 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:17,903 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:17,922 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:17,966 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:17,985 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:18,025 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:18,043 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:18,085 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:18,103 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:18,145 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:18,163 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:18,203 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:18,221 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:18,262 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:18,281 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:18,322 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:18,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:18,382 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:18,400 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:18,440 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,365 - INFO - integration_test - Step 27: MPC solve successful
2026-01-26 14:30:19,370 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-26 14:30:19,370 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:19,370 - INFO - integration_test - === Applying control at step 27 ===
2026-01-26 14:30:19,370 - INFO - integration_test -   Control dict from planner: {'a': 2.4796725833443163e-10, 'w': -0.04128986643762136}
2026-01-26 14:30:19,370 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:19,370 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:19,372 - INFO - integration_test - Step 27 completed in 1.678s
2026-01-26 14:30:19,422 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-26 14:30:19,423 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.53277279 4.71452189 0.71669863 3.00000003 7.49999916]
2026-01-26 14:30:19,423 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.261m, drift=0.126m)
2026-01-26 14:30:19,423 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-26 14:30:19,424 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:19,437 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.533, 4.715), path_start=(0.000, 0.000), dist=7.269m
2026-01-26 14:30:19,437 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-26 14:30:19,440 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:19,462 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:19,462 - INFO - integration_test - Warmstart k=0: x0=5.532772791592613 , y0=4.714521889837549 , psi0=0.716698634130061 , v0=3.0000000299997835 , spline0=7.499999163708711 , a0=0.0 , w0=0.0
2026-01-26 14:30:19,462 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:19,463 - INFO - integration_test - Dyn residual k=0: pred=[5.758966343335524, 4.911591621024036, 0.716698634130061, 3.0000000299997835, 7.79999916670869], ws=[5.758966341073605, 4.911591619053353, 0.716698634130061, 3.0, 7.446463810173357], res=[2.2619186523797907e-09, 1.9706831722032803e-09, 0.0, 2.9999783546230674e-08, 0.35353535653533275], res_norm=3.535e-01
2026-01-26 14:30:19,464 - INFO - integration_test - Dyn residual k=1: pred=[5.985159890554597, 5.108661348269157, 0.716698634130061, 3.0, 7.746463810173357], ws=[5.985159890554597, 5.108661348269157, 0.716698634130061, 3.0, 7.342423406132953], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-26 14:30:19,465 - INFO - integration_test - Dyn residual k=2: pred=[6.211353440035588, 5.305731077484961, 0.716698634130061, 3.0, 7.642423406132953], ws=[6.211353440035588, 5.305731077484961, 0.716698634130061, 3.0, 7.945453709163257], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030365], res_norm=3.030e-01
2026-01-26 14:30:19,481 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:19,531 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,550 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:19,594 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,613 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:19,655 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,674 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:19,716 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,733 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:19,774 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,793 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:19,833 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,851 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:19,894 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,913 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:19,952 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:19,970 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:20,011 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:20,030 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:20,071 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:20,091 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:20,131 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:20,753 - INFO - integration_test - Step 28: MPC solve successful
2026-01-26 14:30:20,758 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-26 14:30:20,758 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:20,758 - INFO - integration_test - === Applying control at step 28 ===
2026-01-26 14:30:20,758 - INFO - integration_test -   Control dict from planner: {'a': -2.1289333575575517e-08, 'w': -0.06270535630984869}
2026-01-26 14:30:20,758 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:20,758 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:20,759 - INFO - integration_test - Step 28 completed in 1.337s
2026-01-26 14:30:20,812 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-26 14:30:20,813 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.75958273 4.91088115 0.7104281  3.00000003 7.79999917]
2026-01-26 14:30:20,813 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.309m, drift=0.426m)
2026-01-26 14:30:20,813 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-26 14:30:20,814 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:20,827 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.760, 4.911), path_start=(0.000, 0.000), dist=7.569m
2026-01-26 14:30:20,827 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-26 14:30:20,829 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:20,853 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:20,853 - INFO - integration_test - Warmstart k=0: x0=5.7595827253117795 , y0=4.910881154466891 , psi0=0.7104280984990761 , v0=3.00000002787085 , spline0=7.799999166495796 , a0=0.0 , w0=0.0
2026-01-26 14:30:20,853 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:20,854 - INFO - integration_test - Dyn residual k=0: pred=[5.987007554659067, 5.106528665743186, 0.7104280984990761, 3.00000002787085, 8.099999169282881], ws=[5.987007552546226, 5.106528663925565, 0.7104280984990758, 3.0, 7.342423408920039], res=[2.1128414573468035e-09, 1.8176207206010986e-09, 2.220446049250313e-16, 2.7870850072275744e-08, 0.7575757603628421], res_norm=7.576e-01
2026-01-26 14:30:20,855 - INFO - integration_test - Dyn residual k=1: pred=[6.214432379780673, 5.30217617338424, 0.7104280984990758, 3.0, 7.642423408920039], ws=[6.214432379780673, 5.30217617338424, 0.7104280984990758, 3.0, 7.945453711950343], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030365], res_norm=3.030e-01
2026-01-26 14:30:20,855 - INFO - integration_test - Dyn residual k=2: pred=[6.44185720701512, 5.497823682842914, 0.7104280984990758, 3.0, 8.245453711950343], ws=[6.44185720701512, 5.497823682842914, 0.7104280984990758, 3.0, 8.043433509930143], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:30:20,872 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:20,922 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:20,942 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:20,983 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,001 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,042 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,061 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,109 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,131 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,171 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,190 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,230 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,248 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,290 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,309 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,349 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,367 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,407 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,426 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,467 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:21,486 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:21,526 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:22,590 - INFO - integration_test - Step 29: MPC solve successful
2026-01-26 14:30:22,595 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-26 14:30:22,595 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:22,595 - INFO - integration_test - === Applying control at step 29 ===
2026-01-26 14:30:22,595 - INFO - integration_test -   Control dict from planner: {'a': 1.0645810250715824e-08, 'w': -0.06669656779708967}
2026-01-26 14:30:22,596 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:22,596 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:22,597 - INFO - integration_test - Step 29 completed in 1.784s
2026-01-26 14:30:22,651 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-26 14:30:22,651 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.98765832 5.1057688  0.70375844 3.00000003 8.09999917]
2026-01-26 14:30:22,652 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.243m, drift=0.316m)
2026-01-26 14:30:22,652 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-26 14:30:22,652 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:22,665 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.988, 5.106), path_start=(0.000, 0.000), dist=7.869m
2026-01-26 14:30:22,665 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-26 14:30:22,668 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:22,692 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:22,693 - INFO - integration_test - Warmstart k=0: x0=5.987658317019966 , y0=5.1057687952739705 , psi0=0.7037584417193671 , v0=3.000000028935431 , spline0=8.09999916938934 , a0=0.0 , w0=0.0
2026-01-26 14:30:22,693 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:22,694 - INFO - integration_test - Dyn residual k=0: pred=[6.216382980122979, 5.299895120702902, 0.7037584417193671, 3.000000028935431, 8.399999172282884], ws=[6.216382977916896, 5.299895118830525, 0.703758441719367, 3.0, 7.945453714843886], res=[2.2060824278469227e-09, 1.8723769201756113e-09, 1.1102230246251565e-16, 2.893543094018014e-08, 0.4545454574389982], res_norm=4.545e-01
2026-01-26 14:30:22,694 - INFO - integration_test - Dyn residual k=1: pred=[6.445107638813826, 5.49402144238708, 0.703758441719367, 3.0, 8.245453714843887], ws=[6.445107638813827, 5.49402144238708, 0.703758441719367, 3.0, 8.043433512823686], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:30:22,695 - INFO - integration_test - Dyn residual k=2: pred=[6.673832299710757, 5.688147765943635, 0.703758441719367, 3.0, 8.343433512823687], ws=[6.673832299710757, 5.688147765943635, 0.703758441719367, 3.0, 8.444443613833787], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 14:30:22,711 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:22,761 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:22,780 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:22,823 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:22,842 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:22,886 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:22,905 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:22,946 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:22,964 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:23,005 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:23,023 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:23,064 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:23,085 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:23,126 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:23,146 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:23,186 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:23,204 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:23,246 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:23,265 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:23,309 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:23,328 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:23,370 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,115 - INFO - integration_test - Step 30: MPC solve successful
2026-01-26 14:30:24,120 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-26 14:30:24,120 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:24,120 - INFO - integration_test - === Applying control at step 30 ===
2026-01-26 14:30:24,120 - INFO - integration_test -   Control dict from planner: {'a': 1.0482438653531753e-08, 'w': -0.05510252082977609}
2026-01-26 14:30:24,120 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:24,121 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:24,122 - INFO - integration_test - Step 30 completed in 1.471s
2026-01-26 14:30:24,172 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-26 14:30:24,172 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[6.21691666 5.29926397 0.69824819 3.00000003 8.39999917]
2026-01-26 14:30:24,173 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.216m, drift=0.206m)
2026-01-26 14:30:24,173 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-26 14:30:24,174 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:24,188 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(6.217, 5.299), path_start=(0.000, 0.000), dist=8.169m
2026-01-26 14:30:24,188 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-26 14:30:24,190 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:24,214 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:24,214 - INFO - integration_test - Warmstart k=0: x0=6.216916663849635 , y0=5.299263974684722 , psi0=0.6982481896363895 , v0=3.0000000299836747 , spline0=8.399999172387707 , a0=0.0 , w0=0.0
2026-01-26 14:30:24,214 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:24,215 - INFO - integration_test - Dyn residual k=0: pred=[6.446707534248148, 5.492127028898106, 0.6982481896363895, 3.0000000299836747, 8.699999175386074], ws=[6.446707531951489, 5.4921270269705245, 0.6982481896363897, 3.0, 8.043433515822052], res=[2.2966588630879414e-09, 1.9275816498520726e-09, -2.220446049250313e-16, 2.998367465423257e-08, 0.6565656595640217], res_norm=6.566e-01
2026-01-26 14:30:24,215 - INFO - integration_test - Dyn residual k=1: pred=[6.676498400053343, 5.684990079256327, 0.6982481896363897, 3.0, 8.343433515822053], ws=[6.676498400053343, 5.684990079256327, 0.6982481896363897, 3.0, 8.444443616832153], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 14:30:24,216 - INFO - integration_test - Dyn residual k=2: pred=[6.906289268155197, 5.877853131542129, 0.6982481896363897, 3.0, 8.744443616832154], ws=[6.906289268155197, 5.877853131542129, 0.6982481896363897, 3.0, 9.047473919862457], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:24,231 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,281 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,300 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,342 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,362 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,403 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,421 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,462 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,482 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,523 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,542 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,584 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,604 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,644 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,663 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,704 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,722 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,763 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,782 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,823 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:24,840 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:24,882 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:25,682 - INFO - integration_test - Step 31: MPC solve successful
2026-01-26 14:30:25,687 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-26 14:30:25,687 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:25,687 - INFO - integration_test - === Applying control at step 31 ===
2026-01-26 14:30:25,687 - INFO - integration_test -   Control dict from planner: {'a': -5.6537494415824505e-09, 'w': -0.06198517822809996}
2026-01-26 14:30:25,687 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:25,687 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:25,688 - INFO - integration_test - Step 31 completed in 1.516s
2026-01-26 14:30:25,739 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-26 14:30:25,740 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[6.44730379 5.49141361 0.69204967 3.00000003 8.69999918]
2026-01-26 14:30:25,741 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.240m, drift=0.096m)
2026-01-26 14:30:25,741 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-26 14:30:25,741 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:25,755 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(6.447, 5.491), path_start=(0.000, 0.000), dist=8.469m
2026-01-26 14:30:25,755 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-26 14:30:25,758 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:25,782 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:25,782 - INFO - integration_test - Warmstart k=0: x0=6.4473037933652915 , y0=5.491413614741312 , psi0=0.6920496718135795 , v0=3.0000000294183 , spline0=8.699999175329538 , a0=0.0 , w0=0.0
2026-01-26 14:30:25,782 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:25,783 - INFO - integration_test - Dyn residual k=0: pred=[6.678285706688922, 5.682848610190035, 0.6920496718135795, 3.0000000294183, 8.999999178271368], ws=[6.678285704423891, 5.6828486083128045, 0.6920496718135793, 3.0, 8.444443619773983], res=[2.2650317177408397e-09, 1.8772308152392725e-09, 1.1102230246251565e-16, 2.941829979619115e-08, 0.5555555584973852], res_norm=5.556e-01
2026-01-26 14:30:25,784 - INFO - integration_test - Dyn residual k=1: pred=[6.90926761548249, 5.874283601884297, 0.6920496718135793, 3.0, 8.744443619773984], ws=[6.90926761548249, 5.874283601884297, 0.6920496718135793, 3.0, 9.047473922804286], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:25,784 - INFO - integration_test - Dyn residual k=2: pred=[7.140249526541089, 6.06571859545579, 0.6920496718135793, 3.0, 9.347473922804287], ws=[7.140249526541089, 6.06571859545579, 0.6920496718135793, 3.0, 8.943433518763882], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 14:30:25,798 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:25,848 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:25,867 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:25,910 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:25,929 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:25,974 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:26,003 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:26,066 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:26,089 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:26,135 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:26,154 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:26,195 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:26,213 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:26,254 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:26,272 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:26,314 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:26,333 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:26,374 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:26,394 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:26,435 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:26,453 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:26,496 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,035 - INFO - integration_test - Step 32: MPC solve successful
2026-01-26 14:30:27,039 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-26 14:30:27,040 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:27,040 - INFO - integration_test - === Applying control at step 32 ===
2026-01-26 14:30:27,040 - INFO - integration_test -   Control dict from planner: {'a': 5.8157156173327245e-09, 'w': -0.05205155464612333}
2026-01-26 14:30:27,040 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:27,040 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:27,041 - INFO - integration_test - Step 32 completed in 1.301s
2026-01-26 14:30:27,092 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-26 14:30:27,093 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[6.67878289 5.6822466  0.68684452 3.00000003 8.99999918]
2026-01-26 14:30:27,093 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.269m, drift=0.396m)
2026-01-26 14:30:27,093 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-26 14:30:27,094 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:27,107 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(6.679, 5.682), path_start=(0.000, 0.000), dist=8.769m
2026-01-26 14:30:27,107 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-26 14:30:27,109 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:27,135 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:27,135 - INFO - integration_test - Warmstart k=0: x0=6.678782887020695 , y0=5.682246598737574 , psi0=0.6868445163489671 , v0=3.0000000299998715 , spline0=8.999999178329524 , a0=0.0 , w0=0.0
2026-01-26 14:30:27,135 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:27,136 - INFO - integration_test - Dyn residual k=0: pred=[6.910758115738676, 5.872476709554008, 0.6868445163489671, 3.0000000299998715, 9.299999181329511], ws=[6.910758113418933, 5.872476707651716, 0.6868445163489669, 3.0, 9.047473925804272], res=[2.3197426202159477e-09, 1.902292545707951e-09, 2.220446049250313e-16, 2.9999871475894224e-08, 0.25252525552523863], res_norm=2.525e-01
2026-01-26 14:30:27,137 - INFO - integration_test - Dyn residual k=1: pred=[7.1427333398171715, 6.062706816565857, 0.6868445163489669, 3.0, 9.347473925804273], ws=[7.1427333398171715, 6.062706816565857, 0.6868445163489669, 3.0, 8.943433521763868], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 14:30:27,138 - INFO - integration_test - Dyn residual k=2: pred=[7.37470856621541, 6.2529369254799985, 0.6868445163489669, 3.0, 9.243433521763869], ws=[7.37470856621541, 6.2529369254799985, 0.6868445163489669, 3.0, 9.546463824794174], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-26 14:30:27,153 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,204 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,222 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,263 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,282 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,323 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,342 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,383 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,402 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,442 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,461 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,504 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,522 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,562 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,581 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,624 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,642 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,685 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,704 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,746 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:27,764 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:27,804 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:28,407 - INFO - integration_test - Step 33: MPC solve successful
2026-01-26 14:30:28,412 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-26 14:30:28,412 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:28,412 - INFO - integration_test - === Applying control at step 33 ===
2026-01-26 14:30:28,412 - INFO - integration_test -   Control dict from planner: {'a': -8.386990705800236e-12, 'w': -0.06275702390577445}
2026-01-26 14:30:28,412 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:28,412 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:28,414 - INFO - integration_test - Step 33 completed in 1.321s
2026-01-26 14:30:28,464 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-26 14:30:28,465 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[6.9113535  5.87174756 0.68056881 3.00000003 9.29999918]
2026-01-26 14:30:28,465 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.206m, drift=0.287m)
2026-01-26 14:30:28,466 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-26 14:30:28,466 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:28,480 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(6.911, 5.872), path_start=(0.000, 0.000), dist=9.069m
2026-01-26 14:30:28,480 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-26 14:30:28,482 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:28,507 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:28,507 - INFO - integration_test - Warmstart k=0: x0=6.91135350486085 , y0=5.871747559512423 , psi0=0.6805688139583898 , v0=3.0000000299990326 , spline0=9.299999181329428 , a0=0.0 , w0=0.0
2026-01-26 14:30:28,507 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:28,508 - INFO - integration_test - Dyn residual k=0: pred=[7.1445179852113165, 6.060518126346447, 0.6805688139583898, 3.0000000299990326, 9.59999918432933], ws=[7.144517982879747, 6.0605181244588024, 0.6805688139583896, 3.0, 8.943433524763773], res=[2.3315696040526745e-09, 1.8876447072102565e-09, 1.1102230246251565e-16, 2.999903259137682e-08, 0.6565656595655582], res_norm=6.566e-01
2026-01-26 14:30:28,509 - INFO - integration_test - Dyn residual k=1: pred=[7.377682460898644, 6.249288689405182, 0.6805688139583896, 3.0, 9.243433524763773], ws=[7.377682460898644, 6.249288689405182, 0.6805688139583896, 3.0, 9.546463827794074], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-26 14:30:28,509 - INFO - integration_test - Dyn residual k=2: pred=[7.610846938917541, 6.438059254351561, 0.6805688139583896, 3.0, 9.846463827794075], ws=[7.610846938917541, 6.438059254351561, 0.6805688139583896, 3.0, 9.644443625773874], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:30:28,524 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:28,574 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:28,594 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:28,637 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:28,656 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:28,698 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:28,717 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:28,758 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:28,777 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:28,818 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:28,836 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:28,878 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:28,897 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:28,943 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:28,964 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:29,007 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:29,025 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:29,068 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:29,088 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:29,130 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:29,148 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:29,189 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:29,792 - INFO - integration_test - Step 34: MPC solve successful
2026-01-26 14:30:29,796 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-26 14:30:29,796 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:29,796 - INFO - integration_test - === Applying control at step 34 ===
2026-01-26 14:30:29,797 - INFO - integration_test -   Control dict from planner: {'a': 8.41943704548479e-12, 'w': -0.05064005628167381}
2026-01-26 14:30:29,797 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:29,797 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:29,798 - INFO - integration_test - Step 34 completed in 1.333s
2026-01-26 14:30:29,882 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-26 14:30:29,882 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[7.14499496 6.05992695 0.67550481 3.00000003 9.59999918]
2026-01-26 14:30:29,883 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.189m, drift=0.177m)
2026-01-26 14:30:29,883 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-26 14:30:29,884 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:29,903 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(7.145, 6.060), path_start=(0.000, 0.000), dist=9.369m
2026-01-26 14:30:29,903 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-26 14:30:29,907 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:29,937 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:29,937 - INFO - integration_test - Warmstart k=0: x0=7.144994955246764 , y0=6.059926947678577 , psi0=0.6755048083302224 , v0=3.0000000299998746 , spline0=9.599999184329414 , a0=0.0 , w0=0.0
2026-01-26 14:30:29,938 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:29,939 - INFO - integration_test - Dyn residual k=0: pred=[7.379112377078075, 6.247514352892927, 0.6755048083302224, 3.0000000299998746, 9.899999187329401], ws=[7.37911237473691, 6.247514351017061, 0.6755048083302224, 3.0, 9.54646383079406], res=[2.341164595520695e-09, 1.8758656850081934e-09, 0.0, 2.999987458451869e-08, 0.35353535653534074], res_norm=3.535e-01
2026-01-26 14:30:29,939 - INFO - integration_test - Dyn residual k=1: pred=[7.613229794227056, 6.4351017543555455, 0.6755048083302224, 3.0, 9.846463830794061], ws=[7.613229794227056, 6.4351017543555455, 0.6755048083302224, 3.0, 9.64444362877386], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:30:29,940 - INFO - integration_test - Dyn residual k=2: pred=[7.847347213717202, 6.62268915769403, 0.6755048083302224, 3.0, 9.944443628773861], ws=[7.847347213717202, 6.62268915769403, 0.6755048083302224, 3.0, 10.247473931804164], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:29,956 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,005 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,024 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,066 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,086 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,128 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,146 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,186 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,204 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,244 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,263 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,304 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,322 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,363 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,381 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,422 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,440 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,482 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,501 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,542 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:30,561 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:30,604 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:31,565 - INFO - integration_test - Step 35: MPC solve successful
2026-01-26 14:30:31,570 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-26 14:30:31,570 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:31,570 - INFO - integration_test - === Applying control at step 35 ===
2026-01-26 14:30:31,570 - INFO - integration_test -   Control dict from planner: {'a': -5.18802044129775e-07, 'w': -0.05084878692071772}
2026-01-26 14:30:31,570 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:31,570 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:31,572 - INFO - integration_test - Step 35 completed in 1.690s
2026-01-26 14:30:31,632 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-26 14:30:31,632 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[7.37958829 6.24691831 0.67041993 2.99999998 9.89999918]
2026-01-26 14:30:31,633 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.230m, drift=0.067m)
2026-01-26 14:30:31,633 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-26 14:30:31,633 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:31,647 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(7.380, 6.247), path_start=(0.000, 0.000), dist=9.669m
2026-01-26 14:30:31,647 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-26 14:30:31,649 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:31,675 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:31,675 - INFO - integration_test - Warmstart k=0: x0=7.379588294732148 , y0=6.246918314840153 , psi0=0.6704199296381507 , v0=2.99999997811967 , spline0=9.899999182141382 , a0=0.0 , w0=0.0
2026-01-26 14:30:31,675 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:31,676 - INFO - integration_test - Dyn residual k=0: pred=[7.614656540925023, 6.433312838147535, 0.6704199296381507, 2.99999997811967, 10.19999917995335], ws=[7.614656540925023, 6.433312838147535, 0.6704199296381508, 2.99999997811967, 9.644443624397795], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-26 14:30:31,677 - INFO - integration_test - Dyn residual k=1: pred=[7.849724787117898, 6.619707361454918, 0.6704199296381508, 2.99999997811967, 9.944443622209763], ws=[7.849724787117898, 6.619707361454918, 0.6704199296381508, 2.99999997811967, 10.247473925240065], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:31,678 - INFO - integration_test - Dyn residual k=2: pred=[8.084793033310772, 6.8061018847623, 0.6704199296381508, 2.99999997811967, 10.547473923052033], ws=[8.084793033310772, 6.8061018847623, 0.6704199296381508, 2.99999997811967, 10.14343351901163], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-26 14:30:31,693 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:31,745 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:31,764 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:31,805 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:31,823 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:31,865 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:31,885 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:31,927 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:31,947 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:31,988 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:32,006 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:32,046 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:32,065 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:32,108 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:32,128 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:32,171 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:32,189 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:32,230 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:32,248 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:32,291 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:32,312 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:32,357 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:32,957 - INFO - integration_test - Step 36: MPC solve successful
2026-01-26 14:30:32,961 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-26 14:30:32,962 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:32,962 - INFO - integration_test - === Applying control at step 36 ===
2026-01-26 14:30:32,962 - INFO - integration_test -   Control dict from planner: {'a': 5.188019699662775e-07, 'w': -0.06016506846569739}
2026-01-26 14:30:32,962 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:32,962 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:32,963 - INFO - integration_test - Step 36 completed in 1.331s
2026-01-26 14:30:33,011 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-26 14:30:33,012 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 7.61521585  6.43260457  0.66440342  3.00000003 10.19999919]
2026-01-26 14:30:33,012 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.233m, drift=0.367m)
2026-01-26 14:30:33,012 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-26 14:30:33,013 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:33,026 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(7.615, 6.433), path_start=(0.000, 0.000), dist=9.968m
2026-01-26 14:30:33,026 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-26 14:30:33,029 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:33,051 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:33,052 - INFO - integration_test - Warmstart k=0: x0=7.615215845057473 , y0=6.432604572500814 , psi0=0.6644034227915809 , v0=3.000000029999867 , spline0=10.199999185141369 , a0=0.0 , w0=0.0
2026-01-26 14:30:33,052 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:33,052 - INFO - integration_test - Dyn residual k=0: pred=[7.851401277965677, 6.617581444249571, 0.6644034227915809, 3.000000029999867, 10.499999188141356], ws=[7.851401275603834, 6.6175814423998105, 0.6644034227915809, 3.0, 10.247473932616117], res=[2.3618431654881533e-09, 1.8497603448963673e-09, 0.0, 2.9999867035002126e-08, 0.25252525552523863], res_norm=2.525e-01
2026-01-26 14:30:33,053 - INFO - integration_test - Dyn residual k=1: pred=[8.087586706150194, 6.802558312298807, 0.6644034227915809, 3.0, 10.547473932616118], ws=[8.087586706150194, 6.802558312298807, 0.6644034227915809, 3.0, 10.143433528575713], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 14:30:33,054 - INFO - integration_test - Dyn residual k=2: pred=[8.323772136696554, 6.987535182197803, 0.6644034227915809, 3.0, 10.443433528575714], ws=[8.323772136696554, 6.987535182197803, 0.6644034227915809, 3.0, 10.746463831606018], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-26 14:30:33,068 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,119 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,138 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,180 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,198 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,239 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,257 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,300 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,319 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,360 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,379 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,419 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,437 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,477 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,497 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,538 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,557 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,598 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,619 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,661 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:33,680 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:33,721 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,350 - INFO - integration_test - Step 37: MPC solve successful
2026-01-26 14:30:34,355 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-26 14:30:34,355 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:34,355 - INFO - integration_test - === Applying control at step 37 ===
2026-01-26 14:30:34,355 - INFO - integration_test -   Control dict from planner: {'a': -5.837336419309482e-10, 'w': -0.05842902711841517}
2026-01-26 14:30:34,355 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:34,355 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:34,356 - INFO - integration_test - Step 37 completed in 1.345s
2026-01-26 14:30:34,405 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-26 14:30:34,405 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 7.85194033  6.61689039  0.65856052  3.00000003 10.49999919]
2026-01-26 14:30:34,406 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.486m, drift=0.667m)
2026-01-26 14:30:34,406 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-26 14:30:34,406 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:34,420 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(7.852, 6.617), path_start=(0.000, 0.000), dist=10.268m
2026-01-26 14:30:34,420 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.268m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:34,420 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-26 14:30:34,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:34,446 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:34,446 - INFO - integration_test - Warmstart k=0: x0=7.8519403334852225 , y0=6.616890389456106 , psi0=0.6585605200797394 , v0=3.0000000299414937 , spline0=10.499999188135519 , a0=0.0 , w0=0.0
2026-01-26 14:30:34,446 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:34,447 - INFO - integration_test - Dyn residual k=0: pred=[8.089202530488462, 6.800484103045884, 0.6585605200797394, 3.0000000299414937, 10.799999191129668], ws=[8.089202528120468, 6.800484101213527, 0.6585605200797393, 3.0, 10.143433531569862], res=[2.3679938010445767e-09, 1.8323564887623434e-09, 1.1102230246251565e-16, 2.9941493728813384e-08, 0.6565656595598064], res_norm=6.566e-01
2026-01-26 14:30:34,448 - INFO - integration_test - Dyn residual k=1: pred=[8.326464722755714, 6.984077812970948, 0.6585605200797393, 3.0, 10.443433531569863], ws=[8.326464722755714, 6.984077812970948, 0.6585605200797393, 3.0, 10.746463834600167], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-26 14:30:34,448 - INFO - integration_test - Dyn residual k=2: pred=[8.56372691739096, 7.1676715247283695, 0.6585605200797393, 3.0, 11.046463834600168], ws=[8.56372691739096, 7.1676715247283695, 0.6585605200797393, 3.0, 10.642423430559763], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 14:30:34,463 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,515 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,534 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,574 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,593 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,637 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,656 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,697 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,717 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,758 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,777 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,817 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,836 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,877 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,896 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,937 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:34,955 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:34,995 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:35,013 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:35,054 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:35,072 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:35,114 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:35,730 - INFO - integration_test - Step 38: MPC solve successful
2026-01-26 14:30:35,734 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-26 14:30:35,735 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:35,735 - INFO - integration_test - === Applying control at step 38 ===
2026-01-26 14:30:35,735 - INFO - integration_test -   Control dict from planner: {'a': 5.837682292030604e-10, 'w': -0.05048835021945923}
2026-01-26 14:30:35,735 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:35,735 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:35,736 - INFO - integration_test - Step 38 completed in 1.331s
2026-01-26 14:30:35,785 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-26 14:30:35,785 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 8.08966499  6.79988438  0.65351169  3.00000003 10.79999919]
2026-01-26 14:30:35,786 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.290m, drift=0.558m)
2026-01-26 14:30:35,786 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-26 14:30:35,786 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:35,800 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(8.090, 6.800), path_start=(0.000, 0.000), dist=10.568m
2026-01-26 14:30:35,800 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.568m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:35,800 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-26 14:30:35,802 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:35,826 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:35,827 - INFO - integration_test - Warmstart k=0: x0=8.089664988695128 , y0=6.799884375486408 , psi0=0.6535116850577934 , v0=3.0000000299998706 , spline0=10.799999191135505 , a0=0.0 , w0=0.0
2026-01-26 14:30:35,827 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:35,828 - INFO - integration_test - Dyn residual k=0: pred=[8.32785109214847, 6.982277856514942, 0.6535116850577934, 3.0000000299998706, 11.099999194135492], ws=[8.327851089766618, 6.982277854691016, 0.6535116850577936, 3.0, 10.746463837600153], res=[2.381851160748738e-09, 1.8239267873809695e-09, -1.1102230246251565e-16, 2.9999870587715805e-08, 0.35353535653533896], res_norm=3.535e-01
2026-01-26 14:30:35,828 - INFO - integration_test - Dyn residual k=1: pred=[8.566037190838108, 7.164671333895623, 0.6535116850577936, 3.0, 11.046463837600154], ws=[8.566037190838108, 7.164671333895623, 0.6535116850577936, 3.0, 10.642423433559749], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 14:30:35,829 - INFO - integration_test - Dyn residual k=2: pred=[8.804223291909597, 7.347064813100231, 0.6535116850577936, 3.0, 10.94242343355975], ws=[8.804223291909597, 7.347064813100231, 0.6535116850577936, 3.0, 11.245453736590052], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:35,843 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:35,893 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:35,913 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:35,954 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:35,974 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,014 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:36,033 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,075 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:36,097 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,142 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:36,160 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,202 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:36,220 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,261 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:36,281 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,323 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:36,341 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,382 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:36,400 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,440 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:36,459 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:36,500 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,071 - INFO - integration_test - Step 39: MPC solve successful
2026-01-26 14:30:37,076 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-26 14:30:37,076 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:37,076 - INFO - integration_test - === Applying control at step 39 ===
2026-01-26 14:30:37,076 - INFO - integration_test -   Control dict from planner: {'a': 5.765314519711272e-15, 'w': -0.04965597032826009}
2026-01-26 14:30:37,077 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:37,077 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:37,078 - INFO - integration_test - Step 39 completed in 1.293s
2026-01-26 14:30:37,134 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-26 14:30:37,135 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 8.32830296  6.98168574  0.64854609  3.00000003 11.09999919]
2026-01-26 14:30:37,135 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.167m, drift=0.858m)
2026-01-26 14:30:37,135 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-26 14:30:37,136 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:37,149 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(8.328, 6.982), path_start=(0.000, 0.000), dist=10.868m
2026-01-26 14:30:37,149 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.868m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:37,149 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-26 14:30:37,152 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:37,176 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:37,176 - INFO - integration_test - Warmstart k=0: x0=8.328302958651436 , y0=6.981685740076053 , psi0=0.6485460880249674 , v0=3.000000029999871 , spline0=11.099999194135492 , a0=0.0 , w0=0.0
2026-01-26 14:30:37,176 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:37,177 - INFO - integration_test - Dyn residual k=0: pred=[8.567391814421347, 7.162894241109053, 0.6485460880249674, 3.000000029999871, 11.399999197135479], ws=[8.567391812030468, 7.162894239296976, 0.6485460880249674, 3.0, 10.642423436559735], res=[2.39087860620657e-09, 1.81207759908375e-09, 0.0, 2.9999871031805014e-08, 0.7575757605757438], res_norm=7.576e-01
2026-01-26 14:30:37,178 - INFO - integration_test - Dyn residual k=1: pred=[8.8064806654095, 7.344102738517899, 0.6485460880249674, 3.0, 10.942423436559736], ws=[8.8064806654095, 7.344102738517899, 0.6485460880249674, 3.0, 11.245453739590038], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:37,179 - INFO - integration_test - Dyn residual k=2: pred=[9.045569518788533, 7.525311237738822, 0.6485460880249674, 3.0, 11.54545373959004], ws=[9.045569518788533, 7.525311237738822, 0.6485460880249674, 3.0, 11.343433537569837], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:30:37,194 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,243 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,262 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,304 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,324 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,364 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,383 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,424 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,444 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,485 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,505 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,547 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,566 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,607 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,626 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,669 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,688 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,731 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,749 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,794 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:37,823 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:37,887 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:38,422 - INFO - integration_test - Step 40: MPC solve successful
2026-01-26 14:30:38,427 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-26 14:30:38,427 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:38,427 - INFO - integration_test - === Applying control at step 40 ===
2026-01-26 14:30:38,427 - INFO - integration_test -   Control dict from planner: {'a': -4.882247899290947e-14, 'w': -0.05133185738988149}
2026-01-26 14:30:38,427 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:38,427 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:38,428 - INFO - integration_test - Step 40 completed in 1.294s
2026-01-26 14:30:38,477 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-26 14:30:38,478 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 8.56785585  7.1622798   0.6434129   3.00000003 11.3999992 ]
2026-01-26 14:30:38,479 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.159m, drift=0.748m)
2026-01-26 14:30:38,479 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-26 14:30:38,479 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:38,494 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(8.568, 7.162), path_start=(0.000, 0.000), dist=11.167m
2026-01-26 14:30:38,494 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.167m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:38,494 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-26 14:30:38,497 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:38,521 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:38,521 - INFO - integration_test - Warmstart k=0: x0=8.567855851865739 , y0=7.162279802910061 , psi0=0.6434129022859792 , v0=3.000000029999866 , spline0=11.399999197135479 , a0=0.0 , w0=0.0
2026-01-26 14:30:38,521 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:38,522 - INFO - integration_test - Dyn residual k=0: pred=[8.807871730503534, 7.34225863444788, 0.6434129022859792, 3.000000029999866, 11.699999200135466], ws=[8.807871728103386, 7.3422586326481, 0.6434129022859794, 3.0, 11.245453742590025], res=[2.4001476361945606e-09, 1.7997798806845822e-09, -1.1102230246251565e-16, 2.9999866146823706e-08, 0.45454545754544107], res_norm=4.545e-01
2026-01-26 14:30:38,523 - INFO - integration_test - Dyn residual k=1: pred=[9.047887604341033, 7.52223746238614, 0.6434129022859794, 3.0, 11.545453742590025], ws=[9.047887604341033, 7.52223746238614, 0.6434129022859794, 3.0, 11.343433540569823], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:30:38,524 - INFO - integration_test - Dyn residual k=2: pred=[9.28790348057868, 7.702216292124179, 0.6434129022859794, 3.0, 11.643433540569823], ws=[9.28790348057868, 7.702216292124179, 0.6434129022859794, 3.0, 11.744443641579926], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-26 14:30:38,538 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:38,589 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:38,609 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:38,652 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:38,672 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:38,714 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:38,733 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:38,775 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:38,793 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:38,834 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:38,852 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:38,894 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:38,913 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:38,953 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:38,973 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:39,013 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:39,032 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:39,072 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:39,093 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:39,134 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:39,152 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:39,192 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:39,817 - INFO - integration_test - Step 41: MPC solve successful
2026-01-26 14:30:39,822 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-26 14:30:39,822 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:39,822 - INFO - integration_test - === Applying control at step 41 ===
2026-01-26 14:30:39,822 - INFO - integration_test -   Control dict from planner: {'a': -3.070734086210992e-08, 'w': -0.05763613961266543}
2026-01-26 14:30:39,822 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:39,822 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:39,823 - INFO - integration_test - Step 41 completed in 1.346s
2026-01-26 14:30:39,874 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-26 14:30:39,874 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 8.80838906  7.34156596  0.63764929  3.00000003 11.6999992 ]
2026-01-26 14:30:39,875 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.215m, drift=0.638m)
2026-01-26 14:30:39,875 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-26 14:30:39,875 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:39,890 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(8.808, 7.342), path_start=(0.000, 0.000), dist=11.467m
2026-01-26 14:30:39,890 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.467m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:39,890 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-26 14:30:39,893 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:39,918 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:39,918 - INFO - integration_test - Warmstart k=0: x0=8.808389064342185 , y0=7.341565960378022 , psi0=0.6376492883247127 , v0=3.0000000269291323 , spline0=11.699999199828392 , a0=0.0 , w0=0.0
2026-01-26 14:30:39,918 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:39,919 - INFO - integration_test - Dyn residual k=0: pred=[9.04943827893402, 7.520158451150751, 0.6376492883247127, 3.0000000269291323, 11.999999202521305], ws=[9.049438276770271, 7.520158449547638, 0.6376492883247127, 3.0, 11.343433543262737], res=[2.163748291650336e-09, 1.6031131977456425e-09, 0.0, 2.6929132257436095e-08, 0.6565656592585682], res_norm=6.566e-01
2026-01-26 14:30:39,920 - INFO - integration_test - Dyn residual k=1: pred=[9.290487489198357, 7.698750938717254, 0.6376492883247127, 3.0, 11.643433543262738], ws=[9.290487489198357, 7.698750938717254, 0.6376492883247127, 3.0, 11.744443644272838], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 14:30:39,920 - INFO - integration_test - Dyn residual k=2: pred=[9.531536701626443, 7.87734342788687, 0.6376492883247127, 3.0, 12.044443644272839], ws=[9.531536701626443, 7.87734342788687, 0.6376492883247127, 3.0, 11.842423442252638], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:30:39,935 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:39,986 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,005 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,046 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,064 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,107 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,126 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,167 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,185 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,225 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,243 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,283 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,304 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,345 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,364 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,404 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,423 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,463 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,482 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,524 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:40,543 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:40,584 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,146 - INFO - integration_test - Step 42: MPC solve successful
2026-01-26 14:30:41,150 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-26 14:30:41,150 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:41,150 - INFO - integration_test - === Applying control at step 42 ===
2026-01-26 14:30:41,150 - INFO - integration_test -   Control dict from planner: {'a': 3.070733231830694e-08, 'w': -0.048255575379336835}
2026-01-26 14:30:41,150 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:41,150 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:41,151 - INFO - integration_test - Step 42 completed in 1.277s
2026-01-26 14:30:41,200 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-26 14:30:41,200 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 9.04986825  7.51957616  0.63282373  3.00000003 11.9999992 ]
2026-01-26 14:30:41,201 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.201m, drift=0.938m)
2026-01-26 14:30:41,201 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-26 14:30:41,201 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:41,215 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(9.050, 7.520), path_start=(0.000, 0.000), dist=11.766m
2026-01-26 14:30:41,215 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.766m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:41,215 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-26 14:30:41,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:41,244 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:41,244 - INFO - integration_test - Warmstart k=0: x0=9.049868246880454 , y0=7.519576160826322 , psi0=0.632823730786779 , v0=3.0000000299998657 , spline0=11.999999202828379 , a0=0.0 , w0=0.0
2026-01-26 14:30:41,244 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:41,245 - INFO - integration_test - Dyn residual k=0: pred=[9.291776460184064, 7.697003380091707, 0.632823730786779, 3.0000000299998657, 12.299999205828366], ws=[9.291776457764993, 7.697003378317443, 0.6328237307867788, 3.0, 11.744443647272824], res=[2.4190711656046915e-09, 1.774264291043437e-09, 2.220446049250313e-16, 2.9999865702734496e-08, 0.5555555585555414], res_norm=5.556e-01
2026-01-26 14:30:41,246 - INFO - integration_test - Dyn residual k=1: pred=[9.533684668649531, 7.874430595808564, 0.6328237307867788, 3.0, 12.044443647272825], ws=[9.533684668649531, 7.874430595808564, 0.6328237307867788, 3.0, 11.842423445252622], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:30:41,246 - INFO - integration_test - Dyn residual k=2: pred=[9.77559287953407, 8.051857813299684, 0.6328237307867788, 3.0, 12.142423445252623], ws=[9.77559287953407, 8.051857813299684, 0.6328237307867788, 3.0, 12.445453748282926], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:30:41,261 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,312 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,332 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,374 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,394 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,436 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,455 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,497 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,516 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,561 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,583 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,626 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,646 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,690 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,711 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,771 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,801 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,850 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,873 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,916 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:41,934 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:41,974 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:42,642 - INFO - integration_test - Step 43: MPC solve successful
2026-01-26 14:30:42,647 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-26 14:30:42,647 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:42,647 - INFO - integration_test - === Applying control at step 43 ===
2026-01-26 14:30:42,648 - INFO - integration_test -   Control dict from planner: {'a': 5.157632796852663e-15, 'w': -0.05148560309305077}
2026-01-26 14:30:42,648 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:42,648 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:42,649 - INFO - integration_test - Step 43 completed in 1.449s
2026-01-26 14:30:42,705 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-26 14:30:42,705 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[ 9.29223214  7.69637986  0.62767517  3.00000003 12.29999921]
2026-01-26 14:30:42,706 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.141m, drift=0.829m)
2026-01-26 14:30:42,706 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-26 14:30:42,706 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:42,720 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(9.292, 7.696), path_start=(0.000, 0.000), dist=12.066m
2026-01-26 14:30:42,720 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.066m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:42,720 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-26 14:30:42,723 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:42,746 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:42,746 - INFO - integration_test - Warmstart k=0: x0=9.292232137808735 , y0=7.696379858091855 , psi0=0.6276751704774739 , v0=3.000000029999866 , spline0=12.299999205828366 , a0=0.0 , w0=0.0
2026-01-26 14:30:42,746 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:42,747 - INFO - integration_test - Dyn residual k=0: pred=[9.535050635610625, 7.872559252247998, 0.6276751704774739, 3.000000029999866, 12.599999208828352], ws=[9.53505063318245, 7.872559250486212, 0.6276751704774739, 3.0, 11.84242344825261], res=[2.4281749944066178e-09, 1.76178627242507e-09, 0.0, 2.9999866146823706e-08, 0.757575760575742], res_norm=7.576e-01
2026-01-26 14:30:42,748 - INFO - integration_test - Dyn residual k=1: pred=[9.777869128556166, 8.048738642880569, 0.6276751704774739, 3.0, 12.142423448252611], ws=[9.777869128556166, 8.048738642880569, 0.6276751704774739, 3.0, 12.445453751282912], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-26 14:30:42,748 - INFO - integration_test - Dyn residual k=2: pred=[10.02068762392988, 8.224918035274925, 0.6276751704774739, 3.0, 12.745453751282913], ws=[10.02068762392988, 8.224918035274925, 0.6276751704774739, 3.0, 12.846463852293015], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-26 14:30:42,763 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:42,813 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:42,832 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:42,873 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:42,893 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:42,934 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:42,955 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:42,995 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:43,014 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:43,054 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:43,072 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:43,114 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:43,133 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:43,173 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:43,193 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:43,233 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:43,252 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:43,293 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:43,313 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:43,355 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:43,373 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:43,413 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,019 - INFO - integration_test - Step 44: MPC solve successful
2026-01-26 14:30:44,024 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-26 14:30:44,024 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:44,024 - INFO - integration_test - === Applying control at step 44 ===
2026-01-26 14:30:44,024 - INFO - integration_test -   Control dict from planner: {'a': -6.493167166900179e-14, 'w': -0.049970744469648436}
2026-01-26 14:30:44,024 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:44,024 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:44,025 - INFO - integration_test - Step 44 completed in 1.320s
2026-01-26 14:30:44,076 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-26 14:30:44,077 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[ 9.53548981  7.87195183  0.6226781   3.00000003 12.59999921]
2026-01-26 14:30:44,077 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.152m, drift=0.719m)
2026-01-26 14:30:44,077 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-26 14:30:44,078 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:44,092 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(9.535, 7.872), path_start=(0.000, 0.000), dist=12.365m
2026-01-26 14:30:44,093 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.365m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:44,093 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-26 14:30:44,096 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:44,120 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:44,120 - INFO - integration_test - Warmstart k=0: x0=9.535489814910136 , y0=7.87195182923408 , psi0=0.622678096030509 , v0=3.0000000299998595 , spline0=12.599999208828352 , a0=0.0 , w0=0.0
2026-01-26 14:30:44,121 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:44,121 - INFO - integration_test - Dyn residual k=0: pred=[9.779185658922623, 8.046915646667951, 0.622678096030509, 3.0000000299998595, 12.899999211828339], ws=[9.779185656485677, 8.046915644918322, 0.6226780960305089, 3.0, 12.445453754282898], res=[2.4369466444795762e-09, 1.7496297743946343e-09, 1.1102230246251565e-16, 2.999985948548556e-08, 0.45454545754544107], res_norm=4.545e-01
2026-01-26 14:30:44,122 - INFO - integration_test - Dyn residual k=1: pred=[10.022881498061217, 8.221879460602564, 0.6226780960305089, 3.0, 12.745453754282899], ws=[10.022881498061217, 8.221879460602564, 0.6226780960305089, 3.0, 12.846463855292999], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 14:30:44,123 - INFO - integration_test - Dyn residual k=2: pred=[10.266577339636758, 8.396843276286805, 0.6226780960305089, 3.0, 13.146463855293], ws=[10.266577339636758, 8.396843276286805, 0.6226780960305089, 3.0, 12.944443653272799], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:30:44,138 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,188 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,207 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,247 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,265 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,307 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,325 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,366 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,384 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,425 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,443 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,482 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,502 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,544 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,562 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,603 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,621 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,664 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,683 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,726 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:44,744 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:44,785 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:45,490 - INFO - integration_test - Step 45: MPC solve successful
2026-01-26 14:30:45,495 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-26 14:30:45,495 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:45,495 - INFO - integration_test - === Applying control at step 45 ===
2026-01-26 14:30:45,496 - INFO - integration_test -   Control dict from planner: {'a': 2.7446634929195284e-14, 'w': -0.054537553218158286}
2026-01-26 14:30:45,496 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:45,496 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:45,497 - INFO - integration_test - Step 45 completed in 1.420s
2026-01-26 14:30:45,548 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-26 14:30:45,548 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[ 9.77966155  8.04625025  0.61722434  3.00000003 12.89999921]
2026-01-26 14:30:45,549 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.223m, drift=0.609m)
2026-01-26 14:30:45,549 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-26 14:30:45,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:45,563 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(9.780, 8.046), path_start=(0.000, 0.000), dist=12.664m
2026-01-26 14:30:45,563 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.664m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:45,563 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-26 14:30:45,566 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:45,589 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:45,589 - INFO - integration_test - Warmstart k=0: x0=9.779661554608087 , y0=8.046250252225473 , psi0=0.6172243407086933 , v0=3.000000029999862 , spline0=12.899999211828339 , a0=0.0 , w0=0.0
2026-01-26 14:30:45,589 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:45,590 - INFO - integration_test - Dyn residual k=0: pred=[10.024307979572546, 8.219882416734531, 0.6172243407086933, 3.000000029999862, 13.199999214828326], ws=[10.024307977126094, 8.219882414998217, 0.6172243407086935, 3.0, 12.846463858292987], res=[2.446451929927207e-09, 1.73631420352649e-09, -2.220446049250313e-16, 2.999986215002082e-08, 0.35353535653533896], res_norm=3.535e-01
2026-01-26 14:30:45,591 - INFO - integration_test - Dyn residual k=1: pred=[10.268954399644102, 8.393514577770961, 0.6172243407086935, 3.0, 13.146463858292988], ws=[10.268954399644102, 8.393514577770961, 0.6172243407086935, 3.0, 12.944443656272785], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:30:45,591 - INFO - integration_test - Dyn residual k=2: pred=[10.51360082216211, 8.567146740543706, 0.6172243407086935, 3.0, 13.244443656272786], ws=[10.51360082216211, 8.567146740543706, 0.6172243407086935, 3.0, 13.54747395930309], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-26 14:30:45,606 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:45,658 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:45,678 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:45,738 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:45,769 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:45,821 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:45,840 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:45,881 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:45,900 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:45,943 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:45,961 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:46,003 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:46,021 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:46,063 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:46,084 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:46,131 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:46,149 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:46,191 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:46,211 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:46,252 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:46,270 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:46,313 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:46,962 - INFO - integration_test - Step 46: MPC solve successful
2026-01-26 14:30:46,966 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-26 14:30:46,967 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:46,967 - INFO - integration_test - === Applying control at step 46 ===
2026-01-26 14:30:46,967 - INFO - integration_test -   Control dict from planner: {'a': 4.1941401626831225e-14, 'w': -0.04465254912835018}
2026-01-26 14:30:46,967 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:46,967 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:46,968 - INFO - integration_test - Step 46 completed in 1.420s
2026-01-26 14:30:47,020 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-26 14:30:47,021 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[10.02469482  8.21933564  0.61275909  3.00000003 13.19999921]
2026-01-26 14:30:47,021 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.172m, drift=0.909m)
2026-01-26 14:30:47,022 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-26 14:30:47,022 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:47,036 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(10.025, 8.219), path_start=(0.000, 0.000), dist=12.963m
2026-01-26 14:30:47,036 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.963m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:47,036 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-26 14:30:47,039 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:47,061 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:47,061 - INFO - integration_test - Warmstart k=0: x0=10.02469482188657 , y0=8.219335636322986 , psi0=0.6127590857958582 , v0=3.000000029999866 , spline0=13.199999214828326 , a0=0.0 , w0=0.0
2026-01-26 14:30:47,061 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:47,062 - INFO - integration_test - Dyn residual k=0: pred=[10.270114117212712, 8.391873664831522, 0.6127590857958582, 3.000000029999866, 13.499999217828313], ws=[10.27011411475853, 8.391873663106148, 0.612759085795858, 3.0, 12.944443659272771], res=[2.454182634892277e-09, 1.7253736217526239e-09, 2.220446049250313e-16, 2.9999866146823706e-08, 0.5555555585555414], res_norm=5.556e-01
2026-01-26 14:30:47,063 - INFO - integration_test - Dyn residual k=1: pred=[10.515533407630489, 8.56441168988931, 0.612759085795858, 3.0, 13.244443659272772], ws=[10.515533407630489, 8.56441168988931, 0.612759085795858, 3.0, 13.547473962303073], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-26 14:30:47,064 - INFO - integration_test - Dyn residual k=2: pred=[10.760952700502449, 8.736949716672472, 0.612759085795858, 3.0, 13.847473962303074], ws=[10.760952700502449, 8.736949716672472, 0.612759085795858, 3.0, 13.443433558262672], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404013], res_norm=4.040e-01
2026-01-26 14:30:47,078 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,132 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,153 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,194 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,214 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,254 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,272 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,314 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,333 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,373 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,391 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,432 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,450 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,491 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,511 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,552 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,570 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,610 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,630 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,673 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:47,692 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:47,735 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:48,863 - INFO - integration_test - Step 47: MPC solve successful
2026-01-26 14:30:48,868 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-26 14:30:48,868 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:48,868 - INFO - integration_test - === Applying control at step 47 ===
2026-01-26 14:30:48,868 - INFO - integration_test -   Control dict from planner: {'a': -8.445847803847703e-11, 'w': -0.04438150309086939}
2026-01-26 14:30:48,868 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:48,868 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:48,870 - INFO - integration_test - Step 47 completed in 1.849s
2026-01-26 14:30:48,935 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-26 14:30:48,936 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[10.27049619  8.3913285   0.60832094  3.00000003 13.49999922]
2026-01-26 14:30:48,936 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.121m, drift=0.799m)
2026-01-26 14:30:48,936 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-26 14:30:48,937 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:48,955 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(10.270, 8.391), path_start=(0.000, 0.000), dist=13.263m
2026-01-26 14:30:48,955 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.263m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:48,955 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-26 14:30:48,958 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:48,986 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:48,986 - INFO - integration_test - Warmstart k=0: x0=10.270496185759075 , y0=8.391328495446372 , psi0=0.6083209354867714 , v0=3.0000000299914205 , spline0=13.499999217827469 , a0=0.0 , w0=0.0
2026-01-26 14:30:48,986 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:48,987 - INFO - integration_test - Dyn residual k=0: pred=[10.516678811245404, 8.562775620555378, 0.6083209354867714, 3.0000000299914205, 13.79999922082661], ws=[10.516678808784283, 8.562775618841396, 0.6083209354867716, 3.0, 13.547473965302217], res=[2.4611210847069742e-09, 1.71398184534155e-09, -2.220446049250313e-16, 2.999142045823078e-08, 0.2525252555243931], res_norm=2.525e-01
2026-01-26 14:30:48,988 - INFO - integration_test - Dyn residual k=1: pred=[10.76286143180949, 8.73422274223642, 0.6083209354867716, 3.0, 13.847473965302218], ws=[10.76286143180949, 8.73422274223642, 0.6083209354867716, 3.0, 13.443433561261813], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 14:30:48,989 - INFO - integration_test - Dyn residual k=2: pred=[11.009044054834698, 8.905669865631445, 0.6083209354867716, 3.0, 13.743433561261813], ws=[11.009044054834698, 8.905669865631445, 0.6083209354867716, 3.0, 14.046463864292118], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-26 14:30:49,005 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,060 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,082 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,129 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,151 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,198 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,219 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,264 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,284 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,329 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,350 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,392 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,410 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,451 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,469 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,511 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,529 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,570 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,588 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,629 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:49,649 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:49,691 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:51,702 - INFO - integration_test - Step 48: MPC solve successful
2026-01-26 14:30:51,707 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-26 14:30:51,707 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:51,707 - INFO - integration_test - === Applying control at step 48 ===
2026-01-26 14:30:51,707 - INFO - integration_test -   Control dict from planner: {'a': -0.00011828782033150036, 'w': -0.03097966044388034}
2026-01-26 14:30:51,707 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:51,707 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:51,709 - INFO - integration_test - Step 48 completed in 2.773s
2026-01-26 14:30:51,764 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-26 14:30:51,765 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[10.5169435   8.56239368  0.60522297  2.9999882  13.79999804]
2026-01-26 14:30:51,765 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.153m, drift=0.690m)
2026-01-26 14:30:51,765 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-26 14:30:51,765 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:51,779 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(10.517, 8.562), path_start=(0.000, 0.000), dist=13.562m
2026-01-26 14:30:51,779 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.562m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:51,779 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-26 14:30:51,782 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:51,804 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:51,804 - INFO - integration_test - Warmstart k=0: x0=10.51694349989693 , y0=8.562393676913748 , psi0=0.6052229694423833 , v0=2.9999882012093875 , spline0=13.799998037948408 , a0=0.0 , w0=0.0
2026-01-26 14:30:51,804 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:51,805 - INFO - integration_test - Dyn residual k=0: pred=[10.763655107781062, 8.733076642112922, 0.6052229694423833, 2.9999882012093875, 14.099996858069346], ws=[10.763655107781062, 8.733076642112922, 0.6052229694423832, 2.9999882012093875, 13.443431201503689], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.6565656565656575], res_norm=6.566e-01
2026-01-26 14:30:51,806 - INFO - integration_test - Dyn residual k=1: pred=[11.010366715665194, 8.903759607312095, 0.6052229694423832, 2.9999882012093875, 13.743430021624627], ws=[11.010366715665194, 8.903759607312095, 0.6052229694423832, 2.9999882012093875, 14.046460324654932], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030454], res_norm=3.030e-01
2026-01-26 14:30:51,807 - INFO - integration_test - Dyn residual k=2: pred=[11.257078323549326, 9.074442572511268, 0.6052229694423832, 2.9999882012093875, 14.34645914477587], ws=[11.257078323549326, 9.074442572511268, 0.6052229694423832, 2.9999882012093875, 14.144438942755668], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:30:51,822 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:51,872 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:51,892 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:51,936 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:51,956 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:51,996 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:52,015 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:52,055 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:52,073 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:52,113 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:52,136 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:52,183 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:52,204 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:52,248 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:52,269 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:52,313 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:52,334 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:52,378 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:52,398 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:52,443 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:52,463 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:52,514 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,190 - INFO - integration_test - Step 49: MPC solve successful
2026-01-26 14:30:53,194 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-26 14:30:53,195 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:53,195 - INFO - integration_test - === Applying control at step 49 ===
2026-01-26 14:30:53,195 - INFO - integration_test -   Control dict from planner: {'a': 0.000118287903913239, 'w': -0.04865310529973339}
2026-01-26 14:30:53,195 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:53,195 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:53,196 - INFO - integration_test - Step 49 completed in 1.432s
2026-01-26 14:30:53,249 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-26 14:30:53,250 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[10.76406983  8.73247614  0.60035766  3.00000003 14.09999804]
2026-01-26 14:30:53,251 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.230m, drift=0.990m)
2026-01-26 14:30:53,251 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-26 14:30:53,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:53,265 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(10.764, 8.732), path_start=(0.000, 0.000), dist=13.861m
2026-01-26 14:30:53,265 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.861m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:53,265 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-26 14:30:53,268 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:53,292 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:53,292 - INFO - integration_test - Warmstart k=0: x0=10.764069833922386 , y0=8.732476140543254 , psi0=0.60035765891241 , v0=3.0000000299997787 , spline0=14.099998040948385 , a0=0.0 , w0=0.0
2026-01-26 14:30:53,292 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:53,293 - INFO - integration_test - Dyn residual k=0: pred=[11.011609920211557, 8.901957430011846, 0.60035765891241, 3.0000000299997787, 14.399998043948363], ws=[11.011609917736173, 8.901957428317045, 0.6003576589124098, 3.0, 14.046462687413033], res=[2.475383453770519e-09, 1.6948007441897062e-09, 2.220446049250313e-16, 2.9999778661249366e-08, 0.3535353565353301], res_norm=3.535e-01
2026-01-26 14:30:53,294 - INFO - integration_test - Dyn residual k=1: pred=[11.259150001549962, 9.071438716090837, 0.6003576589124098, 3.0, 14.346462687413034], ws=[11.259150001549962, 9.071438716090837, 0.6003576589124098, 3.0, 14.144442485392831], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:30:53,295 - INFO - integration_test - Dyn residual k=2: pred=[11.50669008536375, 9.240920003864629, 0.6003576589124098, 3.0, 14.444442485392832], ws=[11.50669008536375, 9.240920003864629, 0.6003576589124098, 3.0, 14.545452586402932], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 14:30:53,309 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,360 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,379 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,420 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,439 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,480 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,498 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,540 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,558 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,599 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,617 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,665 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,686 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,728 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,748 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,790 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,810 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,851 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,870 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:53,939 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:53,967 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:54,012 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:55,740 - INFO - integration_test - Step 50: MPC solve successful
2026-01-26 14:30:55,744 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-26 14:30:55,744 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:30:55,744 - INFO - integration_test - === Applying control at step 50 ===
2026-01-26 14:30:55,744 - INFO - integration_test -   Control dict from planner: {'a': -0.00048451572599720813, 'w': -0.02432568583788107}
2026-01-26 14:30:55,745 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:30:55,745 - INFO - integration_test -   Planner output success: True
2026-01-26 14:30:55,746 - INFO - integration_test - Step 50 completed in 2.496s
2026-01-26 14:30:55,798 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-26 14:30:55,799 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[11.01181381  8.90165482  0.59792509  2.99995158 14.3999932 ]
2026-01-26 14:30:55,799 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.142m, drift=0.880m)
2026-01-26 14:30:55,799 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-26 14:30:55,800 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:55,813 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(11.012, 8.902), path_start=(0.000, 0.000), dist=14.160m
2026-01-26 14:30:55,813 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.160m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:30:55,814 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-26 14:30:55,816 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:30:55,841 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:30:55,841 - INFO - integration_test - Warmstart k=0: x0=11.011813812240682 , y0=8.901654818531911 , psi0=0.5979250903286218 , v0=2.999951578427179 , spline0=14.399993198791103 , a0=0.0 , w0=0.0
2026-01-26 14:30:55,841 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:30:55,842 - INFO - integration_test - Dyn residual k=0: pred=[11.259761436039577, 9.070530721435667, 0.5979250903286218, 2.999951578427179, 14.69998835663382], ws=[11.259761436039577, 9.070530721435667, 0.597925090328622, 2.999951578427179, 14.144432801078265], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-26 14:30:55,843 - INFO - integration_test - Dyn residual k=1: pred=[11.507709059838472, 9.239406624339422, 0.597925090328622, 2.999951578427179, 14.444427958920983], ws=[11.507709059838472, 9.239406624339422, 0.597925090328622, 2.999951578427179, 14.545438059931083], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 14:30:55,844 - INFO - integration_test - Dyn residual k=2: pred=[11.755656683637367, 9.408282527243177, 0.597925090328622, 2.999951578427179, 14.8454332177738], ws=[11.755656683637367, 9.408282527243177, 0.597925090328622, 2.999951578427179, 14.644439446413337], res=[0.0, 0.0, 0.0, 0.0, 0.20099377136046392], res_norm=2.010e-01
2026-01-26 14:30:55,858 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:55,908 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:55,928 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:55,969 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:55,989 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,030 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:56,049 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,092 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:56,113 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,155 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:56,174 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,214 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:56,233 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,274 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:56,292 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,334 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:56,353 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,393 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:56,411 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,452 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:30:56,470 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:30:56,511 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,054 - WARNING - integration_test - Step 51: MPC solve failed
2026-01-26 14:31:02,054 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-26 14:31:02,059 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-26 14:31:02,059 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:02,059 - INFO - integration_test - === Applying control at step 51 ===
2026-01-26 14:31:02,059 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.6872597167663494}
2026-01-26 14:31:02,059 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:02,059 - INFO - integration_test -   Planner output success: False
2026-01-26 14:31:02,059 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.6872597167663494}
2026-01-26 14:31:02,060 - INFO - integration_test - Step 51 completed in 6.262s
2026-01-26 14:31:02,113 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-26 14:31:02,118 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[11.245768    9.07291354  0.66665106  2.79995158 14.67998836]
2026-01-26 14:31:02,118 - DEBUG - integration_test - Step 52: Using propagated spline 14.6800 (close to path, dist=0.096m, drift=0.750m)
2026-01-26 14:31:02,118 - DEBUG - integration_test -   Set spline state to 14.6800
2026-01-26 14:31:02,119 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:02,133 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(11.246, 9.073), path_start=(0.000, 0.000), dist=14.449m
2026-01-26 14:31:02,133 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.449m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:31:02,133 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-26 14:31:02,136 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:02,162 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:02,162 - INFO - integration_test - Warmstart k=0: x0=11.245767995082142 , y0=9.072913542287663 , psi0=0.6666510620052568 , v0=2.7999515784271787 , spline0=14.679988356633821 , a0=0.0 , w0=0.0
2026-01-26 14:31:02,162 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:02,163 - INFO - integration_test - Dyn residual k=0: pred=[11.465815324482842, 9.246050659160355, 0.6666510620052568, 2.7999515784271787, 14.959983514476539], ws=[11.465815324482842, 9.246050659160355, 0.6666510620052568, 2.7999515784271787, 14.505438059931084], res=[0.0, 0.0, 0.0, 0.0, 0.45454545454545503], res_norm=4.545e-01
2026-01-26 14:31:02,164 - INFO - integration_test - Dyn residual k=1: pred=[11.685862653883541, 9.419187776033047, 0.6666510620052568, 2.7999515784271787, 14.785433217773802], ws=[11.685862653883541, 9.419187776033047, 0.6666510620052568, 2.7999515784271787, 14.611106113080005], res=[0.0, 0.0, 0.0, 0.0, 0.17432710469379664], res_norm=1.743e-01
2026-01-26 14:31:02,164 - INFO - integration_test - Dyn residual k=2: pred=[11.905909983284241, 9.592324892905738, 0.6666510620052568, 2.7999515784271787, 14.891101270922723], ws=[11.905909983284241, 9.592324892905738, 0.6666510620052568, 2.7999515784271787, 15.24923683631934], res=[0.0, 0.0, 0.0, 0.0, -0.3581355653966174], res_norm=3.581e-01
2026-01-26 14:31:02,179 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,229 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,249 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,289 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,308 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,349 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,368 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,410 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,428 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,469 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,488 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,530 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,550 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,591 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,609 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,650 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,670 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,713 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,732 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,774 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:02,793 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:02,834 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:28,111 - WARNING - integration_test - Step 52: MPC solve failed
2026-01-26 14:31:28,111 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-26 14:31:28,115 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.680)
2026-01-26 14:31:28,115 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:28,115 - INFO - integration_test - === Applying control at step 52 ===
2026-01-26 14:31:28,115 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.08218947713058355}
2026-01-26 14:31:28,116 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:28,116 - INFO - integration_test -   Planner output success: False
2026-01-26 14:31:28,116 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.08218947713058355}
2026-01-26 14:31:28,117 - INFO - integration_test - Step 52 completed in 26.000s
2026-01-26 14:31:28,174 - WARNING - integration_test - Test timeout reached (90.0s) at step 53. Terminating test early.
2026-01-26 14:31:28,174 - INFO - integration_test - Saving test results...
2026-01-26 14:31:28,174 - INFO - integration_test - Saved 54 vehicle states to test_outputs/20260126_142939_contouring_contouring_contouring_unicycle/vehicle_states.csv
2026-01-26 14:31:28,174 - INFO - integration_test - Saved obstacle summary to test_outputs/20260126_142939_contouring_contouring_contouring_unicycle/obstacle_summary.csv
2026-01-26 14:31:28,174 - INFO - integration_test - Saved state history: 54 vehicle states, 0 obstacles
2026-01-26 14:31:28,175 - INFO - integration_test - Creating animation...
2026-01-26 14:31:28,210 - DEBUG - integration_test - Creating animation with 54 frames (range: 0 to 53)
2026-01-26 14:31:28,210 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-26 14:31:28,215 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-26 14:31:28,269 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-26 14:31:28,299 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-26 14:31:32,730 - INFO - integration_test - Saved animation with 54 frames at 10.00 fps to test_outputs/20260126_142939_contouring_contouring_contouring_unicycle/animation.gif (duration: 5.40s, size: 325841 bytes)
2026-01-26 14:31:32,759 - INFO - integration_test - Animation created successfully
2026-01-26 14:31:32,759 - INFO - integration_test - Test completed successfully
2026-01-26 14:31:32,761 - INFO - integration_test - Starting integration test: mpcc_s_curve_basic
2026-01-26 14:31:32,761 - INFO - integration_test - Output folder: test_outputs/20260126_143132_contouring_contouring_contouring_unicycle
