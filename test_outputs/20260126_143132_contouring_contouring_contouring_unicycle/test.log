2026-01-26 14:31:32,761 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-26 14:31:32,761 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2026-01-26 14:31:32,761 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-26 14:31:32,761 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-26 14:31:32,761 - INFO - integration_test - Creating objective module: contouring
2026-01-26 14:31:32,767 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-26 14:31:32,767 - INFO - integration_test - Creating 1 constraint module(s): ['contouring']
2026-01-26 14:31:32,767 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-26 14:31:32,772 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-26 14:31:32,772 - INFO - integration_test - Created 1 constraint module(s)
2026-01-26 14:31:32,789 - INFO - integration_test - Setting solver on all modules...
2026-01-26 14:31:32,789 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-26 14:31:32,789 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-26 14:31:32,789 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-26 14:31:32,789 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-26 14:31:32,789 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-26 14:31:32,790 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-26 14:31:32,790 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-26 14:31:32,790 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-26 14:31:32,790 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-26 14:31:32,790 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-26 14:31:32,790 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-26 14:31:32,790 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-26 14:31:32,790 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-26 14:31:32,791 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-26 14:31:32,791 - INFO - integration_test - Added spline variable: 0.0000
2026-01-26 14:31:32,791 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-26 14:31:32,791 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-26 14:31:32,791 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-26 14:31:32,791 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-26 14:31:32,791 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-26 14:31:32,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:32,809 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-26 14:31:32,809 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-26 14:31:32,812 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:32,840 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:32,840 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-26 14:31:32,840 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:32,841 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-26 14:31:32,842 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-26 14:31:32,843 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.10707070707070707], res=[0.0, 0.0, 0.0, 0.0, 0.04545454545454547], res_norm=4.545e-02
2026-01-26 14:31:32,859 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:32,915 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:32,938 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:32,982 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,002 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,042 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,060 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,101 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,119 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,159 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,179 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,220 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,238 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,280 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,298 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,337 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,356 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,398 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,416 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,456 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:33,475 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:33,523 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:34,357 - INFO - integration_test - Step 0: MPC solve successful
2026-01-26 14:31:34,364 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-26 14:31:34,364 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:34,364 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-26 14:31:34,364 - INFO - integration_test - === Applying control at step 0 ===
2026-01-26 14:31:34,364 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019709869, 'w': 0.8000000040039056}
2026-01-26 14:31:34,364 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:34,365 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:34,366 - INFO - integration_test - Step 0 completed in 1.575s
2026-01-26 14:31:34,439 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-26 14:31:34,439 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-26 14:31:34,440 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-26 14:31:34,440 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-26 14:31:34,440 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:34,463 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-26 14:31:34,463 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-26 14:31:34,467 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:34,500 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:34,500 - INFO - integration_test - Warmstart k=0: x0=0.10987737537835547 , y0=0.004530845080973865 , psi0=0.08000000040039056 , v0=1.2000000019709869 , spline0=0.1200000001970987 , a0=0.0 , w0=0.0
2026-01-26 14:31:34,501 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:34,502 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358032729844, 0.014120608420918867, 0.08000000040039056, 1.2000000019709869, 0.2400000003941974], ws=[0.22949358032729844, 0.014120608420918869, 0.08000000040039046, 1.2000000019709869, 0.052929292933274724], res=[0.0, -1.734723475976807e-18, 9.71445146547012e-17, 0.0, 0.18707070746092266], res_norm=1.871e-01
2026-01-26 14:31:34,503 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097852762414, 0.02371037176086386, 0.08000000040039046, 1.2000000019709869, 0.17292929313037342], ws=[0.3491097852762414, 0.02371037176086386, 0.08000000040039046, 1.2000000019709869, 0.10828282829477366], res=[0.0, 0.0, 0.0, 0.0, 0.06464646483559976], res_norm=6.465e-02
2026-01-26 14:31:34,504 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259902251844, 0.03330013510080885, 0.08000000040039046, 1.2000000019709869, 0.22828282849187237], ws=[0.4687259902251844, 0.03330013510080885, 0.08000000040039046, 1.2000000019709869, 0.1660606060844968], res=[0.0, 0.0, 0.0, 0.0, 0.06222222240737557], res_norm=6.222e-02
2026-01-26 14:31:34,524 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:34,591 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:34,610 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:34,651 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:34,670 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:34,711 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:34,730 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:34,775 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:34,799 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:34,844 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:34,863 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:34,903 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:34,923 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:34,965 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:34,984 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:35,024 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:35,043 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:35,084 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:35,103 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:35,143 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:35,161 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:35,205 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:35,754 - INFO - integration_test - Step 1: MPC solve successful
2026-01-26 14:31:35,760 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-26 14:31:35,760 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:35,760 - INFO - integration_test - === Applying control at step 1 ===
2026-01-26 14:31:35,760 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019511433, 'w': 0.7999999984808385}
2026-01-26 14:31:35,760 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:35,760 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:35,762 - INFO - integration_test - Step 1 completed in 1.323s
2026-01-26 14:31:35,817 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-26 14:31:35,817 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-26 14:31:35,818 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-26 14:31:35,818 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-26 14:31:35,818 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:35,833 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-26 14:31:35,833 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-26 14:31:35,836 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:35,860 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:35,860 - INFO - integration_test - Warmstart k=0: x0=0.23889212817788114 , y0=0.02022162182457279 , psi0=0.16000000024847438 , v0=1.40000000392213 , spline0=0.2600000005893117 , a0=0.0 , w0=0.0
2026-01-26 14:31:35,860 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:35,861 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039482321302, 0.04252617084739599, 0.16000000024847438, 1.40000000392213, 0.4000000009815248], ws=[0.3771039482321302, 0.042526170847395996, 0.16000000024847427, 1.40000000392213, 0.10909090911073786], res=[0.0, -6.938893903907228e-18, 1.1102230246251565e-16, 0.0, 0.2909090918707869], res_norm=2.909e-01
2026-01-26 14:31:35,862 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157682863793, 0.06483071987021918, 0.16000000024847427, 1.40000000392213, 0.24909090950295087], ws=[0.5153157682863793, 0.06483071987021918, 0.16000000024847427, 1.40000000392213, 0.16787878792041627], res=[0.0, 0.0, 0.0, 0.0, 0.0812121215825346], res_norm=8.121e-02
2026-01-26 14:31:35,863 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275883406283, 0.08713526889304238, 0.16000000024847427, 1.40000000392213, 0.30787878831262927], ws=[0.6535275883406283, 0.08713526889304238, 0.16000000024847427, 1.40000000392213, 0.22949494956630104], res=[0.0, 0.0, 0.0, 0.0, 0.07838383874632823], res_norm=7.838e-02
2026-01-26 14:31:35,877 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:35,928 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:35,948 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:35,991 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,012 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,053 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,073 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,119 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,138 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,180 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,200 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,242 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,262 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,302 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,321 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,363 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,383 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,424 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,442 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,484 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:36,502 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:36,542 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,100 - INFO - integration_test - Step 2: MPC solve successful
2026-01-26 14:31:37,105 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-26 14:31:37,105 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:37,105 - INFO - integration_test - === Applying control at step 2 ===
2026-01-26 14:31:37,105 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019014154, 'w': 0.7999999772328276}
2026-01-26 14:31:37,105 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:37,105 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:37,106 - INFO - integration_test - Step 2 completed in 1.289s
2026-01-26 14:31:37,167 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-26 14:31:37,167 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-26 14:31:37,168 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-26 14:31:37,168 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-26 14:31:37,168 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:37,184 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-26 14:31:37,184 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-26 14:31:37,187 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:37,211 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:37,211 - INFO - integration_test - Warmstart k=0: x0=0.3858364357436276 , y0=0.05014471639379897 , psi0=0.23999999797175714 , v0=1.6000000058235455 , spline0=0.42000000117166625 , a0=0.0 , w0=0.0
2026-01-26 14:31:37,211 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:37,212 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505123627545, 0.08817713644535022, 0.23999999797175714, 1.6000000058235455, 0.5800000017540208], ws=[0.5412505123627545, 0.08817713644535022, 0.2399999979717573, 1.6000000058235455, 0.45090909105083], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.1290909107031908], res_norm=1.291e-01
2026-01-26 14:31:37,213 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645889818812, 0.1262095564969015, 0.2399999979717573, 1.6000000058235455, 0.6109090916331845], ws=[0.6966645889818812, 0.1262095564969015, 0.2399999979717573, 1.6000000058235455, 0.2319191920135909], res=[0.0, 0.0, 0.0, 0.0, 0.3789898996195936], res_norm=3.790e-01
2026-01-26 14:31:37,213 - INFO - integration_test - Dyn residual k=2: pred=[0.852078665601008, 0.16424197654845277, 0.2399999979717573, 1.6000000058235455, 0.39191919259594543], ws=[0.852078665601008, 0.16424197654845277, 0.2399999979717573, 1.6000000058235455, 0.7747474751307423], res=[0.0, 0.0, 0.0, 0.0, -0.38282828253479684], res_norm=3.828e-01
2026-01-26 14:31:37,228 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,280 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,299 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,340 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,360 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,403 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,422 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,462 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,481 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,521 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,539 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,582 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,600 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,640 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,659 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,700 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,719 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,776 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,812 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,868 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:37,886 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:37,927 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:38,495 - INFO - integration_test - Step 3: MPC solve successful
2026-01-26 14:31:38,500 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-26 14:31:38,500 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:38,500 - INFO - integration_test - === Applying control at step 3 ===
2026-01-26 14:31:38,500 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198855936, 'w': 0.8000000047541049}
2026-01-26 14:31:38,500 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:38,500 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:38,501 - INFO - integration_test - Step 3 completed in 1.334s
2026-01-26 14:31:38,553 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-26 14:31:38,554 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-26 14:31:38,554 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.443m, drift=0.247m)
2026-01-26 14:31:38,554 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-26 14:31:38,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:38,570 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-26 14:31:38,570 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-26 14:31:38,572 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:38,596 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:38,596 - INFO - integration_test - Warmstart k=0: x0=0.5491354613623228 , y0=0.09724075665212925 , psi0=0.31999999844716764 , v0=1.8000000078121048 , spline0=0.6000000019528767 , a0=0.0 , w0=0.0
2026-01-26 14:31:38,596 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:38,597 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978374466393, 0.1538627375434525, 0.31999999844716764, 1.8000000078121048, 0.7800000027340872], ws=[0.7199978374466393, 0.15386273754345253, 0.31999999844716775, 1.8000000078121048, 0.5254545457030988], res=[0.0, -2.7755575615628914e-17, -1.1102230246251565e-16, 0.0, 0.2545454570309884], res_norm=2.545e-01
2026-01-26 14:31:38,598 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602135309557, 0.2104847184347758, 0.31999999844716775, 1.8000000078121048, 0.7054545464843093], ws=[0.8908602135309557, 0.2104847184347758, 0.31999999844716775, 1.8000000078121048, 0.7826262630878673], res=[0.0, 0.0, 0.0, 0.0, -0.07717171660355804], res_norm=7.717e-02
2026-01-26 14:31:38,599 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225896152722, 0.2671066993260991, 0.31999999844716775, 1.8000000078121048, 0.9626262638690778], ws=[1.0617225896152722, 0.2671066993260991, 0.31999999844716775, 1.8000000078121048, 0.8682828288904154], res=[0.0, 0.0, 0.0, 0.0, 0.09434343497866238], res_norm=9.434e-02
2026-01-26 14:31:38,614 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:38,664 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:38,683 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:38,725 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:38,744 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:38,789 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:38,808 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:38,850 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:38,869 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:38,911 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:38,930 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:38,971 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:38,991 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:39,031 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:39,050 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:39,091 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:39,109 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:39,150 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:39,170 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:39,210 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:39,229 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:39,269 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:39,841 - INFO - integration_test - Step 4: MPC solve successful
2026-01-26 14:31:39,845 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-26 14:31:39,845 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:39,845 - INFO - integration_test - === Applying control at step 4 ===
2026-01-26 14:31:39,845 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019833605, 'w': 0.7999999983979683}
2026-01-26 14:31:39,845 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:39,846 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:39,847 - INFO - integration_test - Step 4 completed in 1.293s
2026-01-26 14:31:39,901 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-26 14:31:39,902 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-26 14:31:39,902 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.308m, drift=0.447m)
2026-01-26 14:31:39,902 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-26 14:31:39,903 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:39,916 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-26 14:31:39,916 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-26 14:31:39,918 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:39,943 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:39,943 - INFO - integration_test - Warmstart k=0: x0=0.7268614889704428 , y0=0.16427976778330855 , psi0=0.3999999982869645 , v0=2.0000000097954653 , spline0=0.8000000029324232 , a0=0.0 , w0=0.0
2026-01-26 14:31:39,943 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:39,944 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736888066594, 0.24216343631092999, 0.3999999982869645, 2.0000000097954653, 1.0000000039119699], ws=[0.9110736888066594, 0.24216343631093, 0.3999999982869644, 2.0000000097954653, 0.3636363638734527], res=[0.0, -2.7755575615628914e-17, 5.551115123125783e-17, 0.0, 0.6363636400385171], res_norm=6.364e-01
2026-01-26 14:31:39,945 - INFO - integration_test - Dyn residual k=1: pred=[1.095285888642876, 0.3200471048385514, 0.3999999982869644, 2.0000000097954653, 0.5636363648529993], ws=[1.095285888642876, 0.3200471048385515, 0.3999999982869644, 2.0000000097954653, 0.8767676774594063], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, -0.31313131260640703], res_norm=3.131e-01
2026-01-26 14:31:39,946 - INFO - integration_test - Dyn residual k=2: pred=[1.2794980884790927, 0.3979307733661729, 0.3999999982869644, 2.0000000097954653, 1.0767676784389528], ws=[1.2794980884790927, 0.3979307733661729, 0.3999999982869644, 2.0000000097954653, 0.9696969705865248], res=[0.0, 0.0, 0.0, 0.0, 0.107070707852428], res_norm=1.071e-01
2026-01-26 14:31:39,961 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,013 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,032 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,074 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,092 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,132 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,152 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,196 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,214 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,254 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,274 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,314 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,332 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,374 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,393 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,434 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,452 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,492 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,511 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,554 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:40,578 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:40,618 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,190 - INFO - integration_test - Step 5: MPC solve successful
2026-01-26 14:31:41,195 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-26 14:31:41,195 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:41,195 - INFO - integration_test - === Applying control at step 5 ===
2026-01-26 14:31:41,195 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199512318, 'w': 0.8000000033864804}
2026-01-26 14:31:41,195 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:41,195 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:41,196 - INFO - integration_test - Step 5 completed in 1.295s
2026-01-26 14:31:41,249 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-26 14:31:41,250 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.25382381 0.48       2.20000001 1.02      ]
2026-01-26 14:31:41,250 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.243m, drift=0.667m)
2026-01-26 14:31:41,250 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-26 14:31:41,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:41,265 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-26 14:31:41,265 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-26 14:31:41,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:41,291 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:41,291 - INFO - integration_test - Warmstart k=0: x0=0.9167519032364762 , y0=0.25382380757399503 , psi0=0.4799999986256125 , v0=2.2000000117905887 , spline0=1.020000004111482 , a0=0.0 , w0=0.0
2026-01-26 14:31:41,291 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:41,292 - INFO - integration_test - Dyn residual k=0: pred=[1.111890787433364, 0.35541522646938967, 0.4799999986256125, 2.2000000117905887, 1.2400000052905409], ws=[1.111890787433364, 0.35541522646938967, 0.4799999986256127, 2.2000000117905887, 0.6933333339211712], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.5466666713693696], res_norm=5.467e-01
2026-01-26 14:31:41,293 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296716302516, 0.4570066453647843, 0.4799999986256127, 2.2000000117905887, 0.9133333351002302], ws=[1.3070296716302516, 0.45700664536478436, 0.4799999986256127, 2.2000000117905887, 1.2397979810396202], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, -0.32646464593939006], res_norm=3.265e-01
2026-01-26 14:31:41,294 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685558271394, 0.558598064260179, 0.4799999986256127, 2.2000000117905887, 1.459797982218679], ws=[1.5021685558271394, 0.558598064260179, 0.4799999986256127, 2.2000000117905887, 1.0795959608321064], res=[0.0, 0.0, 0.0, 0.0, 0.38020202138657266], res_norm=3.802e-01
2026-01-26 14:31:41,308 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,357 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,377 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,419 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,438 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,480 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,500 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,542 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,561 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,606 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,625 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,665 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,683 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,725 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,743 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,804 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,836 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,890 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,910 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:41,950 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:41,971 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:42,013 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:42,594 - INFO - integration_test - Step 6: MPC solve successful
2026-01-26 14:31:42,598 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-26 14:31:42,599 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:42,599 - INFO - integration_test - === Applying control at step 6 ===
2026-01-26 14:31:42,599 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019996445, 'w': 0.8000000083255525}
2026-01-26 14:31:42,599 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:42,599 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:42,600 - INFO - integration_test - Step 6 completed in 1.350s
2026-01-26 14:31:42,656 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-26 14:31:42,657 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623086 0.36819145 0.56       2.40000001 1.26000001]
2026-01-26 14:31:42,658 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.256m, drift=0.554m)
2026-01-26 14:31:42,658 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-26 14:31:42,658 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:42,673 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-26 14:31:42,673 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-26 14:31:42,675 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:42,698 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:42,698 - INFO - integration_test - Warmstart k=0: x0=1.116230863612958 , y0=0.3681914468426879 , psi0=0.5599999994581677 , v0=2.4000000137902333 , spline0=1.2600000054905054 , a0=0.0 , w0=0.0
2026-01-26 14:31:42,698 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:42,699 - INFO - integration_test - Dyn residual k=0: pred=[1.3195720914936377, 0.49567613496604124, 0.5599999994581677, 2.4000000137902333, 1.5000000068695287], ws=[1.319572091493638, 0.49567613496604124, 0.5599999994581677, 2.4000000137902333, 1.247474748793142], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, 0.2525252580763868], res_norm=2.525e-01
2026-01-26 14:31:42,700 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133193743176, 0.6231608230893946, 0.5599999994581677, 2.4000000137902333, 1.4874747501721652], ws=[1.5229133193743176, 0.6231608230893946, 0.5599999994581677, 2.4000000137902333, 1.565858587774916], res=[0.0, 0.0, 0.0, 0.0, -0.0783838376027508], res_norm=7.838e-02
2026-01-26 14:31:42,701 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545472549973, 0.7506455112127479, 0.5599999994581677, 2.4000000137902333, 1.8058585891539394], ws=[1.7262545472549973, 0.7506455112127479, 0.5599999994581677, 2.4000000137902333, 1.4101010120459747], res=[0.0, 0.0, 0.0, 0.0, 0.39575757710796466], res_norm=3.958e-01
2026-01-26 14:31:42,716 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:42,768 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:42,791 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:42,833 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:42,852 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:42,894 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:42,912 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:42,955 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:42,975 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:43,016 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:43,036 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:43,076 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:43,094 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:43,134 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:43,152 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:43,196 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:43,214 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:43,255 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:43,273 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:43,313 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:43,330 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:43,371 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,030 - INFO - integration_test - Step 7: MPC solve successful
2026-01-26 14:31:44,034 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-26 14:31:44,035 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:44,035 - INFO - integration_test - === Applying control at step 7 ===
2026-01-26 14:31:44,035 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018400685, 'w': 0.2102587462197797}
2026-01-26 14:31:44,035 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:44,035 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:44,036 - INFO - integration_test - Step 7 completed in 1.379s
2026-01-26 14:31:44,089 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-26 14:31:44,090 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32661408 0.50323441 0.58102587 2.60000002 1.52000001]
2026-01-26 14:31:44,090 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.267m, drift=0.461m)
2026-01-26 14:31:44,090 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-26 14:31:44,091 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:44,105 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.327, 0.503), path_start=(0.000, 0.000), dist=1.419m
2026-01-26 14:31:44,105 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-26 14:31:44,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:44,131 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:44,131 - INFO - integration_test - Warmstart k=0: x0=1.3266140807930293 , y0=0.5032344081412208 , psi0=0.5810258740801457 , v0=2.600000015630302 , spline0=1.5200000070535356 , a0=0.0 , w0=0.0
2026-01-26 14:31:44,131 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:44,132 - INFO - integration_test - Dyn residual k=0: pred=[1.5439480837395851, 0.6459436649397978, 0.5810258740801457, 2.600000015630302, 1.7800000086165657], ws=[1.5439480837395851, 0.6459436649397978, 0.5810258740801455, 2.600000015630302, 1.5751515171533435], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.20484849146322226], res_norm=2.048e-01
2026-01-26 14:31:44,132 - INFO - integration_test - Dyn residual k=1: pred=[1.761282086686141, 0.7886529217383749, 0.5810258740801455, 2.600000015630302, 1.8351515187163736], ws=[1.761282086686141, 0.7886529217383749, 0.5810258740801455, 2.600000015630302, 1.9200000027762536], res=[0.0, 0.0, 0.0, 0.0, -0.08484848405987999], res_norm=8.485e-02
2026-01-26 14:31:44,133 - INFO - integration_test - Dyn residual k=2: pred=[1.9786160896326968, 0.9313621785369519, 0.5810258740801455, 2.600000015630302, 2.1800000043392838], ws=[1.9786160896326968, 0.9313621785369519, 0.5810258740801455, 2.600000015630302, 1.769696972543667], res=[0.0, 0.0, 0.0, 0.0, 0.41030303179561667], res_norm=4.103e-01
2026-01-26 14:31:44,147 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,200 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,220 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,261 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,281 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,322 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,340 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,382 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,401 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,446 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,464 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,506 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,525 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,567 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,586 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,627 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,646 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,687 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,706 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,746 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:44,765 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:44,813 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:45,353 - INFO - integration_test - Step 8: MPC solve successful
2026-01-26 14:31:45,358 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-26 14:31:45,358 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:45,358 - INFO - integration_test - === Applying control at step 8 ===
2026-01-26 14:31:45,358 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199845256, 'w': -0.17244675013257504}
2026-01-26 14:31:45,358 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:45,358 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:45,360 - INFO - integration_test - Step 8 completed in 1.270s
2026-01-26 14:31:45,412 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-26 14:31:45,413 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.55358925 0.64945502 0.5637812  2.80000002 1.80000001]
2026-01-26 14:31:45,413 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.259m, drift=0.741m)
2026-01-26 14:31:45,413 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-26 14:31:45,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:45,428 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.554, 0.649), path_start=(0.000, 0.000), dist=1.684m
2026-01-26 14:31:45,428 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-26 14:31:45,430 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:45,455 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:45,455 - INFO - integration_test - Warmstart k=0: x0=1.5535892477091586 , y0=0.6494550249278932 , psi0=0.5637811990668882 , v0=2.8000000176287547 , spline0=1.800000008816411 , a0=0.0 , w0=0.0
2026-01-26 14:31:45,455 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:45,456 - INFO - integration_test - Dyn residual k=0: pred=[1.7902565999092401, 0.7990831151710451, 0.5637811990668882, 2.8000000176287547, 2.0800000105792864], ws=[1.7902565999092404, 0.7990831151710451, 0.563781199066888, 2.8000000176287547, 1.930909093794351], res=[-2.220446049250313e-16, 0.0, 2.220446049250313e-16, 0.0, 0.14909091678493547], res_norm=1.491e-01
2026-01-26 14:31:45,457 - INFO - integration_test - Dyn residual k=1: pred=[2.026923952109322, 0.948711205414197, 0.563781199066888, 2.8000000176287547, 2.2109090955572266], ws=[2.026923952109322, 0.948711205414197, 0.563781199066888, 2.8000000176287547, 1.7842424272344637], res=[0.0, 0.0, 0.0, 0.0, 0.4266666683227629], res_norm=4.267e-01
2026-01-26 14:31:45,457 - INFO - integration_test - Dyn residual k=2: pred=[2.263591304309404, 1.0983392956573488, 0.563781199066888, 2.8000000176287547, 2.064242428997339], ws=[2.263591304309404, 1.0983392956573488, 0.563781199066888, 2.8000000176287547, 2.392323236739961], res=[0.0, 0.0, 0.0, 0.0, -0.32808080774262205], res_norm=3.281e-01
2026-01-26 14:31:45,471 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:45,538 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:45,570 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:45,622 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:45,641 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:45,682 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:45,701 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:45,742 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:45,760 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:45,807 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:45,829 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:45,871 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:45,890 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:45,931 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:45,950 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:45,992 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:46,011 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:46,051 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:46,072 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:46,120 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:46,140 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:46,181 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:46,717 - INFO - integration_test - Step 9: MPC solve successful
2026-01-26 14:31:46,722 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-26 14:31:46,722 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:46,722 - INFO - integration_test - === Applying control at step 9 ===
2026-01-26 14:31:46,722 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199588346, 'w': -0.07406814994653983}
2026-01-26 14:31:46,722 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:46,722 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:46,723 - INFO - integration_test - Step 9 completed in 1.311s
2026-01-26 14:31:46,785 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-26 14:31:46,785 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.79928724 0.80350733 0.55637438 3.00000002 2.10000001]
2026-01-26 14:31:46,786 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.241m, drift=0.688m)
2026-01-26 14:31:46,786 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-26 14:31:46,786 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:46,801 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.799, 0.804), path_start=(0.000, 0.000), dist=1.971m
2026-01-26 14:31:46,801 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-26 14:31:46,803 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:46,827 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:46,827 - INFO - integration_test - Warmstart k=0: x0=1.7992872439222505 , y0=0.8035073258096126 , psi0=0.5563743840722342 , v0=3.0000000196246384 , spline0=2.1000000107788748 , a0=0.0 , w0=0.0
2026-01-26 14:31:46,827 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:46,828 - INFO - integration_test - Dyn residual k=0: pred=[2.0540398701839164, 0.9619405943811545, 0.5563743840722342, 3.0000000196246384, 2.4000000127413386], ws=[2.05403986851744, 0.961940593344756, 0.5563743840722344, 3.0, 1.7939393965524546], res=[1.6664762902962593e-09, 1.0363985225581018e-09, -2.220446049250313e-16, 1.9624638358806124e-08, 0.606060616188884], res_norm=6.061e-01
2026-01-26 14:31:46,829 - INFO - integration_test - Dyn residual k=1: pred=[2.30879249311263, 1.1203738608798994, 0.5563743840722344, 3.0, 2.0939393965524546], ws=[2.30879249311263, 1.1203738608798994, 0.5563743840722344, 3.0, 2.411111114486314], res=[0.0, 0.0, 0.0, 0.0, -0.31717171793385956], res_norm=3.172e-01
2026-01-26 14:31:46,830 - INFO - integration_test - Dyn residual k=2: pred=[2.5635451177078195, 1.2788071284150428, 0.5563743840722344, 3.0, 2.7111111144863145], ws=[2.5635451177078195, 1.2788071284150428, 0.5563743840722344, 3.0, 2.5050505084257084], res=[0.0, 0.0, 0.0, 0.0, 0.20606060606060606], res_norm=2.061e-01
2026-01-26 14:31:46,844 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:46,895 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:46,914 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:46,956 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:46,977 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,020 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:47,038 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,080 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:47,098 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,143 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:47,162 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,206 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:47,225 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,265 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:47,284 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,326 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:47,345 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,386 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:47,406 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,447 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:47,466 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:47,506 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,051 - INFO - integration_test - Step 10: MPC solve successful
2026-01-26 14:31:48,055 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-26 14:31:48,056 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:48,056 - INFO - integration_test - === Applying control at step 10 ===
2026-01-26 14:31:48,056 - INFO - integration_test -   Control dict from planner: {'a': 1.0375244752511034e-07, 'w': -0.0972172360638601}
2026-01-26 14:31:48,056 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:48,056 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:48,057 - INFO - integration_test - Step 10 completed in 1.272s
2026-01-26 14:31:48,109 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-26 14:31:48,110 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.05480597 0.96069979 0.54665266 3.00000003 2.40000001]
2026-01-26 14:31:48,110 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.229m, drift=0.635m)
2026-01-26 14:31:48,110 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-26 14:31:48,111 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:48,125 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.055, 0.961), path_start=(0.000, 0.000), dist=2.268m
2026-01-26 14:31:48,125 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-26 14:31:48,127 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:48,151 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:48,151 - INFO - integration_test - Warmstart k=0: x0=2.0548059739445113 , y0=0.9606997914687597 , psi0=0.5466526604658482 , v0=3.000000029999883 , spline0=2.400000013778863 , a0=0.0 , w0=0.0
2026-01-26 14:31:48,151 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:48,152 - INFO - integration_test - Dyn residual k=0: pred=[2.3110867827940065, 1.1166489781144149, 0.5466526604658482, 3.000000029999883, 2.7000000167788514], ws=[2.3110867802312085, 1.1166489765549292, 0.5466526604658482, 3.0, 2.4111111154257046], res=[2.562797973837405e-09, 1.5594856517253675e-09, 0.0, 2.999988302221368e-08, 0.2888889013531468], res_norm=2.889e-01
2026-01-26 14:31:48,152 - INFO - integration_test - Dyn residual k=1: pred=[2.5673675865179058, 1.2725981616410986, 0.5466526604658482, 3.0, 2.7111111154257044], ws=[2.5673675865179058, 1.2725981616410986, 0.5466526604658482, 3.0, 2.5050505093650983], res=[0.0, 0.0, 0.0, 0.0, 0.20606060606060606], res_norm=2.061e-01
2026-01-26 14:31:48,153 - INFO - integration_test - Dyn residual k=2: pred=[2.823648392804603, 1.428547346727268, 0.5466526604658482, 3.0, 2.805050509365098], ws=[2.823648392804603, 1.428547346727268, 0.5466526604658482, 3.0, 2.850505055237185], res=[0.0, 0.0, 0.0, 0.0, -0.04545454587208697], res_norm=4.545e-02
2026-01-26 14:31:48,168 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,220 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,240 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,282 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,302 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,343 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,361 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,403 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,422 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,463 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,482 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,523 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,542 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,585 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,605 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,646 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,665 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,707 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,726 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,768 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:48,789 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:48,833 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:49,817 - INFO - integration_test - Step 11: MPC solve successful
2026-01-26 14:31:49,821 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-26 14:31:49,822 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:49,822 - INFO - integration_test - === Applying control at step 11 ===
2026-01-26 14:31:49,822 - INFO - integration_test -   Control dict from planner: {'a': -4.389735468886979e-06, 'w': -0.20934384163019693}
2026-01-26 14:31:49,822 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:49,822 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:49,823 - INFO - integration_test - Step 11 completed in 1.713s
2026-01-26 14:31:49,878 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-26 14:31:49,878 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.31270034 1.11395513 0.52571828 2.99999959 2.69999997]
2026-01-26 14:31:49,879 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.220m, drift=0.582m)
2026-01-26 14:31:49,879 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-26 14:31:49,879 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:49,893 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.313, 1.114), path_start=(0.000, 0.000), dist=2.567m
2026-01-26 14:31:49,893 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-26 14:31:49,895 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:49,920 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:49,920 - INFO - integration_test - Warmstart k=0: x0=2.3127003356812064 , y0=1.1139551339933882 , psi0=0.5257182763028284 , v0=2.999999591026336 , spline0=2.6999999728814963 , a0=0.0 , w0=0.0
2026-01-26 14:31:49,920 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:49,921 - INFO - integration_test - Dyn residual k=0: pred=[2.5721894130096636, 1.2645054385723156, 0.5257182763028284, 2.999999591026336, 2.9999999319841297], ws=[2.5721894130096636, 1.2645054385723156, 0.5257182763028285, 2.999999591026336, 2.505050483752606], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.49494944823152354], res_norm=4.949e-01
2026-01-26 14:31:49,922 - INFO - integration_test - Dyn residual k=1: pred=[2.831678490338121, 1.415055743151243, 0.5257182763028285, 2.999999591026336, 2.8050504428552396], ws=[2.831678490338121, 1.415055743151243, 0.5257182763028285, 2.999999591026336, 2.8505050131005043], res=[0.0, 0.0, 0.0, 0.0, -0.04545457024526467], res_norm=4.545e-02
2026-01-26 14:31:49,923 - INFO - integration_test - Dyn residual k=2: pred=[3.091167567666578, 1.5656060477301703, 0.5257182763028285, 2.999999591026336, 3.1505049722031377], ws=[3.091167567666578, 1.5656060477301703, 0.5257182763028285, 2.999999591026336, 3.2141413581515925], res=[0.0, 0.0, 0.0, 0.0, -0.06363638594845478], res_norm=6.364e-02
2026-01-26 14:31:49,943 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,003 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,023 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,064 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,084 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,125 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,144 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,185 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,204 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,245 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,263 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,304 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,322 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,363 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,382 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,423 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,442 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,483 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,502 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,542 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:50,562 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:50,618 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,260 - INFO - integration_test - Step 12: MPC solve successful
2026-01-26 14:31:51,264 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-26 14:31:51,264 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:51,264 - INFO - integration_test - === Applying control at step 12 ===
2026-01-26 14:31:51,265 - INFO - integration_test -   Control dict from planner: {'a': 4.38971971522953e-06, 'w': 0.06867530564493947}
2026-01-26 14:31:51,265 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:51,265 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:51,266 - INFO - integration_test - Step 12 completed in 1.388s
2026-01-26 14:31:51,318 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-26 14:31:51,319 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.57167044 1.26539529 0.53258581 3.00000003 2.99999998]
2026-01-26 14:31:51,320 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.210m, drift=0.530m)
2026-01-26 14:31:51,320 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-26 14:31:51,320 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:51,334 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.572, 1.265), path_start=(0.000, 0.000), dist=2.866m
2026-01-26 14:31:51,334 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-26 14:31:51,337 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:51,360 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:51,360 - INFO - integration_test - Warmstart k=0: x0=2.571670439858567 , y0=1.265395287359416 , psi0=0.5325858068673224 , v0=3.000000029998308 , spline0=2.999999975881327 , a0=0.0 , w0=0.0
2026-01-26 14:31:51,360 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:51,361 - INFO - integration_test - Dyn residual k=0: pred=[2.8301195351986337, 1.4177240992033993, 0.5325858068673224, 3.000000029998308, 3.299999978881158], ws=[2.8301195326142885, 1.417724097680197, 0.5325858068673224, 3.0, 2.85050504222187], res=[2.58434518229933e-09, 1.5232022310129878e-09, 0.0, 2.999830783778634e-08, 0.44949493665928797], res_norm=4.495e-01
2026-01-26 14:31:51,362 - INFO - integration_test - Dyn residual k=1: pred=[3.08856862537001, 1.570052908000978, 0.5325858068673224, 3.0, 3.1505050422218703], ws=[3.08856862537001, 1.570052908000978, 0.5325858068673224, 3.0, 3.214141405127365], res=[0.0, 0.0, 0.0, 0.0, -0.06363636290549479], res_norm=6.364e-02
2026-01-26 14:31:51,363 - INFO - integration_test - Dyn residual k=2: pred=[3.3470177181257315, 1.722381718321759, 0.5325858068673224, 3.0, 3.514141405127365], ws=[3.3470177181257315, 1.722381718321759, 0.5325858068673224, 3.0, 3.326262617248577], res=[0.0, 0.0, 0.0, 0.0, 0.18787878787878798], res_norm=1.879e-01
2026-01-26 14:31:51,377 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,430 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,450 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,493 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,512 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,553 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,572 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,615 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,634 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,675 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,693 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,734 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,753 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,797 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,819 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,862 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,882 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,925 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:51,944 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:51,985 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:52,005 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:52,045 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:52,624 - INFO - integration_test - Step 13: MPC solve successful
2026-01-26 14:31:52,629 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-26 14:31:52,629 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:52,629 - INFO - integration_test - === Applying control at step 13 ===
2026-01-26 14:31:52,629 - INFO - integration_test -   Control dict from planner: {'a': 1.3488307683030224e-11, 'w': -0.14426136276265264}
2026-01-26 14:31:52,629 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:52,629 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:52,630 - INFO - integration_test - Step 13 completed in 1.311s
2026-01-26 14:31:52,683 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-26 14:31:52,683 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.83120931 1.41585464 0.51815967 3.00000003 3.29999998]
2026-01-26 14:31:52,684 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.200m, drift=0.477m)
2026-01-26 14:31:52,684 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-26 14:31:52,684 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:52,698 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.831, 1.416), path_start=(0.000, 0.000), dist=3.166m
2026-01-26 14:31:52,698 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-26 14:31:52,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:52,724 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:52,724 - INFO - integration_test - Warmstart k=0: x0=2.83120930988605 , y0=1.4158546370447735 , psi0=0.5181596705910572 , v0=3.0000000299996565 , spline0=3.299999978881293 , a0=0.0 , w0=0.0
2026-01-26 14:31:52,724 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:52,725 - INFO - integration_test - Dyn residual k=0: pred=[3.0918289523088, 1.5644393057808763, 0.5181596705910572, 3.0000000299996565, 3.5999999818812585], ws=[3.0918289497026334, 1.5644393042950466, 0.5181596705910572, 3.0, 3.214141406248564], res=[2.6061663938037327e-09, 1.4858296815134509e-09, 0.0, 2.999965653671666e-08, 0.38585857563269466], res_norm=3.859e-01
2026-01-26 14:31:52,726 - INFO - integration_test - Dyn residual k=1: pred=[3.352448589519217, 1.7130239715453197, 0.5181596705910572, 3.0, 3.514141406248564], ws=[3.352448589519217, 1.7130239715453197, 0.5181596705910572, 3.0, 3.3262626183697765], res=[0.0, 0.0, 0.0, 0.0, 0.18787878787878753], res_norm=1.879e-01
2026-01-26 14:31:52,727 - INFO - integration_test - Dyn residual k=2: pred=[3.6130682293358003, 1.8616086387955928, 0.5181596705910572, 3.0, 3.6262626183697764], ws=[3.6130682293358003, 1.8616086387955928, 0.5181596705910572, 3.0, 3.9030302940708514], res=[0.0, 0.0, 0.0, 0.0, -0.2767676757010751], res_norm=2.768e-01
2026-01-26 14:31:52,740 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:52,793 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:52,814 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:52,856 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:52,876 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:52,917 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:52,936 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:52,978 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:53,000 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:53,048 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:53,069 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:53,115 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:53,135 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:53,179 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:53,207 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:53,275 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:53,295 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:53,337 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:53,355 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:53,397 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:53,415 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:53,457 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:54,389 - INFO - integration_test - Step 14: MPC solve successful
2026-01-26 14:31:54,394 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-26 14:31:54,394 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:54,394 - INFO - integration_test - === Applying control at step 14 ===
2026-01-26 14:31:54,394 - INFO - integration_test -   Control dict from planner: {'a': -1.7013990176005867e-06, 'w': -0.09522829884395281}
2026-01-26 14:31:54,394 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:54,394 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:54,396 - INFO - integration_test - Step 14 completed in 1.712s
2026-01-26 14:31:54,452 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-26 14:31:54,452 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.09253247 1.56319615 0.50863684 2.99999986 3.59999996]
2026-01-26 14:31:54,453 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.192m, drift=0.424m)
2026-01-26 14:31:54,453 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-26 14:31:54,453 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:54,467 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.093, 1.563), path_start=(0.000, 0.000), dist=3.465m
2026-01-26 14:31:54,467 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-26 14:31:54,469 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:54,493 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:54,494 - INFO - integration_test - Warmstart k=0: x0=3.092532473808222 , y0=1.5631961470272475 , psi0=0.5086368407066619 , v0=2.999999859859755 , spline0=3.5999999648672687 , a0=0.0 , w0=0.0
2026-01-26 14:31:54,494 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:54,494 - INFO - integration_test - Dyn residual k=0: pred=[3.3545552095449414, 1.7092922713722511, 0.5086368407066619, 2.999999859859755, 3.8999999508532444], ws=[3.3545552095449414, 1.7092922713722511, 0.5086368407066617, 2.999999859859755, 3.326262607894647], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.5737373429585975], res_norm=5.737e-01
2026-01-26 14:31:54,495 - INFO - integration_test - Dyn residual k=1: pred=[3.616577945281661, 1.8553883957172546, 0.5086368407066617, 2.999999859859755, 3.6262625938806226], ws=[3.616577945281661, 1.8553883957172546, 0.5086368407066617, 2.999999859859755, 3.9030302762348206], res=[0.0, 0.0, 0.0, 0.0, -0.276767682354198], res_norm=2.768e-01
2026-01-26 14:31:54,496 - INFO - integration_test - Dyn residual k=2: pred=[3.8786006810183804, 2.001484520062258, 0.5086368407066617, 2.999999859859755, 4.203030262220796], ws=[3.8786006810183804, 2.001484520062258, 0.5086368407066617, 2.999999859859755, 4.030302997562203], res=[0.0, 0.0, 0.0, 0.0, 0.1727272646585929], res_norm=1.727e-01
2026-01-26 14:31:54,511 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:54,560 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:54,579 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:54,622 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:54,641 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:54,682 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:54,700 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:54,740 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:54,758 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:54,799 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:54,819 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:54,862 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:54,880 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:54,921 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:54,939 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:54,983 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:55,002 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:55,046 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:55,065 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:55,107 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:55,127 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:55,167 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:55,733 - INFO - integration_test - Step 15: MPC solve successful
2026-01-26 14:31:55,738 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-26 14:31:55,738 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:55,738 - INFO - integration_test - === Applying control at step 15 ===
2026-01-26 14:31:55,738 - INFO - integration_test -   Control dict from planner: {'a': 1.7013981694694027e-06, 'w': -0.09281284929595982}
2026-01-26 14:31:55,738 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:55,738 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:55,740 - INFO - integration_test - Step 15 completed in 1.287s
2026-01-26 14:31:55,800 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-26 14:31:55,800 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.35522943 1.70807423 0.49935556 3.00000003 3.89999997]
2026-01-26 14:31:55,801 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.184m, drift=0.371m)
2026-01-26 14:31:55,801 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-26 14:31:55,801 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:55,817 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.355, 1.708), path_start=(0.000, 0.000), dist=3.765m
2026-01-26 14:31:55,817 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-26 14:31:55,819 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:55,845 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:55,845 - INFO - integration_test - Warmstart k=0: x0=3.355229430157745 , y0=1.70807423286477 , psi0=0.499355555777066 , v0=3.0000000299995717 , spline0=3.8999999678672257 , a0=0.0 , w0=0.0
2026-01-26 14:31:55,846 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:55,846 - INFO - integration_test - Dyn residual k=0: pred=[3.618596835587578, 1.8517322001242729, 0.499355555777066, 3.0000000299995717, 4.199999970867183], ws=[3.6185968329539415, 1.8517321986877135, 0.49935555577706614, 3.0, 3.9030302893982163], res=[2.633636420057428e-09, 1.436559315948216e-09, -1.6653345369377348e-16, 2.9999571715677575e-08, 0.29696968146896685], res_norm=2.970e-01
2026-01-26 14:31:55,847 - INFO - integration_test - Dyn residual k=1: pred=[3.881964235750138, 1.995390164510657, 0.49935555577706614, 3.0, 4.2030302893982165], ws=[3.881964235750138, 1.9953901645106573, 0.49935555577706614, 3.0, 4.030303016670944], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, 0.17272727272727284], res_norm=1.727e-01
2026-01-26 14:31:55,848 - INFO - integration_test - Dyn residual k=2: pred=[4.145331638546335, 2.139048130333601, 0.49935555577706614, 3.0, 4.3303030166709435], ws=[4.145331638546335, 2.139048130333601, 0.49935555577706614, 3.0, 4.355555541274322], res=[0.0, 0.0, 0.0, 0.0, -0.025252524603378568], res_norm=2.525e-02
2026-01-26 14:31:55,863 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:55,914 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:55,933 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:55,974 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:55,996 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,037 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:56,056 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,103 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:56,124 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,165 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:56,184 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,226 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:56,244 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,285 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:56,304 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,344 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:56,363 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,405 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:56,426 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,467 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:56,486 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:56,525 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,152 - INFO - integration_test - Step 16: MPC solve successful
2026-01-26 14:31:57,157 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-26 14:31:57,157 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:57,157 - INFO - integration_test - === Applying control at step 16 ===
2026-01-26 14:31:57,157 - INFO - integration_test -   Control dict from planner: {'a': -1.1930012198828392e-08, 'w': -0.0945754680347833}
2026-01-26 14:31:57,158 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:57,158 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:57,159 - INFO - integration_test - Step 16 completed in 1.359s
2026-01-26 14:31:57,228 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-26 14:31:57,228 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.61927223 1.85048466 0.48989801 3.00000003 4.19999997]
2026-01-26 14:31:57,229 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.178m, drift=0.318m)
2026-01-26 14:31:57,229 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-26 14:31:57,230 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:57,253 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.619, 1.850), path_start=(0.000, 0.000), dist=4.065m
2026-01-26 14:31:57,253 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-26 14:31:57,257 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:57,292 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:57,292 - INFO - integration_test - Warmstart k=0: x0=3.619272230306324 , y0=1.8504846630215264 , psi0=0.48989800897358765 , v0=3.0000000288065705 , spline0=4.199999970747883 , a0=0.0 , w0=0.0
2026-01-26 14:31:57,292 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:57,293 - INFO - integration_test - Dyn residual k=0: pred=[3.8839864889396627, 1.9916454330838775, 0.48989800897358765, 3.0000000288065705, 4.49999997362854], ws=[3.883986486397826, 1.991645431728425, 0.4898980089735878, 3.0, 4.030303017893042], res=[2.5418365190432723e-09, 1.35545263901804e-09, -1.6653345369377348e-16, 2.8806570462336367e-08, 0.46969695573549863], res_norm=4.697e-01
2026-01-26 14:31:57,294 - INFO - integration_test - Dyn residual k=1: pred=[4.1487007424893285, 2.1328062004353234, 0.4898980089735878, 3.0, 4.3303030178930415], ws=[4.1487007424893285, 2.1328062004353234, 0.4898980089735878, 3.0, 4.355555542554615], res=[0.0, 0.0, 0.0, 0.0, -0.025252524661573794], res_norm=2.525e-02
2026-01-26 14:31:57,295 - INFO - integration_test - Dyn residual k=2: pred=[4.413414998580831, 2.273966969142222, 0.4898980089735878, 3.0, 4.655555542554615], ws=[4.413414998580831, 2.273966969142222, 0.4898980089735878, 3.0, 4.948484819232731], res=[0.0, 0.0, 0.0, 0.0, -0.29292927667811597], res_norm=2.929e-01
2026-01-26 14:31:57,312 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,361 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,381 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,424 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,444 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,486 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,504 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,545 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,564 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,606 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,625 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,666 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,685 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,726 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,744 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,783 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,804 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,847 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,867 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,908 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:57,926 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:57,966 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:58,560 - INFO - integration_test - Step 17: MPC solve successful
2026-01-26 14:31:58,565 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-26 14:31:58,565 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:58,565 - INFO - integration_test - === Applying control at step 17 ===
2026-01-26 14:31:58,565 - INFO - integration_test -   Control dict from planner: {'a': 1.1931252737544834e-08, 'w': -0.10185051680892668}
2026-01-26 14:31:58,565 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:58,565 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:58,566 - INFO - integration_test - Step 17 completed in 1.338s
2026-01-26 14:31:58,618 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-26 14:31:58,619 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.88470077 1.99029494 0.47971296 3.00000003 4.49999997]
2026-01-26 14:31:58,620 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.173m, drift=0.265m)
2026-01-26 14:31:58,620 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-26 14:31:58,620 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:58,635 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.885, 1.990), path_start=(0.000, 0.000), dist=4.365m
2026-01-26 14:31:58,635 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-26 14:31:58,638 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:31:58,662 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:31:58,662 - INFO - integration_test - Warmstart k=0: x0=3.884700770970949 , y0=1.9902949400171752 , psi0=0.479712957292695 , v0=3.0000000299996956 , spline0=4.499999973747853 , a0=0.0 , w0=0.0
2026-01-26 14:31:58,662 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:31:58,663 - INFO - integration_test - Dyn residual k=0: pred=[4.150839004606566, 2.128752306730887, 0.479712957292695, 3.0000000299996956, 4.799999976747823], ws=[4.150839001945211, 2.1287523053463273, 0.47971295729269503, 3.0, 4.355555543887934], res=[2.6613555803578492e-09, 1.3845595780992426e-09, -5.551115123125783e-17, 2.9999695616567124e-08, 0.4444444328598891], res_norm=4.444e-01
2026-01-26 14:31:58,664 - INFO - integration_test - Dyn residual k=1: pred=[4.416977232919472, 2.2672096706754794, 0.47971295729269503, 3.0, 4.6555555438879335], ws=[4.416977232919472, 2.2672096706754794, 0.47971295729269503, 3.0, 4.948484822232701], res=[0.0, 0.0, 0.0, 0.0, -0.2929292783447677], res_norm=2.929e-01
2026-01-26 14:31:58,664 - INFO - integration_test - Dyn residual k=2: pred=[4.683115463893734, 2.4056670360046315, 0.47971295729269503, 3.0, 5.248484822232701], ws=[4.683115463893734, 2.4056670360046315, 0.47971295729269503, 3.0, 5.0464646202124985], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:31:58,679 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:58,730 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:58,748 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:58,790 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:58,812 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:58,854 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:58,875 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:58,916 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:58,935 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:58,976 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:58,996 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:59,036 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:59,056 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:59,096 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:59,114 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:59,154 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:59,172 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:59,215 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:59,234 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:59,275 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:59,294 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:31:59,336 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:31:59,972 - INFO - integration_test - Step 18: MPC solve successful
2026-01-26 14:31:59,976 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-26 14:31:59,976 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:31:59,976 - INFO - integration_test - === Applying control at step 18 ===
2026-01-26 14:31:59,976 - INFO - integration_test -   Control dict from planner: {'a': -3.9681444395507866e-09, 'w': -0.10005654285730162}
2026-01-26 14:31:59,976 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:31:59,976 - INFO - integration_test -   Planner output success: True
2026-01-26 14:31:59,977 - INFO - integration_test - Step 18 completed in 1.359s
2026-01-26 14:32:00,034 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-26 14:32:00,035 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.15152724 2.12741856 0.4697073  3.00000003 4.79999998]
2026-01-26 14:32:00,035 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.171m, drift=0.212m)
2026-01-26 14:32:00,035 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-26 14:32:00,036 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:00,050 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.152, 2.127), path_start=(0.000, 0.000), dist=4.665m
2026-01-26 14:32:00,050 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-26 14:32:00,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:00,076 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:00,076 - INFO - integration_test - Warmstart k=0: x0=4.15152723645084 , y0=2.1274185640296714 , psi0=0.46970730300696484 , v0=3.000000029602881 , spline0=4.799999976708141 , a0=0.0 , w0=0.0
2026-01-26 14:32:00,076 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:00,077 - INFO - integration_test - Dyn residual k=0: pred=[4.419037481627434, 2.26320615735738, 0.46970730300696484, 3.000000029602881, 5.0999999796684286], ws=[4.419037478987743, 2.2632061560174788, 0.46970730300696495, 3.0, 4.948484825192989], res=[2.639691132344524e-09, 1.3399010789783006e-09, -1.1102230246251565e-16, 2.960288103537323e-08, 0.1515151544754394], res_norm=1.515e-01
2026-01-26 14:32:00,078 - INFO - integration_test - Dyn residual k=1: pred=[4.686547721524646, 2.398993748005286, 0.46970730300696495, 3.0, 5.248484825192989], ws=[4.686547721524646, 2.398993748005286, 0.46970730300696495, 3.0, 5.0464646231727865], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:00,079 - INFO - integration_test - Dyn residual k=2: pred=[4.954057964061549, 2.5347813399930934, 0.46970730300696495, 3.0, 5.346464623172786], ws=[4.954057964061549, 2.5347813399930934, 0.46970730300696495, 3.0, 5.144444421152585], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:32:00,093 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,142 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,161 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,203 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,223 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,265 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,283 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,323 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,341 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,382 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,401 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,443 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,461 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,501 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,520 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,561 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,580 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,622 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,641 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,682 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:00,700 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:00,740 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:01,453 - INFO - integration_test - Step 19: MPC solve successful
2026-01-26 14:32:01,458 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-26 14:32:01,458 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:01,458 - INFO - integration_test - === Applying control at step 19 ===
2026-01-26 14:32:01,458 - INFO - integration_test -   Control dict from planner: {'a': 3.969889514091866e-09, 'w': -0.09611452465939785}
2026-01-26 14:32:01,458 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:01,458 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:01,459 - INFO - integration_test - Step 19 completed in 1.425s
2026-01-26 14:32:01,512 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-26 14:32:01,512 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.41968592 2.2619185  0.46009585 3.00000003 5.09999998]
2026-01-26 14:32:01,513 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.171m, drift=0.159m)
2026-01-26 14:32:01,513 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-26 14:32:01,513 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:01,527 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.420, 2.262), path_start=(0.000, 0.000), dist=4.965m
2026-01-26 14:32:01,527 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-26 14:32:01,529 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:01,552 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:01,552 - INFO - integration_test - Warmstart k=0: x0=4.419685915873883 , y0=2.2619184955935445 , psi0=0.46009585054102503 , v0=3.00000002999987 , spline0=5.0999999797081275 , a0=0.0 , w0=0.0
2026-01-26 14:32:01,552 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:01,553 - INFO - integration_test - Dyn residual k=0: pred=[4.688488900784857, 2.3951286945384553, 0.46009585054102503, 3.00000002999987, 5.399999982708114], ws=[4.688488898096839, 2.395128693206359, 0.4600958505410251, 3.0, 5.0464646261727735], res=[2.6880178083388273e-09, 1.3320962111151857e-09, -5.551115123125783e-17, 2.9999870143626595e-08, 0.35353535653534074], res_norm=3.535e-01
2026-01-26 14:32:01,554 - INFO - integration_test - Dyn residual k=1: pred=[4.957291880319795, 2.5283388908191737, 0.4600958505410251, 3.0, 5.346464626172773], ws=[4.957291880319795, 2.5283388908191737, 0.4600958505410251, 3.0, 5.144444424152572], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:32:01,555 - INFO - integration_test - Dyn residual k=2: pred=[5.226094862542752, 2.6615490884319883, 0.4600958505410251, 3.0, 5.444444424152572], ws=[5.226094862542752, 2.6615490884319883, 0.4600958505410251, 3.0, 5.747474727182874], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:32:01,570 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:01,621 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:01,640 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:01,681 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:01,700 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:01,740 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:01,759 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:01,801 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:01,821 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:01,863 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:01,883 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:01,927 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:01,948 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:01,993 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:02,014 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:02,056 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:02,075 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:02,115 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:02,134 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:02,177 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:02,196 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:02,238 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,202 - INFO - integration_test - Step 20: MPC solve successful
2026-01-26 14:32:03,207 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-26 14:32:03,207 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:03,207 - INFO - integration_test - === Applying control at step 20 ===
2026-01-26 14:32:03,207 - INFO - integration_test -   Control dict from planner: {'a': -8.865601525373217e-07, 'w': -0.08939760946590239}
2026-01-26 14:32:03,208 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:03,208 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:03,209 - INFO - integration_test - Step 20 completed in 1.697s
2026-01-26 14:32:03,265 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-26 14:32:03,266 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.68908075 2.39392541 0.45115609 2.99999994 5.39999997]
2026-01-26 14:32:03,266 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.175m, drift=0.106m)
2026-01-26 14:32:03,266 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-26 14:32:03,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:03,280 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.689, 2.394), path_start=(0.000, 0.000), dist=5.265m
2026-01-26 14:32:03,280 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-26 14:32:03,283 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:03,306 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:03,306 - INFO - integration_test - Warmstart k=0: x0=4.689080746092286 , y0=2.393925409044952 , psi0=0.4511560895944348 , v0=2.9999999413438547 , spline0=5.399999973842513 , a0=0.0 , w0=0.0
2026-01-26 14:32:03,306 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:03,307 - INFO - integration_test - Dyn residual k=0: pred=[4.959063833291653, 2.5247272787063992, 0.4511560895944348, 2.9999999413438547, 5.699999967976898], ws=[4.959063833291653, 2.5247272787063992, 0.45115608959443465, 2.9999999413438547, 5.144444412421342], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-26 14:32:03,307 - INFO - integration_test - Dyn residual k=1: pred=[5.229046920491021, 2.6555291483678465, 0.45115608959443465, 2.9999999413438547, 5.444444406555728], ws=[5.229046920491021, 2.6555291483678465, 0.45115608959443465, 2.9999999413438547, 5.74747470958603], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 14:32:03,308 - INFO - integration_test - Dyn residual k=2: pred=[5.499030007690388, 2.7863310180292937, 0.45115608959443465, 2.9999999413438547, 6.0474747037204155], ws=[5.499030007690388, 2.7863310180292937, 0.45115608959443465, 2.9999999413438547, 5.845454501700213], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:03,323 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,372 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,392 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,436 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,455 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,496 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,514 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,555 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,573 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,615 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,633 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,674 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,692 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,731 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,751 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,792 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,816 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,859 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,878 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,919 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:03,937 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:03,978 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:04,670 - INFO - integration_test - Step 21: MPC solve successful
2026-01-26 14:32:04,674 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-26 14:32:04,674 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:04,675 - INFO - integration_test - === Applying control at step 21 ===
2026-01-26 14:32:04,675 - INFO - integration_test -   Control dict from planner: {'a': 8.865602375520061e-07, 'w': -0.12386988381469528}
2026-01-26 14:32:04,675 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:04,675 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:04,676 - INFO - integration_test - Step 21 completed in 1.410s
2026-01-26 14:32:04,724 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-26 14:32:04,727 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.95986704 2.52305182 0.4387691  3.00000003 5.69999998]
2026-01-26 14:32:04,728 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.321m, drift=0.406m)
2026-01-26 14:32:04,728 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-26 14:32:04,728 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:04,742 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.960, 2.523), path_start=(0.000, 0.000), dist=5.565m
2026-01-26 14:32:04,742 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-26 14:32:04,745 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:04,768 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:04,768 - INFO - integration_test - Warmstart k=0: x0=4.959867043359138 , y0=2.5230518183463806 , psi0=0.4387691012129653 , v0=3.0000000299998786 , spline0=5.6999999768425 , a0=0.0 , w0=0.0
2026-01-26 14:32:04,769 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:04,769 - INFO - integration_test - Dyn residual k=0: pred=[5.2314496258925285, 2.6504994651056943, 0.4387691012129653, 3.0000000299998786, 5.999999979842488], ws=[5.231449623176713, 2.650499463831223, 0.4387691012129653, 3.0, 5.7474747243172475], res=[2.715815128340182e-09, 1.2744711952450416e-09, 0.0, 2.999987858132158e-08, 0.2525252555252404], res_norm=2.525e-01
2026-01-26 14:32:04,770 - INFO - integration_test - Dyn residual k=1: pred=[5.503032202994289, 2.7779471093160657, 0.4387691012129653, 3.0, 6.047474724317247], ws=[5.503032202994289, 2.7779471093160657, 0.4387691012129653, 3.0, 5.845454522297045], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:04,771 - INFO - integration_test - Dyn residual k=2: pred=[5.774614782811865, 2.9053947548009083, 0.4387691012129653, 3.0, 6.145454522297045], ws=[5.774614782811865, 2.9053947548009083, 0.4387691012129653, 3.0, 5.943434320276843], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:32:04,785 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:04,839 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:04,860 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:04,913 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:04,932 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:04,974 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:04,993 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:05,037 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:05,055 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:05,096 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:05,115 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:05,155 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:05,174 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:05,217 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:05,240 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:05,310 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:05,335 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:05,377 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:05,397 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:05,438 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:05,457 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:05,498 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:06,506 - INFO - integration_test - Step 22: MPC solve successful
2026-01-26 14:32:06,510 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-26 14:32:06,510 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:06,510 - INFO - integration_test - === Applying control at step 22 ===
2026-01-26 14:32:06,511 - INFO - integration_test -   Control dict from planner: {'a': -2.366274588639488e-08, 'w': -0.10901119218125145}
2026-01-26 14:32:06,511 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:06,511 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:06,512 - INFO - integration_test - Step 22 completed in 1.785s
2026-01-26 14:32:06,562 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-26 14:32:06,563 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.2321389  2.64901668 0.42786798 3.00000003 5.99999998]
2026-01-26 14:32:06,563 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.427m, drift=0.353m)
2026-01-26 14:32:06,563 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-26 14:32:06,564 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:06,577 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.232, 2.649), path_start=(0.000, 0.000), dist=5.865m
2026-01-26 14:32:06,577 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-26 14:32:06,579 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:06,605 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:06,605 - INFO - integration_test - Warmstart k=0: x0=5.232138901042726 , y0=2.6490166784817637 , psi0=0.42786798199484016 , v0=3.000000027633604 , spline0=5.99999997960586 , a0=0.0 , w0=0.0
2026-01-26 14:32:06,605 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:06,606 - INFO - integration_test - Dyn residual k=0: pred=[5.505094641318983, 2.773496257161387, 0.42786798199484016, 3.000000027633604, 6.29999998236922], ws=[5.505094638804733, 2.7734962560147807, 0.4278679819948401, 3.0, 5.845454525060405], res=[2.5142501414165963e-09, 1.1466063654097525e-09, 5.551115123125783e-17, 2.7633603849608335e-08, 0.45454545730881524], res_norm=4.545e-01
2026-01-26 14:32:06,607 - INFO - integration_test - Dyn residual k=1: pred=[5.778050376566741, 2.8979758335477976, 0.4278679819948401, 3.0, 6.145454525060405], ws=[5.778050376566741, 2.8979758335477976, 0.4278679819948401, 3.0, 5.943434323040203], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:32:06,607 - INFO - integration_test - Dyn residual k=2: pred=[6.051006114328748, 3.0224554110808146, 0.4278679819948401, 3.0, 6.243434323040203], ws=[6.051006114328748, 3.0224554110808146, 0.4278679819948401, 3.0, 6.748484828090708], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:06,622 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:06,671 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:06,690 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:06,731 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:06,750 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:06,791 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:06,812 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:06,855 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:06,875 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:06,916 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:06,935 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:06,983 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:07,011 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:07,060 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:07,078 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:07,120 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:07,140 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:07,182 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:07,202 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:07,243 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:07,261 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:07,302 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:07,904 - INFO - integration_test - Step 23: MPC solve successful
2026-01-26 14:32:07,908 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-26 14:32:07,909 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:07,909 - INFO - integration_test - === Applying control at step 23 ===
2026-01-26 14:32:07,909 - INFO - integration_test -   Control dict from planner: {'a': 1.931145899602316e-08, 'w': -0.09556765208091911}
2026-01-26 14:32:07,909 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:07,909 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:07,910 - INFO - integration_test - Step 23 completed in 1.347s
2026-01-26 14:32:07,965 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-26 14:32:07,968 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.50568529 2.77219009 0.41831122 3.00000003 6.29999998]
2026-01-26 14:32:07,968 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.201m, drift=0.653m)
2026-01-26 14:32:07,968 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-26 14:32:07,968 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:07,982 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.506, 2.772), path_start=(0.000, 0.000), dist=6.164m
2026-01-26 14:32:07,982 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-26 14:32:07,985 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:08,010 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:08,010 - INFO - integration_test - Warmstart k=0: x0=5.505685293031679 , y0=2.7721900853525687 , psi0=0.41831121678674826 , v0=3.0000000295647498 , spline0=6.299999982562335 , a0=0.0 , w0=0.0
2026-01-26 14:32:08,010 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:08,011 - INFO - integration_test - Dyn residual k=0: pred=[5.779818172813364, 2.894055445469729, 0.41831121678674826, 3.0000000295647498, 6.59999998551881], ws=[5.779818170111807, 2.8940554442687563, 0.4183112167867482, 3.0, 5.943434325996678], res=[2.701557200168736e-09, 1.2009726546580168e-09, 5.551115123125783e-17, 2.9564749759458664e-08, 0.6565656595221316], res_norm=6.566e-01
2026-01-26 14:32:08,012 - INFO - integration_test - Dyn residual k=1: pred=[6.053951047191935, 3.015920803184944, 0.4183112167867482, 3.0, 6.243434325996678], ws=[6.053951047191935, 3.015920803184944, 0.4183112167867482, 3.0, 6.748484831047183], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:08,013 - INFO - integration_test - Dyn residual k=2: pred=[6.328083924272064, 3.1377861621011314, 0.4183112167867482, 3.0, 7.048484831047183], ws=[6.328083924272064, 3.1377861621011314, 0.4183112167867482, 3.0, 6.644444427006779], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-26 14:32:08,028 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,078 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,097 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,138 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,158 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,199 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,219 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,260 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,279 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,320 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,339 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,380 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,399 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,442 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,461 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,504 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,523 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,564 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,583 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,625 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:08,645 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:08,688 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,294 - INFO - integration_test - Step 24: MPC solve successful
2026-01-26 14:32:09,299 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-26 14:32:09,299 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:09,299 - INFO - integration_test - === Applying control at step 24 ===
2026-01-26 14:32:09,299 - INFO - integration_test -   Control dict from planner: {'a': 4.34377087851e-09, 'w': -0.10995532060959343}
2026-01-26 14:32:09,299 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:09,299 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:09,301 - INFO - integration_test - Step 24 completed in 1.333s
2026-01-26 14:32:09,353 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-26 14:32:09,354 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78048263 2.89254589 0.40731568 3.00000003 6.59999999]
2026-01-26 14:32:09,354 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.219m, drift=0.600m)
2026-01-26 14:32:09,354 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-26 14:32:09,355 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:09,368 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.780, 2.893), path_start=(0.000, 0.000), dist=6.464m
2026-01-26 14:32:09,368 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-26 14:32:09,371 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:09,395 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:09,395 - INFO - integration_test - Warmstart k=0: x0=5.7804826294986595 , y0=2.8925458866218845 , psi0=0.40731568472578894 , v0=3.0000000299991267 , spline0=6.599999985562248 , a0=0.0 , w0=0.0
2026-01-26 14:32:09,395 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:09,396 - INFO - integration_test - Dyn residual k=0: pred=[6.055938885391706, 3.011389703833098, 0.40731568472578894, 3.0000000299991267, 6.899999988562161], ws=[6.055938882637223, 3.0113897026446943, 0.40731568472578905, 3.0, 6.748484834047097], res=[2.7544828640202468e-09, 1.1884035977516305e-09, -1.1102230246251565e-16, 2.9999126738289306e-08, 0.1515151545150646], res_norm=1.515e-01
2026-01-26 14:32:09,397 - INFO - integration_test - Dyn residual k=1: pred=[6.331395135775787, 3.130233518667504, 0.40731568472578905, 3.0, 7.0484848340470965], ws=[6.331395135775787, 3.130233518667504, 0.40731568472578905, 3.0, 6.6444444300066925], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-26 14:32:09,398 - INFO - integration_test - Dyn residual k=2: pred=[6.60685138891435, 3.249077334690314, 0.40731568472578905, 3.0, 6.944444430006692], ws=[6.60685138891435, 3.249077334690314, 0.40731568472578905, 3.0, 6.74242422798649], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:09,413 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,464 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,484 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,525 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,545 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,585 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,605 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,649 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,667 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,709 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,727 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,767 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,786 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,830 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,850 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,893 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,912 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:09,954 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:09,972 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:10,016 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:10,034 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:10,074 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:10,684 - INFO - integration_test - Step 25: MPC solve successful
2026-01-26 14:32:10,689 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-26 14:32:10,689 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:10,689 - INFO - integration_test - === Applying control at step 25 ===
2026-01-26 14:32:10,689 - INFO - integration_test -   Control dict from planner: {'a': -3.907212533688335e-06, 'w': -0.11150613047657594}
2026-01-26 14:32:10,689 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:10,689 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:10,691 - INFO - integration_test - Step 25 completed in 1.337s
2026-01-26 14:32:10,746 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-26 14:32:10,747 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05659574 3.0098515  0.39616507 2.99999964 6.89999995]
2026-01-26 14:32:10,747 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.242m, drift=0.547m)
2026-01-26 14:32:10,747 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-26 14:32:10,748 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:10,761 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.057, 3.010), path_start=(0.000, 0.000), dist=6.763m
2026-01-26 14:32:10,761 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-26 14:32:10,764 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:10,787 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:10,787 - INFO - integration_test - Warmstart k=0: x0=6.056595743082005 , y0=3.0098514963311795 , psi0=0.39616507167813136 , v0=2.999999639277873 , spline0=6.899999949490035 , a0=0.0 , w0=0.0
2026-01-26 14:32:10,787 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:10,788 - INFO - integration_test - Dyn residual k=0: pred=[6.333359992476143, 3.125616467777525, 0.39616507167813136, 2.999999639277873, 7.199999913417822], ws=[6.333359992476143, 3.125616467777525, 0.3961650716781313, 2.999999639277873, 6.644444357862267], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-26 14:32:10,789 - INFO - integration_test - Dyn residual k=1: pred=[6.61012424187028, 3.2413814392238707, 0.3961650716781313, 2.999999639277873, 6.944444321790054], ws=[6.61012424187028, 3.2413814392238707, 0.3961650716781313, 2.999999639277873, 6.742424119769852], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:10,790 - INFO - integration_test - Dyn residual k=2: pred=[6.8868884912644175, 3.3571464106702162, 0.3961650716781313, 2.999999639277873, 7.042424083697639], ws=[6.8868884912644175, 3.3571464106702162, 0.3961650716781313, 2.999999639277873, 7.547474588748144], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:10,805 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:10,859 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:10,879 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:10,921 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:10,939 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:10,980 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:10,999 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:11,042 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:11,061 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:11,106 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:11,126 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:11,167 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:11,185 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:11,226 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:11,244 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:11,285 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:11,304 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:11,348 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:11,369 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:11,415 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:11,437 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:11,486 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,152 - INFO - integration_test - Step 26: MPC solve successful
2026-01-26 14:32:12,157 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-26 14:32:12,157 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:12,157 - INFO - integration_test - === Applying control at step 26 ===
2026-01-26 14:32:12,157 - INFO - integration_test -   Control dict from planner: {'a': 3.907087516454677e-06, 'w': -0.10793097716796954}
2026-01-26 14:32:12,157 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:12,158 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:12,159 - INFO - integration_test - Step 26 completed in 1.412s
2026-01-26 14:32:12,216 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-26 14:32:12,216 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33397936 3.12412067 0.38537197 3.00000003 7.19999995]
2026-01-26 14:32:12,217 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.242m, drift=0.847m)
2026-01-26 14:32:12,217 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-26 14:32:12,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:12,231 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.334, 3.124), path_start=(0.000, 0.000), dist=7.063m
2026-01-26 14:32:12,231 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-26 14:32:12,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:12,257 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:12,257 - INFO - integration_test - Warmstart k=0: x0=6.333979362422624 , y0=3.1241206703090443 , psi0=0.38537197396133444 , v0=3.0000000299866247 , spline0=7.199999952488698 , a0=0.0 , w0=0.0
2026-01-26 14:32:12,257 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:12,258 - INFO - integration_test - Dyn residual k=0: pred=[6.611976966302921, 3.2368918281288113, 0.38537197396133444, 3.0000000299866247, 7.49999995548736], ws=[6.611976963524184, 3.2368918270016027, 0.3853719739613344, 3.0, 6.74242419491294], res=[2.778736352126998e-09, 1.1272085487235017e-09, 5.551115123125783e-17, 2.9986624738853607e-08, 0.7575757605744204], res_norm=7.576e-01
2026-01-26 14:32:12,259 - INFO - integration_test - Dyn residual k=1: pred=[6.889974564625745, 3.349662983694161, 0.3853719739613344, 3.0, 7.04242419491294], ws=[6.889974564625745, 3.349662983694161, 0.3853719739613344, 3.0, 7.547474699963445], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:12,260 - INFO - integration_test - Dyn residual k=2: pred=[7.1679721657273054, 3.4624341403867196, 0.3853719739613344, 3.0, 7.847474699963445], ws=[7.1679721657273054, 3.4624341403867196, 0.3853719739613344, 3.0, 7.645454497943243], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:32:12,276 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,326 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,345 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,386 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,406 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,450 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,468 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,510 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,528 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,569 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,587 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,628 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,647 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,688 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,716 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,782 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,805 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,852 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,872 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,912 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:12,932 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:12,973 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:13,630 - INFO - integration_test - Step 27: MPC solve successful
2026-01-26 14:32:13,634 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-26 14:32:13,635 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:13,635 - INFO - integration_test - === Applying control at step 27 ===
2026-01-26 14:32:13,635 - INFO - integration_test -   Control dict from planner: {'a': 1.317647438761552e-10, 'w': -0.11599123901801288}
2026-01-26 14:32:13,635 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:13,635 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:13,636 - INFO - integration_test - Step 27 completed in 1.420s
2026-01-26 14:32:13,687 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-26 14:32:13,688 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.61262475 3.23527705 0.37377285 3.00000003 7.49999996]
2026-01-26 14:32:13,689 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.225m, drift=0.794m)
2026-01-26 14:32:13,689 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-26 14:32:13,689 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:13,703 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.613, 3.235), path_start=(0.000, 0.000), dist=7.362m
2026-01-26 14:32:13,703 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-26 14:32:13,706 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:13,730 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:13,730 - INFO - integration_test - Warmstart k=0: x0=6.612624748712735 , y0=3.235277053197744 , psi0=0.37377285005953315 , v0=3.0000000299998013 , spline0=7.499999955488678 , a0=0.0 , w0=0.0
2026-01-26 14:32:13,730 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:13,731 - INFO - integration_test - Dyn residual k=0: pred=[6.89191166925185, 3.3448161686577755, 0.37377285005953315, 3.0000000299998013, 7.799999958488659], ws=[6.891911666458999, 3.3448161675623913, 0.3737728500595332, 3.0, 7.5474747029634255], res=[2.7928503953944528e-09, 1.0953842277672265e-09, -5.551115123125783e-17, 2.999980130979907e-08, 0.2525252555252333], res_norm=2.525e-01
2026-01-26 14:32:13,732 - INFO - integration_test - Dyn residual k=1: pred=[7.171198584205264, 3.4543552819270387, 0.3737728500595332, 3.0, 7.847474702963425], ws=[7.171198584205264, 3.4543552819270387, 0.3737728500595332, 3.0, 7.645454500943224], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 14:32:13,733 - INFO - integration_test - Dyn residual k=2: pred=[7.450485501951529, 3.563894396291686, 0.3737728500595332, 3.0, 7.945454500943224], ws=[7.450485501951529, 3.563894396291686, 0.3737728500595332, 3.0, 7.743434298923023], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:32:13,748 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:13,801 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:13,822 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:13,866 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:13,886 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:13,927 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:13,945 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:13,986 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:14,005 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:14,047 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:14,067 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:14,108 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:14,128 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:14,168 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:14,187 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:14,230 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:14,249 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:14,289 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:14,309 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:14,351 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:14,370 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:14,411 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,000 - INFO - integration_test - Step 28: MPC solve successful
2026-01-26 14:32:15,004 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-26 14:32:15,004 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:15,004 - INFO - integration_test - === Applying control at step 28 ===
2026-01-26 14:32:15,004 - INFO - integration_test -   Control dict from planner: {'a': -1.4689430606353662e-09, 'w': -0.0982599236792442}
2026-01-26 14:32:15,004 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:15,005 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:15,006 - INFO - integration_test - Step 28 completed in 1.317s
2026-01-26 14:32:15,060 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-26 14:32:15,061 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.89244534 3.34344228 0.36394686 3.00000003 7.79999996]
2026-01-26 14:32:15,062 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.212m, drift=0.741m)
2026-01-26 14:32:15,062 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-26 14:32:15,062 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:15,076 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.892, 3.343), path_start=(0.000, 0.000), dist=7.661m
2026-01-26 14:32:15,076 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-26 14:32:15,079 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:15,103 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:15,103 - INFO - integration_test - Warmstart k=0: x0=6.892445335995971 , y0=3.343442281459878 , psi0=0.3639468576916087 , v0=3.000000029852907 , spline0=7.799999958473969 , a0=0.0 , w0=0.0
2026-01-26 14:32:15,103 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:15,104 - INFO - integration_test - Dyn residual k=0: pred=[7.17279508722876, 3.450231881959589, 0.3639468576916087, 3.000000029852907, 8.09999996145926], ws=[7.1727950844390085, 3.450231880896929, 0.3639468576916087, 3.0, 7.645454503928514], res=[2.789751540888119e-09, 1.0626601820717951e-09, 0.0, 2.9852906813232494e-08, 0.45454545753074527], res_norm=4.545e-01
2026-01-26 14:32:15,104 - INFO - integration_test - Dyn residual k=1: pred=[7.453144832882046, 3.5570214803339795, 0.3639468576916087, 3.0, 7.945454503928514], ws=[7.453144832882046, 3.5570214803339795, 0.3639468576916087, 3.0, 7.743434301908313], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:32:15,105 - INFO - integration_test - Dyn residual k=2: pred=[7.7334945813250835, 3.66381107977103, 0.3639468576916087, 3.0, 8.043434301908313], ws=[7.7334945813250835, 3.66381107977103, 0.3639468576916087, 3.0, 8.548484806958818], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:15,120 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,169 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,189 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,232 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,251 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,293 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,312 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,353 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,372 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,414 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,432 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,473 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,493 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,534 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,553 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,593 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,613 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,654 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,674 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,714 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:15,732 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:15,772 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:16,400 - INFO - integration_test - Step 29: MPC solve successful
2026-01-26 14:32:16,410 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-26 14:32:16,411 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:16,411 - INFO - integration_test - === Applying control at step 29 ===
2026-01-26 14:32:16,411 - INFO - integration_test -   Control dict from planner: {'a': 1.4679275867427318e-09, 'w': -0.13248716026402166}
2026-01-26 14:32:16,411 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:16,411 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:16,414 - INFO - integration_test - Step 29 completed in 1.354s
2026-01-26 14:32:16,488 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-26 14:32:16,488 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.17349429 3.44837165 0.35069814 3.00000003 8.09999996]
2026-01-26 14:32:16,489 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.206m, drift=0.689m)
2026-01-26 14:32:16,489 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-26 14:32:16,489 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:16,503 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.173, 3.448), path_start=(0.000, 0.000), dist=7.959m
2026-01-26 14:32:16,503 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-26 14:32:16,506 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:16,529 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:16,529 - INFO - integration_test - Warmstart k=0: x0=7.1734942879481185 , y0=3.4483716479318383 , psi0=0.3506981416652066 , v0=3.0000000299996996 , spline0=8.099999961473939 , a0=0.0 , w0=0.0
2026-01-26 14:32:16,529 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:16,530 - INFO - integration_test - Dyn residual k=0: pred=[7.455234218573862, 3.5514377106827912, 0.3506981416652066, 3.0000000299996996, 8.39999996447391], ws=[7.455234215756491, 3.551437709652141, 0.35069814166520663, 3.0, 7.743434304908283], res=[2.817371225205534e-09, 1.0306502318258026e-09, -5.551115123125783e-17, 2.999969961337001e-08, 0.6565656595656266], res_norm=6.566e-01
2026-01-26 14:32:16,531 - INFO - integration_test - Dyn residual k=1: pred=[7.736974143564863, 3.6545037713724438, 0.35069814166520663, 3.0, 8.043434304908283], ws=[7.736974143564863, 3.6545037713724438, 0.35069814166520663, 3.0, 8.54848480995879], res=[0.0, 0.0, 0.0, 0.0, -0.505050505050507], res_norm=5.051e-01
2026-01-26 14:32:16,532 - INFO - integration_test - Dyn residual k=2: pred=[8.018714071373235, 3.7575698330927465, 0.35069814166520663, 3.0, 8.84848480995879], ws=[8.018714071373235, 3.7575698330927465, 0.35069814166520663, 3.0, 8.646464607938587], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-26 14:32:16,546 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:16,595 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:16,615 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:16,657 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:16,676 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:16,716 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:16,734 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:16,774 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:16,792 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:16,836 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:16,857 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:16,900 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:16,921 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:16,962 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:16,981 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:17,026 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:17,044 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:17,086 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:17,105 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:17,149 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:17,167 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:17,215 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,304 - INFO - integration_test - Step 30: MPC solve successful
2026-01-26 14:32:18,308 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-26 14:32:18,308 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:18,309 - INFO - integration_test - === Applying control at step 30 ===
2026-01-26 14:32:18,309 - INFO - integration_test -   Control dict from planner: {'a': -5.919359448298666e-09, 'w': -0.10353646939699152}
2026-01-26 14:32:18,309 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:18,309 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:18,310 - INFO - integration_test - Step 30 completed in 1.822s
2026-01-26 14:32:18,363 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-26 14:32:18,364 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.45576273 3.54997736 0.34034449 3.00000003 8.39999996]
2026-01-26 14:32:18,364 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.208m, drift=0.636m)
2026-01-26 14:32:18,364 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-26 14:32:18,365 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:18,378 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.456, 3.550), path_start=(0.000, 0.000), dist=8.258m
2026-01-26 14:32:18,378 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-26 14:32:18,380 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:18,404 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:18,404 - INFO - integration_test - Warmstart k=0: x0=7.455762734960634 , y0=3.549977364414253 , psi0=0.34034449472550743 , v0=3.000000029407764 , spline0=8.399999964414716 , a0=0.0 , w0=0.0
2026-01-26 14:32:18,404 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:18,405 - INFO - integration_test - Dyn residual k=0: pred=[7.738554655246192, 3.650120919302585, 0.34034449472550743, 3.000000029407764, 8.699999967355494], ws=[7.738554652474099, 3.650120918320919, 0.34034449472550765, 3.0, 8.548484812899567], res=[2.772092777547641e-09, 9.816658597117112e-10, -2.220446049250313e-16, 2.9407763779687457e-08, 0.151515154455927], res_norm=1.515e-01
2026-01-26 14:32:18,405 - INFO - integration_test - Dyn residual k=1: pred=[8.021346569987564, 3.750264472227585, 0.34034449472550765, 3.0, 8.848484812899567], ws=[8.021346569987564, 3.750264472227585, 0.34034449472550765, 3.0, 8.646464610879363], res=[0.0, 0.0, 0.0, 0.0, 0.2020202020202042], res_norm=2.020e-01
2026-01-26 14:32:18,406 - INFO - integration_test - Dyn residual k=2: pred=[8.30413848750103, 3.850408026134251, 0.34034449472550765, 3.0, 8.946464610879364], ws=[8.30413848750103, 3.850408026134251, 0.34034449472550765, 3.0, 8.744444408859163], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:32:18,421 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,472 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,491 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,533 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,555 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,595 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,615 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,657 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,675 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,716 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,734 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,774 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,792 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,834 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,855 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,898 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,916 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:18,957 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:18,975 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:19,017 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:19,036 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:19,077 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:19,784 - INFO - integration_test - Step 31: MPC solve successful
2026-01-26 14:32:19,788 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-26 14:32:19,789 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:19,789 - INFO - integration_test - === Applying control at step 31 ===
2026-01-26 14:32:19,789 - INFO - integration_test -   Control dict from planner: {'a': 5.921141484358379e-09, 'w': -0.12213077970146678}
2026-01-26 14:32:19,789 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:19,789 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:19,790 - INFO - integration_test - Step 31 completed in 1.426s
2026-01-26 14:32:19,852 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-26 14:32:19,853 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.73915915 3.64839157 0.32813142 3.00000003 8.69999997]
2026-01-26 14:32:19,854 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.222m, drift=0.583m)
2026-01-26 14:32:19,854 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-26 14:32:19,854 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:19,868 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.739, 3.648), path_start=(0.000, 0.000), dist=8.556m
2026-01-26 14:32:19,868 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-26 14:32:19,871 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:19,896 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:19,896 - INFO - integration_test - Warmstart k=0: x0=7.7391591480766815 , y0=3.6483915713539368 , psi0=0.3281314167553607 , v0=3.000000029999878 , spline0=8.699999967414705 , a0=0.0 , w0=0.0
2026-01-26 14:32:19,896 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:19,897 - INFO - integration_test - Dyn residual k=0: pred=[8.02315300880089, 3.7450739837718734, 0.3281314167553607, 3.000000029999878, 8.999999970414693], ws=[8.023153005960962, 3.745073982805053, 0.32813141675536084, 3.0, 8.646464613879353], res=[2.8399274043522382e-09, 9.668204015156334e-10, -1.1102230246251565e-16, 2.999987813723237e-08, 0.35353535653534074], res_norm=3.535e-01
2026-01-26 14:32:19,898 - INFO - integration_test - Dyn residual k=1: pred=[8.307146863845244, 3.841756394256169, 0.32813141675536084, 3.0, 8.946464613879353], ws=[8.307146863845244, 3.841756394256169, 0.32813141675536084, 3.0, 8.744444411859151], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:19,898 - INFO - integration_test - Dyn residual k=2: pred=[8.591140721729525, 3.9384388057072854, 0.32813141675536084, 3.0, 9.044444411859152], ws=[8.591140721729525, 3.9384388057072854, 0.32813141675536084, 3.0, 8.84242420983895], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:19,913 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:19,963 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:19,983 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,026 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,046 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,087 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,106 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,147 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,165 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,206 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,238 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,303 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,324 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,366 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,385 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,426 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,444 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,487 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,506 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,547 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:20,566 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:20,606 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:21,440 - INFO - integration_test - Step 32: MPC solve successful
2026-01-26 14:32:21,445 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-26 14:32:21,445 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:21,445 - INFO - integration_test - === Applying control at step 32 ===
2026-01-26 14:32:21,445 - INFO - integration_test -   Control dict from planner: {'a': -1.9465951672515053e-07, 'w': -0.12863135641499235}
2026-01-26 14:32:21,445 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:21,445 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:21,446 - INFO - integration_test - Step 32 completed in 1.593s
2026-01-26 14:32:21,498 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-26 14:32:21,499 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[8.02376699 3.74324482 0.31526828 3.00000001 8.99999997]
2026-01-26 14:32:21,499 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.247m, drift=0.530m)
2026-01-26 14:32:21,499 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-26 14:32:21,500 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:21,513 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(8.024, 3.743), path_start=(0.000, 0.000), dist=8.854m
2026-01-26 14:32:21,513 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-26 14:32:21,516 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:21,540 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:21,540 - INFO - integration_test - Warmstart k=0: x0=8.023766987246814 , y0=3.7432448167149737 , psi0=0.3152682811138615 , v0=3.0000000105339266 , spline0=8.999999968468098 , a0=0.0 , w0=0.0
2026-01-26 14:32:21,540 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:21,541 - INFO - integration_test - Dyn residual k=0: pred=[8.308980956285405, 3.836266279277596, 0.3152682811138615, 3.0000000105339266, 9.29999996952149], ws=[8.30898095528393, 3.836266278950969, 0.3152682811138616, 3.0, 8.744444412912543], res=[1.0014744589170732e-09, 3.2662672566630135e-10, -1.1102230246251565e-16, 1.0533926619871181e-08, 0.5555555566089474], res_norm=5.556e-01
2026-01-26 14:32:21,542 - INFO - integration_test - Dyn residual k=1: pred=[8.594194923321046, 3.9292877411869647, 0.3152682811138616, 3.0, 9.044444412912544], ws=[8.594194923321046, 3.9292877411869647, 0.3152682811138616, 3.0, 8.842424210892341], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:21,543 - INFO - integration_test - Dyn residual k=2: pred=[8.879408891358162, 4.02230920342296, 0.3152682811138616, 3.0, 9.142424210892342], ws=[8.879408891358162, 4.02230920342296, 0.3152682811138616, 3.0, 9.647474715942847], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:21,557 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:21,606 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:21,627 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:21,668 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:21,687 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:21,728 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:21,746 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:21,786 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:21,804 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:21,847 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:21,868 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:21,911 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:21,930 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:21,971 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:21,990 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:22,031 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:22,050 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:22,091 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:22,110 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:22,153 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:22,172 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:22,214 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:22,811 - INFO - integration_test - Step 33: MPC solve successful
2026-01-26 14:32:22,816 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-26 14:32:22,816 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:22,816 - INFO - integration_test - === Applying control at step 33 ===
2026-01-26 14:32:22,816 - INFO - integration_test -   Control dict from planner: {'a': 1.9465791386925663e-07, 'w': -0.0903135401068994}
2026-01-26 14:32:22,817 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:22,817 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:22,818 - INFO - integration_test - Step 33 completed in 1.319s
2026-01-26 14:32:22,877 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-26 14:32:22,878 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.30939713 3.83497709 0.30623693 3.00000003 9.29999997]
2026-01-26 14:32:22,878 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.281m, drift=0.477m)
2026-01-26 14:32:22,878 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-26 14:32:22,879 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:22,893 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.309, 3.835), path_start=(0.000, 0.000), dist=9.152m
2026-01-26 14:32:22,893 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-26 14:32:22,896 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:22,919 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:22,919 - INFO - integration_test - Warmstart k=0: x0=8.30939713199022 , y0=3.834977089617023 , psi0=0.3062369271031716 , v0=3.000000029999718 , spline0=9.29999997146807 , a0=0.0 , w0=0.0
2026-01-26 14:32:22,919 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:22,920 - INFO - integration_test - Dyn residual k=0: pred=[8.595439569512932, 3.9254189258215626, 0.3062369271031716, 3.000000029999718, 9.599999974468043], ws=[8.595439566652534, 3.925418924917153, 0.30623692710317174, 3.0, 8.842424213892313], res=[2.8603981405694867e-09, 9.044094362309352e-10, -1.6653345369377348e-16, 2.9999717821027616e-08, 0.7575757605757296], res_norm=7.576e-01
2026-01-26 14:32:22,921 - INFO - integration_test - Dyn residual k=1: pred=[8.881482001314847, 4.015860760217283, 0.30623692710317174, 3.0, 9.142424213892314], ws=[8.881482001314847, 4.015860760217283, 0.30623692710317174, 3.0, 9.647474718942819], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:22,921 - INFO - integration_test - Dyn residual k=2: pred=[9.16752443597716, 4.106302595517413, 0.30623692710317174, 3.0, 9.94747471894282], ws=[9.16752443597716, 4.106302595517413, 0.30623692710317174, 3.0, 9.745454516922617], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:22,937 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:22,991 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,013 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,059 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,081 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,123 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,141 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,182 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,200 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,242 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,261 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,303 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,322 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,363 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,382 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,423 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,443 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,484 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,502 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,542 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:23,560 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:23,600 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:24,450 - INFO - integration_test - Step 34: MPC solve successful
2026-01-26 14:32:24,455 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-26 14:32:24,455 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:24,455 - INFO - integration_test - === Applying control at step 34 ===
2026-01-26 14:32:24,455 - INFO - integration_test -   Control dict from planner: {'a': -0.00039278678040426427, 'w': -0.14860283230482005}
2026-01-26 14:32:24,455 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:24,455 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:24,457 - INFO - integration_test - Step 34 completed in 1.579s
2026-01-26 14:32:24,507 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-26 14:32:24,513 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.59609915 3.92328973 0.29137664 2.99996075 9.59999605]
2026-01-26 14:32:24,513 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.254m, drift=0.777m)
2026-01-26 14:32:24,513 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-26 14:32:24,514 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:24,527 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.596, 3.923), path_start=(0.000, 0.000), dist=9.449m
2026-01-26 14:32:24,528 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-26 14:32:24,530 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:24,552 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:24,552 - INFO - integration_test - Warmstart k=0: x0=8.596099146897846 , y0=3.9232897269808347 , psi0=0.2913766438726896 , v0=2.9999607513216775 , spline0=9.599996046600237 , a0=0.0 , w0=0.0
2026-01-26 14:32:24,553 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:24,553 - INFO - integration_test - Dyn residual k=0: pred=[8.883450181441324, 4.009469933765789, 0.2913766438726896, 2.9999607513216775, 9.899992121732405], ws=[8.883450181441324, 4.009469933765789, 0.29137664387268947, 2.9999607513216775, 9.647466869207152], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.2525252525252526], res_norm=2.525e-01
2026-01-26 14:32:24,554 - INFO - integration_test - Dyn residual k=1: pred=[9.170801215984802, 4.0956501405507435, 0.29137664387268947, 2.9999607513216775, 9.94746294433932], ws=[9.170801215984802, 4.0956501405507435, 0.29137664387268947, 2.9999607513216775, 9.745442742319117], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:24,555 - INFO - integration_test - Dyn residual k=2: pred=[9.458152250528281, 4.181830347335698, 0.29137664387268947, 2.9999607513216775, 10.045438817451284], ws=[9.458152250528281, 4.181830347335698, 0.29137664387268947, 2.9999607513216775, 9.843418615431084], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:32:24,570 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:24,621 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:24,640 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:24,680 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:24,699 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:24,742 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:24,760 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:24,800 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:24,820 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:24,864 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:24,883 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:24,924 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:24,943 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:24,983 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:25,002 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:25,044 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:25,063 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:25,103 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:25,122 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:25,163 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:25,181 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:25,222 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:25,831 - INFO - integration_test - Step 35: MPC solve successful
2026-01-26 14:32:25,835 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-26 14:32:25,836 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:25,836 - INFO - integration_test - === Applying control at step 35 ===
2026-01-26 14:32:25,836 - INFO - integration_test -   Control dict from planner: {'a': 0.0003927867080478151, 'w': -0.0831609957317322}
2026-01-26 14:32:25,836 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:25,836 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:25,837 - INFO - integration_test - Step 35 completed in 1.325s
2026-01-26 14:32:25,896 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-26 14:32:25,897 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.88380709 4.00827468 0.28306054 3.00000003 9.89999605]
2026-01-26 14:32:25,898 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.234m, drift=0.724m)
2026-01-26 14:32:25,898 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-26 14:32:25,898 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:25,912 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.884, 4.008), path_start=(0.000, 0.000), dist=9.746m
2026-01-26 14:32:25,912 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-26 14:32:25,915 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:25,938 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:25,938 - INFO - integration_test - Warmstart k=0: x0=8.883807093145785 , y0=4.008274681155069 , psi0=0.2830605442995164 , v0=3.0000000299924823 , spline0=9.899996049599485 , a0=0.0 , w0=0.0
2026-01-26 14:32:25,938 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:25,939 - INFO - integration_test - Dyn residual k=0: pred=[9.171868637983579, 4.092063392717024, 0.2830605442995164, 3.0000000299924823, 10.199996052598733], ws=[9.171868635103687, 4.092063391879346, 0.28306054429951644, 3.0, 9.74545059505403], res=[2.879891880525065e-09, 8.376774829343958e-10, -5.551115123125783e-17, 2.999248227553153e-08, 0.4545454575447021], res_norm=4.545e-01
2026-01-26 14:32:25,940 - INFO - integration_test - Dyn residual k=1: pred=[9.459930177061588, 4.175852102603623, 0.28306054429951644, 3.0, 10.045450595054032], ws=[9.459930177061588, 4.175852102603623, 0.28306054429951644, 3.0, 9.843430393033831], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:32:25,941 - INFO - integration_test - Dyn residual k=2: pred=[9.74799171901949, 4.2596408133279, 0.28306054429951644, 3.0, 10.143430393033832], ws=[9.74799171901949, 4.2596408133279, 0.28306054429951644, 3.0, 10.648480898084337], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:25,956 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,006 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,026 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,070 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,091 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,136 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,154 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,194 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,214 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,257 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,275 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,316 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,335 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,375 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,393 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,436 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,454 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,496 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,515 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,556 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:26,574 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:26,616 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,274 - INFO - integration_test - Step 36: MPC solve successful
2026-01-26 14:32:27,279 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-26 14:32:27,279 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:27,279 - INFO - integration_test - === Applying control at step 36 ===
2026-01-26 14:32:27,279 - INFO - integration_test -   Control dict from planner: {'a': 7.364562354751749e-11, 'w': -0.11648176409694898}
2026-01-26 14:32:27,279 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:27,279 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:27,280 - INFO - integration_test - Step 36 completed in 1.383s
2026-01-26 14:32:27,334 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-26 14:32:27,335 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.17235011  4.09038382  0.27141237  3.00000003 10.19999605]
2026-01-26 14:32:27,336 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.226m, drift=0.671m)
2026-01-26 14:32:27,336 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-26 14:32:27,336 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:27,350 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.172, 4.090), path_start=(0.000, 0.000), dist=10.043m
2026-01-26 14:32:27,351 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.043m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:32:27,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-26 14:32:27,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:27,378 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:27,378 - INFO - integration_test - Warmstart k=0: x0=9.172350111326738 , y0=4.090383821111751 , psi0=0.2714123678898215 , v0=3.000000029999847 , spline0=10.19999605259947 , a0=0.0 , w0=0.0
2026-01-26 14:32:27,378 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:27,379 - INFO - integration_test - Dyn residual k=0: pred=[9.461368077912297, 4.170811532696371, 0.2714123678898215, 3.000000029999847, 10.499996055599455], ws=[9.461368075022133, 4.170811531892098, 0.2714123678898215, 3.0, 9.843430396033813], res=[2.8901645521273167e-09, 8.042730925694741e-10, 0.0, 2.999984705098768e-08, 0.6565656595656417], res_norm=6.566e-01
2026-01-26 14:32:27,380 - INFO - integration_test - Dyn residual k=1: pred=[9.750386038717528, 4.251239242672445, 0.2714123678898215, 3.0, 10.143430396033814], ws=[9.750386038717528, 4.251239242672445, 0.2714123678898215, 3.0, 10.64848090108432], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:27,381 - INFO - integration_test - Dyn residual k=2: pred=[10.039404002412923, 4.331666953452792, 0.2714123678898215, 3.0, 10.94848090108432], ws=[10.039404002412923, 4.331666953452792, 0.2714123678898215, 3.0, 10.74646069906412], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:32:27,396 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,446 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,465 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,507 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,526 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,567 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,586 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,629 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,648 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,689 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,707 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,747 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,765 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,806 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,826 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,868 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,889 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:27,931 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:27,965 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:28,033 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:28,054 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:28,096 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:28,768 - INFO - integration_test - Step 37: MPC solve successful
2026-01-26 14:32:28,773 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-26 14:32:28,773 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:28,773 - INFO - integration_test - === Applying control at step 37 ===
2026-01-26 14:32:28,773 - INFO - integration_test -   Control dict from planner: {'a': -1.1618281596484811e-11, 'w': -0.11208368058567783}
2026-01-26 14:32:28,773 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:28,773 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:28,774 - INFO - integration_test - Step 37 completed in 1.439s
2026-01-26 14:32:28,828 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-26 14:32:28,831 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.46181275  4.16919016  0.260204    3.00000003 10.49999606]
2026-01-26 14:32:28,832 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.236m, drift=0.618m)
2026-01-26 14:32:28,832 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-26 14:32:28,832 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:28,847 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.462, 4.169), path_start=(0.000, 0.000), dist=10.340m
2026-01-26 14:32:28,847 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.340m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:32:28,847 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-26 14:32:28,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:28,877 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:28,877 - INFO - integration_test - Warmstart k=0: x0=9.461812753495142 , y0=4.169190155802538 , psi0=0.2602039998312537 , v0=3.0000000299986853 , spline0=10.499996055599338 , a0=0.0 , w0=0.0
2026-01-26 14:32:28,877 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:28,878 - INFO - integration_test - Dyn residual k=0: pred=[9.751714010485147, 4.246373463554517, 0.2602039998312537, 3.0000000299986853, 10.799996058599206], ws=[9.75171400758626, 4.246373462782717, 0.26020399983125353, 3.0, 10.648480904084188], res=[2.898886464208772e-09, 7.717995131883981e-10, 1.6653345369377348e-16, 2.9998685313614715e-08, 0.1515151545150175], res_norm=1.515e-01
2026-01-26 14:32:28,879 - INFO - integration_test - Dyn residual k=1: pred=[10.041615261677379, 4.323556769762896, 0.26020399983125353, 3.0, 10.948480904084189], ws=[10.041615261677379, 4.323556769762896, 0.26020399983125353, 3.0, 10.746460702063986], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:28,880 - INFO - integration_test - Dyn residual k=2: pred=[10.331516515768497, 4.400740076743075, 0.26020399983125353, 3.0, 11.046460702063987], ws=[10.331516515768497, 4.400740076743075, 0.26020399983125353, 3.0, 10.844440500043785], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:28,895 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:28,946 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:28,966 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,006 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,028 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,070 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,089 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,131 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,150 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,192 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,210 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,254 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,272 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,314 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,333 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,374 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,394 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,436 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,456 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,497 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:29,516 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:29,558 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,375 - INFO - integration_test - Step 38: MPC solve successful
2026-01-26 14:32:30,380 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-26 14:32:30,380 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:30,380 - INFO - integration_test - === Applying control at step 38 ===
2026-01-26 14:32:30,380 - INFO - integration_test -   Control dict from planner: {'a': -2.3351792057377707e-06, 'w': -0.1872292220250684}
2026-01-26 14:32:30,380 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:30,380 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:30,382 - INFO - integration_test - Step 38 completed in 1.550s
2026-01-26 14:32:30,434 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-26 14:32:30,439 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.75241959  4.24365513  0.24148108  2.9999998  10.79999604]
2026-01-26 14:32:30,439 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.264m, drift=0.565m)
2026-01-26 14:32:30,439 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-26 14:32:30,440 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:30,454 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.752, 4.244), path_start=(0.000, 0.000), dist=10.636m
2026-01-26 14:32:30,454 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.636m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:32:30,454 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-26 14:32:30,457 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:30,480 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:30,480 - INFO - integration_test - Warmstart k=0: x0=9.75241958952576 , y0=4.243655131305063 , psi0=0.24148107762874685 , v0=2.9999997964807648 , spline0=10.799996035247414 , a0=0.0 , w0=0.0
2026-01-26 14:32:30,480 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:30,481 - INFO - integration_test - Dyn residual k=0: pred=[10.043715025838214, 4.315397424078453, 0.24148107762874685, 2.9999997964807648, 11.09999601489549], ws=[10.043715025838214, 4.315397424078453, 0.24148107762874682, 2.9999997964807648, 10.746460661360135], res=[0.0, 0.0, 2.7755575615628914e-17, 0.0, 0.3535353535353547], res_norm=3.535e-01
2026-01-26 14:32:30,482 - INFO - integration_test - Dyn residual k=1: pred=[10.335010462150668, 4.387139716851843, 0.24148107762874682, 2.9999997964807648, 11.046460641008212], ws=[10.335010462150668, 4.387139716851843, 0.24148107762874682, 2.9999997964807648, 10.844440438988011], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:32:30,482 - INFO - integration_test - Dyn residual k=2: pred=[10.626305898463123, 4.458882009625233, 0.24148107762874682, 2.9999997964807648, 11.144440418636087], ws=[10.626305898463123, 4.458882009625233, 0.24148107762874682, 2.9999997964807648, 10.942420216615886], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 14:32:30,498 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:30,548 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,568 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:30,609 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,629 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:30,671 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,689 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:30,730 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,749 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:30,790 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,807 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:30,849 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,869 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:30,918 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,938 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:30,980 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:30,999 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:31,042 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:31,063 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:31,109 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:31,129 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:31,170 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:31,797 - INFO - integration_test - Step 39: MPC solve successful
2026-01-26 14:32:31,805 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-26 14:32:31,805 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:31,805 - INFO - integration_test - === Applying control at step 39 ===
2026-01-26 14:32:31,805 - INFO - integration_test -   Control dict from planner: {'a': 2.335188213071273e-06, 'w': 0.001362715487319953}
2026-01-26 14:32:31,805 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:31,806 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:31,808 - INFO - integration_test - Step 39 completed in 1.369s
2026-01-26 14:32:31,876 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-26 14:32:31,882 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[10.04371015  4.31541727  0.24161735  3.00000003 11.09999604]
2026-01-26 14:32:31,883 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.288m, drift=0.865m)
2026-01-26 14:32:31,883 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-26 14:32:31,883 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:31,898 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(10.044, 4.315), path_start=(0.000, 0.000), dist=10.932m
2026-01-26 14:32:31,898 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.932m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:32:31,898 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-26 14:32:31,901 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:31,925 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:31,926 - INFO - integration_test - Warmstart k=0: x0=10.0437101480569 , y0=4.31541727428973 , psi0=0.24161734917747885 , v0=3.000000029999586 , spline0=11.099996038247372 , a0=0.0 , w0=0.0
2026-01-26 14:32:31,926 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:31,926 - INFO - integration_test - Dyn residual k=0: pred=[10.334995827904935, 4.387199267264599, 0.24161734917747885, 3.000000029999586, 11.39999604124733], ws=[10.334995824992118, 4.387199266546789, 0.24161734917747868, 3.0, 10.844440482691818], res=[2.9128166545433487e-09, 7.178098115900866e-10, 1.6653345369377348e-16, 2.999958592653229e-08, 0.555555558555513], res_norm=5.556e-01
2026-01-26 14:32:31,927 - INFO - integration_test - Dyn residual k=1: pred=[10.626281501927336, 4.458981258803848, 0.24161734917747868, 3.0, 11.144440482691818], ws=[10.626281501927336, 4.458981258803848, 0.24161734917747868, 3.0, 10.942420280671616], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 14:32:31,928 - INFO - integration_test - Dyn residual k=2: pred=[10.917567178862553, 4.5307632510609075, 0.24161734917747868, 3.0, 11.242420280671617], ws=[10.917567178862553, 4.5307632510609075, 0.24161734917747868, 3.0, 11.747470785722122], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 14:32:31,943 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:31,994 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,013 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,057 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,076 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,117 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,137 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,181 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,199 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,241 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,260 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,302 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,321 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,362 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,380 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,421 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,441 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,483 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,503 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,544 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:32,562 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:32,603 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,353 - INFO - integration_test - Step 40: MPC solve successful
2026-01-26 14:32:33,358 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-26 14:32:33,358 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:32:33,358 - INFO - integration_test - === Applying control at step 40 ===
2026-01-26 14:32:33,358 - INFO - integration_test -   Control dict from planner: {'a': -4.760163278525191e-05, 'w': -0.11617409888104108}
2026-01-26 14:32:33,358 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:32:33,359 - INFO - integration_test -   Planner output success: True
2026-01-26 14:32:33,360 - INFO - integration_test - Step 40 completed in 1.478s
2026-01-26 14:32:33,414 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-26 14:32:33,417 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.335406    4.38550562  0.22999994  2.99999527 11.39999557]
2026-01-26 14:32:33,418 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.230m, drift=0.106m)
2026-01-26 14:32:33,418 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-26 14:32:33,418 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:33,433 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.335, 4.386), path_start=(0.000, 0.000), dist=11.227m
2026-01-26 14:32:33,433 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.227m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:32:33,433 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-26 14:32:33,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:32:33,462 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:32:33,462 - INFO - integration_test - Warmstart k=0: x0=10.335405999960715 , y0=4.385505623913075 , psi0=0.22999993928937473 , v0=2.9999952698363073 , spline0=11.399995565231004 , a0=0.0 , w0=0.0
2026-01-26 14:32:33,462 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:32:33,463 - INFO - integration_test - Dyn residual k=0: pred=[10.627505462054375, 4.4538987554029905, 0.22999993928937473, 2.9999952698363073, 11.699995092214635], ws=[10.627505462054375, 4.4538987554029905, 0.22999993928937457, 2.9999952698363073, 10.942419334638878], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, 0.7575757575757578], res_norm=7.576e-01
2026-01-26 14:32:33,464 - INFO - integration_test - Dyn residual k=1: pred=[10.919604924148034, 4.522291886892906, 0.22999993928937457, 2.9999952698363073, 11.24241886162251], ws=[10.919604924148034, 4.522291886892906, 0.22999993928937457, 2.9999952698363073, 11.747469366673016], res=[0.0, 0.0, 0.0, 0.0, -0.505050505050507], res_norm=5.051e-01
2026-01-26 14:32:33,465 - INFO - integration_test - Dyn residual k=2: pred=[11.211704386241694, 4.590685018382821, 0.22999993928937457, 2.9999952698363073, 12.047468893656648], ws=[11.211704386241694, 4.590685018382821, 0.22999993928937457, 2.9999952698363073, 12.04437401561181], res=[0.0, 0.0, 0.0, 0.0, 0.0030948780448376567], res_norm=3.095e-03
2026-01-26 14:32:33,479 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:33,530 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,549 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:33,590 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,608 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:33,649 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,669 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:33,709 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,728 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:33,770 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,788 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:33,829 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,850 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:33,895 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,915 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:33,957 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:33,976 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:34,018 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:34,039 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:34,081 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:32:34,101 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:32:34,141 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:24,845 - WARNING - integration_test - Step 41: MPC solve failed
2026-01-26 14:33:24,845 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-26 14:33:24,850 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-26 14:33:24,850 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:33:24,850 - INFO - integration_test - === Applying control at step 41 ===
2026-01-26 14:33:24,850 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-26 14:33:24,850 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:33:24,850 - INFO - integration_test -   Planner output success: False
2026-01-26 14:33:24,850 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-26 14:33:24,852 - INFO - integration_test - Step 41 completed in 51.434s
2026-01-26 14:33:24,906 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-26 14:33:24,910 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.61486014  4.4627085   0.30999994  2.79999527 11.67999509]
2026-01-26 14:33:24,911 - DEBUG - integration_test - Step 42: Using propagated spline 11.6800 (close to path, dist=0.216m, drift=0.739m)
2026-01-26 14:33:24,911 - DEBUG - integration_test -   Set spline state to 11.6800
2026-01-26 14:33:24,911 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:33:24,925 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.615, 4.463), path_start=(0.000, 0.000), dist=11.515m
2026-01-26 14:33:24,925 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.515m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 14:33:24,925 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-26 14:33:24,928 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 14:33:24,954 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 14:33:24,955 - INFO - integration_test - Warmstart k=0: x0=10.614860141865567 , y0=4.4627085044498385 , psi0=0.30999993928937475 , v0=2.799995269836307 , spline0=11.679995092214634 , a0=0.0 , w0=0.0
2026-01-26 14:33:24,955 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 14:33:24,956 - INFO - integration_test - Dyn residual k=0: pred=[10.881513096149874, 4.548124762167607, 0.30999993928937475, 2.799995269836307, 11.959994619198264], ws=[10.881513096149874, 4.548124762167607, 0.30999993928937464, 2.799995269836307, 11.70746936667301], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.2525252525252544], res_norm=2.525e-01
2026-01-26 14:33:24,957 - INFO - integration_test - Dyn residual k=1: pred=[11.148166050434181, 4.633541019885375, 0.30999993928937464, 2.799995269836307, 11.98746889365664], ws=[11.148166050434181, 4.633541019885375, 0.30999993928937464, 2.799995269836307, 11.583428489616237], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-26 14:33:24,958 - INFO - integration_test - Dyn residual k=2: pred=[11.414819004718488, 4.718957277603144, 0.30999993928937464, 2.799995269836307, 11.863428016599867], ws=[11.414819004718488, 4.718957277603144, 0.30999993928937464, 2.799995269836307, 12.357373392907887], res=[0.0, 0.0, 0.0, 0.0, -0.4939453763080195], res_norm=4.939e-01
2026-01-26 14:33:24,972 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,023 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,044 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,085 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,105 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,147 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,166 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,207 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,225 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,266 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,284 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,326 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,345 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,387 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,406 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,446 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,466 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,508 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,528 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,575 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:25,608 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 14:33:25,668 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 14:33:39,162 - WARNING - integration_test - Step 42: MPC solve failed
2026-01-26 14:33:39,162 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-26 14:33:39,166 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.680)
2026-01-26 14:33:39,166 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 14:33:39,166 - INFO - integration_test - === Applying control at step 42 ===
2026-01-26 14:33:39,166 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-26 14:33:39,166 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 14:33:39,167 - INFO - integration_test -   Planner output success: False
2026-01-26 14:33:39,167 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-26 14:33:39,168 - INFO - integration_test - Step 42 completed in 14.258s
2026-01-26 14:33:39,224 - WARNING - integration_test - Test timeout reached (120.0s) at step 43. Terminating test early.
2026-01-26 14:33:39,228 - INFO - integration_test - Saving test results...
2026-01-26 14:33:39,228 - INFO - integration_test - Saved 44 vehicle states to test_outputs/20260126_143132_contouring_contouring_contouring_unicycle/vehicle_states.csv
2026-01-26 14:33:39,228 - INFO - integration_test - Saved obstacle summary to test_outputs/20260126_143132_contouring_contouring_contouring_unicycle/obstacle_summary.csv
2026-01-26 14:33:39,228 - INFO - integration_test - Saved state history: 44 vehicle states, 0 obstacles
2026-01-26 14:33:39,228 - INFO - integration_test - Creating animation...
2026-01-26 14:33:39,266 - DEBUG - integration_test - Creating animation with 44 frames (range: 0 to 43)
2026-01-26 14:33:39,266 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-26 14:33:39,271 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-26 14:33:39,325 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-26 14:33:39,355 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-26 14:33:42,950 - INFO - integration_test - Saved animation with 44 frames at 10.00 fps to test_outputs/20260126_143132_contouring_contouring_contouring_unicycle/animation.gif (duration: 4.40s, size: 276864 bytes)
2026-01-26 14:33:42,976 - INFO - integration_test - Animation created successfully
2026-01-26 14:33:42,976 - INFO - integration_test - Test completed successfully
2026-01-26 14:33:42,978 - INFO - integration_test - Starting integration test: goal_reaching_basic
2026-01-26 14:33:42,978 - INFO - integration_test - Output folder: test_outputs/20260126_143342_goal_linear_unicycle
