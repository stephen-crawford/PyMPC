2026-01-26 16:17:48,775 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-26 16:17:48,776 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2026-01-26 16:17:48,776 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-26 16:17:48,776 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-26 16:17:48,776 - INFO - integration_test - Creating objective module: contouring
2026-01-26 16:17:48,781 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-26 16:17:48,781 - INFO - integration_test - Creating 2 constraint module(s): ['ellipsoid', 'contouring']
2026-01-26 16:17:48,781 - DEBUG - integration_test - Creating constraint module: ellipsoid
2026-01-26 16:17:48,787 - INFO - integration_test - Constraint module 'ellipsoid' created: ellipsoid_constraints
2026-01-26 16:17:48,787 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-26 16:17:48,792 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-26 16:17:48,792 - INFO - integration_test - Created 2 constraint module(s)
2026-01-26 16:17:48,808 - INFO - integration_test - Setting solver on all modules...
2026-01-26 16:17:48,808 - WARNING - integration_test -   Module ellipsoid_constraints has no solver attribute
2026-01-26 16:17:48,808 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-26 16:17:48,808 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-26 16:17:48,808 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-26 16:17:48,808 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-26 16:17:48,808 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-26 16:17:48,809 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-26 16:17:48,809 - INFO - integration_test - Obstacle 0: s=9.03, pos=(7.05, 6.13), lateral_offset=0.00m, vel=(0.48, 0.36)
2026-01-26 16:17:48,809 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-26 16:17:48,809 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-26 16:17:48,810 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-26 16:17:48,810 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-26 16:17:48,810 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-26 16:17:48,810 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-26 16:17:48,810 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-26 16:17:48,810 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-26 16:17:48,810 - INFO - integration_test - Added spline variable: 0.0000
2026-01-26 16:17:48,810 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-26 16:17:48,810 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-26 16:17:48,810 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-26 16:17:48,811 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-26 16:17:48,811 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-26 16:17:48,811 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:48,824 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-26 16:17:48,824 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-26 16:17:48,827 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:48,851 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:17:48,851 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-26 16:17:48,851 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:17:48,852 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-26 16:17:48,853 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.05252525252525253], res=[0.0, 0.0, 0.0, 0.0, 0.09898989898989899], res_norm=9.899e-02
2026-01-26 16:17:48,854 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.15252525252525254], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.05353535353535353], res=[0.0, 0.0, 0.0, 0.0, 0.098989898989899], res_norm=9.899e-02
2026-01-26 16:17:48,868 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:48,916 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:48,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:48,975 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:48,993 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,031 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:49,051 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,089 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:49,106 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,145 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:49,162 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,205 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:49,225 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,264 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:49,281 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,321 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:49,339 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,377 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:49,395 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,432 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:49,450 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:49,492 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,306 - INFO - integration_test - Step 0: MPC solve successful
2026-01-26 16:17:50,314 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-26 16:17:50,314 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:17:50,314 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-26 16:17:50,314 - INFO - integration_test - === Applying control at step 0 ===
2026-01-26 16:17:50,314 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000188980525, 'w': 0.7999999922799838}
2026-01-26 16:17:50,314 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:17:50,314 - INFO - integration_test -   Planner output success: True
2026-01-26 16:17:50,316 - INFO - integration_test - Step 0 completed in 1.505s
2026-01-26 16:17:50,400 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-26 16:17:50,401 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-26 16:17:50,401 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-26 16:17:50,401 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-26 16:17:50,403 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:50,419 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-26 16:17:50,419 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-26 16:17:50,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:50,447 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:17:50,447 - INFO - integration_test - Warmstart k=0: x0=0.10987737537789577 , y0=0.004530845014431347 , psi0=0.07999999922799837 , v0=1.2000000018898052 , spline0=0.12000000018898052 , a0=0.0 , w0=0.0
2026-01-26 16:17:50,447 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:17:50,449 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803299895, 0.014120608213490484, 0.07999999922799837, 1.2000000018898052, 0.24000000037796104], ws=[0.2294935803299895, 0.014120608213490485, 0.0799999992279985, 1.2000000018898052, 0.052929292933110716], res=[0.0, -1.734723475976807e-18, -1.249000902703301e-16, 0.0, 0.18707070744485033], res_norm=1.871e-01
2026-01-26 16:17:50,449 - INFO - integration_test - Dyn residual k=1: pred=[0.34910978528208325, 0.023710371412549638, 0.0799999992279985, 1.2000000018898052, 0.17292929312209124], ws=[0.34910978528208325, 0.023710371412549638, 0.0799999992279985, 1.2000000018898052, 0.10828282829428165], res=[0.0, 0.0, 0.0, 0.0, 0.06464646482780959], res_norm=6.465e-02
2026-01-26 16:17:50,450 - INFO - integration_test - Dyn residual k=2: pred=[0.468725990234177, 0.033300134611608787, 0.0799999992279985, 1.2000000018898052, 0.22828282848326217], ws=[0.468725990234177, 0.033300134611608787, 0.0799999992279985, 1.2000000018898052, 0.11070707072234186], res=[0.0, 0.0, 0.0, 0.0, 0.11757575776092032], res_norm=1.176e-01
2026-01-26 16:17:50,468 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,518 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,537 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,577 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,596 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,638 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,655 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,695 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,713 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,751 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,767 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,805 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,821 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,859 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,876 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,913 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,931 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:50,968 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:50,986 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:51,023 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:51,041 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:51,081 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:51,625 - INFO - integration_test - Step 1: MPC solve successful
2026-01-26 16:17:51,632 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-26 16:17:51,632 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:17:51,632 - INFO - integration_test - === Applying control at step 1 ===
2026-01-26 16:17:51,632 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000099047295, 'w': 0.7999999352777327}
2026-01-26 16:17:51,632 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:17:51,632 - INFO - integration_test -   Planner output success: True
2026-01-26 16:17:51,634 - INFO - integration_test - Step 1 completed in 1.233s
2026-01-26 16:17:51,692 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-26 16:17:51,698 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-26 16:17:51,698 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-26 16:17:51,698 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-26 16:17:51,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:51,712 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-26 16:17:51,712 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-26 16:17:51,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:51,735 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:17:51,735 - INFO - integration_test - Warmstart k=0: x0=0.23889212819644287 , y0=0.020221621181917636 , psi0=0.15999999275577165 , v0=1.4000000028802781 , spline0=0.26000000047700833 , a0=0.0 , w0=0.0
2026-01-26 16:17:51,735 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:17:51,736 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039483149588, 0.04252616915256216, 0.15999999275577165, 1.4000000028802781, 0.40000000076503617], ws=[0.3771039483149588, 0.04252616915256216, 0.1599999927557718, 1.4000000028802781, 0.10909090910636438], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.2909090916586718], res_norm=2.909e-01
2026-01-26 16:17:51,736 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157684334747, 0.0648307171232067, 0.1599999927557718, 1.4000000028802781, 0.24909090939439218], ws=[0.5153157684334747, 0.0648307171232067, 0.1599999927557718, 1.4000000028802781, 0.3917171717916308], res=[0.0, 0.0, 0.0, 0.0, -0.1426262623972386], res_norm=1.426e-01
2026-01-26 16:17:51,737 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275885519907, 0.08713526509385125, 0.1599999927557718, 1.4000000028802781, 0.5317171720796586], ws=[0.6535275885519907, 0.08713526509385125, 0.1599999927557718, 1.4000000028802781, 0.17212121216185128], res=[0.0, 0.0, 0.0, 0.0, 0.35959595991780735], res_norm=3.596e-01
2026-01-26 16:17:51,751 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:51,796 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:51,815 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:51,853 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:51,871 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:51,908 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:51,926 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:51,964 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:51,981 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:52,020 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:52,040 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:52,082 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:52,099 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:52,141 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:52,159 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:52,202 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:52,222 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:52,267 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:52,287 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:52,332 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:52,352 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:52,398 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,005 - INFO - integration_test - Step 2: MPC solve successful
2026-01-26 16:17:53,012 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-26 16:17:53,013 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:17:53,013 - INFO - integration_test - === Applying control at step 2 ===
2026-01-26 16:17:53,013 - INFO - integration_test -   Control dict from planner: {'a': 2.000000015149525, 'w': 0.7999999728785939}
2026-01-26 16:17:53,013 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:17:53,013 - INFO - integration_test -   Planner output success: True
2026-01-26 16:17:53,014 - INFO - integration_test - Step 2 completed in 1.317s
2026-01-26 16:17:53,083 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-26 16:17:53,087 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999999 1.6        0.42      ]
2026-01-26 16:17:53,088 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.247m, drift=0.051m)
2026-01-26 16:17:53,088 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-26 16:17:53,089 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:53,104 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-26 16:17:53,104 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-26 16:17:53,107 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:53,131 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:17:53,131 - INFO - integration_test - Warmstart k=0: x0=0.3858364358725165 , y0=0.05014471459273491 , psi0=0.23999999004363104 , v0=1.6000000043952307 , spline0=0.42000000091653145 , a0=0.0 , w0=0.0
2026-01-26 16:17:53,131 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:17:53,132 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505126544315, 0.08817713337819234, 0.23999999004363104, 1.6000000043952307, 0.5800000013560546], ws=[0.5412505126544315, 0.08817713337819236, 0.23999999004363115, 1.6000000043952307, 0.3945454546413372], res=[0.0, -1.3877787807814457e-17, -1.1102230246251565e-16, 0.0, 0.18545454671471734], res_norm=1.855e-01
2026-01-26 16:17:53,133 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645894363465, 0.12620955216364982, 0.23999999004363115, 1.6000000043952307, 0.5545454550808603], ws=[0.6966645894363465, 0.12620955216364982, 0.23999999004363115, 1.6000000043952307, 0.2319191919917405], res=[0.0, 0.0, 0.0, 0.0, 0.3226262630891198], res_norm=3.226e-01
2026-01-26 16:17:53,134 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786662182614, 0.16424197094910728, 0.23999999004363115, 1.6000000043952307, 0.3919191924312636], ws=[0.8520786662182614, 0.16424197094910728, 0.23999999004363115, 1.6000000043952307, 0.4767676769482909], res=[0.0, 0.0, 0.0, 0.0, -0.08484848451702731], res_norm=8.485e-02
2026-01-26 16:17:53,147 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,195 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,213 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,250 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,268 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,308 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,328 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,365 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,382 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,419 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,438 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,478 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,497 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,538 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,559 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,607 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,629 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,680 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,706 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,758 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:53,802 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:53,867 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:54,594 - INFO - integration_test - Step 3: MPC solve successful
2026-01-26 16:17:54,601 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-26 16:17:54,601 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:17:54,601 - INFO - integration_test - === Applying control at step 3 ===
2026-01-26 16:17:54,601 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019350722, 'w': 0.8000000054580932}
2026-01-26 16:17:54,601 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:17:54,601 - INFO - integration_test -   Planner output success: True
2026-01-26 16:17:54,602 - INFO - integration_test - Step 3 completed in 1.515s
2026-01-26 16:17:54,659 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-26 16:17:54,663 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-26 16:17:54,663 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.333m, drift=0.231m)
2026-01-26 16:17:54,663 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-26 16:17:54,665 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:54,678 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-26 16:17:54,678 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-26 16:17:54,681 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:54,702 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:17:54,702 - INFO - integration_test - Warmstart k=0: x0=0.5491354617230363 , y0=0.09724075352201367 , psi0=0.31999999058944034 , v0=1.800000006330303 , spline0=0.6000000015495618 , a0=0.0 , w0=0.0
2026-01-26 16:17:54,702 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:17:54,702 - INFO - integration_test - Dyn residual k=0: pred=[0.719997838111615, 0.15386273302413445, 0.31999999058944034, 1.800000006330303, 0.7800000021825921], ws=[0.719997838111615, 0.15386273302413445, 0.3199999905894404, 1.800000006330303, 0.23353535362353908], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.5464646485590531], res_norm=5.465e-01
2026-01-26 16:17:54,703 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602145001936, 0.21048471252625522, 0.3199999905894404, 1.800000006330303, 0.4135353542565694], ws=[0.8908602145001937, 0.21048471252625522, 0.3199999905894404, 1.800000006330303, 0.30101010115230414], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, 0.11252525310426525], res_norm=1.125e-01
2026-01-26 16:17:54,704 - INFO - integration_test - Dyn residual k=2: pred=[1.0617225908887724, 0.267106692028376, 0.3199999905894404, 1.800000006330303, 0.48101010178533443], ws=[1.0617225908887724, 0.267106692028376, 0.3199999905894404, 1.800000006330303, 0.8062626267154797], res=[0.0, 0.0, 0.0, 0.0, -0.3252525249301452], res_norm=3.253e-01
2026-01-26 16:17:54,717 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:54,765 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:54,783 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:54,820 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:54,839 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:54,876 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:54,893 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:54,930 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:54,950 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:54,989 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:55,017 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:55,073 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:55,093 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:55,133 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:55,154 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:55,192 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:55,210 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:55,248 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:55,267 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:55,304 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:55,322 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:55,362 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:55,972 - INFO - integration_test - Step 4: MPC solve successful
2026-01-26 16:17:55,978 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-26 16:17:55,978 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:17:55,978 - INFO - integration_test - === Applying control at step 4 ===
2026-01-26 16:17:55,978 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000167279657, 'w': 0.7999999899751784}
2026-01-26 16:17:55,978 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:17:55,978 - INFO - integration_test -   Planner output success: True
2026-01-26 16:17:55,979 - INFO - integration_test - Step 4 completed in 1.317s
2026-01-26 16:17:56,039 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-26 16:17:56,040 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427976 0.39999999 2.00000001 0.8       ]
2026-01-26 16:17:56,040 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.414m, drift=0.063m)
2026-01-26 16:17:56,040 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-26 16:17:56,042 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:56,056 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-26 16:17:56,056 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-26 16:17:56,059 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:56,081 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:17:56,081 - INFO - integration_test - Warmstart k=0: x0=0.7268614897345553 , y0=0.16427976312303727 , psi0=0.39999998958695815 , v0=2.0000000080030995 , spline0=0.8000000023498718 , a0=0.0 , w0=0.0
2026-01-26 16:17:56,081 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:17:56,082 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736900832725, 0.24216342997821338, 0.39999998958695815, 2.0000000080030995, 1.0000000031501817], ws=[0.9110736900832725, 0.24216342997821338, 0.39999998958695837, 2.0000000080030995, 0.3030303031894031], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.6969696999607786], res_norm=6.970e-01
2026-01-26 16:17:56,083 - INFO - integration_test - Dyn residual k=1: pred=[1.0952858904319898, 0.32004709683338955, 0.39999998958695837, 2.0000000080030995, 0.503030303989713], ws=[1.0952858904319898, 0.32004709683338955, 0.39999998958695837, 2.0000000080030995, 0.8141414146601655], res=[0.0, 0.0, 0.0, 0.0, -0.3111111106704525], res_norm=3.111e-01
2026-01-26 16:17:56,083 - INFO - integration_test - Dyn residual k=2: pred=[1.279498090780707, 0.3979307636885657, 0.39999998958695837, 2.0000000080030995, 1.0141414154604755], ws=[1.279498090780707, 0.3979307636885657, 0.39999998958695837, 2.0000000080030995, 0.9050505057223355], res=[0.0, 0.0, 0.0, 0.0, 0.10909090973814006], res_norm=1.091e-01
2026-01-26 16:17:56,097 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,146 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,166 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,204 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,223 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,261 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,279 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,317 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,335 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,374 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,391 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,429 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,446 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,485 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,502 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,540 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,557 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,598 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,617 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,656 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:56,673 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:56,710 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,302 - INFO - integration_test - Step 5: MPC solve successful
2026-01-26 16:17:57,309 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-26 16:17:57,309 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:17:57,309 - INFO - integration_test - === Applying control at step 5 ===
2026-01-26 16:17:57,309 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000182224724, 'w': 0.7999999949449332}
2026-01-26 16:17:57,309 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:17:57,309 - INFO - integration_test -   Planner output success: True
2026-01-26 16:17:57,310 - INFO - integration_test - Step 5 completed in 1.271s
2026-01-26 16:17:57,373 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-26 16:17:57,376 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-26 16:17:57,377 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.478m, drift=0.283m)
2026-01-26 16:17:57,377 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-26 16:17:57,378 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:57,391 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-26 16:17:57,391 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-26 16:17:57,393 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:57,415 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:17:57,415 - INFO - integration_test - Warmstart k=0: x0=0.9167519046491941 , y0=0.2538238011006502 , psi0=0.4799999890814515 , v0=2.200000009825347 , spline0=1.0200000033324064 , a0=0.0 , w0=0.0
2026-01-26 16:17:57,416 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:17:57,416 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907896413708, 0.35541521804285714, 0.4799999890814515, 2.200000009825347, 1.240000004314941], ws=[1.1118907896413708, 0.35541521804285714, 0.4799999890814517, 2.200000009825347, 0.6303030307388829], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.6096969735760581], res_norm=6.097e-01
2026-01-26 16:17:57,417 - INFO - integration_test - Dyn residual k=1: pred=[1.3070296746335472, 0.4570066349850641, 0.4799999890814517, 2.200000009825347, 0.8503030317214176], ws=[1.3070296746335475, 0.4570066349850641, 0.4799999890814517, 2.200000009825347, 0.9135353542844915], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, -0.06323232256307387], res_norm=6.323e-02
2026-01-26 16:17:57,419 - INFO - integration_test - Dyn residual k=2: pred=[1.5021685596257242, 0.5585980519272711, 0.4799999890814517, 2.200000009825347, 1.1335353552670262], ws=[1.5021685596257242, 0.5585980519272711, 0.4799999890814517, 2.200000009825347, 1.012121213072729], res=[0.0, 0.0, 0.0, 0.0, 0.12141414219429714], res_norm=1.214e-01
2026-01-26 16:17:57,438 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,503 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,523 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,563 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,582 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,622 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,640 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,678 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,695 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,733 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,752 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,790 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,811 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,849 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,865 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,902 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,919 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:57,956 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:57,973 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:58,012 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:58,029 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:58,066 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:58,693 - INFO - integration_test - Step 6: MPC solve successful
2026-01-26 16:17:58,701 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-26 16:17:58,701 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:17:58,701 - INFO - integration_test - === Applying control at step 6 ===
2026-01-26 16:17:58,701 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000123754713, 'w': 0.7999999242976096}
2026-01-26 16:17:58,701 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:17:58,701 - INFO - integration_test -   Planner output success: True
2026-01-26 16:17:58,703 - INFO - integration_test - Step 6 completed in 1.327s
2026-01-26 16:17:58,778 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-26 16:17:58,787 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819144 0.55999998 2.40000001 1.26      ]
2026-01-26 16:17:58,788 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.531m, drift=0.154m)
2026-01-26 16:17:58,788 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-26 16:17:58,789 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:58,804 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-26 16:17:58,804 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-26 16:17:58,806 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:17:58,833 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:17:58,833 - INFO - integration_test - Warmstart k=0: x0=1.1162308664125455 , y0=0.36819143750465766 , psi0=0.5599999815112124 , v0=2.400000011062894 , spline0=1.2600000044386959 , a0=0.0 , w0=0.0
2026-01-26 16:17:58,833 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:17:58,834 - INFO - integration_test - Dyn residual k=0: pred=[1.319572096350112, 0.4956761218337825, 0.5599999815112124, 2.400000011062894, 1.5000000055449854], ws=[1.319572096350112, 0.49567612183378257, 0.5599999815112122, 2.400000011062894, 1.181818182826361], res=[0.0, -5.551115123125783e-17, 2.220446049250313e-16, 0.0, 0.3181818227186244], res_norm=3.182e-01
2026-01-26 16:17:58,835 - INFO - integration_test - Dyn residual k=1: pred=[1.5229133262876786, 0.6231608061629075, 0.5599999815112122, 2.400000011062894, 1.4218181839326505], ws=[1.5229133262876786, 0.6231608061629075, 0.5599999815112122, 2.400000011062894, 1.4977777792558389], res=[0.0, 0.0, 0.0, 0.0, -0.07595959532318841], res_norm=7.596e-02
2026-01-26 16:17:58,836 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545562252452, 0.7506454904920323, 0.5599999815112122, 2.400000011062894, 1.7377777803621284], ws=[1.7262545562252452, 0.7506454904920323, 0.5599999815112122, 2.400000011062894, 1.339595961084785], res=[0.0, 0.0, 0.0, 0.0, 0.3981818192773434], res_norm=3.982e-01
2026-01-26 16:17:58,852 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:58,906 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:58,930 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:58,982 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,005 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,050 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,069 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,111 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,130 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,171 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,189 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,229 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,248 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,293 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,314 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,356 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,375 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,413 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,432 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,470 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:17:59,487 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:17:59,526 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,268 - INFO - integration_test - Step 7: MPC solve successful
2026-01-26 16:18:00,274 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-26 16:18:00,274 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:00,274 - INFO - integration_test - === Applying control at step 7 ===
2026-01-26 16:18:00,274 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199794146, 'w': 0.8000000096357868}
2026-01-26 16:18:00,274 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:00,274 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:00,276 - INFO - integration_test - Step 7 completed in 1.489s
2026-01-26 16:18:00,333 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-26 16:18:00,337 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243449 0.50942443 0.63999998 2.60000001 1.52000001]
2026-01-26 16:18:00,338 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.598m, drift=0.045m)
2026-01-26 16:18:00,338 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-26 16:18:00,339 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:00,354 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-26 16:18:00,354 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-26 16:18:00,357 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:00,379 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:00,379 - INFO - integration_test - Warmstart k=0: x0=1.322434493048457 , y0=0.5094244304156603 , psi0=0.6399999824747911 , v0=2.6000000130608356 , spline0=1.5200000057447793 , a0=0.0 , w0=0.0
2026-01-26 16:18:00,380 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:00,380 - INFO - integration_test - Dyn residual k=0: pred=[1.5309793938671308, 0.6646952422950765, 0.6399999824747911, 2.6000000130608356, 1.7800000070508628], ws=[1.5309793938671308, 0.6646952422950765, 0.6399999824747908, 2.6000000130608356, 1.506666668233525], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.2733333388173378], res_norm=2.733e-01
2026-01-26 16:18:00,381 - INFO - integration_test - Dyn residual k=1: pred=[1.7395242946858045, 0.8199660541744925, 0.6399999824747908, 2.6000000130608356, 1.7666666695396085], ws=[1.7395242946858045, 0.8199660541744926, 0.6399999824747908, 2.6000000130608356, 1.8488888910836425], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.08222222154403402], res_norm=8.222e-02
2026-01-26 16:18:00,382 - INFO - integration_test - Dyn residual k=2: pred=[1.9480691955044782, 0.9752368660539087, 0.6399999824747908, 2.6000000130608356, 2.108888892389726], ws=[1.9480691955044782, 0.9752368660539088, 0.6399999824747908, 2.6000000130608356, 1.6959595982045426], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, 0.4129292941851834], res_norm=4.129e-01
2026-01-26 16:18:00,395 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,442 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,460 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,498 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,516 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,555 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,576 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,634 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,661 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,715 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,736 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,787 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,809 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,851 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,872 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,912 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,930 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:00,970 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:00,988 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:01,025 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:01,043 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:01,081 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:01,745 - INFO - integration_test - Step 8: MPC solve successful
2026-01-26 16:18:01,751 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-26 16:18:01,752 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:01,752 - INFO - integration_test - === Applying control at step 8 ===
2026-01-26 16:18:01,752 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199957038, 'w': 0.8000000099009387}
2026-01-26 16:18:01,752 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:01,752 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:01,753 - INFO - integration_test - Step 8 completed in 1.416s
2026-01-26 16:18:01,822 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-26 16:18:01,822 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223934 0.67925693 0.71999998 2.80000002 1.80000001]
2026-01-26 16:18:01,823 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.603m, drift=0.325m)
2026-01-26 16:18:01,823 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-26 16:18:01,824 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:01,837 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-26 16:18:01,837 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-26 16:18:01,840 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:01,864 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:01,864 - INFO - integration_test - Warmstart k=0: x0=1.532239336607224 , y0=0.6792569258687643 , psi0=0.7199999834648849 , v0=2.800000015060406 , spline0=1.80000000725082 , a0=0.0 , w0=0.0
2026-01-26 16:18:01,864 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:01,865 - INFO - integration_test - Dyn residual k=0: pred=[1.742744944951765, 0.8638846315331025, 0.7199999834648849, 2.800000015060406, 2.0800000087568606], ws=[1.742744944951765, 0.8638846315331025, 0.7199999834648851, 2.800000015060406, 1.8593939416937209], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.2206060670631398], res_norm=2.206e-01
2026-01-26 16:18:01,866 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505532963058, 1.0485123371974407, 0.7199999834648851, 2.800000015060406, 2.1393939431997615], ws=[1.9532505532963058, 1.0485123371974407, 0.7199999834648851, 2.800000015060406, 1.7098989922833003], res=[0.0, 0.0, 0.0, 0.0, 0.42949495091646117], res_norm=4.295e-01
2026-01-26 16:18:01,866 - INFO - integration_test - Dyn residual k=2: pred=[2.1637561616408467, 1.233140042861779, 0.7199999834648851, 2.800000015060406, 1.989898993789341], ws=[2.1637561616408467, 1.233140042861779, 0.7199999834648851, 2.800000015060406, 2.315151518717861], res=[0.0, 0.0, 0.0, 0.0, -0.32525252492851986], res_norm=3.253e-01
2026-01-26 16:18:01,882 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:01,931 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:01,951 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:01,992 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,011 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,051 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,070 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,111 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,128 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,167 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,184 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,222 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,240 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,279 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,296 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,333 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,351 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,389 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,407 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,445 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:02,463 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:02,501 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,168 - INFO - integration_test - Step 9: MPC solve successful
2026-01-26 16:18:03,176 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-26 16:18:03,176 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:03,176 - INFO - integration_test - === Applying control at step 9 ===
2026-01-26 16:18:03,176 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998863, 'w': 0.800000009973583}
2026-01-26 16:18:03,176 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:03,176 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:03,177 - INFO - integration_test - Step 9 completed in 1.355s
2026-01-26 16:18:03,243 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-26 16:18:03,244 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229391 0.87908749 0.79999998 3.00000002 2.10000001]
2026-01-26 16:18:03,245 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.597m, drift=0.256m)
2026-01-26 16:18:03,245 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-26 16:18:03,247 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:03,260 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-26 16:18:03,260 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-26 16:18:03,262 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:03,285 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:03,285 - INFO - integration_test - Warmstart k=0: x0=1.7422939058759777 , y0=0.8790874922322347 , psi0=0.7999999844622432 , v0=3.0000000170602923 , spline0=2.100000008956849 , a0=0.0 , w0=0.0
2026-01-26 16:18:03,285 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:03,286 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059232125607, 1.0942943174783442, 0.7999999844622432, 3.0000000170602923, 2.4000000106628785], ws=[1.9513059220239586, 1.0942943162545138, 0.799999984462243, 3.0, 1.7191919212728033], res=[1.1886021056284335e-09, 1.2238303703782094e-09, 2.220446049250313e-16, 1.706029228998318e-08, 0.6808080893900752], res_norm=6.808e-01
2026-01-26 16:18:03,286 - INFO - integration_test - Dyn residual k=1: pred=[2.1603179381719397, 1.3095011402767927, 0.799999984462243, 3.0, 2.019191921272803], ws=[2.1603179381719397, 1.3095011402767927, 0.799999984462243, 3.0, 2.1000000024427767], res=[0.0, 0.0, 0.0, 0.0, -0.08080808116997362], res_norm=8.081e-02
2026-01-26 16:18:03,287 - INFO - integration_test - Dyn residual k=2: pred=[2.369329954319921, 1.5247079642990715, 0.799999984462243, 3.0, 2.400000002442777], ws=[2.369329954319921, 1.5247079642990715, 0.799999984462243, 3.0, 2.181818184260959], res=[0.0, 0.0, 0.0, 0.0, 0.2181818181818178], res_norm=2.182e-01
2026-01-26 16:18:03,302 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,350 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,371 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,409 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,427 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,465 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,483 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,522 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,543 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,584 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,606 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,648 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,665 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,703 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,720 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,759 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,776 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,814 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,832 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,877 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:03,895 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:03,932 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:04,597 - INFO - integration_test - Step 10: MPC solve successful
2026-01-26 16:18:04,604 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-26 16:18:04,604 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:04,604 - INFO - integration_test - === Applying control at step 10 ===
2026-01-26 16:18:04,604 - INFO - integration_test -   Control dict from planner: {'a': 1.2939591413220105e-07, 'w': 0.800000009845599}
2026-01-26 16:18:04,604 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:04,604 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:04,606 - INFO - integration_test - Step 10 completed in 1.362s
2026-01-26 16:18:04,668 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-26 16:18:04,669 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247937 1.10242086 0.87999999 3.00000003 2.40000001]
2026-01-26 16:18:04,670 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.575m, drift=0.188m)
2026-01-26 16:18:04,670 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-26 16:18:04,671 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:04,683 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-26 16:18:04,683 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-26 16:18:04,686 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:04,708 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:04,708 - INFO - integration_test - Warmstart k=0: x0=1.9424793686440749 , y0=1.1024208634604205 , psi0=0.8799999854468031 , v0=3.000000029999884 , spline0=2.4000000119568377 , a0=0.0 , w0=0.0
2026-01-26 16:18:04,708 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:04,709 - INFO - integration_test - Dyn residual k=0: pred=[2.1336247171801093, 1.333642526660543, 0.8799999854468031, 3.000000029999884, 2.700000014956826], ws=[2.133624715268663, 1.3336425243483354, 0.879999985446803, 3.0, 2.1000000032609556], res=[1.9114461125013804e-09, 2.3122075365478167e-09, 1.1102230246251565e-16, 2.99998839103921e-08, 0.6000000116958706], res_norm=6.000e-01
2026-01-26 16:18:04,710 - INFO - integration_test - Dyn residual k=1: pred=[2.3247700618932514, 1.5648641852362504, 0.879999985446803, 3.0, 2.4000000032609554], ws=[2.3247700618932514, 1.5648641852362504, 0.879999985446803, 3.0, 2.1818181850791376], res=[0.0, 0.0, 0.0, 0.0, 0.2181818181818178], res_norm=2.182e-01
2026-01-26 16:18:04,711 - INFO - integration_test - Dyn residual k=2: pred=[2.5159154085178397, 1.7960858461241653, 0.879999985446803, 3.0, 2.4818181850791374], ws=[2.5159154085178397, 1.7960858461241653, 0.879999985446803, 3.0, 2.766666670652279], res=[0.0, 0.0, 0.0, 0.0, -0.28484848557314146], res_norm=2.848e-01
2026-01-26 16:18:04,724 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:04,772 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:04,790 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:04,828 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:04,846 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:04,888 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:04,907 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:04,945 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:04,965 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:05,004 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:05,024 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:05,064 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:05,084 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:05,127 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:05,149 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:05,205 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:05,233 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:05,285 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:05,304 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:05,344 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:05,364 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:05,404 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,095 - INFO - integration_test - Step 11: MPC solve successful
2026-01-26 16:18:06,102 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-26 16:18:06,103 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:06,103 - INFO - integration_test - === Applying control at step 11 ===
2026-01-26 16:18:06,103 - INFO - integration_test -   Control dict from planner: {'a': -2.2173153826739664e-10, 'w': -0.054327878023577005}
2026-01-26 16:18:06,103 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:06,103 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:06,104 - INFO - integration_test - Step 11 completed in 1.435s
2026-01-26 16:18:06,174 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-26 16:18:06,179 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13425186 1.33312216 0.8745672  3.00000003 2.70000001]
2026-01-26 16:18:06,179 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.549m, drift=0.119m)
2026-01-26 16:18:06,179 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-26 16:18:06,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:06,195 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.134, 1.333), path_start=(0.000, 0.000), dist=2.516m
2026-01-26 16:18:06,196 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-26 16:18:06,198 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:06,221 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:06,221 - INFO - integration_test - Warmstart k=0: x0=2.1342518644700705 , y0=1.3331221644545617 , psi0=0.8745671976444455 , v0=3.0000000299777105 , spline0=2.700000014954609 , a0=0.0 , w0=0.0
2026-01-26 16:18:06,221 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:06,222 - INFO - integration_test - Dyn residual k=0: pred=[2.326650564218716, 1.5633019683768283, 0.8745671976444455, 3.0000000299777105, 3.00000001795238], ws=[2.326650562296159, 1.5633019660767404, 0.8745671976444456, 3.0, 2.181818185896711], res=[1.922557224531829e-09, 2.3000878979217987e-09, -1.1102230246251565e-16, 2.9977710536144286e-08, 0.8181818320556689], res_norm=8.182e-01
2026-01-26 16:18:06,222 - INFO - integration_test - Dyn residual k=1: pred=[2.519049260122247, 1.7934817676989192, 0.8745671976444456, 3.0, 2.481818185896711], ws=[2.519049260122247, 1.7934817676989192, 0.8745671976444456, 3.0, 2.766666671651536], res=[0.0, 0.0, 0.0, 0.0, -0.284848485754825], res_norm=2.848e-01
2026-01-26 16:18:06,223 - INFO - integration_test - Dyn residual k=2: pred=[2.7114479579483355, 2.023661569321098, 0.8745671976444456, 3.0, 3.066666671651536], ws=[2.7114479579483355, 2.023661569321098, 0.8745671976444456, 3.0, 2.8666666716515365], res=[0.0, 0.0, 0.0, 0.0, 0.1999999999999993], res_norm=2.000e-01
2026-01-26 16:18:06,238 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,287 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,306 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,346 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,366 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,408 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,427 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,468 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,487 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,527 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,552 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,606 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,628 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,672 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,691 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,731 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,752 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,793 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,813 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,853 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:06,873 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:06,917 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:07,578 - INFO - integration_test - Step 12: MPC solve successful
2026-01-26 16:18:07,585 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-26 16:18:07,585 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:07,585 - INFO - integration_test - === Applying control at step 12 ===
2026-01-26 16:18:07,585 - INFO - integration_test -   Control dict from planner: {'a': -1.134436755588703e-07, 'w': -0.19880531839797222}
2026-01-26 16:18:07,585 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:07,586 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:07,587 - INFO - integration_test - Step 12 completed in 1.408s
2026-01-26 16:18:07,660 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-26 16:18:07,661 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32892586 1.56137437 0.85468667 3.00000002 3.00000002]
2026-01-26 16:18:07,661 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.534m, drift=0.419m)
2026-01-26 16:18:07,661 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-26 16:18:07,663 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:07,677 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.329, 1.561), path_start=(0.000, 0.000), dist=2.804m
2026-01-26 16:18:07,677 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-26 16:18:07,681 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:07,704 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:07,704 - INFO - integration_test - Warmstart k=0: x0=2.3289258634108894 , y0=1.5613743744699136 , psi0=0.8546866658046482 , v0=3.000000018633343 , spline0=3.000000016817943 , a0=0.0 , w0=0.0
2026-01-26 16:18:07,704 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:07,705 - INFO - integration_test - Dyn residual k=0: pred=[2.525862337751852, 1.7876839548949408, 0.8546866658046482, 3.000000018633343, 3.3000000186812772], ws=[2.525862336528657, 1.7876839534893063, 0.8546866658046484, 3.0, 2.766666672272648], res=[1.223194878718914e-09, 1.405634497686492e-09, -1.1102230246251565e-16, 1.8633342868668024e-08, 0.5333333464086292], res_norm=5.333e-01
2026-01-26 16:18:07,705 - INFO - integration_test - Dyn residual k=1: pred=[2.7227988096464246, 2.013993532508699, 0.8546866658046484, 3.0, 3.066666672272648], ws=[2.7227988096464246, 2.013993532508699, 0.8546866658046484, 3.0, 2.866666672272648], res=[0.0, 0.0, 0.0, 0.0, 0.19999999999999973], res_norm=2.000e-01
2026-01-26 16:18:07,706 - INFO - integration_test - Dyn residual k=2: pred=[2.9197352827641923, 2.2403031115280916, 0.8546866658046484, 3.0, 3.1666666722726484], ws=[2.9197352827641923, 2.2403031115280916, 0.8546866658046484, 3.0, 3.685858592823592], res=[0.0, 0.0, 0.0, 0.0, -0.5191919205509437], res_norm=5.192e-01
2026-01-26 16:18:07,719 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:07,770 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:07,788 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:07,825 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:07,844 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:07,884 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:07,903 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:07,941 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:07,963 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:08,002 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:08,020 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:08,056 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:08,074 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:08,112 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:08,129 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:08,168 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:08,185 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:08,223 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:08,240 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:08,276 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:08,293 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:08,330 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,092 - INFO - integration_test - Step 13: MPC solve successful
2026-01-26 16:18:09,099 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-26 16:18:09,099 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:09,099 - INFO - integration_test - === Applying control at step 13 ===
2026-01-26 16:18:09,099 - INFO - integration_test -   Control dict from planner: {'a': 1.1366541515616049e-07, 'w': -0.1418145292261806}
2026-01-26 16:18:09,099 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:09,099 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:09,101 - INFO - integration_test - Step 13 completed in 1.440s
2026-01-26 16:18:09,168 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-26 16:18:09,169 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52746041 1.78627997 0.84050521 3.00000003 3.30000002]
2026-01-26 16:18:09,170 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.485m, drift=0.350m)
2026-01-26 16:18:09,170 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-26 16:18:09,171 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:09,184 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.527, 1.786), path_start=(0.000, 0.000), dist=3.095m
2026-01-26 16:18:09,184 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-26 16:18:09,186 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:09,208 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:09,208 - INFO - integration_test - Warmstart k=0: x0=2.527460409533992 , y0=1.7862799704768895 , psi0=0.8405052128820302 , v0=3.0000000299998844 , spline0=3.3000000198179316 , a0=0.0 , w0=0.0
2026-01-26 16:18:09,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:09,208 - INFO - integration_test - Dyn residual k=0: pred=[2.7275863727489336, 2.009774043434731, 0.8405052128820302, 3.0000000299998844, 3.60000002281792], ws=[2.7275863707476815, 2.009774041199799, 0.8405052128820301, 3.0, 2.866666673272644], res=[2.0012520529633093e-09, 2.234932239275622e-09, 1.1102230246251565e-16, 2.999988435448131e-08, 0.7333333495452763], res_norm=7.333e-01
2026-01-26 16:18:09,209 - INFO - integration_test - Dyn residual k=1: pred=[2.927712331961371, 2.2332681119227082, 0.8405052128820301, 3.0, 3.166666673272644], ws=[2.927712331961371, 2.2332681119227082, 0.8405052128820301, 3.0, 3.6858585940660116], res=[0.0, 0.0, 0.0, 0.0, -0.5191919207933675], res_norm=5.192e-01
2026-01-26 16:18:09,210 - INFO - integration_test - Dyn residual k=2: pred=[3.1278382931750603, 2.4567621826456176, 0.8405052128820301, 3.0, 3.985858594066012], ws=[3.1278382931750603, 2.4567621826456176, 0.8405052128820301, 3.0, 3.810101018308436], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-26 16:18:09,223 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,270 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,289 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,327 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,347 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,388 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,407 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,446 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,464 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,502 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,520 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,562 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,581 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,621 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,639 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,679 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,698 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,735 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,753 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,793 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:09,813 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:09,857 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:10,512 - INFO - integration_test - Step 14: MPC solve successful
2026-01-26 16:18:10,518 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-26 16:18:10,519 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:10,519 - INFO - integration_test - === Applying control at step 14 ===
2026-01-26 16:18:10,519 - INFO - integration_test -   Control dict from planner: {'a': -5.915377894510855e-08, 'w': -0.1452745284885876}
2026-01-26 16:18:10,519 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:10,519 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:10,520 - INFO - integration_test - Step 14 completed in 1.351s
2026-01-26 16:18:10,582 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-26 16:18:10,583 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.7292027  2.00831255 0.82597776 3.00000002 3.60000002]
2026-01-26 16:18:10,583 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.446m, drift=0.281m)
2026-01-26 16:18:10,584 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-26 16:18:10,585 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:10,598 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.729, 2.008), path_start=(0.000, 0.000), dist=3.388m
2026-01-26 16:18:10,598 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-26 16:18:10,601 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:10,624 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:10,624 - INFO - integration_test - Warmstart k=0: x0=2.7292027045525327 , y0=2.0083125473331407 , psi0=0.8259777600331714 , v0=3.0000000240845064 , spline0=3.600000022226382 , a0=0.0 , w0=0.0
2026-01-26 16:18:10,624 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:10,625 - INFO - integration_test - Dyn residual k=0: pred=[2.93255423516082, 2.228875818174723, 0.8259777600331714, 3.0000000240845064, 3.9000000246348328], ws=[2.9325542335282795, 2.228875816404004, 0.8259777600331715, 3.0, 3.6858585950634515], res=[1.632540325147147e-09, 1.770719126881204e-09, -1.1102230246251565e-16, 2.4084506389243643e-08, 0.21414142957138127], res_norm=2.141e-01
2026-01-26 16:18:10,626 - INFO - integration_test - Dyn residual k=1: pred=[3.1359057625040263, 2.449439085474867, 0.8259777600331715, 3.0, 3.9858585950634513], ws=[3.1359057625040263, 2.449439085474867, 0.8259777600331715, 3.0, 3.8101010193058755], res=[0.0, 0.0, 0.0, 0.0, 0.17575757575757578], res_norm=1.758e-01
2026-01-26 16:18:10,626 - INFO - integration_test - Dyn residual k=2: pred=[3.339257291479773, 2.6700023545457303, 0.8259777600331715, 3.0, 4.110101019305875], ws=[3.339257291479773, 2.6700023545457303, 0.8259777600331715, 3.0, 4.126262635916508], res=[0.0, 0.0, 0.0, 0.0, -0.01616161661063309], res_norm=1.616e-02
2026-01-26 16:18:10,641 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:10,687 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:10,705 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:10,742 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:10,762 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:10,800 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:10,817 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:10,854 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:10,873 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:10,910 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:10,928 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:10,968 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:10,985 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:11,022 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:11,040 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:11,077 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:11,094 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:11,132 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:11,151 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:11,189 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:11,207 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:11,244 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:11,920 - INFO - integration_test - Step 15: MPC solve successful
2026-01-26 16:18:11,926 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-26 16:18:11,927 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:11,927 - INFO - integration_test - === Applying control at step 15 ===
2026-01-26 16:18:11,927 - INFO - integration_test -   Control dict from planner: {'a': 5.904696491055927e-08, 'w': -0.1374826801305529}
2026-01-26 16:18:11,927 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:11,927 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:11,928 - INFO - integration_test - Step 15 completed in 1.345s
2026-01-26 16:18:11,988 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-26 16:18:11,995 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.93406399 2.22747103 0.81222949 3.00000003 3.90000003]
2026-01-26 16:18:11,995 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.418m, drift=0.213m)
2026-01-26 16:18:11,995 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-26 16:18:11,997 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:12,011 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.934, 2.227), path_start=(0.000, 0.000), dist=3.684m
2026-01-26 16:18:12,011 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-26 16:18:12,014 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:12,036 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:12,037 - INFO - integration_test - Warmstart k=0: x0=2.9340639869477996 , y0=2.2274710265146833 , psi0=0.8122294920201161 , v0=3.0000000299892027 , spline0=3.900000025225302 , a0=0.0 , w0=0.0
2026-01-26 16:18:12,037 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:12,037 - INFO - integration_test - Dyn residual k=0: pred=[3.1404285674683856, 2.445217809971787, 0.8122294920201161, 3.0000000299892027, 4.200000028224222], ws=[3.1404285654054824, 2.445217807795103, 0.8122294920201161, 3.0, 3.8101010205478523], res=[2.062903181609954e-09, 2.1766841662440584e-09, 0.0, 2.9989202676716786e-08, 0.38989900767637], res_norm=3.899e-01
2026-01-26 16:18:12,038 - INFO - integration_test - Dyn residual k=1: pred=[3.3467931438631653, 2.6629645890755222, 0.8122294920201161, 3.0, 4.1101010205478525], ws=[3.3467931438631653, 2.6629645890755222, 0.8122294920201161, 3.0, 4.12626263721907], res=[0.0, 0.0, 0.0, 0.0, -0.016161616671217516], res_norm=1.616e-02
2026-01-26 16:18:12,039 - INFO - integration_test - Dyn residual k=2: pred=[3.553157722320848, 2.8807113703559417, 0.8122294920201161, 3.0, 4.42626263721907], ws=[3.553157722320848, 2.8807113703559417, 0.8122294920201161, 3.0, 4.256565667522101], res=[0.0, 0.0, 0.0, 0.0, 0.169696969696969], res_norm=1.697e-01
2026-01-26 16:18:12,053 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,099 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,119 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,160 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,179 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,219 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,238 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,277 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,296 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,336 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,354 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,394 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,413 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,452 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,471 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,509 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,528 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,568 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,586 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,626 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:12,645 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:12,684 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:13,777 - INFO - integration_test - Step 16: MPC solve successful
2026-01-26 16:18:13,784 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-26 16:18:13,784 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:13,784 - INFO - integration_test - === Applying control at step 16 ===
2026-01-26 16:18:13,784 - INFO - integration_test -   Control dict from planner: {'a': -1.201681598270535e-09, 'w': -0.12225223046502141}
2026-01-26 16:18:13,784 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:13,784 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:13,785 - INFO - integration_test - Step 16 completed in 1.791s
2026-01-26 16:18:13,846 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-26 16:18:13,853 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.14175441 2.44395098 0.80000427 3.00000003 4.20000003]
2026-01-26 16:18:13,854 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.405m, drift=0.144m)
2026-01-26 16:18:13,854 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-26 16:18:13,855 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:13,868 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.142, 2.444), path_start=(0.000, 0.000), dist=3.980m
2026-01-26 16:18:13,868 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-26 16:18:13,871 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:13,894 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:13,894 - INFO - integration_test - Warmstart k=0: x0=3.14175441201802 , y0=2.4439509752773048 , psi0=0.800004268973614 , v0=3.0000000298690344 , spline0=4.200000028212205 , a0=0.0 , w0=0.0
2026-01-26 16:18:13,894 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:13,895 - INFO - integration_test - Dyn residual k=0: pred=[3.350765508188984, 2.6591586969546506, 0.800004268973614, 3.0000000298690344, 4.500000031199109], ws=[3.3507655061079977, 2.659158694811968, 0.800004268973614, 3.0, 4.126262638516413], res=[2.0809864942350487e-09, 2.1426824758918883e-09, 0.0, 2.986903435697741e-08, 0.37373739268269635], res_norm=3.737e-01
2026-01-26 16:18:13,896 - INFO - integration_test - Dyn residual k=1: pred=[3.5597766001979756, 2.8743664143466314, 0.800004268973614, 3.0, 4.4262626385164126], ws=[3.5597766001979756, 2.8743664143466314, 0.800004268973614, 3.0, 4.256565668819443], res=[0.0, 0.0, 0.0, 0.0, 0.1696969696969699], res_norm=1.697e-01
2026-01-26 16:18:13,896 - INFO - integration_test - Dyn residual k=2: pred=[3.7687876942879535, 3.0895741338812948, 0.800004268973614, 3.0, 4.5565656688194425], ws=[3.7687876942879535, 3.0895741338812948, 0.800004268973614, 3.0, 4.342424270636447], res=[0.0, 0.0, 0.0, 0.0, 0.2141413981829956], res_norm=2.141e-01
2026-01-26 16:18:13,912 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:13,964 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:13,986 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,028 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,047 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,086 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,104 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,142 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,160 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,199 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,217 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,255 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,272 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,310 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,328 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,368 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,385 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,426 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,445 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,485 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:14,503 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:14,545 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,306 - INFO - integration_test - Step 17: MPC solve successful
2026-01-26 16:18:15,313 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-26 16:18:15,314 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:15,314 - INFO - integration_test - === Applying control at step 17 ===
2026-01-26 16:18:15,314 - INFO - integration_test -   Control dict from planner: {'a': 1.3085041525522162e-09, 'w': -0.11241549896200335}
2026-01-26 16:18:15,314 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:15,314 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:15,315 - INFO - integration_test - Step 17 completed in 1.462s
2026-01-26 16:18:15,388 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-26 16:18:15,388 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.35197073 2.65797937 0.78876272 3.00000003 4.50000003]
2026-01-26 16:18:15,389 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.405m, drift=0.075m)
2026-01-26 16:18:15,389 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-26 16:18:15,390 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:15,404 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.352, 2.658), path_start=(0.000, 0.000), dist=4.278m
2026-01-26 16:18:15,404 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-26 16:18:15,407 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:15,434 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:15,434 - INFO - integration_test - Warmstart k=0: x0=3.3519707274473753 , y0=2.657979372306798 , psi0=0.7887627190774137 , v0=3.000000029999885 , spline0=4.500000031212194 , a0=0.0 , w0=0.0
2026-01-26 16:18:15,434 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:15,435 - INFO - integration_test - Dyn residual k=0: pred=[3.5633878345319063, 2.8708239367945976, 0.7887627190774137, 3.000000029999885, 4.800000034212182], ws=[3.5633878324177433, 2.87082393466616, 0.7887627190774138, 3.0, 4.256565670122467], res=[2.1141630668353173e-09, 2.128437426307528e-09, -1.1102230246251565e-16, 2.999988479857052e-08, 0.5434343640897152], res_norm=5.434e-01
2026-01-26 16:18:15,436 - INFO - integration_test - Dyn residual k=1: pred=[3.774804937388111, 3.0836684970255224, 0.7887627190774138, 3.0, 4.556565670122467], ws=[3.774804937388111, 3.0836684970255224, 0.7887627190774138, 3.0, 4.342424273636436], res=[0.0, 0.0, 0.0, 0.0, 0.21414139648603125], res_norm=2.141e-01
2026-01-26 16:18:15,436 - INFO - integration_test - Dyn residual k=2: pred=[3.986222042358479, 3.2965130593848846, 0.7887627190774138, 3.0, 4.642424273636435], ws=[3.986222042358479, 3.2965130593848846, 0.7887627190774138, 3.0, 4.945454576666738], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:15,452 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,505 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,524 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,567 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,585 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,629 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,649 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,692 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,711 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,751 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,769 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,808 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,828 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,866 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,884 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,923 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:15,943 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:15,983 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:16,002 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:16,042 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:16,060 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:16,100 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:17,905 - WARNING - integration_test - Step 18: MPC solve failed
2026-01-26 16:18:17,905 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-26 16:18:17,912 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-26 16:18:17,912 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:17,913 - INFO - integration_test - === Applying control at step 18 ===
2026-01-26 16:18:17,913 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.8}
2026-01-26 16:18:17,913 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:17,913 - INFO - integration_test -   Planner output success: False
2026-01-26 16:18:17,913 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.8}
2026-01-26 16:18:17,914 - INFO - integration_test - Step 18 completed in 2.526s
2026-01-26 16:18:17,979 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-26 16:18:17,985 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.54799533 2.87159008 0.86876272 2.80000003 4.78000003]
2026-01-26 16:18:17,985 - DEBUG - integration_test - Step 19: Using propagated spline 4.7800 (close to path, dist=0.368m, drift=0.355m)
2026-01-26 16:18:17,985 - DEBUG - integration_test -   Set spline state to 4.7800
2026-01-26 16:18:17,986 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:17,999 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.548, 2.872), path_start=(0.000, 0.000), dist=4.564m
2026-01-26 16:18:17,999 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-26 16:18:18,002 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:18,025 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:18,025 - INFO - integration_test - Warmstart k=0: x0=3.5479953275015346 , y0=2.8715900796849927 , psi0=0.8687627190774136 , v0=2.8000000299998846 , spline0=4.780000034212182 , a0=0.0 , w0=0.0
2026-01-26 16:18:18,025 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:18,026 - INFO - integration_test - Dyn residual k=0: pred=[3.7288114174901095, 3.085378627744137, 0.8687627190774136, 2.8000000299998846, 5.06000003721217], ws=[3.7288114174901095, 3.085378627744137, 0.8687627190774139, 2.8000000299998846, 4.807474784686917], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.2525252525252526], res_norm=2.525e-01
2026-01-26 16:18:18,026 - INFO - integration_test - Dyn residual k=1: pred=[3.9096275074786844, 3.2991671758032814, 0.8687627190774139, 2.8000000299998846, 5.087474787686905], ws=[3.9096275074786844, 3.2991671758032814, 0.8687627190774139, 2.8000000299998846, 4.683434383646501], res=[0.0, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.040e-01
2026-01-26 16:18:18,027 - INFO - integration_test - Dyn residual k=2: pred=[4.090443597467259, 3.512955723862426, 0.8687627190774139, 2.8000000299998846, 4.963434386646489], ws=[4.090443597467259, 3.512955723862426, 0.8687627190774139, 2.8000000299998846, 5.266464689676792], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:18,041 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,090 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,108 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,147 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,166 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,205 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,223 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,261 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,279 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,317 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,334 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,373 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,391 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,429 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,446 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,485 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,503 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,540 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,558 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,598 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:18,616 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:18,658 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,339 - INFO - integration_test - Step 19: MPC solve successful
2026-01-26 16:18:19,346 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.780)
2026-01-26 16:18:19,346 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:19,346 - INFO - integration_test - === Applying control at step 19 ===
2026-01-26 16:18:19,346 - INFO - integration_test -   Control dict from planner: {'a': 1.999999999976982, 'w': -0.800000007931365}
2026-01-26 16:18:19,346 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:19,346 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:19,347 - INFO - integration_test - Step 19 completed in 1.363s
2026-01-26 16:18:19,408 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-26 16:18:19,409 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.74401993 3.08520079 0.78876272 3.00000003 5.08000004]
2026-01-26 16:18:19,409 - DEBUG - integration_test - Step 20: Using propagated spline 5.0800 (close to path, dist=0.315m, drift=0.287m)
2026-01-26 16:18:19,409 - DEBUG - integration_test -   Set spline state to 5.0800
2026-01-26 16:18:19,410 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:19,423 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.744, 3.085), path_start=(0.000, 0.000), dist=4.851m
2026-01-26 16:18:19,423 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-26 16:18:19,426 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:19,448 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:19,448 - INFO - integration_test - Warmstart k=0: x0=3.744019927640264 , y0=3.085200786983344 , psi0=0.7887627182842771 , v0=3.0000000299975826 , spline0=5.08000003721194 , a0=0.0 , w0=0.0
2026-01-26 16:18:19,448 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:19,449 - INFO - integration_test - Dyn residual k=0: pred=[3.9554370348934476, 3.2980453513032977, 0.7887627182842771, 3.0000000299975826, 5.380000040211699], ws=[3.9554370327794466, 3.2980453491750237, 0.7887627182842771, 3.0, 4.925454582666485], res=[2.114000974273722e-09, 2.128274001478303e-09, 0.0, 2.999758264010666e-08, 0.4545454575452137], res_norm=4.545e-01
2026-01-26 16:18:19,449 - INFO - integration_test - Dyn residual k=1: pred=[4.166854137918629, 3.510889911366703, 0.7887627182842771, 3.0, 5.225454582666485], ws=[4.166854137918629, 3.510889911366703, 0.7887627182842771, 3.0, 5.023434380646283], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 16:18:19,450 - INFO - integration_test - Dyn residual k=2: pred=[4.378271243057812, 3.7237344735583826, 0.7887627182842771, 3.0, 5.323434380646283], ws=[4.378271243057812, 3.7237344735583826, 0.7887627182842771, 3.0, 5.626464683676586], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:19,463 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:19,513 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,533 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:19,577 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,598 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:19,645 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,665 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:19,705 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,724 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:19,765 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,784 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:19,825 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,844 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:19,886 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,904 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:19,941 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:19,959 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:20,000 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:20,019 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:20,063 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:20,083 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:20,124 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:20,920 - INFO - integration_test - Step 20: MPC solve successful
2026-01-26 16:18:20,927 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.080)
2026-01-26 16:18:20,927 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:20,927 - INFO - integration_test - === Applying control at step 20 ===
2026-01-26 16:18:20,927 - INFO - integration_test -   Control dict from planner: {'a': 2.2995729527722717e-11, 'w': -0.4526034804186071}
2026-01-26 16:18:20,927 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:20,928 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:20,929 - INFO - integration_test - Step 20 completed in 1.520s
2026-01-26 16:18:21,028 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-26 16:18:21,029 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.96018075 3.2931891  0.74350237 3.00000003 5.38000004]
2026-01-26 16:18:21,030 - DEBUG - integration_test - Step 21: Using propagated spline 5.3800 (close to path, dist=0.293m, drift=0.218m)
2026-01-26 16:18:21,030 - DEBUG - integration_test -   Set spline state to 5.3800
2026-01-26 16:18:21,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:21,048 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.960, 3.293), path_start=(0.000, 0.000), dist=5.151m
2026-01-26 16:18:21,049 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-26 16:18:21,051 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:21,077 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:21,077 - INFO - integration_test - Warmstart k=0: x0=3.9601807486428386 , y0=3.2931891011529504 , psi0=0.7435023702424164 , v0=3.000000029999882 , spline0=5.380000040211929 , a0=0.0 , w0=0.0
2026-01-26 16:18:21,077 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:21,078 - INFO - integration_test - Dyn residual k=0: pred=[4.181011479370427, 3.4962501514957287, 0.7435023702424164, 3.000000029999882, 5.680000043211917], ws=[4.181011477162128, 3.4962501494651264, 0.7435023702424166, 3.0, 5.023434383646272], res=[2.2082984330040745e-09, 2.03060235293151e-09, -2.220446049250313e-16, 2.999988213403526e-08, 0.6565656595656453], res_norm=6.566e-01
2026-01-26 16:18:21,079 - INFO - integration_test - Dyn residual k=1: pred=[4.401842205681418, 3.6993111977773023, 0.7435023702424166, 3.0, 5.323434383646272], ws=[4.401842205681418, 3.6993111977773023, 0.7435023702424166, 3.0, 5.626464686676575], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:21,080 - INFO - integration_test - Dyn residual k=2: pred=[4.622672934200708, 3.9023722460894783, 0.7435023702424166, 3.0, 5.9264646866765744], ws=[4.622672934200708, 3.9023722460894783, 0.7435023702424166, 3.0, 5.724444484656373], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 16:18:21,094 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,142 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,161 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,201 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,219 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,257 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,274 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,311 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,329 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,367 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,385 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,421 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,439 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,476 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,493 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,530 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,547 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,586 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,603 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,644 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:21,663 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:21,701 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:22,459 - INFO - integration_test - Step 21: MPC solve successful
2026-01-26 16:18:22,466 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.380)
2026-01-26 16:18:22,467 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:22,467 - INFO - integration_test - === Applying control at step 21 ===
2026-01-26 16:18:22,467 - INFO - integration_test -   Control dict from planner: {'a': -3.345414660107906e-12, 'w': 0.01598260255519661}
2026-01-26 16:18:22,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:22,467 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:22,468 - INFO - integration_test - Step 21 completed in 1.439s
2026-01-26 16:18:22,535 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-26 16:18:22,542 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.18084911 3.49642654 0.74510063 3.00000003 5.68000004]
2026-01-26 16:18:22,543 - DEBUG - integration_test - Step 22: Using propagated spline 5.6800 (close to path, dist=0.292m, drift=0.149m)
2026-01-26 16:18:22,543 - DEBUG - integration_test -   Set spline state to 5.6800
2026-01-26 16:18:22,545 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:22,559 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.181, 3.496), path_start=(0.000, 0.000), dist=5.450m
2026-01-26 16:18:22,559 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-26 16:18:22,561 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:22,585 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:22,585 - INFO - integration_test - Warmstart k=0: x0=4.180849113185544 , y0=3.4964265374971517 , psi0=0.7451006304979361 , v0=3.0000000299995477 , spline0=5.680000043211884 , a0=0.0 , w0=0.0
2026-01-26 16:18:22,585 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:22,586 - INFO - integration_test - Dyn residual k=0: pred=[4.401355017596165, 3.6998402733166063, 0.7451006304979361, 3.0000000299995477, 5.980000046211838], ws=[4.401355015391139, 3.6998402712824996, 0.745100630497936, 3.0, 5.62646468967653], res=[2.205026383705899e-09, 2.0341066608864367e-09, 1.1102230246251565e-16, 2.9999547734860244e-08, 0.35353535653530876], res_norm=3.535e-01
2026-01-26 16:18:22,586 - INFO - integration_test - Dyn residual k=1: pred=[4.621860917596734, 3.9032540050678475, 0.745100630497936, 3.0, 5.926464689676529], ws=[4.6218609175967345, 3.9032540050678475, 0.745100630497936, 3.0, 5.724444487656328], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 16:18:22,587 - INFO - integration_test - Dyn residual k=2: pred=[4.842366819802329, 4.106667738853195, 0.745100630497936, 3.0, 6.024444487656328], ws=[4.842366819802329, 4.106667738853195, 0.745100630497936, 3.0, 5.822424285636125], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:22,601 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:22,648 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:22,667 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:22,705 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:22,722 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:22,760 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:22,778 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:22,816 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:22,833 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:22,873 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:22,895 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:22,943 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:22,964 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:23,004 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:23,022 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:23,062 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:23,082 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:23,123 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:23,144 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:23,203 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:23,227 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:23,268 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,158 - INFO - integration_test - Step 22: MPC solve successful
2026-01-26 16:18:25,165 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.680)
2026-01-26 16:18:25,165 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:25,165 - INFO - integration_test - === Applying control at step 22 ===
2026-01-26 16:18:25,165 - INFO - integration_test -   Control dict from planner: {'a': -5.133859304760123e-06, 'w': -0.10536279810873016}
2026-01-26 16:18:25,165 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:25,165 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:25,167 - INFO - integration_test - Step 22 completed in 2.624s
2026-01-26 16:18:25,247 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-26 16:18:25,247 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.40242252 3.69867485 0.73456435 2.99999952 5.97999999]
2026-01-26 16:18:25,248 - DEBUG - integration_test - Step 23: Using propagated spline 5.9800 (close to path, dist=0.307m, drift=0.080m)
2026-01-26 16:18:25,248 - DEBUG - integration_test -   Set spline state to 5.9800
2026-01-26 16:18:25,250 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:25,264 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.402, 3.699), path_start=(0.000, 0.000), dist=5.750m
2026-01-26 16:18:25,264 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-26 16:18:25,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:25,291 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:25,291 - INFO - integration_test - Warmstart k=0: x0=4.402422520891962 , y0=3.6986748472571986 , psi0=0.734564350687063 , v0=2.999999516613617 , spline0=5.979999994873245 , a0=0.0 , w0=0.0
2026-01-26 16:18:25,291 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:25,292 - INFO - integration_test - Dyn residual k=0: pred=[4.625059332167923, 3.8997539890439383, 0.734564350687063, 2.999999516613617, 6.279999946534607], ws=[4.625059332167923, 3.8997539890439383, 0.7345643506870632, 2.999999516613617, 5.724444390979052], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-26 16:18:25,293 - INFO - integration_test - Dyn residual k=1: pred=[4.847696143443883, 4.1008331308306785, 0.7345643506870632, 2.999999516613617, 6.024444342640414], ws=[4.847696143443883, 4.1008331308306785, 0.7345643506870632, 2.999999516613617, 5.822424140620211], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:25,294 - INFO - integration_test - Dyn residual k=2: pred=[5.070332954719844, 4.301912272617418, 0.7345643506870632, 2.999999516613617, 6.122424092281573], ws=[5.070332954719844, 4.301912272617418, 0.7345643506870632, 2.999999516613617, 6.425454395311876], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:25,309 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,360 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,381 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,420 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,439 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,478 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,495 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,533 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,551 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,590 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,608 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,647 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,665 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,702 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,719 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,759 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,778 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,816 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,833 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,873 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:25,890 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:25,930 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:26,679 - INFO - integration_test - Step 23: MPC solve successful
2026-01-26 16:18:26,685 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=5.980)
2026-01-26 16:18:26,685 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:26,686 - INFO - integration_test - === Applying control at step 23 ===
2026-01-26 16:18:26,686 - INFO - integration_test -   Control dict from planner: {'a': 5.13386070935164e-06, 'w': -0.06838418077283144}
2026-01-26 16:18:26,686 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:26,686 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:26,687 - INFO - integration_test - Step 23 completed in 1.440s
2026-01-26 16:18:26,750 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-26 16:18:26,757 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.62574515 3.8989912  0.72772593 3.00000003 6.28      ]
2026-01-26 16:18:26,758 - DEBUG - integration_test - Step 24: Using propagated spline 6.2800 (close to path, dist=0.301m, drift=0.380m)
2026-01-26 16:18:26,758 - DEBUG - integration_test -   Set spline state to 6.2800
2026-01-26 16:18:26,759 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:26,773 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.626, 3.899), path_start=(0.000, 0.000), dist=6.050m
2026-01-26 16:18:26,773 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-26 16:18:26,776 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:26,800 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:26,800 - INFO - integration_test - Warmstart k=0: x0=4.6257451450100255 , y0=3.8989912001254674 , psi0=0.7277259326097799 , v0=3.000000029999688 , spline0=6.279999997873214 , a0=0.0 , w0=0.0
2026-01-26 16:18:26,800 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:26,801 - INFO - integration_test - Dyn residual k=0: pred=[4.849751841471526, 4.098543202722251, 0.7277259326097799, 3.000000029999688, 6.580000000873183], ws=[4.849751839231482, 4.098543200726752, 0.72772593260978, 3.0, 5.822424240297456], res=[2.2400437060809963e-09, 1.9954988772497018e-09, -1.1102230246251565e-16, 2.9999688067050556e-08, 0.757575760575727], res_norm=7.576e-01
2026-01-26 16:18:26,802 - INFO - integration_test - Dyn residual k=1: pred=[5.0737585334529385, 4.298095201328036, 0.72772593260978, 3.0, 6.122424240297456], ws=[5.0737585334529385, 4.298095201328036, 0.72772593260978, 3.0, 6.425454543327759], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:26,802 - INFO - integration_test - Dyn residual k=2: pred=[5.297765227674395, 4.49764720192932, 0.72772593260978, 3.0, 6.725454543327759], ws=[5.297765227674395, 4.49764720192932, 0.72772593260978, 3.0, 6.523434341307557], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 16:18:26,816 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:26,865 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:26,884 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:26,923 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:26,941 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:26,980 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:26,998 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:27,036 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:27,056 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:27,097 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:27,115 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:27,154 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:27,173 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:27,211 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:27,228 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:27,266 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:27,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:27,321 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:27,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:27,380 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:27,397 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:27,435 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,276 - INFO - integration_test - Step 24: MPC solve successful
2026-01-26 16:18:28,283 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.280)
2026-01-26 16:18:28,283 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:28,283 - INFO - integration_test - === Applying control at step 24 ===
2026-01-26 16:18:28,284 - INFO - integration_test -   Control dict from planner: {'a': -1.5995044193298496e-10, 'w': -0.07279341186801166}
2026-01-26 16:18:28,284 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:28,284 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:28,285 - INFO - integration_test - Step 24 completed in 1.528s
2026-01-26 16:18:28,347 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-26 16:18:28,354 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.85047616 4.09772613 0.72044659 3.00000003 6.58      ]
2026-01-26 16:18:28,354 - DEBUG - integration_test - Step 25: Using propagated spline 6.5800 (close to path, dist=0.263m, drift=0.312m)
2026-01-26 16:18:28,354 - DEBUG - integration_test -   Set spline state to 6.5800
2026-01-26 16:18:28,355 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:28,369 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.850, 4.098), path_start=(0.000, 0.000), dist=6.350m
2026-01-26 16:18:28,369 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-26 16:18:28,372 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:28,397 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:28,397 - INFO - integration_test - Warmstart k=0: x0=4.850476163516959 , y0=4.097726133403808 , psi0=0.7204465914229787 , v0=3.000000029983693 , spline0=6.580000000871584 , a0=0.0 , w0=0.0
2026-01-26 16:18:28,397 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:28,398 - INFO - integration_test - Dyn residual k=0: pred=[5.075929519362329, 4.295642242240564, 0.7204465914229787, 3.000000029983693, 6.880000003869953], ws=[5.07592951710902, 4.295642240262478, 0.720446591422979, 3.0, 6.425454546326129], res=[2.2533086507792177e-09, 1.978085251153061e-09, -2.220446049250313e-16, 2.9983692861890177e-08, 0.4545454575438246], res_norm=4.545e-01
2026-01-26 16:18:28,400 - INFO - integration_test - Dyn residual k=1: pred=[5.301382870701081, 4.493558347121149, 0.720446591422979, 3.0, 6.725454546326128], ws=[5.301382870701081, 4.493558347121149, 0.720446591422979, 3.0, 6.523434344305927], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 16:18:28,400 - INFO - integration_test - Dyn residual k=2: pred=[5.526836224293143, 4.691474453979819, 0.720446591422979, 3.0, 6.823434344305927], ws=[5.526836224293143, 4.691474453979819, 0.720446591422979, 3.0, 6.621414142285724], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:28,415 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,462 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,480 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,519 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,537 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,577 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,596 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,634 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,652 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,692 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,710 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,748 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,767 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,807 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,825 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,862 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,880 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,926 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:28,945 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:28,987 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:29,008 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:29,051 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,128 - INFO - integration_test - Step 25: MPC solve successful
2026-01-26 16:18:30,135 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.580)
2026-01-26 16:18:30,135 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:30,135 - INFO - integration_test - === Applying control at step 25 ===
2026-01-26 16:18:30,135 - INFO - integration_test -   Control dict from planner: {'a': -4.6608558013118705e-07, 'w': -0.09105403625733485}
2026-01-26 16:18:30,135 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:30,135 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:30,136 - INFO - integration_test - Step 25 completed in 1.783s
2026-01-26 16:18:30,199 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-26 16:18:30,205 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.07682745 4.29461309 0.71134119 2.99999998 6.88      ]
2026-01-26 16:18:30,206 - DEBUG - integration_test - Step 26: Using propagated spline 6.8800 (close to path, dist=0.240m, drift=0.243m)
2026-01-26 16:18:30,206 - DEBUG - integration_test -   Set spline state to 6.8800
2026-01-26 16:18:30,207 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:30,220 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.077, 4.295), path_start=(0.000, 0.000), dist=6.650m
2026-01-26 16:18:30,220 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-26 16:18:30,222 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:30,244 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:30,244 - INFO - integration_test - Warmstart k=0: x0=5.076827449088685 , y0=4.294613091098122 , psi0=0.7113411877972452 , v0=2.999999983375135 , spline0=6.879999999209097 , a0=0.0 , w0=0.0
2026-01-26 16:18:30,244 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:30,245 - INFO - integration_test - Dyn residual k=0: pred=[5.3040735366358644, 4.490468177059676, 0.7113411877972452, 2.999999983375135, 7.179999997546611], ws=[5.3040735366358644, 4.490468177059676, 0.7113411877972453, 2.999999983375135, 6.5234343409809545], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.6565656565656566], res_norm=6.566e-01
2026-01-26 16:18:30,245 - INFO - integration_test - Dyn residual k=1: pred=[5.531319624183044, 4.68632326302123, 0.7113411877972453, 2.999999983375135, 6.823434339318468], ws=[5.531319624183044, 4.68632326302123, 0.7113411877972453, 2.999999983375135, 6.621414137298266], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:30,246 - INFO - integration_test - Dyn residual k=2: pred=[5.758565711730223, 4.882178348982785, 0.7113411877972453, 2.999999983375135, 6.9214141356357795], ws=[5.758565711730223, 4.882178348982785, 0.7113411877972453, 2.999999983375135, 7.224444438666083], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030365], res_norm=3.030e-01
2026-01-26 16:18:30,259 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,305 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,323 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,361 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,379 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,420 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,437 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,476 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,494 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,532 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,550 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,590 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,609 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,647 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,666 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,705 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,724 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,761 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,780 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,817 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:30,834 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:30,871 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:31,615 - INFO - integration_test - Step 26: MPC solve successful
2026-01-26 16:18:31,622 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.880)
2026-01-26 16:18:31,622 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:31,622 - INFO - integration_test - === Applying control at step 26 ===
2026-01-26 16:18:31,622 - INFO - integration_test -   Control dict from planner: {'a': 4.6624402562251396e-07, 'w': -0.033327204837642704}
2026-01-26 16:18:31,622 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:31,622 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:31,623 - INFO - integration_test - Step 26 completed in 1.418s
2026-01-26 16:18:31,687 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-26 16:18:31,693 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.30439948 4.49008914 0.70800847 3.00000003 7.18      ]
2026-01-26 16:18:31,693 - DEBUG - integration_test - Step 27: Using propagated spline 7.1800 (close to path, dist=0.235m, drift=0.174m)
2026-01-26 16:18:31,694 - DEBUG - integration_test -   Set spline state to 7.1800
2026-01-26 16:18:31,695 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:31,708 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.304, 4.490), path_start=(0.000, 0.000), dist=6.950m
2026-01-26 16:18:31,708 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-26 16:18:31,710 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:31,732 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:31,732 - INFO - integration_test - Warmstart k=0: x0=5.3043994825603304 , y0=4.49008914252173 , psi0=0.7080084673134809 , v0=3.0000000299995375 , spline0=7.180000002209051 , a0=0.0 , w0=0.0
2026-01-26 16:18:31,732 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:31,733 - INFO - integration_test - Dyn residual k=0: pred=[5.532297040684978, 4.685185797543786, 0.7080084673134809, 3.0000000299995375, 7.480000005209005], ws=[5.532297038406037, 4.685185795592849, 0.7080084673134808, 3.0, 6.621414143623192], res=[2.2789405917933436e-09, 1.950937189576507e-09, 1.1102230246251565e-16, 2.999953752080842e-08, 0.8585858615858131], res_norm=8.586e-01
2026-01-26 16:18:31,733 - INFO - integration_test - Dyn residual k=1: pred=[5.760194594251744, 4.880282448663968, 0.7080084673134808, 3.0, 6.921414143623192], ws=[5.760194594251744, 4.880282448663968, 0.7080084673134808, 3.0, 7.224444446653496], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030365], res_norm=3.030e-01
2026-01-26 16:18:31,734 - INFO - integration_test - Dyn residual k=2: pred=[5.988092150097451, 5.075379101735088, 0.7080084673134808, 3.0, 7.524444446653495], ws=[5.988092150097451, 5.075379101735088, 0.7080084673134808, 3.0, 7.322424244633293], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:31,747 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:31,795 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:31,813 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:31,851 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:31,868 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:31,905 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:31,922 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:31,961 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:31,979 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:32,017 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:32,034 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:32,072 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:32,089 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:32,126 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:32,143 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:32,181 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:32,199 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:32,236 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:32,253 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:32,291 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:32,308 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:32,346 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:32,929 - INFO - integration_test - Step 27: MPC solve successful
2026-01-26 16:18:32,936 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.180)
2026-01-26 16:18:32,936 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:32,936 - INFO - integration_test - === Applying control at step 27 ===
2026-01-26 16:18:32,936 - INFO - integration_test -   Control dict from planner: {'a': 2.5041728967069916e-10, 'w': 0.08104754553390157}
2026-01-26 16:18:32,936 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:32,936 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:32,937 - INFO - integration_test - Step 27 completed in 1.245s
2026-01-26 16:18:33,001 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-26 16:18:33,007 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.53150394 4.68610718 0.71611322 3.00000003 7.48000001]
2026-01-26 16:18:33,008 - DEBUG - integration_test - Step 28: Using propagated spline 7.4800 (close to path, dist=0.247m, drift=0.106m)
2026-01-26 16:18:33,008 - DEBUG - integration_test -   Set spline state to 7.4800
2026-01-26 16:18:33,009 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:33,021 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.532, 4.686), path_start=(0.000, 0.000), dist=7.250m
2026-01-26 16:18:33,021 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-26 16:18:33,024 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:33,046 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:33,046 - INFO - integration_test - Warmstart k=0: x0=5.531503944784345 , y0=4.6861071834954 , psi0=0.716113221866871 , v0=3.0000000300245793 , spline0=7.480000005211509 , a0=0.0 , w0=0.0
2026-01-26 16:18:33,046 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:33,047 - INFO - integration_test - Dyn residual k=0: pred=[5.757812824800762, 4.883044464443395, 0.716113221866871, 3.0000000300245793, 7.780000008213967], ws=[5.757812822535819, 4.883044462472409, 0.7161132218668711, 3.0, 7.2244444496559534], res=[2.2649428998988697e-09, 1.970986041044398e-09, -1.1102230246251565e-16, 3.002457926726265e-08, 0.5555555585580132], res_norm=5.556e-01
2026-01-26 16:18:33,047 - INFO - integration_test - Dyn residual k=1: pred=[5.984121700287294, 5.0799817414494175, 0.7161132218668711, 3.0, 7.524444449655953], ws=[5.984121700287294, 5.0799817414494175, 0.7161132218668711, 3.0, 7.322424247635752], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.020e-01
2026-01-26 16:18:33,048 - INFO - integration_test - Dyn residual k=2: pred=[6.2104305780387685, 5.276919020426426, 0.7161132218668711, 3.0, 7.6224242476357515], ws=[6.2104305780387685, 5.276919020426426, 0.7161132218668711, 3.0, 8.127474752686258], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505061], res_norm=5.051e-01
2026-01-26 16:18:33,062 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,131 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,159 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,203 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,222 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,261 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,280 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,319 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,339 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,379 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,398 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,439 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,459 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,500 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,519 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,560 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,581 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,623 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,643 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,685 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:33,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:33,747 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:34,610 - INFO - integration_test - Step 28: MPC solve successful
2026-01-26 16:18:34,618 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.480)
2026-01-26 16:18:34,618 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:34,618 - INFO - integration_test - === Applying control at step 28 ===
2026-01-26 16:18:34,618 - INFO - integration_test -   Control dict from planner: {'a': -9.740713655037961e-08, 'w': 0.0382577962540385}
2026-01-26 16:18:34,618 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:34,618 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:34,620 - INFO - integration_test - Step 28 completed in 1.613s
2026-01-26 16:18:34,688 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-26 16:18:34,694 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.75743555 4.88347689 0.719939   3.00000002 7.78000001]
2026-01-26 16:18:34,694 - DEBUG - integration_test - Step 29: Using propagated spline 7.7800 (close to path, dist=0.273m, drift=0.037m)
2026-01-26 16:18:34,694 - DEBUG - integration_test -   Set spline state to 7.7800
2026-01-26 16:18:34,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:34,709 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.757, 4.883), path_start=(0.000, 0.000), dist=7.550m
2026-01-26 16:18:34,709 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-26 16:18:34,712 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:34,737 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:34,737 - INFO - integration_test - Warmstart k=0: x0=5.757435553510583 , y0=4.883476887131164 , psi0=0.7199390014922749 , v0=3.0000000202838657 , spline0=7.780000007239895 , a0=0.0 , w0=0.0
2026-01-26 16:18:34,737 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:34,738 - INFO - integration_test - Dyn residual k=0: pred=[5.982989339802581, 5.081278531983718, 0.7199390014922749, 3.0000000202838657, 8.080000009268282], ws=[5.982989338277546, 5.0812785306463235, 0.7199390014922749, 3.0, 7.322424249664138], res=[1.5250343210482242e-09, 1.337394195388697e-09, 0.0, 2.028386569818963e-08, 0.7575757596041441], res_norm=7.576e-01
2026-01-26 16:18:34,739 - INFO - integration_test - Dyn residual k=1: pred=[6.208543123044509, 5.279080174161483, 0.7199390014922749, 3.0, 7.622424249664138], ws=[6.208543123044509, 5.279080174161483, 0.7199390014922749, 3.0, 8.127474754714644], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505061], res_norm=5.051e-01
2026-01-26 16:18:34,740 - INFO - integration_test - Dyn residual k=2: pred=[6.4340969078114725, 5.4768818176766425, 0.7199390014922749, 3.0, 8.427474754714645], ws=[6.4340969078114725, 5.4768818176766425, 0.7199390014922749, 3.0, 8.02343435067424], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 16:18:34,755 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:34,807 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:34,828 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:34,869 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:34,890 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:34,931 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:34,952 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:34,997 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:35,016 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:35,059 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:35,079 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:35,120 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:35,140 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:35,182 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:35,202 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:35,244 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:35,264 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:35,306 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:35,325 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:35,368 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:35,388 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:35,430 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,072 - INFO - integration_test - Step 29: MPC solve successful
2026-01-26 16:18:36,079 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.780)
2026-01-26 16:18:36,079 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:36,079 - INFO - integration_test - === Applying control at step 29 ===
2026-01-26 16:18:36,079 - INFO - integration_test -   Control dict from planner: {'a': 8.98267621198817e-08, 'w': 0.26897848465462837}
2026-01-26 16:18:36,079 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:36,079 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:36,080 - INFO - integration_test - Step 29 completed in 1.387s
2026-01-26 16:18:36,143 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-26 16:18:36,151 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.98030208 5.08428795 0.74683685 3.00000003 8.08000001]
2026-01-26 16:18:36,151 - DEBUG - integration_test - Step 30: Using propagated spline 8.0800 (close to path, dist=0.219m, drift=0.337m)
2026-01-26 16:18:36,151 - DEBUG - integration_test -   Set spline state to 8.0800
2026-01-26 16:18:36,153 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:36,166 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.980, 5.084), path_start=(0.000, 0.000), dist=7.849m
2026-01-26 16:18:36,166 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-26 16:18:36,169 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:36,192 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:36,192 - INFO - integration_test - Warmstart k=0: x0=5.980302084397117 , y0=5.084287954688973 , psi0=0.7468368499577377 , v0=3.000000029266542 , spline0=8.080000010166549 , a0=0.0 , w0=0.0
2026-01-26 16:18:36,192 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:36,193 - INFO - integration_test - Dyn residual k=0: pred=[6.200454485692051, 5.28808423031752, 0.7468368499577377, 3.000000029266542, 8.380000013093202], ws=[6.200454483544351, 5.2880842283293825, 0.7468368499577376, 3.0, 8.127474757641297], res=[2.1476997957847743e-09, 1.988137654507227e-09, 1.1102230246251565e-16, 2.9266542078687507e-08, 0.2525252554519053], res_norm=2.525e-01
2026-01-26 16:18:36,194 - INFO - integration_test - Dyn residual k=1: pred=[6.420606882691585, 5.491880501969792, 0.7468368499577376, 3.0, 8.427474757641297], ws=[6.420606882691585, 5.491880501969792, 0.7468368499577376, 3.0, 8.023434353600894], res=[0.0, 0.0, 0.0, 0.0, 0.4040404040404031], res_norm=4.040e-01
2026-01-26 16:18:36,194 - INFO - integration_test - Dyn residual k=2: pred=[6.640759281838819, 5.695676775610202, 0.7468368499577376, 3.0, 8.323434353600895], ws=[6.640759281838819, 5.695676775610202, 0.7468368499577376, 3.0, 8.323434353600895], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-26 16:18:36,209 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,259 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,278 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,318 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,379 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,398 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,437 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,456 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,496 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,515 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,554 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,573 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,613 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,631 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,668 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,687 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,726 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,743 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,782 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:36,800 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:36,838 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:37,469 - INFO - integration_test - Step 30: MPC solve successful
2026-01-26 16:18:37,476 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.080)
2026-01-26 16:18:37,476 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:37,476 - INFO - integration_test - === Applying control at step 30 ===
2026-01-26 16:18:37,476 - INFO - integration_test -   Control dict from planner: {'a': 6.584368034416725e-09, 'w': -0.019139466271594525}
2026-01-26 16:18:37,476 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:37,476 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:37,478 - INFO - integration_test - Step 30 completed in 1.327s
2026-01-26 16:18:37,535 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-26 16:18:37,542 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[6.20064938 5.28787343 0.7449229  3.00000003 8.38000001]
2026-01-26 16:18:37,542 - DEBUG - integration_test - Step 31: Using propagated spline 8.3800 (close to path, dist=0.167m, drift=0.268m)
2026-01-26 16:18:37,542 - DEBUG - integration_test -   Set spline state to 8.3800
2026-01-26 16:18:37,544 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:37,556 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(6.201, 5.288), path_start=(0.000, 0.000), dist=8.149m
2026-01-26 16:18:37,556 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-26 16:18:37,559 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:37,581 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:37,581 - INFO - integration_test - Warmstart k=0: x0=6.200649378843838 , y0=5.287873426007094 , psi0=0.7449229033305782 , v0=3.000000029924979 , spline0=8.380000013159046 , a0=0.0 , w0=0.0
2026-01-26 16:18:37,581 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:37,582 - INFO - integration_test - Dyn residual k=0: pred=[6.421191431913302, 5.491247968719314, 0.7449229033305782, 3.000000029924979, 8.680000016151544], ws=[6.421191429713397, 5.491247966690654, 0.7449229033305782, 3.0, 8.023434356593391], res=[2.1999051469379083e-09, 2.0286599067276256e-09, 0.0, 2.992497893927748e-08, 0.6565656595581526], res_norm=6.566e-01
2026-01-26 16:18:37,583 - INFO - integration_test - Dyn residual k=1: pred=[6.641733480582955, 5.6946225073742145, 0.7449229033305782, 3.0, 8.323434356593392], ws=[6.641733480582955, 5.6946225073742145, 0.7449229033305782, 3.0, 8.323434356593392], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-26 16:18:37,583 - INFO - integration_test - Dyn residual k=2: pred=[6.8622755314525135, 5.897997048057775, 0.7449229033305782, 3.0, 8.623434356593393], ws=[6.8622755314525135, 5.897997048057775, 0.7449229033305782, 3.0, 8.926464659623694], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-26 16:18:37,597 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:37,643 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:37,661 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:37,700 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:37,718 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:37,756 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:37,774 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:37,813 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:37,830 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:37,868 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:37,885 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:37,922 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:37,940 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:37,977 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:37,995 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:38,033 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:38,050 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:38,088 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:38,106 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:38,144 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:38,161 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:38,200 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:38,808 - INFO - integration_test - Step 31: MPC solve successful
2026-01-26 16:18:38,815 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.380)
2026-01-26 16:18:38,815 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:38,815 - INFO - integration_test - === Applying control at step 31 ===
2026-01-26 16:18:38,815 - INFO - integration_test -   Control dict from planner: {'a': -2.512573624153317e-09, 'w': 0.682915924076199}
2026-01-26 16:18:38,815 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:38,815 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:38,816 - INFO - integration_test - Step 31 completed in 1.275s
2026-01-26 16:18:38,876 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-26 16:18:38,877 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[6.41407836 5.49861758 0.8132145  3.00000003 8.68000002]
2026-01-26 16:18:38,877 - DEBUG - integration_test - Step 32: Using propagated spline 8.6800 (close to path, dist=0.123m, drift=0.199m)
2026-01-26 16:18:38,877 - DEBUG - integration_test -   Set spline state to 8.6800
2026-01-26 16:18:38,878 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:38,891 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(6.414, 5.499), path_start=(0.000, 0.000), dist=8.448m
2026-01-26 16:18:38,891 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-26 16:18:38,894 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:38,916 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:38,916 - INFO - integration_test - Warmstart k=0: x0=6.414078361088927 , y0=5.498617583836854 , psi0=0.8132144957381982 , v0=3.0000000296737217 , spline0=8.680000016126419 , a0=0.0 , w0=0.0
2026-01-26 16:18:38,916 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:38,917 - INFO - integration_test - Dyn residual k=0: pred=[6.620228360120426, 5.7165675314847855, 0.8132144957381982, 3.0000000296737217, 8.980000019093792], ws=[6.620228358081347, 5.716567529328991, 0.8132144957381984, 3.0, 8.323434359560764], res=[2.039079127769128e-09, 2.1557946539019213e-09, -2.220446049250313e-16, 2.9673721702039302e-08, 0.6565656595330278], res_norm=6.566e-01
2026-01-26 16:18:38,917 - INFO - integration_test - Dyn residual k=1: pred=[6.826378355073767, 5.934517474821128, 0.8132144957381984, 3.0, 8.623434359560765], ws=[6.826378355073767, 5.934517474821128, 0.8132144957381984, 3.0, 8.926464662591066], res=[0.0, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.030e-01
2026-01-26 16:18:38,918 - INFO - integration_test - Dyn residual k=2: pred=[7.032528352066187, 6.152467420313265, 0.8132144957381984, 3.0, 9.226464662591066], ws=[7.032528352066187, 6.152467420313265, 0.8132144957381984, 3.0, 9.024444460570866], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 16:18:38,932 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:38,979 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:38,997 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,036 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,054 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,092 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,109 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,148 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,165 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,204 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,222 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,260 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,278 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,315 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,333 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,370 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,389 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,427 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,445 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,482 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:39,500 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:39,539 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,213 - INFO - integration_test - Step 32: MPC solve successful
2026-01-26 16:18:40,220 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.680)
2026-01-26 16:18:40,220 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:40,220 - INFO - integration_test - === Applying control at step 32 ===
2026-01-26 16:18:40,220 - INFO - integration_test -   Control dict from planner: {'a': -5.912340410723669e-08, 'w': 0.6204744804394564}
2026-01-26 16:18:40,220 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:40,220 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:40,221 - INFO - integration_test - Step 32 completed in 1.345s
2026-01-26 16:18:40,290 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-26 16:18:40,298 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[6.61333666 5.7228212  0.87526194 3.00000002 8.98000002]
2026-01-26 16:18:40,299 - DEBUG - integration_test - Step 33: Using propagated spline 8.9800 (close to path, dist=0.112m, drift=0.131m)
2026-01-26 16:18:40,299 - DEBUG - integration_test -   Set spline state to 8.9800
2026-01-26 16:18:40,301 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:40,314 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(6.613, 5.723), path_start=(0.000, 0.000), dist=8.746m
2026-01-26 16:18:40,314 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-26 16:18:40,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:40,338 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:40,339 - INFO - integration_test - Warmstart k=0: x0=6.613336660736257 , y0=5.722821201363286 , psi0=0.8752619437821438 , v0=3.0000000237613813 , spline0=8.980000018502556 , a0=0.0 , w0=0.0
2026-01-26 16:18:40,339 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:40,339 - INFO - integration_test - Dyn residual k=0: pred=[6.805575397136927, 5.95313461750042, 0.8752619437821438, 3.0000000237613813, 9.280000020878694], ws=[6.805575395614308, 5.953134615676231, 0.8752619437821441, 3.0, 8.926464664967202], res=[1.5226193639250596e-09, 1.824188800014781e-09, -2.220446049250313e-16, 2.376138130699701e-08, 0.3535353559114913], res_norm=3.535e-01
2026-01-26 16:18:40,340 - INFO - integration_test - Dyn residual k=1: pred=[6.997814130492358, 6.183448029989177, 0.8752619437821441, 3.0, 9.226464664967203], ws=[6.997814130492358, 6.183448029989177, 0.8752619437821441, 3.0, 9.024444462947002], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 16:18:40,341 - INFO - integration_test - Dyn residual k=2: pred=[7.190052865370409, 6.413761444302122, 0.8752619437821441, 3.0, 9.324444462947003], ws=[7.190052865370409, 6.413761444302122, 0.8752619437821441, 3.0, 9.1224242609268], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:40,354 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,403 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,422 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,460 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,478 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,515 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,533 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,570 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,589 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,628 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,645 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,682 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,700 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,738 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,755 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,794 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,812 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,850 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,869 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,907 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:40,925 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:40,963 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:41,631 - INFO - integration_test - Step 33: MPC solve successful
2026-01-26 16:18:41,638 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=8.980)
2026-01-26 16:18:41,638 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:41,638 - INFO - integration_test - === Applying control at step 33 ===
2026-01-26 16:18:41,638 - INFO - integration_test -   Control dict from planner: {'a': 6.065941659593059e-08, 'w': 0.19778620012008766}
2026-01-26 16:18:41,638 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:41,638 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:41,640 - INFO - integration_test - Step 33 completed in 1.341s
2026-01-26 16:18:41,709 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-26 16:18:41,716 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[6.8032853  5.95502065 0.89504056 3.00000003 9.28000002]
2026-01-26 16:18:41,716 - DEBUG - integration_test - Step 34: Using propagated spline 9.2800 (close to path, dist=0.200m, drift=0.431m)
2026-01-26 16:18:41,716 - DEBUG - integration_test -   Set spline state to 9.2800
2026-01-26 16:18:41,718 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:41,730 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(6.803, 5.955), path_start=(0.000, 0.000), dist=9.041m
2026-01-26 16:18:41,731 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-26 16:18:41,733 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:41,757 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:41,757 - INFO - integration_test - Warmstart k=0: x0=6.803285297294387 , y0=5.955020648329825 , psi0=0.8950405637941526 , v0=3.000000029827323 , spline0=9.28000002148529 , a0=0.0 , w0=0.0
2026-01-26 16:18:41,757 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:41,758 - INFO - integration_test - Dyn residual k=0: pred=[6.990931449450824, 6.189090986840545, 0.8950405637941526, 3.000000029827323, 9.580000024468022], ws=[6.9909314475851625, 6.189090984513314, 0.8950405637941525, 3.0, 9.024444465929735], res=[1.8656614031442587e-09, 2.3272308524724394e-09, 1.1102230246251565e-16, 2.982732283385303e-08, 0.5555555585382876], res_norm=5.556e-01
2026-01-26 16:18:41,758 - INFO - integration_test - Dyn residual k=1: pred=[7.178577597875938, 6.423161320696803, 0.8950405637941525, 3.0, 9.324444465929735], ws=[7.178577597875938, 6.423161320696803, 0.8950405637941525, 3.0, 9.122424263909533], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:41,759 - INFO - integration_test - Dyn residual k=2: pred=[7.366223748166713, 6.657231656880292, 0.8950405637941525, 3.0, 9.422424263909534], ws=[7.366223748166713, 6.657231656880292, 0.8950405637941525, 3.0, 9.725454566939836], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:41,773 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:41,821 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:41,840 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:41,877 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:41,895 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:41,934 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:41,952 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:41,991 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:42,009 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:42,048 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:42,066 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:42,104 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:42,122 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:42,160 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:42,179 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:42,217 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:42,234 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:42,273 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:42,291 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:42,329 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:42,347 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:42,385 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,024 - INFO - integration_test - Step 34: MPC solve successful
2026-01-26 16:18:43,031 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.280)
2026-01-26 16:18:43,031 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:43,031 - INFO - integration_test - === Applying control at step 34 ===
2026-01-26 16:18:43,031 - INFO - integration_test -   Control dict from planner: {'a': -1.7114928625204013e-08, 'w': 0.6364771658539342}
2026-01-26 16:18:43,031 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:43,031 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:43,032 - INFO - integration_test - Step 34 completed in 1.317s
2026-01-26 16:18:43,099 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-26 16:18:43,100 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[6.98335828 6.19490259 0.95868828 3.00000003 9.58000002]
2026-01-26 16:18:43,100 - DEBUG - integration_test - Step 35: Using propagated spline 9.5800 (close to path, dist=0.496m, drift=0.731m)
2026-01-26 16:18:43,100 - DEBUG - integration_test -   Set spline state to 9.5800
2026-01-26 16:18:43,102 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:43,115 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(6.983, 6.195), path_start=(0.000, 0.000), dist=9.335m
2026-01-26 16:18:43,115 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-26 16:18:43,118 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:43,141 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:43,141 - INFO - integration_test - Warmstart k=0: x0=6.983358275725821 , y0=6.194902591305355 , psi0=0.958688280379546 , v0=3.00000002811583 , spline0=9.580000024296872 , a0=0.0 , w0=0.0
2026-01-26 16:18:43,141 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:43,142 - INFO - integration_test - Dyn residual k=0: pred=[7.155736489946077, 6.4404341635097975, 0.958688280379546, 3.00000002811583, 9.880000027108455], ws=[7.155736488330557, 6.44043416120869, 0.9586882803795458, 3.0, 9.122424266721115], res=[1.6155192739120139e-09, 2.3011077487922194e-09, 2.220446049250313e-16, 2.811583010853269e-08, 0.7575757603873399], res_norm=7.576e-01
2026-01-26 16:18:43,142 - INFO - integration_test - Dyn residual k=1: pred=[7.328114700935294, 6.685965731112025, 0.9586882803795458, 3.0, 9.422424266721116], ws=[7.328114700935294, 6.685965731112025, 0.9586882803795458, 3.0, 9.725454569751419], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:43,143 - INFO - integration_test - Dyn residual k=2: pred=[7.500492913540031, 6.9314973010153595, 0.9586882803795458, 3.0, 10.02545456975142], ws=[7.500492913540031, 6.9314973010153595, 0.9586882803795458, 3.0, 9.823434367731217], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:43,156 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,206 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,226 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,263 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,283 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,320 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,338 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,375 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,393 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,430 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,447 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,485 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,502 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,539 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,557 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,599 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,616 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,655 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,672 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,712 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:43,729 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:43,768 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:44,400 - INFO - integration_test - Step 35: MPC solve successful
2026-01-26 16:18:44,407 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.580)
2026-01-26 16:18:44,407 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:44,407 - INFO - integration_test - === Applying control at step 35 ===
2026-01-26 16:18:44,407 - INFO - integration_test -   Control dict from planner: {'a': 1.6248383419503087e-08, 'w': 0.7999999144276655}
2026-01-26 16:18:44,407 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:44,407 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:44,408 - INFO - integration_test - Step 35 completed in 1.309s
2026-01-26 16:18:44,469 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-26 16:18:44,477 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[7.14573666 6.4470638  1.03868827 3.00000003 9.88000003]
2026-01-26 16:18:44,477 - DEBUG - integration_test - Step 36: Using propagated spline 9.8800 (close to path, dist=0.305m, drift=0.662m)
2026-01-26 16:18:44,477 - DEBUG - integration_test -   Set spline state to 9.8800
2026-01-26 16:18:44,479 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:44,493 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(7.146, 6.447), path_start=(0.000, 0.000), dist=9.624m
2026-01-26 16:18:44,493 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-26 16:18:44,495 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:44,517 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:44,518 - INFO - integration_test - Warmstart k=0: x0=7.145736656122804 , y0=6.4470638018882624 , psi0=1.0386882718223125 , v0=3.0000000297406686 , spline0=9.880000027270938 , a0=0.0 , w0=0.0
2026-01-26 16:18:44,518 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:44,518 - INFO - integration_test - Dyn residual k=0: pred=[7.297941976029134, 6.705585643086742, 1.0386882718223125, 3.0000000297406686, 10.180000030245004], ws=[7.2979419745202385, 6.705585640523871, 1.0386882718223127, 3.0, 9.725454572725484], res=[1.5088952309838533e-09, 2.5628708044678206e-09, -2.220446049250313e-16, 2.974066859451341e-08, 0.45454545751952047], res_norm=4.545e-01
2026-01-26 16:18:44,519 - INFO - integration_test - Dyn residual k=1: pred=[7.450147292917672, 6.96410747915948, 1.0386882718223127, 3.0, 10.025454572725485], ws=[7.450147292917672, 6.96410747915948, 1.0386882718223127, 3.0, 10.025454572725485], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-26 16:18:44,520 - INFO - integration_test - Dyn residual k=2: pred=[7.602352611315105, 7.222629317795089, 1.0386882718223127, 3.0, 10.325454572725485], ws=[7.602352611315105, 7.222629317795089, 1.0386882718223127, 3.0, 10.123434370705283], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:44,535 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:44,585 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:44,604 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:44,642 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:44,660 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:44,700 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:44,720 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:44,760 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:44,778 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:44,817 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:44,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:44,871 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:44,888 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:44,926 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:44,944 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:44,984 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:45,010 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:45,064 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:45,085 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:45,124 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:45,142 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:45,181 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:45,835 - INFO - integration_test - Step 36: MPC solve successful
2026-01-26 16:18:45,841 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.880)
2026-01-26 16:18:45,841 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:45,841 - INFO - integration_test - === Applying control at step 36 ===
2026-01-26 16:18:45,841 - INFO - integration_test -   Control dict from planner: {'a': 2.5005645438808765e-09, 'w': 0.0034043136555897595}
2026-01-26 16:18:45,841 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:45,841 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:45,842 - INFO - integration_test - Step 36 completed in 1.366s
2026-01-26 16:18:45,904 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-26 16:18:45,910 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 7.29789797  6.70561155  1.0390287   3.00000003 10.18000003]
2026-01-26 16:18:45,911 - DEBUG - integration_test - Step 37: Using propagated spline 10.1800 (close to path, dist=0.320m, drift=0.962m)
2026-01-26 16:18:45,911 - DEBUG - integration_test -   Set spline state to 10.1800
2026-01-26 16:18:45,913 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:45,925 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(7.298, 6.706), path_start=(0.000, 0.000), dist=9.911m
2026-01-26 16:18:45,925 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-26 16:18:45,928 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:45,950 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:45,950 - INFO - integration_test - Warmstart k=0: x0=7.297897968624252 , y0=6.705611545836217 , psi0=1.0390287031878715 , v0=3.000000029990725 , spline0=10.18000003027001 , a0=0.0 , w0=0.0
2026-01-26 16:18:45,950 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:45,951 - INFO - integration_test - Dyn residual k=0: pred=[7.45001527078173, 6.964185187539647, 1.0390287031878715, 3.000000029990725, 10.480000033269082], ws=[7.450015269261027, 6.964185184954711, 1.0390287031878715, 3.0, 10.025454575724556], res=[1.5207026748953467e-09, 2.5849367091268505e-09, 0.0, 2.999072501452815e-08, 0.45454545754452624], res_norm=4.545e-01
2026-01-26 16:18:45,951 - INFO - integration_test - Dyn residual k=1: pred=[7.602132569897803, 7.222758824073204, 1.0390287031878715, 3.0, 10.325454575724557], ws=[7.602132569897803, 7.222758824073204, 1.0390287031878715, 3.0, 10.123434373704356], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.020e-01
2026-01-26 16:18:45,952 - INFO - integration_test - Dyn residual k=2: pred=[7.754249870534578, 7.4813324631916975, 1.0390287031878715, 3.0, 10.423434373704357], ws=[7.754249870534578, 7.4813324631916975, 1.0390287031878715, 3.0, 10.221414171684154], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:45,966 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,015 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,033 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,071 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,089 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,127 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,145 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,183 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,201 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,239 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,259 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,296 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,315 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,352 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,370 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,410 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,427 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,465 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,482 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,520 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:46,537 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:46,574 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,214 - INFO - integration_test - Step 37: MPC solve successful
2026-01-26 16:18:47,220 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.180)
2026-01-26 16:18:47,221 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:47,221 - INFO - integration_test - === Applying control at step 37 ===
2026-01-26 16:18:47,221 - INFO - integration_test -   Control dict from planner: {'a': 2.5780013652272283e-09, 'w': -0.283228391120175}
2026-01-26 16:18:47,221 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:47,221 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:47,222 - INFO - integration_test - Step 37 completed in 1.312s
2026-01-26 16:18:47,284 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-26 16:18:47,292 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 7.45365646  6.96199657  1.01070586  3.00000003 10.48000003]
2026-01-26 16:18:47,292 - DEBUG - integration_test - Step 38: Using propagated spline 10.4800 (close to path, dist=0.436m, drift=0.893m)
2026-01-26 16:18:47,293 - DEBUG - integration_test -   Set spline state to 10.4800
2026-01-26 16:18:47,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:47,307 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(7.454, 6.962), path_start=(0.000, 0.000), dist=10.199m
2026-01-26 16:18:47,307 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.199m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:18:47,307 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-26 16:18:47,309 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:47,331 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:47,331 - INFO - integration_test - Warmstart k=0: x0=7.453656459029871 , y0=6.961996565485559 , psi0=1.010705864075854 , v0=3.000000030248525 , spline0=10.480000033294862 , a0=0.0 , w0=0.0
2026-01-26 16:18:47,331 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:47,332 - INFO - integration_test - Dyn residual k=0: pred=[7.613035312861371, 7.216158684547918, 1.010705864075854, 3.000000030248525, 10.780000036319715], ws=[7.613035311254379, 7.216158681985242, 1.0107058640758542, 3.0, 10.123434376729207], res=[1.606991872904473e-09, 2.5626762933939062e-09, -2.220446049250313e-16, 3.024852501809505e-08, 0.6565656595905072], res_norm=6.566e-01
2026-01-26 16:18:47,333 - INFO - integration_test - Dyn residual k=1: pred=[7.772414163478887, 7.4703207984849245, 1.0107058640758542, 3.0, 10.423434376729208], ws=[7.772414163478887, 7.4703207984849245, 1.0107058640758542, 3.0, 10.221414174709006], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:47,334 - INFO - integration_test - Dyn residual k=2: pred=[7.931793015703395, 7.724482914984607, 1.0107058640758542, 3.0, 10.521414174709006], ws=[7.931793015703395, 7.724482914984607, 1.0107058640758542, 3.0, 10.319393972688804], res=[0.0, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.020e-01
2026-01-26 16:18:47,348 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,396 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,414 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,452 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,470 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,508 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,525 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,562 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,579 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,617 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,636 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,675 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,694 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,735 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,753 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,792 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,811 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,848 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,867 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,907 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:47,925 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:47,962 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:48,690 - INFO - integration_test - Step 38: MPC solve successful
2026-01-26 16:18:48,698 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.480)
2026-01-26 16:18:48,698 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:48,698 - INFO - integration_test - === Applying control at step 38 ===
2026-01-26 16:18:48,698 - INFO - integration_test -   Control dict from planner: {'a': -1.0533029410383487e-07, 'w': 0.02643539672935082}
2026-01-26 16:18:48,698 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:48,698 - INFO - integration_test -   Planner output success: True
2026-01-26 16:18:48,699 - INFO - integration_test - Step 38 completed in 1.408s
2026-01-26 16:18:48,763 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-26 16:18:48,771 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 7.61269918  7.21636905  1.0133494   3.00000002 10.78000004]
2026-01-26 16:18:48,772 - DEBUG - integration_test - Step 39: Using propagated spline 10.7800 (close to path, dist=0.566m, drift=0.824m)
2026-01-26 16:18:48,772 - DEBUG - integration_test -   Set spline state to 10.7800
2026-01-26 16:18:48,773 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:48,788 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(7.613, 7.216), path_start=(0.000, 0.000), dist=10.489m
2026-01-26 16:18:48,788 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.489m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:18:48,788 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-26 16:18:48,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:48,814 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:48,814 - INFO - integration_test - Warmstart k=0: x0=7.612699183324264 , y0=7.216369050113294 , psi0=1.0133494037487891 , v0=3.0000000197154955 , spline0=10.780000035266411 , a0=0.0 , w0=0.0
2026-01-26 16:18:48,815 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:48,815 - INFO - integration_test - Dyn residual k=0: pred=[7.771405592842547, 7.470951604033913, 1.0133494037487891, 3.0000000197154955, 11.08000003723796], ws=[7.752060871079284, 7.4858451360890985, 1.013349403748789, 3.0, 10.221414176680554], res=[0.01934472176326274, -0.01489353205518551, 2.220446049250313e-16, 1.9715495458427768e-08, 0.8585858605574064], res_norm=8.589e-01
2026-01-26 16:18:48,816 - INFO - integration_test - Dyn residual k=1: pred=[7.910767279554576, 7.740427688336643, 1.013349403748789, 3.0, 10.521414176680555], ws=[7.930112000274847, 7.7255341546083836, 1.013349403748789, 3.0, 10.319393974660352], res=[-0.01934472072027127, 0.014893533728259634, 0.0, 0.0, 0.20202020202020243], res_norm=2.035e-01
2026-01-26 16:18:48,817 - INFO - integration_test - Dyn residual k=2: pred=[8.08881840875014, 7.980116706855928, 1.013349403748789, 3.0, 10.619393974660353], ws=[8.08881840875014, 7.980116706855928, 1.013349403748789, 3.0, 11.124444479710858], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 16:18:48,837 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:48,896 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:48,917 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:48,958 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:48,977 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,045 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:49,072 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,112 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:49,130 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,167 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:49,184 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,222 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:49,240 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,277 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:49,294 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,331 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:49,349 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,391 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:49,409 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,449 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:49,467 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:49,505 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:51,582 - WARNING - integration_test - Step 39: MPC solve failed
2026-01-26 16:18:51,582 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-26 16:18:51,589 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.780)
2026-01-26 16:18:51,589 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:51,589 - INFO - integration_test - === Applying control at step 39 ===
2026-01-26 16:18:51,589 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-26 16:18:51,589 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:51,589 - INFO - integration_test -   Planner output success: False
2026-01-26 16:18:51,589 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-26 16:18:51,591 - INFO - integration_test - Step 39 completed in 2.819s
2026-01-26 16:18:51,650 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-26 16:18:51,655 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 7.77568019  7.45614471  0.9333494   2.80000002 11.06000004]
2026-01-26 16:18:51,656 - DEBUG - integration_test - Step 40: Using propagated spline 11.0600 (close to path, dist=0.660m, drift=1.104m)
2026-01-26 16:18:51,656 - DEBUG - integration_test -   Set spline state to 11.0600
2026-01-26 16:18:51,657 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:51,669 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(7.776, 7.456), path_start=(0.000, 0.000), dist=10.773m
2026-01-26 16:18:51,669 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.773m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:18:51,669 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-26 16:18:51,672 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:51,695 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:51,695 - INFO - integration_test - Warmstart k=0: x0=7.775680192572348 , y0=7.45614471226712 , psi0=0.9333494037487892 , v0=2.8000000197154953 , spline0=11.06000003723796 , a0=0.0 , w0=0.0
2026-01-26 16:18:51,695 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:51,696 - INFO - integration_test - Dyn residual k=0: pred=[7.942320985566319, 7.6811577057017395, 0.9333494037487892, 2.8000000197154953, 11.34000003920951], ws=[7.920188804361168, 7.711136216539862, 0.9333494037487888, 2.8000000197154953, 10.784444483653955], res=[0.02213218120515048, -0.02997851083812275, 3.3306690738754696e-16, 0.0, 0.5555555555555554], res_norm=5.568e-01
2026-01-26 16:18:51,697 - INFO - integration_test - Dyn residual k=1: pred=[8.08682959735514, 7.936149209974482, 0.9333494037487888, 2.8000000197154953, 11.064444485625504], ws=[8.10896177856029, 7.906170699136359, 0.9333494037487888, 2.8000000197154953, 10.6604040815851], res=[-0.02213218120515137, 0.02997851083812275, 0.0, 0.0, 0.40404040404040487], res_norm=4.058e-01
2026-01-26 16:18:51,697 - INFO - integration_test - Dyn residual k=2: pred=[8.275602571554263, 8.131183692570978, 0.9333494037487888, 2.8000000197154953, 10.940404083556649], ws=[8.275602571554263, 8.131183692570978, 0.9333494037487888, 2.8000000197154953, 11.445454588607154], res=[0.0, 0.0, 0.0, 0.0, -0.5050505050505052], res_norm=5.051e-01
2026-01-26 16:18:51,712 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:51,759 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:51,777 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:51,817 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:51,835 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:51,873 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:51,890 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:51,928 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:51,945 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:51,983 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:52,002 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:52,039 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:52,058 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:52,095 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:52,113 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:52,150 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:52,168 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:52,205 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:52,224 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:52,262 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:52,279 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:52,316 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,348 - WARNING - integration_test - Step 40: MPC solve failed
2026-01-26 16:18:54,348 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-26 16:18:54,355 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.060)
2026-01-26 16:18:54,355 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:54,355 - INFO - integration_test - === Applying control at step 40 ===
2026-01-26 16:18:54,355 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-26 16:18:54,355 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:54,355 - INFO - integration_test -   Planner output success: False
2026-01-26 16:18:54,356 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-26 16:18:54,357 - INFO - integration_test - Step 40 completed in 2.702s
2026-01-26 16:18:54,419 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-26 16:18:54,424 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 7.94476877  7.66654957  0.8533494   2.60000002 11.32000004]
2026-01-26 16:18:54,425 - DEBUG - integration_test - Step 41: Using propagated spline 11.3200 (close to path, dist=0.723m, drift=0.996m)
2026-01-26 16:18:54,425 - DEBUG - integration_test -   Set spline state to 11.3200
2026-01-26 16:18:54,426 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:54,438 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(7.945, 7.667), path_start=(0.000, 0.000), dist=11.041m
2026-01-26 16:18:54,438 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.041m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:18:54,438 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-26 16:18:54,441 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:54,462 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:54,462 - INFO - integration_test - Warmstart k=0: x0=7.9447687663887 , y0=7.666549568207901 , psi0=0.8533494037487892 , v0=2.600000019715495 , spline0=11.32000003920951 , a0=0.0 , w0=0.0
2026-01-26 16:18:54,462 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:54,463 - INFO - integration_test - Dyn residual k=0: pred=[8.115709175550613, 7.862456121290649, 0.8533494037487892, 2.600000019715495, 11.58000004118106], ws=[8.109548580378513, 7.878110284750053, 0.8533494037487892, 2.600000019715495, 11.125454586635605], res=[0.006160595172099548, -0.015654163459403847, 0.0, 0.0, 0.45454545454545503], res_norm=4.549e-01
2026-01-26 16:18:54,464 - INFO - integration_test - Dyn residual k=1: pred=[8.280488989540427, 8.0740168378328, 0.8533494037487892, 2.600000019715495, 11.385454588607155], ws=[8.286649584712526, 8.058362674373397, 0.8533494037487892, 2.600000019715495, 10.981414184566752], res=[-0.006160595172099548, 0.015654163459403847, 0.0, 0.0, 0.4040404040404031], res_norm=4.044e-01
2026-01-26 16:18:54,464 - INFO - integration_test - Dyn residual k=2: pred=[8.45758999387444, 8.254269227456145, 0.8533494037487892, 2.600000019715495, 11.241414186538302], ws=[8.45758999387444, 8.254269227456145, 0.8533494037487892, 2.600000019715495, 11.544444489568605], res=[0.0, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.030e-01
2026-01-26 16:18:54,478 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,525 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,543 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,583 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,602 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,640 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,657 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,694 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,711 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,749 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,766 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,804 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,821 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,858 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,875 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,912 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,929 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:54,965 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:54,983 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:55,021 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:55,040 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:55,076 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,086 - WARNING - integration_test - Step 41: MPC solve failed
2026-01-26 16:18:57,086 - WARNING - integration_test -   Consecutive MPC failures: 3/20
2026-01-26 16:18:57,094 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.320)
2026-01-26 16:18:57,095 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:18:57,095 - INFO - integration_test - === Applying control at step 41 ===
2026-01-26 16:18:57,095 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-26 16:18:57,095 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:18:57,095 - INFO - integration_test -   Planner output success: False
2026-01-26 16:18:57,095 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-26 16:18:57,097 - INFO - integration_test - Step 41 completed in 2.673s
2026-01-26 16:18:57,164 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-26 16:18:57,168 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 8.11639328  7.84824085  0.7733494   2.40000002 11.56000004]
2026-01-26 16:18:57,169 - DEBUG - integration_test - Step 42: Using propagated spline 11.5600 (close to path, dist=0.781m, drift=0.867m)
2026-01-26 16:18:57,169 - DEBUG - integration_test -   Set spline state to 11.5600
2026-01-26 16:18:57,170 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:57,185 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(8.116, 7.848), path_start=(0.000, 0.000), dist=11.290m
2026-01-26 16:18:57,185 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.290m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:18:57,185 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-26 16:18:57,188 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:18:57,213 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:18:57,213 - INFO - integration_test - Warmstart k=0: x0=8.11639327603991 , y0=7.848240850317591 , psi0=0.7733494037487892 , v0=2.400000019715495 , spline0=11.56000004118106 , a0=0.0 , w0=0.0
2026-01-26 16:18:57,213 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:18:57,214 - INFO - integration_test - Dyn residual k=0: pred=[8.288131279623656, 8.015889468180706, 0.7733494037487892, 2.400000019715495, 11.800000043152611], ws=[8.288131279623656, 8.015889468180706, 0.7733494037487891, 2.400000019715495, 11.446464689617258], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.3535353535353529], res_norm=3.535e-01
2026-01-26 16:18:57,215 - INFO - integration_test - Dyn residual k=1: pred=[8.459869283207402, 8.183538086043821, 0.7733494037487891, 2.400000019715495, 11.686464691588808], ws=[8.459869283207402, 8.183538086043821, 0.7733494037487891, 2.400000019715495, 11.282424287548404], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 16:18:57,215 - INFO - integration_test - Dyn residual k=2: pred=[8.631607286791148, 8.351186703906937, 0.7733494037487891, 2.400000019715495, 11.522424289519954], ws=[8.631607286791148, 8.351186703906937, 0.7733494037487891, 2.400000019715495, 11.623434390530054], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 16:18:57,230 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,279 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,298 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,338 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,357 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,399 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,419 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,459 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,479 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,522 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,542 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,583 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,603 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,644 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,664 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,705 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,725 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,768 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,789 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,831 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:18:57,850 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:18:57,892 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:02,710 - WARNING - integration_test - Step 42: MPC solve failed
2026-01-26 16:19:02,711 - WARNING - integration_test -   Consecutive MPC failures: 4/20
2026-01-26 16:19:02,717 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.560)
2026-01-26 16:19:02,718 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:19:02,718 - INFO - integration_test - === Applying control at step 42 ===
2026-01-26 16:19:02,718 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-26 16:19:02,718 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:19:02,718 - INFO - integration_test -   Planner output success: False
2026-01-26 16:19:02,718 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-26 16:19:02,719 - INFO - integration_test - Step 42 completed in 5.552s
2026-01-26 16:19:02,785 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-26 16:19:02,791 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 8.28713391  8.00225204  0.6933494   2.20000002 11.78000004]
2026-01-26 16:19:02,791 - DEBUG - integration_test - Step 43: Using propagated spline 11.7800 (close to path, dist=0.811m, drift=1.087m)
2026-01-26 16:19:02,791 - DEBUG - integration_test -   Set spline state to 11.7800
2026-01-26 16:19:02,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:02,805 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(8.287, 8.002), path_start=(0.000, 0.000), dist=11.520m
2026-01-26 16:19:02,805 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.520m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:19:02,805 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-26 16:19:02,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:02,831 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:19:02,831 - INFO - integration_test - Warmstart k=0: x0=8.287133912890596 , y0=8.002252044039244 , psi0=0.6933494037487893 , v0=2.2000000197154947 , spline0=11.78000004315261 , a0=0.0 , w0=0.0
2026-01-26 16:19:02,831 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:19:02,832 - INFO - integration_test - Dyn residual k=0: pred=[8.45633804243378, 8.142857745961376, 0.6933494037487893, 2.2000000197154947, 12.000000045124159], ws=[8.45633804243378, 8.142857745961376, 0.6933494037487895, 2.2000000197154947, 11.040404085528198], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.9595959595959602], res_norm=9.596e-01
2026-01-26 16:19:02,832 - INFO - integration_test - Dyn residual k=1: pred=[8.625542171976964, 8.283463447883507, 0.6933494037487895, 2.2000000197154947, 11.260404087499747], ws=[8.625542171976964, 8.283463447883507, 0.6933494037487895, 2.2000000197154947, 11.36141418850985], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-26 16:19:02,833 - INFO - integration_test - Dyn residual k=2: pred=[8.794746301520147, 8.42406914980564, 0.6933494037487895, 2.2000000197154947, 11.581414190481398], ws=[8.794746301520147, 8.42406914980564, 0.6933494037487895, 2.2000000197154947, 11.6824242914915], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-26 16:19:02,847 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:02,894 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:02,912 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:02,951 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:02,969 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,008 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:03,026 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,064 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:03,081 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,120 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:03,137 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,174 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:03,191 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,230 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:03,248 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,286 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:03,304 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,341 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:03,358 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,399 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:03,418 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:03,457 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,155 - INFO - integration_test - Step 43: MPC solve successful
2026-01-26 16:19:04,162 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=11.780)
2026-01-26 16:19:04,162 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:19:04,162 - INFO - integration_test - === Applying control at step 43 ===
2026-01-26 16:19:04,163 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999990944144, 'w': -0.7999999348298322}
2026-01-26 16:19:04,163 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:19:04,163 - INFO - integration_test -   Planner output success: True
2026-01-26 16:19:04,164 - INFO - integration_test - Step 43 completed in 1.373s
2026-01-26 16:19:04,226 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-26 16:19:04,233 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[ 8.46979828  8.14191429  0.61334941  2.40000002 12.02000005]
2026-01-26 16:19:04,233 - DEBUG - integration_test - Step 44: Using propagated spline 12.0200 (close to path, dist=0.815m, drift=0.958m)
2026-01-26 16:19:04,234 - DEBUG - integration_test -   Set spline state to 12.0200
2026-01-26 16:19:04,235 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:04,248 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(8.470, 8.142), path_start=(0.000, 0.000), dist=11.749m
2026-01-26 16:19:04,248 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=11.749m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:19:04,248 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-26 16:19:04,250 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:04,271 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:19:04,272 - INFO - integration_test - Warmstart k=0: x0=8.469798277950451 , y0=8.14191428877108 , psi0=0.613349410265806 , v0=2.4000000196249363 , spline0=12.020000045115104 , a0=0.0 , w0=0.0
2026-01-26 16:19:04,272 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:19:04,272 - INFO - integration_test - Dyn residual k=0: pred=[8.666052196912387, 8.280060588881065, 0.613349410265806, 2.4000000196249363, 12.260000047077598], ws=[8.666052196912387, 8.280060588881065, 0.6133494102658061, 2.4000000196249363, 11.603434390511941], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.6565656565656575], res_norm=6.566e-01
2026-01-26 16:19:04,273 - INFO - integration_test - Dyn residual k=1: pred=[8.862306115874324, 8.418206888991051, 0.6133494102658061, 2.4000000196249363, 11.843434392474435], ws=[8.862306115874324, 8.418206888991051, 0.6133494102658061, 2.4000000196249363, 11.944444493484538], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-26 16:19:04,274 - INFO - integration_test - Dyn residual k=2: pred=[9.05856003483626, 8.556353189101037, 0.6133494102658061, 2.4000000196249363, 12.184444495447032], ws=[9.05856003483626, 8.556353189101037, 0.6133494102658061, 2.4000000196249363, 11.780404091406627], res=[0.0, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.040e-01
2026-01-26 16:19:04,287 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,334 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,353 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,390 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,409 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,447 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,464 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,501 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,519 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,558 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,577 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,615 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,632 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,669 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,687 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,724 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,742 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,780 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,799 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,863 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:04,889 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:04,928 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:20,414 - WARNING - integration_test - Step 44: MPC solve failed
2026-01-26 16:19:20,414 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-26 16:19:20,421 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.020)
2026-01-26 16:19:20,421 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:19:20,421 - INFO - integration_test - === Applying control at step 44 ===
2026-01-26 16:19:20,421 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-26 16:19:20,422 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:19:20,422 - INFO - integration_test -   Planner output success: False
2026-01-26 16:19:20,422 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-26 16:19:20,423 - INFO - integration_test - Step 44 completed in 16.190s
2026-01-26 16:19:20,491 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-26 16:19:20,496 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[ 8.66289488  8.26675625  0.53334941  2.20000002 12.24000005]
2026-01-26 16:19:20,497 - DEBUG - integration_test - Step 45: Using propagated spline 12.2400 (close to path, dist=0.827m, drift=0.810m)
2026-01-26 16:19:20,497 - DEBUG - integration_test -   Set spline state to 12.2400
2026-01-26 16:19:20,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:20,511 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(8.663, 8.267), path_start=(0.000, 0.000), dist=11.974m
2026-01-26 16:19:20,511 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=11.974m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:19:20,511 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-26 16:19:20,514 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:20,538 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:19:20,538 - INFO - integration_test - Warmstart k=0: x0=8.662894879391429 , y0=8.266756250352621 , psi0=0.5333494102658061 , v0=2.200000019624936 , spline0=12.240000047077597 , a0=0.0 , w0=0.0
2026-01-26 16:19:20,538 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:19:20,539 - INFO - integration_test - Dyn residual k=0: pred=[8.852338860069512, 8.378608738247792, 0.5333494102658061, 2.200000019624936, 12.46000004904009], ws=[8.852338860069512, 8.378608738247792, 0.5333494102658061, 2.200000019624936, 11.904444493484535], res=[0.0, 0.0, 0.0, 0.0, 0.5555555555555554], res_norm=5.556e-01
2026-01-26 16:19:20,540 - INFO - integration_test - Dyn residual k=1: pred=[9.041782840747596, 8.490461226142962, 0.5333494102658061, 2.200000019624936, 12.124444495447028], ws=[9.041782840747596, 8.490461226142962, 0.5333494102658061, 2.200000019624936, 12.225454596457128], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 16:19:20,541 - INFO - integration_test - Dyn residual k=2: pred=[9.231226821425679, 8.602313714038132, 0.5333494102658061, 2.200000019624936, 12.445454598419621], ws=[9.231226821425679, 8.602313714038132, 0.5333494102658061, 2.200000019624936, 12.546464699429723], res=[0.0, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.010e-01
2026-01-26 16:19:20,555 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:20,604 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:20,623 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:20,664 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:20,682 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:20,720 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:20,737 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:20,775 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:20,793 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:20,832 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:20,850 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:20,892 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:20,912 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:20,951 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:20,971 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:21,009 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:21,027 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:21,067 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:21,087 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:21,125 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:21,142 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:21,179 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:21,900 - INFO - integration_test - Step 45: MPC solve successful
2026-01-26 16:19:21,906 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.240)
2026-01-26 16:19:21,906 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:19:21,906 - INFO - integration_test - === Applying control at step 45 ===
2026-01-26 16:19:21,906 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000197918557, 'w': -0.8000000076895537}
2026-01-26 16:19:21,906 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:19:21,906 - INFO - integration_test -   Planner output success: True
2026-01-26 16:19:21,907 - INFO - integration_test - Step 45 completed in 1.412s
2026-01-26 16:19:21,966 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-26 16:19:21,971 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[ 8.86547686  8.37553287  0.45334941  2.40000002 12.48000005]
2026-01-26 16:19:21,972 - DEBUG - integration_test - Step 46: Using propagated spline 12.4800 (close to path, dist=0.787m, drift=1.050m)
2026-01-26 16:19:21,972 - DEBUG - integration_test -   Set spline state to 12.4800
2026-01-26 16:19:21,974 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:21,987 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(8.865, 8.376), path_start=(0.000, 0.000), dist=12.196m
2026-01-26 16:19:21,987 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.196m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:19:21,987 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-26 16:19:21,990 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:22,011 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:19:22,011 - INFO - integration_test - Warmstart k=0: x0=8.865476862408483 , y0=8.375532870365452 , psi0=0.4533494094968507 , v0=2.4000000216041215 , spline0=12.48000004923801 , a0=0.0 , w0=0.0
2026-01-26 16:19:22,011 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:19:22,012 - INFO - integration_test - Dyn residual k=0: pred=[9.081233306719767, 8.480647844442172, 0.4533494094968507, 2.4000000216041215, 12.720000051398422], ws=[9.081233306719767, 8.480647844442172, 0.4533494094968509, 2.4000000216041215, 11.760404091802464], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, 0.9595959595959584], res_norm=9.596e-01
2026-01-26 16:19:22,013 - INFO - integration_test - Dyn residual k=1: pred=[9.29698975103105, 8.585762818518893, 0.4533494094968509, 2.4000000216041215, 12.000404093962876], ws=[9.29698975103105, 8.585762818518893, 0.4533494094968509, 2.4000000216041215, 12.101414194972977], res=[0.0, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.010e-01
2026-01-26 16:19:22,014 - INFO - integration_test - Dyn residual k=2: pred=[9.512746195342334, 8.690877792595613, 0.4533494094968509, 2.4000000216041215, 12.341414197133389], ws=[9.512746195342334, 8.690877792595613, 0.4533494094968509, 2.4000000216041215, 12.386218038650163], res=[0.0, 0.0, 0.0, 0.0, -0.04480384151677441], res_norm=4.480e-02
2026-01-26 16:19:22,028 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,074 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,093 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,130 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,148 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,186 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,203 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,254 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,279 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,327 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,344 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,381 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,398 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,437 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,455 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,493 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,511 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,548 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,566 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,603 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:22,621 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:22,660 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:38,421 - WARNING - integration_test - Step 46: MPC solve failed
2026-01-26 16:19:38,421 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-26 16:19:38,428 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.480)
2026-01-26 16:19:38,428 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:19:38,428 - INFO - integration_test - === Applying control at step 46 ===
2026-01-26 16:19:38,428 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-26 16:19:38,428 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:19:38,428 - INFO - integration_test -   Planner output success: False
2026-01-26 16:19:38,428 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-26 16:19:38,429 - INFO - integration_test - Step 46 completed in 16.458s
2026-01-26 16:19:38,489 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-26 16:19:38,492 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[ 9.07599669  8.46801646  0.37334941  2.20000002 12.70000005]
2026-01-26 16:19:38,492 - DEBUG - integration_test - Step 47: Using propagated spline 12.7000 (close to path, dist=0.750m, drift=0.901m)
2026-01-26 16:19:38,492 - DEBUG - integration_test -   Set spline state to 12.7000
2026-01-26 16:19:38,494 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:38,506 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(9.076, 8.468), path_start=(0.000, 0.000), dist=12.413m
2026-01-26 16:19:38,506 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.413m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:19:38,507 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-26 16:19:38,509 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:19:38,532 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['ellipsoid_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:19:38,532 - INFO - integration_test - Warmstart k=0: x0=9.07599669335982 , y0=8.468016456621598 , psi0=0.3733494094968507 , v0=2.2000000216041213 , spline0=12.700000051398423 , a0=0.0 , w0=0.0
2026-01-26 16:19:38,532 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:19:38,533 - INFO - integration_test - Dyn residual k=0: pred=[9.280841097779295, 8.548258409044328, 0.3733494094968507, 2.2000000216041213, 12.920000053558836], ws=[9.280841097779295, 8.548258409044328, 0.3733494094968508, 2.2000000216041213, 12.061414194972977], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.8585858585858581], res_norm=8.586e-01
2026-01-26 16:19:38,534 - INFO - integration_test - Dyn residual k=1: pred=[9.48568550219877, 8.628500361467058, 0.3733494094968508, 2.2000000216041213, 12.28141419713339], ws=[9.48568550219877, 8.628500361467058, 0.3733494094968508, 2.2000000216041213, 12.151116749419689], res=[0.0, 0.0, 0.0, 0.0, 0.13029744771370133], res_norm=1.303e-01
2026-01-26 16:19:38,535 - INFO - integration_test - Dyn residual k=2: pred=[9.690529906618245, 8.708742313889788, 0.3733494094968508, 2.2000000216041213, 12.371116751580102], ws=[9.690529906618245, 8.708742313889788, 0.3733494094968508, 2.2000000216041213, 12.478339252015251], res=[0.0, 0.0, 0.0, 0.0, -0.10722250043514947], res_norm=1.072e-01
2026-01-26 16:19:38,548 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:38,595 - INFO - integration_test - Stage 0: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:38,612 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:38,651 - INFO - integration_test - Stage 1: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:38,668 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:38,706 - INFO - integration_test - Stage 2: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:38,723 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:38,763 - INFO - integration_test - Stage 3: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:38,780 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:38,818 - INFO - integration_test - Stage 4: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:38,837 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:38,879 - INFO - integration_test - Stage 5: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:38,896 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:38,934 - INFO - integration_test - Stage 6: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:38,952 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:38,991 - INFO - integration_test - Stage 7: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:39,010 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:39,050 - INFO - integration_test - Stage 8: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:39,070 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:39,110 - INFO - integration_test - Stage 9: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:39,129 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:19:39,169 - INFO - integration_test - Stage 10: constraints count=7 (linearized=0, contouring=6, other=1)
2026-01-26 16:19:49,880 - WARNING - integration_test - Step 47: MPC solve failed
2026-01-26 16:19:49,880 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-26 16:19:49,886 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=12.700)
2026-01-26 16:19:49,887 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-26 16:19:49,887 - INFO - integration_test - === Applying control at step 47 ===
2026-01-26 16:19:49,887 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': -0.8}
2026-01-26 16:19:49,887 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:19:49,887 - INFO - integration_test -   Planner output success: False
2026-01-26 16:19:49,887 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': -0.8}
2026-01-26 16:19:49,888 - INFO - integration_test - Step 47 completed in 11.396s
2026-01-26 16:19:49,951 - WARNING - integration_test - Test timeout reached (120.0s) at step 48. Terminating test early.
2026-01-26 16:19:49,955 - INFO - integration_test - Saving test results...
2026-01-26 16:19:49,956 - INFO - integration_test - Saved 49 vehicle states to test_outputs/20260126_161748_contouring_ellipsoid_contouring_contouring_unicycle/vehicle_states.csv
2026-01-26 16:19:49,956 - INFO - integration_test - Saved obstacle summary to test_outputs/20260126_161748_contouring_ellipsoid_contouring_contouring_unicycle/obstacle_summary.csv
2026-01-26 16:19:49,957 - INFO - integration_test - Saved 59 states for obstacle 0 to test_outputs/20260126_161748_contouring_ellipsoid_contouring_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-26 16:19:49,957 - INFO - integration_test - Saved state history: 49 vehicle states, 1 obstacles
2026-01-26 16:19:49,957 - INFO - integration_test - Creating animation...
2026-01-26 16:19:49,995 - DEBUG - integration_test - Creating animation with 49 frames (range: 0 to 48)
2026-01-26 16:19:49,995 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-26 16:19:50,003 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-26 16:19:50,053 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-26 16:19:50,084 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-26 16:19:54,665 - INFO - integration_test - Saved animation with 49 frames at 10.00 fps to test_outputs/20260126_161748_contouring_ellipsoid_contouring_contouring_unicycle/animation.gif (duration: 4.90s, size: 373741 bytes)
2026-01-26 16:19:54,693 - INFO - integration_test - Animation created successfully
2026-01-26 16:19:54,694 - INFO - integration_test - Test completed successfully
