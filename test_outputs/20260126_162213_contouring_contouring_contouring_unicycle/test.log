2026-01-26 16:22:13,280 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-26 16:22:13,280 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2026-01-26 16:22:13,280 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-26 16:22:13,280 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-26 16:22:13,280 - INFO - integration_test - Creating objective module: contouring
2026-01-26 16:22:13,286 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-26 16:22:13,286 - INFO - integration_test - Creating 1 constraint module(s): ['contouring']
2026-01-26 16:22:13,286 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-26 16:22:13,293 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-26 16:22:13,293 - INFO - integration_test - Created 1 constraint module(s)
2026-01-26 16:22:13,310 - INFO - integration_test - Setting solver on all modules...
2026-01-26 16:22:13,310 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-26 16:22:13,310 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-26 16:22:13,310 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-26 16:22:13,310 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-26 16:22:13,310 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-26 16:22:13,311 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-26 16:22:13,311 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-26 16:22:13,311 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-26 16:22:13,311 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-26 16:22:13,311 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-26 16:22:13,312 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-26 16:22:13,312 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-26 16:22:13,312 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-26 16:22:13,312 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-26 16:22:13,312 - INFO - integration_test - Added spline variable: 0.0000
2026-01-26 16:22:13,312 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-26 16:22:13,312 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-26 16:22:13,312 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-26 16:22:13,313 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-26 16:22:13,313 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-26 16:22:13,313 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:13,327 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-26 16:22:13,327 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-26 16:22:13,330 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:13,356 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:13,356 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-26 16:22:13,356 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:13,357 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.129, 0.0, 0.0, 1.0, 0.051515151515151514], res=[-0.028999999999999998, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=5.650e-02
2026-01-26 16:22:13,359 - INFO - integration_test - Dyn residual k=1: pred=[0.229, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.29541000000000006, 0.0, 0.0, 1.0, 0.10505050505050506], res=[-0.06641000000000005, 0.0, 0.0, 0.0, 0.04646464646464646], res_norm=8.105e-02
2026-01-26 16:22:13,360 - INFO - integration_test - Dyn residual k=2: pred=[0.39541000000000004, 0.0, 0.0, 1.0, 0.20505050505050507], ws=[0.5100789000000001, 0.0, 0.0, 1.0, 0.21414141414141413], res=[-0.11466890000000007, 0.0, 0.0, 0.0, -0.009090909090909066], res_norm=1.150e-01
2026-01-26 16:22:13,374 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,425 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,441 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,483 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,500 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,542 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,560 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,602 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,620 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,662 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,678 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,719 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,735 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,776 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,792 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,831 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,846 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,885 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,899 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,935 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:13,949 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:13,985 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:14,553 - INFO - integration_test - Step 0: MPC solve successful
2026-01-26 16:22:14,748 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-26 16:22:14,749 - DEBUG - integration_test - Step 0: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:14,749 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-26 16:22:14,749 - INFO - integration_test - === Applying control at step 0 ===
2026-01-26 16:22:14,749 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000138525182, 'w': 0.0}
2026-01-26 16:22:14,749 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:14,749 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:14,750 - INFO - integration_test - Step 0 completed in 1.438s
2026-01-26 16:22:14,768 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-26 16:22:14,769 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.11 0.   0.   1.2  0.12]
2026-01-26 16:22:14,769 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-26 16:22:14,769 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-26 16:22:14,770 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:14,794 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.000), path_start=(0.000, 0.000), dist=0.110m
2026-01-26 16:22:14,794 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-26 16:22:14,798 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:14,840 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:14,840 - INFO - integration_test - Warmstart k=0: x0=0.11000000006926258 , y0=0.0 , psi0=0.0 , v0=1.2000000013852519 , spline0=0.12000000013852519 , a0=0.0 , w0=0.0
2026-01-26 16:22:14,840 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:14,841 - INFO - integration_test - Dyn residual k=0: pred=[0.23000000020778777, 0.0, 0.0, 1.2000000013852519, 0.24000000027705037], ws=[0.3241400003350751, 0.0, 0.0, 1.2000000013852519, 0.10585858586418284], res=[-0.09414000012728735, 0.0, 0.0, 0.0, 0.13414141441286753], res_norm=1.639e-01
2026-01-26 16:22:14,842 - INFO - integration_test - Dyn residual k=1: pred=[0.4441400004736003, 0.0, 0.0, 1.2000000013852519, 0.22585858600270803], ws=[0.4820132537391978, 0.0, 0.0, 1.2000000013852519, 0.433131313164895], res=[-0.037873253265597484, 0.0, 0.0, 0.0, -0.20727272716218698], res_norm=2.107e-01
2026-01-26 16:22:14,843 - INFO - integration_test - Dyn residual k=2: pred=[0.602013253877723, 0.0, 0.0, 1.2000000013852519, 0.5531313133034201], ws=[0.685669750630516, 0.0, 0.0, 1.2000000013852519, 0.27676767679566167], res=[-0.08365649675279307, 0.0, 0.0, 0.0, 0.27636363650775847], res_norm=2.887e-01
2026-01-26 16:22:14,866 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:14,921 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:14,938 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,038 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,056 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,099 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,117 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,160 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,178 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,230 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,245 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,283 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,298 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,336 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,352 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,389 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,404 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,443 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,459 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,498 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,514 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,553 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,708 - INFO - integration_test - Step 1: MPC solve successful
2026-01-26 16:22:15,713 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-26 16:22:15,713 - DEBUG - integration_test - Step 1: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:15,713 - INFO - integration_test - === Applying control at step 1 ===
2026-01-26 16:22:15,713 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000155402162, 'w': 0.0}
2026-01-26 16:22:15,713 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:15,713 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:15,714 - INFO - integration_test - Step 1 completed in 0.945s
2026-01-26 16:22:15,728 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-26 16:22:15,728 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.24 0.   0.   1.4  0.26]
2026-01-26 16:22:15,729 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.168m, drift=0.148m)
2026-01-26 16:22:15,729 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-26 16:22:15,729 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:15,742 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.240, 0.000), path_start=(0.000, 0.000), dist=0.240m
2026-01-26 16:22:15,742 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-26 16:22:15,744 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:15,765 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:15,765 - INFO - integration_test - Warmstart k=0: x0=0.24000000028548885 , y0=0.0 , psi0=0.0 , v0=1.4000000029392734 , spline0=0.2600000004324525 , a0=0.0 , w0=0.0
2026-01-26 16:22:15,765 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:15,766 - INFO - integration_test - Dyn residual k=0: pred=[0.3800000005794162, 0.0, 0.0, 1.4000000029392734, 0.40000000072637987], ws=[0.430265153975501, 0.0, 0.0, 1.4000000029392734, 0.16363636365837517], res=[-0.05026515339608484, 0.0, 0.0, 0.0, 0.2363636370680047], res_norm=2.416e-01
2026-01-26 16:22:15,767 - INFO - integration_test - Dyn residual k=1: pred=[0.5702651542694284, 0.0, 0.0, 1.4000000029392734, 0.30363636395230253], ws=[0.6757072022356168, 0.0, 0.0, 1.4000000029392734, 0.2797979798495105], res=[-0.10544204796618839, 0.0, 0.0, 0.0, 0.023838384102792043], res_norm=1.081e-01
2026-01-26 16:22:15,768 - INFO - integration_test - Dyn residual k=2: pred=[0.8157072025295441, 0.0, 0.0, 1.4000000029392734, 0.41979798014343783], ws=[0.8739600975523905, 0.0, 0.0, 1.4000000029392734, 0.34424242432207486], res=[-0.05825289502284636, 0.0, 0.0, 0.0, 0.07555555582136297], res_norm=9.540e-02
2026-01-26 16:22:15,780 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,825 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,841 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,877 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,892 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,928 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,943 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:15,979 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:15,993 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,032 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,047 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,084 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,099 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,139 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,154 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,192 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,206 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,249 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,264 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,302 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,317 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,356 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,513 - INFO - integration_test - Step 2: MPC solve successful
2026-01-26 16:22:16,517 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-26 16:22:16,518 - DEBUG - integration_test - Step 2: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:16,518 - INFO - integration_test - === Applying control at step 2 ===
2026-01-26 16:22:16,518 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000180657382, 'w': 0.0}
2026-01-26 16:22:16,518 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:16,518 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:16,519 - INFO - integration_test - Step 2 completed in 0.791s
2026-01-26 16:22:16,532 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-26 16:22:16,532 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.39 0.   0.   1.6  0.42]
2026-01-26 16:22:16,533 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.018m, drift=0.012m)
2026-01-26 16:22:16,533 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-26 16:22:16,533 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:16,547 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.390, 0.000), path_start=(0.000, 0.000), dist=0.390m
2026-01-26 16:22:16,547 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-26 16:22:16,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:16,571 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:16,571 - INFO - integration_test - Warmstart k=0: x0=0.3900000006697449 , y0=0.0 , psi0=0.0 , v0=1.6000000047458471 , spline0=0.42000000090703726 , a0=0.0 , w0=0.0
2026-01-26 16:22:16,571 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:16,572 - INFO - integration_test - Dyn residual k=0: pred=[0.5500000011443296, 0.0, 0.0, 1.6000000047458471, 0.580000001381622], ws=[0.6116101548438637, 0.0, 0.0, 1.6000000047458471, 0.5072727273983293], res=[-0.061610153699534154, 0.0, 0.0, 0.0, 0.0727272739832927], res_norm=9.532e-02
2026-01-26 16:22:16,573 - INFO - integration_test - Dyn residual k=1: pred=[0.7716101553184485, 0.0, 0.0, 1.6000000047458471, 0.667272727872914], ws=[0.897487253728477, 0.0, 0.0, 1.6000000047458471, 0.34787878799128524], res=[-0.1258770984100286, 0.0, 0.0, 0.0, 0.3193939398816288], res_norm=3.433e-01
2026-01-26 16:22:16,574 - INFO - integration_test - Dyn residual k=2: pred=[1.0574872542030618, 0.0, 0.0, 1.6000000047458471, 0.50787878846587], ws=[1.1479013643508529, 0.0, 0.0, 1.6000000047458471, 0.9535353539120471], res=[-0.0904141101477911, 0.0, 0.0, 0.0, -0.44565656544617716], res_norm=4.547e-01
2026-01-26 16:22:16,587 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,636 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,652 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,690 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,705 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,744 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,759 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,795 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,810 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,846 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,861 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,897 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,911 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,947 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:16,961 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:16,997 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,010 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,047 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,062 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,101 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,116 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,152 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,290 - INFO - integration_test - Step 3: MPC solve successful
2026-01-26 16:22:17,294 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-26 16:22:17,294 - DEBUG - integration_test - Step 3: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:17,294 - INFO - integration_test - === Applying control at step 3 ===
2026-01-26 16:22:17,294 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016846597, 'w': 0.0}
2026-01-26 16:22:17,294 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:17,294 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:17,295 - INFO - integration_test - Step 3 completed in 0.763s
2026-01-26 16:22:17,309 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-26 16:22:17,309 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.56       0.         0.         1.80000001 0.6       ]
2026-01-26 16:22:17,310 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.152m, drift=0.192m)
2026-01-26 16:22:17,310 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-26 16:22:17,310 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:17,322 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.560, 0.000), path_start=(0.000, 0.000), dist=0.560m
2026-01-26 16:22:17,322 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-26 16:22:17,325 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:17,345 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:17,346 - INFO - integration_test - Warmstart k=0: x0=0.5600000012285626 , y0=0.0 , psi0=0.0 , v0=1.8000000064305068 , spline0=0.6000000015500879 , a0=0.0 , w0=0.0
2026-01-26 16:22:17,346 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:17,346 - INFO - integration_test - Dyn residual k=0: pred=[0.7400000018716133, 0.0, 0.0, 1.8000000064305068, 0.7800000021931386], ws=[0.7764403090090989, 0.0, 0.0, 1.8000000064305068, 0.8173737376838781], res=[-0.036440307137485584, 0.0, 0.0, 0.0, -0.037373735490739524], res_norm=5.220e-02
2026-01-26 16:22:17,347 - INFO - integration_test - Dyn residual k=1: pred=[0.9564403096521495, 0.0, 0.0, 1.8000000064305068, 0.9973737383269288], ws=[1.0556483060459905, 0.0, 0.0, 1.8000000064305068, 0.6622222225373543], res=[-0.09920799639384092, 0.0, 0.0, 0.0, 0.3351515157895745], res_norm=3.495e-01
2026-01-26 16:22:17,348 - INFO - integration_test - Dyn residual k=2: pred=[1.2356483066890411, 0.0, 0.0, 1.8000000064305068, 0.842222223180405], ws=[1.297459275284805, 0.0, 0.0, 1.8000000064305068, 1.240404041106917], res=[-0.06181096859576396, 0.0, 0.0, 0.0, -0.3981818179265121], res_norm=4.030e-01
2026-01-26 16:22:17,361 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,405 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,419 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,456 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,472 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,508 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,522 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,559 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,573 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,609 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,624 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,660 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,677 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,716 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,731 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,769 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,784 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,823 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,839 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,878 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:17,893 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:17,931 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,111 - INFO - integration_test - Step 4: MPC solve successful
2026-01-26 16:22:18,115 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-26 16:22:18,115 - DEBUG - integration_test - Step 4: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:18,115 - INFO - integration_test - === Applying control at step 4 ===
2026-01-26 16:22:18,115 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000172304455, 'w': 0.0}
2026-01-26 16:22:18,115 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:18,115 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:18,116 - INFO - integration_test - Step 4 completed in 0.807s
2026-01-26 16:22:18,129 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-26 16:22:18,129 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.75       0.         0.         2.00000001 0.8       ]
2026-01-26 16:22:18,130 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.066m, drift=0.016m)
2026-01-26 16:22:18,130 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-26 16:22:18,130 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:18,143 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.750, 0.000), path_start=(0.000, 0.000), dist=0.750m
2026-01-26 16:22:18,143 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-26 16:22:18,145 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:18,166 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:18,166 - INFO - integration_test - Warmstart k=0: x0=0.7500000019577655 , y0=0.0 , psi0=0.0 , v0=2.000000008153551 , spline0=0.800000002365443 , a0=0.0 , w0=0.0
2026-01-26 16:22:18,166 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:18,167 - INFO - integration_test - Dyn residual k=0: pred=[0.9500000027731206, 0.0, 0.0, 2.000000008153551, 1.000000003180798], ws=[1.0889903103696388, 0.0, 0.0, 2.000000008153551, 0.9090909095728482], res=[-0.1389903075965182, 0.0, 0.0, 0.0, 0.09090909360794985], res_norm=1.661e-01
2026-01-26 16:22:18,168 - INFO - integration_test - Dyn residual k=1: pred=[1.2889903111849939, 0.0, 0.0, 2.000000008153551, 1.1090909103882034], ws=[1.4079204612821798, 0.0, 0.0, 2.000000008153551, 0.8141414146661615], res=[-0.118930150097186, 0.0, 0.0, 0.0, 0.2949494957220419], res_norm=3.180e-01
2026-01-26 16:22:18,168 - INFO - integration_test - Dyn residual k=2: pred=[1.607920462097535, 0.0, 0.0, 2.000000008153551, 1.0141414154815167], ws=[1.7009730090205823, 0.0, 0.0, 2.000000008153551, 1.4222222232914463], res=[-0.09305254692304743, 0.0, 0.0, 0.0, -0.4080808078099296], res_norm=4.186e-01
2026-01-26 16:22:18,181 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,227 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,242 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,285 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,300 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,340 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,356 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,393 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,408 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,446 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,467 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,511 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,527 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,569 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,586 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,630 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,647 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,690 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,708 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,756 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,778 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:18,838 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:18,976 - INFO - integration_test - Step 5: MPC solve successful
2026-01-26 16:22:18,980 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-26 16:22:18,980 - DEBUG - integration_test - Step 5: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:18,980 - INFO - integration_test - === Applying control at step 5 ===
2026-01-26 16:22:18,980 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000140830236, 'w': 0.0}
2026-01-26 16:22:18,980 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:18,980 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:18,981 - INFO - integration_test - Step 5 completed in 0.852s
2026-01-26 16:22:18,994 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-26 16:22:18,994 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.96       0.         0.         2.20000001 1.02      ]
2026-01-26 16:22:18,995 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.144m, drift=0.204m)
2026-01-26 16:22:18,995 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-26 16:22:18,995 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:19,008 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.960, 0.000), path_start=(0.000, 0.000), dist=0.960m
2026-01-26 16:22:19,008 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-26 16:22:19,010 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:19,032 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:19,033 - INFO - integration_test - Warmstart k=0: x0=0.9600000028435357 , y0=0.0 , psi0=0.0 , v0=2.2000000095618537 , spline0=1.0200000033216283 , a0=0.0 , w0=0.0
2026-01-26 16:22:19,033 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:19,033 - INFO - integration_test - Dyn residual k=0: pred=[1.1800000037997211, 0.0, 0.0, 2.2000000095618537, 1.2400000042778136], ws=[1.2400254649681497, 0.0, 0.0, 2.2000000095618537, 0.7563636368821594], res=[-0.06002546116842855, 0.0, 0.0, 0.0, 0.4836363673956543], res_norm=4.873e-01
2026-01-26 16:22:19,034 - INFO - integration_test - Dyn residual k=1: pred=[1.460025465924335, 0.0, 0.0, 2.2000000095618537, 0.9763636378383447], ws=[1.6012583111089016, 0.0, 0.0, 2.2000000095618537, 1.3703030314132725], res=[-0.14123284518456658, 0.0, 0.0, 0.0, -0.3939393935749278], res_norm=4.185e-01
2026-01-26 16:22:19,035 - INFO - integration_test - Dyn residual k=2: pred=[1.821258312065087, 0.0, 0.0, 2.2000000095618537, 1.5903030323694578], ws=[1.9488813356916963, 0.0, 0.0, 2.2000000095618537, 1.7543434359691392], res=[-0.12762302362660938, 0.0, 0.0, 0.0, -0.16404040359968142], res_norm=2.078e-01
2026-01-26 16:22:19,048 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,094 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,109 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,146 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,161 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,200 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,216 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,261 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,278 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,320 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,338 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,380 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,396 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,436 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,451 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,493 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,508 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,546 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,561 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,598 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,612 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,650 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:19,822 - INFO - integration_test - Step 6: MPC solve successful
2026-01-26 16:22:19,826 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-26 16:22:19,826 - DEBUG - integration_test - Step 6: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:19,826 - INFO - integration_test - === Applying control at step 6 ===
2026-01-26 16:22:19,826 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000183006343, 'w': 0.0}
2026-01-26 16:22:19,827 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:19,827 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:19,828 - INFO - integration_test - Step 6 completed in 0.834s
2026-01-26 16:22:19,846 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-26 16:22:19,846 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.19       0.         0.         2.40000001 1.26      ]
2026-01-26 16:22:19,847 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.034m, drift=0.036m)
2026-01-26 16:22:19,847 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-26 16:22:19,847 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:19,861 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.190, 0.000), path_start=(0.000, 0.000), dist=1.190m
2026-01-26 16:22:19,862 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-26 16:22:19,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:19,892 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:19,892 - INFO - integration_test - Warmstart k=0: x0=1.1900000038912242 , y0=0.0 , psi0=0.0 , v0=2.400000011391917 , spline0=1.26000000446082 , a0=0.0 , w0=0.0
2026-01-26 16:22:19,892 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:19,893 - INFO - integration_test - Dyn residual k=0: pred=[1.4300000050304158, 0.0, 0.0, 2.400000011391917, 1.5000000056000116], ws=[1.5387804668141407, 0.0, 0.0, 2.400000011391917, 1.1161616171232343], res=[-0.10878046178372491, 0.0, 0.0, 0.0, 0.3838383884767773], res_norm=3.990e-01
2026-01-26 16:22:19,894 - INFO - integration_test - Dyn residual k=1: pred=[1.7787804679533323, 0.0, 0.0, 2.400000011391917, 1.3561616182624259], ws=[1.8703399170459274, 0.0, 0.0, 2.400000011391917, 1.4977777792753786], res=[-0.09155944909259506, 0.0, 0.0, 0.0, -0.1416161610129527], res_norm=1.686e-01
2026-01-26 16:22:19,895 - INFO - integration_test - Dyn residual k=2: pred=[2.1103399181851192, 0.0, 0.0, 2.400000011391917, 1.7377777804145702], ws=[2.1796842609061566, 0.0, 0.0, 2.400000011391917, 1.621616163446496], res=[-0.0693443427210374, 0.0, 0.0, 0.0, 0.11616161696807414], res_norm=1.353e-01
2026-01-26 16:22:19,913 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:19,980 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,001 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,052 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,072 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,116 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,134 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,179 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,195 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,237 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,255 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,296 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,312 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,353 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,370 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,411 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,428 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,469 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,486 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,526 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,542 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,582 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,715 - INFO - integration_test - Step 7: MPC solve successful
2026-01-26 16:22:20,719 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-26 16:22:20,719 - DEBUG - integration_test - Step 7: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:20,719 - INFO - integration_test - === Applying control at step 7 ===
2026-01-26 16:22:20,719 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000094905936, 'w': 0.0}
2026-01-26 16:22:20,719 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:20,719 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:20,721 - INFO - integration_test - Step 7 completed in 0.875s
2026-01-26 16:22:20,732 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-26 16:22:20,733 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.44000001 0.         0.         2.60000001 1.52000001]
2026-01-26 16:22:20,733 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.193m, drift=0.113m)
2026-01-26 16:22:20,733 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-26 16:22:20,734 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:20,747 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.440, 0.000), path_start=(0.000, 0.000), dist=1.440m
2026-01-26 16:22:20,747 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-26 16:22:20,749 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:20,770 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:20,770 - INFO - integration_test - Warmstart k=0: x0=1.4400000050778687 , y0=0.0 , psi0=0.0 , v0=2.6000000123409763 , spline0=1.5200000056949177 , a0=0.0 , w0=0.0
2026-01-26 16:22:20,771 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:20,771 - INFO - integration_test - Dyn residual k=0: pred=[1.7000000063119662, 0.0, 0.0, 2.6000000123409763, 1.7800000069290154], ws=[1.821020621776837, 0.0, 0.0, 2.6000000123409763, 1.7121212138709634], res=[-0.12102061546487075, 0.0, 0.0, 0.0, 0.067878793058052], res_norm=1.388e-01
2026-01-26 16:22:20,772 - INFO - integration_test - Dyn residual k=1: pred=[2.0810206230109345, 0.0, 0.0, 2.6000000123409763, 1.972121215105061], ws=[2.19416987037973, 0.0, 0.0, 2.6000000123409763, 1.8488888910327366], res=[-0.11314924736879561, 0.0, 0.0, 0.0, 0.12323232407232454], res_norm=1.673e-01
2026-01-26 16:22:20,773 - INFO - integration_test - Dyn residual k=2: pred=[2.4541698716138276, 0.0, 0.0, 2.6000000123409763, 2.108888892266834], ws=[2.5571650541386868, 0.0, 0.0, 2.6000000123409763, 2.507070710298032], res=[-0.10299518252485917, 0.0, 0.0, 0.0, -0.398181818031198], res_norm=4.113e-01
2026-01-26 16:22:20,786 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,833 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,848 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,889 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,904 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:20,944 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:20,960 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,004 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,020 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,061 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,077 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,116 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,133 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,173 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,188 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,229 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,245 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,284 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,299 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,340 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,356 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,397 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,538 - INFO - integration_test - Step 8: MPC solve successful
2026-01-26 16:22:21,542 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-26 16:22:21,542 - DEBUG - integration_test - Step 8: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:21,543 - INFO - integration_test - === Applying control at step 8 ===
2026-01-26 16:22:21,543 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000077404625, 'w': 0.0}
2026-01-26 16:22:21,543 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:21,543 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:21,544 - INFO - integration_test - Step 8 completed in 0.811s
2026-01-26 16:22:21,557 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-26 16:22:21,558 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.71000001 0.         0.         2.80000001 1.80000001]
2026-01-26 16:22:21,558 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.077m, drift=0.167m)
2026-01-26 16:22:21,558 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-26 16:22:21,559 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:21,571 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.710, 0.000), path_start=(0.000, 0.000), dist=1.710m
2026-01-26 16:22:21,571 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-26 16:22:21,574 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:21,595 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:21,595 - INFO - integration_test - Warmstart k=0: x0=1.7100000063506686 , y0=0.0 , psi0=0.0 , v0=2.8000000131150227 , spline0=1.80000000700642 , a0=0.0 , w0=0.0
2026-01-26 16:22:21,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:21,596 - INFO - integration_test - Dyn residual k=0: pred=[1.9900000076621709, 0.0, 0.0, 2.8000000131150227, 2.0800000083179224], ws=[2.060113276836486, 0.0, 0.0, 2.8000000131150227, 1.5733333351817604], res=[-0.07011326917431515, 0.0, 0.0, 0.0, 0.506666673136162], res_norm=5.115e-01
2026-01-26 16:22:21,597 - INFO - integration_test - Dyn residual k=1: pred=[2.3401132781479883, 0.0, 0.0, 2.8000000131150227, 1.8533333364932627], ws=[2.3933920488244147, 0.0, 0.0, 2.8000000131150227, 1.9329292954582327], res=[-0.05327877067642639, 0.0, 0.0, 0.0, -0.07959595896496996], res_norm=9.578e-02
2026-01-26 16:22:21,598 - INFO - integration_test - Dyn residual k=2: pred=[2.673392050135917, 0.0, 0.0, 2.8000000131150227, 2.212929296769735], ws=[2.8233216646888426, 0.0, 0.0, 2.8000000131150227, 2.6238383875958737], res=[-0.14992961455292564, 0.0, 0.0, 0.0, -0.4109090908261388], res_norm=4.374e-01
2026-01-26 16:22:21,612 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,662 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,680 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,722 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,738 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,779 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,795 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,833 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,850 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,894 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,911 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:21,955 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:21,974 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,019 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,036 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,077 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,093 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,134 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,151 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,192 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,209 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,254 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,424 - INFO - integration_test - Step 9: MPC solve successful
2026-01-26 16:22:22,429 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-26 16:22:22,429 - DEBUG - integration_test - Step 9: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:22,429 - INFO - integration_test - === Applying control at step 9 ===
2026-01-26 16:22:22,429 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019746066, 'w': 0.0}
2026-01-26 16:22:22,429 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:22,429 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:22,430 - INFO - integration_test - Step 9 completed in 0.873s
2026-01-26 16:22:22,445 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-26 16:22:22,445 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[2.00000001 0.         0.         3.00000002 2.10000001]
2026-01-26 16:22:22,446 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.041m, drift=0.059m)
2026-01-26 16:22:22,446 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-26 16:22:22,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:22,460 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(2.000, 0.000), path_start=(0.000, 0.000), dist=2.000m
2026-01-26 16:22:22,460 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-26 16:22:22,462 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:22,486 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:22,486 - INFO - integration_test - Warmstart k=0: x0=2.0000000077609013 , y0=0.0 , psi0=0.0 , v0=3.000000015089629 , spline0=2.1000000085153827 , a0=0.0 , w0=0.0
2026-01-26 16:22:22,486 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:22,487 - INFO - integration_test - Dyn residual k=0: pred=[2.3000000092698643, 0.0, 0.0, 3.000000015089629, 2.4000000100243457], ws=[2.44692577729235, 0.0, 0.0, 3.0, 2.466666669505128], res=[-0.14692576802248558, 0.0, 0.0, 1.5089629101794344e-08, -0.0666666594807821], res_norm=1.613e-01
2026-01-26 16:22:22,487 - INFO - integration_test - Dyn residual k=1: pred=[2.7469257772923497, 0.0, 0.0, 3.0, 2.7666666695051276], ws=[2.7867253261103677, 0.0, 0.0, 3.0, 2.333333335913752], res=[-0.03979954881801806, 0.0, 0.0, 0.0, 0.4333333335913756], res_norm=4.352e-01
2026-01-26 16:22:22,488 - INFO - integration_test - Dyn residual k=2: pred=[3.0867253261103675, 0.0, 0.0, 3.0, 2.6333333359137523], ws=[3.2250667440856104, 0.0, 0.0, 3.0, 2.9898989930815065], res=[-0.1383414179752429, 0.0, 0.0, 0.0, -0.35656565716775424], res_norm=3.825e-01
2026-01-26 16:22:22,503 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,555 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,574 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,614 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,632 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,674 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,691 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,735 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,754 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,795 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,811 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,853 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,869 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,912 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,930 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:22,968 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:22,985 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,024 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,039 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,077 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,092 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,129 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,253 - INFO - integration_test - Step 10: MPC solve successful
2026-01-26 16:22:23,258 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-26 16:22:23,258 - DEBUG - integration_test - Step 10: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:23,258 - INFO - integration_test - === Applying control at step 10 ===
2026-01-26 16:22:23,258 - INFO - integration_test -   Control dict from planner: {'a': 1.4367735724544185e-07, 'w': 0.0}
2026-01-26 16:22:23,258 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:23,258 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:23,259 - INFO - integration_test - Step 10 completed in 0.814s
2026-01-26 16:22:23,273 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-26 16:22:23,273 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.30000001 0.         0.         3.00000003 2.40000001]
2026-01-26 16:22:23,274 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.149m, drift=0.049m)
2026-01-26 16:22:23,274 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-26 16:22:23,274 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:23,286 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.300, 0.000), path_start=(0.000, 0.000), dist=2.300m
2026-01-26 16:22:23,286 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-26 16:22:23,289 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:23,311 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:23,311 - INFO - integration_test - Warmstart k=0: x0=2.300000009988251 , y0=0.0 , psi0=0.0 , v0=3.000000029457365 , spline0=2.400000011461119 , a0=0.0 , w0=0.0
2026-01-26 16:22:23,311 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:23,312 - INFO - integration_test - Dyn residual k=0: pred=[2.6000000129339873, 0.0, 0.0, 3.000000029457365, 2.7000000144068554], ws=[2.7688459341901037, 0.0, 0.0, 3.0, 2.3333333368063998], res=[-0.16884592125611642, 0.0, 0.0, 2.945736499171403e-08, 0.3666666776004557], res_norm=4.037e-01
2026-01-26 16:22:23,313 - INFO - integration_test - Dyn residual k=1: pred=[3.0688459341901035, 0.0, 0.0, 3.0, 2.6333333368064], ws=[3.1369224825329427, 0.0, 0.0, 3.0, 2.747474751410889], res=[-0.06807654834283916, 0.0, 0.0, 0.0, -0.11414141460448901], res_norm=1.329e-01
2026-01-26 16:22:23,314 - INFO - integration_test - Dyn residual k=2: pred=[3.4369224825329425, 0.0, 0.0, 3.0, 3.0474747514108893], ws=[3.4933738829564294, 0.0, 0.0, 3.0, 3.3535353581661087], res=[-0.05645140042348684, 0.0, 0.0, 0.0, -0.3060606067552194], res_norm=3.112e-01
2026-01-26 16:22:23,329 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,378 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,394 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,432 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,448 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,487 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,502 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,540 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,555 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,592 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,607 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,653 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,676 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,726 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,742 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,779 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,794 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,839 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,856 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,897 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:23,913 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:23,952 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,111 - INFO - integration_test - Step 11: MPC solve successful
2026-01-26 16:22:24,117 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-26 16:22:24,118 - DEBUG - integration_test - Step 11: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:24,118 - INFO - integration_test - === Applying control at step 11 ===
2026-01-26 16:22:24,118 - INFO - integration_test -   Control dict from planner: {'a': -2.8955745504203707e-09, 'w': 0.0}
2026-01-26 16:22:24,118 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:24,118 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:24,119 - INFO - integration_test - Step 11 completed in 0.847s
2026-01-26 16:22:24,141 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-26 16:22:24,141 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.60000001 0.         0.         3.00000003 2.70000001]
2026-01-26 16:22:24,142 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.151m, drift=0.251m)
2026-01-26 16:22:24,142 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-26 16:22:24,143 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:24,159 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.600, 0.000), path_start=(0.000, 0.000), dist=2.600m
2026-01-26 16:22:24,159 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-26 16:22:24,162 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:24,187 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:24,187 - INFO - integration_test - Warmstart k=0: x0=2.6000000129195096 , y0=0.0 , psi0=0.0 , v0=3.0000000291678077 , spline0=2.7000000143779 , a0=0.0 , w0=0.0
2026-01-26 16:22:24,187 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:24,188 - INFO - integration_test - Dyn residual k=0: pred=[2.9000000158362904, 0.0, 0.0, 3.0000000291678077, 3.000000017294681], ws=[3.0182660915418777, 0.0, 0.0, 3.0, 2.9090909143192363], res=[-0.11826607570558734, 0.0, 0.0, 2.9167807724661543e-08, 0.09090910297544452], res_norm=1.492e-01
2026-01-26 16:22:24,189 - INFO - integration_test - Dyn residual k=1: pred=[3.3182660915418776, 0.0, 0.0, 3.0, 3.209090914319236], ws=[3.4394619860259565, 0.0, 0.0, 3.0, 2.850505055442915], res=[-0.12119589448407897, 0.0, 0.0, 0.0, 0.3585858588763209], res_norm=3.785e-01
2026-01-26 16:22:24,189 - INFO - integration_test - Dyn residual k=2: pred=[3.7394619860259564, 0.0, 0.0, 3.0, 3.150505055442915], ws=[3.8644373429716428, 0.0, 0.0, 3.0, 3.7353535415984815], res=[-0.1249753569456864, 0.0, 0.0, 0.0, -0.5848484861555665], res_norm=5.981e-01
2026-01-26 16:22:24,204 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,259 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,276 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,320 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,339 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,381 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,398 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,441 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,458 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,501 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,517 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,556 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,571 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,610 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,625 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,663 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,678 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,716 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,731 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,773 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,790 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:24,829 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:24,955 - INFO - integration_test - Step 12: MPC solve successful
2026-01-26 16:22:24,959 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-26 16:22:24,959 - DEBUG - integration_test - Step 12: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:24,960 - INFO - integration_test - === Applying control at step 12 ===
2026-01-26 16:22:24,960 - INFO - integration_test -   Control dict from planner: {'a': 9.754046939485168e-09, 'w': 0.0}
2026-01-26 16:22:24,960 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:24,960 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:24,961 - INFO - integration_test - Step 12 completed in 0.819s
2026-01-26 16:22:24,974 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-26 16:22:24,975 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.90000002 0.         0.         3.00000003 3.00000002]
2026-01-26 16:22:24,975 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.043m, drift=0.143m)
2026-01-26 16:22:24,975 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-26 16:22:24,976 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:24,988 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.900, 0.000), path_start=(0.000, 0.000), dist=2.900m
2026-01-26 16:22:24,988 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-26 16:22:24,990 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:25,012 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:25,012 - INFO - integration_test - Warmstart k=0: x0=2.9000000158850607 , y0=0.0 , psi0=0.0 , v0=3.0000000301432124 , spline0=3.000000017392221 , a0=0.0 , w0=0.0
2026-01-26 16:22:25,012 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:25,013 - INFO - integration_test - Dyn residual k=0: pred=[3.200000018899382, 0.0, 0.0, 3.0000000301432124, 3.300000020406542], ws=[3.267686248993953, 0.0, 0.0, 3.0, 3.269696976548451], res=[-0.06768623009457109, 0.0, 0.0, 3.014321237060358e-08, 0.030303043858090906], res_norm=7.416e-02
2026-01-26 16:22:25,013 - INFO - integration_test - Dyn residual k=1: pred=[3.5676862489939527, 0.0, 0.0, 3.0, 3.5696969765484514], ws=[3.623634142765649, 0.0, 0.0, 3.0, 3.3878787947302684], res=[-0.0559478937716964, 0.0, 0.0, 0.0, 0.181818181818183], res_norm=1.902e-01
2026-01-26 16:22:25,014 - INFO - integration_test - Dyn residual k=2: pred=[3.923634142765649, 0.0, 0.0, 3.0, 3.6878787947302687], ws=[3.964439578792361, 0.0, 0.0, 3.0, 3.7757575831360928], res=[-0.04080543602671227, 0.0, 0.0, 0.0, -0.08787878840582408], res_norm=9.689e-02
2026-01-26 16:22:25,027 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,079 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,096 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,135 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,150 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,191 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,206 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,247 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,264 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,307 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,324 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,364 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,380 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,417 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,433 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,472 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,493 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,535 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,551 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,589 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,604 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,641 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,778 - INFO - integration_test - Step 13: MPC solve successful
2026-01-26 16:22:25,783 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-26 16:22:25,783 - DEBUG - integration_test - Step 13: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:25,783 - INFO - integration_test - === Applying control at step 13 ===
2026-01-26 16:22:25,783 - INFO - integration_test -   Control dict from planner: {'a': 3.710109012870027e-10, 'w': 0.0}
2026-01-26 16:22:25,783 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:25,783 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:25,784 - INFO - integration_test - Step 13 completed in 0.810s
2026-01-26 16:22:25,798 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-26 16:22:25,798 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[3.20000002 0.         0.         3.00000003 3.30000002]
2026-01-26 16:22:25,799 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.065m, drift=0.035m)
2026-01-26 16:22:25,799 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-26 16:22:25,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:25,813 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(3.200, 0.000), path_start=(0.000, 0.000), dist=3.200m
2026-01-26 16:22:25,813 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-26 16:22:25,815 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:25,838 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:25,839 - INFO - integration_test - Warmstart k=0: x0=3.200000018901237 , y0=0.0 , psi0=0.0 , v0=3.0000000301803134 , spline0=3.3000000204102524 , a0=0.0 , w0=0.0
2026-01-26 16:22:25,839 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:25,839 - INFO - integration_test - Dyn residual k=0: pred=[3.5000000219192686, 0.0, 0.0, 3.0000000301803134, 3.600000023428284], ws=[3.6354737534220347, 0.0, 0.0, 3.0, 3.3878787959191907], res=[-0.1354737315027661, 0.0, 0.0, 3.018031335955129e-08, 0.21212122750909312], res_norm=2.517e-01
2026-01-26 16:22:25,840 - INFO - integration_test - Dyn residual k=1: pred=[3.9354737534220345, 0.0, 0.0, 3.0, 3.6878787959191905], ws=[4.078867524015089, 0.0, 0.0, 3.0, 3.595959604206163], res=[-0.14339377059305436, 0.0, 0.0, 0.0, 0.09191919171302754], res_norm=1.703e-01
2026-01-26 16:22:25,841 - INFO - integration_test - Dyn residual k=2: pred=[4.378867524015089, 0.0, 0.0, 3.0, 3.895959604206163], ws=[4.414110794202577, 0.0, 0.0, 3.0, 3.9959596048246553], res=[-0.03524327018748785, 0.0, 0.0, 0.0, -0.10000000061849246], res_norm=1.060e-01
2026-01-26 16:22:25,854 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,900 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,916 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:25,955 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:25,970 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,008 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,024 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,066 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,082 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,123 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,139 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,178 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,193 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,231 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,247 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,286 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,301 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,343 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,359 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,398 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,414 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,457 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,592 - INFO - integration_test - Step 14: MPC solve successful
2026-01-26 16:22:26,597 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-26 16:22:26,597 - DEBUG - integration_test - Step 14: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:26,597 - INFO - integration_test - === Applying control at step 14 ===
2026-01-26 16:22:26,597 - INFO - integration_test -   Control dict from planner: {'a': -3.3121084191625305e-09, 'w': 0.0}
2026-01-26 16:22:26,597 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:26,597 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:26,598 - INFO - integration_test - Step 14 completed in 0.800s
2026-01-26 16:22:26,614 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-26 16:22:26,615 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.50000002 0.         0.         3.00000003 3.60000002]
2026-01-26 16:22:26,615 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.173m, drift=0.073m)
2026-01-26 16:22:26,615 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-26 16:22:26,616 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:26,629 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.500, 0.000), path_start=(0.000, 0.000), dist=3.500m
2026-01-26 16:22:26,629 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-26 16:22:26,632 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:26,656 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:26,657 - INFO - integration_test - Warmstart k=0: x0=3.500000021902708 , y0=0.0 , psi0=0.0 , v0=3.0000000298491023 , spline0=3.600000023395163 , a0=0.0 , w0=0.0
2026-01-26 16:22:26,657 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:26,658 - INFO - integration_test - Dyn residual k=0: pred=[3.8000000248876185, 0.0, 0.0, 3.0000000298491023, 3.900000026380073], ws=[3.957393910875208, 0.0, 0.0, 3.0, 3.775757585682796], res=[-0.1573938859875894, 0.0, 0.0, 2.984910230097171e-08, 0.12424244069727708], res_norm=2.005e-01
2026-01-26 16:22:26,658 - INFO - integration_test - Dyn residual k=1: pred=[4.257393910875208, 0.0, 0.0, 3.0, 4.075757585682796], ws=[4.310697333772182, 0.0, 0.0, 3.0, 4.181818192452346], res=[-0.053303422896973984, 0.0, 0.0, 0.0, -0.10606060676955043], res_norm=1.187e-01
2026-01-26 16:22:26,659 - INFO - integration_test - Dyn residual k=2: pred=[4.6106973337721815, 0.0, 0.0, 3.0, 4.481818192452346], ws=[4.766458749309278, 0.0, 0.0, 3.0, 4.606060617403715], res=[-0.15576141553709633, 0.0, 0.0, 0.0, -0.12424242495136895], res_norm=1.992e-01
2026-01-26 16:22:26,673 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,721 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,736 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,776 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,792 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,830 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,848 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,887 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,902 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,941 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:26,956 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:26,994 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,009 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,048 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,066 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,104 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,120 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,161 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,176 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,213 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,229 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,268 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,399 - INFO - integration_test - Step 15: MPC solve successful
2026-01-26 16:22:27,403 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-26 16:22:27,403 - DEBUG - integration_test - Step 15: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:27,403 - INFO - integration_test - === Applying control at step 15 ===
2026-01-26 16:22:27,404 - INFO - integration_test -   Control dict from planner: {'a': -2.1701091127355827e-10, 'w': 0.0}
2026-01-26 16:22:27,404 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:27,404 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:27,405 - INFO - integration_test - Step 15 completed in 0.790s
2026-01-26 16:22:27,417 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-26 16:22:27,418 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.80000002 0.         0.         3.00000003 3.90000003]
2026-01-26 16:22:27,418 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.127m, drift=0.227m)
2026-01-26 16:22:27,418 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-26 16:22:27,419 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:27,432 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.800, 0.000), path_start=(0.000, 0.000), dist=3.800m
2026-01-26 16:22:27,432 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-26 16:22:27,435 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:27,458 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:27,458 - INFO - integration_test - Warmstart k=0: x0=3.8000000248865335 , y0=0.0 , psi0=0.0 , v0=3.000000029827401 , spline0=3.900000026377903 , a0=0.0 , w0=0.0
2026-01-26 16:22:27,458 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:27,459 - INFO - integration_test - Dyn residual k=0: pred=[4.100000027869274, 0.0, 0.0, 3.000000029827401, 4.200000029360643], ws=[4.206814068314712, 0.0, 0.0, 3.0, 3.9030303142209286], res=[-0.10681404044543807, 0.0, 0.0, 2.9827400993553965e-08, 0.2969697151397144], res_norm=3.156e-01
2026-01-26 16:22:27,459 - INFO - integration_test - Dyn residual k=1: pred=[4.5068140683147115, 0.0, 0.0, 3.0, 4.203030314220928], ws=[4.613236837398286, 0.0, 0.0, 3.0, 4.318181830171774], res=[-0.10642276908357484, 0.0, 0.0, 0.0, -0.1151515159508456], res_norm=1.568e-01
2026-01-26 16:22:27,460 - INFO - integration_test - Dyn residual k=2: pred=[4.913236837398286, 0.0, 0.0, 3.0, 4.618181830171774], ws=[5.019154862577322, 0.0, 0.0, 3.0, 4.949494962817122], res=[-0.1059180251790357, 0.0, 0.0, 0.0, -0.3313131326453478], res_norm=3.478e-01
2026-01-26 16:22:27,475 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,523 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,539 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,577 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,592 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,630 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,646 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,688 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,746 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,761 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,799 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,815 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,857 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,873 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,912 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,928 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:27,968 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:27,984 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,023 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,041 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,083 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,221 - INFO - integration_test - Step 16: MPC solve successful
2026-01-26 16:22:28,225 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-26 16:22:28,226 - DEBUG - integration_test - Step 16: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:28,226 - INFO - integration_test - === Applying control at step 16 ===
2026-01-26 16:22:28,226 - INFO - integration_test -   Control dict from planner: {'a': 1.880496554374766e-11, 'w': 0.0}
2026-01-26 16:22:28,226 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:28,226 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:28,227 - INFO - integration_test - Step 16 completed in 0.809s
2026-01-26 16:22:28,243 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-26 16:22:28,244 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[4.10000003 0.         0.         3.00000003 4.20000003]
2026-01-26 16:22:28,244 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.018m, drift=0.118m)
2026-01-26 16:22:28,244 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-26 16:22:28,245 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:28,258 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(4.100, 0.000), path_start=(0.000, 0.000), dist=4.100m
2026-01-26 16:22:28,258 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-26 16:22:28,261 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:28,283 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:28,284 - INFO - integration_test - Warmstart k=0: x0=4.100000027869368 , y0=0.0 , psi0=0.0 , v0=3.0000000298292817 , spline0=4.200000029360831 , a0=0.0 , w0=0.0
2026-01-26 16:22:28,284 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:28,285 - INFO - integration_test - Dyn residual k=0: pred=[4.400000030852296, 0.0, 0.0, 3.0000000298292817, 4.50000003234376], ws=[4.456234225753692, 0.0, 0.0, 3.0, 4.22222223527148], res=[-0.05623419490139625, 0.0, 0.0, 2.982928171135768e-08, 0.2777777970722797], res_norm=2.834e-01
2026-01-26 16:22:28,285 - INFO - integration_test - Dyn residual k=1: pred=[4.756234225753692, 0.0, 0.0, 3.0, 4.52222223527148], ws=[4.797408994085696, 0.0, 0.0, 3.0, 4.355555568604814], res=[-0.041174768332004064, 0.0, 0.0, 0.0, 0.16666666666666607], res_norm=1.717e-01
2026-01-26 16:22:28,286 - INFO - integration_test - Dyn residual k=2: pred=[5.097408994085696, 0.0, 0.0, 3.0, 4.655555568604814], ws=[5.23752444523398, 0.0, 0.0, 3.0, 5.049494978855781], res=[-0.14011545114828383, 0.0, 0.0, 0.0, -0.393939410250967], res_norm=4.181e-01
2026-01-26 16:22:28,300 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,349 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,366 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,411 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,429 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,476 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,495 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,542 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,560 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,603 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,619 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,666 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,689 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,745 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,763 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,807 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,824 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,884 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,910 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:28,963 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:28,981 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,028 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,184 - INFO - integration_test - Step 17: MPC solve successful
2026-01-26 16:22:29,189 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-26 16:22:29,189 - DEBUG - integration_test - Step 17: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:29,189 - INFO - integration_test - === Applying control at step 17 ===
2026-01-26 16:22:29,189 - INFO - integration_test -   Control dict from planner: {'a': 8.66797853226863e-09, 'w': 0.0}
2026-01-26 16:22:29,189 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:29,189 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:29,190 - INFO - integration_test - Step 17 completed in 0.947s
2026-01-26 16:22:29,208 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-26 16:22:29,208 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[4.40000003 0.         0.         3.00000003 4.50000003]
2026-01-26 16:22:29,209 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.090m, drift=0.010m)
2026-01-26 16:22:29,209 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-26 16:22:29,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:29,223 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(4.400, 0.000), path_start=(0.000, 0.000), dist=4.400m
2026-01-26 16:22:29,223 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-26 16:22:29,226 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:29,251 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:29,251 - INFO - integration_test - Warmstart k=0: x0=4.400000030895636 , y0=0.0 , psi0=0.0 , v0=3.0000000306960795 , spline0=4.500000032430439 , a0=0.0 , w0=0.0
2026-01-26 16:22:29,251 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:29,252 - INFO - integration_test - Dyn residual k=0: pred=[4.700000033965244, 0.0, 0.0, 3.0000000306960795, 4.800000035500046], ws=[4.824021730229363, 0.0, 0.0, 3.0, 4.652525267921522], res=[-0.12402169626411919, 0.0, 0.0, 3.0696079456049574e-08, 0.14747476757852418], res_norm=1.927e-01
2026-01-26 16:22:29,253 - INFO - integration_test - Dyn residual k=1: pred=[5.124021730229363, 0.0, 0.0, 3.0, 4.952525267921522], ws=[5.252642375431097, 0.0, 0.0, 3.0, 5.049494981925388], res=[-0.12862064520173355, 0.0, 0.0, 0.0, -0.09696971400386634], res_norm=1.611e-01
2026-01-26 16:22:29,254 - INFO - integration_test - Dyn residual k=2: pred=[5.5526423754310965, 0.0, 0.0, 3.0, 5.349494981925388], ws=[5.687195660802557, 0.0, 0.0, 3.0, 5.450505082935488], res=[-0.13455328537146016, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.682e-01
2026-01-26 16:22:29,269 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,322 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,339 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,382 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,400 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,444 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,462 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,507 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,524 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,573 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,593 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,640 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,658 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,702 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,722 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,764 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,780 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,821 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,838 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,881 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:29,898 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:29,939 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,088 - INFO - integration_test - Step 18: MPC solve successful
2026-01-26 16:22:30,092 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-26 16:22:30,093 - DEBUG - integration_test - Step 18: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:30,093 - INFO - integration_test - === Applying control at step 18 ===
2026-01-26 16:22:30,093 - INFO - integration_test -   Control dict from planner: {'a': 6.471987641094236e-10, 'w': 0.0}
2026-01-26 16:22:30,093 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:30,093 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:30,094 - INFO - integration_test - Step 18 completed in 0.886s
2026-01-26 16:22:30,112 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-26 16:22:30,112 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.70000003 0.         0.         3.00000003 4.80000004]
2026-01-26 16:22:30,113 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.198m, drift=0.098m)
2026-01-26 16:22:30,113 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-26 16:22:30,113 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:30,127 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.700, 0.000), path_start=(0.000, 0.000), dist=4.700m
2026-01-26 16:22:30,127 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-26 16:22:30,130 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:30,155 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:30,155 - INFO - integration_test - Warmstart k=0: x0=4.70000003396848 , y0=0.0 , psi0=0.0 , v0=3.0000000307607992 , spline0=4.800000035506518 , a0=0.0 , w0=0.0
2026-01-26 16:22:30,155 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:30,156 - INFO - integration_test - Dyn residual k=0: pred=[5.000000037044559, 0.0, 0.0, 3.0000000307607992, 5.100000038582598], ws=[5.145941887802928, 0.0, 0.0, 3.0, 4.7464646819711644], res=[-0.1459418507583683, 0.0, 0.0, 3.076079924113628e-08, 0.35353535661143365], res_norm=3.825e-01
2026-01-26 16:22:30,157 - INFO - integration_test - Dyn residual k=1: pred=[5.4459418878029275, 0.0, 0.0, 3.0, 5.046464681971164], ws=[5.602839532310588, 0.0, 0.0, 3.0, 5.450505086011568], res=[-0.15689764450766042, 0.0, 0.0, 0.0, -0.404040404040404], res_norm=4.334e-01
2026-01-26 16:22:30,158 - INFO - integration_test - Dyn residual k=2: pred=[5.902839532310588, 0.0, 0.0, 3.0, 5.750505086011568], ws=[5.9555027998479195, 0.0, 0.0, 3.0, 5.5484848839913665], res=[-0.05266326753733175, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.088e-01
2026-01-26 16:22:30,173 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,225 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,242 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,285 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,304 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,349 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,370 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,417 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,438 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,484 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,504 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,552 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,570 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,617 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,637 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,687 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,708 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,759 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,776 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,821 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:30,841 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:30,883 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,053 - INFO - integration_test - Step 19: MPC solve successful
2026-01-26 16:22:31,058 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-26 16:22:31,058 - DEBUG - integration_test - Step 19: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:31,058 - INFO - integration_test - === Applying control at step 19 ===
2026-01-26 16:22:31,058 - INFO - integration_test -   Control dict from planner: {'a': -3.7355267480586055e-10, 'w': 0.0}
2026-01-26 16:22:31,058 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:31,058 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:31,059 - INFO - integration_test - Step 19 completed in 0.947s
2026-01-26 16:22:31,078 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-26 16:22:31,078 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[5.00000004 0.         0.         3.00000003 5.10000004]
2026-01-26 16:22:31,079 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.102m, drift=0.202m)
2026-01-26 16:22:31,079 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-26 16:22:31,079 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:31,094 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(5.000, 0.000), path_start=(0.000, 0.000), dist=5.000m
2026-01-26 16:22:31,094 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-26 16:22:31,097 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:31,120 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:31,121 - INFO - integration_test - Warmstart k=0: x0=5.000000037042692 , y0=0.0 , psi0=0.0 , v0=3.000000030723444 , spline0=5.100000038578862 , a0=0.0 , w0=0.0
2026-01-26 16:22:31,121 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:31,121 - INFO - integration_test - Dyn residual k=0: pred=[5.300000040115036, 0.0, 0.0, 3.000000030723444, 5.400000041651207], ws=[5.3953620453744655, 0.0, 0.0, 3.0, 5.349494988073812], res=[-0.09536200525942995, 0.0, 0.0, 3.0723443789071325e-08, 0.05050505357739521], res_norm=1.079e-01
2026-01-26 16:22:31,122 - INFO - integration_test - Dyn residual k=1: pred=[5.695362045374465, 0.0, 0.0, 3.0, 5.649494988073812], ws=[5.787011689183679, 0.0, 0.0, 3.0, 5.750505089083912], res=[-0.09164964380921337, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.364e-01
2026-01-26 16:22:31,123 - INFO - integration_test - Dyn residual k=2: pred=[6.0870116891836785, 0.0, 0.0, 3.0, 6.050505089083912], ws=[6.173872382758788, 0.0, 0.0, 3.0, 6.151515190094013], res=[-0.08686069357510906, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.332e-01
2026-01-26 16:22:31,137 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,186 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,203 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,245 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,263 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,303 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,322 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,370 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,386 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,424 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,440 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,480 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,495 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,536 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,551 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,589 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,604 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,651 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,669 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,712 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,729 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:31,770 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:31,918 - INFO - integration_test - Step 20: MPC solve successful
2026-01-26 16:22:31,922 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-26 16:22:31,922 - DEBUG - integration_test - Step 20: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:31,922 - INFO - integration_test - === Applying control at step 20 ===
2026-01-26 16:22:31,922 - INFO - integration_test -   Control dict from planner: {'a': 8.609930851587265e-09, 'w': 0.0}
2026-01-26 16:22:31,922 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:31,922 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:31,924 - INFO - integration_test - Step 20 completed in 0.845s
2026-01-26 16:22:31,937 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-26 16:22:31,937 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[5.30000004 0.         0.         3.00000003 5.40000004]
2026-01-26 16:22:31,938 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.006m, drift=0.094m)
2026-01-26 16:22:31,938 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-26 16:22:31,938 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:31,951 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(5.300, 0.000), path_start=(0.000, 0.000), dist=5.300m
2026-01-26 16:22:31,951 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-26 16:22:31,954 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:31,977 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:31,977 - INFO - integration_test - Warmstart k=0: x0=5.300000040158086 , y0=0.0 , psi0=0.0 , v0=3.000000031584437 , spline0=5.400000041737306 , a0=0.0 , w0=0.0
2026-01-26 16:22:31,977 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:31,978 - INFO - integration_test - Dyn residual k=0: pred=[5.60000004331653, 0.0, 0.0, 3.000000031584437, 5.70000004489575], ws=[5.644782203041935, 0.0, 0.0, 3.0, 5.447474789212054], res=[-0.044782159725405, 0.0, 0.0, 3.158443684370127e-08, 0.25252525568369677], res_norm=2.565e-01
2026-01-26 16:22:31,978 - INFO - integration_test - Dyn residual k=1: pred=[5.944782203041934, 0.0, 0.0, 3.0, 5.7474747892120535], ws=[6.089551193162102, 0.0, 0.0, 3.0, 5.848484890222155], res=[-0.1447689901201672, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.765e-01
2026-01-26 16:22:31,979 - INFO - integration_test - Dyn residual k=2: pred=[6.389551193162101, 0.0, 0.0, 3.0, 6.1484848902221545], ws=[6.426568496539565, 0.0, 0.0, 3.0, 6.249494991232256], res=[-0.03701730337746323, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.076e-01
2026-01-26 16:22:31,993 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,042 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,058 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,097 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,113 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,153 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,169 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,208 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,224 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,264 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,280 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,319 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,337 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,375 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,390 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,429 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,444 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,483 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,499 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,542 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,558 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,595 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,720 - INFO - integration_test - Step 21: MPC solve successful
2026-01-26 16:22:32,724 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-26 16:22:32,724 - DEBUG - integration_test - Step 21: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:32,724 - INFO - integration_test - === Applying control at step 21 ===
2026-01-26 16:22:32,724 - INFO - integration_test -   Control dict from planner: {'a': 7.731358417484308e-09, 'w': 0.0}
2026-01-26 16:22:32,724 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:32,724 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:32,725 - INFO - integration_test - Step 21 completed in 0.788s
2026-01-26 16:22:32,738 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-26 16:22:32,739 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[5.60000004 0.         0.         3.00000003 5.70000004]
2026-01-26 16:22:32,740 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.014m)
2026-01-26 16:22:32,740 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-26 16:22:32,740 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:32,753 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(5.600, 0.000), path_start=(0.000, 0.000), dist=5.600m
2026-01-26 16:22:32,753 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-26 16:22:32,755 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:32,776 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:32,776 - INFO - integration_test - Warmstart k=0: x0=5.600000043355186 , y0=0.0 , psi0=0.0 , v0=3.0000000323575726 , spline0=5.700000044973064 , a0=0.0 , w0=0.0
2026-01-26 16:22:32,776 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:32,777 - INFO - integration_test - Dyn residual k=0: pred=[5.900000046590943, 0.0, 0.0, 3.0000000323575726, 6.000000048208821], ws=[5.966702360825847, 0.0, 0.0, 3.0, 5.5454545904276085], res=[-0.06670231423490414, 0.0, 0.0, 3.2357572621322106e-08, 0.45454545778121247], res_norm=4.594e-01
2026-01-26 16:22:32,778 - INFO - integration_test - Dyn residual k=1: pred=[6.266702360825847, 0.0, 0.0, 3.0, 5.845454590427608], ws=[6.321381003424226, 0.0, 0.0, 3.0, 5.9464646914377095], res=[-0.05467864259837896, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.149e-01
2026-01-26 16:22:32,779 - INFO - integration_test - Dyn residual k=2: pred=[6.621381003424226, 0.0, 0.0, 3.0, 6.246464691437709], ws=[6.778916452376134, 0.0, 0.0, 3.0, 6.650505095478113], res=[-0.15753544895190785, 0.0, 0.0, 0.0, -0.404040404040404], res_norm=4.337e-01
2026-01-26 16:22:32,792 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,838 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,854 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,892 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,907 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,945 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:32,959 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:32,997 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,012 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,056 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,078 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,134 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,150 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,194 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,209 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,248 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,263 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,300 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,315 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,353 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,367 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,406 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,543 - INFO - integration_test - Step 22: MPC solve successful
2026-01-26 16:22:33,548 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-26 16:22:33,548 - DEBUG - integration_test - Step 22: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:33,548 - INFO - integration_test - === Applying control at step 22 ===
2026-01-26 16:22:33,548 - INFO - integration_test -   Control dict from planner: {'a': -7.384692260329095e-09, 'w': 0.0}
2026-01-26 16:22:33,548 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:33,548 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:33,549 - INFO - integration_test - Step 22 completed in 0.810s
2026-01-26 16:22:33,564 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-26 16:22:33,565 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.90000005 0.         0.         3.00000003 6.00000005]
2026-01-26 16:22:33,565 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.186m, drift=0.286m)
2026-01-26 16:22:33,565 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-26 16:22:33,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:33,579 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.900, 0.000), path_start=(0.000, 0.000), dist=5.900m
2026-01-26 16:22:33,579 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-26 16:22:33,581 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:33,605 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:33,605 - INFO - integration_test - Warmstart k=0: x0=5.90000004655402 , y0=0.0 , psi0=0.0 , v0=3.0000000316191033 , spline0=6.000000048134974 , a0=0.0 , w0=0.0
2026-01-26 16:22:33,605 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:33,606 - INFO - integration_test - Dyn residual k=0: pred=[6.20000004971593, 0.0, 0.0, 3.0000000316191033, 6.300000051296885], ws=[6.334489865491362, 0.0, 0.0, 3.0, 5.94646469459962], res=[-0.1344898157754315, 0.0, 0.0, 3.1619103335600585e-08, 0.35353535669726455], res_norm=3.783e-01
2026-01-26 16:22:33,606 - INFO - integration_test - Dyn residual k=1: pred=[6.6344898654913615, 0.0, 0.0, 3.0, 6.24646469459962], ws=[6.776614384981758, 0.0, 0.0, 3.0, 6.650505098640024], res=[-0.1421245194903964, 0.0, 0.0, 0.0, -0.404040404040404], res_norm=4.283e-01
2026-01-26 16:22:33,607 - INFO - integration_test - Dyn residual k=2: pred=[7.076614384981758, 0.0, 0.0, 3.0, 6.950505098640024], ws=[7.228587668185594, 0.0, 0.0, 3.0, 7.051515199650125], res=[-0.1519732832038363, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.825e-01
2026-01-26 16:22:33,621 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,670 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,686 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,726 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,743 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,781 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,798 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,840 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,858 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,902 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,920 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:33,962 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:33,980 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,022 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,039 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,082 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,097 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,139 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,155 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,194 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,210 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,249 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,391 - INFO - integration_test - Step 23: MPC solve successful
2026-01-26 16:22:34,395 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-26 16:22:34,396 - DEBUG - integration_test - Step 23: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:34,396 - INFO - integration_test - === Applying control at step 23 ===
2026-01-26 16:22:34,396 - INFO - integration_test -   Control dict from planner: {'a': -5.4979604695964435e-09, 'w': 0.0}
2026-01-26 16:22:34,396 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:34,396 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:34,397 - INFO - integration_test - Step 23 completed in 0.833s
2026-01-26 16:22:34,413 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-26 16:22:34,413 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[6.20000005 0.         0.         3.00000003 6.30000005]
2026-01-26 16:22:34,414 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.078m, drift=0.178m)
2026-01-26 16:22:34,414 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-26 16:22:34,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:34,428 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(6.200, 0.000), path_start=(0.000, 0.000), dist=6.200m
2026-01-26 16:22:34,429 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-26 16:22:34,431 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:34,455 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:34,455 - INFO - integration_test - Warmstart k=0: x0=6.20000004968844 , y0=0.0 , psi0=0.0 , v0=3.000000031069307 , spline0=6.300000051241905 , a0=0.0 , w0=0.0
2026-01-26 16:22:34,455 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:34,455 - INFO - integration_test - Dyn residual k=0: pred=[6.500000052795371, 0.0, 0.0, 3.000000031069307, 6.600000054348835], ws=[6.58391002313102, 0.0, 0.0, 3.0, 6.549495000736854], res=[-0.0839099703356494, 0.0, 0.0, 3.10693071270407e-08, 0.05050505361198088], res_norm=9.794e-02
2026-01-26 16:22:34,456 - INFO - integration_test - Dyn residual k=1: pred=[6.88391002313102, 0.0, 0.0, 3.0, 6.849495000736854], ws=[6.960786541933173, 0.0, 0.0, 3.0, 6.950505101746955], res=[-0.07687651880215274, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.269e-01
2026-01-26 16:22:34,457 - INFO - integration_test - Dyn residual k=2: pred=[7.2607865419331725, 0.0, 0.0, 3.0, 7.250505101746954], ws=[7.328589904249174, 0.0, 0.0, 3.0, 6.84646469770655], res=[-0.0678033623160017, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.097e-01
2026-01-26 16:22:34,470 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,519 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,535 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,575 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,591 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,630 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,646 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,686 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,702 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,741 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,759 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,796 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,812 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,852 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,867 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,907 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,922 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:34,961 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:34,977 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,015 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,031 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,071 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,198 - INFO - integration_test - Step 24: MPC solve successful
2026-01-26 16:22:35,202 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-26 16:22:35,202 - DEBUG - integration_test - Step 24: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:35,203 - INFO - integration_test - === Applying control at step 24 ===
2026-01-26 16:22:35,203 - INFO - integration_test -   Control dict from planner: {'a': 4.1892600213617284e-08, 'w': 0.0}
2026-01-26 16:22:35,203 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:35,203 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:35,204 - INFO - integration_test - Step 24 completed in 0.791s
2026-01-26 16:22:35,217 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-26 16:22:35,218 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[6.50000005 0.         0.         3.00000004 6.60000005]
2026-01-26 16:22:35,218 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.031m, drift=0.069m)
2026-01-26 16:22:35,218 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-26 16:22:35,219 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:35,232 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(6.500, 0.000), path_start=(0.000, 0.000), dist=6.500m
2026-01-26 16:22:35,232 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-26 16:22:35,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:35,257 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:35,257 - INFO - integration_test - Warmstart k=0: x0=6.500000053004834 , y0=0.0 , psi0=0.0 , v0=3.000000035258567 , spline0=6.6000000547677615 , a0=0.0 , w0=0.0
2026-01-26 16:22:35,257 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:35,258 - INFO - integration_test - Dyn residual k=0: pred=[6.800000056530691, 0.0, 0.0, 3.000000035258567, 6.900000058293618], ws=[6.833330181224969, 0.0, 0.0, 3.0, 6.647474802242509], res=[-0.03333012469427832, 0.0, 0.0, 3.5258567177010036e-08, 0.25252525605110954], res_norm=2.547e-01
2026-01-26 16:22:35,259 - INFO - integration_test - Dyn residual k=1: pred=[7.133330181224969, 0.0, 0.0, 3.0, 6.947474802242509], ws=[7.2633260466289435, 0.0, 0.0, 3.0, 6.846464701232407], res=[-0.12999586540397434, 0.0, 0.0, 0.0, 0.10101010101010122], res_norm=1.646e-01
2026-01-26 16:22:35,260 - INFO - integration_test - Dyn residual k=2: pred=[7.563326046628943, 0.0, 0.0, 3.0, 7.146464701232407], ws=[7.699653366061295, 0.0, 0.0, 3.0, 7.247474802242508], res=[-0.13632731943235132, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.697e-01
2026-01-26 16:22:35,273 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,321 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,336 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,375 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,391 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,429 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,446 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,491 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,508 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,549 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,565 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,605 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,620 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,661 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,676 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,715 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,729 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,768 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,783 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,821 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:35,836 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:35,879 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,025 - INFO - integration_test - Step 25: MPC solve successful
2026-01-26 16:22:36,030 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-26 16:22:36,030 - DEBUG - integration_test - Step 25: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:36,030 - INFO - integration_test - === Applying control at step 25 ===
2026-01-26 16:22:36,030 - INFO - integration_test -   Control dict from planner: {'a': -2.2785582922479253e-08, 'w': 0.0}
2026-01-26 16:22:36,030 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:36,030 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:36,031 - INFO - integration_test - Step 25 completed in 0.814s
2026-01-26 16:22:36,050 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-26 16:22:36,050 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.80000006 0.         0.         3.00000003 6.90000006]
2026-01-26 16:22:36,051 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.139m, drift=0.039m)
2026-01-26 16:22:36,051 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-26 16:22:36,051 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:36,067 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.800, 0.000), path_start=(0.000, 0.000), dist=6.800m
2026-01-26 16:22:36,067 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-26 16:22:36,070 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:36,095 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:36,095 - INFO - integration_test - Warmstart k=0: x0=6.8000000564167635 , y0=0.0 , psi0=0.0 , v0=3.000000032980009 , spline0=6.900000058065762 , a0=0.0 , w0=0.0
2026-01-26 16:22:36,095 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:36,096 - INFO - integration_test - Dyn residual k=0: pred=[7.100000059714764, 0.0, 0.0, 3.000000032980009, 7.200000061363763], ws=[7.15525033920361, 0.0, 0.0, 3.0, 7.048484906550611], res=[-0.05525027948884542, 0.0, 0.0, 3.2980008946026373e-08, 0.15151515481315236], res_norm=1.613e-01
2026-01-26 16:22:36,097 - INFO - integration_test - Dyn residual k=1: pred=[7.45525033920361, 0.0, 0.0, 3.0, 7.348484906550611], ws=[7.613523203998639, 0.0, 0.0, 3.0, 7.449495007560712], res=[-0.15827286479502956, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.878e-01
2026-01-26 16:22:36,098 - INFO - integration_test - Dyn residual k=2: pred=[7.913523203998639, 0.0, 0.0, 3.0, 7.749495007560712], ws=[7.967960505706676, 0.0, 0.0, 3.0, 7.850505108570812], res=[-0.05443730170803729, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.147e-01
2026-01-26 16:22:36,113 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,164 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,179 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,220 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,237 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,280 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,297 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,337 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,355 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,397 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,413 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,455 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,472 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,516 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,533 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,573 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,588 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,632 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,650 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,691 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,707 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:36,748 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:36,882 - INFO - integration_test - Step 26: MPC solve successful
2026-01-26 16:22:36,887 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-26 16:22:36,887 - DEBUG - integration_test - Step 26: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:36,887 - INFO - integration_test - === Applying control at step 26 ===
2026-01-26 16:22:36,887 - INFO - integration_test -   Control dict from planner: {'a': -1.126574465332894e-08, 'w': 0.0}
2026-01-26 16:22:36,887 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:36,887 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:36,888 - INFO - integration_test - Step 26 completed in 0.838s
2026-01-26 16:22:36,902 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-26 16:22:36,903 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[7.10000006 0.         0.         3.00000003 7.20000006]
2026-01-26 16:22:36,903 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.161m, drift=0.261m)
2026-01-26 16:22:36,903 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-26 16:22:36,904 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:36,917 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(7.100, 0.000), path_start=(0.000, 0.000), dist=7.100m
2026-01-26 16:22:36,917 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-26 16:22:36,919 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:36,942 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:36,942 - INFO - integration_test - Warmstart k=0: x0=7.100000059658436 , y0=0.0 , psi0=0.0 , v0=3.0000000318534346 , spline0=7.200000061251106 , a0=0.0 , w0=0.0
2026-01-26 16:22:36,942 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:36,943 - INFO - integration_test - Dyn residual k=0: pred=[7.400000062843779, 0.0, 0.0, 3.0000000318534346, 7.500000064436449], ws=[7.5230378439166605, 0.0, 0.0, 3.0, 7.449495010746055], res=[-0.1230377810728811, 0.0, 0.0, 3.185343455669454e-08, 0.05050505369039371], res_norm=1.330e-01
2026-01-26 16:22:36,943 - INFO - integration_test - Dyn residual k=1: pred=[7.82303784391666, 0.0, 0.0, 3.0, 7.749495010746055], ws=[7.950389238670995, 0.0, 0.0, 3.0, 7.34545460670565], res=[-0.127351394754335, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.236e-01
2026-01-26 16:22:36,944 - INFO - integration_test - Dyn residual k=2: pred=[8.250389238670996, 0.0, 0.0, 3.0, 7.64545460670565], ws=[8.383305190965313, 0.0, 0.0, 3.0, 8.251515212766257], res=[-0.13291595229431685, 0.0, 0.0, 0.0, -0.6060606060606073], res_norm=6.205e-01
2026-01-26 16:22:36,957 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,003 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,019 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,062 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,078 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,117 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,132 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,172 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,187 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,225 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,240 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,280 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,296 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,334 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,349 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,388 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,403 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,441 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,459 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,500 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,516 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,554 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,684 - INFO - integration_test - Step 27: MPC solve successful
2026-01-26 16:22:37,688 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-26 16:22:37,689 - DEBUG - integration_test - Step 27: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:37,689 - INFO - integration_test - === Applying control at step 27 ===
2026-01-26 16:22:37,689 - INFO - integration_test -   Control dict from planner: {'a': -4.2274536227706554e-09, 'w': 0.0}
2026-01-26 16:22:37,689 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:37,689 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:37,690 - INFO - integration_test - Step 27 completed in 0.787s
2026-01-26 16:22:37,703 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-26 16:22:37,704 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[7.40000006 0.         0.         3.00000003 7.50000006]
2026-01-26 16:22:37,704 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.053m, drift=0.153m)
2026-01-26 16:22:37,704 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-26 16:22:37,705 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:37,718 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(7.400, 0.000), path_start=(0.000, 0.000), dist=7.400m
2026-01-26 16:22:37,718 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-26 16:22:37,720 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:37,744 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:37,744 - INFO - integration_test - Warmstart k=0: x0=7.4000000628226426 , y0=0.0 , psi0=0.0 , v0=3.000000031430689 , spline0=7.500000064394174 , a0=0.0 , w0=0.0
2026-01-26 16:22:37,744 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:37,745 - INFO - integration_test - Dyn residual k=0: pred=[7.700000065965711, 0.0, 0.0, 3.000000031430689, 7.800000067537243], ws=[7.772458001605052, 0.0, 0.0, 3.0, 7.547474811868922], res=[-0.07245793563934111, 0.0, 0.0, 3.143068916244829e-08, 0.2525252556683215], res_norm=2.627e-01
2026-01-26 16:22:37,746 - INFO - integration_test - Dyn residual k=1: pred=[8.072458001605053, 0.0, 0.0, 3.0, 7.8474748118689215], ws=[8.134561395695586, 0.0, 0.0, 3.0, 7.64545460984872], res=[-0.062103394090533115, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.114e-01
2026-01-26 16:22:37,747 - INFO - integration_test - Dyn residual k=2: pred=[8.434561395695587, 0.0, 0.0, 3.0, 7.94545460984872], ws=[8.4833074271336, 0.0, 0.0, 3.0, 8.046464710858821], res=[-0.048746031438012594, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.122e-01
2026-01-26 16:22:37,761 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,809 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,825 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,864 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,880 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,919 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,935 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:37,974 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:37,992 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,032 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,048 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,089 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,105 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,145 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,161 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,202 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,218 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,258 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,274 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,318 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,336 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,381 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,550 - INFO - integration_test - Step 28: MPC solve successful
2026-01-26 16:22:38,555 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-26 16:22:38,555 - DEBUG - integration_test - Step 28: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:38,555 - INFO - integration_test - === Applying control at step 28 ===
2026-01-26 16:22:38,555 - INFO - integration_test -   Control dict from planner: {'a': 2.3734948252645805e-09, 'w': 0.0}
2026-01-26 16:22:38,555 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:38,555 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:38,557 - INFO - integration_test - Step 28 completed in 0.854s
2026-01-26 16:22:38,572 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-26 16:22:38,573 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[7.70000007 0.         0.         3.00000003 7.80000007]
2026-01-26 16:22:38,574 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.055m, drift=0.045m)
2026-01-26 16:22:38,574 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-26 16:22:38,574 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:38,588 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(7.700, 0.000), path_start=(0.000, 0.000), dist=7.700m
2026-01-26 16:22:38,588 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-26 16:22:38,590 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:38,613 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:38,613 - INFO - integration_test - Warmstart k=0: x0=7.700000065977579 , y0=0.0 , psi0=0.0 , v0=3.000000031668039 , spline0=7.800000067560978 , a0=0.0 , w0=0.0
2026-01-26 16:22:38,613 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:38,614 - INFO - integration_test - Dyn residual k=0: pred=[8.000000069144383, 0.0, 0.0, 3.000000031668039, 8.100000070727782], ws=[8.140245506244693, 0.0, 0.0, 3.0, 7.645454613015524], res=[-0.1402454371003099, 0.0, 0.0, 3.166803885790159e-08, 0.45454545771225874], res_norm=4.757e-01
2026-01-26 16:22:38,615 - INFO - integration_test - Dyn residual k=1: pred=[8.440245506244693, 0.0, 0.0, 3.0, 7.9454546130155235], ws=[8.471427430311719, 0.0, 0.0, 3.0, 8.046464714025625], res=[-0.03118192406702569, 0.0, 0.0, 0.0, -0.10101010101010122], res_norm=1.057e-01
2026-01-26 16:22:38,616 - INFO - integration_test - Dyn residual k=2: pred=[8.77142743031172, 0.0, 0.0, 3.0, 8.346464714025625], ws=[8.898652112358183, 0.0, 0.0, 3.0, 8.447474815035728], res=[-0.12722468204646376, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.624e-01
2026-01-26 16:22:38,630 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,678 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,732 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,748 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,786 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,801 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,840 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,857 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,897 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,913 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:38,953 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:38,969 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,007 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,022 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,061 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,076 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,117 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,133 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,172 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,188 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,228 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,371 - INFO - integration_test - Step 29: MPC solve successful
2026-01-26 16:22:39,376 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-26 16:22:39,376 - DEBUG - integration_test - Step 29: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:39,376 - INFO - integration_test - === Applying control at step 29 ===
2026-01-26 16:22:39,376 - INFO - integration_test -   Control dict from planner: {'a': -5.712761582944829e-09, 'w': 0.0}
2026-01-26 16:22:39,376 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:39,376 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:39,377 - INFO - integration_test - Step 29 completed in 0.804s
2026-01-26 16:22:39,393 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-26 16:22:39,394 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[8.00000007 0.         0.         3.00000003 8.10000007]
2026-01-26 16:22:39,395 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.163m, drift=0.063m)
2026-01-26 16:22:39,395 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-26 16:22:39,395 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:39,409 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(8.000, 0.000), path_start=(0.000, 0.000), dist=8.000m
2026-01-26 16:22:39,409 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-26 16:22:39,411 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:39,433 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:39,433 - INFO - integration_test - Warmstart k=0: x0=8.000000069115819 , y0=0.0 , psi0=0.0 , v0=3.0000000310967625 , spline0=8.100000070670655 , a0=0.0 , w0=0.0
2026-01-26 16:22:39,433 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:39,434 - INFO - integration_test - Dyn residual k=0: pred=[8.300000072225496, 0.0, 0.0, 3.0000000310967625, 8.400000073780332], ws=[8.46216566388911, 0.0, 0.0, 3.0, 8.0464647171353], res=[-0.162165591663614, 0.0, 0.0, 3.109676249835047e-08, 0.3535353566450308], res_norm=3.890e-01
2026-01-26 16:22:39,435 - INFO - integration_test - Dyn residual k=1: pred=[8.76216566388911, 0.0, 0.0, 3.0, 8.346464717135301], ws=[8.821624587269103, 0.0, 0.0, 3.0, 8.447474818145404], res=[-0.05945892337999226, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.172e-01
2026-01-26 16:22:39,436 - INFO - integration_test - Dyn residual k=2: pred=[9.121624587269103, 0.0, 0.0, 3.0, 8.747474818145404], ws=[9.285326598429293, 0.0, 0.0, 3.0, 8.848484919155506], res=[-0.1637020111601899, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.924e-01
2026-01-26 16:22:39,451 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,503 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,525 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,573 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,590 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,630 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,646 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,686 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,703 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,744 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,762 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,815 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,835 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,879 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,896 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:39,938 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:39,955 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,002 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,018 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,059 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,076 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,117 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,269 - INFO - integration_test - Step 30: MPC solve successful
2026-01-26 16:22:40,273 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-26 16:22:40,273 - DEBUG - integration_test - Step 30: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:40,273 - INFO - integration_test - === Applying control at step 30 ===
2026-01-26 16:22:40,273 - INFO - integration_test -   Control dict from planner: {'a': 8.031720264511706e-10, 'w': 0.0}
2026-01-26 16:22:40,273 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:40,274 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:40,275 - INFO - integration_test - Step 30 completed in 0.881s
2026-01-26 16:22:40,292 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-26 16:22:40,293 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[8.30000007 0.         0.         3.00000003 8.40000007]
2026-01-26 16:22:40,293 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.137m, drift=0.237m)
2026-01-26 16:22:40,293 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-26 16:22:40,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:40,308 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(8.300, 0.000), path_start=(0.000, 0.000), dist=8.300m
2026-01-26 16:22:40,308 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-26 16:22:40,310 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:40,333 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:40,333 - INFO - integration_test - Warmstart k=0: x0=8.30000007222951 , y0=0.0 , psi0=0.0 , v0=3.0000000311770796 , spline0=8.400000073788362 , a0=0.0 , w0=0.0
2026-01-26 16:22:40,333 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:40,334 - INFO - integration_test - Dyn residual k=0: pred=[8.600000075347218, 0.0, 0.0, 3.0000000311770796, 8.70000007690607], ws=[8.711585821523236, 0.0, 0.0, 3.0, 8.144444518232808], res=[-0.11158574617601857, 0.0, 0.0, 3.1177079584665535e-08, 0.5555555586732623], res_norm=5.667e-01
2026-01-26 16:22:40,334 - INFO - integration_test - Dyn residual k=1: pred=[9.011585821523237, 0.0, 0.0, 3.0, 8.444444518232809], ws=[9.12416409117337, 0.0, 0.0, 3.0, 8.545454619242909], res=[-0.11257826965013251, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.513e-01
2026-01-26 16:22:40,335 - INFO - integration_test - Dyn residual k=2: pred=[9.42416409117337, 0.0, 0.0, 3.0, 8.84545461924291], ws=[9.538022712083265, 0.0, 0.0, 3.0, 9.451515225303517], res=[-0.11385862090989463, 0.0, 0.0, 0.0, -0.6060606060606073], res_norm=6.167e-01
2026-01-26 16:22:40,349 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,400 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,416 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,455 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,474 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,516 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,533 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,574 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,590 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,629 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,645 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,686 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,702 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,741 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,757 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,798 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,814 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,856 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,876 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,917 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:40,933 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:40,974 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,122 - INFO - integration_test - Step 31: MPC solve successful
2026-01-26 16:22:41,126 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-26 16:22:41,126 - DEBUG - integration_test - Step 31: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:41,126 - INFO - integration_test - === Applying control at step 31 ===
2026-01-26 16:22:41,127 - INFO - integration_test -   Control dict from planner: {'a': 8.98827158038968e-09, 'w': 0.0}
2026-01-26 16:22:41,127 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:41,127 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:41,128 - INFO - integration_test - Step 31 completed in 0.835s
2026-01-26 16:22:41,144 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-26 16:22:41,145 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[8.60000008 0.         0.         3.00000003 8.70000008]
2026-01-26 16:22:41,146 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.029m, drift=0.129m)
2026-01-26 16:22:41,146 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-26 16:22:41,146 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:41,159 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(8.600, 0.000), path_start=(0.000, 0.000), dist=8.600m
2026-01-26 16:22:41,159 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-26 16:22:41,162 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:41,188 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:41,189 - INFO - integration_test - Warmstart k=0: x0=8.60000007539216 , y0=0.0 , psi0=0.0 , v0=3.000000032075907 , spline0=8.700000076995954 , a0=0.0 , w0=0.0
2026-01-26 16:22:41,189 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:41,190 - INFO - integration_test - Dyn residual k=0: pred=[8.900000078599751, 0.0, 0.0, 3.000000032075907, 9.000000080203545], ws=[8.961005979261556, 0.0, 0.0, 3.0, 8.747474824470702], res=[-0.061005900661804446, 0.0, 0.0, 3.2075906819528655e-08, 0.25252525573284323], res_norm=2.598e-01
2026-01-26 16:22:41,191 - INFO - integration_test - Dyn residual k=1: pred=[9.261005979261556, 0.0, 0.0, 3.0, 9.047474824470703], ws=[9.3083362483143, 0.0, 0.0, 3.0, 8.8454546224505], res=[-0.04733026905274329, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.075e-01
2026-01-26 16:22:41,192 - INFO - integration_test - Dyn residual k=2: pred=[9.6083362483143, 0.0, 0.0, 3.0, 9.145454622450501], ws=[9.75639229539234, 0.0, 0.0, 3.0, 9.549495026490906], res=[-0.14805604707803965, 0.0, 0.0, 0.0, -0.40404040404040487], res_norm=4.303e-01
2026-01-26 16:22:41,207 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,259 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,277 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,319 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,335 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,375 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,392 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,432 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,448 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,490 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,507 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,554 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,571 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,615 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,632 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,678 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,696 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,737 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,753 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,794 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:41,810 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:41,851 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,005 - INFO - integration_test - Step 32: MPC solve successful
2026-01-26 16:22:42,009 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-26 16:22:42,010 - DEBUG - integration_test - Step 32: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:42,010 - INFO - integration_test - === Applying control at step 32 ===
2026-01-26 16:22:42,010 - INFO - integration_test -   Control dict from planner: {'a': -9.96607180501565e-09, 'w': 0.0}
2026-01-26 16:22:42,010 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:42,010 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:42,011 - INFO - integration_test - Step 32 completed in 0.866s
2026-01-26 16:22:42,027 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-26 16:22:42,028 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[8.90000008 0.         0.         3.00000003 9.00000008]
2026-01-26 16:22:42,028 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.080m, drift=0.020m)
2026-01-26 16:22:42,028 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-26 16:22:42,029 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:42,042 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(8.900, 0.000), path_start=(0.000, 0.000), dist=8.900m
2026-01-26 16:22:42,043 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-26 16:22:42,045 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:42,070 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:42,070 - INFO - integration_test - Warmstart k=0: x0=8.90000007854992 , y0=0.0 , psi0=0.0 , v0=3.0000000310792996 , spline0=9.000000080103884 , a0=0.0 , w0=0.0
2026-01-26 16:22:42,070 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:42,071 - INFO - integration_test - Dyn residual k=0: pred=[9.200000081657851, 0.0, 0.0, 3.0000000310792996, 9.300000083211815], ws=[9.328793483856591, 0.0, 0.0, 3.0, 9.148484928588733], res=[-0.12879340219874003, 0.0, 0.0, 3.107929957835154e-08, 0.15151515462308218], res_norm=1.989e-01
2026-01-26 16:22:42,072 - INFO - integration_test - Dyn residual k=1: pred=[9.628793483856592, 0.0, 0.0, 3.0, 9.448484928588734], ws=[9.763569629763422, 0.0, 0.0, 3.0, 9.549495029598836], res=[-0.13477614590683018, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.684e-01
2026-01-26 16:22:42,072 - INFO - integration_test - Dyn residual k=2: pred=[10.063569629763423, 0.0, 0.0, 3.0, 9.849495029598836], ws=[10.206063511044457, 0.0, 0.0, 3.0, 9.950505130608937], res=[-0.1424938812810339, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.747e-01
2026-01-26 16:22:42,087 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,138 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,154 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,196 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,213 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,255 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,272 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,314 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,330 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,370 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,387 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,428 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,444 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,486 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,502 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,542 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,558 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,598 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,614 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,658 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,676 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:42,724 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:42,894 - INFO - integration_test - Step 33: MPC solve successful
2026-01-26 16:22:42,899 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-26 16:22:42,900 - DEBUG - integration_test - Step 33: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:42,900 - INFO - integration_test - === Applying control at step 33 ===
2026-01-26 16:22:42,900 - INFO - integration_test -   Control dict from planner: {'a': -2.987995546477264e-09, 'w': 0.0}
2026-01-26 16:22:42,900 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:42,900 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:42,902 - INFO - integration_test - Step 33 completed in 0.875s
2026-01-26 16:22:42,926 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-26 16:22:42,928 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[9.20000008 0.         0.         3.00000003 9.30000008]
2026-01-26 16:22:42,928 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.188m, drift=0.088m)
2026-01-26 16:22:42,929 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-26 16:22:42,929 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:42,946 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(9.200, 0.000), path_start=(0.000, 0.000), dist=9.200m
2026-01-26 16:22:42,946 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-26 16:22:42,951 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:42,980 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:42,980 - INFO - integration_test - Warmstart k=0: x0=9.20000008164291 , y0=0.0 , psi0=0.0 , v0=3.0000000307805 , spline0=9.300000083181935 , a0=0.0 , w0=0.0
2026-01-26 16:22:42,980 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:42,981 - INFO - integration_test - Dyn residual k=0: pred=[9.500000084720961, 0.0, 0.0, 3.0000000307805, 9.600000086259985], ws=[9.650713641445362, 0.0, 0.0, 3.0, 9.246464729646583], res=[-0.15071355672440134, 0.0, 0.0, 3.078049992666365e-08, 0.35353535661340274], res_norm=3.843e-01
2026-01-26 16:22:42,982 - INFO - integration_test - Dyn residual k=1: pred=[9.950713641445363, 0.0, 0.0, 3.0, 9.546464729646583], ws=[10.113766786651748, 0.0, 0.0, 3.0, 9.950505133686987], res=[-0.16305314520638525, 0.0, 0.0, 0.0, -0.4040404040404031], res_norm=4.357e-01
2026-01-26 16:22:42,983 - INFO - integration_test - Dyn residual k=2: pred=[10.413766786651749, 0.0, 0.0, 3.0, 10.250505133686987], ws=[10.474370650090437, 0.0, 0.0, 3.0, 10.048484931666785], res=[-0.060603863438688066, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.109e-01
2026-01-26 16:22:43,000 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,048 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,066 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,106 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,126 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,169 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,188 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,233 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,253 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,296 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,313 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,357 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,375 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,416 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,432 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,477 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,497 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,539 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,557 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,600 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,617 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:43,661 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:43,817 - INFO - integration_test - Step 34: MPC solve successful
2026-01-26 16:22:43,824 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-26 16:22:43,824 - DEBUG - integration_test - Step 34: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:43,824 - INFO - integration_test - === Applying control at step 34 ===
2026-01-26 16:22:43,824 - INFO - integration_test -   Control dict from planner: {'a': 2.412240204481912e-09, 'w': 0.0}
2026-01-26 16:22:43,824 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:43,824 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:43,826 - INFO - integration_test - Step 34 completed in 0.898s
2026-01-26 16:22:43,855 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-26 16:22:43,860 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[9.50000008 0.         0.         3.00000003 9.60000009]
2026-01-26 16:22:43,861 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.112m, drift=0.212m)
2026-01-26 16:22:43,861 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-26 16:22:43,861 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:43,883 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(9.500, 0.000), path_start=(0.000, 0.000), dist=9.500m
2026-01-26 16:22:43,884 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-26 16:22:43,887 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:43,919 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:43,919 - INFO - integration_test - Warmstart k=0: x0=9.500000084733022 , y0=0.0 , psi0=0.0 , v0=3.000000031021724 , spline0=9.600000086284107 , a0=0.0 , w0=0.0
2026-01-26 16:22:43,919 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:43,920 - INFO - integration_test - Dyn residual k=0: pred=[9.800000087835194, 0.0, 0.0, 3.000000031021724, 9.900000089386278], ws=[9.900133799051241, 0.0, 0.0, 3.0, 9.344444530728552], res=[-0.10013371121604742, 0.0, 0.0, 3.102172385638369e-08, 0.5555555586577263], res_norm=5.645e-01
2026-01-26 16:22:43,922 - INFO - integration_test - Dyn residual k=1: pred=[10.200133799051242, 0.0, 0.0, 3.0, 9.644444530728553], ws=[10.297938943582967, 0.0, 0.0, 3.0, 10.250505136789158], res=[-0.09780514453172451, 0.0, 0.0, 0.0, -0.6060606060606055], res_norm=6.139e-01
2026-01-26 16:22:43,924 - INFO - integration_test - Dyn residual k=2: pred=[10.597938943582967, 0.0, 0.0, 3.0, 10.550505136789159], ws=[10.692740233090117, 0.0, 0.0, 3.0, 10.65151523779926], res=[-0.09480128950714928, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.385e-01
2026-01-26 16:22:43,944 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,007 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,027 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,075 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,095 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,139 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,157 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,198 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,215 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,258 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,276 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,317 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,335 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,376 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,394 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,432 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,449 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,491 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,507 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,552 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,571 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,620 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,767 - INFO - integration_test - Step 35: MPC solve successful
2026-01-26 16:22:44,771 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-26 16:22:44,771 - DEBUG - integration_test - Step 35: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:44,771 - INFO - integration_test - === Applying control at step 35 ===
2026-01-26 16:22:44,772 - INFO - integration_test -   Control dict from planner: {'a': -5.26921469023013e-09, 'w': 0.0}
2026-01-26 16:22:44,772 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:44,772 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:44,773 - INFO - integration_test - Step 35 completed in 0.913s
2026-01-26 16:22:44,789 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-26 16:22:44,791 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[9.80000009 0.         0.         3.00000003 9.90000009]
2026-01-26 16:22:44,791 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.004m, drift=0.104m)
2026-01-26 16:22:44,791 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-26 16:22:44,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:44,806 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(9.800, 0.000), path_start=(0.000, 0.000), dist=9.800m
2026-01-26 16:22:44,806 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-26 16:22:44,809 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:44,834 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:44,834 - INFO - integration_test - Warmstart k=0: x0=9.800000087808849 , y0=0.0 , psi0=0.0 , v0=3.0000000304948022 , spline0=9.900000089333586 , a0=0.0 , w0=0.0
2026-01-26 16:22:44,834 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:44,836 - INFO - integration_test - Dyn residual k=0: pred=[10.100000090858329, 0.0, 0.0, 3.0000000304948022, 10.200000092383066], ws=[10.149553956605807, 0.0, 0.0, 3.0, 9.947474836808334], res=[-0.049553865747478554, 0.0, 0.0, 3.049480223893397e-08, 0.2525252555747315], res_norm=2.573e-01
2026-01-26 16:22:44,836 - INFO - integration_test - Dyn residual k=1: pred=[10.449553956605808, 0.0, 0.0, 3.0, 10.247474836808335], ws=[10.482111100415109, 0.0, 0.0, 3.0, 10.045454634788133], res=[-0.03255714380930108, 0.0, 0.0, 0.0, 0.20202020202020243], res_norm=2.046e-01
2026-01-26 16:22:44,837 - INFO - integration_test - Dyn residual k=2: pred=[10.78211110041511, 0.0, 0.0, 3.0, 10.345454634788133], ws=[10.911109815929109, 0.0, 0.0, 3.0, 10.749495038828538], res=[-0.12899871551399933, 0.0, 0.0, 0.0, -0.40404040404040487], res_norm=4.241e-01
2026-01-26 16:22:44,851 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,900 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,917 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:44,957 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:44,973 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,014 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,030 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,074 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,091 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,134 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,151 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,194 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,213 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,257 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,275 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,318 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,336 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,378 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,396 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,438 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,455 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,497 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,636 - INFO - integration_test - Step 36: MPC solve successful
2026-01-26 16:22:45,641 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-26 16:22:45,641 - DEBUG - integration_test - Step 36: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:45,641 - INFO - integration_test - === Applying control at step 36 ===
2026-01-26 16:22:45,641 - INFO - integration_test -   Control dict from planner: {'a': 8.985354296177522e-10, 'w': 0.0}
2026-01-26 16:22:45,641 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:45,641 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:45,643 - INFO - integration_test - Step 36 completed in 0.852s
2026-01-26 16:22:45,658 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-26 16:22:45,660 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[10.10000009  0.          0.          3.00000003 10.20000009]
2026-01-26 16:22:45,660 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.104m, drift=0.004m)
2026-01-26 16:22:45,660 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-26 16:22:45,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:45,674 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(10.100, 0.000), path_start=(0.000, 0.000), dist=10.100m
2026-01-26 16:22:45,674 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.100m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:45,674 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-26 16:22:45,677 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:45,701 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:45,701 - INFO - integration_test - Warmstart k=0: x0=10.100000090862821 , y0=0.0 , psi0=0.0 , v0=3.0000000305846557 , spline0=10.200000092392052 , a0=0.0 , w0=0.0
2026-01-26 16:22:45,702 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:45,703 - INFO - integration_test - Dyn residual k=0: pred=[10.400000093921287, 0.0, 0.0, 3.0000000305846557, 10.500000095450519], ws=[10.47147411415267, 0.0, 0.0, 3.0, 10.045454637846598], res=[-0.07147402023138305, 0.0, 0.0, 3.0584655696941354e-08, 0.4545454576039205], res_norm=4.601e-01
2026-01-26 16:22:45,704 - INFO - integration_test - Dyn residual k=1: pred=[10.77147411415267, 0.0, 0.0, 3.0, 10.345454637846599], ws=[10.832308257257797, 0.0, 0.0, 3.0, 10.446464738856701], res=[-0.060834143105125804, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.179e-01
2026-01-26 16:22:45,704 - INFO - integration_test - Dyn residual k=2: pred=[11.132308257257797, 0.0, 0.0, 3.0, 10.746464738856702], ws=[11.29778430186341, 0.0, 0.0, 3.0, 11.150505142897105], res=[-0.16547604460561338, 0.0, 0.0, 0.0, -0.4040404040404031], res_norm=4.366e-01
2026-01-26 16:22:45,719 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,771 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,787 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,826 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,842 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,882 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,897 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,938 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:45,954 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:45,992 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,008 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,051 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,069 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,112 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,129 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,171 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,188 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,230 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,246 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,285 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,300 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,338 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,472 - INFO - integration_test - Step 37: MPC solve successful
2026-01-26 16:22:46,477 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-26 16:22:46,477 - DEBUG - integration_test - Step 37: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:46,477 - INFO - integration_test - === Applying control at step 37 ===
2026-01-26 16:22:46,477 - INFO - integration_test -   Control dict from planner: {'a': 1.607089038402569e-09, 'w': 0.0}
2026-01-26 16:22:46,477 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:46,477 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:46,479 - INFO - integration_test - Step 37 completed in 0.819s
2026-01-26 16:22:46,494 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-26 16:22:46,496 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[10.40000009  0.          0.          3.00000003 10.5000001 ]
2026-01-26 16:22:46,496 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.196m, drift=0.296m)
2026-01-26 16:22:46,496 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-26 16:22:46,497 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:46,512 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(10.400, 0.000), path_start=(0.000, 0.000), dist=10.400m
2026-01-26 16:22:46,512 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.400m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:46,512 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-26 16:22:46,515 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:46,540 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:46,541 - INFO - integration_test - Warmstart k=0: x0=10.400000093929322 , y0=0.0 , psi0=0.0 , v0=3.0000000307453645 , spline0=10.50000009546659 , a0=0.0 , w0=0.0
2026-01-26 16:22:46,541 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:46,541 - INFO - integration_test - Dyn residual k=0: pred=[10.700000097003858, 0.0, 0.0, 3.0000000307453645, 10.800000098541126], ws=[10.839261618659492, 0.0, 0.0, 3.0, 10.446464741931237], res=[-0.13926152165563366, 0.0, 0.0, 3.0745364476558734e-08, 0.3535353566098891], res_norm=3.800e-01
2026-01-26 16:22:46,542 - INFO - integration_test - Dyn residual k=1: pred=[11.139261618659493, 0.0, 0.0, 3.0, 10.746464741931238], ws=[11.287541638622635, 0.0, 0.0, 3.0, 11.15050514597164], res=[-0.148280019963142, 0.0, 0.0, 0.0, -0.4040404040404031], res_norm=4.304e-01
2026-01-26 16:22:46,543 - INFO - integration_test - Dyn residual k=2: pred=[11.587541638622636, 0.0, 0.0, 3.0, 11.450505145971642], ws=[11.747455517436315, 0.0, 0.0, 3.0, 11.551515246981744], res=[-0.15991387881367913, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.891e-01
2026-01-26 16:22:46,559 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,614 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,635 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,680 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,697 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,740 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,756 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,799 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,816 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,863 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,881 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,921 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,937 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:46,976 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:46,991 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,028 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,044 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,085 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,100 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,139 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,156 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,195 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,348 - INFO - integration_test - Step 38: MPC solve successful
2026-01-26 16:22:47,354 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-26 16:22:47,355 - DEBUG - integration_test - Step 38: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:47,355 - INFO - integration_test - === Applying control at step 38 ===
2026-01-26 16:22:47,355 - INFO - integration_test -   Control dict from planner: {'a': 4.6614561336148724e-09, 'w': 0.0}
2026-01-26 16:22:47,355 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:47,355 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:47,356 - INFO - integration_test - Step 38 completed in 0.860s
2026-01-26 16:22:47,371 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-26 16:22:47,372 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[10.7000001   0.          0.          3.00000003 10.8000001 ]
2026-01-26 16:22:47,372 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.088m, drift=0.188m)
2026-01-26 16:22:47,372 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-26 16:22:47,373 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:47,386 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(10.700, 0.000), path_start=(0.000, 0.000), dist=10.700m
2026-01-26 16:22:47,386 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.700m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:47,386 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-26 16:22:47,388 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:47,412 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:47,412 - INFO - integration_test - Warmstart k=0: x0=10.700000097027166 , y0=0.0 , psi0=0.0 , v0=3.0000000312115103 , spline0=10.80000009858774 , a0=0.0 , w0=0.0
2026-01-26 16:22:47,412 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:47,413 - INFO - integration_test - Dyn residual k=0: pred=[11.000000100148316, 0.0, 0.0, 3.0000000312115103, 11.10000010170889], ws=[11.088681776285604, 0.0, 0.0, 3.0, 11.04949504808269], res=[-0.08868167613728772, 0.0, 0.0, 3.121151026519442e-08, 0.050505053626199725], res_norm=1.021e-01
2026-01-26 16:22:47,414 - INFO - integration_test - Dyn residual k=1: pred=[11.388681776285605, 0.0, 0.0, 3.0, 11.34949504808269], ws=[11.471713795590214, 0.0, 0.0, 3.0, 11.450505149092791], res=[-0.0830320193046088, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.308e-01
2026-01-26 16:22:47,414 - INFO - integration_test - Dyn residual k=2: pred=[11.771713795590214, 0.0, 0.0, 3.0, 11.750505149092792], ws=[11.847457753554385, 0.0, 0.0, 3.0, 11.851515250102894], res=[-0.07574395796417122, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.263e-01
2026-01-26 16:22:47,428 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,481 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,499 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,540 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,557 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,597 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,614 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,655 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,673 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,716 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,733 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,773 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,789 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,831 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,848 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,896 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,915 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:47,960 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:47,977 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,017 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,034 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,082 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,255 - INFO - integration_test - Step 39: MPC solve successful
2026-01-26 16:22:48,260 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-26 16:22:48,260 - DEBUG - integration_test - Step 39: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:48,260 - INFO - integration_test - === Applying control at step 39 ===
2026-01-26 16:22:48,260 - INFO - integration_test -   Control dict from planner: {'a': 6.358027812543938e-09, 'w': 0.0}
2026-01-26 16:22:48,260 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:48,260 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:48,261 - INFO - integration_test - Step 39 completed in 0.890s
2026-01-26 16:22:48,279 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-26 16:22:48,283 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[11.0000001   0.          0.          3.00000003 11.1000001 ]
2026-01-26 16:22:48,283 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.020m, drift=0.080m)
2026-01-26 16:22:48,283 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-26 16:22:48,284 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:48,298 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(11.000, 0.000), path_start=(0.000, 0.000), dist=11.000m
2026-01-26 16:22:48,298 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=11.000m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:48,298 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-26 16:22:48,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:48,323 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:48,323 - INFO - integration_test - Warmstart k=0: x0=11.000000100180108 , y0=0.0 , psi0=0.0 , v0=3.0000000318473132 , spline0=11.100000101772471 , a0=0.0 , w0=0.0
2026-01-26 16:22:48,323 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:48,324 - INFO - integration_test - Dyn residual k=0: pred=[11.30000010336484, 0.0, 0.0, 3.0000000318473132, 11.400000104957202], ws=[11.338101933999283, 0.0, 0.0, 3.0, 11.147474849247217], res=[-0.038101830634444056, 0.0, 0.0, 3.1847313231025964e-08, 0.2525252557099851], res_norm=2.554e-01
2026-01-26 16:22:48,324 - INFO - integration_test - Dyn residual k=1: pred=[11.638101933999284, 0.0, 0.0, 3.0, 11.447474849247218], ws=[11.77425329962602, 0.0, 0.0, 3.0, 11.34646474823712], res=[-0.1361513656267359, 0.0, 0.0, 0.0, 0.10101010101009855], res_norm=1.695e-01
2026-01-26 16:22:48,325 - INFO - integration_test - Dyn residual k=2: pred=[12.07425329962602, 0.0, 0.0, 3.0, 11.64646474823712], ws=[12.218521214345731, 0.0, 0.0, 3.0, 11.747474849247219], res=[-0.1442679147197108, 0.0, 0.0, 0.0, -0.10101010101009855], res_norm=1.761e-01
2026-01-26 16:22:48,339 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,388 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,406 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,447 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,463 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,503 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,518 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,563 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,579 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,618 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,634 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,678 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,694 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,733 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,748 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,790 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,806 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,846 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,863 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,905 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:48,921 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:48,963 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,110 - INFO - integration_test - Step 40: MPC solve successful
2026-01-26 16:22:49,114 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-26 16:22:49,114 - DEBUG - integration_test - Step 40: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:49,114 - INFO - integration_test - === Applying control at step 40 ===
2026-01-26 16:22:49,114 - INFO - integration_test -   Control dict from planner: {'a': 2.0487080662411306e-08, 'w': 0.0}
2026-01-26 16:22:49,114 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:49,114 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:49,115 - INFO - integration_test - Step 40 completed in 0.833s
2026-01-26 16:22:49,129 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-26 16:22:49,130 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[11.3000001   0.          0.          3.00000003 11.40000011]
2026-01-26 16:22:49,130 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.129m, drift=0.029m)
2026-01-26 16:22:49,130 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-26 16:22:49,131 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:49,144 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(11.300, 0.000), path_start=(0.000, 0.000), dist=11.300m
2026-01-26 16:22:49,144 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.300m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:49,144 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-26 16:22:49,146 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:49,172 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:49,172 - INFO - integration_test - Warmstart k=0: x0=11.300000103467275 , y0=0.0 , psi0=0.0 , v0=3.000000033896021 , spline0=11.400000105162073 , a0=0.0 , w0=0.0
2026-01-26 16:22:49,172 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:49,173 - INFO - integration_test - Dyn residual k=0: pred=[11.600000106856877, 0.0, 0.0, 3.000000033896021, 11.700000108551675], ws=[11.660022091965773, 0.0, 0.0, 3.0, 11.548484953646923], res=[-0.06002198510889656, 0.0, 0.0, 3.389602110104306e-08, 0.15151515490475198], res_norm=1.630e-01
2026-01-26 16:22:49,174 - INFO - integration_test - Dyn residual k=1: pred=[11.960022091965774, 0.0, 0.0, 3.0, 11.848484953646924], ws=[12.124450457128834, 0.0, 0.0, 3.0, 11.949495054657024], res=[-0.1644283651630598, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.930e-01
2026-01-26 16:22:49,175 - INFO - integration_test - Dyn residual k=2: pred=[12.424450457128835, 0.0, 0.0, 3.0, 12.249495054657025], ws=[12.486828354311632, 0.0, 0.0, 3.0, 12.350505155667125], res=[-0.06237789718279707, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.187e-01
2026-01-26 16:22:49,189 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,237 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,252 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,291 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,307 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,345 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,360 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,401 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,417 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,457 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,473 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,513 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,532 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,573 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,589 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,632 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,648 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,688 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,704 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,741 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,756 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:49,794 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:49,935 - INFO - integration_test - Step 41: MPC solve successful
2026-01-26 16:22:49,939 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-26 16:22:49,939 - DEBUG - integration_test - Step 41: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:49,939 - INFO - integration_test - === Applying control at step 41 ===
2026-01-26 16:22:49,939 - INFO - integration_test -   Control dict from planner: {'a': -1.023698690393413e-07, 'w': 0.0}
2026-01-26 16:22:49,939 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:49,939 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:49,940 - INFO - integration_test - Step 41 completed in 0.811s
2026-01-26 16:22:49,955 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-26 16:22:49,956 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[11.60000011  0.          0.          3.00000002 11.70000011]
2026-01-26 16:22:49,957 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.171m, drift=0.271m)
2026-01-26 16:22:49,957 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-26 16:22:49,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:49,974 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(11.600, 0.000), path_start=(0.000, 0.000), dist=11.600m
2026-01-26 16:22:49,974 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.600m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:49,974 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-26 16:22:49,976 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:50,001 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:50,001 - INFO - integration_test - Warmstart k=0: x0=11.600000106345027 , y0=0.0 , psi0=0.0 , v0=3.0000000236590343 , spline0=11.700000107527977 , a0=0.0 , w0=0.0
2026-01-26 16:22:50,001 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:50,002 - INFO - integration_test - Dyn residual k=0: pred=[11.90000010871093, 0.0, 0.0, 3.0000000236590343, 12.00000010989388], ws=[12.02780959578481, 0.0, 0.0, 3.0, 11.646464753992625], res=[-0.12780948707387907, 0.0, 0.0, 2.3659034287248915e-08, 0.35353535590125595], res_norm=3.759e-01
2026-01-26 16:22:50,002 - INFO - integration_test - Dyn residual k=1: pred=[12.32780959578481, 0.0, 0.0, 3.0, 11.946464753992625], ws=[12.461316490223354, 0.0, 0.0, 3.0, 12.350505158033029], res=[-0.13350689443854336, 0.0, 0.0, 0.0, -0.4040404040404031], res_norm=4.255e-01
2026-01-26 16:22:50,003 - INFO - integration_test - Dyn residual k=2: pred=[12.761316490223354, 0.0, 0.0, 3.0, 12.65050515803303], ws=[12.902173037110298, 0.0, 0.0, 3.0, 12.751515259043131], res=[-0.14085654688694405, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.733e-01
2026-01-26 16:22:50,017 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,069 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,086 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,126 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,141 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,179 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,195 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,234 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,251 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,295 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,311 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,354 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,369 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,407 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,460 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,477 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,516 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,532 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,578 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,595 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,641 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,796 - INFO - integration_test - Step 42: MPC solve successful
2026-01-26 16:22:50,800 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-26 16:22:50,800 - DEBUG - integration_test - Step 42: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:50,800 - INFO - integration_test - === Applying control at step 42 ===
2026-01-26 16:22:50,800 - INFO - integration_test -   Control dict from planner: {'a': 5.923437422073241e-08, 'w': 0.0}
2026-01-26 16:22:50,800 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:50,800 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:50,801 - INFO - integration_test - Step 42 completed in 0.845s
2026-01-26 16:22:50,815 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-26 16:22:50,816 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[11.90000011  0.          0.          3.00000003 12.00000011]
2026-01-26 16:22:50,817 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.063m, drift=0.163m)
2026-01-26 16:22:50,817 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-26 16:22:50,817 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:50,830 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(11.900, 0.000), path_start=(0.000, 0.000), dist=11.900m
2026-01-26 16:22:50,830 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.900m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:50,830 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-26 16:22:50,833 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:50,856 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:50,856 - INFO - integration_test - Warmstart k=0: x0=11.900000109007102 , y0=0.0 , psi0=0.0 , v0=3.0000000295824716 , spline0=12.000000110486225 , a0=0.0 , w0=0.0
2026-01-26 16:22:50,856 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:50,857 - INFO - integration_test - Dyn residual k=0: pred=[12.20000011196535, 0.0, 0.0, 3.0000000295824716, 12.300000113444472], ws=[12.277229752986976, 0.0, 0.0, 3.0, 12.249495059981175], res=[-0.077229641021626, 0.0, 0.0, 2.958247158346694e-08, 0.050505053463297145], res_norm=9.228e-02
2026-01-26 16:22:50,858 - INFO - integration_test - Dyn residual k=1: pred=[12.577229752986977, 0.0, 0.0, 3.0, 12.549495059981176], ws=[12.645488646782237, 0.0, 0.0, 3.0, 12.145454655940771], res=[-0.06825889379526018, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.098e-01
2026-01-26 16:22:50,859 - INFO - integration_test - Dyn residual k=2: pred=[12.945488646782238, 0.0, 0.0, 3.0, 12.445454655940772], ws=[13.002175272839347, 0.0, 0.0, 3.0, 12.546464756950872], res=[-0.05668662605710928, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.158e-01
2026-01-26 16:22:50,873 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,921 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:50,975 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:50,994 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,034 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,051 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,096 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,113 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,157 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,174 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,216 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,232 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,272 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,287 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,327 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,342 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,381 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,396 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,438 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,454 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,494 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,627 - INFO - integration_test - Step 43: MPC solve successful
2026-01-26 16:22:51,632 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-26 16:22:51,632 - DEBUG - integration_test - Step 43: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:51,632 - INFO - integration_test - === Applying control at step 43 ===
2026-01-26 16:22:51,632 - INFO - integration_test -   Control dict from planner: {'a': 4.0310703129625506e-08, 'w': 0.0}
2026-01-26 16:22:51,632 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:51,632 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:51,633 - INFO - integration_test - Step 43 completed in 0.817s
2026-01-26 16:22:51,648 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-26 16:22:51,649 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[12.20000011  0.          0.          3.00000003 12.30000011]
2026-01-26 16:22:51,650 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.045m, drift=0.055m)
2026-01-26 16:22:51,650 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-26 16:22:51,650 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:51,664 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(12.200, 0.000), path_start=(0.000, 0.000), dist=12.200m
2026-01-26 16:22:51,664 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.200m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:51,664 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-26 16:22:51,667 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:51,693 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:51,693 - INFO - integration_test - Warmstart k=0: x0=12.200000112166903 , y0=0.0 , psi0=0.0 , v0=3.0000000336135417 , spline0=12.30000011384758 , a0=0.0 , w0=0.0
2026-01-26 16:22:51,693 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:51,694 - INFO - integration_test - Dyn residual k=0: pred=[12.500000115528257, 0.0, 0.0, 3.0000000336135417, 12.600000117208934], ws=[12.645017257783632, 0.0, 0.0, 3.0, 12.145454659302125], res=[-0.14501714225537476, 0.0, 0.0, 3.3613541727817164e-08, 0.4545454579068089], res_norm=4.771e-01
2026-01-26 16:22:51,695 - INFO - integration_test - Dyn residual k=1: pred=[12.945017257783633, 0.0, 0.0, 3.0, 12.445454659302126], ws=[12.98235468175166, 0.0, 0.0, 3.0, 12.546464760312228], res=[-0.03733742396802775, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.077e-01
2026-01-26 16:22:51,696 - INFO - integration_test - Dyn residual k=2: pred=[13.282354681751661, 0.0, 0.0, 3.0, 12.846464760312228], ws=[13.417519958670416, 0.0, 0.0, 3.0, 12.947474861322327], res=[-0.13516527691875524, 0.0, 0.0, 0.0, -0.10101010101009855], res_norm=1.687e-01
2026-01-26 16:22:51,709 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,758 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,774 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,812 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,828 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,872 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,889 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,929 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:51,945 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:51,985 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,000 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,042 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,059 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,099 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,115 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,156 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,172 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,210 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,226 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,265 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,281 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,323 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,457 - INFO - integration_test - Step 44: MPC solve successful
2026-01-26 16:22:52,464 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-26 16:22:52,464 - DEBUG - integration_test - Step 44: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:52,464 - INFO - integration_test - === Applying control at step 44 ===
2026-01-26 16:22:52,464 - INFO - integration_test -   Control dict from planner: {'a': -5.494555733684981e-09, 'w': 0.0}
2026-01-26 16:22:52,464 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:52,464 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:52,466 - INFO - integration_test - Step 44 completed in 0.817s
2026-01-26 16:22:52,482 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-26 16:22:52,483 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[12.50000012  0.          0.          3.00000003 12.60000012]
2026-01-26 16:22:52,483 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.153m, drift=0.053m)
2026-01-26 16:22:52,483 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-26 16:22:52,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:52,498 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(12.500, 0.000), path_start=(0.000, 0.000), dist=12.500m
2026-01-26 16:22:52,498 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.500m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:52,498 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-26 16:22:52,501 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:52,525 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:52,525 - INFO - integration_test - Warmstart k=0: x0=12.500000115500784 , y0=0.0 , psi0=0.0 , v0=3.000000033064086 , spline0=12.600000117153987 , a0=0.0 , w0=0.0
2026-01-26 16:22:52,525 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:52,526 - INFO - integration_test - Dyn residual k=0: pred=[12.800000118807192, 0.0, 0.0, 3.000000033064086, 12.900000120460396], ws=[12.966937415716036, 0.0, 0.0, 3.0, 12.546464763618633], res=[-0.16693729690884318, 0.0, 0.0, 3.3064086135681237e-08, 0.3535353568417623], res_norm=3.910e-01
2026-01-26 16:22:52,527 - INFO - integration_test - Dyn residual k=1: pred=[13.266937415716036, 0.0, 0.0, 3.0, 12.846464763618634], ws=[13.332551839116158, 0.0, 0.0, 3.0, 12.947474864628738], res=[-0.06561442340012213, 0.0, 0.0, 0.0, -0.10101010101010388], res_norm=1.205e-01
2026-01-26 16:22:52,528 - INFO - integration_test - Dyn residual k=2: pred=[13.632551839116159, 0.0, 0.0, 3.0, 13.247474864628739], ws=[13.685827098363541, 0.0, 0.0, 3.0, 13.55050516765904], res=[-0.05327525924738197, 0.0, 0.0, 0.0, -0.303030303030301], res_norm=3.077e-01
2026-01-26 16:22:52,542 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,591 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,607 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,646 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,662 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,704 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,720 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,759 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,775 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,815 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,830 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,874 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,891 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,931 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:52,949 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:52,989 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,005 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,044 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,062 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,102 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,119 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,158 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,321 - INFO - integration_test - Step 45: MPC solve successful
2026-01-26 16:22:53,326 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-26 16:22:53,326 - DEBUG - integration_test - Step 45: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:53,326 - INFO - integration_test - === Applying control at step 45 ===
2026-01-26 16:22:53,326 - INFO - integration_test -   Control dict from planner: {'a': -5.584335834665779e-07, 'w': 0.0}
2026-01-26 16:22:53,326 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:53,326 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:53,327 - INFO - integration_test - Step 45 completed in 0.844s
2026-01-26 16:22:53,339 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-26 16:22:53,340 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[12.80000012  0.          0.          2.99999998 12.90000011]
2026-01-26 16:22:53,341 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.147m, drift=0.247m)
2026-01-26 16:22:53,341 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-26 16:22:53,341 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:53,354 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(12.800, 0.000), path_start=(0.000, 0.000), dist=12.800m
2026-01-26 16:22:53,354 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.800m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:53,354 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-26 16:22:53,357 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:53,380 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:53,380 - INFO - integration_test - Warmstart k=0: x0=12.800000116015024 , y0=0.0 , psi0=0.0 , v0=2.9999999772207278 , spline0=12.900000114876061 , a0=0.0 , w0=0.0
2026-01-26 16:22:53,380 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:53,381 - INFO - integration_test - Dyn residual k=0: pred=[13.100000113737098, 0.0, 0.0, 2.9999999772207278, 13.200000112598135], ws=[13.216357564387286, 0.0, 0.0, 2.9999999772207278, 12.64444455704258], res=[-0.1163574506501881, 0.0, 0.0, 0.0, 0.5555555555555554], res_norm=5.676e-01
2026-01-26 16:22:53,382 - INFO - integration_test - Dyn residual k=1: pred=[13.51635756210936, 0.0, 0.0, 2.9999999772207278, 12.944444554764653], ws=[13.635091325848727, 0.0, 0.0, 2.9999999772207278, 13.045454655774753], res=[-0.1187337637393675, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.559e-01
2026-01-26 16:22:53,382 - INFO - integration_test - Dyn residual k=2: pred=[13.9350913235708, 0.0, 0.0, 2.9999999772207278, 13.345454653496827], ws=[14.056890531195208, 0.0, 0.0, 2.9999999772207278, 13.951515259557434], res=[-0.12179920762440766, 0.0, 0.0, 0.0, -0.6060606060606073], res_norm=6.182e-01
2026-01-26 16:22:53,396 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,442 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,458 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,499 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,515 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,554 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,571 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,614 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,630 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,669 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,685 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,726 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,742 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,780 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,796 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,835 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,850 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,889 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,905 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:53,944 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:53,959 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,002 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,170 - INFO - integration_test - Step 46: MPC solve successful
2026-01-26 16:22:54,174 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-26 16:22:54,175 - DEBUG - integration_test - Step 46: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:54,175 - INFO - integration_test - === Applying control at step 46 ===
2026-01-26 16:22:54,175 - INFO - integration_test -   Control dict from planner: {'a': 5.263626932997987e-07, 'w': 0.0}
2026-01-26 16:22:54,175 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:54,175 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:54,176 - INFO - integration_test - Step 46 completed in 0.836s
2026-01-26 16:22:54,190 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-26 16:22:54,191 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[13.10000012  0.          0.          3.00000003 13.20000012]
2026-01-26 16:22:54,192 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.039m, drift=0.139m)
2026-01-26 16:22:54,192 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-26 16:22:54,192 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:54,206 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(13.100, 0.000), path_start=(0.000, 0.000), dist=13.100m
2026-01-26 16:22:54,207 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=13.100m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:54,207 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-26 16:22:54,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:54,234 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:54,234 - INFO - integration_test - Warmstart k=0: x0=13.10000011636891 , y0=0.0 , psi0=0.0 , v0=3.000000029856997 , spline0=13.20000011786176 , a0=0.0 , w0=0.0
2026-01-26 16:22:54,234 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:54,235 - INFO - integration_test - Dyn residual k=0: pred=[13.40000011935461, 0.0, 0.0, 3.000000029856997, 13.50000012084746], ws=[13.465777722985871, 0.0, 0.0, 3.0, 13.247474865336507], res=[-0.06577760363126117, 0.0, 0.0, 2.985699687485521e-08, 0.2525252555109532], res_norm=2.610e-01
2026-01-26 16:22:54,236 - INFO - integration_test - Dyn residual k=1: pred=[13.765777722985872, 0.0, 0.0, 3.0, 13.547474865336508], ws=[13.819263488582973, 0.0, 0.0, 3.0, 13.345454663316307], res=[-0.05348576559710061, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.090e-01
2026-01-26 16:22:54,236 - INFO - integration_test - Dyn residual k=2: pred=[14.119263488582973, 0.0, 0.0, 3.0, 13.645454663316308], ws=[14.156892779264457, 0.0, 0.0, 3.0, 13.746464764326408], res=[-0.03762929068148324, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.078e-01
2026-01-26 16:22:54,250 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,297 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,315 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,359 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,374 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,413 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,429 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,472 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,488 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,527 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,543 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,589 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,605 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,645 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,664 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,704 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,723 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,761 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,777 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,818 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:54,834 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:54,873 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,045 - INFO - integration_test - Step 47: MPC solve successful
2026-01-26 16:22:55,049 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-26 16:22:55,049 - DEBUG - integration_test - Step 47: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:22:55,049 - INFO - integration_test - === Applying control at step 47 ===
2026-01-26 16:22:55,049 - INFO - integration_test -   Control dict from planner: {'a': -1.0093329538646235e-06, 'w': 0.0}
2026-01-26 16:22:55,049 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:22:55,049 - INFO - integration_test -   Planner output success: True
2026-01-26 16:22:55,050 - INFO - integration_test - Step 47 completed in 0.859s
2026-01-26 16:22:55,064 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-26 16:22:55,065 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[13.40000011  0.          0.          2.99999993 13.50000011]
2026-01-26 16:22:55,065 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.069m, drift=0.031m)
2026-01-26 16:22:55,065 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-26 16:22:55,066 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:55,079 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(13.400, 0.000), path_start=(0.000, 0.000), dist=13.400m
2026-01-26 16:22:55,079 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.400m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:22:55,079 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-26 16:22:55,082 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:22:55,109 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:22:55,109 - INFO - integration_test - Warmstart k=0: x0=13.400000114307945 , y0=0.0 , psi0=0.0 , v0=2.9999999289237014 , spline0=13.500000110754131 , a0=0.0 , w0=0.0
2026-01-26 16:22:55,109 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:22:55,110 - INFO - integration_test - Dyn residual k=0: pred=[13.700000107200315, 0.0, 0.0, 2.9999999289237014, 13.800000103646502], ws=[13.833565206804808, 0.0, 0.0, 2.9999999289237014, 13.648484952131351], res=[-0.1335650996044926, 0.0, 0.0, 0.0, 0.1515151515151505], res_norm=2.020e-01
2026-01-26 16:22:55,111 - INFO - integration_test - Dyn residual k=1: pred=[14.133565199697179, 0.0, 0.0, 2.9999999289237014, 13.948484945023722], ws=[14.274496829186985, 0.0, 0.0, 2.9999999289237014, 14.049495046033822], res=[-0.1409316294898062, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.734e-01
2026-01-26 16:22:55,112 - INFO - integration_test - Dyn residual k=2: pred=[14.574496822079356, 0.0, 0.0, 2.9999999289237014, 14.349495038926193], ws=[14.606563928182442, 0.0, 0.0, 2.9999999289237014, 14.147474836905992], res=[-0.03206710610308683, 0.0, 0.0, 0.0, 0.20202020202020066], res_norm=2.045e-01
2026-01-26 16:22:55,126 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,174 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,190 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,233 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,250 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,290 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,306 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,347 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,364 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,403 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,419 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,461 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,477 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,520 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,535 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,576 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,593 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,635 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,650 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,690 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:22:55,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:22:55,744 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,044 - WARNING - integration_test - Step 48: MPC solve failed
2026-01-26 16:23:03,044 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-26 16:23:03,049 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-26 16:23:03,049 - DEBUG - integration_test - Step 48: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:23:03,049 - INFO - integration_test - === Applying control at step 48 ===
2026-01-26 16:23:03,049 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.0}
2026-01-26 16:23:03,049 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:23:03,049 - INFO - integration_test -   Planner output success: False
2026-01-26 16:23:03,049 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.0}
2026-01-26 16:23:03,050 - INFO - integration_test - Step 48 completed in 7.986s
2026-01-26 16:23:03,063 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-26 16:23:03,065 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[13.69000011  0.          0.          2.79999993 13.7800001 ]
2026-01-26 16:23:03,065 - DEBUG - integration_test - Step 49: Using propagated spline 13.7800 (close to path, dist=0.188m, drift=0.098m)
2026-01-26 16:23:03,065 - DEBUG - integration_test -   Set spline state to 13.7800
2026-01-26 16:23:03,066 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:23:03,079 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(13.690, 0.000), path_start=(0.000, 0.000), dist=13.690m
2026-01-26 16:23:03,079 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.690m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:23:03,079 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-26 16:23:03,081 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:23:03,106 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:23:03,106 - INFO - integration_test - Warmstart k=0: x0=13.690000107200316 , y0=0.0 , psi0=0.0 , v0=2.799999928923701 , spline0=13.7800001036465 , a0=0.0 , w0=0.0
2026-01-26 16:23:03,106 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:23:03,107 - INFO - integration_test - Dyn residual k=0: pred=[13.970000100092685, 0.0, 0.0, 2.799999928923701, 14.06000009653887], ws=[14.107107849434694, 0.0, 0.0, 2.799999928923701, 13.706464743003517], res=[-0.1371077493420092, 0.0, 0.0, 0.0, 0.3535353535353529], res_norm=3.792e-01
2026-01-26 16:23:03,108 - INFO - integration_test - Dyn residual k=1: pred=[14.387107842327064, 0.0, 0.0, 2.799999928923701, 13.986464735895886], ws=[14.52680948997827, 0.0, 0.0, 2.799999928923701, 14.39050513993629], res=[-0.13970164765120607, 0.0, 0.0, 0.0, -0.4040404040404031], res_norm=4.275e-01
2026-01-26 16:23:03,108 - INFO - integration_test - Dyn residual k=2: pred=[14.806809482870639, 0.0, 0.0, 2.799999928923701, 14.670505132828659], ws=[14.949857259340707, 0.0, 0.0, 2.799999928923701, 14.569495031818558], res=[-0.14304777647006794, 0.0, 0.0, 0.0, 0.10101010101010033], res_norm=1.751e-01
2026-01-26 16:23:03,122 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,172 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,188 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,228 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,244 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,283 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,301 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,340 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,356 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,396 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,413 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,454 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,470 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,510 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,526 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,568 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,586 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,629 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,645 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,687 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:03,744 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:03,950 - INFO - integration_test - Step 49: MPC solve successful
2026-01-26 16:23:03,954 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.780)
2026-01-26 16:23:03,954 - DEBUG - integration_test - Step 49: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:23:03,954 - INFO - integration_test - === Applying control at step 49 ===
2026-01-26 16:23:03,955 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001999793, 'w': 0.0}
2026-01-26 16:23:03,955 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:23:03,955 - INFO - integration_test -   Planner output success: True
2026-01-26 16:23:03,956 - INFO - integration_test - Step 49 completed in 0.891s
2026-01-26 16:23:03,970 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-26 16:23:03,971 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[13.9800001   0.          0.          2.99999993 14.0800001 ]
2026-01-26 16:23:03,971 - DEBUG - integration_test - Step 50: Using propagated spline 14.0800 (close to path, dist=0.102m, drift=0.202m)
2026-01-26 16:23:03,971 - DEBUG - integration_test -   Set spline state to 14.0800
2026-01-26 16:23:03,971 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:23:03,984 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(13.980, 0.000), path_start=(0.000, 0.000), dist=13.980m
2026-01-26 16:23:03,984 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.980m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:23:03,984 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-26 16:23:03,986 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:23:04,012 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:23:04,012 - INFO - integration_test - Warmstart k=0: x0=13.980000100192676 , y0=0.0 , psi0=0.0 , v0=2.999999930923494 , spline0=14.08000009673885 , a0=0.0 , w0=0.0
2026-01-26 16:23:04,012 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:23:04,013 - INFO - integration_test - Dyn residual k=0: pred=[14.280000093285025, 0.0, 0.0, 2.999999930923494, 14.3800000898312], ws=[14.375552992548311, 0.0, 0.0, 2.999999930923494, 14.329495039326149], res=[-0.0955528992632857, 0.0, 0.0, 0.0, 0.050505050505050164], res_norm=1.081e-01
2026-01-26 16:23:04,014 - INFO - integration_test - Dyn residual k=1: pred=[14.67555298564066, 0.0, 0.0, 2.999999930923494, 14.629495032418498], ws=[14.767448876748304, 0.0, 0.0, 2.999999930923494, 14.730505133428599], res=[-0.09189589110764373, 0.0, 0.0, 0.0, -0.10101010101010033], res_norm=1.366e-01
2026-01-26 16:23:04,015 - INFO - integration_test - Dyn residual k=2: pred=[15.067448869840653, 0.0, 0.0, 2.999999930923494, 15.030505126520948], ws=[15.154627220427518, 0.0, 0.0, 2.999999930923494, 15.13151522753105], res=[-0.08717835058686418, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.334e-01
2026-01-26 16:23:04,028 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,077 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,094 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,135 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,152 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,191 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,207 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,248 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,264 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,304 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,320 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,362 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,377 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,417 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,432 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,471 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,486 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,526 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,541 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,581 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:04,597 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:04,635 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,261 - WARNING - integration_test - Step 50: MPC solve failed
2026-01-26 16:23:06,261 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-26 16:23:06,265 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.080)
2026-01-26 16:23:06,265 - DEBUG - integration_test - Step 50: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:23:06,265 - INFO - integration_test - === Applying control at step 50 ===
2026-01-26 16:23:06,265 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.0}
2026-01-26 16:23:06,265 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:23:06,265 - INFO - integration_test -   Planner output success: False
2026-01-26 16:23:06,265 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.0}
2026-01-26 16:23:06,267 - INFO - integration_test - Step 50 completed in 2.296s
2026-01-26 16:23:06,280 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-26 16:23:06,281 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[14.27000009  0.          0.          2.79999993 14.36000009]
2026-01-26 16:23:06,282 - DEBUG - integration_test - Step 51: Using propagated spline 14.3600 (close to path, dist=0.016m, drift=0.074m)
2026-01-26 16:23:06,282 - DEBUG - integration_test -   Set spline state to 14.3600
2026-01-26 16:23:06,282 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:23:06,296 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(14.270, 0.000), path_start=(0.000, 0.000), dist=14.270m
2026-01-26 16:23:06,296 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.270m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 16:23:06,296 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-26 16:23:06,298 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 16:23:06,321 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 16:23:06,322 - INFO - integration_test - Warmstart k=0: x0=14.270000093285025 , y0=0.0 , psi0=0.0 , v0=2.799999930923494 , spline0=14.3600000898312 , a0=0.0 , w0=0.0
2026-01-26 16:23:06,322 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 16:23:06,323 - INFO - integration_test - Dyn residual k=0: pred=[14.550000086377375, 0.0, 0.0, 2.799999930923494, 14.64000008292355], ws=[14.694962982410471, 0.0, 0.0, 2.799999930923494, 14.185454628378094], res=[-0.1449628960330962, 0.0, 0.0, 0.0, 0.45454545454545503], res_norm=4.771e-01
2026-01-26 16:23:06,323 - INFO - integration_test - Dyn residual k=1: pred=[14.974962975502821, 0.0, 0.0, 2.799999930923494, 14.465454621470444], ws=[15.006430415504743, 0.0, 0.0, 2.799999930923494, 14.566464722480546], res=[-0.03146744000192214, 0.0, 0.0, 0.0, -0.1010101010101021], res_norm=1.058e-01
2026-01-26 16:23:06,324 - INFO - integration_test - Dyn residual k=2: pred=[15.286430408597093, 0.0, 0.0, 2.799999930923494, 14.846464715572896], ws=[15.408223404196354, 0.0, 0.0, 2.799999930923494, 15.248484881991878], res=[-0.12179299559926093, 0.0, 0.0, 0.0, -0.402020166418982], res_norm=4.201e-01
2026-01-26 16:23:06,337 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,387 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,403 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,442 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,459 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,497 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,513 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,552 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,567 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,607 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,624 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,664 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,681 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,720 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,735 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,773 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,789 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,826 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,841 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,882 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:06,898 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 16:23:06,938 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 16:23:21,069 - WARNING - integration_test - Step 51: MPC solve failed
2026-01-26 16:23:21,069 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-26 16:23:21,073 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.360)
2026-01-26 16:23:21,073 - DEBUG - integration_test - Step 51: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 16:23:21,073 - INFO - integration_test - === Applying control at step 51 ===
2026-01-26 16:23:21,073 - INFO - integration_test -   Control dict from planner: {'a': -2.0, 'w': 0.0}
2026-01-26 16:23:21,073 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 16:23:21,073 - INFO - integration_test -   Planner output success: False
2026-01-26 16:23:21,073 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': -2.0, 'w': 0.0}
2026-01-26 16:23:21,075 - INFO - integration_test - Step 51 completed in 14.793s
2026-01-26 16:23:21,093 - WARNING - integration_test - Test timeout reached (60.0s) at step 52. Terminating test early.
2026-01-26 16:23:21,095 - INFO - integration_test - Saving test results...
2026-01-26 16:23:21,095 - INFO - integration_test - Saved 53 vehicle states to test_outputs/20260126_162213_contouring_contouring_contouring_unicycle/vehicle_states.csv
2026-01-26 16:23:21,095 - INFO - integration_test - Saved obstacle summary to test_outputs/20260126_162213_contouring_contouring_contouring_unicycle/obstacle_summary.csv
2026-01-26 16:23:21,095 - INFO - integration_test - Saved state history: 53 vehicle states, 0 obstacles
2026-01-26 16:23:21,095 - INFO - integration_test - Creating animation...
2026-01-26 16:23:21,135 - DEBUG - integration_test - Creating animation with 53 frames (range: 0 to 52)
2026-01-26 16:23:21,135 - DEBUG - integration_test - Frame 0: Drawing 2 contouring constraint halfspaces
2026-01-26 16:23:21,137 - DEBUG - integration_test - Frame 0: Drawing 2 contouring constraint halfspaces
2026-01-26 16:23:21,206 - DEBUG - integration_test - Frame 1: Drawing 2 contouring constraint halfspaces
2026-01-26 16:23:21,238 - DEBUG - integration_test - Frame 2: Drawing 2 contouring constraint halfspaces
2026-01-26 16:23:26,697 - INFO - integration_test - Saved animation with 53 frames at 10.00 fps to test_outputs/20260126_162213_contouring_contouring_contouring_unicycle/animation.gif (duration: 5.30s, size: 250338 bytes)
2026-01-26 16:23:26,731 - INFO - integration_test - Animation created successfully
2026-01-26 16:23:26,732 - INFO - integration_test - Test completed successfully
2026-01-26 16:23:26,733 - INFO - integration_test - Starting integration test: linearized_single_obstacle
2026-01-26 16:23:26,733 - INFO - integration_test - Output folder: test_outputs/20260126_162326_goal_linear_unicycle
