2026-01-26 17:54:02,110 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-26 17:54:02,110 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2026-01-26 17:54:02,110 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-26 17:54:02,110 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-26 17:54:02,110 - INFO - integration_test - Creating objective module: contouring
2026-01-26 17:54:02,115 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-26 17:54:02,115 - INFO - integration_test - Creating 1 constraint module(s): ['contouring']
2026-01-26 17:54:02,115 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-26 17:54:02,121 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-26 17:54:02,121 - INFO - integration_test - Created 1 constraint module(s)
2026-01-26 17:54:02,137 - INFO - integration_test - Setting solver on all modules...
2026-01-26 17:54:02,137 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-26 17:54:02,137 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-26 17:54:02,137 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-26 17:54:02,137 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-26 17:54:02,137 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-26 17:54:02,138 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-26 17:54:02,138 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-26 17:54:02,138 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-26 17:54:02,139 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-26 17:54:02,139 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-26 17:54:02,139 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-26 17:54:02,139 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-26 17:54:02,139 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-26 17:54:02,139 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-26 17:54:02,139 - INFO - integration_test - Added spline variable: 0.0000
2026-01-26 17:54:02,139 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-26 17:54:02,139 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-26 17:54:02,139 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-26 17:54:02,140 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-26 17:54:02,140 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-26 17:54:02,140 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:02,151 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-26 17:54:02,151 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-26 17:54:02,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:02,176 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:02,176 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-26 17:54:02,176 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:02,177 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.14533333333333337, 0.0, 0.0, 1.0, 0.051515151515151514], res=[-0.045333333333333364, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=6.638e-02
2026-01-26 17:54:02,178 - INFO - integration_test - Dyn residual k=1: pred=[0.24533333333333338, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.35655111111111115, 0.0, 0.0, 1.0, 0.10505050505050506], res=[-0.11121777777777778, 0.0, 0.0, 0.0, 0.04646464646464646], res_norm=1.205e-01
2026-01-26 17:54:02,179 - INFO - integration_test - Dyn residual k=2: pred=[0.45655111111111113, 0.0, 0.0, 1.0, 0.20505050505050507], ws=[0.5247454379440666, 0.0, 0.0, 1.0, 0.16060606060606059], res=[-0.06819432683295545, 0.0, 0.0, 0.0, 0.04444444444444448], res_norm=8.140e-02
2026-01-26 17:54:02,188 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,223 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,234 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,257 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,268 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,293 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,303 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,327 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,338 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,362 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,372 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,396 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,407 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,431 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,442 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,465 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,475 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,499 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,579 - INFO - integration_test - Step 0: MPC solve successful
2026-01-26 17:54:02,584 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-26 17:54:02,584 - DEBUG - integration_test - Step 0: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:02,584 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-26 17:54:02,584 - INFO - integration_test - === Applying control at step 0 ===
2026-01-26 17:54:02,584 - INFO - integration_test -   Control dict from planner: {'a': 1.9999997791210098, 'w': 0.0}
2026-01-26 17:54:02,584 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:02,584 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:02,585 - INFO - integration_test - Step 0 completed in 0.446s
2026-01-26 17:54:02,593 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-26 17:54:02,594 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.11       0.         0.         1.19999998 0.12      ]
2026-01-26 17:54:02,595 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-26 17:54:02,595 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-26 17:54:02,595 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:02,607 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.000), path_start=(0.000, 0.000), dist=0.110m
2026-01-26 17:54:02,607 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-26 17:54:02,610 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:02,629 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:02,629 - INFO - integration_test - Warmstart k=0: x0=0.10999999889560505 , y0=0.0 , psi0=0.0 , v0=1.1999999779121011 , spline0=0.11999999779121012 , a0=0.0 , w0=0.0
2026-01-26 17:54:02,629 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:02,630 - INFO - integration_test - Dyn residual k=0: pred=[0.22999999668681517, 0.0, 0.0, 1.1999999779121011, 0.23999999558242024], ws=[0.24808448326109078, 0.0, 0.0, 1.1999999779121011, 0.05292929288467091], res=[-0.01808448657427561, 0.0, 0.0, 0.0, 0.18707070269774934], res_norm=1.879e-01
2026-01-26 17:54:02,631 - INFO - integration_test - Dyn residual k=1: pred=[0.3680844810523009, 0.0, 0.0, 1.1999999779121011, 0.17292929067588103], ws=[0.4487672672055967, 0.0, 0.0, 1.1999999779121011, 0.3248484844468867], res=[-0.08068278615329577, 0.0, 0.0, 0.0, -0.15191919377100566], res_norm=1.720e-01
2026-01-26 17:54:02,632 - INFO - integration_test - Dyn residual k=2: pred=[0.5687672649968067, 0.0, 0.0, 1.1999999779121011, 0.4448484822380968], ws=[0.601650736334197, 0.0, 0.0, 1.1999999779121011, 0.3874747468500392], res=[-0.032883471337390224, 0.0, 0.0, 0.0, 0.05737373538805762], res_norm=6.613e-02
2026-01-26 17:54:02,641 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,672 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,682 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,706 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,716 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,739 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,748 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,771 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,782 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,807 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,817 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,840 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,850 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,874 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,885 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,911 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:02,924 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:02,951 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,082 - INFO - integration_test - Step 1: MPC solve successful
2026-01-26 17:54:03,089 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-26 17:54:03,089 - DEBUG - integration_test - Step 1: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:03,090 - INFO - integration_test - === Applying control at step 1 ===
2026-01-26 17:54:03,090 - INFO - integration_test -   Control dict from planner: {'a': 2.000000005663058, 'w': 0.0}
2026-01-26 17:54:03,090 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:03,090 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:03,091 - INFO - integration_test - Step 1 completed in 0.497s
2026-01-26 17:54:03,103 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-26 17:54:03,103 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.24       0.         0.         1.39999998 0.26      ]
2026-01-26 17:54:03,104 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.066m, drift=0.046m)
2026-01-26 17:54:03,104 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-26 17:54:03,104 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:03,120 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.240, 0.000), path_start=(0.000, 0.000), dist=0.240m
2026-01-26 17:54:03,120 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-26 17:54:03,122 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:03,147 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:03,148 - INFO - integration_test - Warmstart k=0: x0=0.23999999671513045 , y0=0.0 , psi0=0.0 , v0=1.399999978478407 , spline0=0.25999999563905085 , a0=0.0 , w0=0.0
2026-01-26 17:54:03,148 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:03,149 - INFO - integration_test - Dyn residual k=0: pred=[0.3799999945629712, 0.0, 0.0, 1.399999978478407, 0.3999999934868915], ws=[0.5260822571785623, 0.0, 0.0, 1.399999978478407, 0.16363636343899668], res=[-0.1460822626155911, 0.0, 0.0, 0.0, 0.23636363004789485], res_norm=2.779e-01
2026-01-26 17:54:03,150 - INFO - integration_test - Dyn residual k=1: pred=[0.666082255026403, 0.0, 0.0, 1.399999978478407, 0.30363636128683735], ws=[0.8030796321813348, 0.0, 0.0, 1.399999978478407, 0.671515150464816], res=[-0.13699737715493188, 0.0, 0.0, 0.0, -0.36787878917797867], res_norm=3.926e-01
2026-01-26 17:54:03,152 - INFO - integration_test - Dyn residual k=2: pred=[0.9430796300291755, 0.0, 0.0, 1.399999978478407, 0.8115151483126567], ws=[1.066873640314616, 0.0, 0.0, 1.399999978478407, 0.7458585844381156], res=[-0.12379401028544046, 0.0, 0.0, 0.0, 0.06565656387454111], res_norm=1.401e-01
2026-01-26 17:54:03,165 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,208 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,225 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,261 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,276 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,309 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,322 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,355 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,369 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,402 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,416 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,449 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,462 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,493 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,506 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,537 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,550 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,582 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,682 - INFO - integration_test - Step 2: MPC solve successful
2026-01-26 17:54:03,686 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-26 17:54:03,686 - DEBUG - integration_test - Step 2: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:03,686 - INFO - integration_test - === Applying control at step 2 ===
2026-01-26 17:54:03,686 - INFO - integration_test -   Control dict from planner: {'a': 1.999999964074933, 'w': 0.0}
2026-01-26 17:54:03,686 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:03,686 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:03,688 - INFO - integration_test - Step 2 completed in 0.585s
2026-01-26 17:54:03,696 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-26 17:54:03,696 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38999999 0.         0.         1.59999997 0.41999999]
2026-01-26 17:54:03,697 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.084m, drift=0.114m)
2026-01-26 17:54:03,697 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-26 17:54:03,697 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:03,708 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.390, 0.000), path_start=(0.000, 0.000), dist=0.390m
2026-01-26 17:54:03,708 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-26 17:54:03,710 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:03,729 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:03,729 - INFO - integration_test - Warmstart k=0: x0=0.3899999943833458 , y0=0.0 , psi0=0.0 , v0=1.5999999748859002 , spline0=0.4199999931276409 , a0=0.0 , w0=0.0
2026-01-26 17:54:03,730 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:03,730 - INFO - integration_test - Dyn residual k=0: pred=[0.5499999918719358, 0.0, 0.0, 1.5999999748859002, 0.579999990616231], ws=[0.5884422975425911, 0.0, 0.0, 1.5999999748859002, 0.3945454538819557], res=[-0.03844230567065532, 0.0, 0.0, 0.0, 0.18545453673427525], res_norm=1.894e-01
2026-01-26 17:54:03,731 - INFO - integration_test - Dyn residual k=1: pred=[0.7484422950311811, 0.0, 0.0, 1.5999999748859002, 0.5545454513705458], ws=[0.876845111467361, 0.0, 0.0, 1.5999999748859002, 0.6957575743157359], res=[-0.1284028164361799, 0.0, 0.0, 0.0, -0.14121212294519014], res_norm=1.909e-01
2026-01-26 17:54:03,732 - INFO - integration_test - Dyn residual k=2: pred=[1.036845108955951, 0.0, 0.0, 1.5999999748859002, 0.855757571804326], ws=[1.1572150241672783, 0.0, 0.0, 1.5999999748859002, 0.7747474728557003], res=[-0.12036991521132734, 0.0, 0.0, 0.0, 0.08101009894862565], res_norm=1.451e-01
2026-01-26 17:54:03,741 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,772 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,782 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,807 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,818 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,841 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,852 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,876 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,885 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,909 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,918 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,942 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,953 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:03,978 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:03,989 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,014 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,024 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,049 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,126 - INFO - integration_test - Step 3: MPC solve successful
2026-01-26 17:54:04,130 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-26 17:54:04,130 - DEBUG - integration_test - Step 3: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:04,130 - INFO - integration_test - === Applying control at step 3 ===
2026-01-26 17:54:04,130 - INFO - integration_test -   Control dict from planner: {'a': 2.000000011035653, 'w': 0.0}
2026-01-26 17:54:04,130 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:04,130 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:04,131 - INFO - integration_test - Step 3 completed in 0.435s
2026-01-26 17:54:04,138 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-26 17:54:04,139 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.55999999 0.         0.         1.79999998 0.59999999]
2026-01-26 17:54:04,140 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.052m, drift=0.012m)
2026-01-26 17:54:04,140 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-26 17:54:04,140 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:04,152 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.560, 0.000), path_start=(0.000, 0.000), dist=0.560m
2026-01-26 17:54:04,152 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-26 17:54:04,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:04,173 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:04,173 - INFO - integration_test - Warmstart k=0: x0=0.5599999919271141 , y0=0.0 , psi0=0.0 , v0=1.7999999759894654 , spline0=0.5999999907265875 , a0=0.0 , w0=0.0
2026-01-26 17:54:04,173 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:04,174 - INFO - integration_test - Dyn residual k=0: pred=[0.7399999895260607, 0.0, 0.0, 1.7999999759894654, 0.7799999883255341], ws=[0.8006067830853099, 0.0, 0.0, 1.7999999759894654, 0.46707070612731594], res=[-0.06060679355924914, 0.0, 0.0, 0.0, 0.31292928219821814], res_norm=3.187e-01
2026-01-26 17:54:04,175 - INFO - integration_test - Dyn residual k=1: pred=[0.9806067806842564, 0.0, 0.0, 1.7999999759894654, 0.6470707037262625], ws=[1.1502886529018879, 0.0, 0.0, 1.7999999759894654, 0.782626260777962], res=[-0.16968187221763142, 0.0, 0.0, 0.0, -0.13555555705169953], res_norm=2.172e-01
2026-01-26 17:54:04,176 - INFO - integration_test - Dyn residual k=2: pred=[1.3302886505008344, 0.0, 0.0, 1.7999999759894654, 0.9626262583769086], ws=[1.3809419499604842, 0.0, 0.0, 1.7999999759894654, 1.0543434315141238], res=[-0.0506532994596498, 0.0, 0.0, 0.0, -0.09171717313721517], res_norm=1.048e-01
2026-01-26 17:54:04,185 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,217 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,228 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,254 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,265 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,290 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,301 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,325 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,336 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,359 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,369 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,394 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,406 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,432 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,443 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,468 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,479 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,503 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,589 - INFO - integration_test - Step 4: MPC solve successful
2026-01-26 17:54:04,594 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-26 17:54:04,594 - DEBUG - integration_test - Step 4: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:04,594 - INFO - integration_test - === Applying control at step 4 ===
2026-01-26 17:54:04,594 - INFO - integration_test -   Control dict from planner: {'a': 1.999999797890114, 'w': 0.0}
2026-01-26 17:54:04,594 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:04,594 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:04,595 - INFO - integration_test - Step 4 completed in 0.456s
2026-01-26 17:54:04,604 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-26 17:54:04,604 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.74999999 0.         0.         1.99999996 0.79999999]
2026-01-26 17:54:04,605 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.138m, drift=0.188m)
2026-01-26 17:54:04,605 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-26 17:54:04,605 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:04,617 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.750, 0.000), path_start=(0.000, 0.000), dist=0.750m
2026-01-26 17:54:04,617 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-26 17:54:04,619 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:04,640 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:04,640 - INFO - integration_test - Warmstart k=0: x0=0.7499999885155113 , y0=0.0 , psi0=0.0 , v0=1.9999999557784767 , spline0=0.7999999863044351 , a0=0.0 , w0=0.0
2026-01-26 17:54:04,640 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:04,641 - INFO - integration_test - Dyn residual k=0: pred=[0.9499999840933591, 0.0, 0.0, 1.9999999557784767, 0.9999999818822828], ws=[1.0746845505051001, 0.0, 0.0, 1.9999999557784767, 0.9696969667688538], res=[-0.12468456641174108, 0.0, 0.0, 0.0, 0.030303015113429033], res_norm=1.283e-01
2026-01-26 17:54:04,642 - INFO - integration_test - Dyn residual k=1: pred=[1.274684546082948, 0.0, 0.0, 1.9999999557784767, 1.1696969623467015], ws=[1.4077839370592207, 0.0, 0.0, 1.9999999557784767, 1.064646460775982], res=[-0.13309939097627277, 0.0, 0.0, 0.0, 0.10505050157071949], res_norm=1.696e-01
2026-01-26 17:54:04,642 - INFO - integration_test - Dyn residual k=2: pred=[1.6077839326370684, 0.0, 0.0, 1.9999999557784767, 1.2646464563538298], ws=[1.7531128686471278, 0.0, 0.0, 1.9999999557784767, 1.163636358734178], res=[-0.14532893601005936, 0.0, 0.0, 0.0, 0.10101009761965174], res_norm=1.770e-01
2026-01-26 17:54:04,652 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,683 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,717 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,727 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,752 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,762 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,785 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,796 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,820 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,830 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,854 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,864 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,887 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,898 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,921 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:04,931 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:04,954 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,036 - INFO - integration_test - Step 5: MPC solve successful
2026-01-26 17:54:05,040 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-26 17:54:05,041 - DEBUG - integration_test - Step 5: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:05,041 - INFO - integration_test - === Applying control at step 5 ===
2026-01-26 17:54:05,041 - INFO - integration_test -   Control dict from planner: {'a': 2.000000006532927, 'w': 0.0}
2026-01-26 17:54:05,041 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:05,041 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:05,042 - INFO - integration_test - Step 5 completed in 0.438s
2026-01-26 17:54:05,050 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-26 17:54:05,051 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.95999998 0.         0.         2.19999996 1.01999998]
2026-01-26 17:54:05,051 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.042m, drift=0.102m)
2026-01-26 17:54:05,051 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-26 17:54:05,052 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:05,063 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.960, 0.000), path_start=(0.000, 0.000), dist=0.960m
2026-01-26 17:54:05,063 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-26 17:54:05,065 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:05,084 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:05,084 - INFO - integration_test - Warmstart k=0: x0=0.9599999841260236 , y0=0.0 , psi0=0.0 , v0=2.1999999564317694 , spline0=1.019999981947612 , a0=0.0 , w0=0.0
2026-01-26 17:54:05,084 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:05,085 - INFO - integration_test - Dyn residual k=0: pred=[1.1799999797692005, 0.0, 0.0, 2.1999999564317694, 1.2399999775907888], ws=[1.246457921319147, 0.0, 0.0, 2.1999999564317694, 1.0084848448631578], res=[-0.06645794154994644, 0.0, 0.0, 0.0, 0.23151513272763102], res_norm=2.409e-01
2026-01-26 17:54:05,086 - INFO - integration_test - Dyn residual k=1: pred=[1.4664579169623237, 0.0, 0.0, 2.1999999564317694, 1.2284848405063347], ws=[1.5240012798357379, 0.0, 0.0, 2.1999999564317694, 1.1092929246967418], res=[-0.057543362873414106, 0.0, 0.0, 0.0, 0.11919191580959287], res_norm=1.324e-01
2026-01-26 17:54:05,088 - INFO - integration_test - Dyn residual k=2: pred=[1.7440012754789147, 0.0, 0.0, 2.1999999564317694, 1.3292929203399186], ws=[1.7885887840091017, 0.0, 0.0, 2.1999999564317694, 1.6193939318490043], res=[-0.044587508530187, 0.0, 0.0, 0.0, -0.2901010115090856], res_norm=2.935e-01
2026-01-26 17:54:05,103 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,149 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,165 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,192 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,204 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,228 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,238 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,262 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,272 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,296 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,306 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,329 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,338 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,362 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,372 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,396 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,406 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,430 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,505 - INFO - integration_test - Step 6: MPC solve successful
2026-01-26 17:54:05,509 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-26 17:54:05,509 - DEBUG - integration_test - Step 6: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:05,509 - INFO - integration_test - === Applying control at step 6 ===
2026-01-26 17:54:05,509 - INFO - integration_test -   Control dict from planner: {'a': 2.000000005779535, 'w': 0.0}
2026-01-26 17:54:05,509 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:05,509 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:05,510 - INFO - integration_test - Step 6 completed in 0.460s
2026-01-26 17:54:05,517 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-26 17:54:05,518 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.18999998 0.         0.         2.39999996 1.25999998]
2026-01-26 17:54:05,518 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.034m, drift=0.036m)
2026-01-26 17:54:05,518 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-26 17:54:05,519 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:05,530 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.190, 0.000), path_start=(0.000, 0.000), dist=1.190m
2026-01-26 17:54:05,530 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-26 17:54:05,532 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:05,550 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:05,550 - INFO - integration_test - Warmstart k=0: x0=1.1899999797980982 , y0=0.0 , psi0=0.0 , v0=2.399999957009723 , spline0=1.2599999776485844 , a0=0.0 , w0=0.0
2026-01-26 17:54:05,550 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:05,551 - INFO - integration_test - Dyn residual k=0: pred=[1.4299999754990704, 0.0, 0.0, 2.399999957009723, 1.4999999733495568], ws=[1.4547024033411473, 0.0, 0.0, 2.399999957009723, 0.8535353500358004], res=[-0.02470242784207688, 0.0, 0.0, 0.0, 0.6464646233137564], res_norm=6.469e-01
2026-01-26 17:54:05,552 - INFO - integration_test - Dyn residual k=1: pred=[1.6947023990421197, 0.0, 0.0, 2.399999957009723, 1.0935353457367727], ws=[1.8394032588903786, 0.0, 0.0, 2.399999957009723, 1.8381818097410536], res=[-0.14470085984825887, 0.0, 0.0, 0.0, -0.7446464640042809], res_norm=7.586e-01
2026-01-26 17:54:05,552 - INFO - integration_test - Dyn residual k=2: pred=[2.079403254591351, 0.0, 0.0, 2.399999957009723, 2.078181805442026], ws=[2.1209508152137646, 0.0, 0.0, 2.399999957009723, 1.4806060531291063], res=[-0.041547560622413826, 0.0, 0.0, 0.0, 0.5975757523129195], res_norm=5.990e-01
2026-01-26 17:54:05,561 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,592 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,602 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,626 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,637 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,662 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,671 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,695 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,728 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,738 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,761 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,770 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,794 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,805 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,829 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,838 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:05,862 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:05,939 - INFO - integration_test - Step 7: MPC solve successful
2026-01-26 17:54:05,943 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-26 17:54:05,943 - DEBUG - integration_test - Step 7: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:05,943 - INFO - integration_test - === Applying control at step 7 ===
2026-01-26 17:54:05,943 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000140863228, 'w': 0.0}
2026-01-26 17:54:05,943 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:05,943 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:05,944 - INFO - integration_test - Step 7 completed in 0.427s
2026-01-26 17:54:05,951 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-26 17:54:05,952 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.43999998 0.         0.         2.59999996 1.51999997]
2026-01-26 17:54:05,953 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.091m, drift=0.011m)
2026-01-26 17:54:05,953 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-26 17:54:05,953 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:05,965 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.440, 0.000), path_start=(0.000, 0.000), dist=1.440m
2026-01-26 17:54:05,965 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-26 17:54:05,967 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:05,986 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:05,986 - INFO - integration_test - Warmstart k=0: x0=1.439999975569502 , y0=0.0 , psi0=0.0 , v0=2.599999958418355 , spline0=1.51999997349042 , a0=0.0 , w0=0.0
2026-01-26 17:54:05,986 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:05,987 - INFO - integration_test - Dyn residual k=0: pred=[1.6999999714113376, 0.0, 0.0, 2.599999958418355, 1.7799999693322555], ws=[1.812751330158746, 0.0, 0.0, 2.599999958418355, 1.849090900726979], res=[-0.11275135874740827, 0.0, 0.0, 0.0, -0.06909093139472344], res_norm=1.322e-01
2026-01-26 17:54:05,987 - INFO - integration_test - Dyn residual k=1: pred=[2.0727513260005814, 0.0, 0.0, 2.599999958418355, 2.1090908965688144], ws=[2.215707788624365, 0.0, 0.0, 2.599999958418355, 1.9199999905020249], res=[-0.1429564626237836, 0.0, 0.0, 0.0, 0.18909090606678958], res_norm=2.370e-01
2026-01-26 17:54:05,988 - INFO - integration_test - Dyn residual k=2: pred=[2.4757077844662003, 0.0, 0.0, 2.599999958418355, 2.1799999863438604], ws=[2.662562331390316, 0.0, 0.0, 2.599999958418355, 2.5070706936822376], res=[-0.18685454692411563, 0.0, 0.0, 0.0, -0.3270707073383772], res_norm=3.767e-01
2026-01-26 17:54:05,997 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,028 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,039 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,063 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,074 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,097 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,107 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,131 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,142 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,168 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,179 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,207 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,219 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,245 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,256 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,282 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,293 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,322 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,409 - INFO - integration_test - Step 8: MPC solve successful
2026-01-26 17:54:06,415 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-26 17:54:06,415 - DEBUG - integration_test - Step 8: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:06,415 - INFO - integration_test - === Applying control at step 8 ===
2026-01-26 17:54:06,415 - INFO - integration_test -   Control dict from planner: {'a': 1.9999997778765068, 'w': 0.0}
2026-01-26 17:54:06,415 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:06,415 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:06,416 - INFO - integration_test - Step 8 completed in 0.464s
2026-01-26 17:54:06,425 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-26 17:54:06,425 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.70999997 0.         0.         2.79999994 1.79999997]
2026-01-26 17:54:06,426 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.127m, drift=0.037m)
2026-01-26 17:54:06,426 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-26 17:54:06,427 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:06,441 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.710, 0.000), path_start=(0.000, 0.000), dist=1.710m
2026-01-26 17:54:06,441 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-26 17:54:06,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:06,466 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:06,466 - INFO - integration_test - Warmstart k=0: x0=1.70999997030072 , y0=0.0 , psi0=0.0 , v0=2.7999999362060057 , spline0=1.7999999671110205 , a0=0.0 , w0=0.0
2026-01-26 17:54:06,466 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:06,467 - INFO - integration_test - Dyn residual k=0: pred=[1.9899999639213206, 0.0, 0.0, 2.7999999362060057, 2.0799999607316213], ws=[2.0939380280225954, 0.0, 0.0, 2.7999999362060057, 1.5018181734885256], res=[-0.10393806410127482, 0.0, 0.0, 0.0, 0.5781817872430957], res_norm=5.874e-01
2026-01-26 17:54:06,467 - INFO - integration_test - Dyn residual k=1: pred=[2.373938021643196, 0.0, 0.0, 2.7999999362060057, 1.7818181671091262], ws=[2.5131524950409725, 0.0, 0.0, 2.7999999362060057, 2.4533333181174077], res=[-0.13921447339777648, 0.0, 0.0, 0.0, -0.6715151510082815], res_norm=6.858e-01
2026-01-26 17:54:06,468 - INFO - integration_test - Dyn residual k=2: pred=[2.793152488661573, 0.0, 0.0, 2.7999999362060057, 2.7333333117380083], ws=[2.983635343570266, 0.0, 0.0, 2.7999999362060057, 2.392323216031894], res=[-0.190482854908693, 0.0, 0.0, 0.0, 0.3410100957061144], res_norm=3.906e-01
2026-01-26 17:54:06,479 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,514 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,526 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,553 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,565 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,593 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,606 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,634 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,645 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,672 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,682 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,705 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,716 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,739 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,750 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,773 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,783 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,807 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,881 - INFO - integration_test - Step 9: MPC solve successful
2026-01-26 17:54:06,885 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-26 17:54:06,885 - DEBUG - integration_test - Step 9: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:06,885 - INFO - integration_test - === Applying control at step 9 ===
2026-01-26 17:54:06,885 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196809493, 'w': 0.0}
2026-01-26 17:54:06,885 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:06,885 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:06,886 - INFO - integration_test - Step 9 completed in 0.461s
2026-01-26 17:54:06,893 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-26 17:54:06,894 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.99999996 0.         0.         2.99999994 2.09999996]
2026-01-26 17:54:06,894 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.143m, drift=0.043m)
2026-01-26 17:54:06,894 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-26 17:54:06,894 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:06,906 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(2.000, 0.000), path_start=(0.000, 0.000), dist=2.000m
2026-01-26 17:54:06,906 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-26 17:54:06,908 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:06,927 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:06,928 - INFO - integration_test - Warmstart k=0: x0=1.9999999640197252 , y0=0.0 , psi0=0.0 , v0=2.9999999381741005 , spline0=2.0999999609284306 , a0=0.0 , w0=0.0
2026-01-26 17:54:06,928 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:06,928 - INFO - integration_test - Dyn residual k=0: pred=[2.2999999578371355, 0.0, 0.0, 2.9999999381741005, 2.399999954745841], ws=[2.41159584010093, 0.0, 0.0, 2.9999999381741005, 2.018181805839775], res=[-0.11159588226379435, 0.0, 0.0, 0.0, 0.3818181489060657], res_norm=3.978e-01
2026-01-26 17:54:06,929 - INFO - integration_test - Dyn residual k=1: pred=[2.7115958339183397, 0.0, 0.0, 2.9999999381741005, 2.318181799657185], ws=[2.8710063364681986, 0.0, 0.0, 2.9999999381741005, 2.799999981295728], res=[-0.1594105025498589, 0.0, 0.0, 0.0, -0.48181818163854295], res_norm=5.075e-01
2026-01-26 17:54:06,930 - INFO - integration_test - Dyn residual k=2: pred=[3.171006330285609, 0.0, 0.0, 2.9999999381741005, 3.099999975113138], ws=[3.2611319041137996, 0.0, 0.0, 2.9999999381741005, 2.9090908881384223], res=[-0.09012557382819075, 0.0, 0.0, 0.0, 0.19090908697471587], res_norm=2.111e-01
2026-01-26 17:54:06,939 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:06,970 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:06,980 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,004 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,014 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,038 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,048 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,072 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,082 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,105 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,115 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,139 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,149 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,172 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,183 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,207 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,217 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,241 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,305 - INFO - integration_test - Step 10: MPC solve successful
2026-01-26 17:54:07,309 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-26 17:54:07,309 - DEBUG - integration_test - Step 10: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:07,309 - INFO - integration_test - === Applying control at step 10 ===
2026-01-26 17:54:07,309 - INFO - integration_test -   Control dict from planner: {'a': 9.079007656408056e-07, 'w': 0.0}
2026-01-26 17:54:07,310 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:07,310 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:07,311 - INFO - integration_test - Step 10 completed in 0.417s
2026-01-26 17:54:07,317 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-26 17:54:07,318 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.29999996 0.         0.         3.00000003 2.39999996]
2026-01-26 17:54:07,318 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.149m, drift=0.049m)
2026-01-26 17:54:07,318 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-26 17:54:07,319 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:07,329 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.300, 0.000), path_start=(0.000, 0.000), dist=2.300m
2026-01-26 17:54:07,329 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-26 17:54:07,331 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:07,350 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:07,351 - INFO - integration_test - Warmstart k=0: x0=2.299999962376639 , y0=0.0 , psi0=0.0 , v0=3.000000028964177 , spline0=2.399999963824848 , a0=0.0 , w0=0.0
2026-01-26 17:54:07,351 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:07,351 - INFO - integration_test - Dyn residual k=0: pred=[2.5999999652730565, 0.0, 0.0, 3.000000028964177, 2.6999999667212657], ws=[2.706553674607173, 0.0, 0.0, 3.0, 2.09999999013405], res=[-0.10655370933411668, 0.0, 0.0, 2.8964176834733735e-08, 0.5999999765872159], res_norm=6.094e-01
2026-01-26 17:54:07,352 - INFO - integration_test - Dyn residual k=1: pred=[3.006553674607173, 0.0, 0.0, 3.0, 2.3999999901340496], ws=[3.158636226178134, 0.0, 0.0, 3.0, 2.666666654608283], res=[-0.15208255157096096, 0.0, 0.0, 0.0, -0.26666666447423326], res_norm=3.070e-01
2026-01-26 17:54:07,353 - INFO - integration_test - Dyn residual k=2: pred=[3.458636226178134, 0.0, 0.0, 3.0, 2.966666654608283], ws=[3.5381118473864346, 0.0, 0.0, 3.0, 3.4373737223921093], res=[-0.07947562120830076, 0.0, 0.0, 0.0, -0.4707070677838261], res_norm=4.774e-01
2026-01-26 17:54:07,362 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,392 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,402 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,427 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,437 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,462 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,473 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,497 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,507 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,531 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,540 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,563 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,573 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,596 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,606 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,630 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,643 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,667 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,738 - INFO - integration_test - Step 11: MPC solve successful
2026-01-26 17:54:07,742 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-26 17:54:07,742 - DEBUG - integration_test - Step 11: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:07,743 - INFO - integration_test - === Applying control at step 11 ===
2026-01-26 17:54:07,743 - INFO - integration_test -   Control dict from planner: {'a': -8.352950611837816e-08, 'w': 0.0}
2026-01-26 17:54:07,743 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:07,743 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:07,744 - INFO - integration_test - Step 11 completed in 0.426s
2026-01-26 17:54:07,752 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-26 17:54:07,753 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.59999996 0.         0.         3.00000002 2.69999997]
2026-01-26 17:54:07,753 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.151m, drift=0.251m)
2026-01-26 17:54:07,753 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-26 17:54:07,754 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:07,765 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.600, 0.000), path_start=(0.000, 0.000), dist=2.600m
2026-01-26 17:54:07,765 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-26 17:54:07,767 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:07,788 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:07,788 - INFO - integration_test - Warmstart k=0: x0=2.5999999648554093 , y0=0.0 , psi0=0.0 , v0=3.000000020611226 , spline0=2.699999965885971 , a0=0.0 , w0=0.0
2026-01-26 17:54:07,788 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:07,789 - INFO - integration_test - Dyn residual k=0: pred=[2.899999966916532, 0.0, 0.0, 3.000000020611226, 2.9999999679470934], ws=[3.0015115017608984, 0.0, 0.0, 3.0, 2.828282816222313], res=[-0.10151153484436648, 0.0, 0.0, 2.0611226059230603e-08, 0.17171715172478041], res_norm=1.995e-01
2026-01-26 17:54:07,790 - INFO - integration_test - Dyn residual k=1: pred=[3.3015115017608982, 0.0, 0.0, 3.0, 3.1282828162223133], ws=[3.446266091859462, 0.0, 0.0, 3.0, 3.1858585727643116], res=[-0.14475459009856362, 0.0, 0.0, 0.0, -0.05757575654199831], res_norm=1.558e-01
2026-01-26 17:54:07,790 - INFO - integration_test - Dyn residual k=2: pred=[3.7462660918594617, 0.0, 0.0, 3.0, 3.485858572764312], ws=[3.815091742394544, 0.0, 0.0, 3.0, 3.301010087915827], res=[-0.06882565053508216, 0.0, 0.0, 0.0, 0.18484848484848504], res_norm=1.972e-01
2026-01-26 17:54:07,800 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,831 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,841 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,866 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,876 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,902 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,912 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,937 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,947 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:07,972 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:07,983 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,008 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,019 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,045 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,056 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,081 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,091 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,115 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,181 - INFO - integration_test - Step 12: MPC solve successful
2026-01-26 17:54:08,185 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-26 17:54:08,186 - DEBUG - integration_test - Step 12: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:08,186 - INFO - integration_test - === Applying control at step 12 ===
2026-01-26 17:54:08,186 - INFO - integration_test -   Control dict from planner: {'a': 8.06798794574701e-08, 'w': 0.0}
2026-01-26 17:54:08,186 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:08,186 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:08,187 - INFO - integration_test - Step 12 completed in 0.434s
2026-01-26 17:54:08,195 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-26 17:54:08,195 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.89999997 0.         0.         3.00000003 2.99999997]
2026-01-26 17:54:08,196 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.145m, drift=0.245m)
2026-01-26 17:54:08,196 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-26 17:54:08,196 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:08,208 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.900, 0.000), path_start=(0.000, 0.000), dist=2.900m
2026-01-26 17:54:08,208 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-26 17:54:08,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:08,229 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:08,229 - INFO - integration_test - Warmstart k=0: x0=2.8999999673199315 , y0=0.0 , psi0=0.0 , v0=3.000000028679214 , spline0=2.999999968753892 , a0=0.0 , w0=0.0
2026-01-26 17:54:08,229 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:08,230 - INFO - integration_test - Dyn residual k=0: pred=[3.1999999701878528, 0.0, 0.0, 3.000000028679214, 3.2999999716218134], ws=[3.296469329863134, 0.0, 0.0, 3.0, 2.93434342329683], res=[-0.09646935967528103, 0.0, 0.0, 2.8679214114646356e-08, 0.3656565483249832], res_norm=3.782e-01
2026-01-26 17:54:08,231 - INFO - integration_test - Dyn residual k=1: pred=[3.5964693298631336, 0.0, 0.0, 3.0, 3.2343434232968304], ws=[3.733895959888506, 0.0, 0.0, 3.0, 3.4747474621227847], res=[-0.13742663002537236, 0.0, 0.0, 0.0, -0.2404040388259543], res_norm=2.769e-01
2026-01-26 17:54:08,232 - INFO - integration_test - Dyn residual k=2: pred=[4.033895959888506, 0.0, 0.0, 3.0, 3.774747462122785], ws=[4.092071641783883, 0.0, 0.0, 3.0, 3.5959595833349063], res=[-0.05817568189537692, 0.0, 0.0, 0.0, 0.17878787878787872], res_norm=1.880e-01
2026-01-26 17:54:08,240 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,270 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,281 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,304 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,315 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,338 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,348 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,371 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,381 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,405 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,415 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,438 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,449 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,473 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,484 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,509 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,520 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,543 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,615 - INFO - integration_test - Step 13: MPC solve successful
2026-01-26 17:54:08,619 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-26 17:54:08,620 - DEBUG - integration_test - Step 13: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:08,620 - INFO - integration_test - === Applying control at step 13 ===
2026-01-26 17:54:08,620 - INFO - integration_test -   Control dict from planner: {'a': -6.941520737655392e-08, 'w': 0.0}
2026-01-26 17:54:08,620 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:08,620 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:08,621 - INFO - integration_test - Step 13 completed in 0.426s
2026-01-26 17:54:08,630 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-26 17:54:08,630 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[3.19999997 0.         0.         3.00000002 3.29999997]
2026-01-26 17:54:08,631 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.139m, drift=0.239m)
2026-01-26 17:54:08,631 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-26 17:54:08,631 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:08,644 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(3.200, 0.000), path_start=(0.000, 0.000), dist=3.200m
2026-01-26 17:54:08,644 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-26 17:54:08,646 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:08,667 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:08,667 - INFO - integration_test - Warmstart k=0: x0=3.199999969840777 , y0=0.0 , psi0=0.0 , v0=3.0000000217376934 , spline0=3.2999999709276615 , a0=0.0 , w0=0.0
2026-01-26 17:54:08,667 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:08,668 - INFO - integration_test - Dyn residual k=0: pred=[3.4999999720145465, 0.0, 0.0, 3.0000000217376934, 3.599999973101431], ws=[3.5914271571773466, 0.0, 0.0, 3.0, 3.214141403275995], res=[-0.09142718516280013, 0.0, 0.0, 2.1737693423062865e-08, 0.385858569825436], res_norm=3.965e-01
2026-01-26 17:54:08,668 - INFO - integration_test - Dyn residual k=1: pred=[3.8914271571773464, 0.0, 0.0, 3.0, 3.5141414032759952], ws=[4.021525825902413, 0.0, 0.0, 3.0, 3.775757563423856], res=[-0.13009866872506626, 0.0, 0.0, 0.0, -0.2616161601478608], res_norm=2.922e-01
2026-01-26 17:54:08,670 - INFO - integration_test - Dyn residual k=2: pred=[4.3215258259024125, 0.0, 0.0, 3.0, 4.075757563423856], ws=[4.507827047578759, 0.0, 0.0, 3.0, 4.367676753874748], res=[-0.18630122167634688, 0.0, 0.0, 0.0, -0.29191919045089154], res_norm=3.463e-01
2026-01-26 17:54:08,679 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,717 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,729 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,758 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,770 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,798 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,810 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,839 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,850 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,877 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,890 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,917 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,928 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,956 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:08,968 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:08,995 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,008 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,044 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,149 - INFO - integration_test - Step 14: MPC solve successful
2026-01-26 17:54:09,153 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-26 17:54:09,153 - DEBUG - integration_test - Step 14: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:09,154 - INFO - integration_test - === Applying control at step 14 ===
2026-01-26 17:54:09,154 - INFO - integration_test -   Control dict from planner: {'a': -9.59883849047013e-08, 'w': 0.0}
2026-01-26 17:54:09,154 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:09,154 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:09,155 - INFO - integration_test - Step 14 completed in 0.526s
2026-01-26 17:54:09,164 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-26 17:54:09,165 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.49999997 0.         0.         3.00000001 3.59999997]
2026-01-26 17:54:09,166 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.133m, drift=0.233m)
2026-01-26 17:54:09,166 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-26 17:54:09,166 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:09,181 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.500, 0.000), path_start=(0.000, 0.000), dist=3.500m
2026-01-26 17:54:09,181 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-26 17:54:09,184 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:09,208 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:09,208 - INFO - integration_test - Warmstart k=0: x0=3.4999999715346046 , y0=0.0 , psi0=0.0 , v0=3.000000012138855 , spline0=3.599999972141547 , a0=0.0 , w0=0.0
2026-01-26 17:54:09,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:09,209 - INFO - integration_test - Dyn residual k=0: pred=[3.7999999727484903, 0.0, 0.0, 3.000000012138855, 3.899999973355433], ws=[3.8863849828257493, 0.0, 0.0, 3.0, 3.3262626158508812], res=[-0.08638501007725896, 0.0, 0.0, 1.2138854810217481e-08, 0.5737373575045517], res_norm=5.802e-01
2026-01-26 17:54:09,209 - INFO - integration_test - Dyn residual k=1: pred=[4.186384982825749, 0.0, 0.0, 3.0, 3.626262615850881], ws=[4.309155689031464, 0.0, 0.0, 3.0, 4.0888888765073546], res=[-0.12277070620571529, 0.0, 0.0, 0.0, -0.4626262606564735], res_norm=4.786e-01
2026-01-26 17:54:09,210 - INFO - integration_test - Dyn residual k=2: pred=[4.609155689031464, 0.0, 0.0, 3.0, 4.388888876507354], ws=[4.7848069385130225, 0.0, 0.0, 3.0, 4.222222209840687], res=[-0.1756512494815583, 0.0, 0.0, 0.0, 0.16666666666666696], res_norm=2.421e-01
2026-01-26 17:54:09,221 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,257 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,269 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,299 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,311 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,341 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,353 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,380 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,393 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,420 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,432 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,458 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,469 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,495 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,507 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,534 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,545 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,571 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,645 - INFO - integration_test - Step 15: MPC solve successful
2026-01-26 17:54:09,650 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-26 17:54:09,651 - DEBUG - integration_test - Step 15: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:09,651 - INFO - integration_test - === Applying control at step 15 ===
2026-01-26 17:54:09,651 - INFO - integration_test -   Control dict from planner: {'a': 4.690457232328494e-08, 'w': 0.0}
2026-01-26 17:54:09,651 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:09,651 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:09,652 - INFO - integration_test - Step 15 completed in 0.487s
2026-01-26 17:54:09,662 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-26 17:54:09,663 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.79999997 0.         0.         3.00000002 3.89999997]
2026-01-26 17:54:09,664 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.127m, drift=0.227m)
2026-01-26 17:54:09,664 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-26 17:54:09,664 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:09,677 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.800, 0.000), path_start=(0.000, 0.000), dist=3.800m
2026-01-26 17:54:09,677 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-26 17:54:09,679 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:09,700 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:09,700 - INFO - integration_test - Warmstart k=0: x0=3.799999972983013 , y0=0.0 , psi0=0.0 , v0=3.000000016829312 , spline0=3.8999999738244786 , a0=0.0 , w0=0.0
2026-01-26 17:54:09,700 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:09,701 - INFO - integration_test - Dyn residual k=0: pred=[4.099999974665944, 0.0, 0.0, 3.000000016829312, 4.19999997550741], ws=[4.181342808874606, 0.0, 0.0, 3.0, 3.624242413930855], res=[-0.0813428342086624, 0.0, 0.0, 1.6829312166066757e-08, 0.5757575615765549], res_norm=5.815e-01
2026-01-26 17:54:09,702 - INFO - integration_test - Dyn residual k=1: pred=[4.481342808874606, 0.0, 0.0, 3.0, 3.9242424139308554], ws=[4.596785553499641, 0.0, 0.0, 3.0, 4.606060593369445], res=[-0.11544274462503523, 0.0, 0.0, 0.0, -0.68181817943859], res_norm=6.915e-01
2026-01-26 17:54:09,703 - INFO - integration_test - Dyn residual k=2: pred=[4.896785553499641, 0.0, 0.0, 3.0, 4.906060593369445], ws=[5.06178683215061, 0.0, 0.0, 3.0, 4.949494936274989], res=[-0.16500127865096914, 0.0, 0.0, 0.0, -0.04343434290554349], res_norm=1.706e-01
2026-01-26 17:54:09,712 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,744 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,758 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,784 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,796 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,824 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,836 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,862 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,873 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,899 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,910 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,936 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,947 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:09,972 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:09,984 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,009 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,020 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,045 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,119 - INFO - integration_test - Step 16: MPC solve successful
2026-01-26 17:54:10,123 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-26 17:54:10,123 - DEBUG - integration_test - Step 16: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:10,123 - INFO - integration_test - === Applying control at step 16 ===
2026-01-26 17:54:10,123 - INFO - integration_test -   Control dict from planner: {'a': -5.7417060129566524e-08, 'w': 0.0}
2026-01-26 17:54:10,124 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:10,124 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:10,125 - INFO - integration_test - Step 16 completed in 0.462s
2026-01-26 17:54:10,134 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-26 17:54:10,134 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[4.09999997 0.         0.         3.00000001 4.19999997]
2026-01-26 17:54:10,135 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.120m, drift=0.220m)
2026-01-26 17:54:10,135 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-26 17:54:10,135 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:10,147 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(4.100, 0.000), path_start=(0.000, 0.000), dist=4.100m
2026-01-26 17:54:10,147 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-26 17:54:10,149 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:10,169 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:10,169 - INFO - integration_test - Warmstart k=0: x0=4.099999974378859 , y0=0.0 , psi0=0.0 , v0=3.000000011087606 , spline0=4.199999974933239 , a0=0.0 , w0=0.0
2026-01-26 17:54:10,169 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:10,170 - INFO - integration_test - Dyn residual k=0: pred=[4.39999997548762, 0.0, 0.0, 3.000000011087606, 4.499999976042], ws=[4.476300634208522, 0.0, 0.0, 3.0, 4.126262615375043], res=[-0.07630065872090253, 0.0, 0.0, 1.1087605944481993e-08, 0.37373736066695695], res_norm=3.814e-01
2026-01-26 17:54:10,171 - INFO - integration_test - Dyn residual k=1: pred=[4.776300634208522, 0.0, 0.0, 3.0, 4.426262615375043], ws=[4.884415416290219, 0.0, 0.0, 3.0, 4.256565645678074], res=[-0.10811478208169678, 0.0, 0.0, 0.0, 0.169696969696969], res_norm=2.012e-01
2026-01-26 17:54:10,172 - INFO - integration_test - Dyn residual k=2: pred=[5.184415416290219, 0.0, 0.0, 3.0, 4.556565645678074], ws=[5.338766722711535, 0.0, 0.0, 3.0, 5.25151512644839], res=[-0.154351306421316, 0.0, 0.0, 0.0, -0.6949494807703163], res_norm=7.119e-01
2026-01-26 17:54:10,181 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,216 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,227 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,251 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,262 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,285 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,296 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,320 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,331 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,354 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,364 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,388 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,398 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,423 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,434 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,462 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,473 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,497 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,582 - INFO - integration_test - Step 17: MPC solve successful
2026-01-26 17:54:10,587 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-26 17:54:10,588 - DEBUG - integration_test - Step 17: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:10,588 - INFO - integration_test - === Applying control at step 17 ===
2026-01-26 17:54:10,588 - INFO - integration_test -   Control dict from planner: {'a': 8.686843352551376e-08, 'w': 0.0}
2026-01-26 17:54:10,588 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:10,588 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:10,589 - INFO - integration_test - Step 17 completed in 0.455s
2026-01-26 17:54:10,605 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-26 17:54:10,607 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[4.39999998 0.         0.         3.00000002 4.49999998]
2026-01-26 17:54:10,607 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.114m, drift=0.214m)
2026-01-26 17:54:10,607 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-26 17:54:10,608 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:10,620 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(4.400, 0.000), path_start=(0.000, 0.000), dist=4.400m
2026-01-26 17:54:10,620 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-26 17:54:10,623 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:10,642 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:10,642 - INFO - integration_test - Warmstart k=0: x0=4.399999975921961 , y0=0.0 , psi0=0.0 , v0=3.000000019774449 , spline0=4.499999976910684 , a0=0.0 , w0=0.0
2026-01-26 17:54:10,642 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:10,643 - INFO - integration_test - Dyn residual k=0: pred=[4.699999977899406, 0.0, 0.0, 3.000000019774449, 4.7999999788881285], ws=[4.771258460667223, 0.0, 0.0, 3.0, 4.652525241563658], res=[-0.0712584827678171, 0.0, 0.0, 1.9774449189213783e-08, 0.1474747373244707], res_norm=1.638e-01
2026-01-26 17:54:10,644 - INFO - integration_test - Dyn residual k=1: pred=[5.071258460667223, 0.0, 0.0, 3.0, 4.952525241563658], ws=[5.1720452816262545, 0.0, 0.0, 3.0, 4.544444421355128], res=[-0.10078682095903169, 0.0, 0.0, 0.0, 0.40808082020852954], res_norm=4.203e-01
2026-01-26 17:54:10,645 - INFO - integration_test - Dyn residual k=2: pred=[5.472045281626254, 0.0, 0.0, 3.0, 4.844444421355128], ws=[5.615746617882633, 0.0, 0.0, 3.0, 5.551515128425835], res=[-0.14370133625637838, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.215e-01
2026-01-26 17:54:10,653 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,684 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,696 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,719 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,729 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,752 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,762 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,786 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,796 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,819 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,829 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,852 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,863 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,886 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,896 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,920 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:10,929 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:10,952 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,025 - INFO - integration_test - Step 18: MPC solve successful
2026-01-26 17:54:11,030 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-26 17:54:11,030 - DEBUG - integration_test - Step 18: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:11,030 - INFO - integration_test - === Applying control at step 18 ===
2026-01-26 17:54:11,030 - INFO - integration_test -   Control dict from planner: {'a': 9.641432736297906e-08, 'w': 0.0}
2026-01-26 17:54:11,030 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:11,030 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:11,031 - INFO - integration_test - Step 18 completed in 0.425s
2026-01-26 17:54:11,038 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-26 17:54:11,039 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.69999998 0.         0.         3.00000003 4.79999998]
2026-01-26 17:54:11,039 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.108m, drift=0.208m)
2026-01-26 17:54:11,039 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-26 17:54:11,040 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:11,051 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.700, 0.000), path_start=(0.000, 0.000), dist=4.700m
2026-01-26 17:54:11,051 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-26 17:54:11,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:11,074 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:11,074 - INFO - integration_test - Warmstart k=0: x0=4.699999978381478 , y0=0.0 , psi0=0.0 , v0=3.0000000294158817 , spline0=4.799999979852272 , a0=0.0 , w0=0.0
2026-01-26 17:54:11,074 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:11,075 - INFO - integration_test - Dyn residual k=0: pred=[4.999999981323066, 0.0, 0.0, 3.0000000294158817, 5.09999998279386], ws=[5.066216288853705, 0.0, 0.0, 3.0, 4.94848482833712], res=[-0.06621630753063901, 0.0, 0.0, 2.9415881730443516e-08, 0.1515151544567397], res_norm=1.654e-01
2026-01-26 17:54:11,075 - INFO - integration_test - Dyn residual k=1: pred=[5.366216288853705, 0.0, 0.0, 3.0, 5.24848482833712], ws=[5.459675149869261, 0.0, 0.0, 3.0, 4.844444424296716], res=[-0.09345886101555578, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.147e-01
2026-01-26 17:54:11,076 - INFO - integration_test - Dyn residual k=2: pred=[5.759675149869261, 0.0, 0.0, 3.0, 5.144444424296716], ws=[5.892726517674452, 0.0, 0.0, 3.0, 5.851515131367423], res=[-0.13305136780519167, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.195e-01
2026-01-26 17:54:11,085 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,117 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,127 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,154 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,169 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,203 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,215 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,242 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,253 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,279 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,292 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,320 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,330 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,357 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,369 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,397 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,408 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,436 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,557 - INFO - integration_test - Step 19: MPC solve successful
2026-01-26 17:54:11,562 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-26 17:54:11,563 - DEBUG - integration_test - Step 19: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:11,563 - INFO - integration_test - === Applying control at step 19 ===
2026-01-26 17:54:11,563 - INFO - integration_test -   Control dict from planner: {'a': 4.741421391345773e-09, 'w': 0.0}
2026-01-26 17:54:11,563 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:11,563 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:11,564 - INFO - integration_test - Step 19 completed in 0.526s
2026-01-26 17:54:11,573 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-26 17:54:11,574 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.99999998 0.         0.         3.00000003 5.09999998]
2026-01-26 17:54:11,574 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.102m, drift=0.202m)
2026-01-26 17:54:11,574 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-26 17:54:11,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:11,588 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(5.000, 0.000), path_start=(0.000, 0.000), dist=5.000m
2026-01-26 17:54:11,588 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-26 17:54:11,590 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:11,613 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:11,613 - INFO - integration_test - Warmstart k=0: x0=4.9999999813467735 , y0=0.0 , psi0=0.0 , v0=3.000000029890024 , spline0=5.0999999828412745 , a0=0.0 , w0=0.0
2026-01-26 17:54:11,613 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:11,615 - INFO - integration_test - Dyn residual k=0: pred=[5.299999984335776, 0.0, 0.0, 3.000000029890024, 5.399999985830277], ws=[5.361174117418476, 0.0, 0.0, 3.0, 5.248484831326123], res=[-0.06117413308269981, 0.0, 0.0, 2.989002378939176e-08, 0.1515151545041542], res_norm=1.634e-01
2026-01-26 17:54:11,615 - INFO - integration_test - Dyn residual k=1: pred=[5.661174117418476, 0.0, 0.0, 3.0, 5.548484831326123], ws=[5.747305018305268, 0.0, 0.0, 3.0, 5.144444427285719], res=[-0.08613090088679254, 0.0, 0.0, 0.0, 0.404040404040404], res_norm=4.131e-01
2026-01-26 17:54:11,616 - INFO - integration_test - Dyn residual k=2: pred=[6.047305018305268, 0.0, 0.0, 3.0, 5.444444427285719], ws=[6.1697064173899925, 0.0, 0.0, 3.0, 6.151515134356425], res=[-0.12240139908472436, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.176e-01
2026-01-26 17:54:11,626 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,662 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,675 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,702 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,715 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,739 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,749 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,774 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,787 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,819 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,833 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,860 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,872 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,899 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,911 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,938 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:11,949 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:11,976 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,061 - INFO - integration_test - Step 20: MPC solve successful
2026-01-26 17:54:12,066 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-26 17:54:12,066 - DEBUG - integration_test - Step 20: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:12,066 - INFO - integration_test - === Applying control at step 20 ===
2026-01-26 17:54:12,066 - INFO - integration_test -   Control dict from planner: {'a': -1.2169277805782926e-09, 'w': 0.0}
2026-01-26 17:54:12,067 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:12,067 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:12,068 - INFO - integration_test - Step 20 completed in 0.494s
2026-01-26 17:54:12,078 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-26 17:54:12,079 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[5.29999998 0.         0.         3.00000003 5.39999999]
2026-01-26 17:54:12,079 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.096m, drift=0.196m)
2026-01-26 17:54:12,079 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-26 17:54:12,080 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:12,093 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(5.300, 0.000), path_start=(0.000, 0.000), dist=5.300m
2026-01-26 17:54:12,093 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-26 17:54:12,095 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:12,118 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:12,118 - INFO - integration_test - Warmstart k=0: x0=5.299999984329691 , y0=0.0 , psi0=0.0 , v0=3.000000029768331 , spline0=5.399999985818107 , a0=0.0 , w0=0.0
2026-01-26 17:54:12,119 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:12,120 - INFO - integration_test - Dyn residual k=0: pred=[5.599999987306524, 0.0, 0.0, 3.000000029768331, 5.69999998879494], ws=[5.656131945980022, 0.0, 0.0, 3.0, 5.346464632282753], res=[-0.05613195867349763, 0.0, 0.0, 2.976833091139497e-08, 0.3535353565121868], res_norm=3.580e-01
2026-01-26 17:54:12,121 - INFO - integration_test - Dyn residual k=1: pred=[5.9561319459800215, 0.0, 0.0, 3.0, 5.646464632282753], ws=[6.034934886707753, 0.0, 0.0, 3.0, 5.444444430262552], res=[-0.07880294072773175, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.168e-01
2026-01-26 17:54:12,122 - INFO - integration_test - Dyn residual k=2: pred=[6.334934886707753, 0.0, 0.0, 3.0, 5.7444444302625515], ws=[6.446686317027975, 0.0, 0.0, 3.0, 6.451515137333258], res=[-0.11175143032022206, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.158e-01
2026-01-26 17:54:12,132 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,168 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,181 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,205 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,216 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,240 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,249 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,273 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,283 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,306 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,316 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,340 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,350 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,374 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,385 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,409 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,420 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,443 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,531 - INFO - integration_test - Step 21: MPC solve successful
2026-01-26 17:54:12,536 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-26 17:54:12,536 - DEBUG - integration_test - Step 21: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:12,536 - INFO - integration_test - === Applying control at step 21 ===
2026-01-26 17:54:12,536 - INFO - integration_test -   Control dict from planner: {'a': -1.1971532078713415e-09, 'w': 0.0}
2026-01-26 17:54:12,536 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:12,536 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:12,537 - INFO - integration_test - Step 21 completed in 0.459s
2026-01-26 17:54:12,551 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-26 17:54:12,552 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[5.59999999 0.         0.         3.00000003 5.69999999]
2026-01-26 17:54:12,552 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.090m, drift=0.190m)
2026-01-26 17:54:12,552 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-26 17:54:12,552 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:12,564 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(5.600, 0.000), path_start=(0.000, 0.000), dist=5.600m
2026-01-26 17:54:12,564 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-26 17:54:12,566 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:12,585 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:12,585 - INFO - integration_test - Warmstart k=0: x0=5.599999987300539 , y0=0.0 , psi0=0.0 , v0=3.0000000296486156 , spline0=5.699999988782969 , a0=0.0 , w0=0.0
2026-01-26 17:54:12,585 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:12,586 - INFO - integration_test - Dyn residual k=0: pred=[5.8999999902654, 0.0, 0.0, 3.0000000296486156, 5.999999991747831], ws=[5.951089774519674, 0.0, 0.0, 3.0, 5.646464635247615], res=[-0.05108978425427413, 0.0, 0.0, 2.964861556264964e-08, 0.35353535650021595], res_norm=3.572e-01
2026-01-26 17:54:12,587 - INFO - integration_test - Dyn residual k=1: pred=[6.251089774519674, 0.0, 0.0, 3.0, 5.946464635247615], ws=[6.32256475507407, 0.0, 0.0, 3.0, 5.744444433227414], res=[-0.07147498055439616, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.143e-01
2026-01-26 17:54:12,587 - INFO - integration_test - Dyn residual k=2: pred=[6.62256475507407, 0.0, 0.0, 3.0, 6.044444433227413], ws=[6.723666216609043, 0.0, 0.0, 3.0, 6.75151514029812], res=[-0.10110146153497368, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.143e-01
2026-01-26 17:54:12,597 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,633 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,646 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,672 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,688 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,716 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,730 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,758 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,770 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,798 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,810 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,838 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,849 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,877 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,889 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,917 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:12,930 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:12,958 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,043 - INFO - integration_test - Step 22: MPC solve successful
2026-01-26 17:54:13,047 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-26 17:54:13,047 - DEBUG - integration_test - Step 22: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:13,047 - INFO - integration_test - === Applying control at step 22 ===
2026-01-26 17:54:13,047 - INFO - integration_test -   Control dict from planner: {'a': -1.522114062316331e-08, 'w': 0.0}
2026-01-26 17:54:13,047 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:13,047 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:13,049 - INFO - integration_test - Step 22 completed in 0.497s
2026-01-26 17:54:13,058 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-26 17:54:13,058 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.89999999 0.         0.         3.00000003 5.99999999]
2026-01-26 17:54:13,059 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.084m, drift=0.184m)
2026-01-26 17:54:13,059 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-26 17:54:13,059 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:13,071 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.900, 0.000), path_start=(0.000, 0.000), dist=5.900m
2026-01-26 17:54:13,071 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-26 17:54:13,073 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:13,092 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:13,092 - INFO - integration_test - Warmstart k=0: x0=5.899999990189294 , y0=0.0 , psi0=0.0 , v0=3.0000000281265016 , spline0=5.99999999159562 , a0=0.0 , w0=0.0
2026-01-26 17:54:13,092 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:13,093 - INFO - integration_test - Dyn residual k=0: pred=[6.199999993001945, 0.0, 0.0, 3.0000000281265016, 6.29999999440827], ws=[6.246047602826404, 0.0, 0.0, 3.0, 5.946464638060266], res=[-0.0460476098244591, 0.0, 0.0, 2.8126501572245388e-08, 0.35353535634800437], res_norm=3.565e-01
2026-01-26 17:54:13,094 - INFO - integration_test - Dyn residual k=1: pred=[6.546047602826404, 0.0, 0.0, 3.0, 6.2464646380602655], ws=[6.610194622988255, 0.0, 0.0, 3.0, 6.044444436040064], res=[-0.06414702016185103, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.120e-01
2026-01-26 17:54:13,094 - INFO - integration_test - Dyn residual k=2: pred=[6.9101946229882545, 0.0, 0.0, 3.0, 6.344444436040064], ws=[7.000646115419396, 0.0, 0.0, 3.0, 7.0515151431107705], res=[-0.09045149243114192, 0.0, 0.0, 0.0, -0.7070707070707067], res_norm=7.128e-01
2026-01-26 17:54:13,103 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,136 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,156 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,198 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,211 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,241 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,252 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,276 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,286 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,310 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,320 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,343 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,353 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,376 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,386 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,411 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,421 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,444 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,518 - INFO - integration_test - Step 23: MPC solve successful
2026-01-26 17:54:13,523 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-26 17:54:13,523 - DEBUG - integration_test - Step 23: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:13,523 - INFO - integration_test - === Applying control at step 23 ===
2026-01-26 17:54:13,523 - INFO - integration_test -   Control dict from planner: {'a': 1.3493949096391954e-08, 'w': 0.0}
2026-01-26 17:54:13,523 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:13,523 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:13,525 - INFO - integration_test - Step 23 completed in 0.467s
2026-01-26 17:54:13,534 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-26 17:54:13,534 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[6.19999999 0.         0.         3.00000003 6.29999999]
2026-01-26 17:54:13,535 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.078m, drift=0.178m)
2026-01-26 17:54:13,535 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-26 17:54:13,535 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:13,547 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(6.200, 0.000), path_start=(0.000, 0.000), dist=6.200m
2026-01-26 17:54:13,547 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-26 17:54:13,550 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:13,570 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:13,570 - INFO - integration_test - Warmstart k=0: x0=6.199999993069414 , y0=0.0 , psi0=0.0 , v0=3.0000000294758964 , spline0=6.299999994543209 , a0=0.0 , w0=0.0
2026-01-26 17:54:13,570 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:13,571 - INFO - integration_test - Dyn residual k=0: pred=[6.499999996017004, 0.0, 0.0, 3.0000000294758964, 6.599999997490799], ws=[6.679780941491876, 0.0, 0.0, 3.0, 6.7515151460583605], res=[-0.17978094547487178, 0.0, 0.0, 2.9475896390351863e-08, -0.15151514856756165], res_norm=2.351e-01
2026-01-26 17:54:13,572 - INFO - integration_test - Dyn residual k=1: pred=[6.9797809414918754, 0.0, 0.0, 3.0, 7.05151514605836], ws=[7.099511566124356, 0.0, 0.0, 3.0, 6.849494944038159], res=[-0.11973062463248052, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.348e-01
2026-01-26 17:54:13,572 - INFO - integration_test - Dyn residual k=2: pred=[7.399511566124356, 0.0, 0.0, 3.0, 7.1494949440381586], ws=[7.5707445637194795, 0.0, 0.0, 3.0, 7.654545449088663], res=[-0.17123299759512367, 0.0, 0.0, 0.0, -0.5050505050505043], res_norm=5.333e-01
2026-01-26 17:54:13,582 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,615 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,626 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,650 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,661 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,684 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,693 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,716 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,726 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,749 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,759 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,782 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,792 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,816 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,826 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,850 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,860 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:13,883 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:13,960 - INFO - integration_test - Step 24: MPC solve successful
2026-01-26 17:54:13,964 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-26 17:54:13,965 - DEBUG - integration_test - Step 24: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:13,965 - INFO - integration_test - === Applying control at step 24 ===
2026-01-26 17:54:13,965 - INFO - integration_test -   Control dict from planner: {'a': -2.5232366841223653e-08, 'w': 0.0}
2026-01-26 17:54:13,965 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:13,965 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:13,966 - INFO - integration_test - Step 24 completed in 0.432s
2026-01-26 17:54:13,973 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-26 17:54:13,974 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[6.5        0.         0.         3.00000003 6.6       ]
2026-01-26 17:54:13,974 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.071m, drift=0.171m)
2026-01-26 17:54:13,974 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-26 17:54:13,974 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:13,987 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(6.500, 0.000), path_start=(0.000, 0.000), dist=6.500m
2026-01-26 17:54:13,987 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-26 17:54:13,991 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:14,012 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:14,013 - INFO - integration_test - Warmstart k=0: x0=6.4999999958908425 , y0=0.0 , psi0=0.0 , v0=3.0000000269526597 , spline0=6.599999997238475 , a0=0.0 , w0=0.0
2026-01-26 17:54:14,013 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:14,013 - INFO - integration_test - Dyn residual k=0: pred=[6.799999998586109, 0.0, 0.0, 3.0000000269526597, 6.899999999933741], ws=[6.974738769616418, 0.0, 0.0, 3.0, 7.0515151487536265], res=[-0.17473877103030944, 0.0, 0.0, 2.695265965968474e-08, -0.15151514881988515], res_norm=2.313e-01
2026-01-26 17:54:14,014 - INFO - integration_test - Dyn residual k=1: pred=[7.274738769616418, 0.0, 0.0, 3.0, 7.351515148753626], ws=[7.387141433689424, 0.0, 0.0, 3.0, 7.149494946733425], res=[-0.11240266407300581, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.312e-01
2026-01-26 17:54:14,015 - INFO - integration_test - Dyn residual k=2: pred=[7.6871414336894235, 0.0, 0.0, 3.0, 7.449494946733425], ws=[7.84772446193811, 0.0, 0.0, 3.0, 7.752525249763727], res=[-0.16058302824868687, 0.0, 0.0, 0.0, -0.30303030303030276], res_norm=3.429e-01
2026-01-26 17:54:14,027 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,063 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,076 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,104 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,117 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,144 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,156 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,184 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,195 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,223 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,234 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,260 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,273 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,301 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,313 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,339 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,352 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,378 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,471 - INFO - integration_test - Step 25: MPC solve successful
2026-01-26 17:54:14,476 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-26 17:54:14,476 - DEBUG - integration_test - Step 25: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:14,476 - INFO - integration_test - === Applying control at step 25 ===
2026-01-26 17:54:14,476 - INFO - integration_test -   Control dict from planner: {'a': -8.051869665253297e-08, 'w': 0.0}
2026-01-26 17:54:14,476 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:14,476 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:14,477 - INFO - integration_test - Step 25 completed in 0.504s
2026-01-26 17:54:14,487 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-26 17:54:14,487 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.8        0.         0.         3.00000002 6.9       ]
2026-01-26 17:54:14,488 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.065m, drift=0.165m)
2026-01-26 17:54:14,488 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-26 17:54:14,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:14,501 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.800, 0.000), path_start=(0.000, 0.000), dist=6.800m
2026-01-26 17:54:14,501 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-26 17:54:14,504 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:14,527 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:14,527 - INFO - integration_test - Warmstart k=0: x0=6.799999998183515 , y0=0.0 , psi0=0.0 , v0=3.00000001890079 , spline0=6.899999999128554 , a0=0.0 , w0=0.0
2026-01-26 17:54:14,527 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:14,528 - INFO - integration_test - Dyn residual k=0: pred=[7.100000000073594, 0.0, 0.0, 3.00000001890079, 7.200000001018633], ws=[7.269696596448651, 0.0, 0.0, 3.0, 7.3515151506437055], res=[-0.16969659637505696, 0.0, 0.0, 1.8900789822140496e-08, -0.15151514962507218], res_norm=2.275e-01
2026-01-26 17:54:14,529 - INFO - integration_test - Dyn residual k=1: pred=[7.569696596448651, 0.0, 0.0, 3.0, 7.651515150643705], ws=[7.674771298852486, 0.0, 0.0, 3.0, 7.449494948623504], res=[-0.10507470240383476, 0.0, 0.0, 0.0, 0.20202020202020154], res_norm=2.277e-01
2026-01-26 17:54:14,530 - INFO - integration_test - Dyn residual k=2: pred=[7.9747712988524855, 0.0, 0.0, 3.0, 7.749494948623504], ws=[8.124704356141976, 0.0, 0.0, 3.0, 7.345454544583099], res=[-0.14993305728949036, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.310e-01
2026-01-26 17:54:14,540 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,576 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,587 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,613 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,625 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,652 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,663 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,690 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,702 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,726 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,737 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,762 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,773 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,799 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,809 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,836 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,846 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:14,873 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:14,968 - INFO - integration_test - Step 26: MPC solve successful
2026-01-26 17:54:14,972 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-26 17:54:14,972 - DEBUG - integration_test - Step 26: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:14,972 - INFO - integration_test - === Applying control at step 26 ===
2026-01-26 17:54:14,972 - INFO - integration_test -   Control dict from planner: {'a': 1.0378475675992825e-07, 'w': 0.0}
2026-01-26 17:54:14,972 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:14,972 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:14,974 - INFO - integration_test - Step 26 completed in 0.487s
2026-01-26 17:54:14,983 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-26 17:54:14,983 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[7.1        0.         0.         3.00000003 7.2       ]
2026-01-26 17:54:14,984 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.059m, drift=0.159m)
2026-01-26 17:54:14,984 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-26 17:54:14,984 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:14,997 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(7.100, 0.000), path_start=(0.000, 0.000), dist=7.100m
2026-01-26 17:54:14,997 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-26 17:54:14,999 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:15,020 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:15,020 - INFO - integration_test - Warmstart k=0: x0=7.100000000592518 , y0=0.0 , psi0=0.0 , v0=3.0000000292792657 , spline0=7.2000000020564805 , a0=0.0 , w0=0.0
2026-01-26 17:54:15,020 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:15,021 - INFO - integration_test - Dyn residual k=0: pred=[7.400000003520444, 0.0, 0.0, 3.0000000292792657, 7.5000000049844076], ws=[7.564654424586758, 0.0, 0.0, 3.0, 7.44949495155143], res=[-0.1646544210663139, 0.0, 0.0, 2.927926567863892e-08, 0.0505050534329774], res_norm=1.722e-01
2026-01-26 17:54:15,022 - INFO - integration_test - Dyn residual k=1: pred=[7.864654424586758, 0.0, 0.0, 3.0, 7.74949495155143], ws=[7.962401167050222, 0.0, 0.0, 3.0, 7.74949495155143], res=[-0.09774674246346482, 0.0, 0.0, 0.0, 0.0], res_norm=9.775e-02
2026-01-26 17:54:15,023 - INFO - integration_test - Dyn residual k=2: pred=[8.262401167050223, 0.0, 0.0, 3.0, 8.04949495155143], ws=[8.401684255893045, 0.0, 0.0, 3.0, 7.645454547511026], res=[-0.1392830888428218, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.274e-01
2026-01-26 17:54:15,033 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,068 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,081 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,108 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,119 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,146 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,158 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,183 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,196 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,223 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,235 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,261 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,272 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,299 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,311 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,337 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,349 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,375 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,480 - INFO - integration_test - Step 27: MPC solve successful
2026-01-26 17:54:15,485 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-26 17:54:15,485 - DEBUG - integration_test - Step 27: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:15,485 - INFO - integration_test - === Applying control at step 27 ===
2026-01-26 17:54:15,485 - INFO - integration_test -   Control dict from planner: {'a': -4.4071091762540124e-08, 'w': 0.0}
2026-01-26 17:54:15,485 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:15,485 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:15,487 - INFO - integration_test - Step 27 completed in 0.504s
2026-01-26 17:54:15,498 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-26 17:54:15,498 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[7.4        0.         0.         3.00000002 7.5       ]
2026-01-26 17:54:15,499 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.053m, drift=0.153m)
2026-01-26 17:54:15,499 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-26 17:54:15,500 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:15,513 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(7.400, 0.000), path_start=(0.000, 0.000), dist=7.400m
2026-01-26 17:54:15,513 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-26 17:54:15,517 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:15,539 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:15,539 - INFO - integration_test - Warmstart k=0: x0=7.400000003300089 , y0=0.0 , psi0=0.0 , v0=3.0000000248721563 , spline0=7.500000004543696 , a0=0.0 , w0=0.0
2026-01-26 17:54:15,539 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:15,540 - INFO - integration_test - Dyn residual k=0: pred=[7.700000005787304, 0.0, 0.0, 3.0000000248721563, 7.800000007030912], ws=[7.859612252391878, 0.0, 0.0, 3.0, 7.749494954038646], res=[-0.15961224660457418, 0.0, 0.0, 2.487215633451001e-08, 0.05050505299226593], res_norm=1.674e-01
2026-01-26 17:54:15,541 - INFO - integration_test - Dyn residual k=1: pred=[8.159612252391879, 0.0, 0.0, 3.0, 8.049494954038646], ws=[8.250031033997116, 0.0, 0.0, 3.0, 8.049494954038646], res=[-0.09041878160523709, 0.0, 0.0, 0.0, 0.0], res_norm=9.042e-02
2026-01-26 17:54:15,541 - INFO - integration_test - Dyn residual k=2: pred=[8.550031033997117, 0.0, 0.0, 3.0, 8.349494954038647], ws=[8.678664153059314, 0.0, 0.0, 3.0, 7.945454549998242], res=[-0.1286331190621972, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.240e-01
2026-01-26 17:54:15,551 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,586 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,598 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,625 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,638 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,665 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,677 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,704 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,717 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,746 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,758 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,786 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,799 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,826 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,839 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,867 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:15,878 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:15,906 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,006 - INFO - integration_test - Step 28: MPC solve successful
2026-01-26 17:54:16,011 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-26 17:54:16,011 - DEBUG - integration_test - Step 28: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:16,011 - INFO - integration_test - === Applying control at step 28 ===
2026-01-26 17:54:16,011 - INFO - integration_test -   Control dict from planner: {'a': -2.260419191372305e-07, 'w': 0.0}
2026-01-26 17:54:16,011 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:16,011 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:16,012 - INFO - integration_test - Step 28 completed in 0.514s
2026-01-26 17:54:16,022 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-26 17:54:16,023 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[7.7 0.  0.  3.  7.8]
2026-01-26 17:54:16,023 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.047m, drift=0.147m)
2026-01-26 17:54:16,023 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-26 17:54:16,023 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:16,037 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(7.700, 0.000), path_start=(0.000, 0.000), dist=7.700m
2026-01-26 17:54:16,037 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-26 17:54:16,039 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:16,062 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:16,062 - INFO - integration_test - Warmstart k=0: x0=7.700000004657094 , y0=0.0 , psi0=0.0 , v0=3.0000000022679645 , spline0=7.800000004770492 , a0=0.0 , w0=0.0
2026-01-26 17:54:16,062 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:16,064 - INFO - integration_test - Dyn residual k=0: pred=[8.00000000488389, 0.0, 0.0, 3.0000000022679645, 8.10000000499729], ws=[8.154570076654272, 0.0, 0.0, 3.0, 8.049494954265443], res=[-0.1545700717703813, 0.0, 0.0, 2.2679644828826895e-09, 0.050505050731846524], res_norm=1.626e-01
2026-01-26 17:54:16,065 - INFO - integration_test - Dyn residual k=1: pred=[8.454570076654273, 0.0, 0.0, 3.0, 8.349494954265444], ws=[8.53766089421534, 0.0, 0.0, 3.0, 8.349494954265444], res=[-0.08309081756106806, 0.0, 0.0, 0.0, 0.0], res_norm=8.309e-02
2026-01-26 17:54:16,065 - INFO - integration_test - Dyn residual k=2: pred=[8.837660894215341, 0.0, 0.0, 3.0, 8.649494954265444], ws=[8.955644038866676, 0.0, 0.0, 3.0, 8.24545455022504], res=[-0.11798314465133508, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.209e-01
2026-01-26 17:54:16,075 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,110 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,122 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,149 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,160 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,186 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,197 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,224 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,235 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,262 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,273 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,303 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,313 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,341 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,353 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,380 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,391 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,417 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,526 - INFO - integration_test - Step 29: MPC solve successful
2026-01-26 17:54:16,531 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-26 17:54:16,531 - DEBUG - integration_test - Step 29: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:16,531 - INFO - integration_test - === Applying control at step 29 ===
2026-01-26 17:54:16,531 - INFO - integration_test -   Control dict from planner: {'a': 2.691549868382006e-07, 'w': 0.0}
2026-01-26 17:54:16,531 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:16,531 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:16,532 - INFO - integration_test - Step 29 completed in 0.510s
2026-01-26 17:54:16,547 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-26 17:54:16,548 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[8.00000001 0.         0.         3.00000003 8.10000001]
2026-01-26 17:54:16,549 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.041m, drift=0.141m)
2026-01-26 17:54:16,549 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-26 17:54:16,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:16,561 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(8.000, 0.000), path_start=(0.000, 0.000), dist=8.000m
2026-01-26 17:54:16,561 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-26 17:54:16,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:16,585 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:16,585 - INFO - integration_test - Warmstart k=0: x0=8.000000006229666 , y0=0.0 , psi0=0.0 , v0=3.000000029183463 , spline0=8.10000000768884 , a0=0.0 , w0=0.0
2026-01-26 17:54:16,585 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:16,586 - INFO - integration_test - Dyn residual k=0: pred=[8.300000009148013, 0.0, 0.0, 3.000000029183463, 8.400000010607187], ws=[8.449527904248482, 0.0, 0.0, 3.0, 8.34949495718379], res=[-0.14952789510046927, 0.0, 0.0, 2.9183463201576387e-08, 0.05050505342339662], res_norm=1.578e-01
2026-01-26 17:54:16,587 - INFO - integration_test - Dyn residual k=1: pred=[8.749527904248483, 0.0, 0.0, 3.0, 8.64949495718379], ws=[8.825290762294333, 0.0, 0.0, 3.0, 8.64949495718379], res=[-0.07576285804585048, 0.0, 0.0, 0.0, 0.0], res_norm=7.576e-02
2026-01-26 17:54:16,587 - INFO - integration_test - Dyn residual k=2: pred=[9.125290762294334, 0.0, 0.0, 3.0, 8.949494957183791], ws=[9.232623939116888, 0.0, 0.0, 3.0, 8.545454553143387], res=[-0.10733317682255361, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.181e-01
2026-01-26 17:54:16,598 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,633 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,644 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,668 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,679 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,702 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,712 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,735 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,745 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,768 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,778 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,801 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,812 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,836 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,846 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,869 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,879 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:16,902 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:16,968 - INFO - integration_test - Step 30: MPC solve successful
2026-01-26 17:54:16,972 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-26 17:54:16,972 - DEBUG - integration_test - Step 30: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:16,972 - INFO - integration_test - === Applying control at step 30 ===
2026-01-26 17:54:16,972 - INFO - integration_test -   Control dict from planner: {'a': -1.2830667097771314e-07, 'w': 0.0}
2026-01-26 17:54:16,972 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:16,972 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:16,973 - INFO - integration_test - Step 30 completed in 0.425s
2026-01-26 17:54:16,980 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-26 17:54:16,981 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[8.30000001 0.         0.         3.00000002 8.40000001]
2026-01-26 17:54:16,982 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.035m, drift=0.135m)
2026-01-26 17:54:16,982 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-26 17:54:16,982 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:16,993 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(8.300, 0.000), path_start=(0.000, 0.000), dist=8.300m
2026-01-26 17:54:16,993 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-26 17:54:16,996 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:17,016 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:17,016 - INFO - integration_test - Warmstart k=0: x0=8.300000008506478 , y0=0.0 , psi0=0.0 , v0=3.000000016352796 , spline0=8.400000009324119 , a0=0.0 , w0=0.0
2026-01-26 17:54:17,016 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:17,017 - INFO - integration_test - Dyn residual k=0: pred=[8.600000010141757, 0.0, 0.0, 3.000000016352796, 8.700000010959398], ws=[8.744485730768199, 0.0, 0.0, 3.0, 8.64949495881907], res=[-0.1444857206264416, 0.0, 0.0, 1.6352796006202652e-08, 0.05050505214032874], res_norm=1.531e-01
2026-01-26 17:54:17,017 - INFO - integration_test - Dyn residual k=1: pred=[9.0444857307682, 0.0, 0.0, 3.0, 8.94949495881907], ws=[9.112920626713738, 0.0, 0.0, 3.0, 8.94949495881907], res=[-0.06843489594553809, 0.0, 0.0, 0.0, 0.0], res_norm=6.843e-02
2026-01-26 17:54:17,018 - INFO - integration_test - Dyn residual k=2: pred=[9.412920626713738, 0.0, 0.0, 3.0, 9.24949495881907], ws=[9.509603831950503, 0.0, 0.0, 3.0, 8.845454554778666], res=[-0.09668320523676499, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.154e-01
2026-01-26 17:54:17,027 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,058 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,069 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,093 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,103 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,126 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,136 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,159 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,169 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,192 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,202 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,226 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,235 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,258 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,268 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,294 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,305 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,330 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,420 - INFO - integration_test - Step 31: MPC solve successful
2026-01-26 17:54:17,427 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-26 17:54:17,427 - DEBUG - integration_test - Step 31: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:17,427 - INFO - integration_test - === Applying control at step 31 ===
2026-01-26 17:54:17,427 - INFO - integration_test -   Control dict from planner: {'a': 1.0541943779816335e-07, 'w': 0.0}
2026-01-26 17:54:17,427 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:17,428 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:17,429 - INFO - integration_test - Step 31 completed in 0.448s
2026-01-26 17:54:17,443 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-26 17:54:17,444 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[8.60000001 0.         0.         3.00000003 8.70000001]
2026-01-26 17:54:17,445 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.029m, drift=0.129m)
2026-01-26 17:54:17,445 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-26 17:54:17,445 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:17,462 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(8.600, 0.000), path_start=(0.000, 0.000), dist=8.600m
2026-01-26 17:54:17,462 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-26 17:54:17,467 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:17,494 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:17,494 - INFO - integration_test - Warmstart k=0: x0=8.600000010668854 , y0=0.0 , psi0=0.0 , v0=3.0000000268947398 , spline0=8.700000012013593 , a0=0.0 , w0=0.0
2026-01-26 17:54:17,494 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:17,495 - INFO - integration_test - Dyn residual k=0: pred=[8.900000013358328, 0.0, 0.0, 3.0000000268947398, 9.000000014703067], ws=[9.039443558466271, 0.0, 0.0, 3.0, 8.949494961508544], res=[-0.13944354510794277, 0.0, 0.0, 2.6894739768579257e-08, 0.0505050531945237], res_norm=1.483e-01
2026-01-26 17:54:17,496 - INFO - integration_test - Dyn residual k=1: pred=[9.339443558466272, 0.0, 0.0, 3.0, 9.249494961508544], ws=[9.400550494190352, 0.0, 0.0, 3.0, 9.249494961508544], res=[-0.0611069357240801, 0.0, 0.0, 0.0, 0.0], res_norm=6.111e-02
2026-01-26 17:54:17,497 - INFO - integration_test - Dyn residual k=2: pred=[9.700550494190352, 0.0, 0.0, 3.0, 9.549494961508545], ws=[9.786583730571934, 0.0, 0.0, 3.0, 9.14545455746814], res=[-0.08603323638158145, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.131e-01
2026-01-26 17:54:17,507 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,541 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,553 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,578 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,590 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,618 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,629 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,654 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,665 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,692 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,703 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,731 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,741 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,768 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,778 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,802 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,812 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,835 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:17,904 - INFO - integration_test - Step 32: MPC solve successful
2026-01-26 17:54:17,909 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-26 17:54:17,909 - DEBUG - integration_test - Step 32: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:17,909 - INFO - integration_test - === Applying control at step 32 ===
2026-01-26 17:54:17,909 - INFO - integration_test -   Control dict from planner: {'a': 9.495540885005004e-09, 'w': 0.0}
2026-01-26 17:54:17,909 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:17,909 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:17,910 - INFO - integration_test - Step 32 completed in 0.466s
2026-01-26 17:54:17,917 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-26 17:54:17,918 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[8.90000001 0.         0.         3.00000003 9.00000001]
2026-01-26 17:54:17,918 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.022m, drift=0.122m)
2026-01-26 17:54:17,918 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-26 17:54:17,919 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:17,930 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(8.900, 0.000), path_start=(0.000, 0.000), dist=8.900m
2026-01-26 17:54:17,930 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-26 17:54:17,932 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:17,951 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:17,951 - INFO - integration_test - Warmstart k=0: x0=8.900000013405805 , y0=0.0 , psi0=0.0 , v0=3.000000027844294 , spline0=9.000000014798022 , a0=0.0 , w0=0.0
2026-01-26 17:54:17,951 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:17,952 - INFO - integration_test - Dyn residual k=0: pred=[9.200000016190234, 0.0, 0.0, 3.000000027844294, 9.300000017582452], ws=[9.334401386642856, 0.0, 0.0, 3.0, 9.249494964292973], res=[-0.1344013704526219, 0.0, 0.0, 2.784429398161592e-08, 0.05050505328947885], res_norm=1.436e-01
2026-01-26 17:54:17,953 - INFO - integration_test - Dyn residual k=1: pred=[9.634401386642857, 0.0, 0.0, 3.0, 9.549494964292974], ws=[9.688180362005873, 0.0, 0.0, 3.0, 9.549494964292974], res=[-0.05377897536301646, 0.0, 0.0, 0.0, 0.0], res_norm=5.378e-02
2026-01-26 17:54:17,953 - INFO - integration_test - Dyn residual k=2: pred=[9.988180362005874, 0.0, 0.0, 3.0, 9.849494964292974], ws=[10.063563629329375, 0.0, 0.0, 3.0, 9.44545456025257], res=[-0.07538326732350065, 0.0, 0.0, 0.0, 0.40404040404040487], res_norm=4.110e-01
2026-01-26 17:54:17,962 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:17,992 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,002 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,026 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,036 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,060 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,070 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,094 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,104 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,127 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,137 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,160 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,170 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,193 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,203 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,226 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,236 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,259 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,325 - INFO - integration_test - Step 33: MPC solve successful
2026-01-26 17:54:18,329 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-26 17:54:18,330 - DEBUG - integration_test - Step 33: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:18,330 - INFO - integration_test - === Applying control at step 33 ===
2026-01-26 17:54:18,330 - INFO - integration_test -   Control dict from planner: {'a': 6.008327849156093e-09, 'w': 0.0}
2026-01-26 17:54:18,330 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:18,330 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:18,331 - INFO - integration_test - Step 33 completed in 0.413s
2026-01-26 17:54:18,338 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-26 17:54:18,339 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[9.20000002 0.         0.         3.00000003 9.30000002]
2026-01-26 17:54:18,340 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.016m, drift=0.116m)
2026-01-26 17:54:18,340 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-26 17:54:18,340 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:18,351 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(9.200, 0.000), path_start=(0.000, 0.000), dist=9.200m
2026-01-26 17:54:18,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-26 17:54:18,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:18,371 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:18,371 - INFO - integration_test - Warmstart k=0: x0=9.200000016220276 , y0=0.0 , psi0=0.0 , v0=3.0000000284451267 , spline0=9.300000017642535 , a0=0.0 , w0=0.0
2026-01-26 17:54:18,371 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:18,371 - INFO - integration_test - Dyn residual k=0: pred=[9.500000019064789, 0.0, 0.0, 3.0000000284451267, 9.600000020487048], ws=[9.629359214940107, 0.0, 0.0, 3.0, 9.549494967137486], res=[-0.12935919587531863, 0.0, 0.0, 2.844512669852861e-08, 0.050505053349562345], res_norm=1.389e-01
2026-01-26 17:54:18,372 - INFO - integration_test - Dyn residual k=1: pred=[9.929359214940108, 0.0, 0.0, 3.0, 9.849494967137487], ws=[9.975810230004766, 0.0, 0.0, 3.0, 9.849494967137487], res=[-0.04645101506465821, 0.0, 0.0, 0.0, 0.0], res_norm=4.645e-02
2026-01-26 17:54:18,373 - INFO - integration_test - Dyn residual k=2: pred=[10.275810230004767, 0.0, 0.0, 3.0, 10.149494967137487], ws=[10.340543528361323, 0.0, 0.0, 3.0, 9.753535362980347], res=[-0.06473329835655584, 0.0, 0.0, 0.0, 0.3959596041571398], res_norm=4.012e-01
2026-01-26 17:54:18,381 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,413 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,424 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,448 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,459 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,483 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,493 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,519 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,529 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,552 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,561 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,584 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,594 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,617 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,628 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,650 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,660 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,685 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,760 - INFO - integration_test - Step 34: MPC solve successful
2026-01-26 17:54:18,765 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-26 17:54:18,765 - DEBUG - integration_test - Step 34: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:18,765 - INFO - integration_test - === Applying control at step 34 ===
2026-01-26 17:54:18,766 - INFO - integration_test -   Control dict from planner: {'a': -1.3399604350504345e-08, 'w': 0.0}
2026-01-26 17:54:18,766 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:18,766 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:18,767 - INFO - integration_test - Step 34 completed in 0.428s
2026-01-26 17:54:18,780 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-26 17:54:18,781 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[9.50000002 0.         0.         3.00000003 9.60000002]
2026-01-26 17:54:18,782 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.010m, drift=0.110m)
2026-01-26 17:54:18,782 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-26 17:54:18,783 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:18,795 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(9.500, 0.000), path_start=(0.000, 0.000), dist=9.500m
2026-01-26 17:54:18,796 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-26 17:54:18,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:18,821 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:18,821 - INFO - integration_test - Warmstart k=0: x0=9.50000001899779 , y0=0.0 , psi0=0.0 , v0=3.000000027105166 , spline0=9.600000020353052 , a0=0.0 , w0=0.0
2026-01-26 17:54:18,821 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:18,822 - INFO - integration_test - Dyn residual k=0: pred=[9.800000021708307, 0.0, 0.0, 3.000000027105166, 9.90000002306357], ws=[9.924317043054792, 0.0, 0.0, 3.0, 9.849494969848003], res=[-0.12431702134648503, 0.0, 0.0, 2.710516611159619e-08, 0.05050505321556642], res_norm=1.342e-01
2026-01-26 17:54:18,823 - INFO - integration_test - Dyn residual k=1: pred=[10.224317043054793, 0.0, 0.0, 3.0, 10.149494969848003], ws=[10.263440097609474, 0.0, 0.0, 3.0, 10.149494959568683], res=[-0.03912305455468079, 0.0, 0.0, 0.0, 1.0279320505901524e-08], res_norm=3.912e-02
2026-01-26 17:54:18,824 - INFO - integration_test - Dyn residual k=2: pred=[10.563440097609474, 0.0, 0.0, 3.0, 10.449494959568684], ws=[10.617523426691527, 0.0, 0.0, 3.0, 10.48989899956155], res=[-0.0540833290820526, 0.0, 0.0, 0.0, -0.04040403999286646], res_norm=6.751e-02
2026-01-26 17:54:18,834 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,869 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,882 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,908 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,920 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,946 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,956 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:18,982 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:18,993 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,020 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,030 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,054 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,089 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,100 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,126 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,136 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,159 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,241 - INFO - integration_test - Step 35: MPC solve successful
2026-01-26 17:54:19,245 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-26 17:54:19,245 - DEBUG - integration_test - Step 35: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:19,245 - INFO - integration_test - === Applying control at step 35 ===
2026-01-26 17:54:19,245 - INFO - integration_test -   Control dict from planner: {'a': -2.007623420482658e-06, 'w': 0.0}
2026-01-26 17:54:19,245 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:19,245 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:19,246 - INFO - integration_test - Step 35 completed in 0.465s
2026-01-26 17:54:19,254 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-26 17:54:19,255 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[9.80000001 0.         0.         2.99999983 9.9       ]
2026-01-26 17:54:19,256 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.004m, drift=0.104m)
2026-01-26 17:54:19,256 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-26 17:54:19,256 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:19,267 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(9.800, 0.000), path_start=(0.000, 0.000), dist=9.800m
2026-01-26 17:54:19,267 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-26 17:54:19,270 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:19,287 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:19,287 - INFO - integration_test - Warmstart k=0: x0=9.800000011670189 , y0=0.0 , psi0=0.0 , v0=2.9999998263428242 , spline0=9.900000002987335 , a0=0.0 , w0=0.0
2026-01-26 17:54:19,287 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:19,288 - INFO - integration_test - Dyn residual k=0: pred=[10.099999994304472, 0.0, 0.0, 2.9999998263428242, 10.199999985621618], ws=[10.219274815669452, 0.0, 0.0, 2.9999998263428242, 10.149494942378377], res=[-0.11927482136498035, 0.0, 0.0, 0.0, 0.05050504324324123], res_norm=1.295e-01
2026-01-26 17:54:19,288 - INFO - integration_test - Dyn residual k=1: pred=[10.519274798303735, 0.0, 0.0, 2.9999998263428242, 10.44949492501266], ws=[10.6898453539443, 0.0, 0.0, 2.9999998263428242, 10.48989897482856], res=[-0.17057055564056434, 0.0, 0.0, 0.0, -0.04040404981589951], res_norm=1.753e-01
2026-01-26 17:54:19,289 - INFO - integration_test - Dyn residual k=2: pred=[10.989845336578583, 0.0, 0.0, 2.9999998263428242, 10.789898957462842], ws=[11.096190182495581, 0.0, 0.0, 2.9999998263428242, 10.818181795859175], res=[-0.10634484591699866, 0.0, 0.0, 0.0, -0.02828283839633272], res_norm=1.100e-01
2026-01-26 17:54:19,298 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,328 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,338 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,362 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,372 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,394 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,405 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,429 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,439 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,463 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,473 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,496 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,505 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,530 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,540 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,563 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,573 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,596 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,679 - INFO - integration_test - Step 36: MPC solve successful
2026-01-26 17:54:19,683 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-26 17:54:19,683 - DEBUG - integration_test - Step 36: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:19,683 - INFO - integration_test - === Applying control at step 36 ===
2026-01-26 17:54:19,683 - INFO - integration_test -   Control dict from planner: {'a': 2.0338761418813952e-06, 'w': 0.0}
2026-01-26 17:54:19,684 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:19,684 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:19,685 - INFO - integration_test - Step 36 completed in 0.430s
2026-01-26 17:54:19,692 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-26 17:54:19,692 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[10.1         0.          0.          3.00000003 10.20000001]
2026-01-26 17:54:19,693 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.002m, drift=0.098m)
2026-01-26 17:54:19,693 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-26 17:54:19,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:19,704 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(10.100, 0.000), path_start=(0.000, 0.000), dist=10.100m
2026-01-26 17:54:19,704 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.100m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:19,704 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-26 17:54:19,707 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:19,726 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:19,726 - INFO - integration_test - Warmstart k=0: x0=10.100000004473852 , y0=0.0 , psi0=0.0 , v0=3.0000000297304386 , spline0=10.20000000596038 , a0=0.0 , w0=0.0
2026-01-26 17:54:19,726 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:19,727 - INFO - integration_test - Dyn residual k=0: pred=[10.400000007446895, 0.0, 0.0, 3.0000000297304386, 10.500000008933423], ws=[10.514232662983886, 0.0, 0.0, 3.0, 10.010101013231715], res=[-0.11423265553699125, 0.0, 0.0, 2.9730438555475303e-08, 0.4898989957017079], res_norm=5.030e-01
2026-01-26 17:54:19,728 - INFO - integration_test - Dyn residual k=1: pred=[10.814232662983887, 0.0, 0.0, 3.0, 10.310101013231716], ws=[10.977475283147719, 0.0, 0.0, 3.0, 10.353535356545647], res=[-0.16324262016383173, 0.0, 0.0, 0.0, -0.04343434331393148], res_norm=1.689e-01
2026-01-26 17:54:19,729 - INFO - integration_test - Dyn residual k=2: pred=[11.27747528314772, 0.0, 0.0, 3.0, 10.653535356545648], ws=[11.373170204044326, 0.0, 0.0, 3.0, 11.134343436932287], res=[-0.09569492089660692, 0.0, 0.0, 0.0, -0.48080808038663925], res_norm=4.902e-01
2026-01-26 17:54:19,738 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,769 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,779 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,803 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,813 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,837 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,847 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,870 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,880 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,904 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,914 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,939 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,949 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:19,973 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:19,984 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,009 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,019 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,044 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,162 - INFO - integration_test - Step 37: MPC solve successful
2026-01-26 17:54:20,166 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-26 17:54:20,166 - DEBUG - integration_test - Step 37: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:20,166 - INFO - integration_test - === Applying control at step 37 ===
2026-01-26 17:54:20,166 - INFO - integration_test -   Control dict from planner: {'a': -3.552131955005687e-05, 'w': 0.0}
2026-01-26 17:54:20,166 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:20,166 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:20,167 - INFO - integration_test - Step 37 completed in 0.475s
2026-01-26 17:54:20,175 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-26 17:54:20,176 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[10.39999983  0.          0.          2.99999648 10.49999965]
2026-01-26 17:54:20,176 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.008m, drift=0.092m)
2026-01-26 17:54:20,176 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-26 17:54:20,177 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:20,188 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(10.400, 0.000), path_start=(0.000, 0.000), dist=10.400m
2026-01-26 17:54:20,188 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.400m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:20,188 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-26 17:54:20,190 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:20,210 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:20,210 - INFO - integration_test - Warmstart k=0: x0=10.399999829840299 , y0=0.0 , psi0=0.0 , v0=2.9999964775984838 , spline0=10.499999653720229 , a0=0.0 , w0=0.0
2026-01-26 17:54:20,210 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:20,211 - INFO - integration_test - Dyn residual k=0: pred=[10.699999477600148, 0.0, 0.0, 2.9999964775984838, 10.799999301480078], ws=[10.8091894449375, 0.0, 0.0, 2.9999964775984838, 10.539393600717613], res=[-0.1091899673373522, 0.0, 0.0, 0.0, 0.2606057007624649], res_norm=2.826e-01
2026-01-26 17:54:20,212 - INFO - integration_test - Dyn residual k=1: pred=[11.109189092697349, 0.0, 0.0, 2.9999964775984838, 10.839393248477462], ws=[11.265102842008016, 0.0, 0.0, 2.9999964775984838, 10.684847975389054], res=[-0.15591374931066682, 0.0, 0.0, 0.0, 0.1545452730884076], res_norm=2.195e-01
2026-01-26 17:54:20,212 - INFO - integration_test - Dyn residual k=2: pred=[11.565102489767865, 0.0, 0.0, 2.9999964775984838, 10.984847623148903], ws=[11.650145958675669, 0.0, 0.0, 2.9999964775984838, 11.00403975214131], res=[-0.0850434689078039, 0.0, 0.0, 0.0, -0.01919212899240641], res_norm=8.718e-02
2026-01-26 17:54:20,222 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,254 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,264 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,289 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,300 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,325 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,336 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,363 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,374 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,399 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,411 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,437 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,448 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,472 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,482 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,505 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,515 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,537 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,608 - INFO - integration_test - Step 38: MPC solve successful
2026-01-26 17:54:20,612 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-26 17:54:20,612 - DEBUG - integration_test - Step 38: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:20,612 - INFO - integration_test - === Applying control at step 38 ===
2026-01-26 17:54:20,612 - INFO - integration_test -   Control dict from planner: {'a': -0.0011222421174785105, 'w': 0.0}
2026-01-26 17:54:20,612 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:20,612 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:20,613 - INFO - integration_test - Step 38 completed in 0.438s
2026-01-26 17:54:20,622 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-26 17:54:20,623 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[10.69999387  0.          0.          2.99988425 10.79998808]
2026-01-26 17:54:20,623 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.014m, drift=0.086m)
2026-01-26 17:54:20,623 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-26 17:54:20,624 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:20,635 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(10.700, 0.000), path_start=(0.000, 0.000), dist=10.700m
2026-01-26 17:54:20,635 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.700m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:20,635 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-26 17:54:20,637 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:20,655 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:20,655 - INFO - integration_test - Warmstart k=0: x0=10.69999386638956 , y0=0.0 , psi0=0.0 , v0=2.999884253386736 , spline0=10.799988079058902 , a0=0.0 , w0=0.0
2026-01-26 17:54:20,655 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:20,656 - INFO - integration_test - Dyn residual k=0: pred=[10.999982291728234, 0.0, 0.0, 2.999884253386736, 11.099976504397576], ws=[11.104113423580753, 0.0, 0.0, 2.999884253386736, 11.044434001954478], res=[-0.10413113185251888, 0.0, 0.0, 0.0, 0.055542502443097774], res_norm=1.180e-01
2026-01-26 17:54:20,656 - INFO - integration_test - Dyn residual k=1: pred=[11.404101848919426, 0.0, 0.0, 2.999884253386736, 11.344422427293152], ws=[11.552658336494538, 0.0, 0.0, 2.999884253386736, 11.177762190993889], res=[-0.14855648757511197, 0.0, 0.0, 0.0, 0.16666023629926308], res_norm=2.233e-01
2026-01-26 17:54:20,657 - INFO - integration_test - Dyn residual k=2: pred=[11.852646761833212, 0.0, 0.0, 2.999884253386736, 11.477750616332562], ws=[11.926992589521078, 0.0, 0.0, 2.999884253386736, 11.730284655029514], res=[-0.0743458276878659, 0.0, 0.0, 0.0, -0.2525340386969521], res_norm=2.633e-01
2026-01-26 17:54:20,666 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,696 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,706 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,730 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,740 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,762 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,774 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,798 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,809 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,835 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,845 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,868 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,878 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,902 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,911 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,935 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:20,945 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:20,969 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,036 - INFO - integration_test - Step 39: MPC solve successful
2026-01-26 17:54:21,041 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-26 17:54:21,041 - DEBUG - integration_test - Step 39: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:21,041 - INFO - integration_test - === Applying control at step 39 ===
2026-01-26 17:54:21,041 - INFO - integration_test -   Control dict from planner: {'a': 0.00114931706642383, 'w': 0.0}
2026-01-26 17:54:21,041 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:21,041 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:21,042 - INFO - integration_test - Step 39 completed in 0.420s
2026-01-26 17:54:21,049 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-26 17:54:21,050 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[10.99998804  0.          0.          2.99999919 11.099988  ]
2026-01-26 17:54:21,051 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.020m, drift=0.080m)
2026-01-26 17:54:21,051 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-26 17:54:21,051 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:21,062 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(11.000, 0.000), path_start=(0.000, 0.000), dist=11.000m
2026-01-26 17:54:21,062 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=11.000m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:21,062 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-26 17:54:21,065 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:21,085 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:21,085 - INFO - integration_test - Warmstart k=0: x0=10.999988038313566 , y0=0.0 , psi0=0.0 , v0=2.9999991850933783 , spline0=11.09998799756824 , a0=0.0 , w0=0.0
2026-01-26 17:54:21,085 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:21,086 - INFO - integration_test - Dyn residual k=0: pred=[11.299987956822903, 0.0, 0.0, 2.9999991850933783, 11.399987916077578], ws=[11.399084142855958, 0.0, 0.0, 2.9999991850933783, 11.351510025002609], res=[-0.09909618603305503, 0.0, 0.0, 0.0, 0.04847789107496858], res_norm=1.103e-01
2026-01-26 17:54:21,087 - INFO - integration_test - Dyn residual k=1: pred=[11.699084061365296, 0.0, 0.0, 2.9999991850933783, 11.651509943511947], ws=[11.840328304586821, 0.0, 0.0, 2.9999991850933783, 11.47878271770354], res=[-0.14124424322152507, 0.0, 0.0, 0.0, 0.17272722580840671], res_norm=2.231e-01
2026-01-26 17:54:21,088 - INFO - integration_test - Dyn residual k=2: pred=[12.140328223096159, 0.0, 0.0, 2.9999991850933783, 11.778782636212878], ws=[12.204052132560845, 0.0, 0.0, 2.9999991850933783, 12.010096432975367], res=[-0.0637239094646862, 0.0, 0.0, 0.0, -0.23131379676248898], res_norm=2.399e-01
2026-01-26 17:54:21,096 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,127 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,137 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,162 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,172 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,196 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,206 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,230 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,240 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,263 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,272 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,296 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,305 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,328 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,337 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,361 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,371 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,394 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,468 - INFO - integration_test - Step 40: MPC solve successful
2026-01-26 17:54:21,472 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-26 17:54:21,473 - DEBUG - integration_test - Step 40: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:21,473 - INFO - integration_test - === Applying control at step 40 ===
2026-01-26 17:54:21,473 - INFO - integration_test -   Control dict from planner: {'a': 8.108639208671126e-06, 'w': 0.0}
2026-01-26 17:54:21,473 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:21,473 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:21,474 - INFO - integration_test - Step 40 completed in 0.424s
2026-01-26 17:54:21,482 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-26 17:54:21,482 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[11.299988  0.        0.        3.       11.399988]
2026-01-26 17:54:21,483 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.027m, drift=0.073m)
2026-01-26 17:54:21,483 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-26 17:54:21,483 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:21,494 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(11.300, 0.000), path_start=(0.000, 0.000), dist=11.300m
2026-01-26 17:54:21,494 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.300m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:21,494 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-26 17:54:21,496 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:21,514 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:21,514 - INFO - integration_test - Warmstart k=0: x0=11.299987997366099 , y0=0.0 , psi0=0.0 , v0=2.999999995957299 , spline0=11.39998799716397 , a0=0.0 , w0=0.0
2026-01-26 17:54:21,514 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:21,515 - INFO - integration_test - Dyn residual k=0: pred=[11.59998799696183, 0.0, 0.0, 2.999999995957299, 11.6999879967597], ws=[11.694042057281058, 0.0, 0.0, 2.999999995957299, 11.227267271254409], res=[-0.09405406031922858, 0.0, 0.0, 0.0, 0.4727207255052921], res_norm=4.820e-01
2026-01-26 17:54:21,516 - INFO - integration_test - Dyn residual k=1: pred=[11.994042056876788, 0.0, 0.0, 2.999999995957299, 11.527267270850139], ws=[12.127958447486714, 0.0, 0.0, 2.999999995957299, 12.010096523890414], res=[-0.13391639060992588, 0.0, 0.0, 0.0, -0.4828292530402756], res_norm=5.011e-01
2026-01-26 17:54:21,516 - INFO - integration_test - Dyn residual k=2: pred=[12.427958447082444, 0.0, 0.0, 2.999999995957299, 12.310096523486145], ws=[12.481032580844106, 0.0, 0.0, 2.999999995957299, 11.888884038768147], res=[-0.05307413376166181, 0.0, 0.0, 0.0, 0.4212124847179979], res_norm=4.245e-01
2026-01-26 17:54:21,525 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,569 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,586 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,625 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,636 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,662 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,671 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,694 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,727 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,737 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,760 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,770 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,795 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,806 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,829 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,839 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:21,863 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:21,933 - INFO - integration_test - Step 41: MPC solve successful
2026-01-26 17:54:21,938 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-26 17:54:21,938 - DEBUG - integration_test - Step 41: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:21,938 - INFO - integration_test - === Applying control at step 41 ===
2026-01-26 17:54:21,938 - INFO - integration_test -   Control dict from planner: {'a': 3.3562159203777835e-07, 'w': 0.0}
2026-01-26 17:54:21,938 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:21,938 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:21,940 - INFO - integration_test - Step 41 completed in 0.458s
2026-01-26 17:54:21,948 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-26 17:54:21,949 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[11.599988    0.          0.          3.00000003 11.699988  ]
2026-01-26 17:54:21,949 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.033m, drift=0.067m)
2026-01-26 17:54:21,949 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-26 17:54:21,950 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:21,963 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(11.600, 0.000), path_start=(0.000, 0.000), dist=11.600m
2026-01-26 17:54:21,963 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.600m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:21,963 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-26 17:54:21,965 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:21,986 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:21,986 - INFO - integration_test - Warmstart k=0: x0=11.599987998639937 , y0=0.0 , psi0=0.0 , v0=3.0000000295194584 , spline0=11.699988000115916 , a0=0.0 , w0=0.0
2026-01-26 17:54:21,986 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:21,987 - INFO - integration_test - Dyn residual k=0: pred=[11.899988001591883, 0.0, 0.0, 3.0000000295194584, 11.99998800306786], ws=[11.98899988531249, 0.0, 0.0, 3.0, 11.52524731318166], res=[-0.08901188372060709, 0.0, 0.0, 2.9519458433213686e-08, 0.47474068988620033], res_norm=4.830e-01
2026-01-26 17:54:21,988 - INFO - integration_test - Dyn residual k=1: pred=[12.28899988531249, 0.0, 0.0, 3.0, 11.825247313181661], ws=[12.415588317072515, 0.0, 0.0, 3.0, 11.888884040450876], res=[-0.126588431760025, 0.0, 0.0, 0.0, -0.06363672726921443], res_norm=1.417e-01
2026-01-26 17:54:21,989 - INFO - integration_test - Dyn residual k=2: pred=[12.715588317072516, 0.0, 0.0, 3.0, 12.188884040450876], ws=[12.758012484155591, 0.0, 0.0, 3.0, 12.608076929330398], res=[-0.04242416708307495, 0.0, 0.0, 0.0, -0.4191928888795218], res_norm=4.213e-01
2026-01-26 17:54:21,998 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,033 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,045 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,070 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,083 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,110 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,120 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,146 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,158 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,183 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,195 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,222 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,232 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,259 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,270 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,296 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,307 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,333 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,421 - INFO - integration_test - Step 42: MPC solve successful
2026-01-26 17:54:22,427 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-26 17:54:22,427 - DEBUG - integration_test - Step 42: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:22,427 - INFO - integration_test - === Applying control at step 42 ===
2026-01-26 17:54:22,427 - INFO - integration_test -   Control dict from planner: {'a': -6.23489212300979e-08, 'w': 0.0}
2026-01-26 17:54:22,427 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:22,427 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:22,428 - INFO - integration_test - Step 42 completed in 0.480s
2026-01-26 17:54:22,440 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-26 17:54:22,441 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[11.899988    0.          0.          3.00000002 11.999988  ]
2026-01-26 17:54:22,442 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.039m, drift=0.061m)
2026-01-26 17:54:22,442 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-26 17:54:22,442 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:22,456 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(11.900, 0.000), path_start=(0.000, 0.000), dist=11.900m
2026-01-26 17:54:22,457 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.900m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:22,457 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-26 17:54:22,460 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:22,482 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:22,482 - INFO - integration_test - Warmstart k=0: x0=11.89998800128014 , y0=0.0 , psi0=0.0 , v0=3.0000000232845663 , spline0=11.999988002444372 , a0=0.0 , w0=0.0
2026-01-26 17:54:22,482 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:22,483 - INFO - integration_test - Dyn residual k=0: pred=[12.199988003608595, 0.0, 0.0, 3.0000000232845663, 12.299988004772828], ws=[12.283957712886288, 0.0, 0.0, 3.0, 12.044439839322083], res=[-0.08396970927769232, 0.0, 0.0, 2.3284566275094676e-08, 0.25554816545074566], res_norm=2.690e-01
2026-01-26 17:54:22,483 - INFO - integration_test - Dyn residual k=1: pred=[12.583957712886289, 0.0, 0.0, 3.0, 12.344439839322083], ws=[12.70321818354981, 0.0, 0.0, 3.0, 12.383834142278314], res=[-0.11926047066352119, 0.0, 0.0, 0.0, -0.039394302956230476], res_norm=1.256e-01
2026-01-26 17:54:22,484 - INFO - integration_test - Dyn residual k=2: pred=[13.00321818354981, 0.0, 0.0, 3.0, 12.683834142278315], ws=[13.173767890710046, 0.0, 0.0, 3.0, 12.920198505766534], res=[-0.17054970716023554, 0.0, 0.0, 0.0, -0.2363643634882191], res_norm=2.915e-01
2026-01-26 17:54:22,495 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,529 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,540 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,566 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,578 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,605 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,617 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,645 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,656 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,685 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,697 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,726 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,738 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,768 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,780 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,807 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,819 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:22,847 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:22,928 - INFO - integration_test - Step 43: MPC solve successful
2026-01-26 17:54:22,933 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-26 17:54:22,934 - DEBUG - integration_test - Step 43: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:22,934 - INFO - integration_test - === Applying control at step 43 ===
2026-01-26 17:54:22,934 - INFO - integration_test -   Control dict from planner: {'a': 3.0289394463277696e-09, 'w': 0.0}
2026-01-26 17:54:22,934 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:22,934 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:22,935 - INFO - integration_test - Step 43 completed in 0.494s
2026-01-26 17:54:22,944 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-26 17:54:22,944 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[12.199988    0.          0.          3.00000002 12.299988  ]
2026-01-26 17:54:22,945 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.045m, drift=0.055m)
2026-01-26 17:54:22,945 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-26 17:54:22,945 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:22,959 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(12.200, 0.000), path_start=(0.000, 0.000), dist=12.200m
2026-01-26 17:54:22,959 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.200m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:22,959 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-26 17:54:22,961 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:22,984 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:22,984 - INFO - integration_test - Warmstart k=0: x0=12.19998800362374 , y0=0.0 , psi0=0.0 , v0=3.0000000235874604 , spline0=12.299988004803119 , a0=0.0 , w0=0.0
2026-01-26 17:54:22,984 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:22,986 - INFO - integration_test - Dyn residual k=0: pred=[12.499988005982487, 0.0, 0.0, 3.0000000235874604, 12.599988007161866], ws=[12.578915540307204, 0.0, 0.0, 3.0, 11.935348567645736], res=[-0.07892753432471622, 0.0, 0.0, 2.358746042929738e-08, 0.6646394395161295], res_norm=6.693e-01
2026-01-26 17:54:22,987 - INFO - integration_test - Dyn residual k=1: pred=[12.878915540307204, 0.0, 0.0, 3.0, 12.235348567645737], ws=[12.990848050083088, 0.0, 0.0, 3.0, 12.48989474917282], res=[-0.1119325097758832, 0.0, 0.0, 0.0, -0.25454618152708264], res_norm=2.781e-01
2026-01-26 17:54:22,988 - INFO - integration_test - Dyn residual k=2: pred=[13.290848050083088, 0.0, 0.0, 3.0, 12.78989474917282], ws=[13.450747787419957, 0.0, 0.0, 3.0, 12.802016324784848], res=[-0.15989973733686824, 0.0, 0.0, 0.0, -0.012121575612027868], res_norm=1.604e-01
2026-01-26 17:54:22,998 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,040 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,053 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,082 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,095 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,121 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,132 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,157 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,168 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,191 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,202 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,228 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,239 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,264 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,275 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,300 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,312 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,338 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,453 - INFO - integration_test - Step 44: MPC solve successful
2026-01-26 17:54:23,458 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-26 17:54:23,458 - DEBUG - integration_test - Step 44: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:23,458 - INFO - integration_test - === Applying control at step 44 ===
2026-01-26 17:54:23,458 - INFO - integration_test -   Control dict from planner: {'a': 6.20037418453681e-08, 'w': 0.0}
2026-01-26 17:54:23,458 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:23,458 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:23,459 - INFO - integration_test - Step 44 completed in 0.515s
2026-01-26 17:54:23,468 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-26 17:54:23,469 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[12.49998801  0.          0.          3.00000003 12.59998801]
2026-01-26 17:54:23,469 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.051m, drift=0.049m)
2026-01-26 17:54:23,470 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-26 17:54:23,470 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:23,483 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(12.500, 0.000), path_start=(0.000, 0.000), dist=12.500m
2026-01-26 17:54:23,483 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.500m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:23,483 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-26 17:54:23,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:23,505 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:23,505 - INFO - integration_test - Warmstart k=0: x0=12.499988006292506 , y0=0.0 , psi0=0.0 , v0=3.0000000297878344 , spline0=12.599988007781903 , a0=0.0 , w0=0.0
2026-01-26 17:54:23,505 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:23,506 - INFO - integration_test - Dyn residual k=0: pred=[12.79998800927129, 0.0, 0.0, 3.0000000297878344, 12.899988010760687], ws=[12.873873368671056, 0.0, 0.0, 3.0, 12.6333293359273], res=[-0.0738853593997657, 0.0, 0.0, 2.9787834421313164e-08, 0.266658674833387], res_norm=2.767e-01
2026-01-26 17:54:23,507 - INFO - integration_test - Dyn residual k=1: pred=[13.173873368671057, 0.0, 0.0, 3.0, 12.9333293359273], ws=[13.278477918457133, 0.0, 0.0, 3.0, 13.214138264669995], res=[-0.10460454978607636, 0.0, 0.0, 0.0, -0.2808089287426938], res_norm=2.997e-01
2026-01-26 17:54:23,507 - INFO - integration_test - Dyn residual k=2: pred=[13.578477918457134, 0.0, 0.0, 3.0, 13.514138264669995], ws=[13.72772768727548, 0.0, 0.0, 3.0, 13.555552890618202], res=[-0.14924976881834695, 0.0, 0.0, 0.0, -0.04141462594820666], res_norm=1.549e-01
2026-01-26 17:54:23,516 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,549 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,559 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,584 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,595 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,620 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,631 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,654 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,665 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,688 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,698 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,722 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,731 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,755 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,765 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,790 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,800 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,824 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:23,901 - INFO - integration_test - Step 45: MPC solve successful
2026-01-26 17:54:23,905 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-26 17:54:23,905 - DEBUG - integration_test - Step 45: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:23,905 - INFO - integration_test - === Applying control at step 45 ===
2026-01-26 17:54:23,905 - INFO - integration_test -   Control dict from planner: {'a': -1.333372566992823e-06, 'w': 0.0}
2026-01-26 17:54:23,905 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:23,906 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:23,907 - INFO - integration_test - Step 45 completed in 0.438s
2026-01-26 17:54:23,914 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-26 17:54:23,915 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[12.799988   0.         0.         2.9999999 12.899988 ]
2026-01-26 17:54:23,916 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.057m, drift=0.043m)
2026-01-26 17:54:23,916 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-26 17:54:23,916 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:23,927 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(12.800, 0.000), path_start=(0.000, 0.000), dist=12.800m
2026-01-26 17:54:23,927 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.800m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:23,927 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-26 17:54:23,929 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:23,949 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:23,949 - INFO - integration_test - Warmstart k=0: x0=12.799988002604426 , y0=0.0 , psi0=0.0 , v0=2.9999998964505776 , spline0=12.89998799742696 , a0=0.0 , w0=0.0
2026-01-26 17:54:23,949 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:23,950 - INFO - integration_test - Dyn residual k=0: pred=[13.099987992249483, 0.0, 0.0, 2.9999998964505776, 13.199987987072017], ws=[13.16883116211288, 0.0, 0.0, 2.9999998964505776, 12.52726835893528], res=[-0.06884316986339734, 0.0, 0.0, 0.0, 0.672719628136738], res_norm=6.762e-01
2026-01-26 17:54:23,951 - INFO - integration_test - Dyn residual k=1: pred=[13.468831151757938, 0.0, 0.0, 2.9999998964505776, 12.827268348580336], ws=[13.566107710394418, 0.0, 0.0, 2.9999998964505776, 13.292926135299433], res=[-0.0972765586364801, 0.0, 0.0, 0.0, -0.4656577867190972], res_norm=4.757e-01
2026-01-26 17:54:23,952 - INFO - integration_test - Dyn residual k=2: pred=[13.866107700039475, 0.0, 0.0, 2.9999998964505776, 13.59292612494449], ws=[14.004707450359502, 0.0, 0.0, 2.9999998964505776, 13.622219548080473], res=[-0.13859975032002758, 0.0, 0.0, 0.0, -0.029293423135982266], res_norm=1.417e-01
2026-01-26 17:54:23,961 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:23,991 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,002 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,026 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,036 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,059 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,069 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,094 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,107 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,130 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,140 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,164 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,173 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,200 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,211 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,235 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,246 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,270 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,393 - INFO - integration_test - Step 46: MPC solve successful
2026-01-26 17:54:24,398 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-26 17:54:24,399 - DEBUG - integration_test - Step 46: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:24,399 - INFO - integration_test - === Applying control at step 46 ===
2026-01-26 17:54:24,399 - INFO - integration_test -   Control dict from planner: {'a': 1.2797886419004288e-06, 'w': 0.0}
2026-01-26 17:54:24,399 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:24,399 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:24,400 - INFO - integration_test - Step 46 completed in 0.485s
2026-01-26 17:54:24,423 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-26 17:54:24,425 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[13.099988    0.          0.          3.00000002 13.199988  ]
2026-01-26 17:54:24,426 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.063m, drift=0.037m)
2026-01-26 17:54:24,426 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-26 17:54:24,427 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:24,441 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(13.100, 0.000), path_start=(0.000, 0.000), dist=13.100m
2026-01-26 17:54:24,441 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=13.100m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:24,441 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-26 17:54:24,443 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:24,468 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:24,469 - INFO - integration_test - Warmstart k=0: x0=13.099987998648427 , y0=0.0 , psi0=0.0 , v0=3.000000024429442 , spline0=13.199987999869904 , a0=0.0 , w0=0.0
2026-01-26 17:54:24,469 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:24,470 - INFO - integration_test - Dyn residual k=0: pred=[13.399988001091371, 0.0, 0.0, 3.000000024429442, 13.499988002312849], ws=[13.463789000672167, 0.0, 0.0, 3.0, 12.833329333289969], res=[-0.06380099958079555, 0.0, 0.0, 2.4429442024853643e-08, 0.6666586690228797], res_norm=6.697e-01
2026-01-26 17:54:24,471 - INFO - integration_test - Dyn residual k=1: pred=[13.763789000672167, 0.0, 0.0, 3.0, 13.13332933328997], ws=[13.853737613409251, 0.0, 0.0, 3.0, 13.371714020167854], res=[-0.08994861273708388, 0.0, 0.0, 0.0, -0.23838468687788428], res_norm=2.548e-01
2026-01-26 17:54:24,471 - INFO - integration_test - Dyn residual k=2: pred=[14.153737613409252, 0.0, 0.0, 3.0, 13.671714020167855], ws=[14.281687420383065, 0.0, 0.0, 3.0, 13.927270545430893], res=[-0.1279498069738132, 0.0, 0.0, 0.0, -0.25555652526303874], res_norm=2.858e-01
2026-01-26 17:54:24,482 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,518 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,531 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,559 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,571 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,598 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,611 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,639 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,651 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,677 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,688 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,713 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,723 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,746 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,756 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,779 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,789 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,814 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,900 - INFO - integration_test - Step 47: MPC solve successful
2026-01-26 17:54:24,905 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-26 17:54:24,905 - DEBUG - integration_test - Step 47: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:24,905 - INFO - integration_test - === Applying control at step 47 ===
2026-01-26 17:54:24,905 - INFO - integration_test -   Control dict from planner: {'a': -4.376525561972794e-07, 'w': 0.0}
2026-01-26 17:54:24,905 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:24,905 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:24,906 - INFO - integration_test - Step 47 completed in 0.482s
2026-01-26 17:54:24,914 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-26 17:54:24,914 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[13.399988    0.          0.          2.99999998 13.499988  ]
2026-01-26 17:54:24,915 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.069m, drift=0.031m)
2026-01-26 17:54:24,915 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-26 17:54:24,915 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:24,926 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(13.400, 0.000), path_start=(0.000, 0.000), dist=13.400m
2026-01-26 17:54:24,926 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.400m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:24,926 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-26 17:54:24,928 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:24,947 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:24,947 - INFO - integration_test - Warmstart k=0: x0=13.399987998903107 , y0=0.0 , psi0=0.0 , v0=2.9999999806641866 , spline0=13.499987997936323 , a0=0.0 , w0=0.0
2026-01-26 17:54:24,947 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:24,948 - INFO - integration_test - Dyn residual k=0: pred=[13.699987996969526, 0.0, 0.0, 2.9999999806641866, 13.799987996002741], ws=[13.758746818858478, 0.0, 0.0, 2.9999999806641866, 13.559593170788515], res=[-0.05875882188895254, 0.0, 0.0, 0.0, 0.24039482521422606], res_norm=2.475e-01
2026-01-26 17:54:24,948 - INFO - integration_test - Dyn residual k=1: pred=[14.058746816924897, 0.0, 0.0, 2.9999999806641866, 13.859593168854934], ws=[14.141367460322869, 0.0, 0.0, 2.9999999806641866, 14.106058786980174], res=[-0.0826206433979717, 0.0, 0.0, 0.0, -0.24646561812524048], res_norm=2.599e-01
2026-01-26 17:54:24,949 - INFO - integration_test - Dyn residual k=2: pred=[14.441367458389287, 0.0, 0.0, 2.9999999806641866, 14.406058785046593], ws=[14.558667282380364, 0.0, 0.0, 2.9999999806641866, 14.434342221427837], res=[-0.11729982399107719, 0.0, 0.0, 0.0, -0.028283436381244087], res_norm=1.207e-01
2026-01-26 17:54:24,958 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:24,989 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:24,999 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,111 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,123 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,150 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,162 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,193 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,207 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,237 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,250 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,279 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,293 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,322 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,334 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,362 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,374 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,402 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,555 - INFO - integration_test - Step 48: MPC solve successful
2026-01-26 17:54:25,561 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-26 17:54:25,561 - DEBUG - integration_test - Step 48: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:25,561 - INFO - integration_test - === Applying control at step 48 ===
2026-01-26 17:54:25,561 - INFO - integration_test -   Control dict from planner: {'a': -1.6871780340006406e-06, 'w': 0.0}
2026-01-26 17:54:25,561 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:25,561 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:25,562 - INFO - integration_test - Step 48 completed in 0.648s
2026-01-26 17:54:25,570 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-26 17:54:25,571 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[13.69998799  0.          0.          2.99999981 13.79998798]
2026-01-26 17:54:25,571 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.076m, drift=0.024m)
2026-01-26 17:54:25,571 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-26 17:54:25,572 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:25,583 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(13.700, 0.000), path_start=(0.000, 0.000), dist=13.700m
2026-01-26 17:54:25,583 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.700m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:25,583 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-26 17:54:25,585 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:25,605 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:25,605 - INFO - integration_test - Warmstart k=0: x0=13.699987988533636 , y0=0.0 , psi0=0.0 , v0=2.9999998119463833 , spline0=13.799987979130961 , a0=0.0 , w0=0.0
2026-01-26 17:54:25,605 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:25,606 - INFO - integration_test - Dyn residual k=0: pred=[13.999987969728274, 0.0, 0.0, 2.9999998119463833, 14.099987960325599], ws=[14.053704588545635, 0.0, 0.0, 2.9999998119463833, 13.867674457032185], res=[-0.05371661881736145, 0.0, 0.0, 0.0, 0.2323135032934136], res_norm=2.384e-01
2026-01-26 17:54:25,607 - INFO - integration_test - Dyn residual k=1: pred=[14.353704569740273, 0.0, 0.0, 2.9999998119463833, 14.167674438226824], ws=[14.428997203692328, 0.0, 0.0, 2.9999998119463833, 13.981815989367316], res=[-0.07529263395205454, 0.0, 0.0, 0.0, 0.18585844885950742], res_norm=2.005e-01
2026-01-26 17:54:25,608 - INFO - integration_test - Dyn residual k=2: pred=[14.728997184886966, 0.0, 0.0, 2.9999998119463833, 14.281815970561954], ws=[14.835646960834774, 0.0, 0.0, 2.9999998119463833, 14.732322622359337], res=[-0.10664977594780822, 0.0, 0.0, 0.0, -0.45050665179738303], res_norm=4.630e-01
2026-01-26 17:54:25,617 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,649 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,660 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,684 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,694 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,719 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,729 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,752 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,761 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,785 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,795 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,820 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,830 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,853 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,864 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,887 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:25,897 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:25,920 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,006 - INFO - integration_test - Step 49: MPC solve successful
2026-01-26 17:54:26,011 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-26 17:54:26,011 - DEBUG - integration_test - Step 49: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:26,011 - INFO - integration_test - === Applying control at step 49 ===
2026-01-26 17:54:26,011 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000185552365, 'w': 0.0}
2026-01-26 17:54:26,011 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:26,011 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:26,012 - INFO - integration_test - Step 49 completed in 0.442s
2026-01-26 17:54:26,021 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-26 17:54:26,022 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[13.98998797  0.          0.          2.79999981 14.07998796]
2026-01-26 17:54:26,023 - DEBUG - integration_test - Step 50: Using propagated spline 14.0800 (close to path, dist=0.092m, drift=0.002m)
2026-01-26 17:54:26,023 - DEBUG - integration_test -   Set spline state to 14.0800
2026-01-26 17:54:26,023 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:26,034 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(13.990, 0.000), path_start=(0.000, 0.000), dist=13.990m
2026-01-26 17:54:26,034 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.990m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-26 17:54:26,034 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-26 17:54:26,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-26 17:54:26,054 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-26 17:54:26,054 - INFO - integration_test - Warmstart k=0: x0=13.989987969635498 , y0=0.0 , psi0=0.0 , v0=2.79999981009086 , spline0=14.079987960140047 , a0=0.0 , w0=0.0
2026-01-26 17:54:26,055 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-26 17:54:26,055 - INFO - integration_test - Dyn residual k=0: pred=[14.269987950644584, 0.0, 0.0, 2.79999981009086, 14.359987941149132], ws=[14.402824599055522, 0.0, 0.0, 2.79999981009086, 13.974543262027115], res=[-0.13283664841093845, 0.0, 0.0, 0.0, 0.38544467912201696], res_norm=4.077e-01
2026-01-26 17:54:26,056 - INFO - integration_test - Dyn residual k=1: pred=[14.682824580064608, 0.0, 0.0, 2.79999981009086, 14.254543243036201], ws=[14.86403832360854, 0.0, 0.0, 2.79999981009086, 14.72929231930092], res=[-0.18121374354393183, 0.0, 0.0, 0.0, -0.47474907626471996], res_norm=5.082e-01
2026-01-26 17:54:26,057 - INFO - integration_test - Dyn residual k=2: pred=[15.144038304617625, 0.0, 0.0, 2.79999981009086, 15.009292300310006], ws=[15.115230643694101, 0.0, 0.0, 2.79999981009086, 14.384240957959673], res=[0.02880766092352438, 0.0, 0.0, 0.0, 0.6250513423503339], res_norm=6.257e-01
2026-01-26 17:54:26,066 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,098 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,109 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,132 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,142 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,166 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,176 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,206 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,217 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,242 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,252 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,275 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,285 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,309 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,319 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,342 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,352 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-26 17:54:26,376 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-26 17:54:26,465 - INFO - integration_test - Step 50: MPC solve successful
2026-01-26 17:54:26,469 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.080)
2026-01-26 17:54:26,470 - DEBUG - integration_test - Step 50: Captured 2 contouring constraint halfspaces for visualization
2026-01-26 17:54:26,470 - INFO - integration_test - === Applying control at step 50 ===
2026-01-26 17:54:26,470 - INFO - integration_test -   Control dict from planner: {'a': -1.9999993907581555, 'w': 0.0}
2026-01-26 17:54:26,470 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-26 17:54:26,470 - INFO - integration_test -   Planner output success: True
2026-01-26 17:54:26,471 - INFO - integration_test - Goal reached at step 50!
2026-01-26 17:54:26,471 - INFO - integration_test - Step 50 completed in 0.449s
2026-01-26 17:54:26,479 - INFO - integration_test - Goal reached at step 50, added 3 extra frames for visualization
2026-01-26 17:54:26,480 - INFO - integration_test - Saving test results...
2026-01-26 17:54:26,480 - INFO - integration_test - Saved 55 vehicle states to test_outputs/20260126_175402_contouring_contouring_contouring_unicycle/vehicle_states.csv
2026-01-26 17:54:26,480 - INFO - integration_test - Saved obstacle summary to test_outputs/20260126_175402_contouring_contouring_contouring_unicycle/obstacle_summary.csv
2026-01-26 17:54:26,480 - INFO - integration_test - Saved state history: 55 vehicle states, 0 obstacles
2026-01-26 17:54:26,480 - INFO - integration_test - Creating animation...
2026-01-26 17:54:26,518 - DEBUG - integration_test - Creating animation with 55 frames (range: 0 to 54)
2026-01-26 17:54:26,519 - DEBUG - integration_test - Frame 0: Drawing 2 contouring constraint halfspaces
2026-01-26 17:54:26,521 - DEBUG - integration_test - Frame 0: Drawing 2 contouring constraint halfspaces
2026-01-26 17:54:26,571 - DEBUG - integration_test - Frame 1: Drawing 2 contouring constraint halfspaces
2026-01-26 17:54:26,599 - DEBUG - integration_test - Frame 2: Drawing 2 contouring constraint halfspaces
2026-01-26 17:54:32,182 - INFO - integration_test - Saved animation with 55 frames at 10.00 fps to test_outputs/20260126_175402_contouring_contouring_contouring_unicycle/animation.gif (duration: 5.50s, size: 255802 bytes)
2026-01-26 17:54:32,209 - INFO - integration_test - Animation created successfully
2026-01-26 17:54:32,210 - INFO - integration_test - Test completed successfully
